!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports='<div id="m-attributions-container" class="m-control m-container m-attributions">\n    <button id=\'close-button\' class="{{icon}}"></button>\n</div>'},function(t){t.exports={exception:{impl:"The implementation used cannot create Attributions controls.",mode:"Options mode is bad setted. Tip: {mode: 1 | 2 | 3}.",type:"Missing 'type' options. When 'url' option is setted the plugin needs 'type' option. Values = geojson | kml | topojson.",layer_name:"Missing 'layerName' options. When 'url' option is setted the plugin needs 'layerName' option."},attribution:"attribution",tooltip:"Acknowledgments"}},function(t){t.exports={exception:{impl:"La implementación no puede crear controles de Attribution.",mode:"La opción 'mode' no ha sido establecida correctamente. Consejo: {mode: 1 | 2 | 3}.",type:"La opción 'type' no ha sido establecida. Cuando la opción 'url' es usada el plugin necesita la opción 'type'. Valores = geojson | kml | topojson.",layer_name:"La opción 'layerName' no ha sido establecida. Cuando la opción 'url' es usada el plugin necesita la opción 'layerName'."},attribution:"atribución",tooltip:"Reconocimientos"}},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=s(this,o(e).call(this))).map_=t,n}var n,r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,M.Object),n=e,(r=[{key:"registerEvent",value:function(t,e){this.map_.getMapImpl().on(t,e)}}])&&i(n.prototype,r),l&&i(n,l),e}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,f(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,M.impl.Control),n=e,(r=[{key:"addTo",value:function(t,n){var r=this;t.getMapImpl().getInteractions().forEach(function(t){t instanceof ol.interaction.DoubleClickZoom&&(r.dblClickInteraction_=t)}),g(f(e.prototype),"addTo",this).call(this,t,n)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&h(n.prototype,r),i&&h(n,i),e}(),d=n(0),y=n.n(d),m={en:n(1),es:n(2)},v=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e="es","function"==typeof M.language.getLang&&(e=M.language.getLang()),e),r=function(t){return m[t]}(n),i="";return M.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(n,"' has not been defined.")):i=t.split(".").reduce(function(t,e){return t[e]},r),i};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T,O,L,C,w,b,S=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(_)&&M.exception(v("exception.impl"));var i=new _;return(r=I(this,N(e).call(this,i,"Attributions"))).position=t,r.closePanel=n,r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,M.Control),n=e,(r=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise(function(t,n){var r=M.template.compileSync(y.a,{vars:{icon:"BR"===e.position||"TR"===e.position?"g-cartografia-flecha-derecha":"g-cartografia-flecha-izquierda"}});r.querySelector("#close-button").addEventListener("click",function(){return e.closePanel()}),e.html_=r,t(r)})}},{key:"equals",value:function(t){return t instanceof e}},{key:"destroy",value:function(){this.getImpl().destroy()}}])&&x(n.prototype,r),i&&x(n,i),e}(),P=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1};function A(){}class D{constructor(){D.constructor_.apply(this,arguments)}setOrdinate(t,e,n){}size(){}getOrdinate(t,e){}getCoordinate(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){arguments[0],arguments[1]}}getCoordinateCopy(t){}getDimension(){}getX(t){}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getClass(){return D}get interfaces_(){return[A]}}D.constructor_=function(){},D.X=0,D.Y=1,D.Z=2,D.M=3;class F{constructor(){F.constructor_.apply(this,arguments)}create(){if(1===arguments.length){if(arguments[0]instanceof Array){arguments[0]}else if(P(arguments[0],D)){arguments[0]}}else if(2===arguments.length){arguments[0],arguments[1]}}getClass(){return F}get interfaces_(){return[]}}function q(t){this.message=t}F.constructor_=function(){};class Y{constructor(){Y.constructor_.apply(this,arguments)}filter(t){}getClass(){return Y}get interfaces_(){return[]}}function G(){}function B(){}Y.constructor_=function(){};class U{constructor(){U.constructor_.apply(this,arguments)}static equalsWithTolerance(t,e,n){return Math.abs(t-e)<=n}getClass(){return U}get interfaces_(){return[]}}function X(t,e){this.low=0|e,this.high=0|t}function z(){}function k(){}function j(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}U.constructor_=function(){},X.toBinaryString=function(t){for(var e="",n=2147483648;n>0;n>>>=1)e+=(t.high&n)===n?"1":"0";for(n=2147483648;n>0;n>>>=1)e+=(t.low&n)===n?"1":"0";return e},z.isNaN=(t=>Number.isNaN(t)),z.isInfinite=(t=>!Number.isFinite(t)),z.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?(w=new Float64Array(1),b=new Int32Array(w.buffer),z.doubleToLongBits=function(t){w[0]=t;var e=0|b[0],n=0|b[1];return 2146435072==(2146435072&n)&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new X(n,e)},z.longBitsToDouble=function(t){return b[0]=t.low,b[1]=t.high,w[0]}):(T=Math.log2,O=Math.floor,L=Math.pow,C=function(){for(var t=53;t>0;t--){var e=L(2,t)-1;if(O(T(e))+1===t)return e}return 0}(),z.doubleToLongBits=function(t){var e,n,r,i,s,o,a,l,u;if(t<0||1/t===Number.NEGATIVE_INFINITY?(o=1<<31,t=-t):o=0,0===t)return new X(l=o,u=0);if(t===1/0)return new X(l=2146435072|o,u=0);if(t!=t)return new X(l=2146959360,u=0);if(i=0,u=0,(e=O(t))>1)if(e<=C)(i=O(T(e)))<=20?(u=0,l=e<<20-i&1048575):(u=e%(n=L(2,r=i-20))<<32-r,l=e/n&1048575);else for(r=e,u=0;0!==(r=O(n=r/2));)i++,u>>>=1,u|=(1&l)<<31,l>>>=1,n!==r&&(l|=524288);if(a=i+1023,s=0===e,e=t-e,i<52&&0!==e)for(r=0;;){if((n=2*e)>=1?(e=n-1,s?(a--,s=!1):(r<<=1,r|=1,i++)):(e=n,s?0==--a&&(i++,s=!1):(r<<=1,i++)),20===i)l|=r,r=0;else if(52===i){u|=r;break}if(1===n){i<20?l|=r<<20-i:i<52&&(u|=r<<52-i);break}}return l|=a<<20,new X(l|=o,u)},z.longBitsToDouble=function(t){var e,n,r,i,s=t.high,o=t.low;n=s&1<<31?-1:1,r=((2146435072&s)>>20)-1023,i=0,e=1<<19;for(var a=1;a<=20;a++)s&e&&(i+=L(2,-a)),e>>>=1;for(e=1<<31,a=21;a<=52;a++)o&e&&(i+=L(2,-a)),e>>>=1;if(-1023===r){if(0===i)return 0*n;r=-1022}else{if(1024===r)return 0===i?n/0:NaN;i+=1}return n*i*L(2,r)}),j.prototype=Object.create(Error.prototype),j.prototype.constructor=Error;class V extends j{constructor(){super(),V.constructor_.apply(this,arguments)}getClass(){return V}get interfaces_(){return[]}}V.constructor_=function(){if(0===arguments.length)j.constructor_.call(this);else if(1===arguments.length){let t=arguments[0];j.constructor_.call(this,t)}};class W{constructor(){W.constructor_.apply(this,arguments)}static shouldNeverReachHere(){if(0===arguments.length)W.shouldNeverReachHere(null);else if(1===arguments.length){let t=arguments[0];throw new V("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){let t=arguments[0];W.isTrue(t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(!t)throw null===e?new V:new V(e)}}static equals(){if(2===arguments.length){let t=arguments[0],e=arguments[1];W.equals(t,e,null)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];if(!e.equals(t))throw new V("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))}}getClass(){return W}get interfaces_(){return[]}}W.constructor_=function(){};class H{constructor(){H.constructor_.apply(this,arguments)}static hashCode(){if(1===arguments.length&&"number"==typeof arguments[0]){let e=arguments[0];var t=z.doubleToLongBits(e);return Math.trunc(t^t>>>32)}}setOrdinate(t,e){switch(t){case H.X:this.x=e;break;case H.Y:this.y=e;break;case H.Z:this.z=e;break;default:throw new q("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){let t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){let t=arguments[0],e=arguments[1];return!!U.equalsWithTolerance(this.x,t.x,e)&&!!U.equalsWithTolerance(this.y,t.y,e)}}getOrdinate(t){switch(t){case H.X:return this.x;case H.Y:return this.y;case H.Z:return this.z}throw new q("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||z.isNaN(this.z)&&z.isNaN(t.z))}equals(t){return t instanceof H&&this.equals2D(t)}equalInZ(t,e){return U.equalsWithTolerance(this.z,t.z,e)}compareTo(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return W.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new H(this)}toString(){return"("+this.x+", "+this.y+", "+this.z+")"}distance3D(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)}distance(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}hashCode(){var t=17;return t=37*(t=37*t+H.hashCode(this.x))+H.hashCode(this.y)}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.z}getClass(){return H}get interfaces_(){return[G,A,B]}}class Z{constructor(){Z.constructor_.apply(this,arguments)}static compare(t,e){return t<e?-1:t>e?1:z.isNaN(t)?z.isNaN(e)?0:-1:z.isNaN(e)?1:0}compare(t,e){var n=t,r=e,i=Z.compare(n.x,r.x);if(0!==i)return i;var s=Z.compare(n.y,r.y);return 0!==s?s:this._dimensionsToTest<=2?0:Z.compare(n.z,r.z)}getClass(){return Z}get interfaces_(){return[k]}}Z.constructor_=function(){if(this._dimensionsToTest=2,0===arguments.length)Z.constructor_.call(this,2);else if(1===arguments.length){let t=arguments[0];if(2!==t&&3!==t)throw new q("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}},H.DimensionalComparator=Z,H.constructor_=function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)H.constructor_.call(this,0,0);else if(1===arguments.length){let t=arguments[0];H.constructor_.call(this,t.x,t.y,t.z)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];H.constructor_.call(this,t,e,H.NULL_ORDINATE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this.x=t,this.y=e,this.z=n}},H.serialVersionUID=0x5cbf2c235c7e5800,H.NULL_ORDINATE=z.NaN,H.X=0,H.Y=1,H.Z=2;class K{constructor(){K.constructor_.apply(this,arguments)}static intersects(){if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){let i=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];var t=Math.min(o.x,a.x),e=Math.max(o.x,a.x),n=Math.min(i.x,s.x),r=Math.max(i.x,s.x);return!(n>e)&&(!(r<t)&&(t=Math.min(o.y,a.y),e=Math.max(o.y,a.y),n=Math.min(i.y,s.y),r=Math.max(i.y,s.y),!(n>e)&&!(r<t)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof K))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new K;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new K(e,r,n,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof H){let t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof K){let t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof K){let t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof H){let t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof H&&arguments[1]instanceof H){let t=arguments[0],e=arguments[1];return!this.isNull()&&(!((t.x<e.x?t.x:e.x)>this._maxx)&&(!((t.x>e.x?t.x:e.x)<this._minx)&&(!((t.y<e.y?t.y:e.y)>this._maxy)&&!((t.y>e.y?t.y:e.y)<this._miny))))}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof H){let t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof K){let t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){let t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof K){let t=arguments[0];return this.covers(t)}if(arguments[0]instanceof H){let t=arguments[0];return this.covers(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new H((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof H){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof K){let t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),n<r?(this._miny=n,this._maxy=r):(this._miny=r,this._maxy=n)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}hashCode(){var t=17;return t=37*(t=37*(t=37*(t=37*t+H.hashCode(this._minx))+H.hashCode(this._maxx))+H.hashCode(this._miny))+H.hashCode(this._maxy)}getClass(){return K}get interfaces_(){return[G,B]}}K.constructor_=function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof H){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof K){let t=arguments[0];this.init(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.init(t,e,n,r)}},K.serialVersionUID=0x51845cd552189800;class ${constructor(){$.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===$.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equals(){if(arguments[0]instanceof $){let t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){let e=arguments[0];if(!(e instanceof $))return!1;var t=e;return this.equalsExact(t)}}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply($.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){if(1===arguments.length){let e=arguments[0];var t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){let e=arguments[0],n=arguments[1];t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,n)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(t){if(t.getTypeCode()===$.TYPECODE_GEOMETRYCOLLECTION)throw new q("This method does not support GeometryCollection arguments")}equal(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}norm(){var t=this.copy();return t.normalize(),t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new K(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),s=r.next(),o=i.compareTo(s);if(0!==o)return o}return n.hasNext()?1:r.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isGeometryCollectionOrDerived(){return this.getTypeCode()===$.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===$.TYPECODE_MULTIPOINT||this.getTypeCode()===$.TYPECODE_MULTILINESTRING||this.getTypeCode()===$.TYPECODE_MULTIPOLYGON}get interfaces_(){return[A,G,B]}getClass(){return $}static hasNonEmptyElements(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}$.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},$.serialVersionUID=0x799ea46522854c00,$.TYPECODE_POINT=0,$.TYPECODE_MULTIPOINT=1,$.TYPECODE_LINESTRING=2,$.TYPECODE_LINEARRING=3,$.TYPECODE_MULTILINESTRING=4,$.TYPECODE_POLYGON=5,$.TYPECODE_MULTIPOLYGON=6,$.TYPECODE_GEOMETRYCOLLECTION=7,$.TYPENAME_POINT="Point",$.TYPENAME_MULTIPOINT="MultiPoint",$.TYPENAME_LINESTRING="LineString",$.TYPENAME_LINEARRING="LinearRing",$.TYPENAME_MULTILINESTRING="MultiLineString",$.TYPENAME_POLYGON="Polygon",$.TYPENAME_MULTIPOLYGON="MultiPolygon",$.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",$.geometryChangedFilter={get interfaces_(){return[Y]},filter(t){t.geometryChangedAction()}};class J{constructor(){J.constructor_.apply(this,arguments)}filter(t){}getClass(){return J}get interfaces_(){return[]}}J.constructor_=function(){};class Q{constructor(){Q.constructor_.apply(this,arguments)}isInBoundary(t){}getClass(){return Q}get interfaces_(){return[]}}class tt{constructor(){tt.constructor_.apply(this,arguments)}isInBoundary(t){return t%2==1}getClass(){return tt}get interfaces_(){return[Q]}}tt.constructor_=function(){};class et{constructor(){et.constructor_.apply(this,arguments)}isInBoundary(t){return t>0}getClass(){return et}get interfaces_(){return[Q]}}et.constructor_=function(){};class nt{constructor(){nt.constructor_.apply(this,arguments)}isInBoundary(t){return t>1}getClass(){return nt}get interfaces_(){return[Q]}}nt.constructor_=function(){};class rt{constructor(){rt.constructor_.apply(this,arguments)}isInBoundary(t){return 1===t}getClass(){return rt}get interfaces_(){return[Q]}}function it(){}function st(){}function ot(t){this.message=t||""}function at(){}function lt(t){this.message=t||""}function ut(t){this.message=t||""}function ht(){this.array_=[],arguments[0]instanceof st&&this.addAll(arguments[0])}rt.constructor_=function(){},Q.Mod2BoundaryNodeRule=tt,Q.EndPointBoundaryNodeRule=et,Q.MultiValentEndPointBoundaryNodeRule=nt,Q.MonoValentEndPointBoundaryNodeRule=rt,Q.constructor_=function(){},Q.MOD2_BOUNDARY_RULE=new tt,Q.ENDPOINT_BOUNDARY_RULE=new et,Q.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new nt,Q.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new rt,Q.OGC_SFS_BOUNDARY_RULE=Q.MOD2_BOUNDARY_RULE,it.prototype.hasNext=function(){},it.prototype.next=function(){},it.prototype.remove=function(){},st.prototype.add=function(){},st.prototype.addAll=function(){},st.prototype.isEmpty=function(){},st.prototype.iterator=function(){},st.prototype.size=function(){},st.prototype.toArray=function(){},st.prototype.remove=function(){},ot.prototype=new Error,ot.prototype.name="IndexOutOfBoundsException",at.prototype=Object.create(st.prototype),at.prototype.constructor=at,at.prototype.get=function(){},at.prototype.set=function(){},at.prototype.isEmpty=function(){},lt.prototype=new Error,lt.prototype.name="NoSuchElementException",ut.prototype=new Error,ut.prototype.name="OperationNotSupported",ht.prototype=Object.create(at.prototype),ht.prototype.constructor=ht,ht.prototype.ensureCapacity=function(){},ht.prototype.interfaces_=[at,st],ht.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},ht.prototype.clear=function(){this.array_=[]},ht.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ht.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},ht.prototype.iterator=function(){return new ct(this)},ht.prototype.get=function(t){if(t<0||t>=this.size())throw new ot;return this.array_[t]},ht.prototype.isEmpty=function(){return 0===this.array_.length},ht.prototype.size=function(){return this.array_.length},ht.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ht.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},ht.prototype.removeAll=function(t){for(var e=t.iterator();e.hasNext();)this.remove(e.next());return!0};var ct=function(t){this.arrayList_=t,this.position_=0};ct.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new lt;return this.arrayList_.get(this.position_++)},ct.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},ct.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},ct.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};class gt extends ht{constructor(){super(),gt.constructor_.apply(this,arguments)}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&P(arguments[0],st)){let n=arguments[0],r=arguments[1];for(var t=!1,e=n.iterator();e.hasNext();)this.add(e.next(),r),t=!0;return t}return super.addAll.apply(this,arguments)}clone(){for(var t=super.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){return this.toArray(gt.coordArrayType)}add(){if(1===arguments.length){let t=arguments[0];super.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof H&&"boolean"==typeof arguments[1]){let t=arguments[0];if(!arguments[1])if(this.size()>=1)if(this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let e=arguments[0],n=arguments[1];if(arguments[2])for(var t=0;t<e.length;t++)this.add(e[t],n);else for(t=e.length-1;t>=0;t--)this.add(e[t],n);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof H){let t=arguments[0],n=arguments[1];if(!arguments[2]){var e=this.size();if(e>0){if(t>0)if(this.get(t-1).equals2D(n))return null;if(t<e)if(this.get(t).equals2D(n))return null}}super.add.call(this,t,n)}}else if(4===arguments.length){let e=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];var n=1;i>s&&(n=-1);for(t=i;t!==s;t+=n)this.add(e[t],r);return!0}}closeRing(){this.size()>0&&this.add(new H(this.get(0)),!1)}getClass(){return gt}get interfaces_(){return[]}}gt.constructor_=function(){if(0===arguments.length);else if(1===arguments.length){let t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}},gt.coordArrayType=new Array(0).fill(null);class ft{constructor(){ft.constructor_.apply(this,arguments)}static log10(t){var e=Math.log(t);return z.isInfinite(e)?e:z.isNaN(e)?e:e/ft.LOG_10}static min(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){let e=arguments[0],n=arguments[1],r=arguments[2];return n>(t=e)&&(t=n),r>t&&(t=r),t}if(4===arguments.length){let e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];var t;return n>(t=e)&&(t=n),r>t&&(t=r),i>t&&(t=i),t}}static average(t,e){return(t+e)/2}getClass(){return ft}get interfaces_(){return[]}}function pt(){}ft.constructor_=function(){},ft.LOG_10=Math.log(10),pt.arraycopy=((t,e,n,r,i)=>{let s=0;for(let o=e;o<e+i;o++)n[r+s]=t[o],s++}),pt.getProperty=(t=>({"line.separator":"\n"})[t]);class _t{constructor(){_t.constructor_.apply(this,arguments)}static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(_t.indexOf(r,e)<0)return r}return null}static scroll(t,e){var n=_t.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);pt.arraycopy(t,n,r,0,t.length-n),pt.arraycopy(t,0,r,t.length-n,n),pt.arraycopy(r,0,t,0,t.length)}static equals(){if(2===arguments.length){let e=arguments[0],n=arguments[1];if(e===n)return!0;if(null===e||null===n)return!1;if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].equals(n[t]))return!1;return!0}if(3===arguments.length){let e=arguments[0],n=arguments[1],r=arguments[2];if(e===n)return!0;if(null===e||null===n)return!1;if(e.length!==n.length)return!1;for(t=0;t<e.length;t++)if(0!==r.compare(e[t],n[t]))return!1;return!0}}static intersection(t,e){for(var n=new gt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()}static hasRepeatedPoints(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){return _t.hasRepeatedPoints(t)?new gt(t,!1).toCoordinateArray():t}static reverse(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}}static removeNull(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;var i=0;for(n=0;n<t.length;n++)null!==t[n]&&(r[i++]=t[n]);return r}static copyDeep(){if(1===arguments.length){let n=arguments[0];for(var t=new Array(n.length).fill(null),e=0;e<n.length;e++)t[e]=new H(n[e]);return t}if(5===arguments.length){let t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],s=arguments[4];for(e=0;e<s;e++)r[i+e]=new H(t[n+e])}}static isEqualReversed(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0}static envelope(t){for(var e=new K,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}static toCoordinateArray(t){return t.toArray(_t.coordArrayType)}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}static increasingDirection(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1}static compare(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0}static minCoordinate(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}static extract(t,e,n){e=ft.clamp(e,0,t.length);var r=(n=ft.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var s=0,o=e;o<=n;o++)i[s++]=t[o];return i}getClass(){return _t}get interfaces_(){return[]}}class dt{constructor(){dt.constructor_.apply(this,arguments)}compare(t,e){var n=t,r=e;return _t.compare(n,r)}getClass(){return dt}get interfaces_(){return[k]}}dt.constructor_=function(){};class yt{constructor(){yt.constructor_.apply(this,arguments)}compare(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=_t.compare(n,r);return _t.isEqualReversed(n,r)?0:i}OLDcompare(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=_t.increasingDirection(n),s=_t.increasingDirection(r),o=i>0?0:n.length-1,a=s>0?0:n.length-1,l=0;l<n.length;l++){var u=n[o].compareTo(r[a]);if(0!==u)return u;o+=i,a+=s}return 0}getClass(){return yt}get interfaces_(){return[k]}}function mt(){}function vt(){}function Et(){}function xt(){this.array_=[],arguments[0]instanceof st&&this.addAll(arguments[0])}yt.constructor_=function(){},_t.ForwardComparator=dt,_t.BidirectionalComparator=yt,_t.constructor_=function(){},_t.coordArrayType=new Array(0).fill(null),mt.prototype.get=function(){},mt.prototype.put=function(){},mt.prototype.size=function(){},mt.prototype.values=function(){},mt.prototype.entrySet=function(){},vt.prototype=new mt,Et.prototype=new st,Et.prototype.contains=function(){},xt.prototype=new Et,xt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},xt.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},xt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},xt.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},xt.prototype.size=function(){return this.array_.length},xt.prototype.isEmpty=function(){return 0===this.array_.length},xt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},xt.prototype.iterator=function(){return new It(this)};var It=function(t){this.hashSet_=t,this.position_=0};It.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new lt;return this.hashSet_.array_[this.position_++]},It.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},It.prototype.remove=function(){throw new ut};const Nt=0;function Rt(t){return null==t?Nt:t.color}function Tt(t){return null==t?null:t.parent}function Ot(t,e){null!==t&&(t.color=e)}function Lt(t){return null==t?null:t.left}function Ct(t){return null==t?null:t.right}function wt(){this.root_=null,this.size_=0}wt.prototype=new vt,wt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},wt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var s=i.value;return i.value=e,s}i=i.right}}while(null!==i);var o={key:t,left:null,right:null,value:e,parent:n,color:Nt,getValue(){return this.value},getKey(){return this.key}};return r<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},wt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var e;if(Tt(t)==Lt(Tt(Tt(t))))1==Rt(e=Ct(Tt(Tt(t))))?(Ot(Tt(t),Nt),Ot(e,Nt),Ot(Tt(Tt(t)),1),t=Tt(Tt(t))):(t==Ct(Tt(t))&&(t=Tt(t),this.rotateLeft(t)),Ot(Tt(t),Nt),Ot(Tt(Tt(t)),1),this.rotateRight(Tt(Tt(t))));else 1==Rt(e=Lt(Tt(Tt(t))))?(Ot(Tt(t),Nt),Ot(e,Nt),Ot(Tt(Tt(t)),1),t=Tt(Tt(t))):(t==Lt(Tt(t))&&(t=Tt(t),this.rotateRight(t)),Ot(Tt(t),Nt),Ot(Tt(Tt(t)),1),this.rotateLeft(Tt(Tt(t))))}this.root_.color=Nt},wt.prototype.values=function(){var t=new ht,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=wt.successor(e));)t.add(e.value);return t},wt.prototype.entrySet=function(){var t=new xt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=wt.successor(e));)t.add(e);return t},wt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},wt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},wt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},wt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},wt.prototype.size=function(){return this.size_},wt.prototype.containsKey=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1};class bt{constructor(){bt.constructor_.apply(this,arguments)}getClass(){return bt}get interfaces_(){return[]}}function St(){}function Pt(){this.array_=[],arguments[0]instanceof st&&this.addAll(arguments[0])}bt.constructor_=function(){},St.prototype=new Et,Pt.prototype=new St,Pt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},Pt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Pt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Pt.prototype.remove=function(t){throw new ut},Pt.prototype.size=function(){return this.array_.length},Pt.prototype.isEmpty=function(){return 0===this.array_.length},Pt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Pt.prototype.iterator=function(){return new At(this)};var Mt,At=function(t){this.treeSet_=t,this.position_=0};function Dt(){}function Ft(){}At.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new lt;return this.treeSet_.array_[this.position_++]},At.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},At.prototype.remove=function(){throw new ut},Dt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)return r=function(t,e){return t.compareTo(e)},void i.sort(r);if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else{if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var s=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<s.length;t++)i.push(s[t]);return}if(4===arguments.length){for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),s=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<s.length;t++)i.push(s[t]);return}}},Dt.asList=function(t){for(var e=new ht,n=0,r=t.length;n<r;n++)e.add(t[n]);return e},Ft.isWhitespace=(t=>t<=32&&t>=0||127==t),Ft.toUpperCase=(t=>t.toUpperCase());class qt{constructor(){qt.constructor_.apply(this,arguments)}static toDimensionSymbol(t){switch(t){case qt.FALSE:return qt.SYM_FALSE;case qt.TRUE:return qt.SYM_TRUE;case qt.DONTCARE:return qt.SYM_DONTCARE;case qt.P:return qt.SYM_P;case qt.L:return qt.SYM_L;case qt.A:return qt.SYM_A}throw new q("Unknown dimension value: "+t)}static toDimensionValue(t){switch(Ft.toUpperCase(t)){case qt.SYM_FALSE:return qt.FALSE;case qt.SYM_TRUE:return qt.TRUE;case qt.SYM_DONTCARE:return qt.DONTCARE;case qt.SYM_P:return qt.P;case qt.SYM_L:return qt.L;case qt.SYM_A:return qt.A}throw new q("Unknown dimension symbol: "+t)}getClass(){return qt}get interfaces_(){return[]}}qt.constructor_=function(){},qt.P=0,qt.L=1,qt.A=2,qt.FALSE=-1,qt.TRUE=-2,qt.DONTCARE=-3,qt.SYM_FALSE="F",qt.SYM_TRUE="T",qt.SYM_DONTCARE="*",qt.SYM_P="0",qt.SYM_L="1",qt.SYM_A="2";class Yt{constructor(){Yt.constructor_.apply(this,arguments)}filter(t){}getClass(){return Yt}get interfaces_(){return[]}}Yt.constructor_=function(){};class Gt{constructor(){Gt.constructor_.apply(this,arguments)}filter(t,e){}isDone(){}isGeometryChanged(){}getClass(){return Gt}get interfaces_(){return[]}}Gt.constructor_=function(){};class Bt extends ${constructor(){super(),Bt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){for(var t=new K,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t}getArea(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var t=n;if(this._geometries.length!==t._geometries.length)return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].equalsExact(t._geometries[e],r))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dt.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){for(var t=qt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}getTypeCode(){return $.TYPECODE_GEOMETRYCOLLECTION}getDimension(){for(var t=qt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)}compareToSameClass(){if(1===arguments.length){let n=arguments[0];var t=new Pt(Dt.asList(this._geometries)),e=new Pt(Dt.asList(n._geometries));return this.compare(t,e)}if(2===arguments.length){let t=arguments[0],e=arguments[1];for(var n=t,r=this.getNumGeometries(),i=n.getNumGeometries(),s=0;s<r&&s<i;){var o=this.getGeometryN(s),a=n.getGeometryN(s),l=o.compareToSameClass(a,e);if(0!==l)return l;s++}return s<r?1:s<i?-1:0}}apply(){if(P(arguments[0],J)){let e=arguments[0];for(var t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(P(arguments[0],Gt)){let e=arguments[0];if(0===this._geometries.length)return null;for(t=0;t<this._geometries.length&&(this._geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Yt)){let e=arguments[0];e.filter(this);for(t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(P(arguments[0],Y)){let e=arguments[0];e.filter(this);for(t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}}getBoundary(){return this.checkNotGeometryCollection(this),W.shouldNeverReachHere(),null}getGeometryType(){return $.TYPENAME_GEOMETRYCOLLECTION}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Bt(t,this._factory)}isEmpty(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}getClass(){return Bt}get interfaces_(){return[]}}Bt.constructor_=function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if($.constructor_.call(this,e),null===t&&(t=[]),$.hasNullElements(t))throw new q("geometries must not contain null elements");this._geometries=t}},Bt.serialVersionUID=-0x4f07bcb1f857d800;class Ut extends Bt{constructor(){super(),Ut.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?qt.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return $.TYPECODE_MULTILINESTRING}getDimension(){return 1}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)}getBoundary(){return new Xt(this).getBoundary()}getGeometryType(){return $.TYPENAME_MULTILINESTRING}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Ut(t,this._factory)}getClass(){return Ut}get interfaces_(){return[bt]}}Ut.constructor_=function(){let t=arguments[0],e=arguments[1];Bt.constructor_.call(this,t,e)},Ut.serialVersionUID=0x7155d2ab4afa8000;class Xt{constructor(){Xt.constructor_.apply(this,arguments)}static getBoundary(){if(1===arguments.length){let t=arguments[0];return new Xt(t).getBoundary()}if(2===arguments.length){let t=arguments[0],e=arguments[1];return new Xt(t,e).getBoundary()}}boundaryMultiLineString(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)}getBoundary(){return this._geom instanceof Qt?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(t){var e=new ht;this._endpointMap=new wt;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var s=i.next(),o=s.getValue().count;this._bnRule.isInBoundary(o)&&e.add(s.getKey())}return _t.toCoordinateArray(e)}addEndpoint(t){var e=this._endpointMap.get(t);null===e&&(e=new zt,this._endpointMap.put(t,e)),e.count++}getClass(){return Xt}get interfaces_(){return[]}}Xt.constructor_=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){let t=arguments[0];Xt.constructor_.call(this,t,Q.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}};class zt{constructor(){zt.constructor_.apply(this,arguments)}getClass(){return zt}get interfaces_(){return[]}}zt.constructor_=function(){this.count=null};class kt{constructor(){kt.constructor_.apply(this,arguments)}static ofLine(t){var e=t.size();if(e<=1)return 0;var n=0,r=new H;t.getCoordinate(0,r);for(var i=r.x,s=r.y,o=1;o<e;o++){t.getCoordinate(o,r);var a=r.x,l=r.y,u=a-i,h=l-s;n+=Math.sqrt(u*u+h*h),i=a,s=l}return n}getClass(){return kt}get interfaces_(){return[]}}function jt(){}function Vt(){}function Wt(){}function Ht(){}function Zt(){}kt.constructor_=function(){};class Kt{constructor(){Kt.constructor_.apply(this,arguments)}static chars(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return new String(n)}static getStackTrace(){if(1===arguments.length){let n=arguments[0];var t=new Wt,e=new jt(t);return n.printStackTrace(e),t.toString()}if(2===arguments.length){let t=arguments[0],e=arguments[1];for(var n="",r=new Zt(new Vt(Kt.getStackTrace(t))),i=0;i<e;i++)try{n+=r.readLine()+Kt.NEWLINE}catch(t){if(!(t instanceof Ht))throw t;W.shouldNeverReachHere()}return n}}static split(t,e){for(var n=e.length,r=new ht,i=""+t,s=i.indexOf(e);s>=0;){var o=i.substring(0,s);r.add(o),s=(i=i.substring(s+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),l=0;l<a.length;l++)a[l]=r.get(l);return a}static toString(){if(1===arguments.length&&"number"==typeof arguments[0]){let t=arguments[0];return Kt.SIMPLE_ORDINATE_FORMAT.format(t)}}static spaces(t){return Kt.chars(" ",t)}getClass(){return Kt}get interfaces_(){return[]}}function $t(t){this.str=t}Kt.constructor_=function(){},Kt.NEWLINE=pt.getProperty("line.separator"),Kt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),$t.prototype.append=function(t){this.str+=t},$t.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},$t.prototype.toString=function(t){return this.str};class Jt{constructor(){Jt.constructor_.apply(this,arguments)}static copyCoord(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),s=0;s<i;s++)n.setOrdinate(r,s,t.getOrdinate(e,s))}static isRing(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,D.X)===t.getOrdinate(e-1,D.X)&&t.getOrdinate(0,D.Y)===t.getOrdinate(e-1,D.Y))}static isEqual(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var s=0;s<r;s++){var o=t.getOrdinate(i,s),a=e.getOrdinate(i,s);if(t.getOrdinate(i,s)!==e.getOrdinate(i,s)&&(!z.isNaN(o)||!z.isNaN(a)))return!1}return!0}static extend(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Jt.copy(e,0,r,0,i),i>0)for(var s=i;s<n;s++)Jt.copy(e,i-1,r,s,1);return r}static reverse(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Jt.swap(t,r,e-r)}static swap(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}}static copy(t,e,n,r,i){for(var s=0;s<i;s++)Jt.copyCoord(t,e+s,n,r+s)}static toString(){if(1===arguments.length&&P(arguments[0],D)){let s=arguments[0];var t=s.size();if(0===t)return"()";var e=s.getDimension(),n=new $t;n.append("(");for(var r=0;r<t;r++){r>0&&n.append(" ");for(var i=0;i<e;i++)i>0&&n.append(","),n.append(Kt.toString(s.getOrdinate(r,i)))}return n.append(")"),n.toString()}}static ensureValidRing(t,e){var n=e.size();return 0===n?e:n<=3?Jt.createClosedRing(t,e,4):e.getOrdinate(0,D.X)===e.getOrdinate(n-1,D.X)&&e.getOrdinate(0,D.Y)===e.getOrdinate(n-1,D.Y)?e:Jt.createClosedRing(t,e,n+1)}static createClosedRing(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Jt.copy(e,0,r,0,i);for(var s=i;s<n;s++)Jt.copy(e,0,r,s,1);return r}getClass(){return Jt}get interfaces_(){return[]}}Jt.constructor_=function(){};class Qt extends ${constructor(){super(),Qt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this.isEmpty()?new K:this._points.expandEnvelope(new K)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var t=n;if(this._points.size()!==t._points.size())return!1;for(var e=0;e<this._points.size();e++)if(!this.equal(this._points.getCoordinate(e),t._points.getCoordinate(e),r))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();Jt.reverse(n),this._points=n}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?qt.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return $.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return kt.ofLine(this._points)}getNumPoints(){return this._points.size()}reverse(){var t=this._points.copy();return Jt.reverse(t),this.getFactory().createLineString(t)}compareToSameClass(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(P(arguments[0],J)){let e=arguments[0];for(var t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t))}else if(P(arguments[0],Gt)){let e=arguments[0];if(0===this._points.size())return null;for(t=0;t<this._points.size()&&(e.filter(this._points,t),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Yt)){arguments[0].filter(this)}else if(P(arguments[0],Y)){arguments[0].filter(this)}}getBoundary(){return new Xt(this).getBoundary()}isEquivalentClass(t){return t instanceof Qt}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return $.TYPENAME_LINESTRING}copy(){return new Qt(this._points.copy(),this._factory)}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new q("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}getClass(){return Qt}get interfaces_(){return[bt]}}Qt.constructor_=function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];$.constructor_.call(this,e),this.init(t)}},Qt.serialVersionUID=0x2b2b51ba435c8e00;class te{constructor(){te.constructor_.apply(this,arguments)}getClass(){return te}get interfaces_(){return[]}}te.constructor_=function(){};class ee extends ${constructor(){super(),ee.constructor_.apply(this,arguments)}computeEnvelopeInternal(){if(this.isEmpty())return new K;var t=new K;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return qt.FALSE}getTypeCode(){return $.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}reverse(){return this.copy()}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(P(arguments[0],J)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Gt)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Yt)){arguments[0].filter(this)}else if(P(arguments[0],Y)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return $.TYPENAME_POINT}copy(){return new ee(this._coordinates.copy(),this._factory)}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),W.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}getClass(){return ee}get interfaces_(){return[te]}}ee.constructor_=function(){this._coordinates=null;let t=arguments[0],e=arguments[1];$.constructor_.call(this,e),this.init(t)},ee.serialVersionUID=0x44077bad161cbc00;class ne{constructor(){ne.constructor_.apply(this,arguments)}static ofRing(){if(arguments[0]instanceof Array){let t=arguments[0];return Math.abs(ne.ofRingSigned(t))}if(P(arguments[0],D)){let t=arguments[0];return Math.abs(ne.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){let s=arguments[0];if(s.length<3)return 0;for(var t=0,e=s[0].x,n=1;n<s.length-1;n++){var r=s[n].x-e,i=s[n+1].y;t+=r*(s[n-1].y-i)}return t/2}if(P(arguments[0],D)){let r=arguments[0];var s=r.size();if(s<3)return 0;var o=new H,a=new H,l=new H;r.getCoordinate(0,a),r.getCoordinate(1,l);e=a.x;l.x-=e;for(t=0,n=1;n<s-1;n++)o.y=a.y,a.x=l.x,a.y=l.y,r.getCoordinate(n+1,l),l.x-=e,t+=a.x*(o.y-l.y);return t/2}}getClass(){return ne}get interfaces_(){return[]}}function re(t){this.str=t}function ie(t){this.value=t}ne.constructor_=function(){},re.prototype.append=function(t){this.str+=t},re.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},re.prototype.toString=function(t){return this.str},ie.prototype.intValue=function(){return this.value},ie.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ie.isNaN=(t=>Number.isNaN(t));class se{constructor(){se.constructor_.apply(this,arguments)}static sqr(t){return se.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){let t=arguments[0];return se.parse(t)}if("number"==typeof arguments[0]){let t=arguments[0];return new se(t)}}static sqrt(t){return se.valueOf(t).sqrt()}static parse(t){for(var e=0,n=t.length;Ft.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var s=new se,o=0,a=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,Ft.isDigit(u)){var h=u-"0";s.selfMultiply(se.TEN),s.selfAdd(h),o++}else{if("."!==u){if("e"===u||"E"===u){var c=t.substring(e);try{l=ie.parseInt(c)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+c+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=o}}var g=s,f=o-a-l;if(0===f)g=s;else if(f>0){var p=se.TEN.pow(f);g=s.divide(p)}else if(f<0){p=se.TEN.pow(-f);g=s.multiply(p)}return r?g.negate():g}static createNaN(){return new se(z.NaN,z.NaN)}static copy(t){return new se(t)}static magnitude(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r}static stringOfChar(t,e){for(var n=new re,r=0;r<e;r++)n.append(t);return n.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){var n=this.abs(),r=se.magnitude(n._hi),i=se.TEN.pow(r);(n=n.divide(i)).gt(se.TEN)?(n=n.divide(se.TEN),r+=1):n.lt(se.ONE)&&(n=n.multiply(se.TEN),r-=1);for(var s=r+1,o=new re,a=se.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===s&&o.append(".");var u=Math.trunc(n._hi);if(u<0)break;var h=!1,c=0;u>9?(h=!0,c="9"):c="0"+u,o.append(c),n=n.subtract(se.valueOf(u)).multiply(se.TEN),h&&n.selfAdd(se.TEN);var g=!0,f=se.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-l&&(g=!1),!g)break}return e[0]=r,o.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof se){let t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){let t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof se){let t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof se){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof se){let t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){let l=arguments[0],u=arguments[1];var t,e,n,r,i=null,s=null,o=null,a=null;return n=this._hi/l,a=(i=(o=se.SPLIT*n)-(i=o-n))*(s=(a=se.SPLIT*l)-(s=a-l))-(r=n*l)+i*(e=l-s)+(t=n-i)*s+t*e,a=n+(o=(this._hi-r-a+this._lo-n*u)/l),this._hi=a,this._lo=n-a+o,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof se){let l=arguments[0];var t,e,n,r,i=null,s=null,o=null,a=null;return t=(n=this._hi/l._hi)-(i=(o=se.SPLIT*n)-(i=o-n)),a=i*(s=(a=se.SPLIT*l._hi)-(s=a-l._hi))-(r=n*l._hi)+i*(e=l._hi-s)+t*s+t*e,o=(this._hi-r-a+this._lo-n*l._lo)/l._hi,new se(a=n+o,n-a+o)}if("number"==typeof arguments[0]){let t=arguments[0];return z.isNaN(t)?se.createNaN():se.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return se.valueOf(1);var e=new se(this),n=se.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}ceil(){if(this.isNaN())return se.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new se(t,e)}compareTo(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}setValue(){if(arguments[0]instanceof se){let t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){let t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return se.valueOf(0);if(this.isNegative())return se.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=se.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof se){let t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){let o=arguments[0];var t=null,e=null,n=null,r=null,i=null,s=null;return r=(n=this._hi+o)-(i=n-this._hi),e=(s=(r=o-i+(this._hi-r))+this._lo)+(n-(t=n+s)),this._hi=t+e,this._lo=e+(t-this._hi),this}}else if(2===arguments.length){let h=arguments[0],c=arguments[1];t=null,e=null;var o,a=null;n=null,r=null,i=null,s=null;n=this._hi+h,o=this._lo+c,r=n-(i=n-this._hi),a=o-(s=o-this._lo);var l=(t=n+(i=(r=h-i+(this._hi-r))+o))+(i=(a=c-s+(this._lo-a))+(e=i+(n-t))),u=i+(t-l);return this._hi=l,this._lo=u,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof se){let t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){let l=arguments[0],u=arguments[1];var t,e,n=null,r=null,i=null,s=null;n=(i=se.SPLIT*this._hi)-this._hi,s=se.SPLIT*l,n=i-n,t=this._hi-n,r=s-l;var o=(i=this._hi*l)+(s=n*(r=s-r)-i+n*(e=l-r)+t*r+t*e+(this._hi*u+this._lo*l)),a=s+(n=i-o);return this._hi=o,this._lo=a,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return se.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new se(t,e)}negate(){return this.isNaN()?this:new se(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof se){let t=arguments[0];return t.isNaN()?se.createNaN():se.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){let t=arguments[0];return z.isNaN(t)?se.createNaN():se.copy(this).selfMultiply(t,0)}}isNaN(){return z.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){var t=se.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+se.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var s=r-n.length;i=n+se.stringOfChar("0",s)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){var t,e,n,r,i=null,s=null,o=null,a=null;t=(n=1/this._hi)-(i=(o=se.SPLIT*n)-(i=o-n)),s=(a=se.SPLIT*this._hi)-this._hi;var l=n+(o=(1-(r=n*this._hi)-(a=i*(s=a-s)-r+i*(e=this._hi-s)+t*s+t*e)-n*this._lo)/this._hi);return new se(l,n-l+o)}toSciNotation(){if(this.isZero())return se.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=se.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var s=n.charAt(0)+"."+i;return this.isNegative()?"-"+s+r:s+r}abs(){return this.isNaN()?se.NaN:this.isNegative()?this.negate():new se(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof se){let t=arguments[0];return se.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){let t=arguments[0];return se.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof se){let t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?se.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}getClass(){return se}get interfaces_(){return[B,G,A]}}se.constructor_=function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this.init(t)}else if(arguments[0]instanceof se){let t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){let t=arguments[0];se.constructor_.call(this,se.parse(t))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t,e)}},se.PI=new se(3.141592653589793,1.2246467991473532e-16),se.TWO_PI=new se(6.283185307179586,2.4492935982947064e-16),se.PI_2=new se(1.5707963267948966,6.123233995736766e-17),se.E=new se(2.718281828459045,1.4456468917292502e-16),se.NaN=new se(z.NaN,z.NaN),se.EPS=1.23259516440783e-32,se.SPLIT=134217729,se.MAX_PRINT_DIGITS=32,se.TEN=se.valueOf(10),se.ONE=se.valueOf(1),se.SCI_NOT_EXPONENT_CHAR="E",se.SCI_NOT_ZERO="0.0E0";class oe{constructor(){oe.constructor_.apply(this,arguments)}static orientationIndex(t,e,n){var r=oe.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=se.valueOf(e.x).selfAdd(-t.x),s=se.valueOf(e.y).selfAdd(-t.y),o=se.valueOf(n.x).selfAdd(-e.x),a=se.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(s.selfMultiply(o)).signum()}static signOfDet2x2(){if(arguments[3]instanceof se&&arguments[2]instanceof se&&arguments[0]instanceof se&&arguments[1]instanceof se){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];return t.multiply(r).selfSubtract(e.multiply(n)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let i=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];var t=se.valueOf(i),e=se.valueOf(s),n=se.valueOf(o),r=se.valueOf(a);return t.multiply(r).selfSubtract(e.multiply(n)).signum()}}static intersection(t,e,n,r){var i=se.valueOf(r.y).selfSubtract(n.y).selfMultiply(se.valueOf(e.x).selfSubtract(t.x)),s=se.valueOf(r.x).selfSubtract(n.x).selfMultiply(se.valueOf(e.y).selfSubtract(t.y)),o=i.subtract(s),a=se.valueOf(r.x).selfSubtract(n.x).selfMultiply(se.valueOf(t.y).selfSubtract(n.y)),l=se.valueOf(r.y).selfSubtract(n.y).selfMultiply(se.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(o).doubleValue(),h=se.valueOf(t.x).selfAdd(se.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),c=se.valueOf(e.x).selfSubtract(t.x).selfMultiply(se.valueOf(t.y).selfSubtract(n.y)),g=se.valueOf(e.y).selfSubtract(t.y).selfMultiply(se.valueOf(t.x).selfSubtract(n.x)),f=c.subtract(g).selfDivide(o).doubleValue(),p=se.valueOf(n.y).selfAdd(se.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new H(h,p)}static orientationIndexFilter(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),s=(t.y-n.y)*(e.x-n.x),o=i-s;if(i>0){if(s<=0)return oe.signum(o);r=i+s}else{if(!(i<0))return oe.signum(o);if(s>=0)return oe.signum(o);r=-i-s}var a=oe.DP_SAFE_EPSILON*r;return o>=a||-o>=a?oe.signum(o):2}static signum(t){return t>0?1:t<0?-1:0}getClass(){return oe}get interfaces_(){return[]}}oe.constructor_=function(){},oe.DP_SAFE_EPSILON=1e-15;class ae{constructor(){ae.constructor_.apply(this,arguments)}static index(t,e,n){return oe.orientationIndex(t,e,n)}static isCCW(t){var e=t.length-1;if(e<3)throw new q("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var s=t[i];s.y>n.y&&(n=s,r=i)}var o=r;do{(o-=1)<0&&(o=e)}while(t[o].equals2D(n)&&o!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var l=t[o],u=t[a];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var h=ae.index(l,n,u);return 0===h?l.x>u.x:h>0}getClass(){return ae}get interfaces_(){return[]}}ae.constructor_=function(){},ae.CLOCKWISE=-1,ae.RIGHT=ae.CLOCKWISE,ae.COUNTERCLOCKWISE=1,ae.LEFT=ae.COUNTERCLOCKWISE,ae.COLLINEAR=0,ae.STRAIGHT=ae.COLLINEAR;class le{constructor(){le.constructor_.apply(this,arguments)}getClass(){return le}get interfaces_(){return[]}}le.constructor_=function(){};class ue extends ${constructor(){super(),ue.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var s=this._holes[i].getCoordinates(),o=0;o<s.length;o++)t[++e]=s[o];return t}getArea(){var t=0;t+=ne.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=ne.ofRing(this._holes[e].getCoordinateSequence());return t}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){if((s=t.getX(n))!==e.getMinX()&&s!==e.getMaxX())return!1;if((o=t.getY(n))!==e.getMinY()&&o!==e.getMaxY())return!1}var r=t.getX(0),i=t.getY(0);for(n=1;n<=4;n++){var s,o;if((s=t.getX(n))!==r===((o=t.getY(n))!==i))return!1;r=s,i=o}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let i=arguments[0],s=arguments[1];if(!this.isEquivalentClass(i))return!1;var t=i,e=this._shell,n=t._shell;if(!e.equalsExact(n,s))return!1;if(this._holes.length!==t._holes.length)return!1;for(var r=0;r<this._holes.length;r++)if(!this._holes[r].equalsExact(t._holes[r],s))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dt.sort(this._holes)}else if(2===arguments.length){let t=arguments[0],r=arguments[1];if(t.isEmpty())return null;var e=new Array(t.getCoordinates().length-1).fill(null);pt.arraycopy(t.getCoordinates(),0,e,0,e.length);var n=_t.minCoordinate(t.getCoordinates());_t.scroll(e,n),pt.arraycopy(e,0,t.getCoordinates(),0,e.length),t.getCoordinates()[e.length]=e[0],ae.isCCW(t.getCoordinates())===r&&_t.reverse(t.getCoordinates())}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getTypeCode(){return $.TYPECODE_POLYGON}getDimension(){return 2}getLength(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}reverse(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t}convexHull(){return this.getExteriorRing().convexHull()}compareToSameClass(){if(1===arguments.length){let n=arguments[0];var t=this._shell,e=n._shell;return t.compareToSameClass(e)}if(2===arguments.length){let h=arguments[0],c=arguments[1];var n=h,r=(t=this._shell,e=n._shell,t.compareToSameClass(e,c));if(0!==r)return r;for(var i=this.getNumInteriorRing(),s=n.getNumInteriorRing(),o=0;o<i&&o<s;){var a=this.getInteriorRingN(o),l=n.getInteriorRingN(o),u=a.compareToSameClass(l,c);if(0!==u)return u;o++}return o<i?1:o<s?-1:0}}apply(){if(P(arguments[0],J)){let e=arguments[0];this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(P(arguments[0],Gt)){let e=arguments[0];if(this._shell.apply(e),!e.isDone())for(t=0;t<this._holes.length&&(this._holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Yt)){arguments[0].filter(this)}else if(P(arguments[0],Y)){let e=arguments[0];e.filter(this),this._shell.apply(e);for(t=0;t<this._holes.length;t++)this._holes[t].apply(e)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return $.TYPENAME_POLYGON}copy(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new ue(t,e,this._factory)}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}getClass(){return ue}get interfaces_(){return[le]}}ue.constructor_=function(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],n=arguments[2];if($.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),$.hasNullElements(e))throw new q("holes must not contain null elements");if(t.isEmpty()&&$.hasNonEmptyElements(e))throw new q("shell is empty but holes are not");this._shell=t,this._holes=e},ue.serialVersionUID=-0x307ffefd8dc97200;class he extends Bt{constructor(){super(),he.constructor_.apply(this,arguments)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){let t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return qt.FALSE}getTypeCode(){return $.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return $.TYPENAME_MULTIPOINT}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new he(t,this._factory)}getClass(){return he}get interfaces_(){return[te]}}he.constructor_=function(){let t=arguments[0],e=arguments[1];Bt.constructor_.call(this,t,e)},he.serialVersionUID=-0x6fb1ed4162e0fc00;class ce extends Qt{constructor(){super(),ce.constructor_.apply(this,arguments)}getBoundaryDimension(){return qt.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}getTypeCode(){return $.TYPECODE_LINEARRING}reverse(){var t=this._points.copy();return Jt.reverse(t),this.getFactory().createLinearRing(t)}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new q("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<ce.MINIMUM_VALID_SIZE)throw new q("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return $.TYPENAME_LINEARRING}copy(){return new ce(this._points.copy(),this._factory)}getClass(){return ce}get interfaces_(){return[]}}ce.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof Ce){let t=arguments[0],e=arguments[1];ce.constructor_.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(P(arguments[0],D)&&arguments[1]instanceof Ce){let t=arguments[0],e=arguments[1];Qt.constructor_.call(this,t,e),this.validateConstruction()}},ce.MINIMUM_VALID_SIZE=4,ce.serialVersionUID=-0x3b229e262367a600;class ge extends Bt{constructor(){super(),ge.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return $.TYPECODE_MULTIPOLYGON}getDimension(){return 2}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new ht,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}getGeometryType(){return $.TYPENAME_MULTIPOLYGON}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new ge(t,this._factory)}getClass(){return ge}get interfaces_(){return[le]}}ge.constructor_=function(){let t=arguments[0],e=arguments[1];Bt.constructor_.call(this,t,e)},ge.serialVersionUID=-0x7a5aa1369171980;class fe{constructor(){fe.constructor_.apply(this,arguments)}setCopyUserData(t){this._isUserDataCopied=t}edit(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n}editInternal(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Bt?this.editGeometryCollection(t,e):t instanceof ue?this.editPolygon(t,e):t instanceof ee?e.edit(t,this._factory):t instanceof Qt?e.edit(t,this._factory):(W.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)}editGeometryCollection(t,e){for(var n=e.edit(t,this._factory),r=new ht,i=0;i<n.getNumGeometries();i++){var s=this.edit(n.getGeometryN(i),e);null===s||s.isEmpty()||r.add(s)}return n.getClass()===he?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ge?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))}editPolygon(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon()),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new ht,s=0;s<n.getNumInteriorRing();s++){var o=this.edit(n.getInteriorRingN(s),e);null===o||o.isEmpty()||i.add(o)}return this._factory.createPolygon(r,i.toArray([]))}getClass(){return fe}get interfaces_(){return[]}}function pe(){}fe.GeometryEditorOperation=pe;class _e{constructor(){_e.constructor_.apply(this,arguments)}edit(t,e){return t}getClass(){return _e}get interfaces_(){return[pe]}}_e.constructor_=function(){};class de{constructor(){de.constructor_.apply(this,arguments)}edit(t,e){var n=this.edit(t.getCoordinates(),t);return t instanceof ce?null===n?e.createLinearRing():e.createLinearRing(n):t instanceof Qt?null===n?e.createLineString():e.createLineString(n):t instanceof ee?null===n||0===n.length?e.createPoint():e.createPoint(n[0]):t}getClass(){return de}get interfaces_(){return[pe]}}de.constructor_=function(){};class ye{constructor(){ye.constructor_.apply(this,arguments)}edit(t,e){return t instanceof ce?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof ee?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t}getClass(){return ye}get interfaces_(){return[pe]}}ye.constructor_=function(){},fe.NoOpGeometryOperation=_e,fe.CoordinateOperation=de,fe.CoordinateSequenceOperation=ye,fe.constructor_=function(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._factory=t}};class me{constructor(){me.constructor_.apply(this,arguments)}setOrdinate(t,e,n){switch(e){case D.X:this._coordinates[t].x=n;break;case D.Y:this._coordinates[t].y=n;break;case D.Z:this._coordinates[t].z=n;break;default:throw new q("invalid ordinateIndex")}}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case D.X:return this._coordinates[t].x;case D.Y:return this._coordinates[t].y;case D.Z:return this._coordinates[t].z}return z.NaN}getCoordinate(){if(1===arguments.length){let t=arguments[0];return this._coordinates[t]}if(2===arguments.length){let t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}}getCoordinateCopy(t){return new H(this._coordinates[t])}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}expandEnvelope(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new me(t,this._dimension)}toString(){if(this._coordinates.length>0){var t=new $t(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}getClass(){return me}get interfaces_(){return[D,B]}}me.constructor_=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];me.constructor_.call(this,t,3)}else if(Number.isInteger(arguments[0])){let e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new H}else if(P(arguments[0],D)){let e=arguments[0];if(null===e)return this._coordinates=new Array(0).fill(null),null;this._dimension=e.getDimension(),this._coordinates=new Array(e.size()).fill(null);for(t=0;t<this._coordinates.length;t++)this._coordinates[t]=e.getCoordinateCopy(t)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1];this._coordinates=t,this._dimension=e,null===t&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let e=arguments[0],n=arguments[1];this._coordinates=new Array(e).fill(null),this._dimension=n;for(t=0;t<e;t++)this._coordinates[t]=new H}},me.serialVersionUID=-0xcb44a778db18e00;class ve{constructor(){ve.constructor_.apply(this,arguments)}static instance(){return ve.instanceObject}readResolve(){return ve.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return new me(t)}if(P(arguments[0],D)){let t=arguments[0];return new me(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new me(t):new me(t,e)}}getClass(){return ve}get interfaces_(){return[F,B]}}ve.constructor_=function(){},ve.serialVersionUID=-0x38e49fa6cf6f2e00,ve.instanceObject=new ve;var Ee=Object.defineProperty;var xe=function(t,e){function n(t){if(!this||this.constructor!==n)return new n(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t)}e||Ee(t,"size",{get:Ne});return t.constructor=n,n.prototype=t,n}({delete:function(t){this.has(t)&&(this._keys.splice(Mt,1),this._values.splice(Mt,1),this._itp.forEach(function(t){Mt<t[0]&&t[0]--}));return Mt>-1},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(Mt=t.length;Mt--&&(n=t[Mt],r=e,n!==r&&(n==n||r==r)););else Mt=t.indexOf(e);var n,r;return Mt>-1}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[Mt]:void 0},set:function(t,e){return this.has(t)?this._values[Mt]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return Ie(this._itp,this._keys)},values:function(){return Ie(this._itp,this._values)},entries:function(){return Ie(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}});function Ie(t,e,n){var r=[0],i=!1;return t.push(r),{next:function(){var s,o=r[0];return!i&&o<e.length?(s=n?[e[o],n[o]]:e[o],r[0]++):(i=!0,t.splice(t.indexOf(r),1)),{done:i,value:s}}}}function Ne(){return this._values.length}let Re="undefined"!=typeof Map&&Map.prototype.values?Map:xe;function Te(){this.map_=new Re}Te.prototype=new mt,Te.prototype.get=function(t){return this.map_.get(t)||null},Te.prototype.put=function(t,e){return this.map_.set(t,e),e},Te.prototype.values=function(){const t=new ht,e=this.map_.values();let n=e.next();for(;!n.done;)t.add(n.value),n=e.next();return t},Te.prototype.entrySet=function(){const t=new xt;return this.map_.entries().forEach(e=>t.add(e)),t},Te.prototype.size=function(){return this.map_.size()};class Oe{constructor(){Oe.constructor_.apply(this,arguments)}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof Oe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new ie(n).compareTo(new ie(r))}getScale(){return this._scale}isFloating(){return this._modelType===Oe.FLOATING||this._modelType===Oe.FLOATING_SINGLE}getType(){return this._modelType}toString(){var t="UNKNOWN";return this._modelType===Oe.FLOATING?t="Floating":this._modelType===Oe.FLOATING_SINGLE?t="Floating-Single":this._modelType===Oe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){let t=arguments[0];return z.isNaN(t)?t:this._modelType===Oe.FLOATING_SINGLE?t:this._modelType===Oe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof H){let t=arguments[0];if(this._modelType===Oe.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){var t=16;return this._modelType===Oe.FLOATING?t=16:this._modelType===Oe.FLOATING_SINGLE?t=6:this._modelType===Oe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}getClass(){return Oe}get interfaces_(){return[B,G]}}class Le{constructor(){Le.constructor_.apply(this,arguments)}readResolve(){return Le.nameToTypeMap.get(this._name)}toString(){return this._name}getClass(){return Le}get interfaces_(){return[B]}}Le.constructor_=function(){this._name=null;let t=arguments[0];this._name=t,Le.nameToTypeMap.put(t,this)},Le.serialVersionUID=-552860263173159e4,Le.nameToTypeMap=new Te,Oe.Type=Le,Oe.constructor_=function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Oe.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Le){let t=arguments[0];this._modelType=t,t===Oe.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){let t=arguments[0];this._modelType=Oe.FIXED,this.setScale(t)}else if(arguments[0]instanceof Oe){let t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}},Oe.serialVersionUID=0x6bee6404e9a25c00,Oe.FIXED=new Le("FIXED"),Oe.FLOATING=new Le("FLOATING"),Oe.FLOATING_SINGLE=new Le("FLOATING SINGLE"),Oe.maximumPreciseValue=9007199254740992;class Ce{constructor(){Ce.constructor_.apply(this,arguments)}static toMultiPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return ve.instance()}static toMultiLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new H(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new H(t.getMinX(),t.getMinY()),new H(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new H(t.getMinX(),t.getMinY()),new H(t.getMinX(),t.getMaxY()),new H(t.getMaxX(),t.getMaxY()),new H(t.getMaxX(),t.getMinY()),new H(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],D)){let t=arguments[0];return new Qt(t,this)}}}createMultiLineString(){if(0===arguments.length)return new Ut(null,this);if(1===arguments.length){let t=arguments[0];return new Ut(t,this)}}buildGeometry(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var s=i.next(),o=s.getClass();null===e&&(e=o),o!==e&&(n=!0),s instanceof Bt&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Ce.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof ue)return this.createMultiPolygon(Ce.toPolygonArray(t));if(a instanceof Qt)return this.createMultiLineString(Ce.toLineStringArray(t));if(a instanceof ee)return this.createMultiPoint(Ce.toPointArray(t));W.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof H){let t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],D)){let t=arguments[0];return new ee(t,this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(P(arguments[0],D)){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof ce){let t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return new ue(t,e,this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new Bt(null,this);if(1===arguments.length){let t=arguments[0];return new Bt(t,this)}}createGeometry(t){return new fe(this).edit(t,new we(this._coordinateSequenceFactory))}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],D)){let t=arguments[0];return new ce(t,this)}}}createMultiPolygon(){if(0===arguments.length)return new ge(null,this);if(1===arguments.length){let t=arguments[0];return new ge(t,this)}}createMultiPoint(){if(0===arguments.length)return new he(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return new he(t,this)}if(P(arguments[0],D)){let r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(r.size()).fill(null),e=0;e<r.size();e++){var n=this.getCoordinateSequenceFactory().create(1,r.getDimension());Jt.copy(r,e,n,0,1),t[e]=this.createPoint(n)}return this.createMultiPoint(t)}}}getClass(){return Ce}get interfaces_(){return[B]}}class we extends fe.CoordinateSequenceOperation{constructor(){super(),we.constructor_.apply(this,arguments)}edit(){if(2===arguments.length&&arguments[1]instanceof $&&P(arguments[0],D)){let t=arguments[0];arguments[1];return this.coordinateSequenceFactory.create(t)}return super.edit.apply(this,arguments)}getClass(){return we}get interfaces_(){return[]}}we.constructor_=function(){this.coordinateSequenceFactory=null;let t=arguments[0];this.coordinateSequenceFactory=t},Ce.CloneOp=we,Ce.constructor_=function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)Ce.constructor_.call(this,new Oe,0);else if(1===arguments.length){if(P(arguments[0],F)){let t=arguments[0];Ce.constructor_.call(this,new Oe,0,t)}else if(arguments[0]instanceof Oe){let t=arguments[0];Ce.constructor_.call(this,t,0,Ce.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];Ce.constructor_.call(this,t,e,Ce.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=n,this._SRID=e}},Ce.serialVersionUID=-0x5ea75f2051eeb400;const be=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class Se{constructor(t){this.geometryFactory=t||new Ce}read(t){let e;const n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Pe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==be.indexOf(n)?Pe[n].call(this,e.coordinates):"GeometryCollection"===n?Pe[n].call(this,e.geometries):Pe[n].call(this,e)}write(t){const e=t.getGeometryType();if(!Me[e])throw new Error("Geometry is not supported");return Me[e].call(this,t)}}const Pe={Feature:function(t){const e={};for(let n in t)e[n]=t[n];if(t.geometry){const n=t.geometry.type;if(!Pe[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Pe.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n];e.push(new H(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new H(t[0],t[1]),new H(t[2],t[1]),new H(t[2],t[3]),new H(t[0],t[3]),new H(t[0],t[1])])},Point:function(t){const e=new H(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let n=0;n<t.length;++n)e.push(Pe.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=Pe.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let n=0;n<t.length;++n)e.push(Pe.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=Pe.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),r=[];for(let e=1;e<t.length;++e){var i=t[e],s=Pe.coordinates.call(this,i),o=this.geometryFactory.createLinearRing(s);r.push(o)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n];e.push(Pe.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Me={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Me.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const r=t._geometries[n],i=Me.Point.call(this,r);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],n=t.getCoordinates();for(let t=0;t<n.length;++t){const r=n[t];e.push(Me.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const r=t._geometries[n],i=Me.LineString.call(this,r);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],n=Me.LineString.call(this,t._shell);e.push(n.coordinates);for(let n=0;n<t._holes.length;++n){const r=t._holes[n],i=Me.LineString.call(this,r);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const r=t._geometries[n],i=Me.Polygon.call(this,r);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const r=t._geometries[n],i=r.getGeometryType();e.push(Me[i].call(this,r))}return{type:"GeometryCollection",geometries:e}}};class Ae{constructor(t){this.parser=new Se(t||new Ce)}read(t){return this.parser.read(t)}}const De={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};class Fe{constructor(t){this.geometryFactory=t||new Ce,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=De.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=De.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Ye[n]&&(e=Ye[n].call(this,r))),void 0===e)throw new Error("Could not parse WKT "+t);return e}write(t){return this.extractGeometry(t)}extractGeometry(t){var e=t.getGeometryType().toLowerCase();if(!qe[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+qe[e].call(this,t)+")"}}const qe={coordinate(t){return this.precisionModel.makePrecise(t),t.x+" "+t.y},point(t){return qe.coordinate.call(this,t._coordinates._coordinates[0])},multipoint(t){var e=[];for(let n=0,r=t._geometries.length;n<r;++n)e.push("("+qe.point.call(this,t._geometries[n])+")");return e.join(",")},linestring(t){var e=[];for(let n=0,r=t._points._coordinates.length;n<r;++n)e.push(qe.coordinate.call(this,t._points._coordinates[n]));return e.join(",")},linearring(t){var e=[];for(let n=0,r=t._points._coordinates.length;n<r;++n)e.push(qe.coordinate.call(this,t._points._coordinates[n]));return e.join(",")},multilinestring(t){var e=[];for(let n=0,r=t._geometries.length;n<r;++n)e.push("("+qe.linestring.call(this,t._geometries[n])+")");return e.join(",")},polygon(t){var e=[];e.push("("+qe.linestring.call(this,t._shell)+")");for(let n=0,r=t._holes.length;n<r;++n)e.push("("+qe.linestring.call(this,t._holes[n])+")");return e.join(",")},multipolygon(t){var e=[];for(let n=0,r=t._geometries.length;n<r;++n)e.push("("+qe.polygon.call(this,t._geometries[n])+")");return e.join(",")},geometrycollection(t){var e=[];for(let n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Ye={coord(t){var e=t.trim().split(De.spaces),n=new H(Number.parseFloat(e[0]),Number.parseFloat(e[1]));return this.precisionModel.makePrecise(n),n},point(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(Ye.coord.call(this,t))},multipoint(t){if(void 0===t)return this.geometryFactory.createMultiPoint();var e,n=t.trim().split(","),r=[];for(let t=0,i=n.length;t<i;++t)e=n[t].replace(De.trimParens,"$1"),r.push(Ye.point.call(this,e));return this.geometryFactory.createMultiPoint(r)},linestring(t){if(void 0===t)return this.geometryFactory.createLineString();var e=t.trim().split(","),n=[];for(let t=0,r=e.length;t<r;++t)n.push(Ye.coord.call(this,e[t]));return this.geometryFactory.createLineString(n)},linearring(t){if(void 0===t)return this.geometryFactory.createLinearRing();var e=t.trim().split(","),n=[];for(let t=0,r=e.length;t<r;++t)n.push(Ye.coord.call(this,e[t]));return this.geometryFactory.createLinearRing(n)},multilinestring(t){if(void 0===t)return this.geometryFactory.createMultiLineString();var e,n=t.trim().split(De.parenComma),r=[];for(let t=0,i=n.length;t<i;++t)e=n[t].replace(De.trimParens,"$1"),r.push(Ye.linestring.call(this,e));return this.geometryFactory.createMultiLineString(r)},polygon(t){if(void 0===t)return this.geometryFactory.createPolygon();var e,n,r,i,s=t.trim().split(De.parenComma),o=[];for(let t=0,a=s.length;t<a;++t)e=s[t].replace(De.trimParens,"$1"),n=Ye.linestring.call(this,e),r=this.geometryFactory.createLinearRing(n._points),0===t?i=r:o.push(r);return this.geometryFactory.createPolygon(i,o)},multipolygon(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();var e,n=t.trim().split(De.doubleParenComma),r=[];for(let t=0,i=n.length;t<i;++t)e=n[t].replace(De.trimParens,"$1"),r.push(Ye.polygon.call(this,e));return this.geometryFactory.createMultiPolygon(r)},geometrycollection(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[];for(let t=0,r=e.length;t<r;++t)n.push(this.read(e[t]));return this.geometryFactory.createGeometryCollection(n)}};class Ge{constructor(t){this.parser=new Fe(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class Be{constructor(){Be.constructor_.apply(this,arguments)}static toLocationSymbol(t){switch(t){case Be.EXTERIOR:return"e";case Be.BOUNDARY:return"b";case Be.INTERIOR:return"i";case Be.NONE:return"-"}throw new q("Unknown location value: "+t)}getClass(){return Be}get interfaces_(){return[]}}function Ue(){}Be.constructor_=function(){},Be.INTERIOR=0,Be.BOUNDARY=1,Be.EXTERIOR=2,Be.NONE=-1;class Xe extends Ue{constructor(){super(),Xe.constructor_.apply(this,arguments)}getClass(){return Xe}get interfaces_(){return[]}}Xe.constructor_=function(){Ue.constructor_.call(this,"Projective point not representable on the Cartesian plane.")};class ze{constructor(){ze.constructor_.apply(this,arguments)}static intersection(t,e,n,r){var i=t.y-e.y,s=e.x-t.x,o=t.x*e.y-e.x*t.y,a=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,h=i*l-a*s,c=(s*u-l*o)/h,g=(a*o-i*u)/h;if(z.isNaN(c)||z.isInfinite(c)||z.isNaN(g)||z.isInfinite(g))throw new Xe;return new H(c,g)}getY(){var t=this.y/this.w;if(z.isNaN(t)||z.isInfinite(t))throw new Xe;return t}getX(){var t=this.x/this.w;if(z.isNaN(t)||z.isInfinite(t))throw new Xe;return t}getCoordinate(){var t=new H;return t.x=this.getX(),t.y=this.getY(),t}getClass(){return ze}get interfaces_(){return[]}}ze.constructor_=function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){let t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];this.x=t,this.y=e,this.w=1}else if(arguments[0]instanceof ze&&arguments[1]instanceof ze){let t=arguments[0],e=arguments[1];this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y}else if(arguments[0]instanceof H&&arguments[1]instanceof H){let t=arguments[0],e=arguments[1];this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this.x=t,this.y=e,this.w=n}else if(4===arguments.length){let o=arguments[0],a=arguments[1],l=arguments[2],u=arguments[3];var t=o.y-a.y,e=a.x-o.x,n=o.x*a.y-a.x*o.y,r=l.y-u.y,i=u.x-l.x,s=l.x*u.y-u.x*l.y;this.x=e*s-i*n,this.y=r*n-t*s,this.w=t*i-r*e}};class ke{constructor(){ke.constructor_.apply(this,arguments)}static segmentToSegment(t,e,n,r){if(t.equals(e))return ke.pointToSegment(t,n,r);if(n.equals(r))return ke.pointToSegment(r,t,e);var i=!1;if(K.intersects(t,e,n,r)){var s=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===s)i=!0;else{var o=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s,l=o/s;(l<0||l>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?ft.min(ke.pointToSegment(t,n,r),ke.pointToSegment(e,n,r),ke.pointToSegment(n,t,e),ke.pointToSegment(r,t,e)):0}static pointToSegment(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;if(i<=0)return t.distance(e);if(i>=1)return t.distance(n);var s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(s)*Math.sqrt(r)}static pointToLinePerpendicular(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)}static pointToSegmentString(t,e){if(0===e.length)throw new q("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=ke.pointToSegment(t,e[r],e[r+1]);i<n&&(n=i)}return n}getClass(){return ke}get interfaces_(){return[]}}ke.constructor_=function(){};class je{constructor(){je.constructor_.apply(this,arguments)}static computeEdgeDistance(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=r>i?r:i;else{var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(s=r>i?o:a)||t.equals(e)||(s=Math.max(o,a))}return W.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s}static nonRobustComputeEdgeDistance(t,e,n){var r=t.x-e.x,i=t.y-e.y,s=Math.sqrt(r*r+i*i);return W.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){var t=new $t;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){let t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){let e=arguments[0];for(var t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==je.NO_INTERSECTION}getEdgeDistance(t,e){return je.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===je.COLLINEAR_INTERSECTION}toString(){return Ge.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ge.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}getClass(){return je}get interfaces_(){return[]}}je.constructor_=function(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new H,this._intPt[1]=new H,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},je.DONT_INTERSECT=0,je.DO_INTERSECT=1,je.COLLINEAR=2,je.NO_INTERSECTION=0,je.POINT_INTERSECTION=1,je.COLLINEAR_INTERSECTION=2;class Ve extends je{constructor(){super(),Ve.constructor_.apply(this,arguments)}static nearestEndpoint(t,e,n,r){var i=t,s=ke.pointToSegment(t,n,r),o=ke.pointToSegment(e,n,r);return o<s&&(s=o,i=e),(o=ke.pointToSegment(n,t,e))<s&&(s=o,i=n),(o=ke.pointToSegment(r,t,e))<s&&(s=o,i=r),i}isInSegmentEnvelopes(t){var e=new K(this._inputLines[0][0],this._inputLines[0][1]),n=new K(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{let t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,K.intersects(e,n,t)&&0===ae.index(e,n,t)&&0===ae.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=je.POINT_INTERSECTION,null;this._result=je.NO_INTERSECTION}}normalizeToMinimum(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}safeHCoordinateIntersection(t,e,n,r){var i=null;try{i=ze.intersection(t,e,n,r)}catch(s){if(!(s instanceof Xe))throw s;i=Ve.nearestEndpoint(t,e,n,r)}return i}intersection(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new H(Ve.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}smallestInAbsValue(t,e,n,r){var i=t,s=Math.abs(i);return Math.abs(e)<s&&(i=e,s=Math.abs(e)),Math.abs(n)<s&&(i=n,s=Math.abs(n)),Math.abs(r)<s&&(i=r),i}checkDD(t,e,n,r,i){var s=oe.intersection(t,e,n,r),o=this.isInSegmentEnvelopes(s);pt.out.println("DD in env = "+o+"  --------------------- "+s),i.distance(s)>1e-4&&pt.out.println("Distance = "+i.distance(s))}intersectionWithNormalization(t,e,n,r){var i=new H(t),s=new H(e),o=new H(n),a=new H(r),l=new H;this.normalizeToEnvCentre(i,s,o,a,l);var u=this.safeHCoordinateIntersection(i,s,o,a);return u.x+=l.x,u.y+=l.y,u}computeCollinearIntersection(t,e,n,r){var i=K.intersects(t,e,n),s=K.intersects(t,e,r),o=K.intersects(n,r,t),a=K.intersects(n,r,e);return i&&s?(this._intPt[0]=n,this._intPt[1]=r,je.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=t,this._intPt[1]=e,je.COLLINEAR_INTERSECTION):i&&o?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||a?je.COLLINEAR_INTERSECTION:je.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||o?je.COLLINEAR_INTERSECTION:je.POINT_INTERSECTION):s&&o?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?je.COLLINEAR_INTERSECTION:je.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||o?je.COLLINEAR_INTERSECTION:je.POINT_INTERSECTION):je.NO_INTERSECTION}normalizeToEnvCentre(t,e,n,r,i){var s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,h=n.y<r.y?n.y:r.y,c=n.x>r.x?n.x:r.x,g=n.y>r.y?n.y:r.y,f=((s>u?s:u)+(a<c?a:c))/2,p=((o>h?o:h)+(l<g?l:g))/2;i.x=f,i.y=p,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y}computeIntersect(t,e,n,r){if(this._isProper=!1,!K.intersects(t,e,n,r))return je.NO_INTERSECTION;var i=ae.index(t,e,n),s=ae.index(t,e,r);if(i>0&&s>0||i<0&&s<0)return je.NO_INTERSECTION;var o=ae.index(n,r,t),a=ae.index(n,r,e);return o>0&&a>0||o<0&&a<0?je.NO_INTERSECTION:0===i&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new H(n):0===s?this._intPt[0]=new H(r):0===o?this._intPt[0]=new H(t):0===a&&(this._intPt[0]=new H(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),je.POINT_INTERSECTION)}getClass(){return Ve}get interfaces_(){return[]}}Ve.constructor_=function(){};class We{constructor(){We.constructor_.apply(this,arguments)}static locatePointInRing(){if(arguments[0]instanceof H&&P(arguments[1],D)){let i=arguments[0],s=arguments[1];for(var t=new We(i),e=new H,n=new H,r=1;r<s.size();r++)if(s.getCoordinate(r,e),s.getCoordinate(r-1,n),t.countSegment(e,n),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof H&&arguments[1]instanceof Array){let i=arguments[0],s=arguments[1];for(t=new We(i),r=1;r<s.length;r++){e=s[r],n=s[r-1];if(t.countSegment(e,n),t.isOnSegment())return t.getLocation()}return t.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=ae.index(t,e,this._p);if(i===ae.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===ae.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==Be.EXTERIOR}getLocation(){return this._isPointOnSegment?Be.BOUNDARY:this._crossingCount%2==1?Be.INTERIOR:Be.EXTERIOR}isOnSegment(){return this._isPointOnSegment}getClass(){return We}get interfaces_(){return[]}}We.constructor_=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;let t=arguments[0];this._p=t};class He{constructor(){He.constructor_.apply(this,arguments)}static isOnLine(){if(arguments[0]instanceof H&&P(arguments[1],D)){let s=arguments[0],o=arguments[1];for(var t=new Ve,e=new H,n=new H,r=o.size(),i=1;i<r;i++)if(o.getCoordinate(i-1,e),o.getCoordinate(i,n),t.computeIntersection(s,e,n),t.hasIntersection())return!0;return!1}if(arguments[0]instanceof H&&arguments[1]instanceof Array){let r=arguments[0],s=arguments[1];for(t=new Ve,i=1;i<s.length;i++){e=s[i-1],n=s[i];if(t.computeIntersection(r,e,n),t.hasIntersection())return!0}return!1}}static locateInRing(t,e){return We.locatePointInRing(t,e)}static isInRing(t,e){return He.locateInRing(t,e)!==Be.EXTERIOR}getClass(){return He}get interfaces_(){return[]}}He.constructor_=function(){};class Ze{constructor(){Ze.constructor_.apply(this,arguments)}static isAtomic(t){return!(t instanceof Bt)}next(){if(this._atStart)return this._atStart=!1,Ze.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new lt;var t=this._parent.getGeometryN(this._index++);return t instanceof Bt?(this._subcollectionIterator=new Ze(t),this._subcollectionIterator.next()):t}remove(){throw new UnsupportedOperationException(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}getClass(){return Ze}get interfaces_(){return[it]}}Ze.constructor_=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;let t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};class Ke{constructor(){Ke.constructor_.apply(this,arguments)}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?He.locateInRing(t,e.getCoordinates()):Be.EXTERIOR}intersects(t,e){return this.locate(t,e)!==Be.EXTERIOR}updateLocationInfo(t){t===Be.INTERIOR&&(this._isIn=!0),t===Be.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof ee&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof Qt)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof ue)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof Ut)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateOnLineString(t,i))}else if(e instanceof ge){var s=e;for(r=0;r<s.getNumGeometries();r++){var o=s.getGeometryN(r);this.updateLocationInfo(this.locateInPolygon(t,o))}}else if(e instanceof Bt)for(var a=new Ze(e);a.hasNext();){var l=a.next();l!==e&&this.computeLocation(t,l)}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?Be.INTERIOR:Be.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return Be.EXTERIOR;var n=e.getCoordinateSequence();return e.isClosed()||!t.equals(n.getCoordinate(0))&&!t.equals(n.getCoordinate(n.size()-1))?He.isOnLine(t,n)?Be.INTERIOR:Be.EXTERIOR:Be.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return Be.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Be.EXTERIOR)return Be.EXTERIOR;if(r===Be.BOUNDARY)return Be.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var s=e.getInteriorRingN(i),o=this.locateInPolygonRing(t,s);if(o===Be.INTERIOR)return Be.EXTERIOR;if(o===Be.BOUNDARY)return Be.BOUNDARY}return Be.INTERIOR}locate(t,e){return e.isEmpty()?Be.EXTERIOR:e instanceof Qt?this.locateOnLineString(t,e):e instanceof ue?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Be.BOUNDARY:this._numBoundaries>0||this._isIn?Be.INTERIOR:Be.EXTERIOR)}getClass(){return Ke}get interfaces_(){return[]}}Ke.constructor_=function(){if(this._boundaryRule=Q.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){let t=arguments[0];if(null===t)throw new q("Rule must be non-null");this._boundaryRule=t}};class $e{constructor(){$e.constructor_.apply(this,arguments)}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return e===qt.SYM_DONTCARE||(e===qt.SYM_TRUE&&(t>=0||t===qt.TRUE)||(e===qt.SYM_FALSE&&t===qt.FALSE||(e===qt.SYM_P&&t===qt.P||(e===qt.SYM_L&&t===qt.L||e===qt.SYM_A&&t===qt.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return new $e(t).matches(e)}}static isTrue(t){return t>=0||t===qt.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return($e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])||$e.isTrue(this._matrix[Be.INTERIOR][Be.BOUNDARY])||$e.isTrue(this._matrix[Be.BOUNDARY][Be.INTERIOR])||$e.isTrue(this._matrix[Be.BOUNDARY][Be.BOUNDARY]))&&this._matrix[Be.EXTERIOR][Be.INTERIOR]===qt.FALSE&&this._matrix[Be.EXTERIOR][Be.BOUNDARY]===qt.FALSE}isCoveredBy(){return($e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])||$e.isTrue(this._matrix[Be.INTERIOR][Be.BOUNDARY])||$e.isTrue(this._matrix[Be.BOUNDARY][Be.INTERIOR])||$e.isTrue(this._matrix[Be.BOUNDARY][Be.BOUNDARY]))&&this._matrix[Be.INTERIOR][Be.EXTERIOR]===qt.FALSE&&this._matrix[Be.BOUNDARY][Be.EXTERIOR]===qt.FALSE}set(){if(1===arguments.length){let r=arguments[0];for(var t=0;t<r.length;t++){var e=Math.trunc(t/3),n=t%3;this._matrix[e][n]=qt.toDimensionValue(r.charAt(t))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this._matrix[t][e]=n}}isContains(){return $e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])&&this._matrix[Be.EXTERIOR][Be.INTERIOR]===qt.FALSE&&this._matrix[Be.EXTERIOR][Be.BOUNDARY]===qt.FALSE}setAtLeast(){if(1===arguments.length){let r=arguments[0];for(var t=0;t<r.length;t++){var e=Math.trunc(t/3),n=t%3;this.setAtLeast(e,n,qt.toDimensionValue(r.charAt(t)))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this._matrix[t][e]<n&&(this._matrix[t][e]=n)}}setAtLeastIfValid(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}isWithin(){return $e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])&&this._matrix[Be.INTERIOR][Be.EXTERIOR]===qt.FALSE&&this._matrix[Be.BOUNDARY][Be.EXTERIOR]===qt.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===qt.A&&e===qt.A||t===qt.L&&e===qt.L||t===qt.L&&e===qt.A||t===qt.P&&e===qt.A||t===qt.P&&e===qt.L)&&(this._matrix[Be.INTERIOR][Be.INTERIOR]===qt.FALSE&&($e.isTrue(this._matrix[Be.INTERIOR][Be.BOUNDARY])||$e.isTrue(this._matrix[Be.BOUNDARY][Be.INTERIOR])||$e.isTrue(this._matrix[Be.BOUNDARY][Be.BOUNDARY])))}isOverlaps(t,e){return t===qt.P&&e===qt.P||t===qt.A&&e===qt.A?$e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])&&$e.isTrue(this._matrix[Be.INTERIOR][Be.EXTERIOR])&&$e.isTrue(this._matrix[Be.EXTERIOR][Be.INTERIOR]):t===qt.L&&e===qt.L&&(1===this._matrix[Be.INTERIOR][Be.INTERIOR]&&$e.isTrue(this._matrix[Be.INTERIOR][Be.EXTERIOR])&&$e.isTrue(this._matrix[Be.EXTERIOR][Be.INTERIOR]))}isEquals(t,e){return t===e&&($e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])&&this._matrix[Be.INTERIOR][Be.EXTERIOR]===qt.FALSE&&this._matrix[Be.BOUNDARY][Be.EXTERIOR]===qt.FALSE&&this._matrix[Be.EXTERIOR][Be.INTERIOR]===qt.FALSE&&this._matrix[Be.EXTERIOR][Be.BOUNDARY]===qt.FALSE)}toString(){for(var t=new $t("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,qt.toDimensionSymbol(this._matrix[e][n]));return t.toString()}setAll(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}get(t,e){return this._matrix[t][e]}transpose(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new q("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!$e.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}add(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}isDisjoint(){return this._matrix[Be.INTERIOR][Be.INTERIOR]===qt.FALSE&&this._matrix[Be.INTERIOR][Be.BOUNDARY]===qt.FALSE&&this._matrix[Be.BOUNDARY][Be.INTERIOR]===qt.FALSE&&this._matrix[Be.BOUNDARY][Be.BOUNDARY]===qt.FALSE}isCrosses(t,e){return t===qt.P&&e===qt.L||t===qt.P&&e===qt.A||t===qt.L&&e===qt.A?$e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])&&$e.isTrue(this._matrix[Be.INTERIOR][Be.EXTERIOR]):t===qt.L&&e===qt.P||t===qt.A&&e===qt.P||t===qt.A&&e===qt.L?$e.isTrue(this._matrix[Be.INTERIOR][Be.INTERIOR])&&$e.isTrue(this._matrix[Be.EXTERIOR][Be.INTERIOR]):t===qt.L&&e===qt.L&&0===this._matrix[Be.INTERIOR][Be.INTERIOR]}getClass(){return $e}get interfaces_(){return[A]}}$e.constructor_=function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(qt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){let t=arguments[0];$e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof $e){let t=arguments[0];$e.constructor_.call(this),this._matrix[Be.INTERIOR][Be.INTERIOR]=t._matrix[Be.INTERIOR][Be.INTERIOR],this._matrix[Be.INTERIOR][Be.BOUNDARY]=t._matrix[Be.INTERIOR][Be.BOUNDARY],this._matrix[Be.INTERIOR][Be.EXTERIOR]=t._matrix[Be.INTERIOR][Be.EXTERIOR],this._matrix[Be.BOUNDARY][Be.INTERIOR]=t._matrix[Be.BOUNDARY][Be.INTERIOR],this._matrix[Be.BOUNDARY][Be.BOUNDARY]=t._matrix[Be.BOUNDARY][Be.BOUNDARY],this._matrix[Be.BOUNDARY][Be.EXTERIOR]=t._matrix[Be.BOUNDARY][Be.EXTERIOR],this._matrix[Be.EXTERIOR][Be.INTERIOR]=t._matrix[Be.EXTERIOR][Be.INTERIOR],this._matrix[Be.EXTERIOR][Be.BOUNDARY]=t._matrix[Be.EXTERIOR][Be.BOUNDARY],this._matrix[Be.EXTERIOR][Be.EXTERIOR]=t._matrix[Be.EXTERIOR][Be.EXTERIOR]}};class Je{constructor(){Je.constructor_.apply(this,arguments)}static isNorthern(t){return t===Je.NE||t===Je.NW}static isOpposite(t,e){return t!==e&&2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}static isInHalfPlane(t,e){return e===Je.SE?t===Je.SE||t===Je.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new q("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Je.NE:Je.SE:e>=0?Je.NW:Je.SW}if(arguments[0]instanceof H&&arguments[1]instanceof H){let t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new q("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?Je.NE:Je.SE:e.y>=t.y?Je.NW:Je.SW}}getClass(){return Je}get interfaces_(){return[]}}Je.constructor_=function(){},Je.NE=0,Je.NW=1,Je.SW=2,Je.SE=3;class Qe{constructor(){Qe.constructor_.apply(this,arguments)}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ae.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){var e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Je.quadrant(this._dx,this._dy),W.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}getClass(){return Qe}get interfaces_(){return[G]}}Qe.constructor_=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){let t=arguments[0];this._edge=t}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];Qe.constructor_.call(this,t,e,n,null)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];Qe.constructor_.call(this,t),this.init(e,n),this._label=r}};class tn{constructor(){tn.constructor_.apply(this,arguments)}static opposite(t){return t===tn.LEFT?tn.RIGHT:t===tn.RIGHT?tn.LEFT:t}getClass(){return tn}get interfaces_(){return[]}}tn.constructor_=function(){},tn.ON=0,tn.LEFT=1,tn.RIGHT=2;class en{constructor(){en.constructor_.apply(this,arguments)}setAllLocations(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Be.NONE)return!1;return!0}setAllLocationsIfNull(t){for(var e=0;e<this.location.length;e++)this.location[e]===Be.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[tn.ON]=this.location[tn.ON],e[tn.LEFT]=Be.NONE,e[tn.RIGHT]=Be.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Be.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;var t=this.location[tn.LEFT];this.location[tn.LEFT]=this.location[tn.RIGHT],this.location[tn.RIGHT]=t}toString(){var t=new re;return this.location.length>1&&t.append(Be.toLocationSymbol(this.location[tn.LEFT])),t.append(Be.toLocationSymbol(this.location[tn.ON])),this.location.length>1&&t.append(Be.toLocationSymbol(this.location[tn.RIGHT])),t.toString()}setLocations(t,e,n){this.location[tn.ON]=t,this.location[tn.LEFT]=e,this.location[tn.RIGHT]=n}get(t){return t<this.location.length?this.location[t]:Be.NONE}isArea(){return this.location.length>1}isAnyNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Be.NONE)return!0;return!1}setLocation(){if(1===arguments.length){let t=arguments[0];this.setLocation(tn.ON,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(Be.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}getClass(){return en}get interfaces_(){return[]}}en.constructor_=function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){let t=arguments[0];this.init(1),this.location[tn.ON]=t}else if(arguments[0]instanceof en){let e=arguments[0];if(this.init(e.location.length),null!==e)for(var t=0;t<this.location.length;t++)this.location[t]=e.location[t]}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this.init(3),this.location[tn.ON]=t,this.location[tn.LEFT]=e,this.location[tn.RIGHT]=n}};class nn{constructor(){nn.constructor_.apply(this,arguments)}static toLineLabel(t){for(var e=new nn(Be.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}getGeometryCount(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){let t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new en(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){let t=arguments[0];return this.elt[t].get(tn.ON)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){var t=new re;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){let t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setLocation(tn.ON,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this.elt[t].setLocation(e,n)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new en(this.elt[t].location[0]))}getClass(){return nn}get interfaces_(){return[]}}nn.constructor_=function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){let t=arguments[0];this.elt[0]=new en(t),this.elt[1]=new en(t)}else if(arguments[0]instanceof nn){let t=arguments[0];this.elt[0]=new en(t.elt[0]),this.elt[1]=new en(t.elt[1])}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[0]=new en(Be.NONE),this.elt[1]=new en(Be.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this.elt[0]=new en(t,e,n),this.elt[1]=new en(t,e,n)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.elt[0]=new en(Be.NONE,Be.NONE,Be.NONE),this.elt[1]=new en(Be.NONE,Be.NONE,Be.NONE),this.elt[t].setLocations(e,n,r)}};class rn{constructor(){rn.constructor_.apply(this,arguments)}createEdgeEndForNext(t,e,n,r){var i=n.segmentIndex+1;if(i>=t.getNumPoints()&&null===r)return null;var s=t.getCoordinate(i);null!==r&&r.segmentIndex===n.segmentIndex&&(s=r.coord);var o=new Qe(t,n.coord,s,new nn(t.getLabel()));e.add(o)}createEdgeEndForPrev(t,e,n,r){var i=n.segmentIndex;if(0===n.dist){if(0===i)return null;i--}var s=t.getCoordinate(i);null!==r&&r.segmentIndex>=i&&(s=r.coord);var o=new nn(t.getLabel());o.flip();var a=new Qe(t,n.coord,s,o);e.add(a)}computeEdgeEnds(){if(1===arguments.length){let r=arguments[0];for(var t=new ht,e=r;e.hasNext();){var n=e.next();this.computeEdgeEnds(n,t)}return t}if(2===arguments.length){let t=arguments[0],e=arguments[1];var r=t.getEdgeIntersectionList();r.addEndpoints();var i=r.iterator(),s=null,o=null;if(!i.hasNext())return null;var a=i.next();do{s=o,o=a,a=null,i.hasNext()&&(a=i.next()),null!==o&&(this.createEdgeEndForPrev(t,e,o,s),this.createEdgeEndForNext(t,e,o,a))}while(null!==o)}}getClass(){return rn}get interfaces_(){return[]}}rn.constructor_=function(){};class sn{constructor(){sn.constructor_.apply(this,arguments)}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){W.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}getClass(){return sn}get interfaces_(){return[]}}sn.constructor_=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._label=t}};class on extends sn{constructor(){super(),on.constructor_.apply(this,arguments)}isIncidentEdgeInResult(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){var n=Be.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Be.BOUNDARY&&(n=r)}return n}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{let t=arguments[0],e=arguments[1];null===this._label?this._label=new nn(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof on){let t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof nn){let n=arguments[0];for(var t=0;t<2;t++){var e=this.computeMergedLocation(n,t);this._label.getLocation(t)===Be.NONE&&this._label.setLocation(t,e)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;var e=Be.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Be.BOUNDARY:n=Be.INTERIOR;break;case Be.INTERIOR:default:n=Be.BOUNDARY}this._label.setLocation(t,n)}getClass(){return on}get interfaces_(){return[]}}on.constructor_=function(){this._coord=null,this._edges=null;let t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new nn(0,Be.NONE)};class an{constructor(){an.constructor_.apply(this,arguments)}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof H){let e=arguments[0];return null===(t=this.nodeMap.get(e))&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof on){let e=arguments[0];var t;return null===(t=this.nodeMap.get(e.getCoordinate()))?(this.nodeMap.put(e.getCoordinate(),e),e):(t.mergeLabel(e),t)}}print(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){for(var e=new ht,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Be.BOUNDARY&&e.add(r)}return e}add(t){var e=t.getCoordinate();this.addNode(e).add(t)}getClass(){return an}get interfaces_(){return[]}}an.constructor_=function(){this.nodeMap=new wt,this.nodeFact=null;let t=arguments[0];this.nodeFact=t};class ln extends j{constructor(){if(1===arguments.length){let t=arguments[0];super(t),j.call(this,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];super(ln.msgWithCoord(t,e)),this.name="TopologyException",this.pt=new H(e)}}getCoordinate(){return this.pt}get interfaces_(){return[]}getClass(){return ln}static msgWithCoord(t,e){return null!==e?t+" [ "+e+" ]":t}}class un{constructor(){un.constructor_.apply(this,arguments)}locate(t){}getClass(){return un}get interfaces_(){return[]}}un.constructor_=function(){};class hn{constructor(){hn.constructor_.apply(this,arguments)}static locatePointInPolygon(t,e){if(e.isEmpty())return Be.EXTERIOR;var n=e.getExteriorRing(),r=hn.locatePointInRing(t,n);if(r!==Be.INTERIOR)return r;for(var i=0;i<e.getNumInteriorRing();i++){var s=e.getInteriorRingN(i),o=hn.locatePointInRing(t,s);if(o===Be.BOUNDARY)return Be.BOUNDARY;if(o===Be.INTERIOR)return Be.EXTERIOR}return Be.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?He.locateInRing(t,e.getCoordinates()):Be.EXTERIOR}static containsPointInPolygon(t,e){return Be.EXTERIOR!==hn.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof ue)return hn.locatePointInPolygon(t,e);if(e instanceof Bt)for(var n=new Ze(e);n.hasNext();){var r=n.next();if(r!==e){var i=hn.locateInGeometry(t,r);if(i!==Be.EXTERIOR)return i}}return Be.EXTERIOR}static locate(t,e){return e.isEmpty()?Be.EXTERIOR:hn.locateInGeometry(t,e)}locate(t){return hn.locate(t,this._geom)}getClass(){return hn}get interfaces_(){return[un]}}hn.constructor_=function(){this._geom=null;let t=arguments[0];this._geom=t};class cn{constructor(){cn.constructor_.apply(this,arguments)}getNextCW(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}propagateSideLabels(t){for(var e=Be.NONE,n=this.iterator();n.hasNext();){(s=(i=n.next()).getLabel()).isArea(t)&&s.getLocation(t,tn.LEFT)!==Be.NONE&&(e=s.getLocation(t,tn.LEFT))}if(e===Be.NONE)return null;var r=e;for(n=this.iterator();n.hasNext();){var i,s;if((s=(i=n.next()).getLabel()).getLocation(t,tn.ON)===Be.NONE&&s.setLocation(t,tn.ON,r),s.isArea(t)){var o=s.getLocation(t,tn.LEFT),a=s.getLocation(t,tn.RIGHT);if(a!==Be.NONE){if(a!==r)throw new ln("side location conflict",i.getCoordinate());o===Be.NONE&&W.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),r=o}else W.isTrue(s.getLocation(t,tn.LEFT)===Be.NONE,"found single null side"),s.setLocation(t,tn.RIGHT,r),s.setLocation(t,tn.LEFT,r)}}}getCoordinate(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}print(t){pt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,tn.LEFT);W.isTrue(r!==Be.NONE,"Found unlabelled area edge");for(var i=r,s=this.iterator();s.hasNext();){var o=s.next().getLabel();W.isTrue(o.isArea(t),"Found non-area edge");var a=o.getLocation(t,tn.LEFT),l=o.getLocation(t,tn.RIGHT);if(a===l)return!1;if(l!==i)return!1;i=a}return!0}findIndex(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new ht(this._edgeMap.values())),this._edgeList}getLocation(t,e,n){return this._ptInAreaLocation[t]===Be.NONE&&(this._ptInAreaLocation[t]=hn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}toString(){var t=new re;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=(s=n.next()).getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Be.BOUNDARY&&(e[i]=!0);for(n=this.iterator();n.hasNext();){var s;for(r=(s=n.next()).getLabel(),i=0;i<2;i++)if(r.isAnyNull(i)){var o=Be.NONE;if(e[i])o=Be.EXTERIOR;else{var a=s.getCoordinate();o=this.getLocation(i,a,t)}r.setAllLocationsIfNull(i,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}getClass(){return cn}get interfaces_(){return[]}}cn.constructor_=function(){this._edgeMap=new wt,this._edgeList=null,this._ptInAreaLocation=[Be.NONE,Be.NONE]};class gn{constructor(){gn.constructor_.apply(this,arguments)}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}getClass(){return gn}get interfaces_(){return[]}}gn.constructor_=function(){this.mce=null,this.chainIndex=null;let t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};class fn{constructor(){fn.constructor_.apply(this,arguments)}isDelete(){return this._eventType===fn.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===fn.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}getClass(){return fn}get interfaces_(){return[G]}}fn.constructor_=function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){let t=arguments[0],e=arguments[1];this._eventType=fn.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this._eventType=fn.INSERT,this._label=t,this._xValue=e,this._obj=n}},fn.INSERT=1,fn.DELETE=2;class pn{constructor(){pn.constructor_.apply(this,arguments)}getClass(){return pn}get interfaces_(){return[]}}pn.constructor_=function(){};const _n={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return _n.sort(t),t.get(0)},sort:function(t,e){const n=t.toArray();e?Dt.sort(n,e):Dt.sort(n);const r=t.iterator();for(let t=0,e=n.length;t<e;t++)r.next(),r.set(n[t])},singletonList:function(t){const e=new ht;return e.add(t),e}};var dn=_n;class yn{constructor(){yn.constructor_.apply(this,arguments)}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(yn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,s,o,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getClass(){return yn}get interfaces_(){return[]}}yn.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;let t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};class mn extends pn{constructor(){super(),mn.constructor_.apply(this,arguments)}prepareEvents(){dn.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){let n=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var e=this.events.get(t);if(e.isInsert()&&this.processOverlaps(t,e.getDeleteEventIndex(),e,n),n.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof yn&&P(arguments[0],at)&&P(arguments[1],at)){let t=arguments[0],e=arguments[1],n=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(n)}else if("boolean"==typeof arguments[2]&&P(arguments[0],at)&&arguments[1]instanceof yn){let t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var s=new gn(n,i),o=new fn(e,n.getMinX(i),s);this.events.add(o),this.events.add(new fn(n.getMaxX(i),o))}}processOverlaps(t,e,n,r){for(var i=n.getObject(),s=t;s<e;s++){var o=this.events.get(s);if(o.isInsert()){var a=o.getObject();n.isSameLabel(o)||(i.computeIntersections(a,r),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){let n=arguments[0],r=arguments[1];for(t=n.iterator();t.hasNext();){e=t.next();this.addEdge(e,r)}}}getClass(){return mn}get interfaces_(){return[]}}mn.constructor_=function(){this.events=new ht,this.nOverlaps=null};class vn{constructor(){vn.constructor_.apply(this,arguments)}visitItem(t){}getClass(){return vn}get interfaces_(){return[]}}vn.constructor_=function(){};class En{constructor(){En.constructor_.apply(this,arguments)}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return Ge.toLineString(new H(this._min,0),new H(this._max,0))}getClass(){return En}get interfaces_(){return[]}}class xn{constructor(){xn.constructor_.apply(this,arguments)}compare(t,e){var n=t,r=e,i=(n._min+n._max)/2,s=(r._min+r._max)/2;return i<s?-1:i>s?1:0}getClass(){return xn}get interfaces_(){return[k]}}xn.constructor_=function(){},En.NodeComparator=xn,En.constructor_=function(){this._min=z.POSITIVE_INFINITY,this._max=z.NEGATIVE_INFINITY};class In extends En{constructor(){super(),In.constructor_.apply(this,arguments)}query(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)}getClass(){return In}get interfaces_(){return[]}}In.constructor_=function(){this._item=null;let t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n};class Nn extends En{constructor(){super(),Nn.constructor_.apply(this,arguments)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)}getClass(){return Nn}get interfaces_(){return[]}}Nn.constructor_=function(){this._node1=null,this._node2=null;let t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)};class Rn{constructor(){Rn.constructor_.apply(this,arguments)}buildTree(){dn.sort(this._leaves,new En.NodeComparator);for(var t=this._leaves,e=null,n=new ht;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}}insert(t,e,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new In(t,e,n))}query(t,e,n){this.init(),this._root.query(t,e,n)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){pt.out.println(Ge.toLineString(new H(t._min,this._level),new H(t._max,this._level)))}init(){if(null!==this._root)return null;this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Nn(t.get(n),t.get(n+1));e.add(i)}}}getClass(){return Rn}get interfaces_(){return[]}}Rn.constructor_=function(){this._leaves=new ht,this._root=null,this._level=0};class Tn{constructor(){Tn.constructor_.apply(this,arguments)}static midPoint(t,e){return new H((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof Tn){let n=arguments[0];var t=ae.index(this.p0,this.p1,n.p0),e=ae.index(this.p0,this.p1,n.p1);return t>=0&&e>=0?Math.max(t,e):t<=0&&e<=0?Math.max(t,e):0}if(arguments[0]instanceof H){let t=arguments[0];return ae.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof Tn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){var e=new Ve;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof H){let n=arguments[0];if(n.equals(this.p0)||n.equals(this.p1))return new H(n);var t=this.projectionFactor(n),e=new H;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}if(arguments[0]instanceof Tn){let t=arguments[0];var n=this.projectionFactor(t.p0),r=this.projectionFactor(t.p1);if(n>=1&&r>=1)return null;if(n<=0&&r<=0)return null;var i=this.project(t.p0);n<0&&(i=this.p0),n>1&&(i=this.p1);var s=this.project(t.p1);return r<0&&(s=this.p0),r>1&&(s=this.p1),new Tn(i,s)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return ke.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return Tn.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?z.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r}closestPoints(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=z.MAX_VALUE,i=null,s=this.closestPoint(t.p0);r=s.distance(t.p0),n[0]=s,n[1]=t.p0;var o=this.closestPoint(t.p1);(i=o.distance(t.p1))<r&&(r=i,n[0]=o,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n}closestPoint(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}reverse(){var t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){try{return ze.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Xe))throw t}return null}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(i*i+s*s),a=0,l=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*i/o,l=e*s/o}return new H(n-l,r+a)}setCoordinates(){if(1===arguments.length){let t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||z.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}distance(){if(arguments[0]instanceof Tn){let t=arguments[0];return ke.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof H){let t=arguments[0];return ke.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){var e=new H;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))}getClass(){return Tn}get interfaces_(){return[G,B]}}Tn.constructor_=function(){if(this.p0=null,this.p1=null,0===arguments.length)Tn.constructor_.call(this,new H,new H);else if(1===arguments.length){let t=arguments[0];Tn.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];Tn.constructor_.call(this,new H(t,e),new H(n,r))}},Tn.serialVersionUID=0x2d2172135f411c00;class On{constructor(){On.constructor_.apply(this,arguments)}static getGeometry(){if(1===arguments.length){let t=arguments[0];return t.getFactory().buildGeometry(On.getLines(t))}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(On.getLines(t,e))}}static getLines(){if(1===arguments.length){let t=arguments[0];return On.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],st)&&P(arguments[1],st)){let n=arguments[0],r=arguments[1];for(var t=n.iterator();t.hasNext();){var e=t.next();On.getLines(e,r)}return r}if(arguments[0]instanceof $&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];var n=new ht;return t.apply(new On(n,e)),n}if(arguments[0]instanceof $&&P(arguments[1],st)){let t=arguments[0],e=arguments[1];return t instanceof Qt?e.add(t):t.apply(new On(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],st)&&P(arguments[1],st)){let n=arguments[0],r=arguments[1],i=arguments[2];for(t=n.iterator();t.hasNext();){e=t.next();On.getLines(e,r,i)}return r}if("boolean"==typeof arguments[2]&&arguments[0]instanceof $&&P(arguments[1],st)){let t=arguments[0],e=arguments[1],n=arguments[2];return t.apply(new On(e,n)),e}}}filter(t){if(this._isForcedToLineString&&t instanceof ce){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qt&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}getClass(){return On}get interfaces_(){return[Y]}}On.constructor_=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){let t=arguments[0];this._lines=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}};class Ln{constructor(){Ln.constructor_.apply(this,arguments)}visitItem(t){this._items.add(t)}getItems(){return this._items}getClass(){return Ln}get interfaces_(){return[vn]}}Ln.constructor_=function(){this._items=new ht};class Cn{constructor(){Cn.constructor_.apply(this,arguments)}locate(t){var e=new We(t),n=new wn(e);return this._index.query(t.y,t.y,n),e.getLocation()}getClass(){return Cn}get interfaces_(){return[un]}}class wn{constructor(){wn.constructor_.apply(this,arguments)}visitItem(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}getClass(){return wn}get interfaces_(){return[vn]}}wn.constructor_=function(){this._counter=null;let t=arguments[0];this._counter=t};class bn{constructor(){bn.constructor_.apply(this,arguments)}init(t){for(var e=On.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}}addLine(t){for(var e=1;e<t.length;e++){var n=new Tn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}}query(){if(2===arguments.length){let e=arguments[0],n=arguments[1];var t=new Ln;return this._index.query(e,n,t),t.getItems()}if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this._index.query(t,e,n)}}getClass(){return bn}get interfaces_(){return[]}}bn.constructor_=function(){this._index=new Rn;let t=arguments[0];this.init(t)},Cn.SegmentVisitor=wn,Cn.IntervalIndexedGeometry=bn,Cn.constructor_=function(){this._index=null;let t=arguments[0];if(!(P(t,le)||t instanceof ce))throw new q("Argument must be Polygonal or LinearRing");this._index=new bn(t)};class Sn{constructor(){Sn.constructor_.apply(this,arguments)}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){var e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}getClass(){return Sn}get interfaces_(){return[G]}}Sn.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;let t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new H(t),this.segmentIndex=e,this.dist=n};class Pn{constructor(){Pn.constructor_.apply(this,arguments)}print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}addEndpoints(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var s=new Array(n).fill(null),o=0;s[o++]=new H(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.pts[a];return i&&(s[o]=e.coord),new Fn(s,new nn(this.edge._label))}add(t,e,n){var r=new Sn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)}isIntersection(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}getClass(){return Pn}get interfaces_(){return[]}}Pn.constructor_=function(){this._nodeMap=new wt,this.edge=null;let t=arguments[0];this.edge=t};class Mn{constructor(){Mn.constructor_.apply(this,arguments)}static toIntArray(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}getChainStartIndices(t){var e=0,n=new ht;n.add(new ie(e));do{var r=this.findChainEnd(t,e);n.add(new ie(r)),e=r}while(e<t.length-1);return Mn.toIntArray(n)}findChainEnd(t,e){for(var n=Je.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(Je.quadrant(t[r-1],t[r])!==n)break;r++}return r-1}getClass(){return Mn}get interfaces_(){return[]}}Mn.constructor_=function(){};class An{constructor(){An.constructor_.apply(this,arguments)}getCoordinates(){return this.pts}getMaxX(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}getMinX(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}computeIntersectsForChain(){if(4===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){let n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5];if(r-n==1&&o-s==1)return a.addIntersections(this.e,n,i.e,s),null;if(!this.overlaps(n,r,i,s,o))return null;var t=Math.trunc((n+r)/2),e=Math.trunc((s+o)/2);n<t&&(s<e&&this.computeIntersectsForChain(n,t,i,s,e,a),e<o&&this.computeIntersectsForChain(n,t,i,e,o,a)),t<r&&(s<e&&this.computeIntersectsForChain(t,r,i,s,e,a),e<o&&this.computeIntersectsForChain(t,r,i,e,o,a))}}overlaps(t,e,n,r,i){return K.intersects(this.pts[t],this.pts[e],n.pts[r],n.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)}getClass(){return An}get interfaces_(){return[]}}An.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;let t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Mn;this.startIndex=e.getChainStartIndices(this.pts)};class Dn{constructor(){Dn.constructor_.apply(this,arguments)}static depthAtLocation(t){return t===Be.EXTERIOR?0:t===Be.INTERIOR?1:Dn.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,n){this._depth[t][e]=n}isNull(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Dn.NULL_VALUE)return!1;return!0}if(1===arguments.length){let t=arguments[0];return this._depth[t][1]===Dn.NULL_VALUE}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this._depth[t][e]===Dn.NULL_VALUE}}normalize(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}}getDelta(t){return this._depth[t][tn.RIGHT]-this._depth[t][tn.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?Be.EXTERIOR:Be.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){let r=arguments[0];for(var t=0;t<2;t++)for(var e=1;e<3;e++){var n=r.getLocation(t,e);n!==Be.EXTERIOR&&n!==Be.INTERIOR||(this.isNull(t,e)?this._depth[t][e]=Dn.depthAtLocation(n):this._depth[t][e]+=Dn.depthAtLocation(n))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1];arguments[2]===Be.INTERIOR&&this._depth[t][e]++}}getClass(){return Dn}get interfaces_(){return[]}}Dn.constructor_=function(){this._depth=Array(2).fill().map(()=>Array(3));for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=Dn.NULL_VALUE},Dn.NULL_VALUE=-1;class Fn extends sn{constructor(){super(),Fn.constructor_.apply(this,arguments)}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof $e&&arguments[0]instanceof nn))return super.updateIM.apply(this,arguments);{let t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,tn.ON),t.getLocation(1,tn.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,tn.LEFT),t.getLocation(1,tn.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,tn.RIGHT),t.getLocation(1,tn.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Fn(t,nn.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof Fn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(e.pts[s])||(n=!1),this.pts[s].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){let t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){Fn.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new An(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new K;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,n,r){var i=new H(t.getIntersection(r)),s=e,o=t.getEdgeDistance(n,r),a=s+1;if(a<this.pts.length){var l=this.pts[a];i.equals2D(l)&&(s=a,o=0)}this.eiList.add(i,s,o)}toString(){var t=new $t;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}getClass(){return Fn}get interfaces_(){return[]}}Fn.constructor_=function(){if(this.pts=null,this._env=null,this.eiList=new Pn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Dn,this._depthDelta=0,1===arguments.length){let t=arguments[0];Fn.constructor_.call(this,t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.pts=t,this._label=e}};class qn extends Qe{constructor(){super(),qn.constructor_.apply(this,arguments)}static depthFactor(t,e){return t===Be.EXTERIOR&&e===Be.INTERIOR?1:t===Be.INTERIOR&&e===Be.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new nn(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new ln("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,tn.LEFT)===Be.INTERIOR&&this._label.getLocation(e,tn.RIGHT)===Be.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[tn.LEFT]+"/"+this._depth[tn.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Be.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Be.EXTERIOR);return t&&e&&n}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===tn.LEFT&&(r=-1);var i=tn.opposite(t),s=e+n*r;this.setDepth(t,e),this.setDepth(i,s)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}getClass(){return qn}get interfaces_(){return[]}}qn.constructor_=function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];let t=arguments[0],e=arguments[1];if(Qe.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()};class Yn{constructor(){Yn.constructor_.apply(this,arguments)}createNode(t){return new on(t,null)}getClass(){return Yn}get interfaces_(){return[]}}Yn.constructor_=function(){};class Gn{constructor(){Gn.constructor_.apply(this,arguments)}static linkResultDirectedEdges(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof on){let t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof H){let t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){pt.out.println(t)}isBoundaryNode(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Be.BOUNDARY}linkAllDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,n,r){return!!t.equals(n)&&(ae.index(t,e,r)===ae.COLLINEAR&&Je.quadrant(t,e)===Je.quadrant(n,r))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){pt.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}addEdges(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new qn(n,!0),i=new qn(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null}getClass(){return Gn}get interfaces_(){return[]}}Gn.constructor_=function(){if(this._edges=new ht,this._nodes=null,this._edgeEndList=new ht,0===arguments.length)this._nodes=new an(new Yn);else if(1===arguments.length){let t=arguments[0];this._nodes=new an(t)}};class Bn extends Gn{constructor(){super(),Bn.constructor_.apply(this,arguments)}static determineBoundary(t,e){return t.isInBoundary(e)?Be.BOUNDARY:Be.INTERIOR}insertBoundaryPoint(t,e){var n=this._nodes.addNode(e).getLabel(),r=1;Be.NONE;n.getLocation(t,tn.ON)===Be.BOUNDARY&&r++;var i=Bn.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,i)}computeSelfNodes(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){let i=arguments[0],s=arguments[1],o=arguments[2];var t=new yn(i,!0,!1);t.setIsDoneIfProperInt(o);var e=this.createEdgeSetIntersector(),n=this._parentGeom instanceof ce||this._parentGeom instanceof ue||this._parentGeom instanceof ge,r=s||!n;return e.computeIntersections(this._edges,t,r),this.addSelfIntersectionNodes(this._argIndex),t}}computeSplitEdges(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,n){var r=new yn(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof ee){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Be.INTERIOR)}else if(arguments[0]instanceof H){let t=arguments[0];this.insertPoint(this._argIndex,t,Be.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),Be.EXTERIOR,Be.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Be.INTERIOR,Be.EXTERIOR)}}addEdge(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Be.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Be.BOUNDARY)}addLineString(t){var e=_t.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Fn(e,new nn(this._argIndex,Be.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),W.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Be.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)}addPolygonRing(t,e,n){if(t.isEmpty())return null;var r=_t.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,s=n;ae.isCCW(r)&&(i=n,s=e);var o=new Fn(r,new nn(this._argIndex,Be.BOUNDARY,i,s));this._lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this._argIndex,r[0],Be.BOUNDARY)}insertPoint(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new nn(t,n):i.setLocation(t,n)}createEdgeSetIntersector(){return new mn}addSelfIntersectionNodes(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var s=i.next();this.addSelfIntersectionNode(t,s.coord,r)}}add(){if(!(1===arguments.length&&arguments[0]instanceof $))return super.add.apply(this,arguments);{let t=arguments[0];if(t.isEmpty())return null;if(t instanceof ge&&(this._useBoundaryDeterminationRule=!1),t instanceof ue)this.addPolygon(t);else if(t instanceof Qt)this.addLineString(t);else if(t instanceof ee)this.addPoint(t);else if(t instanceof he)this.addCollection(t);else if(t instanceof Ut)this.addCollection(t);else if(t instanceof ge)this.addCollection(t);else{if(!(t instanceof Bt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}}addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}locate(t){return P(this._parentGeom,le)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Cn(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof Qt){let t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}getClass(){return Bn}get interfaces_(){return[]}}Bn.constructor_=function(){if(this._parentGeom=null,this._lineEdgeMap=new Te,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ke,2===arguments.length){let t=arguments[0],e=arguments[1];Bn.constructor_.call(this,t,e,Q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}};class Un extends Qe{constructor(){super(),Un.constructor_.apply(this,arguments)}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){for(var n=0,r=!1,i=this.iterator();i.hasNext();){(s=i.next().getLabel().getLocation(t))===Be.BOUNDARY&&n++,s===Be.INTERIOR&&(r=!0)}var s=Be.NONE;r&&(s=Be.INTERIOR),n>0&&(s=Bn.determineBoundary(e,n)),this._label.setLocation(t,s)}computeLabelSide(t,e){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var i=r.getLabel().getLocation(t,e);if(i===Be.INTERIOR)return this._label.setLocation(t,e,Be.INTERIOR),null;i===Be.EXTERIOR&&this._label.setLocation(t,e,Be.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,tn.LEFT),this.computeLabelSide(t,tn.RIGHT)}updateIM(t){Fn.updateIM(this._label,t)}computeLabel(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0)}this._label=e?new nn(Be.NONE,Be.NONE,Be.NONE):new nn(Be.NONE);for(var r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)}getClass(){return Un}get interfaces_(){return[]}}Un.constructor_=function(){if(this._edgeEnds=new ht,1===arguments.length){let t=arguments[0];Un.constructor_.call(this,null,t)}else if(2===arguments.length){arguments[0];let t=arguments[1];Qe.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new nn(t.getLabel())),this.insert(t)}};class Xn extends cn{constructor(){super(),Xn.constructor_.apply(this,arguments)}updateIM(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}}insert(t){var e=this._edgeMap.get(t);null===e?(e=new Un(t),this.insertEdgeEnd(t,e)):e.insert(t)}getClass(){return Xn}get interfaces_(){return[]}}Xn.constructor_=function(){};class zn extends on{constructor(){super(),zn.constructor_.apply(this,arguments)}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}getClass(){return zn}get interfaces_(){return[]}}zn.constructor_=function(){let t=arguments[0],e=arguments[1];on.constructor_.call(this,t,e)};class kn extends Yn{constructor(){super(),kn.constructor_.apply(this,arguments)}createNode(t){return new zn(t,new Xn)}getClass(){return kn}get interfaces_(){return[]}}kn.constructor_=function(){};class jn{constructor(){jn.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._nodes.add(n)}}computeProperIntersectionIM(t,e){var n=this._arg[0].getGeometry().getDimension(),r=this._arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),s=t.hasProperInteriorIntersection();2===n&&2===r?i&&e.setAtLeast("212101212"):2===n&&1===r?(i&&e.setAtLeast("FFF0FFFF2"),s&&e.setAtLeast("1FFFFF1FF")):1===n&&2===r?(i&&e.setAtLeast("F0FFFFFF2"),s&&e.setAtLeast("1F1FFFFFF")):1===n&&1===r&&s&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(var n=this._arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this._arg[e].getGeometry()),this._isolatedEdges.add(r))}}labelIsolatedEdge(t,e,n){if(n.getDimension()>0){var r=this._ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,r)}else t.getLabel().setAllLocations(e,Be.EXTERIOR)}computeIM(){var t=new $e;if(t.set(Be.EXTERIOR,Be.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new rn,r=n.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(r);var i=n.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}}copyNodesAndLabels(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),o=this._nodes.find(s.coord);o.getLabel().isNull(t)&&(r===Be.BOUNDARY?o.setLabelBoundary(t):o.setLabel(t,Be.INTERIOR))}}labelIsolatedNode(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,n)}computeIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),o=this._nodes.addNode(s.coord);r===Be.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,Be.INTERIOR)}}labelIsolatedNodes(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();W.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(var e=this._isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var n=this._nodes.iterator();n.hasNext();){var r=n.next();r.updateIM(t),r.updateIMFromEdges(t)}}computeDisjointIM(t){var e=this._arg[0].getGeometry();e.isEmpty()||(t.set(Be.INTERIOR,Be.EXTERIOR,e.getDimension()),t.set(Be.BOUNDARY,Be.EXTERIOR,e.getBoundaryDimension()));var n=this._arg[1].getGeometry();n.isEmpty()||(t.set(Be.EXTERIOR,Be.INTERIOR,n.getDimension()),t.set(Be.EXTERIOR,Be.BOUNDARY,n.getBoundaryDimension()))}getClass(){return jn}get interfaces_(){return[]}}jn.constructor_=function(){this._li=new Ve,this._ptLocator=new Ke,this._arg=null,this._nodes=new an(new kn),this._im=null,this._isolatedEdges=new ht,this._invalidPoint=null;let t=arguments[0];this._arg=t};class Vn{constructor(){Vn.constructor_.apply(this,arguments)}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}getClass(){return Vn}get interfaces_(){return[]}}Vn.constructor_=function(){if(this._li=new Ve,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){let t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Bn(0,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];Vn.constructor_.call(this,t,e,Q.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Bn(0,t,n),this._arg[1]=new Bn(1,e,n)}};class Wn{constructor(){Wn.constructor_.apply(this,arguments)}static contains(t,e){return new Wn(t).contains(e)}isContainedInBoundary(t){if(t instanceof ue)return!1;if(t instanceof ee)return this.isPointContainedInBoundary(t);if(t instanceof Qt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){for(var e=t.getCoordinateSequence(),n=new H,r=new H,i=0;i<e.size()-1;i++)if(e.getCoordinate(i,n),e.getCoordinate(i+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof ee){let t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof H){let t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}getClass(){return Wn}get interfaces_(){return[]}}Wn.constructor_=function(){this._rectEnv=null;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal()};class Hn{constructor(){Hn.constructor_.apply(this,arguments)}intersects(t,e){var n=new K(t,e);if(!this._rectEnv.intersects(n))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var r=t;t=e,e=r}var i=!1;return e.y>t.y&&(i=!0),i?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}getClass(){return Hn}get interfaces_(){return[]}}Hn.constructor_=function(){this._li=new Ve,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;let t=arguments[0];this._rectEnv=t,this._diagUp0=new H(t.getMinX(),t.getMinY()),this._diagUp1=new H(t.getMaxX(),t.getMaxY()),this._diagDown0=new H(t.getMinX(),t.getMaxY()),this._diagDown1=new H(t.getMaxX(),t.getMinY())};class Zn{constructor(){Zn.constructor_.apply(this,arguments)}applyTo(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof Bt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}getClass(){return Zn}get interfaces_(){return[]}}Zn.constructor_=function(){this._isDone=!1};class Kn{constructor(){Kn.constructor_.apply(this,arguments)}static intersects(t,e){return new Kn(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new $n(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Jn(this._rectangle);if(n.applyTo(t),n.containsPoint())return!0;var r=new Qn(this._rectangle);return r.applyTo(t),!!r.intersects()}getClass(){return Kn}get interfaces_(){return[]}}Kn.constructor_=function(){this._rectangle=null,this._rectEnv=null;let t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()};class $n extends Zn{constructor(){super(),$n.constructor_.apply(this,arguments)}isDone(){return!0===this._intersects}visit(t){var e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}getClass(){return $n}get interfaces_(){return[]}}$n.constructor_=function(){this._rectEnv=null,this._intersects=!1;let t=arguments[0];this._rectEnv=t};class Jn extends Zn{constructor(){super(),Jn.constructor_.apply(this,arguments)}isDone(){return!0===this._containsPoint}visit(t){if(!(t instanceof ue))return null;var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;for(var n=new H,r=0;r<4;r++)if(this._rectSeq.getCoordinate(r,n),e.contains(n)&&hn.containsPointInPolygon(n,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}getClass(){return Jn}get interfaces_(){return[]}}Jn.constructor_=function(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;let t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()};class Qn extends Zn{constructor(){super(),Qn.constructor_.apply(this,arguments)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;var n=On.getLines(t);this.checkIntersectionWithLineStrings(n)}checkIntersectionWithLineStrings(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this._hasIntersection)return null}}checkIntersectionWithSegments(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this._p0),e.getCoordinate(n,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}getClass(){return Qn}get interfaces_(){return[]}}Qn.constructor_=function(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new H,this._p1=new H;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new Hn(this._rectEnv)};class tr extends Vn{constructor(){super(),tr.constructor_.apply(this,arguments)}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new tr(t,e).getIntersectionMatrix().isCovers())))}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return Kn.intersects(t,e);if(e.isRectangle())return Kn.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(var n=0;n<t.getNumGeometries();n++)for(var r=0;r<e.getNumGeometries();r++)if(t.getGeometryN(n).intersects(e.getGeometryN(r)))return!0;return!1}return new tr(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new tr(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static relate(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return new tr(t,e).getIntersectionMatrix()}if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];return new tr(t,e,n).getIntersectionMatrix()}}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new tr(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new tr(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Wn.contains(t,e):new tr(t,e).getIntersectionMatrix().isContains())))}getIntersectionMatrix(){return this._relate.computeIM()}getClass(){return tr}get interfaces_(){return[]}}function er(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){return!e||"object"!==nr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&or(t,e)}function or(t,e){return(or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t,e,n){return e&&lr(t.prototype,e),n&&lr(t,n),t}tr.constructor_=function(){if(this._relate=null,2===arguments.length){let t=arguments[0],e=arguments[1];Vn.constructor_.call(this,t,e),this._relate=new jn(this._arg)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];Vn.constructor_.call(this,t,e,n),this._relate=new jn(this._arg)}};var hr=function(){function t(){ar(this,t)}return ur(t,[{key:"getFunctionFilter",value:function(){}},{key:"execute",value:function(t){}},{key:"toCQL",value:function(){}}]),t}(),cr=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ar(this,e),(n=rr(this,ir(e).call(this))).filterFunction_=t,n.cqlFilter_="",M.utils.isNullOrEmpty(r.cqlFilter)||(n.cqlFilter_=r.cqlFilter),n}return sr(e,hr),ur(e,[{key:"setFunction",value:function(t){this.filterFunction_=t}},{key:"getFunctionFilter",value:function(){return this.filterFunction_}},{key:"execute",value:function(t){return t.filter(this.filterFunction_)}},{key:"toCQL",value:function(){return this.cqlFilter_}}]),e}(),gr=function(t){function e(t,n){ar(this,e);return rr(this,ir(e).call(this,function(e,n){var r=null;return M.utils.isNullOrEmpty(e)||(r=e.getGeometry()),t(r,n)},n))}return sr(e,cr),e}(),fr=function(t,e){var n="",r=new M.format.WKT;return e.forEach(function(e,i){0!==i&&(n+=" OR ");var s=new M.Feature("filtered_geom",{type:"Feature",geometry:e}),o=r.write(s);n+="".concat(t,"({{geometryName}}, ").concat(o,")")}),n},pr=function(t){var e=function(t){var e=t,n=[];return e instanceof M.layer.Vector?n=er(e.getFeatures().map(function(t){return t.getGeometry()})):(M.utils.isArray(e)||(e=[e]),n=e.map(function(t){var e;return t instanceof M.Feature?e=t.getGeometry():M.isObject(t)&&(e=t),e})),n}(t);return new gr(function(t,n){var r=new Ae,i=r.read(t);return e.some(function(t){var e=r.read(t);return tr.intersects(i,e)})},{cqlFilter:fr("INTERSECTS",e)})};function _r(t){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yr(t,e){return!e||"object"!==_r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Er={mapAttributions:1,layerAttributions:2,mixed:3},xr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=yr(this,mr(e).call(this)),M.utils.isNullOrEmpty(n.mode)||!Object.values(Er).includes(n.mode))throw new Error(v("exception.mode"));if(n.mode===Er.mapAttributions&&!M.utils.isNullOrEmpty(n.url)&&M.utils.isNullOrEmpty(n.type))throw new Error(v("exception.type"));if(n.mode===Er.mapAttributions&&!M.utils.isNullOrEmpty(n.layerName)&&M.utils.isNullOrEmpty(n.type))throw new Error(v("exception.layerName"));return t.map_=null,t.controls_=[],t.mode_=Number.parseInt(n.mode,10),t.url_=n.url||M.config.attributions.url,t.type_=n.type||"kml",t.layerName_=n.layerName||"attributions",t.layer_=n.layer,t.scale_=Number.parseInt(n.scale,10)||1e4,t.attributionParam_=n.attributionParam||"atribucion",t.urlParam_=n.urlParam||"url",t.minWidth_=n.minWidth||"100px",t.maxWidth_=n.maxWidth||"200px",t.position_=n.position||"BL",t.defaultAttribution_=n.defaultAttribution||M.config.attributions.defaultAttribution,t.defaultURL_=n.defaultURL||M.config.attributions.defaultURL,t.tooltip_=n.tooltip||v("tooltip"),t.urlAttribute=n.urlAttribute||"Gobierno de España",window.addEventListener("resize",function(e){return t.setCollapsiblePanel(e)}),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(e,M.Plugin),n=e,(r=[{key:"addTo",value:function(t){var e=this;this.map_=t,this.impl_=new l(t),this.control_=new S(this.position_,this.closePanel),this.controls_.push(this.control_),this.panel_=new M.ui.Panel("Attributions",{collapsible:window.innerWidth<769,position:M.ui.position[this.position_],className:"m-panel-attributions",collapsedButtonClass:"g-cartografia-info",tooltip:this.tooltip_}),this.panel_.addControls(this.control_),this.map_.addPanels(this.panel_),this.initMode(),this.onMoveEnd(function(){e.changeAttributions()})}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.panel_=null}},{key:"initMode",value:function(){if(this.mode_===Er.mapAttributions){if(!(this.layer_ instanceof M.layer.Vector)){var t={name:this.layerName_,url:this.url_};"geojson"===this.type_?this.layer_=new M.layer.GeoJSON(t,{displayInLayerSwitcher:!1}):"kml"===this.type_?this.layer_=new M.layer.KML(t,{displayInLayerSwitcher:!1}):this.type}this.map_.getLayers({name:this.layer_}).length<1&&(this.map_.addLayers(this.layer_),this.layer_.displayInLayerSwitcher=!1,this.layer_.setVisible(!1))}}},{key:"changeAttributions",value:function(){if(this.clearContent(),this.map_.getScale()<=this.scale_){this.setVisible(!0);var t=[];if(this.mode_===Er.mapAttributions){t=this.getMapAttributions();var e=this.map_.getZoom(),n=this.map_.getBaseLayers()[0],r=this.map_.getLayers().filter(function(t){return"WMTS"===t.type&&!t.displayInLayerSwitcher&&"OI.OrthoimageCoverage"===t.name}).length>0;t=void 0!==n&&"OI.OrthoimageCoverage"===n.name||r?e<14?[{attribution:"Copernicus Sentinel 2019",url:"https://sentinel.esa.int/web/sentinel/home"}].concat(t):[{attribution:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}].concat(t):void 0===n||"IGNBaseTodo"!==n.name&&"EL.GridCoverageDSM"!==n.name?void 0!==n&&"LC.LandCoverSurfaces"===n.name?e<14?[{attribution:"CORINE-Land Cover. Instituto Geográfico Nacional",url:this.defaultURL_}].concat(t):[{attribution:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}].concat(t):[{attribution:this.defaultAttribution_,url:this.defaultURL_}].concat(t):[{attribution:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}].concat(t)}this.addContent(t)}else{var i=this.map_.getZoom(),s=this.map_.getBaseLayers()[0],o=[{attribution:this.defaultAttribution_,url:this.defaultURL_}],a=this.map_.getLayers().filter(function(t){return"WMTS"===t.type&&!t.displayInLayerSwitcher&&"OI.OrthoimageCoverage"===t.name}).length>0;void 0!==s&&"OI.OrthoimageCoverage"===s.name||a?o=i<14?[{attribution:"Copernicus Sentinel 2019",url:"https://sentinel.esa.int/web/sentinel/home"}]:[{attribution:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}]:void 0===s||"IGNBaseTodo"!==s.name&&"EL.GridCoverageDSM"!==s.name?void 0!==s&&"LC.LandCoverSurfaces"===s.name&&(o=i<14?[{attribution:"CORINE-Land Cover. Instituto Geográfico Nacional",url:this.defaultURL_}]:[{attribution:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}]):o=[{attribution:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}],this.addContent(o)}}},{key:"addContent",value:function(t){var e=this,n=this.control_.getElement(),r=t.map(function(t,n,r){var i=document.createElement("a");i.target="_blank",i.href=t.url,i.innerHTML=t.attribution;var s=e.map_.getScale()>e.scale_?"":", ".concat(e.urlAttribute);return i.innerHTML+=r.length-1===n?s:",",i}),i=document.createElement("div");r.forEach(function(t){i.append(t)}),n.append(i)}},{key:"clearContent",value:function(){if(!M.utils.isNullOrEmpty(this.control_)){var t=this.control_.getElement();t.querySelectorAll("div").forEach(function(e){return t.removeChild(e)})}}},{key:"setVisible",value:function(t){this.control_.getElement().style.display=!1===t?"none":""}},{key:"getMapAttributions",value:function(){var t=this;this.updateBBoxFeature();var e=this.map_.getLayers().filter(function(t){return t.name.includes("attributions")})[0].getFeatures();return pr(this.bboxFeature_).execute(e).map(function(e){return{attribution:e.getAttribute(t.attributionParam_)||"",url:e.getAttribute(t.urlParam_)||t.defaultURL_}}).filter(function(t,e,n){return n.map(function(t){return t.attribution}).indexOf(t.attribution)===e})}},{key:"getLayerAttributions",value:function(){}},{key:"closePanel",value:function(){this.getPanel().collapse()}},{key:"changeContentAttribution",value:function(t){this.control_.changeContent(t)}},{key:"updateBBoxFeature",value:function(){var t=this.map_.getBbox(),e=t.x,n=t.y;this.bboxFeature_=new M.Feature("bbox_feature",{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[e.min,n.min],[e.min,n.max],[e.max,n.max],[e.max,n.min],[e.min,n.min]]]}})}},{key:"setCollapsiblePanel",value:function(t){this.getPanel()&&this.getPanel().getTemplatePanel()&&(t.target.innerWidth<769?(this.getPanel().getTemplatePanel().classList.remove("no-collapsible"),this.closePanel()):(this.getPanel().getTemplatePanel().classList.add("no-collapsible"),this.getPanel().getTemplatePanel().classList.remove("collapsed")))}},{key:"onMoveEnd",value:function(t){this.impl_.registerEvent("moveend",function(e){return t(e)})}},{key:"getPanel",value:function(){return this.panel_}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.mode,"*").concat(this.scale,"*").concat(this.defaultAttribution,"*").concat(this.defaultURL,"*").concat(this.url,"*").concat(this.type,"*").concat(this.layerName,"*").concat(this.attributionParam,"*").concat(this.urlParam,"*").concat(this.urlAttribute)}},{key:"name",get:function(){return"attributions"}},{key:"mode",get:function(){return this.mode_}},{key:"position",get:function(){return this.position_}},{key:"scale",get:function(){return this.scale_}},{key:"defaultAttribution",get:function(){return this.defaultAttribution_}},{key:"defaultURL",get:function(){return this.defaultURL_}},{key:"url",get:function(){return this.url_}},{key:"type",get:function(){return this.type_}},{key:"layerName",get:function(){return this.layerName_}},{key:"attributionParam",get:function(){return this.attributionParam_}},{key:"urlParam",get:function(){return this.urlParam_}}])&&dr(n.prototype,r),i&&dr(n,i),e}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Attributions=xr,window.M.control.AttributionsControl=S,window.M.impl.control.AttributionsControl=_}]);
//# sourceMappingURL=attributions.ol.min.js.map