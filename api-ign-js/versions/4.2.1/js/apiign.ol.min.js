!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=234)}([function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){var n=r(2),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(135),i=r(50),o=r(51);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function _(t,e,r,n){return U(B(e,t.length-r),t,r,n)}function b(t,e,r,n){return U(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return b(t,e,r,n)}function x(t,e,r,n){return U(z(e),t,r,n)}function E(t,e,r,n){return U(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return M(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=t.slice(e,r),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return b(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return x(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function M(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function P(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=G(t[o]);return i}function C(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function A(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,o){return o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function j(t,e,r,n,o){return o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):A(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):A(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:B(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(8))},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(174).Buffer}catch(t){}function s(t,e,r){for(var n=0,i=Math.min(t.length,r),o=e;o<i;o++){var a=t.charCodeAt(o)-48;n<<=4,n|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=t.length-6,n=0;r>=e;r-=6)i=s(t,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==e&&(i=s(t,e,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(t,c,t.length,e),c=0;c<a;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<n;l++){for(var c=u>>>26,h=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;c+=(a=(i=0|t.words[d])*(o=0|e.words[p])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=c[t],p=h[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var y=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?y+r:l[f-y.length]+y+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-i;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,l=0,c=0|a[0],h=8191&c,f=c>>>13,p=0|a[1],d=8191&p,y=p>>>13,g=0|a[2],m=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],E=8191&x,S=x>>>13,O=0|a[5],T=8191&O,M=O>>>13,I=0|a[6],P=8191&I,C=I>>>13,L=0|a[7],k=8191&L,R=L>>>13,A=0|a[8],N=8191&A,F=A>>>13,j=0|a[9],D=8191&j,G=j>>>13,B=0|s[0],z=8191&B,U=B>>>13,q=0|s[1],V=8191&q,Y=q>>>13,W=0|s[2],X=8191&W,Z=W>>>13,H=0|s[3],K=8191&H,$=H>>>13,J=0|s[4],Q=8191&J,tt=J>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,pt=0|s[9],dt=8191&pt,yt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(l+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,U))+Math.imul(f,z)|0))<<13)|0;l=((o=Math.imul(f,U))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(d,z),i=(i=Math.imul(d,U))+Math.imul(y,z)|0,o=Math.imul(y,U);var mt=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,V)|0))<<13)|0;l=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,z),i=(i=Math.imul(m,U))+Math.imul(v,z)|0,o=Math.imul(v,U),n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(y,V)|0,o=o+Math.imul(y,Y)|0;var vt=(l+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,X)|0))<<13)|0;l=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,U))+Math.imul(w,z)|0,o=Math.imul(w,U),n=n+Math.imul(m,V)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,X)|0,i=(i=i+Math.imul(d,Z)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,Z)|0;var _t=(l+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,$)|0)+Math.imul(f,K)|0))<<13)|0;l=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(E,z),i=(i=Math.imul(E,U))+Math.imul(S,z)|0,o=Math.imul(S,U),n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(m,X)|0,i=(i=i+Math.imul(m,Z)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,Z)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,$)|0)+Math.imul(y,K)|0,o=o+Math.imul(y,$)|0;var bt=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,z),i=(i=Math.imul(T,U))+Math.imul(M,z)|0,o=Math.imul(M,U),n=n+Math.imul(E,V)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Z)|0,n=n+Math.imul(m,K)|0,i=(i=i+Math.imul(m,$)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,$)|0,n=n+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0;var wt=(l+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,U))+Math.imul(C,z)|0,o=Math.imul(C,U),n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Z)|0,n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,$)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,$)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0;var xt=(l+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,U))+Math.imul(R,z)|0,o=Math.imul(R,U),n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,Y)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,Z)|0,n=n+Math.imul(E,K)|0,i=(i=i+Math.imul(E,$)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,$)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(m,rt)|0,i=(i=i+Math.imul(m,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0;var Et=(l+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,U))+Math.imul(F,z)|0,o=Math.imul(F,U),n=n+Math.imul(k,V)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(R,V)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(P,X)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,$)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,lt)|0;var St=(l+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,U))+Math.imul(G,z)|0,o=Math.imul(G,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,Y)|0,n=n+Math.imul(k,X)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,$)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(m,ut)|0,i=(i=i+Math.imul(m,lt)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,lt)|0,n=n+Math.imul(d,ht)|0,i=(i=i+Math.imul(d,ft)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,ft)|0;var Ot=(l+(n=n+Math.imul(h,dt)|0)|0)+((8191&(i=(i=i+Math.imul(h,yt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,yt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Y))+Math.imul(G,V)|0,o=Math.imul(G,Y),n=n+Math.imul(N,X)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(F,X)|0,o=o+Math.imul(F,Z)|0,n=n+Math.imul(k,K)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,$)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(m,ht)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var Tt=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,yt)|0)+Math.imul(y,dt)|0))<<13)|0;l=((o=o+Math.imul(y,yt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,X),i=(i=Math.imul(D,Z))+Math.imul(G,X)|0,o=Math.imul(G,Z),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(F,K)|0,o=o+Math.imul(F,$)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,at)|0,n=n+Math.imul(E,ut)|0,i=(i=i+Math.imul(E,lt)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,lt)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Mt=(l+(n=n+Math.imul(m,dt)|0)|0)+((8191&(i=(i=i+Math.imul(m,yt)|0)+Math.imul(v,dt)|0))<<13)|0;l=((o=o+Math.imul(v,yt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,$))+Math.imul(G,K)|0,o=Math.imul(G,$),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(F,Q)|0,o=o+Math.imul(F,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,lt)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,lt)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var It=(l+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,yt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,yt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,tt))+Math.imul(G,Q)|0,o=Math.imul(G,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(F,rt)|0,o=o+Math.imul(F,nt)|0,n=n+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,at)|0,n=n+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,lt)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(M,ht)|0,o=o+Math.imul(M,ft)|0;var Pt=(l+(n=n+Math.imul(E,dt)|0)|0)+((8191&(i=(i=i+Math.imul(E,yt)|0)+Math.imul(S,dt)|0))<<13)|0;l=((o=o+Math.imul(S,yt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(G,rt)|0,o=Math.imul(G,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,at)|0,n=n+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(R,ut)|0,o=o+Math.imul(R,lt)|0,n=n+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Ct=(l+(n=n+Math.imul(T,dt)|0)|0)+((8191&(i=(i=i+Math.imul(T,yt)|0)+Math.imul(M,dt)|0))<<13)|0;l=((o=o+Math.imul(M,yt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,at))+Math.imul(G,ot)|0,o=Math.imul(G,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,lt)|0,n=n+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(R,ht)|0,o=o+Math.imul(R,ft)|0;var Lt=(l+(n=n+Math.imul(P,dt)|0)|0)+((8191&(i=(i=i+Math.imul(P,yt)|0)+Math.imul(C,dt)|0))<<13)|0;l=((o=o+Math.imul(C,yt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,lt))+Math.imul(G,ut)|0,o=Math.imul(G,lt),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(F,ht)|0,o=o+Math.imul(F,ft)|0;var kt=(l+(n=n+Math.imul(k,dt)|0)|0)+((8191&(i=(i=i+Math.imul(k,yt)|0)+Math.imul(R,dt)|0))<<13)|0;l=((o=o+Math.imul(R,yt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,ht),i=(i=Math.imul(D,ft))+Math.imul(G,ht)|0,o=Math.imul(G,ft);var Rt=(l+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,yt)|0)+Math.imul(F,dt)|0))<<13)|0;l=((o=o+Math.imul(F,yt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var At=(l+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,yt))+Math.imul(G,dt)|0))<<13)|0;return l=((o=Math.imul(G,yt))+(i>>>13)|0)+(At>>>26)|0,At&=67108863,u[0]=gt,u[1]=mt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Et,u[8]=St,u[9]=Ot,u[10]=Tt,u[11]=Mt,u[12]=It,u[13]=Pt,u[14]=Ct,u[15]=Lt,u[16]=kt,u[17]=Rt,u[18]=At,0!==l&&(u[19]=l,r.length++),r};function d(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var c=o-l,h=(0|t.words[c])*(0|e.words[l]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):d(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=u,f=l,p=0;p<a;p++){var d=r[c+p],y=n[c+p],g=r[c+p+a],m=n[c+p+a],v=h*g-f*m;m=h*m+f*g,g=v,r[c+p]=d+g,n[c+p]=y+m,r[c+p+a]=d-g,n[c+p+a]=y-m,p!==s&&(v=u*h-l*f,f=u*f+l*h,h=v)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,i),this.transform(l,o,c,h,n,i);for(var p=0;p<n;p++){var d=s[p]*c[p]-u[p]*h[p];u[p]=s[p]*h[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var d=0,y=1;0==(r.words[0]&y)&&d<26;++d,y<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,c=1;0==(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(v,m),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(_,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var y=p,g=0;0!==y.cmp(s);g++)y=y.redSqr();n(g<d);var m=this.pow(h,new o(1).iushln(d-g-1));f=f.redMul(m),h=m.redSqr(),p=p.redMul(h),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],c=u-1;c>=0;c--){var h=l>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,x),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(this,r(31)(t))},function(t,e,r){"use strict";var n=e;n.version=r(180).version,n.utils=r(181),n.rand=r(74),n.curve=r(26),n.curves=r(186),n.ec=r(194),n.eddsa=r(198)},function(t,e,r){(function(t){var r;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var n,i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_,b,w,x,E,S,O,T,M,I,P,C,L,k,R,A,N,F,j,D,G,B,z,U,q,V,Y,W,X,Z,H,K,$,J,Q,tt,et,rt,nt,it,ot,at,st,ut,lt,ct,ht,ft,pt,dt,yt,gt,mt,vt,_t,bt,wt,xt,Et,St,Ot,Tt,Mt,It,Pt=[].slice;St=function(){var t,e,r,n,i;for(t={},n=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<e;n++)r=i[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),H=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},Ot=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},E=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},a=Math.PI,_t=Math.round,O=Math.cos,C=Math.floor,nt=Math.pow,K=Math.log,wt=Math.sin,xt=Math.sqrt,g=Math.atan2,Q=Math.max,y=Math.abs,l=2*a,s=a/3,i=a/180,u=180/a,(x=function(){return arguments[0]instanceof n?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,arguments,function(){})}).default=x,d=[],null!=t&&null!=t.exports&&(t.exports=x),void 0===(r=function(){return x}.apply(e,[]))||(t.exports=r),x.version="1.4.0",p={},h=[],f=!1,n=function(){function t(){var t,e,r,n,i,o,a,s,u;for(o=this,e=[],s=0,n=arguments.length;s<n;s++)null!=(t=arguments[s])&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=p[a])o._rgb=E(p[a](Ot(e.slice(0,-1))));else{for(f||(h=h.sort(function(t,e){return e.p-t.p}),f=!0),u=0,i=h.length;u<i&&!(a=(r=h[u]).test.apply(r,e));u++);a&&(o._rgb=E(p[a].apply(p,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),x._input=p,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
x.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],b)e.push(b[t.toLowerCase()]=b[t])}(),x.colors=Tt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},V=function(){var t,e,r,n,i,a,s;return n=(e=Ot(arguments))[0],t=e[1],r=e[2],a=(n+16)/116,i=isNaN(t)?a:a+t/500,s=isNaN(r)?a:a-r/200,a=o.Yn*Y(a),i=o.Xn*Y(i),s=o.Zn*Y(s),[It(3.2404542*i-1.5371385*a-.4985314*s),It(-.969266*i+1.8760108*a+.041556*s),r=It(.0556434*i-.2040259*a+1.0572252*s),e.length>3?e[3]:1]},It=function(t){return 255*(t<=.00304?12.92*t:1.055*nt(t,1/2.4)-.055)},Y=function(t){return t>o.t1?t*t*t:o.t2*(t-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ht=function(){var t,e,r,n,i,o,a;return r=(n=Ot(arguments))[0],e=n[1],t=n[2],o=(i=gt(r,e,t))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},mt=function(t){return(t/=255)<=.04045?t/12.92:nt((t+.055)/1.055,2.4)},Mt=function(t){return t>o.t3?nt(t,1/3):t/o.t2+o.t0},gt=function(){var t,e,r,n;return r=(n=Ot(arguments))[0],e=n[1],t=n[2],r=mt(r),e=mt(e),t=mt(t),[Mt((.4124564*r+.3575761*e+.1804375*t)/o.Xn),Mt((.2126729*r+.7151522*e+.072175*t)/o.Yn),Mt((.0193339*r+.119192*e+.9503041*t)/o.Zn)]},x.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["lab"]),function(){})},p.lab=V,n.prototype.lab=function(){return ht(this._rgb)},m=function(t){var e,r,n,i,o,a,s,u,l,c,h;return 2===(t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(x(i));return n}()).length?(l=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=l[0],a=l[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(o[e]+t*(a[e]-o[e]));return n}(),x.lab.apply(x,r)}):3===t.length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]);return n}(),x.lab.apply(x,r)}):4===t.length?(h=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=h[0],a=h[1],s=h[2],u=h[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*u[e]);return n}(),x.lab.apply(x,r)}):5===t.length&&(r=m(t.slice(0,3)),n=m(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},x.bezier=function(t){var e;return(e=m(t)).scale=function(){return x.scale(e)},e},x.cubehelix=function(t,e,r,n,i){var o,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===St(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var u,c,h,f,p;return u=l*((t+120)/360+e*s),f=nt(i[0]+a*s,n),c=(0!==o?r[0]+s*o:r)*f*(1-f)/2,h=O(u),p=wt(u),x(E([255*(f+c*(-.14861*h+1.78277*p)),255*(f+c*(-.29227*h-.90649*p)),255*(f+c*(1.97294*h)),1]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?r:("array"===St(r=t)?0===(o=r[1]-r[0])&&(r=r[1]):o=0,s)},s.lightness=function(t){return null==t?i:("array"===St(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return x.scale(s)},s.hue(r),s},x.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(C(16*Math.random()));return new n(t)},d=[],j=function(t,e,r,n){var i,o,a,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==St(t)&&(t=x(t)),"object"!==St(e)&&(e=x(e)),a=0,o=d.length;a<o;a++)if(n===(i=d[a])[0]){s=i[1](t,e,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},x.interpolate=j,n.prototype.interpolate=function(t,e,r){return j(this,t,e,r)},x.mix=j,n.prototype.mix=n.prototype.interpolate,p.rgb=function(){var t,e,r,n;for(t in r=[],e=Ot(arguments))n=e[t],r.push(n);return r},x.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["rgb"]),function(){})},n.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},h.push({p:3,test:function(t){var e;return e=Ot(arguments),"array"===St(e)&&3===e.length?"rgb":4===e.length&&"number"===St(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),p.lrgb=p.rgb,B=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(xt(nt(o[0],2)*(1-r)+nt(a[0],2)*r),xt(nt(o[1],2)*(1-r)+nt(a[1],2)*r),xt(nt(o[2],2)*(1-r)+nt(a[2],2)*r),i)},c=function(t){var e,r,i,o,a;for(e=1/t.length,a=[0,0,0,0],i=0,r=t.length;i<r;i++)o=t[i]._rgb,a[0]+=nt(o[0],2)*e,a[1]+=nt(o[1],2)*e,a[2]+=nt(o[2],2)*e,a[3]+=o[3]*e;return a[0]=xt(a[0]),a[1]=xt(a[1]),a[2]=xt(a[2]),a[3]>1&&(a[3]=1),new n(E(a))},d.push(["lrgb",B]),x.average=function(t,e){var r,n,i,o,s,u,l,h,f,p,d,y,m;if(null==e&&(e="rgb"),f=t.length,l=(t=t.map(function(t){return x(t)})).splice(0,1)[0],"lrgb"===e)return c(t);for(h in o=[],s=0,u=0,y=l.get(e))y[h]=y[h]||0,o.push(isNaN(y[h])?0:1),"h"!==e.charAt(h)||isNaN(y[h])||(r=y[h]/180*a,s+=O(r),u+=wt(r));for(n=l.alpha(),d=0,p=t.length;d<p;d++)for(h in m=(i=t[d]).get(e),n+=i.alpha(),y)isNaN(m[h])||(o[h]+=1,"h"===e.charAt(h)?(r=m[h]/180*a,s+=O(r),u+=wt(r)):y[h]+=m[h]);for(h in y)if("h"===e.charAt(h)){for(r=g(u/o[h],s/o[h])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;y[h]=r}else y[h]=y[h]/o[h];return x(y,e).alpha(n/f)},k=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,_t((255&r)/255*100)/100];if(null!=p.css&&(e=p.css(t)))return e;throw"unknown color: "+t},st=function(t,e){var r,n,i,o,a,s;return null==e&&(e="auto"),a=t[0],i=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),s=(s="000000"+(a<<16|i<<8|n).toString(16)).substr(s.length-6),o=(o="0"+_t(255*r).toString(16)).substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},p.hex=function(t){return k(t)},x.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hex"]),function(){})},n.prototype.hex=function(t){return null==t&&(t="auto"),st(this._rgb,t)},h.push({p:4,test:function(t){if(1===arguments.length&&"string"===St(t))return"hex"}}),N=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p;if(i=(t=Ot(arguments))[0],c=t[1],a=t[2],0===c)u=n=e=255*a;else{for(r=[0,0,0],h=2*a-(f=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?r[o]=h+6*(f-h)*p[o]:2*p[o]<1?r[o]=f:3*p[o]<2?r[o]=h+(f-h)*(2/3-p[o])*6:r[o]=h;u=(l=[_t(255*r[0]),_t(255*r[1]),_t(255*r[2])])[0],n=l[1],e=l[2]}return t.length>3?[u,n,e,t[3]]:[u,n,e]},lt=function(t,e,r){var n,i,o,a,s;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,o=Math.min(t,e,r),i=((Q=Math.max(t,e,r))+o)/2,Q===o?(s=0,n=Number.NaN):s=i<.5?(Q-o)/(Q+o):(Q-o)/(2-Q-o),t===Q?n=(e-r)/(Q-o):e===Q?n=2+(r-t)/(Q-o):r===Q&&(n=4+(t-e)/(Q-o)),(n*=60)<0&&(n+=360),[n,s,i]},x.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hsl"]),function(){})},p.hsl=N,n.prototype.hsl=function(){return lt(this._rgb)},F=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m;if(i=(t=Ot(arguments))[0],y=t[1],m=t[2],m*=255,0===y)u=n=e=m;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=m*(1-y),s=m*(1-y*(r=(i/=60)-(o=C(i)))),g=m*(1-y*(1-r)),o){case 0:u=(l=[m,g,a])[0],n=l[1],e=l[2];break;case 1:u=(c=[s,m,a])[0],n=c[1],e=c[2];break;case 2:u=(h=[a,m,g])[0],n=h[1],e=h[2];break;case 3:u=(f=[a,s,m])[0],n=f[1],e=f[2];break;case 4:u=(p=[g,a,m])[0],n=p[1],e=p[2];break;case 5:u=(d=[m,a,s])[0],n=d[1],e=d[2]}return[u,n,e,t.length>3?t[3]:1]},ct=function(){var t,e,r,n,i,o,a,s,u;return o=(a=Ot(arguments))[0],r=a[1],t=a[2],i=Math.min(o,r,t),e=(Q=Math.max(o,r,t))-i,u=Q/255,0===Q?(n=Number.NaN,s=0):(s=e/Q,o===Q&&(n=(r-t)/e),r===Q&&(n=2+(t-o)/e),t===Q&&(n=4+(o-r)/e),(n*=60)<0&&(n+=360)),[n,s,u]},x.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hsv"]),function(){})},p.hsv=F,n.prototype.hsv=function(){return ct(this._rgb)},et=function(t){return"number"===St(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},dt=function(){var t;return((t=Ot(arguments))[0]<<16)+(t[1]<<8)+t[2]},x.num=function(t){return new n(t,"num")},n.prototype.num=function(t){return null==t&&(t="rgb"),dt(this._rgb,t)},p.num=et,h.push({p:1,test:function(t){if(1===arguments.length&&"number"===St(t)&&t>=0&&t<=16777215)return"num"}}),L=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_;if(s=(r=Ot(arguments))[0],i=r[1],e=r[2],a=a/100*255,t=255*(i/=100),0===i)h=a=n=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(l=e*(1-i))+t*(1-(o=(s/=60)-(u=C(s)))),v=l+t*o,_=l+t,u){case 0:h=(f=[_,v,l])[0],a=f[1],n=f[2];break;case 1:h=(p=[c,_,l])[0],a=p[1],n=p[2];break;case 2:h=(d=[l,_,v])[0],a=d[1],n=d[2];break;case 3:h=(y=[l,c,_])[0],a=y[1],n=y[2];break;case 4:h=(g=[v,l,_])[0],a=g[1],n=g[2];break;case 5:h=(m=[_,l,c])[0],a=m[1],n=m[2]}return[h,a,n,r.length>3?r[3]:1]},at=function(){var t,e,r,n,i,o,a,s,u;return s=(u=Ot(arguments))[0],i=u[1],e=u[2],a=Math.min(s,i,e),r=100*(n=(Q=Math.max(s,i,e))-a)/255,t=a/(255-n)*100,0===n?o=Number.NaN:(s===Q&&(o=(i-e)/n),i===Q&&(o=2+(e-s)/n),e===Q&&(o=4+(s-i)/n),(o*=60)<0&&(o+=360)),[o,r,t]},x.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hcg"]),function(){})},p.hcg=L,n.prototype.hcg=function(){return at(this._rgb)},T=function(t){var e,r,n,i,o,a,s,u;if(t=t.toLowerCase(),null!=x.colors&&x.colors[t])return k(x.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=u=0;u<=3;i=++u)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=_t(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=r=0;r<=2;i=++r)s[i]=_t(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=N(n))[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=N(n))[3]=+o[4]);return s},ot=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(_t).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(_t).join(",")+","+t[3]+")":void 0},vt=function(t){return _t(100*t)/100},A=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=vt(t[0]||0),t[1]=vt(100*t[1])+"%",t[2]=vt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},p.css=function(t){return T(t)},x.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["css"]),function(){})},n.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?ot(this._rgb):"hsl"===t.slice(0,3)?A(this.hsl(),this.alpha()):void 0},p.named=function(t){return k(Tt[t])},h.push({p:5,test:function(t){if(1===arguments.length&&null!=Tt[t])return"named"}}),n.prototype.name=function(t){var e,r;for(r in arguments.length&&(Tt[t]&&(this._rgb=k(Tt[t])),this._rgb[3]=1),e=this.hex("rgb"),Tt)if(e===Tt[r])return r;return e},W=function(){var t,e,r,n;return r=(n=Ot(arguments))[0],t=n[1],e=n[2],[r,O(e*=i)*t,wt(e)*t]},X=function(){var t,e,r,n,i,o,a,s,u;return a=(r=Ot(arguments))[0],i=r[1],o=r[2],t=(s=W(a,i,o))[0],e=s[1],n=s[2],[(u=V(t,e,n))[0],u[1],n=u[2],r.length>3?r[3]:1]},q=function(){var t,e,r,n,i,o;return i=(o=Ot(arguments))[0],t=o[1],e=o[2],r=xt(t*t+e*e),n=(g(e,t)*u+360)%360,0===_t(1e4*r)&&(n=Number.NaN),[i,r,n]},ft=function(){var t,e,r,n,i,o,a;return i=(o=Ot(arguments))[0],r=o[1],e=o[2],n=(a=ht(i,r,e))[0],t=a[1],e=a[2],q(n,t,e)},x.lch=function(){var t;return t=Ot(arguments),new n(t,"lch")},x.hcl=function(){var t;return t=Ot(arguments),new n(t,"hcl")},p.lch=X,p.hcl=function(){var t,e,r,n;return e=(n=Ot(arguments))[0],t=n[1],r=n[2],X([r,t,e])},n.prototype.lch=function(){return ft(this._rgb)},n.prototype.hcl=function(){return ft(this._rgb).reverse()},it=function(t){var e,r,n,i,o,a;return null==t&&(t="rgb"),o=(a=Ot(arguments))[0],n=a[1],e=a[2],n/=255,e/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(n,e))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-e-i)*r,i]},S=function(){var t,e,r,n,i,o;return r=(e=Ot(arguments))[0],i=e[1],o=e[2],n=e[3],t=e.length>4?e[4]:1,1===n?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),o>=1?0:255*(1-o)*(1-n),t]},p.cmyk=function(){return S(Ot(arguments))},x.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["cmyk"]),function(){})},n.prototype.cmyk=function(){return it(this._rgb)},p.gl=function(){var t,e,r,n,i;for(n=function(){var t,r;for(e in r=[],t=Ot(arguments))i=t[e],r.push(i);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},x.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["gl"]),function(){})},n.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},pt=function(t,e,r){var n;return t=(n=Ot(arguments))[0],e=n[1],r=n[2],.2126*(t=$(t))+.7152*(e=$(e))+.0722*(r=$(r))},$=function(t){return(t/=255)<=.03928?t/12.92:nt((t+.055)/1.055,2.4)},U=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["rgb",U]),n.prototype.luminance=function(t,e){var r,n,i,o;return null==e&&(e="rgb"),arguments.length?(i=this._rgb,0===t?i=[0,0,0,this._rgb[3]]:1===t?i=[255,255,255,this[3]]:(r=pt(this._rgb),1e-7,n=20,o=function(r,i){var a,s;return a=(s=r.interpolate(i,.5,e)).luminance(),Math.abs(t-a)<1e-7||!n--?s:a>t?o(r,s):o(s,i)},i=r>t?o(x("black"),this).rgba():o(this,x("white")).rgba()),x(i).alpha(this.alpha())):pt(this._rgb)},Et=function(t){var e,r,n,i;return(i=t/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*K(r),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*K(e)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*K(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*K(r),e=255),[n,r,e]},yt=function(){var t,e,r,n,i,o,a;for(n=(i=Ot(arguments))[0],i[1],t=i[2],r=1e3,e=4e4,.4;e-r>.4;)(o=Et(a=.5*(e+r)))[2]/o[0]>=t/n?e=a:r=a;return _t(a)},x.temperature=x.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["temperature"]),function(){})},p.temperature=p.kelvin=p.K=Et,n.prototype.temperature=function(){return yt(this._rgb)},n.prototype.kelvin=n.prototype.temperature,x.contrast=function(t,e){var r,i,o,a;return"string"!==(o=St(t))&&"number"!==o||(t=new n(t)),"string"!==(a=St(e))&&"number"!==a||(e=new n(e)),(r=t.luminance())>(i=e.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},x.distance=function(t,e,r){var i,o,a,s,u,l,c;for(o in null==r&&(r="lab"),"string"!==(u=St(t))&&"number"!==u||(t=new n(t)),"string"!==(l=St(e))&&"number"!==l||(e=new n(e)),a=t.get(r),s=e.get(r),c=0,a)c+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(c)},x.deltaE=function(t,e,r,i){var o,s,u,l,c,h,f,p,d,m,v,_,b,w,x,E,S,T,M,I,P,C,L,k;for(null==r&&(r=1),null==i&&(i=1),"string"!==(x=St(t))&&"number"!==x||(t=new n(t)),"string"!==(E=St(e))&&"number"!==E||(e=new n(e)),o=(S=t.lab())[0],u=S[1],c=S[2],s=(T=e.lab())[0],l=T[1],h=T[2],f=xt(u*u+c*c),p=xt(l*l+h*h),I=o<16?.511:.040975*o/(1+.01765*o),M=.0638*f/(1+.0131*f)+.638,w=f<1e-6?0:180*g(c,u)/a;w<0;)w+=360;for(;w>=360;)w-=360;return P=w>=164&&w<=345?.56+y(.2*O(a*(w+168)/180)):.36+y(.4*O(a*(w+35)/180)),b=xt((d=f*f*f*f)/(d+1900)),xt((C=(o-s)/(r*I))*C+(L=(_=f-p)/(i*M))*L+((m=u-l)*m+(v=c-h)*v-_*_)/((k=M*(b*P+1-b))*k))},n.prototype.get=function(t){var e,r,n,i,o;return this,n=(i=t.split("."))[0],e=i[1],o=this[n](),e?(r=n.indexOf(e))>-1?o[r]:console.warn("unknown channel "+e+" in mode "+n):o},n.prototype.set=function(t,e){var r,n,i,o,a;if(this,i=(o=t.split("."))[0],r=o[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===St(e))switch(e.charAt(0)){case"+":case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+r+" in mode "+i);else a=e;return x(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(t){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},n.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=o.Kn*t,x.lab(e).alpha(this.alpha())},n.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*o.Kn,e[1]<0&&(e[1]=0),x.lch(e).alpha(this.alpha())},n.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},n.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),x(e[0]*t,e[1]*t,e[2]*t,t)},tt=function(t,e){return t*e/255},M=function(t,e){return t>e?e:t},Z=function(t,e){return t>e?t:e},bt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},rt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},w=function(t,e){return 255*(1-(1-e/255)/(t/255))},I=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255))>255?255:t},(v=function(t,e,r){if(!v[r])throw"unknown blend mode "+r;return v[r](t,e)}).normal=(_=function(t){return function(e,r){var n,i;return n=x(r).rgb(),i=x(e).rgb(),x(t(n,i),"rgb")}})((P=function(t){return function(e,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=t(e[n],r[n]);return o}})(function(t,e){return t})),v.multiply=_(P(tt)),v.screen=_(P(bt)),v.overlay=_(P(rt)),v.darken=_(P(M)),v.lighten=_(P(Z)),v.dodge=_(P(I)),v.burn=_(P(w)),x.blend=v,x.analyze=function(t){var e,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(i=t[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return x.limits(n,t,e)},n},x.scale=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_,b,w,E;return c="rgb",h=x("#ccc"),y=0,!1,a=[0,1],d=[],p=[0,0],r=!1,i=[],f=!1,l=0,u=1,o=!1,n={},g=!0,s=1,w=function(t){var e,r,n,o,a,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===St(t)&&null!=x.brewer&&(t=x.brewer[t]||x.brewer[t.toLowerCase()]||t),"array"===St(t)){for(1===t.length&&(t=[t[0],t[0]]),e=n=0,o=(t=t.slice(0)).length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)r=t[e],"string"===St(r)&&(t[e]=x(r));for(d.length=0,e=s=0,a=t.length-1;0<=a?s<=a:s>=a;e=0<=a?++s:--s)d.push(e/(t.length-1))}return b(),i=t},v=function(t){var e,n;if(null!=r){for(n=r.length-1,e=0;e<n&&t>=r[e];)e++;return e-1}return 0},E=function(t){return t},function(t){var e,n,i,o,a;return a=t,r.length>2&&(o=r.length-1,e=v(t),i=r[0]+(r[1]-r[0])*(0+.5*y),n=r[o-1]+(r[o]-r[o-1])*(1-.5*y),a=l+(r[e]+.5*(r[e+1]-r[e])-i)/(n-i)*(u-l)),a},_=function(t,e){var o,a,f,y,m,_,b;if(null==e&&(e=!1),isNaN(t))return h;if(b=e?t:r&&r.length>2?v(t)/(r.length-2):u!==l?(t-l)/(u-l):1,e||(b=E(b)),1!==s&&(b=nt(b,s)),b=p[0]+b*(1-p[0]-p[1]),b=Math.min(1,Math.max(0,b)),f=Math.floor(1e4*b),g&&n[f])o=n[f];else{if("array"===St(i))for(a=y=0,_=d.length-1;0<=_?y<=_:y>=_;a=0<=_?++y:--y){if(b<=(m=d[a])){o=i[a];break}if(b>=m&&a===d.length-1){o=i[a];break}if(b>m&&b<d[a+1]){b=(b-m)/(d[a+1]-m),o=x.interpolate(i[a],i[a+1],b,c);break}}else"function"===St(i)&&(o=i(b));g&&(n[f]=o)}return o},b=function(){return n={}},w(t),(m=function(t){var e;return e=x(_(t)),f&&e[f]?e[f]():e}).classes=function(t){var e;return null!=t?("array"===St(t)?(r=t,a=[t[0],t[t.length-1]]):(e=x.analyze(a),r=0===t?[e.min,e.max]:x.limits(e,"e",t)),m):r},m.domain=function(t){var e,r,n,o,s,c,h;if(!arguments.length)return a;if(l=t[0],u=t[t.length-1],d=[],n=i.length,t.length===n&&l!==u)for(s=0,o=t.length;s<o;s++)r=t[s],d.push((r-l)/(u-l));else for(e=h=0,c=n-1;0<=c?h<=c:h>=c;e=0<=c?++h:--h)d.push(e/(n-1));return a=[l,u],m},m.mode=function(t){return arguments.length?(c=t,b(),m):c},m.range=function(t,e){return w(t),m},m.out=function(t){return f=t,m},m.spread=function(t){return arguments.length?(y=t,m):y},m.correctLightness=function(t){return null==t&&(t=!0),o=t,b(),E=o?function(t){var e,r,n,i,o,a,s,u,l;for(e=_(0,!0).lab()[0],r=_(1,!0).lab()[0],s=e>r,n=_(t,!0).lab()[0],i=n-(o=e+(r-e)*t),u=0,l=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(u=t,t+=.5*(l-t)):(l=t,t+=.5*(u-t)),n=_(t,!0).lab()[0],i=n-o;return t}:function(t){return t},m},m.padding=function(t){return null!=t?("number"===St(t)&&(t=[t,t]),p=t,m):p},m.colors=function(e,n){var o,s,u,l,c,h,f,p;if(arguments.length<2&&(n="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===e)c=[m(.5)];else if(e>1)s=a[0],o=a[1]-s,c=function(){h=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)h.push(t);return h}.apply(this).map(function(t){return m(s+t/(e-1)*o)});else{if(t=[],f=[],r&&r.length>2)for(u=p=1,l=r.length;1<=l?p<l:p>l;u=1<=l?++p:--p)f.push(.5*(r[u-1]+r[u]));else f=a;c=f.map(function(t){return m(t)})}return x[n]&&(c=c.map(function(t){return t[n]()})),c},m.cache=function(t){return null!=t?(g=t,m):g},m.gamma=function(t){return null!=t?(s=t,m):s},m},null==x.scales&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(t,e,r){var n,i,o,a,s,u;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},u=function(t,i){if(r(t,i))return null!=e&&"function"===St(e)?n(e(t)):null!=e&&"string"===St(e)||"number"===St(e)?n(t[e]):n(t)},"array"===St(t))for(a=0,o=t.length;a<o;a++)u(t[a]);else for(i in t)u(t[i],i);return s.domain=[s.min,s.max],s.limits=function(t,e){return x.limits(s,t,e)},s},x.limits=function(t,e,r){var n,i,o,a,s,u,l,c,h,f,p,d,g,m,v,_,b,w,E,S,O,T,M,I,P,L,k,R,A,N,F,j,D,G,B,z,U,q,V,Y,W,X,Z,H,$,J,tt,et,rt,it,ot,at,st,ut,lt;if(null==e&&(e="equal"),null==r&&(r=7),"array"===St(t)&&(t=x.analyze(t)),P=t.min,Q=t.max,t.sum,ut=t.values.sort(function(t,e){return t-e}),1===r)return[P,Q];if(M=[],"c"===e.substr(0,1)&&(M.push(P),M.push(Q)),"e"===e.substr(0,1)){for(M.push(P),S=F=1,B=r-1;1<=B?F<=B:F>=B;S=1<=B?++F:--F)M.push(P+S/r*(Q-P));M.push(Q)}else if("l"===e.substr(0,1)){if(P<=0)throw"Logarithmic scales are only possible for values > 0";for(L=Math.LOG10E*K(P),I=Math.LOG10E*K(Q),M.push(P),S=lt=1,z=r-1;1<=z?lt<=z:lt>=z;S=1<=z?++lt:--lt)M.push(nt(10,L+S/r*(I-L)));M.push(Q)}else if("q"===e.substr(0,1)){for(M.push(P),S=n=1,X=r-1;1<=X?n<=X:n>=X;S=1<=X?++n:--n)j=(ut.length-1)*S/r,(D=C(j))===j?M.push(ut[D]):(G=j-D,M.push(ut[D]*(1-G)+ut[D+1]*G));M.push(Q)}else if("k"===e.substr(0,1)){for(R=ut.length,m=new Array(R),w=new Array(r),it=!0,A=0,_=null,(_=[]).push(P),S=i=1,Z=r-1;1<=Z?i<=Z:i>=Z;S=1<=Z?++i:--i)_.push(P+S/r*(Q-P));for(_.push(Q);it;){for(O=o=0,H=r-1;0<=H?o<=H:o>=H;O=0<=H?++o:--o)w[O]=0;for(S=a=0,$=R-1;0<=$?a<=$:a>=$;S=0<=$?++a:--a){for(st=ut[S],k=Number.MAX_VALUE,O=s=0,J=r-1;0<=J?s<=J:s>=J;O=0<=J?++s:--s)(E=y(_[O]-st))<k&&(k=E,v=O);w[v]++,m[S]=v}for(N=new Array(r),O=u=0,tt=r-1;0<=tt?u<=tt:u>=tt;O=0<=tt?++u:--u)N[O]=null;for(S=l=0,et=R-1;0<=et?l<=et:l>=et;S=0<=et?++l:--l)null===N[b=m[S]]?N[b]=ut[S]:N[b]+=ut[S];for(O=c=0,rt=r-1;0<=rt?c<=rt:c>=rt;O=0<=rt?++c:--c)N[O]*=1/w[O];for(it=!1,O=h=0,U=r-1;0<=U?h<=U:h>=U;O=0<=U?++h:--h)if(N[O]!==_[S]){it=!0;break}_=N,++A>200&&(it=!1)}for(T={},O=f=0,q=r-1;0<=q?f<=q:f>=q;O=0<=q?++f:--f)T[O]=[];for(S=p=0,V=R-1;0<=V?p<=V:p>=V;S=0<=V?++p:--p)T[b=m[S]].push(ut[S]);for(ot=[],O=d=0,Y=r-1;0<=Y?d<=Y:d>=Y;O=0<=Y?++d:--d)ot.push(T[O][0]),ot.push(T[O][T[O].length-1]);for(ot=ot.sort(function(t,e){return t-e}),M.push(ot[0]),S=g=1,W=ot.length-1;g<=W;S=g+=2)at=ot[S],isNaN(at)||-1!==M.indexOf(at)||M.push(at)}return M},R=function(t,e,r){var n,i,o,a;return t=(n=Ot(arguments))[0],e=n[1],r=n[2],isNaN(t)&&(t=0),(t/=360)<1/3?o=1-((i=(1-e)/3)+(a=(1+e*O(l*t)/O(s-l*t))/3)):t<2/3?i=1-((a=(1-e)/3)+(o=(1+e*O(l*(t-=1/3))/O(s-l*t))/3)):a=1-((o=(1-e)/3)+(i=(1+e*O(l*(t-=2/3))/O(s-l*t))/3)),[255*(a=H(r*a*3)),255*(o=H(r*o*3)),255*(i=H(r*i*3)),n.length>3?n[3]:1]},ut=function(){var t,e,r,n,i,o,a;return i=(o=Ot(arguments))[0],e=o[1],t=o[2],l=2*Math.PI,i/=255,e/=255,t/=255,0===(a=1-Math.min(i,e,t)/(n=(i+e+t)/3))?r=0:(r=(i-e+(i-t))/2,r/=Math.sqrt((i-e)*(i-e)+(i-t)*(e-t)),r=Math.acos(r),t>e&&(r=l-r),r/=l),[360*r,a,n]},x.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hsi"]),function(){})},p.hsi=R,n.prototype.hsi=function(){return ut(this._rgb)},D=function(t,e,r,n){var i,o,a,s,u,l,c,h,f,p;return"hsl"===n?(f=t.hsl(),p=e.hsl()):"hsv"===n?(f=t.hsv(),p=e.hsv()):"hcg"===n?(f=t.hcg(),p=e.hcg()):"hsi"===n?(f=t.hsi(),p=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",f=t.hcl(),p=e.hcl()),"h"===n.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=p[0],h=p[1],u=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===n||(l=h)):(i=o,1!==u&&0!==u||"hsv"===n||(l=c)):i=o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==l&&(l=c+r*(h-c)),x[n](i,l,s+r*(u-s))},z=function(t,e,r,n){var i,o;return i=t.num(),o=e.num(),x.num(i+(o-i)*r,"num")},(d=d.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)J=r[e],n.push([J,D]);return n}())).push(["num",z]),G=function(t,e,r,i){var o,a;return o=t.lab(),a=e.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["lab",G])}).call(this)}).call(this,r(31)(t))},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(6),i=r(0);function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function s(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}else for(n=0;n<t.length;n++)r[n]=0|t[n];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=o(i)),r+=s(i.toString(16))}return r},e.zero2=a,e.zero8=s,e.join32=function(t,e,r,i){var o=r-e;n(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var l;l="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=l>>>0}return a},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,a,s){var u=0,l=e;return u+=(l=l+n>>>0)<e?1:0,u+=(l=l+o>>>0)<o?1:0,t+r+i+a+(u+=(l=l+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,a,s){return e+n+o+s>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,a,s,u,l){var c=0,h=e;return c+=(h=h+n>>>0)<e?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+s>>>0)<s?1:0,t+r+i+a+u+(c+=(h=h+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,a,s,u,l){return e+n+o+s+l>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",function(){return Z}),r.d(e,"b",function(){return wr}),r.d(e,"c",function(){return Jr}),r.d(e,"d",function(){return fr}),r.d(e,"e",function(){return Qr}),r.d(e,"f",function(){return i});var i={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `["get", "building_type"]`). Each label must be either:\n - a single literal value; or\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `["c", "b"]`). The input matches if any of the values in the array matches, similar to the `"in"` operator.\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}};var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s=a(function(t,e){!function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,a="object"==typeof o&&o;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,u,l=2147483647,c=36,h=1,f=26,p=38,d=700,y=72,g=128,m="-",v=/^xn--/,_=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=c-h,E=Math.floor,S=String.fromCharCode;function O(t){throw RangeError(w[t])}function T(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function M(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+T((t=t.replace(b,".")).split("."),e).join(".")}function I(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function P(t){return T(t,function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=S(t)}).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function L(t,e,r){var n=0;for(t=r?E(t/d):t>>1,t+=E(t/e);t>x*f>>1;n+=c)t=E(t/x);return E(n+(x+1)*t/(t+p))}function k(t){var e,r,n,i,o,a,s,u,p,d,v,_=[],b=t.length,w=0,x=g,S=y;for((r=t.lastIndexOf(m))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&O("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=w,a=1,s=c;i>=b&&O("invalid-input"),((u=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||u>E((l-w)/a))&&O("overflow"),w+=u*a,!(u<(p=s<=S?h:s>=S+f?f:s-S));s+=c)a>E(l/(d=c-p))&&O("overflow"),a*=d;S=L(w-o,e=_.length+1,0==o),E(w/e)>l-x&&O("overflow"),x+=E(w/e),w%=e,_.splice(w++,0,x)}return P(_)}function R(t){var e,r,n,i,o,a,s,u,p,d,v,_,b,w,x,T=[];for(_=(t=I(t)).length,e=g,r=0,o=y,a=0;a<_;++a)(v=t[a])<128&&T.push(S(v));for(n=i=T.length,i&&T.push(m);n<_;){for(s=l,a=0;a<_;++a)(v=t[a])>=e&&v<s&&(s=v);for(s-e>E((l-r)/(b=n+1))&&O("overflow"),r+=(s-e)*b,e=s,a=0;a<_;++a)if((v=t[a])<e&&++r>l&&O("overflow"),v==e){for(u=r,p=c;!(u<(d=p<=o?h:p>=o+f?f:p-o));p+=c)x=u-d,w=c-d,T.push(S(C(d+x%w,0))),u=E(x/w);T.push(S(C(u,0))),o=L(r,b,n==i),r=0,++n}++r,++e}return T.join("")}if(s={version:"1.3.2",ucs2:{decode:I,encode:P},decode:k,encode:R,toASCII:function(t){return M(t,function(t){return _.test(t)?"xn--"+R(t):t})},toUnicode:function(t){return M(t,function(t){return v.test(t)?k(t.slice(4).toLowerCase()):t})}},n&&i)if(t.exports==n)i.exports=s;else for(u in s)s.hasOwnProperty(u)&&(n[u]=s[u]);else r.punycode=s}(o)}),u={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var c=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c,h,f,p,d=t[u].replace(o,"%20"),y=d.indexOf(r);y>=0?(c=d.substr(0,y),h=d.substr(y+1)):(c=d,h=""),f=decodeURIComponent(c),p=decodeURIComponent(h),l(i,f)?Array.isArray(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i},h=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},f=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(n){var i=encodeURIComponent(h(n))+r;return Array.isArray(t[n])?t[n].map(function(t){return i+encodeURIComponent(h(t))}).join(e):i+encodeURIComponent(h(t[n]))}).join(e):n?encodeURIComponent(h(n))+r+encodeURIComponent(h(t)):""},p=a(function(t,e){e.decode=e.parse=c,e.encode=e.stringify=f});p.decode,p.parse,p.encode,p.stringify;function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var y=/^([a-z0-9.+-]+:)/i,g=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_=["'"].concat(v),b=["%","/","?",";","#"].concat(_),w=["/","?","#"],x=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function M(t,e,r){if(t&&u.isObject(t)&&t instanceof d)return t;var n=new d;return n.parse(t,e,r),n}d.prototype.parse=function(t,e,r){if(!u.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!r&&1===t.split("#").length){var l=m.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],this.query=e?p.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=y.exec(a);if(c){var h=(c=c[0]).toLowerCase();this.protocol=h,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||c&&O[c]||(a=a.substr(2),this.slashes=!0)}if(!O[c]&&(f||c&&!T[c])){for(var d,g,v=-1,M=0;M<w.length;M++){-1!==(I=a.indexOf(w[M]))&&(-1===v||I<v)&&(v=I)}-1!==(g=-1===v?a.lastIndexOf("@"):a.lastIndexOf("@",v))&&(d=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(d)),v=-1;for(M=0;M<b.length;M++){var I;-1!==(I=a.indexOf(b[M]))&&(-1===v||I<v)&&(v=I)}-1===v&&(v=a.length),this.host=a.slice(0,v),a=a.slice(v),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),L=(M=0,C.length);M<L;M++){var k=C[M];if(k&&!k.match(x)){for(var R="",A=0,N=k.length;A<N;A++)k.charCodeAt(A)>127?R+="x":R+=k[A];if(!R.match(x)){var F=C.slice(0,M),j=C.slice(M+1),D=k.match(E);D&&(F.push(D[1]),j.unshift(D[2])),j.length&&(a="/"+j.join(".")+a),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=s.toASCII(this.hostname));var G=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+G,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!S[h])for(M=0,L=_.length;M<L;M++){var z=_[M];if(-1!==a.indexOf(z)){var U=encodeURIComponent(z);U===z&&(U=escape(z)),a=a.split(z).join(U)}}var q=a.indexOf("#");-1!==q&&(this.hash=a.substr(q),a=a.slice(0,q));var V=a.indexOf("?");if(-1!==V?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=p.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),T[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var Y=this.search||"";this.path=G+Y}return this.href=this.format(),this},d.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=p.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},d.prototype.resolve=function(t){return this.resolveObject(M(t,!1,!0)).format()},d.prototype.resolveObject=function(t){if(u.isString(t)){var e=new d;e.parse(t,!1,!0),t=e}for(var r=new d,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(r[l]=t[l])}return T[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!T[t.protocol]){for(var c=Object.keys(t),h=0;h<c.length;h++){var f=c[h];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||O[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",g=r.search||"";r.path=y+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=v||m||r.host&&t.pathname,b=_,w=r.pathname&&r.pathname.split("/")||[],x=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!T[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(""===p[0]||""===w[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=t.search,r.query=t.query;else if(!u.isNullOrUndefined(t.search)){if(x)r.hostname=r.host=w.shift(),(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift());return r.search=t.search,r.query=t.query,u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=w.slice(-1)[0],S=(r.host||t.host||w.length>1)&&("."===E||".."===E)||""===E,M=0,I=w.length;I>=0;I--)"."===(E=w[I])?w.splice(I,1):".."===E?(w.splice(I,1),M++):M&&(w.splice(I,1),M--);if(!_&&!b)for(;M--;M)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var P,C=""===w[0]||w[0]&&"/"===w[0].charAt(0);x&&(r.hostname=r.host=C?"":w.length?w.shift():"",(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift()));return(_=_||r.host&&w.length)&&!C&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},d.prototype.parseHost=function(){var t=this.host,e=g.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};function I(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}class P extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class C{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r}concat(t){return new C(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const L={kind:"null"},k={kind:"number"},R={kind:"string"},A={kind:"boolean"},N={kind:"color"},F={kind:"object"},j={kind:"value"},D={kind:"collator"},G={kind:"formatted"},B={kind:"resolvedImage"};function z(t,e){return{kind:"array",itemType:t,N:e}}function U(t){if("array"===t.kind){const e=U(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const q=[L,k,R,A,N,G,F,z(j),B];function V(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!V(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of q)if(!V(t,e))return null}return`Expected ${U(t)} but found ${U(e)} instead.`}function Y(t,e){return e.some(e=>e.kind===t.kind)}function W(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}var X=a(function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),h=i.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),y=a(h[2]),g=y<=.5?y*(d+1):y+d-y*d,m=2*y-g;return[n(255*s(m,g,p+1/3)),n(255*s(m,g,p)),n(255*s(m,g,p-1/3)),f];default:return null}}return null}}catch(t){}}).parseCSSColor;class Z{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n}static parse(t){if(!t)return;if(t instanceof Z)return t;if("string"!=typeof t)return;const e=X(t);return e?new Z(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}}Z.black=new Z(0,0,0,1),Z.white=new Z(1,1,1,1),Z.transparent=new Z(0,0,0,0),Z.red=new Z(1,0,0,1),Z.blue=new Z(0,0,1,1);class H{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class K{constructor(t,e,r,n,i){this.text=t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i}}class ${constructor(t){this.sections=t}static fromString(t){return new $([new K(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof $?t:$.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r)}return t}}class J{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new J({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Q(t,e,r,n){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255)){return`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`}function tt(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Z)return!0;if(t instanceof H)return!0;if(t instanceof $)return!0;if(t instanceof J)return!0;if(Array.isArray(t)){for(const e of t)if(!tt(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!tt(t[e]))return!1;return!0}return!1}function et(t){if(null===t)return L;if("string"==typeof t)return R;if("boolean"==typeof t)return A;if("number"==typeof t)return k;if(t instanceof Z)return N;if(t instanceof H)return D;if(t instanceof $)return G;if(t instanceof J)return B;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=et(e);if(r){if(r===t)continue;r=j;break}r=t}return z(r||j,e)}return F}function rt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Z||t instanceof $||t instanceof J?t.toString():JSON.stringify(t)}class nt{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!tt(t[1]))return e.error("invalid value");const r=t[1];let n=et(r);const i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new nt(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Z?["rgba"].concat(this.value.toArray()):this.value instanceof $?this.value.serialize():this.value}}class it{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const ot={string:R,number:k,boolean:A,object:F};class at{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in ot)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=ot[r],n++}else i=j;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=z(i,o)}else r=ot[i];const o=[];for(;n<t.length;n++){const r=e.parse(t[n],n,j);if(!r)return null;o.push(r)}return new at(r,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!V(this.type,et(r)))return r;if(e===this.args.length-1)throw new it(`Expected value to be of type ${U(this.type)}, but found ${U(et(r))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(t=>t.serialize()))}}class st{constructor(t){this.type=G,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const o=t[r];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&!(t=e.parse(o["font-scale"],1,k)))return null;let r=null;if(o["text-font"]&&!(r=e.parse(o["text-font"],1,z(R))))return null;let a=null;if(o["text-color"]&&!(a=e.parse(o["text-color"],1,N)))return null;const s=n[n.length-1];s.scale=t,s.font=r,s.textColor=a}else{const o=e.parse(t[r],1,j);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new st(n)}evaluate(t){return new $(this.sections.map(e=>{const r=e.content.evaluate(t);return et(r)===B?new K("",r,null,null,null):new K(rt(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r)}return t}}class ut{constructor(t){this.type=B,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,R);return r?new ut(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=J.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const lt={"to-boolean":A,"to-color":N,"to-number":k,"to-string":R};class ct{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const n=lt[r],i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],r,j);if(!n)return null;i.push(n)}return new ct(n,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof Z)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Q(e[0],e[1],e[2],e[3])))return new Z(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new it(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(null===(e=r.evaluate(t)))return 0;const n=Number(e);if(!isNaN(n))return n}throw new it(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?$.fromString(rt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?J.fromString(rt(this.args[0].evaluate(t))):rt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new st([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ut(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}const ht=["Unknown","Point","LineString","Polygon"];class ft{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ht[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Z.parse(t)),e}}class pt{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const r=t[0],n=pt.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=o.filter(([e])=>!Array.isArray(e)||e.length===t.length-1);let s=null;for(const[n,o]of a){s=new jt(e.registry,e.path,null,e.scope);const a=[];let u=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,o=s.parse(r,1+a.length,i);if(!o){u=!0;break}a.push(o)}if(!u)if(Array.isArray(n)&&n.length!==a.length)s.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];s.concat(t+1).checkSubtype(e,r.type)}if(0===s.errors.length)return new pt(r,i,o,a)}}if(1===a.length)e.errors.push(...s.errors);else{const r=(a.length?a:o).map(([t])=>(function(t){return Array.isArray(t)?`(${t.map(U).join(", ")})`:`(${U(t.type)}...)`})(t)).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(U(i.type))}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){pt.definitions=e;for(const r in e)t[r]=pt}}class dt{constructor(t,e,r){this.type=D,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,A);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,A);if(!i)return null;let o=null;return r.locale&&!(o=e.parse(r.locale,1,R))?null:new dt(n,i,o)}evaluate(t){return new H(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const yt=8192;function gt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function mt(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function vt(t,e){const r=(180+t[0])/360;const n=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360);var i;const o=Math.pow(2,e.z);return[Math.round(r*o*yt),Math.round(n*o*yt)]}function _t(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],a=t[1]-r[1];return n*a-o*i==0&&n*o<=0&&i*a<=0}function bt(t,e){let r=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(_t(t,s[e],s[e+1]))return!1;n=t,i=s[e],o=s[e+1],i[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]&&(r=!r)}}var n,i,o;return r}function wt(t,e){for(let r=0;r<e.length;r++)if(bt(t,e[r]))return!0;return!1}function xt(t,e,r,n){const i=t[0]-r[0],o=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],c=i*l-u*o,h=a*l-u*s;return c>0&&h<0||c<0&&h>0}function Et(t,e,r,n){const i=[e[0]-t[0],e[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]];return 0!=(a=o)[0]*(s=i)[1]-a[1]*s[0]&&!(!xt(t,e,r,n)||!xt(r,n,t,e));var a,s}function St(t,e,r){for(const n of r)for(let r=0;r<n.length-1;++r)if(Et(t,e,n[r],n[r+1]))return!0;return!1}function Ot(t,e){for(let r=0;r<t.length;++r)if(!bt(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(St(t[r],t[r+1],e))return!1;return!0}function Tt(t,e){for(let r=0;r<e.length;r++)if(Ot(t,e[r]))return!0;return!1}function Mt(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=[];for(let n=0;n<t[i].length;n++){const a=vt(t[i][n],r);gt(e,a),o.push(a)}n.push(o)}return n}function It(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=Mt(t[i],e,r);n.push(o)}return n}function Pt(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i}gt(e,t)}function Ct(t,e,r,n){const i=Math.pow(2,n.z)*yt,o=[n.x*yt,n.y*yt],a=[];for(const n of t)for(const t of n){const n=[t.x+o[0],t.y+o[1]];Pt(n,e,r,i),a.push(n)}return a}function Lt(t,e,r,n){const i=Math.pow(2,n.z)*yt,o=[n.x*yt,n.y*yt],a=[];for(const r of t){const t=[];for(const n of r){const r=[n.x+o[0],n.y+o[1]];gt(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const n of t)Pt(n,e,r,i)}var s;return a}class kt{constructor(t,e){this.type=A,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(tt(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new kt(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new kt(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new kt(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=Mt(e.coordinates,n,i),a=Ct(t.geometry(),r,n,i);if(!mt(r,n))return!1;for(const t of a)if(!bt(t,o))return!1}if("MultiPolygon"===e.type){const o=It(e.coordinates,n,i),a=Ct(t.geometry(),r,n,i);if(!mt(r,n))return!1;for(const t of a)if(!wt(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=Mt(e.coordinates,n,i),a=Lt(t.geometry(),r,n,i);if(!mt(r,n))return!1;for(const t of a)if(!Ot(t,o))return!1}if("MultiPolygon"===e.type){const o=It(e.coordinates,n,i),a=Lt(t.geometry(),r,n,i);if(!mt(r,n))return!1;for(const t of a)if(!Tt(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Rt(t){if(t instanceof pt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof kt)return!1;let e=!0;return t.eachChild(t=>{e&&!Rt(t)&&(e=!1)}),e}function At(t){if(t instanceof pt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(t=>{e&&!At(t)&&(e=!1)}),e}function Nt(t,e){if(t instanceof pt&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(t=>{r&&!Nt(t,e)&&(r=!1)}),r}class Ft{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new Ft(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class jt{constructor(t,e=[],r,n=new C,i=[]){this.registry=t,this.path=e,this.key=e.map(t=>`[${t}]`).join(""),this.scope=n,this.errors=i,this.expectedType=r}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return"assert"===r?new at(e,[t]):"coerce"===r?new ct(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||"coerce");else n=r(n,t,e.typeAnnotation||"assert")}if(!(n instanceof nt)&&"resolvedImage"!==n.type.kind&&function t(e){if(e instanceof Ft)return t(e.boundExpression);if(e instanceof pt&&"error"===e.name)return!1;if(e instanceof dt)return!1;if(e instanceof kt)return!1;const r=e instanceof ct||e instanceof at;let n=!0;e.eachChild(e=>{n=r?n&&t(e):n&&e instanceof nt});if(!n)return!1;return Rt(e)&&Nt(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(n)){const t=new ft;try{n=new nt(n.type,n.evaluate(t))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new jt(this.registry,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map(t=>`[${t}]`).join("")}`;this.errors.push(new P(r,t))}checkSubtype(t,e){const r=V(t,e);return r&&this.error(r),r}}function Dt(t,e){const r=t.length-1;let n,i,o=0,a=r,s=0;for(;o<=a;)if(n=t[s=Math.floor((o+a)/2)],i=t[s+1],n<=e){if(s===r||e<i)return s;o=s+1}else{if(!(n>e))throw new it("Input is not a number.");a=s-1}return 0}class Gt{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,k);if(!r)return null;const n=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let r=1;r<t.length;r+=2){const o=1===r?-1/0:t[r],a=t[r+1],s=r,u=r+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const l=e.parse(a,u,i);if(!l)return null;i=i||l.type,n.push([o,l])}return new Gt(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[Dt(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Bt=zt;function zt(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}function Ut(t,e,r){return t*(1-r)+e*r}zt.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},zt.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},zt.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},zt.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},zt.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var qt=Object.freeze({__proto__:null,number:Ut,color:function(t,e,r){return new Z(Ut(t.r,e.r,r),Ut(t.g,e.g,r),Ut(t.b,e.b,r),Ut(t.a,e.a,r))},array:function(t,e,r){return t.map((t,n)=>Ut(t,e[n],r))}});const Vt=.95047,Yt=1,Wt=1.08883,Xt=4/29,Zt=6/29,Ht=3*Zt*Zt,Kt=Zt*Zt*Zt,$t=Math.PI/180,Jt=180/Math.PI;function Qt(t){return t>Kt?Math.pow(t,1/3):t/Ht+Xt}function te(t){return t>Zt?t*t*t:Ht*(t-Xt)}function ee(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function re(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ne(t){const e=re(t.r),r=re(t.g),n=re(t.b),i=Qt((.4124564*e+.3575761*r+.1804375*n)/Vt),o=Qt((.2126729*e+.7151522*r+.072175*n)/Yt);return{l:116*o-16,a:500*(i-o),b:200*(o-Qt((.0193339*e+.119192*r+.9503041*n)/Wt)),alpha:t.a}}function ie(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=Yt*te(e),r=Vt*te(r),n=Wt*te(n),new Z(ee(3.2404542*r-1.5371385*e-.4985314*n),ee(-.969266*r+1.8760108*e+.041556*n),ee(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function oe(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const ae={forward:ne,reverse:ie,interpolate:function(t,e,r){return{l:Ut(t.l,e.l,r),a:Ut(t.a,e.a,r),b:Ut(t.b,e.b,r),alpha:Ut(t.alpha,e.alpha,r)}}},se={forward:function(t){const{l:e,a:r,b:n}=ne(t),i=Math.atan2(n,r)*Jt;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*$t,r=t.c;return ie({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:oe(t.h,e.h,r),c:Ut(t.c,e.c,r),l:Ut(t.l,e.l,r),alpha:Ut(t.alpha,e.alpha,r)}}};var ue=Object.freeze({__proto__:null,lab:ae,hcl:se});class le{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,r,n){let i=0;if("exponential"===t.name)i=ce(e,t.base,r,n);else if("linear"===t.name)i=ce(e,1,r,n);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new Bt(o[0],o[1],o[2],o[3]).solve(ce(e,1,r,n))}return i}static parse(t,e){let[r,n,i,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some(t=>"number"!=typeof t||t<0||t>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,k)))return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=N:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const r=o[t],n=o[t+1],i=t+3,u=t+4;if("number"!=typeof r)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const l=e.parse(n,u,s);if(!l)return null;s=s||l.type,a.push([r,l])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new le(s,r,n,i,a):e.error(`Type ${U(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const o=Dt(e,n),a=e[o],s=e[o+1],u=le.interpolationFactor(this.interpolation,n,a,s),l=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?qt[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?se.reverse(se.interpolate(se.forward(l),se.forward(c),u)):ae.reverse(ae.interpolate(ae.forward(l),ae.forward(c),u))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function ce(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class he{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let r=null;const n=e.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of t.slice(1)){const t=e.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!t)return null;r=r||t.type,i.push(t)}const o=n&&i.some(t=>V(n,t.type));return new he(o?j:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args)if(n++,(r=i.evaluate(t))&&r instanceof J&&!r.available&&(e||(e=r.name),r=null,n===this.args.length&&(r=e)),null!==r)break;return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class fe{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let n=1;n<t.length-1;n+=2){const i=t[n];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;r.push([i,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new fe(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}class pe{constructor(t,e,r){this.type=t,this.index=e,this.input=r}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,k),n=e.parse(t[2],2,z(e.expectedType||j));if(!r||!n)return null;const i=n.type;return new pe(i.itemType,r,n)}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new it(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new it(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new it(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class de{constructor(t,e){this.type=A,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,j),n=e.parse(t[2],2,j);return r&&n?Y(r.type,[A,R,k,L,j])?new de(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!W(e,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${U(et(e))} instead.`);if(!W(r,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${U(et(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class ye{constructor(t,e,r){this.type=k,this.needle=t,this.haystack=e,this.fromIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,j),n=e.parse(t[2],2,j);if(!r||!n)return null;if(!Y(r.type,[A,R,k,L,j]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,k);return i?new ye(r,n,i):null}return new ye(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!W(e,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${U(et(e))} instead.`);if(!W(r,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${U(et(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ge{constructor(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const u=t[a+1];Array.isArray(s)||(s=[s]);const l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return l.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return l.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,et(t)))return null}else r=et(t);if(void 0!==i[String(t)])return l.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(u,a,n);if(!c)return null;n=n||c.type,o.push(c)}const a=e.parse(t[1],1,j);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new ge(r,n,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(et(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=r.length,r.push([this.cases[t],[t]])):r[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of r)1===n.length?t.push(i(n[0])):t.push(n.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class me{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,A);if(!o)return null;const a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}const i=e.parse(t[t.length-1],t.length-1,r);return i?new me(r,n,i):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class ve{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,j),n=e.parse(t[2],2,k);if(!r||!n)return null;if(!Y(r.type,[z(j),R,j]))return e.error(`Expected first argument to be of type array or string, but found ${U(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,k);return i?new ve(r.type,r,n,i):null}return new ve(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!W(e,["string","array"]))throw new it(`Expected first argument to be of type array or string, but found ${U(et(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function _e(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function be(t,e,r,n){return 0===n.compare(e,r)}function we(t,e,r){const n="=="!==t&&"!="!==t;return class i{constructor(t,e,r){this.type=A,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const r=t[0];let o=e.parse(t[1],1,j);if(!o)return null;if(!_e(r,o.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${U(o.type)}'.`);let a=e.parse(t[2],2,j);if(!a)return null;if(!_e(r,a.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${U(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${U(o.type)}' and '${U(a.type)}'.`);n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new at(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new at(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,D)))return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=et(o),r=et(a);if(e.kind!==r.kind||"string"!==e.kind&&"number"!==e.kind)throw new it(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=et(o),r=et(a);if("string"!==t.kind||"string"!==r.kind)return e(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild(t=>{e.push(t.serialize())}),e}}}const xe=we("==",function(t,e,r){return e===r},be),Ee=we("!=",function(t,e,r){return e!==r},function(t,e,r,n){return!be(0,e,r,n)}),Se=we("<",function(t,e,r){return e<r},function(t,e,r,n){return n.compare(e,r)<0}),Oe=we(">",function(t,e,r){return e>r},function(t,e,r,n){return n.compare(e,r)>0}),Te=we("<=",function(t,e,r){return e<=r},function(t,e,r,n){return n.compare(e,r)<=0});class Me{constructor(t,e,r,n,i){this.type=R,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,k);if(!r)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&!(i=e.parse(n.locale,1,R)))return null;let o=null;if(n.currency&&!(o=e.parse(n.currency,1,R)))return null;let a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,k)))return null;let s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,k))?null:new Me(r,i,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ie{constructor(t){this.type=k,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${U(r.type)} instead.`):new Ie(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new it(`Expected value to be of type string or array, but found ${U(et(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Pe={"==":xe,"!=":Ee,">":Oe,"<":Se,">=":we(">=",function(t,e,r){return e>=r},function(t,e,r,n){return n.compare(e,r)>=0}),"<=":Te,array:at,at:pe,boolean:at,case:me,coalesce:he,collator:dt,format:st,image:ut,in:de,"index-of":ye,interpolate:le,"interpolate-hcl":le,"interpolate-lab":le,length:Ie,let:fe,literal:nt,match:ge,number:at,"number-format":Me,object:at,slice:ve,step:Gt,string:at,"to-boolean":ct,"to-color":ct,"to-number":ct,"to-string":ct,var:Ft,within:kt};function Ce(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const o=i?i.evaluate(t):1,a=Q(e,r,n,o);if(a)throw new it(a);return new Z(e/255*o,r/255*o,n/255*o,o)}function Le(t,e){return t in e}function ke(t,e){const r=e[t];return void 0===r?null:r}function Re(t){return{type:t}}function Ae(t){return{result:"success",value:t}}function Ne(t){return{result:"error",value:t}}function Fe(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function je(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function De(t){return!!t.expression&&t.expression.interpolated}function Ge(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Be(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function ze(t){return t}function Ue(t,e){const r="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],i=n||void 0!==t.property,o=n||!i,a=t.type||(De(e)?"exponential":"interval");if(r&&((t=I({},t)).stops&&(t.stops=t.stops.map(t=>[t[0],Z.parse(t[1])])),t.default?t.default=Z.parse(t.default):t.default=Z.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!ue[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,u,l;if("exponential"===a)s=We;else if("interval"===a)s=Ye;else if("categorical"===a){s=Ve,u=Object.create(null);for(const e of t.stops)u[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=Xe}if(n){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},n.push(o)),r[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of n)i.push([r[t].zoom,Ue(r[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:le.interpolationFactor.bind(void 0,o),zoomStops:i.map(t=>t[0]),evaluate:({zoom:r},n)=>We({stops:i,base:t.base},e,r).evaluate(r,n)}}if(o){const r="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:le.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map(t=>t[0]),evaluate:({zoom:r})=>s(t,e,r,u,l)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?qe(t.default,e.default):s(t,e,i,u,l)}}}function qe(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Ve(t,e,r,n,i){return qe(typeof r===i?n[r]:void 0,t.default,e.default)}function Ye(t,e,r){if("number"!==Ge(r))return qe(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=Dt(t.stops.map(t=>t[0]),r);return t.stops[i][1]}function We(t,e,r){const n=void 0!==t.base?t.base:1;if("number"!==Ge(r))return qe(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const o=Dt(t.stops.map(t=>t[0]),r),a=function(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1];let l=qt[e.type]||ze;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=ue[t.colorSpace];l=((t,r)=>e.reverse(e.interpolate(e.forward(t),e.forward(r),a)))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==r)return l(e,r,a)}}:l(s,u,a)}function Xe(t,e,r){return"color"===e.type?r=Z.parse(r):"formatted"===e.type?r=$.fromString(r.toString()):"resolvedImage"===e.type?r=J.fromString(r.toString()):Ge(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),qe(r,t.default,e.default)}pt.register(Pe,{error:[{kind:"error"},[R],(t,[e])=>{throw new it(e.evaluate(t))}],typeof:[R,[j],(t,[e])=>U(et(e.evaluate(t)))],"to-rgba":[z(k,4),[N],(t,[e])=>e.evaluate(t).toArray()],rgb:[N,[k,k,k],Ce],rgba:[N,[k,k,k,k],Ce],has:{type:A,overloads:[[[R],(t,[e])=>Le(e.evaluate(t),t.properties())],[[R,F],(t,[e,r])=>Le(e.evaluate(t),r.evaluate(t))]]},get:{type:j,overloads:[[[R],(t,[e])=>ke(e.evaluate(t),t.properties())],[[R,F],(t,[e,r])=>ke(e.evaluate(t),r.evaluate(t))]]},"feature-state":[j,[R],(t,[e])=>ke(e.evaluate(t),t.featureState||{})],properties:[F,[],t=>t.properties()],"geometry-type":[R,[],t=>t.geometryType()],id:[j,[],t=>t.id()],zoom:[k,[],t=>t.globals.zoom],"heatmap-density":[k,[],t=>t.globals.heatmapDensity||0],"line-progress":[k,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[k,[],t=>t.globals.skyRadialProgress||0],accumulated:[j,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[k,Re(k),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[k,Re(k),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:k,overloads:[[[k,k],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[k],(t,[e])=>-e.evaluate(t)]]},"/":[k,[k,k],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[k,[k,k],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[k,[],()=>Math.LN2],pi:[k,[],()=>Math.PI],e:[k,[],()=>Math.E],"^":[k,[k,k],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[k,[k],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[k,[k],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[k,[k],(t,[e])=>Math.log(e.evaluate(t))],log2:[k,[k],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[k,[k],(t,[e])=>Math.sin(e.evaluate(t))],cos:[k,[k],(t,[e])=>Math.cos(e.evaluate(t))],tan:[k,[k],(t,[e])=>Math.tan(e.evaluate(t))],asin:[k,[k],(t,[e])=>Math.asin(e.evaluate(t))],acos:[k,[k],(t,[e])=>Math.acos(e.evaluate(t))],atan:[k,[k],(t,[e])=>Math.atan(e.evaluate(t))],min:[k,Re(k),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[k,Re(k),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[k,[k],(t,[e])=>Math.abs(e.evaluate(t))],round:[k,[k],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[k,[k],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[k,[k],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[A,[R,j],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[A,[j],(t,[e])=>t.id()===e.value],"filter-type-==":[A,[R],(t,[e])=>t.geometryType()===e.value],"filter-<":[A,[R,j],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[A,[j],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[A,[R,j],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[A,[j],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[A,[R,j],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[A,[j],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[A,[R,j],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[A,[j],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[A,[j],(t,[e])=>e.value in t.properties()],"filter-has-id":[A,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[A,[z(R)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[A,[z(j)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[A,[R,z(j)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[A,[R,z(j)],(t,[e,r])=>(function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1})(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:A,overloads:[[[A,A],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Re(A),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:A,overloads:[[[A,A],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Re(A),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[A,[A],(t,[e])=>!e.evaluate(t)],"is-supported-script":[A,[R],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return!r||r(e.evaluate(t))}],upcase:[R,[R],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[R,[R],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[R,Re(j),(t,e)=>e.map(e=>rt(e.evaluate(t))).join("")],"resolved-locale":[R,[D],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Ze{constructor(t,e){var r;this.expression=t,this._warningHistory={},this._evaluator=new ft,this._defaultValue=e?"color"===(r=e).type&&Be(r.default)?new Z(0,0,0,0):"color"===r.type?Z.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new it(`Expected value to be one of ${Object.keys(this._enumValues).map(t=>JSON.stringify(t)).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function He(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Pe}function Ke(t,e){const r=new jt(Pe,[],e?function(t){const e={color:N,string:R,number:k,enum:R,boolean:A,formatted:G,resolvedImage:B};if("array"===t.type)return z(e[t.value]||j,t.length);return e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Ae(new Ze(n,e)):Ne(r.errors)}class $e{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!At(e.expression)}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}}class Je{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!At(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}interpolationFactor(t,e,r){return this.interpolationType?le.interpolationFactor(this.interpolationType,t,e,r):0}}function Qe(t,e){if("error"===(t=Ke(t,e)).result)return t;const r=t.value.expression,n=Rt(r);if(!n&&!Fe(e))return Ne([new P("","data expressions not supported")]);const i=Nt(r,["zoom"]);if(!i&&!je(e))return Ne([new P("","zoom expressions not supported")]);const o=function t(e){let r=null;if(e instanceof fe)r=t(e.result);else if(e instanceof he){for(const n of e.args)if(r=t(n))break}else(e instanceof Gt||e instanceof le)&&e.input instanceof pt&&"zoom"===e.input.name&&(r=e);if(r instanceof P)return r;e.eachChild(e=>{const n=t(e);n instanceof P?r=n:!r&&n?r=new P("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new P("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});return r}(r);if(!o&&!i)return Ne([new P("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof P)return Ne([o]);if(o instanceof le&&!De(e))return Ne([new P("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Ae(new $e(n?"constant":"source",t.value));const a=o instanceof le?o.interpolation:void 0;return Ae(new Je(n?"camera":"composite",t.value,o.labels,a))}class tr{constructor(t,e){this._parameters=t,this._specification=e,I(this,Ue(this._parameters,this._specification))}static deserialize(t){return new tr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function er(t){return"object"==typeof t?["literal",t]:t}function rr(t,e){let r=t.stops;if(!r)return function(t,e){const r=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",r]:r;if("enum"===e.type)return["match",r,Object.keys(e.values),r,t.default];{const n=["color"===e.type?"to-color":e.type,r,er(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}}(t,e);const n=r&&"object"==typeof r[0][0],i=n||void 0!==t.property,o=n||!i;return r=r.map(t=>!i&&e.tokens&&"string"==typeof t[1]?[t[0],lr(t[1])]:[t[0],er(t[1])]),n?function(t,e,r){const n={},i={},o=[];for(let e=0;e<r.length;e++){const a=r[e],s=a[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default},i[s]=[],o.push(s)),i[s].push([a[0].value,a[1]])}if("exponential"===ur({},e)){const r=[nr(t),["linear"],["zoom"]];for(const t of o){const o=or(n[t],e,i[t]);sr(r,t,o,!1)}return r}{const t=["step",["zoom"]];for(const r of o){const o=or(n[r],e,i[r]);sr(t,r,o,!0)}return ar(t),t}}(t,e,r):o?function(t,e,r,n=["zoom"]){const i=ur(t,e);let o,a=!1;if("interval"===i)o=["step",n],a=!0;else{if("exponential"!==i)throw new Error(`Unknown zoom function type "${i}"`);{const e=void 0!==t.base?t.base:1;o=[nr(t),1===e?["linear"]:["exponential",e],n]}}for(const t of r)sr(o,t[0],t[1],a);return ar(o),o}(t,e,r):or(t,e,r)}function nr(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function ir(t,e){const r=er((n=t.default,i=e.default,void 0!==n?n:void 0!==i?i:void 0));var n,i;return void 0===r&&"resolvedImage"===e.type?"":r}function or(t,e,r){const n=ur(t,e),i=["get",t.property];if("categorical"===n&&"boolean"==typeof r[0][0]){const n=["case"];for(const t of r)n.push(["==",i,t[0]],t[1]);return n.push(ir(t,e)),n}if("categorical"===n){const n=["match",i];for(const t of r)sr(n,t[0],t[1],!1);return n.push(ir(t,e)),n}if("interval"===n){const e=["step",["number",i]];for(const t of r)sr(e,t[0],t[1],!0);return ar(e),void 0===t.default?e:["case",["==",["typeof",i],"number"],e,er(t.default)]}if("exponential"===n){const e=void 0!==t.base?t.base:1,n=[nr(t),1===e?["linear"]:["exponential",e],["number",i]];for(const t of r)sr(n,t[0],t[1],!1);return void 0===t.default?n:["case",["==",["typeof",i],"number"],n,er(t.default)]}throw new Error(`Unknown property function type ${n}`)}function ar(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function sr(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(r))}function ur(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function lr(t){const e=["concat"],r=/{([^{}]+)}/g;let n=0;for(let i=r.exec(t);null!==i;i=r.exec(t)){const o=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}function cr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!cr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const hr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fr(t){if(null==t)return{filter:()=>!0,needGeometry:!1};cr(t)||(t=dr(t));const e=Ke(t,hr);if("error"===e.result)throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));return{filter:(t,r,n)=>e.value.evaluate(t,r,{},n),needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let r=1;r<e.length;r++)if(t(e[r]))return!0;return!1}(t)}}function pr(t,e){return t<e?-1:t>e?1:0}function dr(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?yr(t[1],t[2],"=="):"!="===e?vr(yr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?yr(t[1],t[2],e):"any"===e?(r=t.slice(1),["any"].concat(r.map(dr))):"all"===e?["all"].concat(t.slice(1).map(dr)):"none"===e?["all"].concat(t.slice(1).map(dr).map(vr)):"in"===e?gr(t[1],t.slice(2)):"!in"===e?vr(gr(t[1],t.slice(2))):"has"===e?mr(t[1]):"!has"===e?vr(mr(t[1])):"within"!==e||t;var r}function yr(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function gr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",t,["literal",e.sort(pr)]]:["filter-in-small",t,["literal",e]]}}function mr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function vr(t){return["!",t]}var _r=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function br(t,e){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return _r.forEach(t=>{t in e&&(r[t]=e[t])}),r}function wr(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=br(t[r],e[t[r].ref]));return t}class xr{constructor(t,e,r,n){this.message=(t?`${t}: `:"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}class Er{constructor(t){this.error=t,this.message=t.message;const e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0}}function Sr(t){const e=t.key,r=t.value;return r?[new xr(e,r,"constants have been deprecated as of v8")]:[]}function Or(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Tr(t){if(Array.isArray(t))return t.map(Tr);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=Tr(t[r]);return e}return Or(t)}function Mr(t){const e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const u=Ge(r);if("object"!==u)return[new xr(e,r,`object expected, ${u} found`)];for(const t in r){const u=t.split(".")[0],l=n[u]||n["*"];let c;if(i[u])c=i[u];else if(n[u])c=Vr;else if(i["*"])c=i["*"];else{if(!n["*"]){s.push(new xr(e,r[t],`unknown property "${t}"`));continue}c=Vr}s=s.concat(c({key:(e?`${e}.`:e)+t,value:r[t],valueSpec:l,style:o,styleSpec:a,object:r,objectKey:t},r))}for(const t in n)i[t]||n[t].required&&void 0===n[t].default&&void 0===r[t]&&s.push(new xr(e,r,`missing required property "${t}"`));return s}function Ir(t){const e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Vr;if("array"!==Ge(e))return[new xr(o,e,`array expected, ${Ge(e)} found`)];if(r.length&&e.length!==r.length)return[new xr(o,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new xr(o,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let s={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum};i.$version<7&&(s.function=r.function),"object"===Ge(r.value)&&(s=r.value);let u=[];for(let t=0;t<e.length;t++)u=u.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:n,styleSpec:i,key:`${o}[${t}]`}));return u}function Pr(t){const e=t.key,r=t.value,n=t.valueSpec;let i=Ge(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return[new xr(e,r,`number expected, ${i} found`)];if("minimum"in n){let i=n.minimum;if("array"===Ge(n.minimum)){const e=t.arrayIndex;i=n.minimum[e]}if(r<i)return[new xr(e,r,`${r} is less than the minimum value ${i}`)]}if("maximum"in n){let i=n.maximum;if("array"===Ge(n.maximum)){const e=t.arrayIndex;i=n.maximum[e]}if(r>i)return[new xr(e,r,`${r} is greater than the maximum value ${i}`)]}return[]}function Cr(t){const e=t.valueSpec,r=Or(t.value.type);let n,i,o,a={};const s="categorical"!==r&&void 0===t.value.property,u=!s,l="array"===Ge(t.value.stops)&&"array"===Ge(t.value.stops[0])&&"object"===Ge(t.value.stops[0][0]),c=Mr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===r)return[new xr(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;e=e.concat(Ir({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Ge(n)&&0===n.length&&e.push(new xr(t.key,n,"array must have at least one stop"));return e},default:function(t){return Vr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===r&&s&&c.push(new xr(t.key,t.value,'missing required property "property"')),"identity"===r||t.value.stops||c.push(new xr(t.key,t.value,'missing required property "stops"')),"exponential"===r&&t.valueSpec.expression&&!De(t.valueSpec)&&c.push(new xr(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Fe(t.valueSpec)?c.push(new xr(t.key,t.value,"property functions not supported")):s&&!je(t.valueSpec)&&c.push(new xr(t.key,t.value,"zoom functions not supported"))),"categorical"!==r&&!l||void 0!==t.value.property||c.push(new xr(t.key,t.value,'"property" property is required')),c;function h(t){let r=[];const n=t.value,s=t.key;if("array"!==Ge(n))return[new xr(s,n,`array expected, ${Ge(n)} found`)];if(2!==n.length)return[new xr(s,n,`array length 2 expected, length ${n.length} found`)];if(l){if("object"!==Ge(n[0]))return[new xr(s,n,`object expected, ${Ge(n[0])} found`)];if(void 0===n[0].zoom)return[new xr(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new xr(s,n,"object stop key must have value")];if(o&&o>Or(n[0].zoom))return[new xr(s,n[0].zoom,"stop zoom values must appear in ascending order")];Or(n[0].zoom)!==o&&(o=Or(n[0].zoom),i=void 0,a={}),r=r.concat(Mr({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Pr,value:f}}))}else r=r.concat(f({key:`${s}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return He(Tr(n[1]))?r.concat([new xr(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(Vr({key:`${s}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function f(t,o){const s=Ge(t.value),u=Or(t.value),l=null!==t.value?t.value:o;if(n){if(s!==n)return[new xr(t.key,l,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new xr(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let n=`number expected, ${s} found`;return Fe(e)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xr(t.key,l,n)]}return"categorical"!==r||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==r&&"number"===s&&void 0!==i&&u<i?[new xr(t.key,l,"stop domain values must appear in ascending order")]:(i=u,"categorical"===r&&u in a?[new xr(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new xr(t.key,l,`integer expected, found ${u}`)]}}function Lr(t){const e=("property"===t.expressionContext?Qe:Ke)(Tr(t.value),t.valueSpec);if("error"===e.result)return e.value.map(e=>new xr(`${t.key}${e.key}`,t.value,e.message));const r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return[new xr(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!At(r))return[new xr(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!At(r))return[new xr(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Nt(r,["zoom","feature-state"]))return[new xr(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Rt(r))return[new xr(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kr(t){const e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Or(r))&&i.push(new xr(e,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(Or(r))&&i.push(new xr(e,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function Rr(t){return cr(Tr(t.value))?Lr(I({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){const r=e.value;const n=e.key;if("array"!==Ge(r))return[new xr(n,r,`array expected, ${Ge(r)} found`)];const i=e.styleSpec;let o;let a=[];if(r.length<1)return[new xr(n,r,"filter array must have at least 1 element")];a=a.concat(kr({key:`${n}[0]`,value:r[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec}));switch(Or(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Or(r[1])&&a.push(new xr(n,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":3!==r.length&&a.push(new xr(n,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&"string"!==(o=Ge(r[1]))&&a.push(new xr(`${n}[1]`,r[1],`string expected, ${o} found`));for(let t=2;t<r.length;t++)o=Ge(r[t]),"$type"===Or(r[1])?a=a.concat(kr({key:`${n}[${t}]`,value:r[t],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&a.push(new xr(`${n}[${t}]`,r[t],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let i=1;i<r.length;i++)a=a.concat(t({key:`${n}[${i}]`,value:r[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=Ge(r[1]),2!==r.length?a.push(new xr(n,r,`filter array for "${r[0]}" operator must have 2 elements`)):"string"!==o&&a.push(new xr(`${n}[1]`,r[1],`string expected, ${o} found`));break;case"within":o=Ge(r[1]),2!==r.length?a.push(new xr(n,r,`filter array for "${r[0]}" operator must have 2 elements`)):"object"!==o&&a.push(new xr(`${n}[1]`,r[1],`object expected, ${o} found`))}return a}(t)}function Ar(t,e){const r=t.key,n=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[`${e}_${t.layerType}`];if(!s)return[];const u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Vr({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});const l=t.valueSpec||s[a];if(!l)return[new xr(r,o,`unknown property "${a}"`)];let c;if("string"===Ge(o)&&Fe(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new xr(r,o,`"${a}" does not support interpolation syntax\n`+`Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&h.push(new xr(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Be(Tr(o))&&"identity"===Or(o.type)&&h.push(new xr(r,o,'"text-font" does not support identity functions'))),h.concat(Vr({key:t.key,value:o,valueSpec:l,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Nr(t){return Ar(t,"paint")}function Fr(t){return Ar(t,"layout")}function jr(t){let e=[];const r=t.value,n=t.key,i=t.style,o=t.styleSpec;r.type||r.ref||e.push(new xr(n,r,'either "type" or "ref" is required'));let a=Or(r.type);const s=Or(r.ref);if(r.id){const o=Or(r.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];Or(t.id)===o&&e.push(new xr(n,r.id,`duplicate layer id "${r.id}", previously used at line ${t.id.__line__}`))}}if("ref"in r){let t;["type","source","source-layer","filter","layout"].forEach(t=>{t in r&&e.push(new xr(n,r[t],`"${t}" is prohibited for ref layers`))}),i.layers.forEach(e=>{Or(e.id)===s&&(t=e)}),t?t.ref?e.push(new xr(n,r.ref,"ref cannot reference another ref layer")):a=Or(t.type):e.push(new xr(n,r.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(r.source){const t=i.sources&&i.sources[r.source],o=t&&Or(t.type);t?"vector"===o&&"raster"===a?e.push(new xr(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new xr(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new xr(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new xr(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new xr(n,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new xr(n,r.source,`source "${r.source}" not found`))}else e.push(new xr(n,r,'missing required property "source"'));return e=e.concat(Mr({key:n,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vr({key:`${n}.type`,value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"}),filter:Rr,layout:t=>Mr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Fr(I({layerType:a},t))}}),paint:t=>Mr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Nr(I({layerType:a},t))}})}}))}function Dr(t){const e=t.value,r=t.key,n=Ge(e);return"string"!==n?[new xr(r,e,`string expected, ${n} found`)]:[]}const Gr={promoteId:function({key:t,value:e}){if("string"===Ge(e))return Dr({key:t,value:e});{const r=[];for(const n in e)r.push(...Dr({key:`${t}.${n}`,value:e[n]}));return r}}};function Br(t){const e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new xr(r,e,'"type" is required')];const o=Or(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Mr({key:r,value:e,valueSpec:n[`source_${o.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:Gr});case"geojson":if(a=Mr({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:Gr}),e.cluster)for(const t in e.clusterProperties){const[n,i]=e.clusterProperties[t],o="string"==typeof n?[n,["accumulated"],["get",t]]:n;a.push(...Lr({key:`${r}.${t}.map`,value:i,expressionContext:"cluster-map"})),a.push(...Lr({key:`${r}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Mr({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return Mr({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new xr(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return kr({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function zr(t){const e=t.value,r=t.styleSpec,n=r.light,i=t.style;let o=[];const a=Ge(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new xr("light",e,`object expected, ${a} found`)]);for(const t in e){const a=t.match(/^(.*)-transition$/);o=a&&n[a[1]]&&n[a[1]].transition?o.concat(Vr({key:t,value:e[t],valueSpec:r.transition,style:i,styleSpec:r})):n[t]?o.concat(Vr({key:t,value:e[t],valueSpec:n[t],style:i,styleSpec:r})):o.concat([new xr(t,e[t],`unknown property "${t}"`)])}return o}function Ur(t){const e=t.value,r=t.key,n=t.style,i=t.styleSpec,o=i.terrain;let a=[];const s=Ge(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new xr("terrain",e,`object expected, ${s} found`)]);for(const t in e){const r=t.match(/^(.*)-transition$/);a=r&&o[r[1]]&&o[r[1]].transition?a.concat(Vr({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i})):o[t]?a.concat(Vr({key:t,value:e[t],valueSpec:o[t],style:n,styleSpec:i})):a.concat([new xr(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=n.sources&&n.sources[e.source],i=t&&Or(t.type);t?"raster-dem"!==i&&a.push(new xr(r,e.source,`terrain cannot be used with a source of type ${i}, it only be used with a "raster-dem" source type`)):a.push(new xr(r,e.source,`source "${e.source}" not found`))}else a.push(new xr(r,e,'terrain is missing required property "source"'));return a}const qr={"*":()=>[],array:Ir,boolean:function(t){const e=t.value,r=t.key,n=Ge(e);return"boolean"!==n?[new xr(r,e,`boolean expected, ${n} found`)]:[]},number:Pr,color:function(t){const e=t.key,r=t.value,n=Ge(r);return"string"!==n?[new xr(e,r,`color expected, ${n} found`)]:null===X(r)?[new xr(e,r,`color expected, "${r}" found`)]:[]},constants:Sr,enum:kr,filter:Rr,function:Cr,layer:jr,object:Mr,source:Br,light:zr,terrain:Ur,string:Dr,formatted:function(t){return 0===Dr(t).length?[]:Lr(t)},resolvedImage:function(t){return 0===Dr(t).length?[]:Lr(t)}};function Vr(t){const e=t.value,r=t.valueSpec,n=t.styleSpec;if(r.expression&&Be(Or(e)))return Cr(t);if(r.expression&&He(Tr(e)))return Lr(t);if(r.type&&qr[r.type])return qr[r.type](t);return Mr(I({},t,{valueSpec:r.type?n[r.type]:r}))}function Yr(t){const e=t.value,r=t.key,n=Dr(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new xr(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new xr(r,e,'"glyphs" url must include a "{range}" token')),n)}function Wr(t,e=i){let r=[];return r=r.concat(Vr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Yr,"*":()=>[]}})),t.constants&&(r=r.concat(Sr({key:"constants",value:t.constants,style:t,styleSpec:e}))),Xr(r)}function Xr(t){return[].concat(t).sort((t,e)=>t.line-e.line)}function Zr(t){return function(...e){return Xr(t.apply(this,e))}}Wr.source=Zr(Br),Wr.light=Zr(zr),Wr.terrain=Zr(Ur),Wr.layer=Zr(jr),Wr.filter=Zr(Rr),Wr.paintProperty=Zr(Nr),Wr.layoutProperty=Zr(Fr);var Hr=a(function(t,e){var r=function(){var t=function(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r},e=[1,12],r=[1,13],n=[1,9],i=[1,10],o=[1,11],a=[1,14],s=[1,15],u=[14,18,22,24],l=[18,22],c=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(u,[2,7]),t(u,[2,8]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),t(u,[2,3]),t(u,[2,4]),t(u,[2,5]),t([14,18,21,22,24],[2,1]),t(u,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(u,[2,13]),{18:[1,24],22:[1,25]},t(l,[2,16]),{21:[1,26]},t(u,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(u,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:30,15:7,16:8,17:a,23:s},t(u,[2,19]),{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:31,15:7,16:8,17:a,23:s},t(l,[2,17]),t(l,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,u=0,l=1,c=i.slice.call(arguments,1),h=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);h.setInput(t,f.yy),f.yy.lexer=h,f.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var d=h.yylloc;i.push(d);var y=h.options&&h.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,m,v,_,b,w,x,E,S,O={};;){if(m=r[r.length-1],this.defaultActions[m]?v=this.defaultActions[m]:(null==g&&(S=void 0,"number"!=typeof(S=h.lex()||l)&&(S=e.symbols_[S]||S),g=S),v=o[m]&&o[m][g]),void 0===v||!v.length||!v[0]){var T="";for(b in E=[],o[m])this.terminals_[b]&&b>2&&E.push("'"+this.terminals_[b]+"'");T=h.showPosition?"Parse error on line "+(s+1)+":\n"+h.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(g==l?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(T,{text:h.match,token:this.terminals_[g]||g,line:h.yylineno,loc:d,expected:E})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+g);switch(v[0]){case 1:r.push(g),n.push(h.yytext),i.push(h.yylloc),r.push(v[1]),g=null,u=h.yyleng,a=h.yytext,s=h.yylineno,d=h.yylloc;break;case 2:if(w=this.productions_[v[1]][1],O.$=n[n.length-w],O._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},y&&(O._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(_=this.performAction.apply(O,[a,u,s,f.yy,v[1],n,i].concat(c))))return _;w&&(r=r.slice(0,-1*w*2),n=n.slice(0,-1*w),i=i.slice(0,-1*w)),r.push(this.productions_[v[1]][0]),n.push(O.$),i.push(O._$),x=o[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return h.lexer=f,p.prototype=h,h.Parser=p,new p}();e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)}});Hr.parser,Hr.Parser,Hr.parse;function Kr(t){if(t instanceof String||"string"==typeof t||t instanceof n)try{return Hr.parse(t.toString())}catch(t){throw new Er(t)}return t}function $r(t,e=i){let r=t;try{r=Kr(r)}catch(t){return[t]}return Wr(r,e)}const Jr={StyleExpression:Ze,isExpression:He,isExpressionFilter:cr,createExpression:Ke,createPropertyExpression:Qe,normalizePropertyExpression:function(t,e){if(Be(t))return new tr(t,e);if(He(t)){const r=Qe(t,e);if("error"===r.result)throw new Error(r.value.map(t=>`${t.key}: ${t.message}`).join(", "));return r.value}{let r=t;return"string"==typeof t&&"color"===e.type&&(r=Z.parse(t)),{kind:"constant",evaluate:()=>r}}},ZoomConstantExpression:$e,ZoomDependentExpression:Je,StylePropertyFunction:tr},Qr={convertFunction:rr,createFunction:Ue,isFunction:Be};$r.parsed=$r,$r.latest=$r}).call(this,r(8),r(2).Buffer)},function(t,e,r){
/**!

 @license
 handlebars v4.4.5

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=m();return t.compile=function(e,r){return c.compile(e,r,t)},t.precompile=function(e,r){return c.precompile(e,r,t)},t.AST=u.default,t.Compiler=c.Compiler,t.JavaScriptCompiler=f.default,t.Parser=l.parser,t.parse=l.parse,t}var i=r(1).default;e.__esModule=!0;var o=r(2),a=i(o),s=r(35),u=i(s),l=r(36),c=r(41),h=r(42),f=i(h),p=r(39),d=i(p),y=r(34),g=i(y),m=a.default.create,v=n();v.create=n,g.default(v),v.Visitor=d.default,v.default=v,e.default=v,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){"use strict";function n(){var t=new s.HandlebarsEnvironment;return p.extend(t,s),t.SafeString=l.default,t.Exception=h.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=y,t.template=function(e){return y.template(e,t)},t}var i=r(3).default,o=r(1).default;e.__esModule=!0;var a=r(4),s=i(a),u=r(21),l=o(u),c=r(6),h=o(c),f=r(5),p=i(f),d=r(22),y=i(d),g=r(34),m=o(g),v=n();v.create=n,m.default(v),v.default=v,e.default=v,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){"use strict";function n(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},u.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var i=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var o=r(5),a=r(6),s=i(a),u=r(10),l=r(18),c=r(20),h=i(c);e.VERSION="4.4.5",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var f="[object Object]";n.prototype={constructor:n,logger:h.default,log:h.default.log,registerHelper:function(t,e){if(o.toString.call(t)===f){if(e)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===f)o.extend(this.partials,t);else{if(void 0===e)throw new s.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===f){if(e)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var p=h.default.log;e.log=p,e.createFrame=o.createFrame,e.logger=h.default},function(t,e){"use strict";function r(t){return i[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}e.__esModule=!0,e.extend=n,e.indexOf=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return a.test(t)?t.replace(o,r):t},e.isEmpty=function(t){return!t&&0!==t||!(!l(t)||0!==t.length)},e.createFrame=function(t){var e=n({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,a=/[&<>"'`=]/,s=Object.prototype.toString;e.toString=s;var u=function(t){return"function"==typeof t};u(/x/)&&(e.isFunction=u=function(t){return"function"==typeof t&&"[object Function]"===s.call(t)}),e.isFunction=u;var l=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===s.call(t)};e.isArray=l},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,s=void 0;r&&(a=r.start.line,s=r.start.column,t+=" - "+a+":"+s);for(var u=Error.prototype.constructor.call(this,t),l=0;l<o.length;l++)this[o[l]]=u[o[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,i?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(t){}}var i=r(7).default;e.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){o.default(t),s.default(t),l.default(t),h.default(t),p.default(t),y.default(t),m.default(t)},e.moveHelperToHooks=function(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])};var i=r(11),o=n(i),a=r(12),s=n(a),u=r(13),l=n(u),c=r(14),h=n(c),f=r(15),p=n(f),d=r(16),y=n(d),g=r(17),m=n(g)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,r){var i=r.inverse,o=r.fn;if(!0===e)return o(this);if(!1===e||null==e)return i(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(e,r)})},t.exports=e.default},function(t,e,r){(function(n){"use strict";var i=r(1).default;e.__esModule=!0;var o=r(5),a=r(6),s=i(a);e.default=function(t){t.registerHelper("each",function(t,e){function r(e,r,n){c&&(c.key=e,c.index=r,c.first=0===r,c.last=!!n,h&&(c.contextPath=h+e)),l+=i(t[e],{data:c,blockParams:o.blockParams([t[e],e],[h+e,null])})}if(!e)throw new s.default("Must pass iterator to #each");var i=e.fn,a=e.inverse,u=0,l="",c=void 0,h=void 0;if(e.data&&e.ids&&(h=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(c=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var f=t.length;u<f;u++)u in t&&r(u,u,u===t.length-1);else if(n.Symbol&&t[n.Symbol.iterator]){for(var p=[],d=t[n.Symbol.iterator](),y=d.next();!y.done;y=d.next())p.push(y.value);for(var f=(t=p).length;u<f;u++)r(u,u,u===t.length-1)}else{var g=void 0;for(var m in t)t.hasOwnProperty(m)&&(void 0!==g&&r(g,u-1),g=m,u++);void 0!==g&&r(g,u-1,!0)}return 0===u&&(l=a(this)),l})},t.exports=e.default}).call(e,function(){return this}())},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(6),o=n(i);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("if",function(t,e){return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,r){return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),e[0]=i,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t?"constructor"!==e||t.propertyIsEnumerable(e)?t[e]:void 0:t})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("with",function(t,e){n.isFunction(t)&&(t=t.call(this));var r=e.fn;if(n.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&((i=n.createFrame(e.data)).contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:i,blockParams:n.blockParams([t],[i&&i.contextPath])})})},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){o.default(t)};var i=r(19),o=n(i)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",function(t,e,r,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,e.partials);var s=t(i,o);return r.partials=a,s}),e.partials[i.args[0]]=i.fn,o})},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[e].apply(console,n)}}};e.default=i,t.exports=e.default},function(t,e){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r,n,i,a,s){function u(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(o=[e].concat(s)),r(t,e,t.helpers,t.partials,i.data||n,a&&[i.blockParams].concat(a),o)}return(u=o(r,u,t,s,n,a)).program=e,u.depth=s?s.length:0,u.blockParams=i||0,u}function i(){return""}function o(t,e,r,n,i,o){if(t.decorator){var a={};e=t.decorator(e,a,r,n&&n[0],i,o,n),c.extend(e,a)}return e}var a=r(23).default,s=r(3).default,u=r(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,r=p.COMPILER_REVISION;if(!(e>=p.LAST_COMPATIBLE_COMPILER_REVISION&&e<=p.COMPILER_REVISION)){if(e<p.LAST_COMPATIBLE_COMPILER_REVISION){var n=p.REVISION_CHANGES[r],i=p.REVISION_CHANGES[e];throw new f.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new f.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){function r(e){function n(e){return""+t.main(s,e,s.helpers,s.partials,a,l,u)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=i.data;r._setup(i),!i.partial&&t.useData&&(a=function(t,e){return e&&"root"in e||((e=e?p.createFrame(e):{}).root=t),e}(e,a));var u=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(u=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(n=o(t.main,n,s,i.depths||[],a,l))(e,i)}if(!e)throw new f.default("No environment passed to template");if(!t||!t.main)throw new f.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i=t.compiler&&7===t.compiler[0],s={strict:function(t,e){if(!(e in t))throw new f.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:c.escapeExpression,invokePartial:function(r,n,i){i.hash&&(n=c.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,i);var o=c.extend({},i,{hooks:this.hooks}),a=e.VM.invokePartial.call(this,r,n,o);if(null==a&&e.compile&&(i.partials[i.name]=e.compile(r,t.compilerOptions,e),a=i.partials[i.name](n,o)),null!=a){if(i.indent){for(var s=a.split("\n"),u=0,l=s.length;u<l&&(s[u]||u+1!==l);u++)s[u]=i.indent+s[u];a=s.join("\n")}return a}throw new f.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,i,o){var a=this.programs[t],s=this.fn(t);return e||o||i||r?a=n(this,t,s,e,r,i,o):a||(a=this.programs[t]=n(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},nullContext:a({}),noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(r){if(r.partial)s.helpers=r.helpers,s.partials=r.partials,s.decorators=r.decorators,s.hooks=r.hooks;else{s.helpers=c.extend({},e.helpers,r.helpers),t.usePartial&&(s.partials=c.extend({},e.partials,r.partials)),(t.usePartial||t.useDecorators)&&(s.decorators=c.extend({},e.decorators,r.decorators)),s.hooks={};var n=r.allowCallsToHelperMissing||i;d.moveHelperToHooks(s,"helperMissing",n),d.moveHelperToHooks(s,"blockHelperMissing",n)}},r._child=function(e,r,i,o){if(t.useBlockParams&&!i)throw new f.default("must pass block params");if(t.useDepths&&!o)throw new f.default("must pass parent depths");return n(s,e,t[e],r,0,i,o)},r},e.wrapProgram=n,e.resolvePartial=function(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t},e.invokePartial=function(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==i&&function(){r.data=p.createFrame(r.data);var t=r.fn;o=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=p.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=c.extend({},r.partials,t.partials))}(),void 0===t&&o&&(t=o),void 0===t)throw new f.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)},e.noop=i;var l=r(5),c=s(l),h=r(6),f=u(h),p=r(4),d=r(10)},function(t,e,r){t.exports={default:r(24),__esModule:!0}},function(t,e,r){r(25),t.exports=r(30).Object.seal},function(t,e,r){var n=r(26);r(27)("seal",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(28),i=r(30),o=r(33);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(t,e,r){var n=r(29),i=r(30),o=r(31),a="prototype",s=function(t,e,r){var u,l,c,h=t&s.F,f=t&s.G,p=t&s.S,d=t&s.P,y=t&s.B,g=t&s.W,m=f?i:i[e]||(i[e]={}),v=f?n:p?n[e]:(n[e]||{})[a];for(u in f&&(r=e),r)(l=!h&&v&&u in v)&&u in m||(c=l?v[u]:r[u],m[u]=f&&"function"!=typeof v[u]?r[u]:y&&l?o(c,n):g&&v[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((m[a]||(m[a]={}))[u]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(32);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){(function(r){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==r?r:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default,i=r(3).default;e.__esModule=!0,e.parse=function(t,e){return"Program"===t.type?t:(a.default.yy=f,f.locInfo=function(t){return new f.SourceLocation(e&&e.srcName,t)},new u.default(e).accept(a.default.parse(t)))};var o=r(37),a=n(o),s=r(38),u=n(s),l=r(40),c=i(l),h=r(5);e.parser=a.default;var f={};h.extend(f,c)},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var u=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([u],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=r.lexer.lex()||1)&&(t=r.symbols_[t]||t),t}var r=this,n=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,y,g,m,v,_,b,w,x={};;){if(y=n[n.length-1],this.defaultActions[y]?g=this.defaultActions[y]:(null!=p||(p=e()),g=a[y]&&a[y][p]),void 0===g||!g.length||!g[0]){var E="";if(!c){for(v in w=[],a[y])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");E=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+p);switch(g[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),p=null,d?(p=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(_=this.productions_[g[1]][1],x.$=i[i.length-_],x._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},f&&(x._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),void 0!==(m=this.performAction.call(x,s,l,u,this.yy,g[1],i,o)))return m;_&&(n=n.slice(0,-1*_*2),i=i.slice(0,-1*_),o=o.slice(0,-1*_)),n.push(this.productions_[g[1]][0]),i.push(x.$),o.push(x._$),b=a[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(r=this._input.match(this.rules[o[a]]))||e&&!(r[0].length>e[0].length)||(e=r,n=a,this.options.flex));a++);return e?((i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){function i(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();return e.lexer=r,t.prototype=e,e.Parser=t,new t}();e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function i(t,e,r){void 0===e&&(e=t.length);var n=t[e-1],i=t[e-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(t,e,r){void 0===e&&(e=-1);var n=t[e+1],i=t[e+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(t,e,r){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(t,e,r){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var u=r(1).default;e.__esModule=!0;var l=r(39),c=u(l);n.prototype=new c.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,u=0,l=n.length;u<l;u++){var c=n[u],h=this.accept(c);if(h){var f=i(n,u,r),p=o(n,u,r),d=h.openStandalone&&f,y=h.closeStandalone&&p,g=h.inlineStandalone&&f&&p;h.close&&a(n,u,!0),h.open&&s(n,u,!0),e&&g&&(a(n,u),s(n,u)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[u-1].original)[1])),e&&d&&(a((c.program||c.inverse).body),s(n,u)),e&&y&&(a(n,u),s((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,n=r,u=r;if(r&&r.chained)for(n=r.body[0].program;u.chained;)u=u.body[u.body.length-1].program;var l={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:i((n||e).body)};if(t.openStrip.close&&a(e.body,null,!0),r){var c=t.inverseStrip;c.open&&s(e.body,null,!0),c.close&&a(n.body,null,!0),t.closeStrip.open&&s(u.body,null,!0),!this.options.ignoreStandalone&&i(e.body)&&o(n.body)&&(s(e.body),a(n.body))}else t.closeStrip.open&&s(e.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(){this.parents=[]}function i(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){i.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=r(1).default;e.__esModule=!0;var u=r(6),l=s(u);n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!n.prototype[r.type])throw new l.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new l.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new l.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new a.default(t.path.original+" doesn't match "+e,r)}}var i=r(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,r){r=this.locInfo(r);for(var n=t?"@":"",i=[],o=0,s=0,u=e.length;s<u;s++){var l=e[s].part,c=e[s].original!==l;if(n+=(e[s].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new a.default("Invalid path: "+n,{loc:r});".."===l&&o++}}return{type:"PathExpression",data:t,depth:o,parts:i,original:n,loc:r}},e.prepareMustache=function(t,e,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}},e.prepareRawBlock=function(t,e,r,i){n(t,r),i=this.locInfo(i);var o={type:"Program",body:e,strip:{},loc:i};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(t,e,r,i,o,s){i&&i.path&&n(t,i);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(r){if(u)throw new a.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),c=r.strip,l=r.program}return o&&(o=l,l=e,e=o),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var r=t[0].loc,n=t[t.length-1].loc;r&&n&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,r,i){return n(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}};var o=r(6),a=i(o)},function(t,e,r){"use strict";function n(){}function i(t,e){if(t===e)return!0;if(l.isArray(t)&&l.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1;return!0}}function o(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var a=r(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=function(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var n=r.parse(t,e),i=(new r.Compiler).compile(n,e);return(new r.JavaScriptCompiler).compile(i,e)},e.compile=function(t,e,r){function n(){var n=r.parse(t,e),i=(new r.Compiler).compile(n,e),o=(new r.JavaScriptCompiler).compile(i,e,void 0,!0);return r.template(o)}function i(t,e){return o||(o=n()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=l.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return i._setup=function(t){return o||(o=n()),o._setup(t)},i._child=function(t,e,r,i){return o||(o=n()),o._child(t,e,r,i)},i};var s=r(6),u=a(s),l=r(5),c=r(35),h=a(c),f=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var n=this.opcodes[r],o=t.opcodes[r];if(n.opcode!==o.opcode||!i(n.args,o.args))return!1}e=this.children.length;for(var r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var r=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},r)for(var n in r)this.options.knownHelpers[n]=r[n];return this.accept(t)},compileProgram:function(t){var e=new this.compiler,r=e.compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[n]=r,this.useDepths=this.useDepths||r.useDepths,n},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,n=0;n<r;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){o(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,r):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new u.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){o(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var n=t.path,i=n.parts[0],o=null!=e||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var n=this.setupFullMustacheParams(t,e,r),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,h.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=h.default.helpers.scopedId(t),n=!t.depth&&!r&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,n=e.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=h.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),n=!r&&h.default.helpers.helperExpression(t),i=!r&&(n||e);if(i&&!n){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||h.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var n=this.options.blockParams[e],i=n&&l.indexOf(n,t);if(n&&i>=0)return[e,i]}}}},function(t,e,r){"use strict";function n(t){this.value=t}function i(){}var o=r(1).default;e.__esModule=!0;var a=r(4),s=r(6),u=o(s),l=r(5),c=r(43),h=o(c);i.prototype={nameLookup:function(t,e){function r(){return i.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"[",JSON.stringify(e),"]"]}var n=[this.aliasable("container.propertyIsEnumerable"),".call(",t,',"constructor")'];return"constructor"===e?["(",n,"?",r()," : undefined)"]:r()},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=a.COMPILER_REVISION,e=a.REVISION_CHANGES[t];return[t,e]},appendToBuffer:function(t,e,r){return l.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,r,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=i.length;s<l;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var h={compiler:this.compilerInfo(),main:c};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var f=this.context,p=f.programs,d=f.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(h[s]=p[s],d[s]&&(h[s+"_d"]=d[s],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new h.default(this.options.srcName),this.decorators=new h.default(this.options.srcName)},createFunctionContext:function(t){var e="",r=this.stackVars.concat(this.registers.list);r.length>0&&(e+=", "+r.join(", "));var n=0;for(var i in this.aliases){var o=this.aliases[i];this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(e+=", alias"+ ++n+"="+i,o.children[0]="alias"+n)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(e);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each(function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,e||(r=!1))}),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,n,i){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,r,n){var i=e.popStack(),o=0,a=r.length;for(t&&a--;o<a;o++)i=e.nameLookup(i,r[o],n);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(r[o]),")"]:i}(this.options.strict&&i,this,e,t));else for(var a=e.length;r<a;r++)this.replaceStack(function(i){var a=o.nameLookup(i,e[r],t);return n?[" && ",a]:[" != null ? ",a," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,r){var n=this.popStack(),i=this.setupHelper(t,e),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var n=1;n<t.length;n++)r.push(e,t[n]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=["(","(helper = ",i," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,r){var n=[],i=this.setupParams(e,1,n);t&&(e=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[t]=r),n&&(o.types[t]=n),i&&(o.ids[t]=i),o.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var r=t.children,n=void 0,i=void 0,o=0,a=r.length;o<a;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var u=this.context.programs.length;n.index=u,n.name="program"+u,this.context.programs[u]=i.compile(n,e,this.context,!this.precompile),this.context.decorators[u]=i.decorators,this.context.environments[u]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)r=[a.value],e=["(",r],o=!0;else{i=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],r=this.topStack()}var l=t.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof n)return r.value;if(!e){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var n=[],i=this.setupHelperArgs(e,t,n,r),o=this.nameLookup("helpers",e,"helper"),a=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:n,paramsInit:i,name:o,callParams:[a].concat(n)}},setupParams:function(t,e,r){var n={},i=[],o=[],a=[],s=!r,u=void 0;s&&(r=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"container.noop",n.inverse=l||"container.noop");for(var h=e;h--;)u=this.popStack(),r[h]=u,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),i[h]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,r,n){var i=this.setupParams(t,e,r);return i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=i.RESERVED_WORDS={},r=0,n=t.length;r<n;r++)e[t[r]]=!0}(),i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r){if(o.isArray(t)){for(var n=[],i=0,a=t.length;i<a;i++)n.push(e.wrap(t[i],r));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function i(t){this.srcFile=t,this.source=[]}e.__esModule=!0;var o=r(5),a=void 0;a||((a=function(t,e,r,n){this.src="",n&&this.add(n)}).prototype={add:function(t){o.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){o.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new a(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof a?t:(t=n(t,this,e),new a(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var r in t)if(t.hasOwnProperty(r)){var i=n(t[r],this);"undefined"!==i&&e.push([this.quotedString(r),":",i])}var o=this.generateList(e);return o.prepend("{"),o.add("}"),o},generateList:function(t){for(var e=this.empty(),r=0,i=t.length;r<i;r++)r&&e.add(","),e.add(n(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=i,t.exports=e.default}])},function(t,e,r){var n=r(1).Buffer,i=r(34).Transform,o=r(38).StringDecoder;function a(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(0)(a,i),a.prototype.update=function(t,e,r){"string"==typeof t&&(t=n.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){n=t}finally{r(n)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n},t.exports=a},function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(n)},function(t,e,r){"use strict";var n=r(23),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var o=r(18);o.inherits=r(0);var a=r(54),s=r(37);o.inherits(h,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,r){"use strict";(function(e,n){var i=r(1).Buffer,o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=function(t,r){if(t>65536)throw new Error("requested too many random bytes");var a=new e.Uint8Array(t);t>0&&o.getRandomValues(a);var s=i.from(a.buffer);if("function"==typeof r)return n.nextTick(function(){r(null,s)});return s}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(8),r(7))},function(t,e,r){var n=r(1).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%i,l=Math.min(o-s,i-u),c=0;c<l;c++)r[u+c]=t[s+c];s+=l,(a+=l)%i==0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,r){"use strict";var n=r(0),i=r(33),o=r(39),a=r(40),s=r(12);function u(t){s.call(this,"digest"),this._hash=t}n(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(2).Buffer)},function(t,e,r){(function(e){t.exports=function(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=0;o<n;++o)i[o]=t[o]^r[o];return i}}).call(this,r(2).Buffer)},function(t,e,r){"use strict";var n=r(9),i=r(6);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){var n=e;n.bignum=r(3),n.define=r(202).define,n.base=r(22),n.constants=r(80),n.decoders=r(208),n.encoders=r(210)},function(t,e,r){var n=e;n.Reporter=r(205).Reporter,n.DecoderBuffer=r(79).DecoderBuffer,n.EncoderBuffer=r(79).EncoderBuffer,n.Node=r(206)},function(t,e,r){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,r(7))},function(t,e,r){var n=r(1).Buffer;function i(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,r=new Array(e),i=0;i<e;i++)r[i]=t.readUInt32BE(4*i);return r}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,r,n,i){for(var o,a,s,u,l=r[0],c=r[1],h=r[2],f=r[3],p=t[0]^e[0],d=t[1]^e[1],y=t[2]^e[2],g=t[3]^e[3],m=4,v=1;v<i;v++)o=l[p>>>24]^c[d>>>16&255]^h[y>>>8&255]^f[255&g]^e[m++],a=l[d>>>24]^c[y>>>16&255]^h[g>>>8&255]^f[255&p]^e[m++],s=l[y>>>24]^c[g>>>16&255]^h[p>>>8&255]^f[255&d]^e[m++],u=l[g>>>24]^c[p>>>16&255]^h[d>>>8&255]^f[255&y]^e[m++],p=o,d=a,y=s,g=u;return o=(n[p>>>24]<<24|n[d>>>16&255]<<16|n[y>>>8&255]<<8|n[255&g])^e[m++],a=(n[d>>>24]<<24|n[y>>>16&255]<<16|n[g>>>8&255]<<8|n[255&p])^e[m++],s=(n[y>>>24]<<24|n[g>>>16&255]<<16|n[p>>>8&255]<<8|n[255&d])^e[m++],u=(n[g>>>24]<<24|n[p>>>16&255]<<16|n[d>>>8&255]<<8|n[255&y])^e[m++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,r[a]=l,n[l]=a;var c=t[a],h=t[c],f=t[h],p=257*t[l]^16843008*l;i[0][a]=p<<24|p>>>8,i[1][a]=p<<16|p>>>16,i[2][a]=p<<8|p>>>24,i[3][a]=p,p=16843009*f^65537*h^257*c^16843008*a,o[0][l]=p<<24|p>>>8,o[1][l]=p<<16|p>>>16,o[2][l]=p<<8|p>>>24,o[3][l]=p,0===a?a=s=1:(a=c^t[t[t[f^c]]],s^=t[t[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function l(t){this._key=i(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var a=i[o-1];o%e==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-e]^a}for(var l=[],c=0;c<n;c++){var h=n-c,f=i[h-(c%4?0:4)];l[c]=c<4||h<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return a(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=n.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},l.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var r=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=l},function(t,e,r){var n=r(1).Buffer,i=r(33);t.exports=function(t,e,r,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=n.alloc(a),u=n.alloc(o||0),l=n.alloc(0);a>0||o>0;){var c=new i;c.update(l),c.update(t),e&&c.update(e),l=c.digest();var h=0;if(a>0){var f=s.length-a;h=Math.min(a,l.length),l.copy(s,f,0,h),a-=h}if(h<l.length&&o>0){var p=u.length-o,d=Math.min(o,l.length-h);l.copy(u,p,h,h+d),o-=d}}return l.fill(0),{key:s,iv:u}}},function(t,e,r){"use strict";var n=e;n.base=r(182),n.short=r(183),n.mont=r(184),n.edwards=r(185)},function(t,e,r){(function(e){var n=r(201),i=r(213),o=r(214),a=r(42),s=r(63);function u(t){var r;"object"!=typeof t||e.isBuffer(t)||(r=t.passphrase,t=t.key),"string"==typeof t&&(t=new e(t));var u,l,c=o(t,r),h=c.tag,f=c.data;switch(h){case"CERTIFICATE":l=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=n.PublicKey.decode(f,"der")),u=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=n.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+u)}throw new Error("unknown key type "+h);case"ENCRYPTED PRIVATE KEY":f=function(t,r){var n=t.algorithm.decrypt.kde.kdeparams.salt,o=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),u=i[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,h=parseInt(u.split("-")[1],10)/8,f=s.pbkdf2Sync(r,n,o,h),p=a.createDecipheriv(u,f,l),d=[];return d.push(p.update(c)),d.push(p.final()),e.concat(d)}(f=n.EncryptedPrivateKey.decode(f,"der"),r);case"PRIVATE KEY":switch(u=(l=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:n.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=n.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+u)}throw new Error("unknown key type "+h);case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=u,u.signature=n.signature}).call(this,r(2).Buffer)},function(t,e,r){t.exports=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),f=Math.max(i,Math.floor(n-u*c/s+h)),p=Math.min(o,Math.floor(n+(s-u)*c/s+h));t(r,n,f,p,a)}var d=r[n],y=i,g=o;for(e(r,i,n),a(r[o],d)>0&&e(r,i,o);y<g;){for(e(r,y,g),y++,g--;a(r[y],d)<0;)y++;for(;a(r[g],d)>0;)g--}0===a(r[i],d)?e(r,i,g):e(r,++g,o),g<=n&&(i=g+1),n<=g&&(o=g-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,r,n,i,o){for(var a=[r,n];a.length;)if(n=a.pop(),r=a.pop(),!(n-r<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):f(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));y(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var h=Math.min(c+l-1,r);y(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,i=l<i?l:i,a=u):h===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,l,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var y=a(t,0,d,this.toBBox),g=a(t,d,r,this.toBBox),m=(i=y,o=g,s=void 0,u=void 0,l=void 0,h=void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,h-u)),v=c(y)+c(g);m<f?(f=m,n=d,p=v<p?v:p):m===f&&v<p&&(p=v,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),l=h(o)+h(u),c=e;c<r-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),l+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];s(u,t.leaf?i(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},function(t,e){t.exports='<div class="m-geojson-content">\n   {{#each features}}\n   <div id="{{id}}" class="result">\n      {{#each attributes}}\n      <table>\n         <tr>\n            <td class="key">{{key}}</td>\n            <td class="value">{{{value}}}</td>\n         </tr>\n      </table>\n      {{/each}}\n   </div>\n   <div class="m-separator"></div>\n   {{/each}}\n</div>'},function(t,e,r){"use strict";var n={};(0,r(13).assign)(n,r(221),r(224),r(91)),t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var r=null,n=null;function i(t,e,r){t.addEventListener(e,function(t){var i=new MouseEvent(r,t);i.pointerId=1,i.isPrimary=!0,i.pointerType="mouse",i.width=1,i.height=1,i.tiltX=0,i.tiltY=0,"buttons"in t&&0!==t.buttons?i.pressure=.5:i.pressure=0;var o=t.target;null!==n&&(o=n,"mouseup"===e&&(n=null)),o.dispatchEvent(i),i.defaultPrevented&&t.preventDefault()})}function o(t,e,n){t.addEventListener(e,function(t){for(var i=t.changedTouches,o=i.length,a=0;a<o;a++){var s=new CustomEvent(n,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var u=i.item(a);s.clientX=u.clientX,s.clientY=u.clientY,s.screenX=u.screenX,s.screenY=u.screenY,s.pageX=u.pageX,s.pageY=u.pageY;var l=u.target.getBoundingClientRect();s.offsetX=u.clientX-l.left,s.offsetY=u.clientY-l.top,s.pointerId=1+u.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===r&&(r=u.identifier),s.isPrimary=u.identifier===r,"touchend"===e&&s.isPrimary&&(r=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}})}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),o(document,"touchstart","pointerdown"),o(document,"touchmove","pointermove"),o(document,"touchend","pointerup"))},function(t,e,r){"use strict";(function(e){var n=r(0),i=r(53),o=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(t,e){return t<<e|t>>>32-e}function u(t,e,r,n,i,o,a){return s(t+(e&r|~e&n)+i+o|0,a)+e|0}function l(t,e,r,n,i,o,a){return s(t+(e&n|r&~n)+i+o|0,a)+e|0}function c(t,e,r,n,i,o,a){return s(t+(e^r^n)+i+o|0,a)+e|0}function h(t,e,r,n,i,o,a){return s(t+(r^(e|~n))+i+o|0,a)+e|0}n(a,i),a.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,a=this._d;r=u(r,n,i,a,t[0],3614090360,7),a=u(a,r,n,i,t[1],3905402710,12),i=u(i,a,r,n,t[2],606105819,17),n=u(n,i,a,r,t[3],3250441966,22),r=u(r,n,i,a,t[4],4118548399,7),a=u(a,r,n,i,t[5],1200080426,12),i=u(i,a,r,n,t[6],2821735955,17),n=u(n,i,a,r,t[7],4249261313,22),r=u(r,n,i,a,t[8],1770035416,7),a=u(a,r,n,i,t[9],2336552879,12),i=u(i,a,r,n,t[10],4294925233,17),n=u(n,i,a,r,t[11],2304563134,22),r=u(r,n,i,a,t[12],1804603682,7),a=u(a,r,n,i,t[13],4254626195,12),i=u(i,a,r,n,t[14],2792965006,17),r=l(r,n=u(n,i,a,r,t[15],1236535329,22),i,a,t[1],4129170786,5),a=l(a,r,n,i,t[6],3225465664,9),i=l(i,a,r,n,t[11],643717713,14),n=l(n,i,a,r,t[0],3921069994,20),r=l(r,n,i,a,t[5],3593408605,5),a=l(a,r,n,i,t[10],38016083,9),i=l(i,a,r,n,t[15],3634488961,14),n=l(n,i,a,r,t[4],3889429448,20),r=l(r,n,i,a,t[9],568446438,5),a=l(a,r,n,i,t[14],3275163606,9),i=l(i,a,r,n,t[3],4107603335,14),n=l(n,i,a,r,t[8],1163531501,20),r=l(r,n,i,a,t[13],2850285829,5),a=l(a,r,n,i,t[2],4243563512,9),i=l(i,a,r,n,t[7],1735328473,14),r=c(r,n=l(n,i,a,r,t[12],2368359562,20),i,a,t[5],4294588738,4),a=c(a,r,n,i,t[8],2272392833,11),i=c(i,a,r,n,t[11],1839030562,16),n=c(n,i,a,r,t[14],4259657740,23),r=c(r,n,i,a,t[1],2763975236,4),a=c(a,r,n,i,t[4],1272893353,11),i=c(i,a,r,n,t[7],4139469664,16),n=c(n,i,a,r,t[10],3200236656,23),r=c(r,n,i,a,t[13],681279174,4),a=c(a,r,n,i,t[0],3936430074,11),i=c(i,a,r,n,t[3],3572445317,16),n=c(n,i,a,r,t[6],76029189,23),r=c(r,n,i,a,t[9],3654602809,4),a=c(a,r,n,i,t[12],3873151461,11),i=c(i,a,r,n,t[15],530742520,16),r=h(r,n=c(n,i,a,r,t[2],3299628645,23),i,a,t[0],4096336452,6),a=h(a,r,n,i,t[7],1126891415,10),i=h(i,a,r,n,t[14],2878612391,15),n=h(n,i,a,r,t[5],4237533241,21),r=h(r,n,i,a,t[12],1700485571,6),a=h(a,r,n,i,t[3],2399980690,10),i=h(i,a,r,n,t[10],4293915773,15),n=h(n,i,a,r,t[1],2240044497,21),r=h(r,n,i,a,t[8],1873313359,6),a=h(a,r,n,i,t[15],4264355552,10),i=h(i,a,r,n,t[6],2734768916,15),n=h(n,i,a,r,t[13],1309151649,21),r=h(r,n,i,a,t[4],4149444226,6),a=h(a,r,n,i,t[11],3174756917,10),i=h(i,a,r,n,t[2],718787259,15),n=h(n,i,a,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+a|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new e(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a}).call(this,r(2).Buffer)},function(t,e,r){t.exports=i;var n=r(35).EventEmitter;function i(){n.call(this)}r(0)(i,n),i.Readable=r(36),i.Writable=r(145),i.Duplex=r(146),i.Transform=r(147),i.PassThrough=r(148),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",l),t.on("error",l),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,a,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(l=r.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var a;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var r,o,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){(e=t.exports=r(54)).Stream=e,e.Readable=e,e.Writable=r(37),e.Duplex=r(14),e.Transform=r(57),e.PassThrough=r(144)},function(t,e,r){"use strict";(function(e,n,i){var o=r(23);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=m;var l=r(18);l.inherits=r(0);var c={deprecate:r(143)},h=r(55),f=r(1).Buffer,p=i.Uint8Array||function(){};var d,y=r(56);function g(){}function m(t,e){s=s||r(14),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),S(t,e))}(t,r,n,e,i);else{var a=x(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?u(b,t,r,a,i):b(t,r,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||r(14),!(d.call(v,this)||this instanceof s))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(_(t,e,!1,e.objectMode?1:l.length,l,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var r=x(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}l.inherits(v,h),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof m)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,r){var n,i=this._writableState,a=!1,s=!i.objectMode&&(n=t,f.isBuffer(n)||n instanceof p);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(n,a),i=!1),i}(this,i,t,r))&&(i.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,n,i,o);return u}(this,i,s,t,e,r)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,S(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(7),r(141).setImmediate,r(8))},function(t,e,r){"use strict";var n=r(1).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function c(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";var n=r(2).Buffer,i=r(0),o=r(53),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function y(t,e,r,n,i,o,a,s){return d(t+(e^r^n)+o+a|0,s)+i|0}function g(t,e,r,n,i,o,a,s){return d(t+(e&r|~e&n)+o+a|0,s)+i|0}function m(t,e,r,n,i,o,a,s){return d(t+((e|~r)^n)+o+a|0,s)+i|0}function v(t,e,r,n,i,o,a,s){return d(t+(e&n|r&~n)+o+a|0,s)+i|0}function _(t,e,r,n,i,o,a,s){return d(t+(e^(r|~n))+o+a|0,s)+i|0}i(p,o),p.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,p=0|this._e,b=0|this._a,w=0|this._b,x=0|this._c,E=0|this._d,S=0|this._e,O=0;O<80;O+=1){var T,M;O<16?(T=y(r,n,i,o,p,t[s[O]],h[0],l[O]),M=_(b,w,x,E,S,t[u[O]],f[0],c[O])):O<32?(T=g(r,n,i,o,p,t[s[O]],h[1],l[O]),M=v(b,w,x,E,S,t[u[O]],f[1],c[O])):O<48?(T=m(r,n,i,o,p,t[s[O]],h[2],l[O]),M=m(b,w,x,E,S,t[u[O]],f[2],c[O])):O<64?(T=v(r,n,i,o,p,t[s[O]],h[3],l[O]),M=g(b,w,x,E,S,t[u[O]],f[3],c[O])):(T=_(r,n,i,o,p,t[s[O]],h[4],l[O]),M=y(b,w,x,E,S,t[u[O]],f[4],c[O])),r=p,p=o,o=d(i,10),i=n,n=T,b=S,S=E,E=d(x,10),x=w,w=M}var I=this._b+i+E|0;this._b=this._c+o+S|0,this._c=this._d+p+b|0,this._d=this._e+r+w|0,this._e=this._a+n+x|0,this._a=I},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=p},function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=r(149),e.sha1=r(150),e.sha224=r(151),e.sha256=r(58),e.sha384=r(152),e.sha512=r(59)},function(t,e,r){"use strict";e.utils=r(158),e.Cipher=r(159),e.DES=r(160),e.CBC=r(161),e.EDE=r(162)},function(t,e,r){var n=r(163),i=r(171),o=r(69);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,r){var n={ECB:r(164),CBC:r(165),CFB:r(166),CFB8:r(167),CFB1:r(168),OFB:r(169),CTR:r(67),GCM:r(67)},i=r(69);for(var o in i)i[o].module=n[i[o].mode];t.exports=i},function(t,e,r){(function(e){var n=r(3),i=r(15);function o(t,r){var i=function(t){var e=a(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),o=r.modulus.byteLength(),s=(n.mont(r.modulus),new n(t).mul(i.blinder).umod(r.modulus)),u=s.toRed(n.mont(r.prime1)),l=s.toRed(n.mont(r.prime2)),c=r.coefficient,h=r.prime1,f=r.prime2,p=u.redPow(r.exponent1),d=l.redPow(r.exponent2);p=p.fromRed(),d=d.fromRed();var y=p.isub(d).imul(c).umod(h);return y.imul(f),d.iadd(y),new e(d.imul(i.unblinder).umod(r.modulus).toArray(!1,o))}function a(t){for(var e=t.modulus.byteLength(),r=new n(i(e));r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2);)r=new n(i(e));return r}t.exports=o,o.getr=a}).call(this,r(2).Buffer)},function(t,e,r){var n=e;n.utils=r(9),n.common=r(20),n.sha=r(187),n.ripemd=r(191),n.hmac=r(192),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports='<div class="m-popup{{#gt tabs.length 1}} m-has-tabs{{/gt}} m-collapsed">\n  {{#gt tabs.length 1}}\n    <div class="m-tabs">\n      {{#each tabs}}\n        <div class="m-tab{{#eq @index 0}} m-activated{{/eq}}" data-index="{{@index}}">\n          <i class="{{icon}}"></i>\n        </div>\n      {{/each}}\n    </div>\n  {{/gt}}\n  <div class="m-content">\n    <div class="m-header">\n      {{#eq tabs.length 1}}\n        <div class="m-title">{{{tabs.0.title}}}</div>\n        <div class="m-subtitle">{{{tabs.0.subtitle}}}</div>\n      {{/eq}}\n      <a class="m-popup-closer" href="#" title="cerrar popup"></a>\n    </div>\n    <div class="m-body">{{{tabs.0.content}}}</div>\n  </div>\n</div>'},function(t){t.exports={a:"2.5.0"}},function(t,e,r){},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,n="/"===a.charAt(0))}return(n?"/":"")+(e=r(o(e.split("/"),function(t){return!!t}),!n).join("/"))||"."},e.normalize=function(t){var n=e.isAbsolute(t),i="/"===a(t,-1);return(t=r(o(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&i&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=i(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(7))},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(34).Transform;function o(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(0)(o,i),o.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(t){n=t}r(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,r){"use strict";(function(e,n){var i=r(23);t.exports=_;var o,a=r(51);_.ReadableState=v;r(35).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=r(55),l=r(1).Buffer,c=e.Uint8Array||function(){};var h=r(18);h.inherits=r(0);var f=r(138),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,y=r(139),g=r(56);h.inherits(_,u);var m=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var n=e instanceof(o=o||r(14));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(38).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||r(14),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,r,n,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,S(t)}(t,a)):(i||(o=function(t,e){var r;n=e,l.isBuffer(n)||n instanceof c||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):T(t,a)):w(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&S(t)),T(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=r(38).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var x=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(O,t):O(t))}function O(t){p("emit readable"),t.emit("readable"),C(t)}function T(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(M,t,e))}function M(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function I(t){p("readable nexttick read 0"),t.read(0)}function P(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=l.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function k(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function A(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}_.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?k(this):S(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&k(this),null;var n,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(r,e))),null===(n=t>0?L(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&k(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:_;function l(e,n){p("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",g),t.removeListener("unpipe",l),r.removeListener("end",c),r.removeListener("end",_),r.removeListener("data",y),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):r.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,C(t))}}(r);t.on("drain",h);var f=!1;var d=!1;function y(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==A(o.pipes,t))&&!f&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function g(e){p("onerror",e),_(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),_()}function v(){p("onfinish"),t.removeListener("close",m),_()}function _(){p("unpipe"),r.unpipe(t)}return r.on("data",y),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",g),t.once("close",m),t.once("finish",v),t.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=A(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},_.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i.nextTick(I,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(P,t,e))}(this,t)),this},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=L}).call(this,r(8),r(7))},function(t,e,r){t.exports=r(35).EventEmitter},function(t,e,r){"use strict";var n=r(23);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";t.exports=a;var n=r(14),i=r(18);function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,r){u(t,e,r)}):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(0),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},function(t,e,r){var n=r(0),i=r(16),o=r(1).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,d=0|this._f,y=0|this._g,g=0|this._h,m=0;m<16;++m)r[m]=t.readInt32BE(4*m);for(;m<64;++m)r[m]=0|(((e=r[m-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[m-7]+p(r[m-15])+r[m-16];for(var v=0;v<64;++v){var _=g+f(u)+l(u,d,y)+a[v]+r[v]|0,b=h(n)+c(n,i,o)|0;g=y,y=d,d=u,u=s+_|0,s=o,o=i,i=n,n=_+b|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=y+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},function(t,e,r){var n=r(0),i=r(16),o=r(1).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function l(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function m(t,e){return t>>>0<e>>>0?1:0}n(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,v=0|this._gh,_=0|this._hh,b=0|this._al,w=0|this._bl,x=0|this._cl,E=0|this._dl,S=0|this._el,O=0|this._fl,T=0|this._gl,M=0|this._hl,I=0;I<32;I+=2)e[I]=t.readInt32BE(4*I),e[I+1]=t.readInt32BE(4*I+4);for(;I<160;I+=2){var P=e[I-30],C=e[I-30+1],L=p(P,C),k=d(C,P),R=y(P=e[I-4],C=e[I-4+1]),A=g(C,P),N=e[I-14],F=e[I-14+1],j=e[I-32],D=e[I-32+1],G=k+F|0,B=L+N+m(G,k)|0;B=(B=B+R+m(G=G+A|0,A)|0)+j+m(G=G+D|0,D)|0,e[I]=B,e[I+1]=G}for(var z=0;z<160;z+=2){B=e[z],G=e[z+1];var U=c(r,n,i),q=c(b,w,x),V=h(r,b),Y=h(b,r),W=f(s,S),X=f(S,s),Z=a[z],H=a[z+1],K=l(s,u,v),$=l(S,O,T),J=M+X|0,Q=_+W+m(J,M)|0;Q=(Q=(Q=Q+K+m(J=J+$|0,$)|0)+Z+m(J=J+H|0,H)|0)+B+m(J=J+G|0,G)|0;var tt=Y+q|0,et=V+U+m(tt,Y)|0;_=v,M=T,v=u,T=O,u=s,O=S,s=o+Q+m(S=E+J|0,E)|0,o=i,E=x,i=n,x=w,n=r,w=b,r=Q+et+m(b=J+tt|0,J)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+E|0,this._el=this._el+S|0,this._fl=this._fl+O|0,this._gl=this._gl+T|0,this._hl=this._hl+M|0,this._ah=this._ah+r+m(this._al,b)|0,this._bh=this._bh+n+m(this._bl,w)|0,this._ch=this._ch+i+m(this._cl,x)|0,this._dh=this._dh+o+m(this._dl,E)|0,this._eh=this._eh+s+m(this._el,S)|0,this._fh=this._fh+u+m(this._fl,O)|0,this._gh=this._gh+v+m(this._gl,T)|0,this._hh=this._hh+_+m(this._hl,M)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},function(t,e,r){"use strict";var n=r(0),i=r(153),o=r(12),a=r(1).Buffer,s=r(61),u=r(39),l=r(40),c=a.alloc(128);function h(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new u:l(t)).update(e).digest():e.length<r&&(e=a.concat([e,c],r));for(var n=this._ipad=a.allocUnsafe(r),i=this._opad=a.allocUnsafe(r),s=0;s<r;s++)n[s]=54^e[s],i[s]=92^e[s];this._hash="rmd160"===t?new u:l(t),this._hash.update(n)}n(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(s,e):new h(t,e)}},function(t,e,r){var n=r(33);t.exports=function(t){return(new n).update(t).digest()}},function(t){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},function(t,e,r){e.pbkdf2=r(155),e.pbkdf2Sync=r(66)},function(t,e,r){(function(e){var r=Math.pow(2,30)-1;function n(t,r){if("string"!=typeof t&&!e.isBuffer(t))throw new TypeError(r+" must be a buffer or string")}t.exports=function(t,e,i,o){if(n(t,"Password"),n(e,"Salt"),"number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0||o>r||o!=o)throw new TypeError("Bad key length")}}).call(this,r(2).Buffer)},function(t,e,r){(function(e){var r;e.browser?r="utf-8":r=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";t.exports=r}).call(this,r(7))},function(t,e,r){var n=r(61),i=r(39),o=r(40),a=r(64),s=r(65),u=r(1).Buffer,l=u.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(t,e,r){var a=function(t){return"rmd160"===t||"ripemd160"===t?i:"md5"===t?n:function(e){return o(t).update(e).digest()}}(t),s="sha512"===t||"sha384"===t?128:64;e.length>s?e=a(e):e.length<s&&(e=u.concat([e,l],s));for(var h=u.allocUnsafe(s+c[t]),f=u.allocUnsafe(s+c[t]),p=0;p<s;p++)h[p]=54^e[p],f[p]=92^e[p];var d=u.allocUnsafe(s+r+4);h.copy(d,0,0,s),this.ipad1=d,this.ipad2=h,this.opad=f,this.alg=t,this.blocksize=s,this.hash=a,this.size=c[t]}h.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,r,n,i){a(t,e,r,n),u.isBuffer(t)||(t=u.from(t,s)),u.isBuffer(e)||(e=u.from(e,s));var o=new h(i=i||"sha1",t,e.length),l=u.allocUnsafe(n),f=u.allocUnsafe(e.length+4);e.copy(f,0,0,e.length);for(var p=0,d=c[i],y=Math.ceil(n/d),g=1;g<=y;g++){f.writeUInt32BE(g,e.length);for(var m=o.run(f,o.ipad1),v=m,_=1;_<r;_++){v=o.run(v,o.ipad2);for(var b=0;b<d;b++)m[b]^=v[b]}m.copy(l,p),p+=d}return l}},function(t,e,r){var n=r(19),i=r(1).Buffer,o=r(68);function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var r=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var u=a(t),l=o+16*s;t._cache.writeUInt32BE(u[0],l+0),t._cache.writeUInt32BE(u[1],l+4),t._cache.writeUInt32BE(u[2],l+8),t._cache.writeUInt32BE(u[3],l+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,c)}},function(t,e){t.exports=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}},function(t){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},function(t,e,r){var n=r(24),i=r(1).Buffer,o=r(12),a=r(0),s=r(170),u=r(19),l=r(68);function c(t,e,r,a){o.call(this);var u=i.alloc(4,0);this._cipher=new n.AES(e);var c=this._cipher.encryptBlock(u);this._ghash=new s(c),r=function(t,e,r){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new s(r),o=e.length,a=o%16;n.update(e),a&&(a=16-a,n.update(i.alloc(a,0))),n.update(i.alloc(8,0));var u=8*o,c=i.alloc(8);c.writeUIntBE(u,0,8),n.update(c),t._finID=n.state;var h=i.from(t._finID);return l(h),h}(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(c,o),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c},function(t,e,r){var n=r(24),i=r(1).Buffer,o=r(12);function a(t,e,r,a){o.call(this),this._cipher=new n.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=t}r(0)(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},function(t,e,r){var n=r(15);t.exports=v,v.simpleSieve=g,v.fermatTest=m;var i=r(3),o=new i(24),a=new(r(73)),s=new i(1),u=new i(2),l=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),f=(new i(7),new i(11)),p=new i(4),d=(new i(12),null);function y(){if(null!==d)return d;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<e&&t[i]<=n&&r%t[i]!=0;i++);e!==i&&t[i]<=n||(t[e++]=r)}return d=t,t}function g(t){for(var e=y(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function m(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function v(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var r,d;for(e=new i(e);;){for(r=new i(n(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(u),e.cmp(u)){if(!e.cmp(l))for(;r.mod(c).cmp(h);)r.iadd(p)}else for(;r.mod(o).cmp(f);)r.iadd(p);if(g(d=r.shrn(1))&&g(r)&&m(d)&&m(r)&&a.test(d)&&a.test(r))return r}}},function(t,e,r){var n=r(3),i=r(74);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),a=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),c=s.toRed(o);e>0;e--){var h=this._randrange(new n(2),s);r&&r(h);var f=h.toRed(o).redPow(l);if(0!==f.cmp(a)&&0!==f.cmp(c)){for(var p=1;p<u;p++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(c))break}if(p===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),l=a.toRed(i);e>0;e--){var c=this._randrange(new n(2),a),h=t.gcd(c);if(0!==h.cmpn(1))return h;var f=c.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(l)){for(var p=1;p<s;p++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(l))break}if(p===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,r){var n;function i(t){this.rand=t}if(t.exports=function(t){return n||(n=new i(null)),n.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(175);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},function(t,e,r){"use strict";var n=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16));else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},n.zero2=i,n.toHex=o,n.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,r){"use strict";var n=r(9).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function a(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?a(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=a,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){"use strict";var n=r(9),i=r(20),o=r(76),a=r(6),s=n.sum32,u=n.sum32_4,l=n.sum32_5,c=o.ch32,h=o.maj32,f=o.s0_256,p=o.s1_256,d=o.g0_256,y=o.g1_256,g=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}n.inherits(v,g),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=u(y(r[n-2]),r[n-7],d(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],g=this.h[2],m=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(a(this.k.length===r.length),n=0;n<r.length;n++){var x=l(w,p(v),c(v,_,b),this.k[n],r[n]),E=s(f(i),h(i,o,g));w=b,b=_,_=v,v=s(m,x),m=g,g=o,o=i,i=s(x,E)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],m),this.h[4]=s(this.h[4],v),this.h[5]=s(this.h[5],_),this.h[6]=s(this.h[6],b),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(9),i=r(20),o=r(6),a=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,l=n.shr64_lo,c=n.sum64,h=n.sum64_hi,f=n.sum64_lo,p=n.sum64_4_hi,d=n.sum64_4_lo,y=n.sum64_5_hi,g=n.sum64_5_lo,m=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,r,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function x(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function E(t,e,r,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function S(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function O(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function T(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function M(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function I(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function P(t,e){var r=s(t,e,1)^s(t,e,8)^l(t,e,7);return r<0&&(r+=4294967296),r}function C(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}function L(t,e){var r=s(t,e,19)^s(e,t,29)^l(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(_,m),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=C(r[n-4],r[n-3]),o=L(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],u=I(r[n-30],r[n-29]),l=P(r[n-30],r[n-29]),c=r[n-32],h=r[n-31];r[n]=p(i,o,a,s,u,l,c,h),r[n+1]=d(i,o,a,s,u,l,c,h)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],l=this.h[5],p=this.h[6],d=this.h[7],m=this.h[8],v=this.h[9],_=this.h[10],I=this.h[11],P=this.h[12],C=this.h[13],L=this.h[14],k=this.h[15];o(this.k.length===r.length);for(var R=0;R<r.length;R+=2){var A=L,N=k,F=T(m,v),j=M(m,v),D=b(m,v,_,I,P),G=w(m,v,_,I,P,C),B=this.k[R],z=this.k[R+1],U=r[R],q=r[R+1],V=y(A,N,F,j,D,G,B,z,U,q),Y=g(A,N,F,j,D,G,B,z,U,q);A=S(n,i),N=O(n,i),F=x(n,i,a,s,u),j=E(n,i,a,s,u,l);var W=h(A,N,F,j),X=f(A,N,F,j);L=P,k=C,P=_,C=I,_=m,I=v,m=h(p,d,V,Y),v=f(d,d,V,Y),p=u,d=l,u=a,l=s,a=n,s=i,n=h(V,Y,W,X),i=f(V,Y,W,X)}c(this.h,0,n,i),c(this.h,2,a,s),c(this.h,4,u,l),c(this.h,6,p,d),c(this.h,8,m,v),c(this.h,10,_,I),c(this.h,12,P,C),c(this.h,14,L,k)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){var n=r(0),i=r(22).Reporter,o=r(2).Buffer;function a(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof s||(t=new s(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(a,i),e.DecoderBuffer=a,a.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},a.prototype.restore=function(t){var e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var r=new a(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=s,s.prototype.join=function(t,e){return t||(t=new o(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(t,e),e+=r.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},function(t,e,r){var n=e;n._reverse=function(t){var e={};return Object.keys(t).forEach(function(r){(0|r)==r&&(r|=0);var n=t[r];e[n]=r}),e},n.der=r(207)},function(t,e,r){var n=r(0),i=r(21),o=i.base,a=i.bignum,s=i.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){o.Node.call(this,"der",t)}function c(t,e){var r=t.readUInt8(e);if(t.isError(r))return r;var n=s.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){var o=r;for(r=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;r<<=7,r|=127&o}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:s.tag[r]}}function h(t,e,r){var n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0==(128&n))return n;var i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(var o=0;o<i;o++){n<<=8;var a=t.readUInt8(r);if(t.isError(a))return a;n|=a}return n}t.exports=u,u.prototype.decode=function(t,e){return t instanceof o.DecoderBuffer||(t=new o.DecoderBuffer(t,e)),this.tree._decode(t,e)},n(l,o.Node),l.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;var n=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},l.prototype._decodeTag=function(t,e,r){var n=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;var i=h(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');var o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){var r=c(t,e);if(t.isError(r))return r;var n,i=h(t,r.primitive,e);if(t.isError(i))return i;if(n=r.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,e),t.isError(n))return n;if("end"===r.tagStr)break}},l.prototype._decodeList=function(t,e,r,n){for(var i=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var a=r.decode(t,"der",n);if(t.isError(a)&&o)break;i.push(a)}return i},l.prototype._decodeStr=function(t,e){if("bitstr"===e){var r=t.readUInt8();return t.isError(r)?r:{unused:r,data:t.raw()}}if("bmpstr"===e){var n=t.raw();if(n.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(2*o));return i}if("numstr"===e){var a=t.raw().toString("ascii");return this._isNumstr(a)?a:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var s=t.raw().toString("ascii");return this._isPrintstr(s)?s:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,r){for(var n,i=[],o=0;!t.isEmpty();){var a=t.readUInt8();o<<=7,o|=127&a,0==(128&a)&&(i.push(o),o=0)}128&a&&i.push(o);var s=i[0]/40|0,u=i[0]%40;if(n=r?i:[s,u].concat(i.slice(1)),e){var l=e[n.join(" ")];void 0===l&&(l=e[n.join(".")]),void 0!==l&&(n=l)}return n},l.prototype._decodeTime=function(t,e){var r=t.raw().toString();if("gentime"===e)var n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),u=0|r.slice(10,12);n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,a,s,u,0)},l.prototype._decodeNull=function(t){return null},l.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){var r=t.raw(),n=new a(r);return e&&(n=e[n.toString(10)]||n),n},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t,e,r){var n=r(0),i=r(2).Buffer,o=r(21),a=o.base,s=o.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){a.Node.call(this,"der",t)}function c(t){return t<10?"0"+t:t}t.exports=u,u.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(l,a.Node),l.prototype._encodeComposite=function(t,e,r,n){var o,a=function(t,e,r,n){var i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=s.tagClassByName[r||"universal"]<<6}(t,e,r,this.reporter);if(n.length<128)return(o=new i(2))[0]=a,o[1]=n.length,this._createEncoderBuffer([o,n]);for(var u=1,l=n.length;l>=256;l>>=8)u++;(o=new i(2+u))[0]=a,o[1]=128|u;l=1+u;for(var c=n.length;c>0;l--,c>>=8)o[l]=255&c;return this._createEncoderBuffer([o,n])},l.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var r=new i(2*t.length),n=0;n<t.length;n++)r.writeUInt16BE(t.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},l.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var n=0;n<t.length;n++)t[n]|=0}else if(Array.isArray(t)){t=t.slice();for(n=0;n<t.length;n++)t[n]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var o=0;for(n=0;n<t.length;n++){var a=t[n];for(o++;a>=128;a>>=7)o++}var s=new i(o),u=s.length-1;for(n=t.length-1;n>=0;n--){a=t[n];for(s[u--]=127&a;(a>>=7)>0;)s[u--]=128|127&a}return this._createEncoderBuffer(s)},l.prototype._encodeTime=function(t,e){var r,n=new Date(t);return"gentime"===e?r=[c(n.getFullYear()),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[c(n.getFullYear()%100),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){var r=t.toArray();!t.sign&&128&r[0]&&r.unshift(0),t=new i(r)}if(i.isBuffer(t)){var n=t.length;0===t.length&&n++;var o=new i(n);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);n=1;for(var a=t;a>=256;a>>=8)n++;for(a=(o=new Array(n)).length-1;a>=0;a--)o[a]=255&t,t>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new i(o))},l.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},l.prototype._skipDefault=function(t,e,r){var n,i=this._baseState;if(null===i.default)return!1;var o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},function(t){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},function(t,e,r){(function(e){var n=r(17);function i(t){var r=new e(4);return r.writeUInt32BE(t,0),r}t.exports=function(t,r){for(var o,a=new e(""),s=0;a.length<r;)o=i(s++),a=e.concat([a,n("sha1").update(t).update(o).digest()]);return a.slice(0,r)}}).call(this,r(2).Buffer)},function(t,e){t.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},function(t,e,r){(function(e){var n=r(3);t.exports=function(t,r){return new e(t.toRed(n.mont(r.modulus)).redPow(new n(r.publicExponent)).fromRed().toArray())}}).call(this,r(2).Buffer)},function(t,e,r){"use strict";t.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,r){"use strict";var n=r(13),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,e.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,n,i,o,s=e||t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},e.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+a[t[r]]>e?r:e}},function(t,e,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAwADADAREAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAgQGAAMFBwj/xAAaAQACAwEBAAAAAAAAAAAAAAABAwACBQQG/9oADAMBAAIQAxAAAAH6nAjsJBGa6wjLHdfHYSKvZeqmvnvmeW03ujmclCMS56qpDj7We++Xx06aCfzF5J29Bj3RYKgROx3M3XMzkpERpxsd18dhIIzJBEsd1/8A/8QAHBAAAwEBAQEBAQAAAAAAAAAAAgMFBAEAEwYU/9oACAEBAAEFAiLg8Oppos5Cc33Y5p4FTTOYJcLlQzo7UIDMqi5mfHzC183D3tSdLM522Fz66aFrQLc1Rj/H+aLvkZ15hu8+WmSPfpn0BIsbNa69U6blulVia27366agHO2/y5aGTPNQhOrNsx08AtW2WB0dpDwuHL0zmcuuV7t1zfBL00WCPB5//8QAIBEAAgEEAwEBAQAAAAAAAAAAAQIAERIhIgMTMRAyQv/aAAgBAwEBPwGXlsJOsn0yynhl5XD/AB9jYIBTAjGgqJaSt1Yu67RNTYZx5JMbkOVgcmikTqgAHk5MEGJ/SwGx8xje2JeRqsR64M5MkCPqbxKKwxAgApCGVqiLX9tE2N5+WFcpOwj0TsJ8EsLZf5//xAAoEQABBAEDAwQCAwAAAAAAAAACAAEDBBESIUExUWEFFSIzExQjMkL/2gAIAQIBAT8Bd2ZsuiuTWi0VG27r26Q/tldPRIN4pnZDcmqlottt3TOztllcIrUzVA6cqOMYhYAbZWjOKFzDq3dfrnJXe1r844Vd3uV/58PlUyKrM9Q+nC9O+cksvlWr8rEddh34worhyaKsgZfnKL0p3zguenGFHEETYBsL1H4SRS+VSb5T1843UUo0bZa31eVPMN20Oh9PlFbkAxggyTj1zyqd0jJ4pv75XqPzkii8q4JVZmth05X4YLMTuH+lHUijAQxnCmisQWfyxPqcvCrMYkVycsd2wqYlame2fThOzO2HRU5qpa6j7dl7jIH2xOvcZD+qJ0NOa0Wu2+3ZMzM2GX//xAAlEAABAwIGAwEBAQAAAAAAAAABAAIDBBEFEhMhMUEiMlEUQiP/2gAIAQEABj8CJJsB2jFh7PEczv4V6iulcfjUXQYi9ttvI7XQixBnieJ2cIEG4PaZh8Rs32lKbHG3KwdKSSMtDm7+fCkrv0Wu4y6X83V6kMeJOm9J+Hym7faIquqDy6TKFUUYh/0OzCw72UFBNTB7rgO1U+0oAMlxH/OVZYmBg5sFQ1A5bJlKxKkzFjsxsRypNV5qBbKZO1BpOMA9dQ8qGmptSeWK4kDx7J1PUB/6Mx2y7NCoaccukzFMxCIXb6yhSGMNyz7l4G91FHka/T3DiO/qbUQO15JrjKW2ACmxGql0dy17MvKfiEos31iCIIuD0jLh7/E8wP4VqihlafrVanoZXH65CXEH+I4gZwgALAdL/8QAIBABAAIBBQEBAQEAAAAAAAAAAQARITFBUXHwYcGBof/aAAgBAQABPyEGxrVoErNNRMOvX8mTK3aD3Uvhexf8HMvNNRMu/X8gNjWDRI4U8PY49ukPsWgQg3/YcdxUFIAyD3rM7VfN+McK+Xuce3GanEJwHiZmdd0I17qN3TltoZuneWOplXW0ftRenthouaHAJyPmGyKtMGyz/I7iEDNsff5NJkDFbMLdyg6m9/vUDGbaWoqanABwHmOFfD3OfbhMM8ofZ2S00dBuBIGrTCqFvg+aQ3Od9IKAe604jhTy9jn26wGxqVokvNNbMuvX9mDK2bH3cyZWzQe7lZprZh36/sBsagaBP//aAAwDAQACAAMAAAAQo4FGBA7SvIwnAyQo/F//xAAdEQEBAAIDAQEBAAAAAAAAAAABABGBITFBYXFR/9oACAEDAQE/EFxyyvBu9nL5WLwbhzyST2QGGeMh+2LL6JL6Lc4qBzcwn7L5w+9fIXAxbnHnoibLMJ9PsoMincq97c4J7LNvqKYdXedYhUx/YL6JM8MryavZ3s4Xk1Bjgv/EACIRAQABAwQDAQEBAAAAAAAAAAERACExQVFhcYHB8LHhkf/aAAgBAgEBPxBEkBSC3ZePHy8FF292LH76odjjF2Sdm/qgF+wcefh4aBJI0g8ZPjb7VNqj4ClFC5s67cHND9GV5g9xO1uKmADSaHpH/KQecnxt9qO9CfyxOif5V3rskzCZ7i9oisy4ErgvMOsbzPmpbEMy7JrrMfaiY4b23oR+SD0x/acuCUJkmSfFqSnEQ5M23cmG9HrDErM358F6GSSAIs1nJuPVE03LRYMx13xelH5ZPRH9oB5wPG/2ob1DQi9QJnfs/ZpgHKKEzvR68ZDAAiBZ2M2bVl8U1AQEPcREzGaAeMDxv9qu1IgkaQX7Lx4+HloszO5c/PdNm53bH57oBbsHHn5eSgQQFf/EACAQAQACAgIDAQEBAAAAAAAAAAERIQAxQVFhcZGBobH/2gAIAQEAAT8QTtB2AWq8GCJrqeglfoodN5zBhY7xKn8Zpp6KkEgAZQhHeCJvqegF/gANt4HaDsosR5MIyQ/phPKJGNPQc/0ACRXldq7yF3EzgMvsKPKYgZRAxGSmrFPBzImVkJYGgbpRaarCMEv7ZXwkFjR2DNrBDalj4/OOoUT4gQCVKaiJ8YKEllTEEgLuZjV5UGvGh5N2qoJuR5z5kIBY9B8zSwQ2oY+H3hA6OtTzAP8AcD15MbErKsRVvPrCI2DdxCA1bBZbxhvy/ugNKhakjtOsh6thgYJLAsFnZbOaWCG1BPx+cIyQftgPCYCdHYcZCYkxClOk4eZ5XF6Qd6bLtf8ADrI2LMXISFBcp7S41YIXgyJ6AgzSbcIwSfpkfKBSdPQMTtA2UUicmCJvqewt/qANtZxBhY7xIH9ZxBgY7zAn8YIGup7A1+Kh01gdoGwCgDgz/9k="},function(t){t.exports={location:{title:"Get current location"},layerswitcher:{title:"Layer selector"},scale:{title:"Scale",scale:"Scale",level:"Level"},getfeatureinfo:{info:"Information",title:"Consult layer",no_info:"No associated info",info_of:"Information about",unsupported_format:"Unsupported format"},wmcselector:{title:"Context selector"},rotate:{title:"Turn north"},mouse:{title:"Pointer coordinates"},dialog:{info:"INFORMATION",error:"ERROR",success:"SUCCESS",id_feature:"An ID has not been indicated to obtain the feature",invalid_type_layer:"A valid type was not specified for the layer",vector_filter:"The indicated filter is not correct",unauthorized_user:"An error occurred while loading the layer: Unauthorized user.",only_one_filter:"FeatureID and CQL are mutually exclusive, indicate only one type of filtering.",any_format:"TXT, HTML and GML are and unsupported"},feature:{incorrect_attributes:"The attributes were not specified correctly."},exception:{addto_method:"The used implementation does not have the addTo method",getelement_method:"The used implementation does not have the getElement method",getfeatureinfo_method:"The used implementation can not create GetFeatureInfo controls",mouse_method:"The used implementation can not create Mouse controls",navtoolbar_method:"The used implementation can not create navtoolbar controls",overviewmap_method:"The used implementation can not create OverviewMap controls",panzoom_method:"The used implementation can not create Panzoom controls",panzoombar_method:"The used implementation can not create Panzoombar controls",scale_method:"The used implementation can not create Scale controls",scaleline_method:"The used implementation can not create ScaleLine controls",wmcselector_method:"The used implementation can not create WMCSelector controls",geojson_method:"The used implementation can not create objects M.impl.format.GeoJSON",wkt_method:"The used implementation can not creat objects M.impl.format.WKT",getfeaturesbylayer_method:"The used implementation does not have the getFeaturesByLayer method",geojsonlayer_method:"The used implementation can not create GeoJSON layers",no_param:"No parameters specified",no_name:"You have not specified any name",kmllayer_method:"The used implementation can not create KML layers",isvisible_method:"The used implementation does not have the isVisible method",isqueryable_methd:"The used implementation does not have the isQueryable method",visibility_param:"You have not specified any visibility parameters",setvisible_method:"The used implementation does not have the setVisible method",inrange_method:"The used implementation does not have the inRange method",mapbox_method:"The used implementation can not create Mapbox layers",osm_method:"The used implementation can not create OSM layers",vectorlayer_method:"The used implementation can not create Vector layers",wfslayer_method:"The used implementation can not create WFS layers",wmclayer_method:"The used implementation can not create WMC layers",select_method:"The used implementation does not have the select method",unselect_method:"The used implementation does not have the unselect method",constructor_impl:"The used implementation does not have a constructor.",getlayers_method:"The used implementation does not have the getLayers method.",getbaselayers_method:"The used implementation does not have the getBaseLayers method.",addlayers_method:"The used implementation does not have the addLayers method.",removelayers_method:"The used implementation does not have the removeLayers method.",getwmc_method:"The implementation used does not have the getWMC method.",addwmc_method:"The used implementation does not have the addWMC method.",removewmc_method:"The used implementation does not have the removeWMC method.",getkml_method:"The used implementation does not have the getKML method.",addkml_method:"The implementation used does not have the addKML method.",removekml_method:"The implementation used does not have the removeKML method.",getwms_method:"The used implementation does not have the getWMS method.",addwms_method:"The used implementation does not have the addWMS method.",removewms_method:"The used implementation does not have the removeWMS method.",getwfs_method:"The implementation used does not have the getWFS method.",getgeojson_method:"The used implementation does not have the getGeoJSON method.",addwfs_method:"The used implementation does not have the addWFS method.",removewfs_method:"The used implementation does not have the removeWFS method.",getwmts_method:"The implementation used does not have the getWMTS method.",addwmts_method:"The used implementation does not have the addWMTS method.",removewmts_method:"The used implementation does not have the removeWMTS method.",getmbtiles_method:"The used implementation does not have the getMBtiles method.",getxyzs_method:"The used implementation does not have the getXYZs method.",gettms_method:"The used implementation does not have the getTMS method.",getcontrols_method:"The used implementation does not have the getControls method.",addcontrols_method:"The used implementation does not have the addControls method.",remove_control:"You have not specified any control to delete.",removecontrol_method:"The used implementation does not have the removeControls method.",setmaxextent_method:"The used implementation does not have the setMaxExtent method.",getbbox_method:"The used implementation does not have the getBbox method.",no_bbox:"You have not specified any bbox.",setbbox_method:"The used implementation does not have the setBbox method.",incorrect_bbox_format:"The format of the bbox parameter is not correct.",getzoom_method:"The used implementation does not have the getZoom method.",no_zoom:"You have not specified any zoom.",setzoom_method:"The implementation used does not have the setZoom method.",getcenter_method:"The used implementation does not have the getCenter method.",setcenter_method:"The used implementation does not have the setCenter method.",getresolutions_method:"The used implementation does not have the getResolutions method.",no_resolutions:"You have not specified any resolution.",setresolutions_method:"The used implementation does not have the setResolutions method.",getscale_method:"The used implementation does not have the getScale method.",getprojection_method:"The implementation used does not have the getProjection method.",no_projection:"You have not specified any projection.",setprojection_method:"The used implementation does not have the setProjection method.",no_plugins:"You have not specified any plugins.",no_add_plugin_to_map:"The plugin can not be added to the map.",no_plugin_to_remove:"You have not specified any plugins to delete.",destroy_method:"The used implementation does not have the destroy method.",addlabel_method:"The used implementation does not have the addLabel method.",no_point:"You have not specified any points.",remove_control_from_panel:"You must remove the controls from the panel previously.",getcontainer_method:"The used implementation does not have the getContainer method.",getmapimpl_method:"The used implementation does not have the getMapImpl method.",removepopup_method:"The used implementation does not have the removePopup method.",no_popup:"You have not specified any popup.",invalid_popup:"The specified popup is not valid.",no_maxextent:"You have not specified any maxExtent",must_be_document:"doc.nodeType must be DOCUMENT type",no_service_response:"There was no reply from the service",no_kml_response:"There was no response from the KML",no_getfeature_response:"There was no response in the GetFeature operation",no_map:"You have not specified any map",layerswitcher_method:"The used implementation can not create LayerSwitcher controls",location_method:"The used implementation can not create Location controls",wms_method:"The used implementation can not create WMS layers",wmts_method:"The used implementation can not create WMTS layers",no_impl:"No implementation specified",no_container:"You have not specified any container parameters",no_id_container:"There is no container with the specified id",no_center:"You have not specified any center parameters",no_attr_name:"The name of the attribute was not specified",no_empty:"The attribute name can not be null. Specify string or function",invalid_center_param:"The format of the center parameter is not correct",invalid_maxextent_param:"The format of the maxExtent parameter is not correct",invalid_resolutions_param:"The format of the resolutions parameter is not correct",invalid_zoom_param:"The format of the zoom parameter is not correct",min_gt_max:"A minimum radius greater than the maximum can not be established.",max_lt_min:"A maximum radius of less than the minimum can not be established.",no_geojson:"No GeoJSON has been specified",unsupported_lang:"A language without support has been established"}}},function(t){t.exports={location:{error:"El control ubicación no acepta http. Debe usar https.",title:"Obtener ubicación actual"},layerswitcher:{title:"Selector de capas"},scale:{title:"Escala",scale:"Escala",level:"Nivel"},getfeatureinfo:{info:"Información",title:"Consultar capa",no_info:"No existe información asociada",info_of:"Información de",unsupported_format:"Formato no soportado"},wmcselector:{title:"Selector de contextos"},rotate:{title:"Girar al norte"},mouse:{title:"Coordenadas del puntero"},dialog:{info:"INFORMACIÓN",error:"ERROR",success:"ÉXITO",id_feature:"No se ha indicado un ID para obtener el feature",invalid_type_layer:"No se ha especificado un tipo válido para la capa",vector_filter:"El filtro indicado no es correcto",unauthorized_user:"Ha ocurrido un error al cargar la capa: Usuario no autorizado.",only_one_filter:"FeatureID y CQL son mutuamente excluyentes. Indicar sólo un tipo de filtrado.",any_format:"TXT, ni HTML ni GML están soportados"},feature:{incorrect_attributes:"No se han especificado correctamente los atributos."},exception:{addto_method:"La implementación usada no posee el método addTo",getelement_method:"La implementación usada no posee el método getElement",getfeatureinfo_method:"La implementación usada no puede crear controles GetFeatureInfo",mouse_method:"La implementación usada no puede crear controles Mouse",navtoolbar_method:"La implementación usada no puede crear controles Navtoolbar",overviewmap_method:"La implementación usada no puede crear controles OverviewMap",panzoom_method:"La implementación usada no puede crear controles Panzoom",panzoombar_method:"La implementación usada no puede crear controles Panzoombar",scale_method:"La implementación usada no puede crear controles Scale",scaleline_method:"La implementación usada no puede crear controles ScaleLine",wmcselector_method:"La implementación usada no puede crear controles WMCSelector",geojson_method:"La implementación usada no puede crear objetos M.impl.format.GeoJSON",wkt_method:"La implementación usada no puede creat objetos M.impl.format.WKT",getfeaturesbylayer_method:"La implementación usada no posee el método getFeaturesByLayer",geojsonlayer_method:"La implementación usada no puede crear capas GeoJSON",no_param:"No se ha especificado ningun parámetro",no_name:"No ha especificado ningún nombre",kmllayer_method:"La implementación usada no puede crear capas KML",isvisible_method:"La implementación usada no posee el método isVisible",isqueryable_methd:"La implementación usada no posee el método isQueryable",visibility_param:"No ha especificado ningún parámetro de visibilidad",setvisible_method:"La implementación usada no posee el método setVisible",inrange_method:"La implementación usada no posee el método inRange",mapbox_method:"La implementación usada no puede crear capas Mapbox",osm_method:"La implementación usada no puede crear capas OSM",vectorlayer_method:"La implementación usada no puede crear capas Vector",wfslayer_method:"La implementación usada no puede crear capas WFS",wmclayer_method:"La implementación usada no puede crear capas WMC",select_method:"La implementación usada no posee el método select",unselect_method:"La implementación usada no posee el método unselect",constructor_impl:"La implementación usada no posee un constructor.",getlayers_method:"La implementación usada no posee el método getLayers.",getbaselayers_method:"La implementación usada no posee el método getBaseLayers.",addlayers_method:"La implementación usada no posee el método addLayers.",removelayers_method:"La implementación usada no posee el método removeLayers.",getwmc_method:"La implementación usada no posee el método getWMC.",addwmc_method:"La implementación usada no posee el método addWMC.",removewmc_method:"La implementación usada no posee el método removeWMC.",getkml_method:"La implementación usada no posee el método getKML.",addkml_method:"La implementación usada no posee el método addKML.",removekml_method:"La implementación usada no posee el método removeKML.",getwms_method:"La implementación usada no posee el método getWMS.",addwms_method:"La implementación usada no posee el método addWMS.",removewms_method:"La implementación usada no posee el método removeWMS.",getwfs_method:"La implementación usada no posee el método getWFS.",getgeojson_method:"La implementación usada no posee el método getGeoJSON.",addwfs_method:"La implementación usada no posee el método addWFS.",removewfs_method:"La implementación usada no posee el método removeWFS.",getwmts_method:"La implementación usada no posee el método getWMTS.",addwmts_method:"La implementación usada no posee el método addWMTS.",removewmts_method:"La implementación usada no posee el método removeWMTS.",getmbtiles_method:"La implementación usada no posee el método getMBtiles.",getxyzs_method:"La implementación usada no posee el método getXYZs.",gettms_method:"La implementación usada no posee el método getTMS.",getcontrols_method:"La implementación usada no posee el método getControls.",addcontrols_method:"La implementación usada no posee el método addControls.",remove_control:"No ha especificado ningún control a eliminar.",removecontrol_method:"La implementación usada no posee el método removeControls.",setmaxextent_method:"La implementación usada no posee el método setMaxExtent.",getbbox_method:"La implementación usada no posee el método getBbox.",no_bbox:"No ha especificado ningún bbox.",setbbox_method:"La implementación usada no posee el método setBbox.",incorrect_bbox_format:"El formato del parámetro bbox no es el correcto.",getzoom_method:"La implementación usada no posee el método getZoom.",no_zoom:"No ha especificado ningún zoom.",setzoom_method:"La implementación usada no posee el método setZoom.",getcenter_method:"La implementación usada no posee el método getCenter.",setcenter_method:"La implementación usada no posee el método setCenter.",getresolutions_method:"La implementación usada no posee el método getResolutions.",no_resolutions:"No ha especificado ninguna resolución.",setresolutions_method:"La implementación usada no posee el método setResolutions.",getscale_method:"La implementación usada no posee el método getScale.",getprojection_method:"La implementación usada no posee el método getProjection.",no_projection:"No ha especificado ninguna proyección.",setprojection_method:"La implementación usada no posee el método setProjection.",no_plugins:"No ha especificado ningún plugin.",no_add_plugin_to_map:"El plugin no puede añadirse al mapa.",no_plugin_to_remove:"No ha especificado ningún plugin a eliminar.",destroy_method:"La implementación usada no posee el método destroy.",addlabel_method:"La implementación usada no posee el método addLabel.",no_point:"No ha especificado ningún punto.",remove_control_from_panel:"Debe eliminar los controles del panel previamente.",getcontainer_method:"La implementación usada no posee el método getContainer.",getmapimpl_method:"La implementación usada no posee el método getMapImpl.",removepopup_method:"La implementación usada no posee el método removePopup.",no_popup:"No ha especificado ningún popup.",invalid_popup:"El popup especificado no es válido.",no_maxextent:"No ha especificado ningún maxExtent",must_be_document:"doc.nodeType debe ser de tipo DOCUMENT",no_service_response:"No hubo respuesta del servicio",no_kml_response:"No hubo respuesta del KML",no_getfeature_response:"No hubo respuesta en la operación GetFeature",no_map:"No ha especificado ningun mapa",layerswitcher_method:"La implementación usada no puede crear controles LayerSwitcher",location_method:"La implementación usada no puede crear controles Location",wms_method:"La implementación usada no puede crear capas WMS",wmts_method:"La implementación usada no puede crear capas WMTS",no_impl:"No se ha especificado ninguna implementación",no_container:"No ha especificado ningún parámetro contenedor",no_id_container:"No existe ningún contenedor con el id especificado",no_center:"No ha especificado ningún parámetro center",no_attr_name:"No se ha especificado el nombre del atributo",no_empty:"El nombre de atributo no puede ser nulo. Especifique cadena o función",invalid_center_param:"El formato del parámetro center no es correcto",invalid_maxextent_param:"El formato del parámetro maxExtent no es correcto",invalid_resolutions_param:"El formato del parámetro resolutions no es correcto",invalid_zoom_param:"El formato del parámetro zoom no es correcto",min_gt_max:"No puede establecerse un radio mínimo mayor que el máximo.",max_lt_min:"No puede establecerse un radio máximo menor que el mínimo.",no_geojson:"No se ha especificado ningun GeoJSON",unsupported_lang:"Se ha establecido un idioma sin soporte"}}},function(t,e){t.exports='<div class="m-dialog {{severity}}">\n   <div class="m-modal">\n      <div class="m-content">\n         <div class="m-title">\n            <i class="m-icon"></i>\n            <span>{{{title}}}</span>\n         </div>\n         <div class="m-message">{{{message}}}</div>\n         <div class="m-button">\n            <button>OK</button>\n         </div>\n      </div>\n   </div>\n</div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-label-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports='<div class="m-getfeatureinfo-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports="  {{#each layers}}\n      <div class='m-getfeatureinfo-content-info'>\n          <div class='m-getfeatureinfo-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-getfeatureinfo-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}"},function(t,e){t.exports='<div class="m-control m-location-container" title="{{title}}">\n    <button id="m-location-button" class="g-cartografia-gps2"></button>\n</div>'},function(t,e){t.exports='<div class="m-control m-scale-container" title="{{title}}">\n    <div class="m-level">{{level}} </div>\n    <div id="m-level-number"></div>\n    <span class="m-scale-separator"> | </span>\n    <div class="m-unit">{{scale}} = 1 : </div>\n    <div class="m-scale" id="m-scale-span"></div>\n</div>\n'},function(t,e){t.exports='<div class="m-control m-rotate-container">\n    <button id="m-rotate-button" class="g-cartografia-brujula-norte" title="{{title}}"></button>\n</div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-background">\n    {{#each layers}}\n        <button class="m-background-group-btn" id="m-baselayerselector-{{this.id}}" title="Selección de capa de fondo">{{{this.title}}}</button>\n    {{/each}}\n    <button class="m-background-unique-btn" id="m-baselayerselector-unique-btn" title="Selección de capa de fondo"></button>\n</div>'},function(t,e){t.exports='<div class="m-kml-content">\n   <p class="m-kml-name">{{{name}}}</p>\n   <div class="m-kml-desc">{{{desc}}}</div>\n</div>'},function(t,e,r){"use strict";t.exports=i;var n=r(50);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function l(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,r){return o.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){var n="",i=e;for(;i<r;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){t.exports='<div class="m-panel">\n   <button class="m-panel-btn"></button>\n   <div class="m-panel-controls"></div>\n</div>'},function(t,e,r){(function(t,e,n,i){var o=void 0,a=function(a){return o||(o=new Promise(function(o,s){var u,l=void 0!==a?a:{},c=l.onAbort;l.onAbort=function(t){s(new Error(t)),c&&c(t)},l.postRun=l.postRun||[],l.postRun.push(function(){o(l)}),t=void 0,u||(u=void 0!==l?l:{}),u.onRuntimeInitialized=function(){function t(t,e){this.Pa=t,this.db=e,this.Oa=1,this.gb=[]}function e(t){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=t){var e=this.filename,n=e?bt("//"+e):"/";if(n=ne(n,4095&(void 0!==(e=be(!0,!0))?e:438)|32768,0),t){if("string"==typeof t){for(var o=Array(t.length),a=0,s=t.length;a<s;++a)o[a]=t.charCodeAt(a);t=o}he(n,146|e),ve(o=de(n,"w"),t,0,t.length,0,void 0),ye(o),he(n,e)}}this.handleError(i(this.filename,r)),this.db=L(r,"i32"),Q(this.db),this.eb={},this.Va={}}var r=Ke(4),n=u.cwrap,i=n("sqlite3_open","number",["string","number"]),o=n("sqlite3_close_v2","number",["number"]),a=n("sqlite3_exec","number",["number","string","number","number","number"]),s=n("sqlite3_changes","number",["number"]),l=n("sqlite3_prepare_v2","number",["number","string","number","number","number"]),c=n("sqlite3_prepare_v2","number",["number","number","number","number","number"]),h=n("sqlite3_bind_text","number",["number","number","number","number","number"]),f=n("sqlite3_bind_blob","number",["number","number","number","number","number"]),p=n("sqlite3_bind_double","number",["number","number","number"]),d=n("sqlite3_bind_int","number",["number","number","number"]),y=n("sqlite3_bind_parameter_index","number",["number","string"]),g=n("sqlite3_step","number",["number"]),m=n("sqlite3_errmsg","string",["number"]),v=n("sqlite3_column_count","number",["number"]),_=n("sqlite3_data_count","number",["number"]),b=n("sqlite3_column_double","number",["number","number"]),w=n("sqlite3_column_text","string",["number","number"]),x=n("sqlite3_column_blob","number",["number","number"]),E=n("sqlite3_column_bytes","number",["number","number"]),S=n("sqlite3_column_type","number",["number","number"]),T=n("sqlite3_column_name","string",["number","number"]),k=n("sqlite3_reset","number",["number"]),A=n("sqlite3_clear_bindings","number",["number"]),N=n("sqlite3_finalize","number",["number"]),F=n("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),j=n("sqlite3_value_type","number",["number"]),D=n("sqlite3_value_bytes","number",["number"]),B=n("sqlite3_value_text","string",["number"]),U=n("sqlite3_value_blob","number",["number"]),q=n("sqlite3_value_double","number",["number"]),V=n("sqlite3_result_double","",["number","number"]),Y=n("sqlite3_result_null","",["number"]),W=n("sqlite3_result_text","",["number","string","number","number"]),X=n("sqlite3_result_blob","",["number","number","number","number"]),H=n("sqlite3_result_int","",["number","number"]),J=n("sqlite3_result_error","",["number","string","number"]),Q=n("RegisterExtensionFunctions","number",["number"]);t.prototype.bind=function(t){if(!this.Pa)throw"Statement closed";return this.reset(),Array.isArray(t)?this.ub(t):null==t||"object"!=typeof t||this.vb(t)},t.prototype.step=function(){if(!this.Pa)throw"Statement closed";this.Oa=1;var t=g(this.Pa);switch(t){case 100:return!0;case 101:return!1;default:throw this.db.handleError(t)}},t.prototype.Bb=function(t){return null==t&&(t=this.Oa,this.Oa+=1),b(this.Pa,t)},t.prototype.Cb=function(t){return null==t&&(t=this.Oa,this.Oa+=1),w(this.Pa,t)},t.prototype.getBlob=function(t){null==t&&(t=this.Oa,this.Oa+=1);var e=E(this.Pa,t);t=x(this.Pa,t);for(var r=new Uint8Array(e),n=0;n<e;)r[n]=z[t+n],n+=1;return r},t.prototype.get=function(t){null!=t&&this.bind(t)&&this.step(),t=[];for(var e=0,r=_(this.Pa);e<r;){switch(S(this.Pa,e)){case 1:case 2:t.push(this.Bb(e));break;case 3:t.push(this.Cb(e));break;case 4:t.push(this.getBlob(e));break;default:t.push(null)}e+=1}return t},t.prototype.getColumnNames=function(){for(var t=[],e=0,r=v(this.Pa);e<r;)t.push(T(this.Pa,e)),e+=1;return t},t.prototype.getAsObject=function(t){t=this.get(t);for(var e=this.getColumnNames(),r={},n=0,i=e.length;n<i;)r[e[n]]=t[n],n+=1;return r},t.prototype.run=function(t){return null!=t&&this.bind(t),this.step(),this.reset()},t.prototype.yb=function(t,e){null==e&&(e=this.Oa,this.Oa+=1);var r=G(t=je(t));this.gb.push(r),this.db.handleError(h(this.Pa,e,r,t.length-1,0))},t.prototype.tb=function(t,e){null==e&&(e=this.Oa,this.Oa+=1);var r=G(t);this.gb.push(r),this.db.handleError(f(this.Pa,e,r,t.length,0))},t.prototype.xb=function(t,e){null==e&&(e=this.Oa,this.Oa+=1),this.db.handleError((t===(0|t)?d:p)(this.Pa,e,t))},t.prototype.wb=function(t){null==t&&(t=this.Oa,this.Oa+=1),f(this.Pa,t,0,0,0)},t.prototype.mb=function(t,e){switch(null==e&&(e=this.Oa,this.Oa+=1),typeof t){case"string":return void this.yb(t,e);case"number":case"boolean":return void this.xb(t+0,e);case"object":if(null===t)return void this.wb(e);if(null!=t.length)return void this.tb(t,e)}throw"Wrong API use : tried to bind a value of an unknown type ("+t+")."},t.prototype.vb=function(t){var e=this;return Object.keys(t).forEach(function(r){var n=y(e.Pa,r);0!==n&&e.mb(t[r],n)}),!0},t.prototype.ub=function(t){for(var e=0;e<t.length;)this.mb(t[e],e+1),e+=1;return!0},t.prototype.reset=function(){return 0===A(this.Pa)&&0===k(this.Pa)},t.prototype.freemem=function(){for(var t;void 0!==(t=this.gb.pop());)qe(t)},t.prototype.free=function(){var t=0===N(this.Pa);return delete this.db.eb[this.Pa],this.Pa=0,t},e.prototype.run=function(t,e){if(!this.db)throw"Database closed";if(e){t=this.prepare(t,e);try{t.step()}finally{t.free()}}else this.handleError(a(this.db,t,0,0,r));return this},e.prototype.exec=function(e,n){if(!this.db)throw"Database closed";var i=Ze(),o=null;try{var a=$(e)+1,s=Ke(a);K(e,z,s,a);var u=s,l=Ke(4);for(e=[];0!==L(u,"i8");){C(r),C(l),this.handleError(c(this.db,u,-1,r,l));var h=L(r,"i32");if(u=L(l,"i32"),0!==h){for(a=null,o=new t(h,this),null!=n&&o.bind(n);o.step();)null===a&&(a={columns:o.getColumnNames(),values:[]},e.push(a)),a.values.push(o.get());o.free()}}return e}catch(t){throw o&&o.free(),t}finally{He(i)}},e.prototype.each=function(t,e,r,n){"function"==typeof e&&(n=r,r=e,e=void 0),t=this.prepare(t,e);try{for(;t.step();)r(t.getAsObject())}finally{t.free()}if("function"==typeof n)return n()},e.prototype.prepare=function(e,n){if(C(r),this.handleError(l(this.db,e,-1,r,0)),0===(e=L(r,"i32")))throw"Nothing to prepare";var i=new t(e,this);return null!=n&&i.bind(n),this.eb[e]=i},e.prototype.export=function(){Object.values(this.eb).forEach(function(t){t.free()}),Object.values(this.Va).forEach(P),this.Va={},this.handleError(o(this.db));var t=function(t){var e={encoding:"binary"};if((e=e||{}).flags=e.flags||"r",e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw Error('Invalid encoding type "'+e.encoding+'"');var r,n=de(t,e.flags);t=le(t).size;var i=new Uint8Array(t);return me(n,i,0,t,0),"utf8"===e.encoding?r=Z(i,0):"binary"===e.encoding&&(r=i),ye(n),r}(this.filename);return this.handleError(i(this.filename,r)),this.db=L(r,"i32"),t},e.prototype.close=function(){null!==this.db&&(Object.values(this.eb).forEach(function(t){t.free()}),Object.values(this.Va).forEach(P),this.Va={},this.handleError(o(this.db)),se("/"+this.filename),this.db=null)},e.prototype.handleError=function(t){if(0===t)return null;throw t=m(this.db),Error(t)},e.prototype.getRowsModified=function(){return s(this.db)},e.prototype.create_function=function(t,e){Object.prototype.hasOwnProperty.call(this.Va,t)&&(I(this.Va[t]),delete this.Va[t]);var r=function(t){var e=R;if(!O){O=new WeakMap;for(var r=0;r<e.length;r++){var n=e.get(r);n&&O.set(n,r)}}if(O.has(t))t=O.get(t);else{if(M.length)r=M.pop();else{r=e.length;try{e.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}}try{e.set(r,t)}catch(a){if(!(a instanceof TypeError))throw a;if("function"==typeof WebAssembly.Function){var i={i:"i32",j:"i64",f:"f32",d:"f64"},o={parameters:[],results:[]};for(n=1;4>n;++n)o.parameters.push(i["viii"[n]]);n=new WebAssembly.Function(o,t)}else{for(o={i:127,j:126,f:125,d:124},(i=[1,0,1,96]).push(3),n=0;3>n;++n)i.push(o["iii"[n]]);i.push(0),i[1]=i.length-2,n=new Uint8Array([0,97,115,109,1,0,0,0].concat(i,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),n=new WebAssembly.Module(n),n=new WebAssembly.Instance(n,{e:{f:t}}).exports.f}e.set(r,n)}O.set(t,r),t=r}return t}(function(t,r,n){for(var i,o=[],a=0;a<r;a+=1){var s=L(n+4*a,"i32"),u=j(s);if(1===u||2===u)s=q(s);else if(3===u)s=B(s);else if(4===u){s=D(u=s),u=U(u);for(var l=new Uint8Array(s),c=0;c<s;c+=1)l[c]=z[u+c];s=l}else s=null;o.push(s)}try{i=e.apply(null,o)}catch(e){return void J(t,e,-1)}switch(typeof i){case"boolean":H(t,i?1:0);break;case"number":V(t,i);break;case"string":W(t,i,-1,-1);break;case"object":null===i?Y(t):null!=i.length?(r=G(i),X(t,r,i.length,-1),qe(r)):J(t,"Wrong API use : tried to return a value of an unknown type ("+i+").",-1);break;default:Y(t)}});return this.Va[t]=r,this.handleError(F(this.db,t,e.length,1,0,r,0,0,0)),this},u.Database=e};var h,f={};for(h in u)u.hasOwnProperty(h)&&(f[h]=u[h]);var p,d="./this.program",y=!1,g=!1,m=!1;y="object"==typeof window,g="function"==typeof importScripts,m="object"==typeof e&&"object"==typeof e.versions&&"string"==typeof e.versions.node,p=!y&&!m&&!g;var v,_,b,w,x="";m?(x=g?r(52).dirname(x)+"/":n+"/",v=function(t,e){return b||(b=r(136)),w||(w=r(52)),t=w.normalize(t),b.readFileSync(t,e?null:"utf8")},_=function(t){return(t=v(t,!0)).buffer||(t=new Uint8Array(t)),N(t.buffer),t},1<e.argv.length&&(d=e.argv[1].replace(/\\/g,"/")),e.argv.slice(2),void 0!==t&&(t.exports=u),u.inspect=function(){return"[Emscripten Module object]"}):p?("undefined"!=typeof read&&(v=function(t){return read(t)}),_=function(t){return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(N("object"==typeof(t=read(t,"binary"))),t)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(y||g)&&(g?x=self.location.href:document.currentScript&&(x=document.currentScript.src),x=0!==x.indexOf("blob:")?x.substr(0,x.lastIndexOf("/")+1):"",v=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},g&&(_=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var E=u.print||console.log.bind(console),S=u.printErr||console.warn.bind(console);for(h in f)f.hasOwnProperty(h)&&(u[h]=f[h]);f=null,u.thisProgram&&(d=u.thisProgram);var O,T,M=[];function I(t){O.delete(R.get(t)),M.push(t)}function P(t){I(t)}function C(t){var e="i32";switch("*"===e.charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":z[t>>0]=0;break;case"i16":q[t>>1]=0;break;case"i32":V[t>>2]=0;break;case"i64":pt=[0,(ft=0,1<=+Math.abs(ft)?0<ft?(0|Math.min(+Math.floor(ft/4294967296),4294967295))>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)],V[t>>2]=pt[0],V[t+4>>2]=pt[1];break;case"float":Y[t>>2]=0;break;case"double":W[t>>3]=0;break;default:lt("invalid type for setValue: "+e)}}function L(t,e){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return z[t>>0];case"i16":return q[t>>1];case"i32":case"i64":return V[t>>2];case"float":return Y[t>>2];case"double":return W[t>>3];default:lt("invalid type for getValue: "+e)}return null}u.wasmBinary&&(T=u.wasmBinary),u.noExitRuntime&&u.noExitRuntime,"object"!=typeof WebAssembly&&lt("no native wasm support detected");var k,R,A=!1;function N(t,e){t||lt("Assertion failed: "+e)}function F(t){var e=u["_"+t];return N(e,"Cannot call unknown function "+t+", make sure it is exported"),e}var j=0,D=1;function G(t){var e=j==D?Ke(t.length):Ue(t.length);return t.subarray||t.slice?U.set(t,e):U.set(new Uint8Array(t),e),e}var B,z,U,q,V,Y,W,X="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Z(t,e,r){var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.subarray&&X)return X.decode(t.subarray(e,r));for(n="";e<r;){var i=t[e++];if(128&i){var o=63&t[e++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&t[e++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}return n}function H(t){return t?Z(U,t,void 0):""}function K(t,e,r,n){if(!(0<n))return 0;var i=r;n=r+n-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(127>=a){if(r>=n)break;e[r++]=a}else{if(2047>=a){if(r+1>=n)break;e[r++]=192|a>>6}else{if(65535>=a){if(r+2>=n)break;e[r++]=224|a>>12}else{if(r+3>=n)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63}e[r++]=128|a>>6&63}e[r++]=128|63&a}}return e[r]=0,r-i}function $(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);55296<=n&&57343>=n&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),127>=n?++e:e=2047>=n?e+2:65535>=n?e+3:e+4}return e}function J(t){var e=$(t)+1,r=Ue(e);return r&&K(t,z,r,e),r}function Q(t){B=t,u.HEAP8=z=new Int8Array(t),u.HEAP16=q=new Int16Array(t),u.HEAP32=V=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=new Uint32Array(t),u.HEAPF32=Y=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}var tt=u.INITIAL_MEMORY||16777216;(k=u.wasmMemory?u.wasmMemory:new WebAssembly.Memory({initial:tt/65536,maximum:32768}))&&(B=k.buffer),tt=B.byteLength,Q(B);var et=[],rt=[],nt=[],it=[];function ot(){var t=u.preRun.shift();et.unshift(t)}var at=0,st=null,ut=null;function lt(t){throw u.onAbort&&u.onAbort(t),S(t),A=!0,new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}function ct(t){var e=yt;return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function ht(){return ct("data:application/octet-stream;base64,")}u.preloadedImages={},u.preloadedAudios={};var ft,pt,dt,yt="sql-wasm.wasm";if(!ht()){var gt=yt;yt=u.locateFile?u.locateFile(gt,x):x+gt}function mt(){try{if(T)return new Uint8Array(T);if(_)return _(yt);throw"both async and sync fetching of the wasm failed"}catch(t){lt(t)}}function vt(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e(u);else{var r=e.Ab;"number"==typeof r?void 0===e.hb?R.get(r)():R.get(r)(e.hb):r(void 0===e.hb?null:e.hb)}}}function _t(t,e){for(var r=0,n=t.length-1;0<=n;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t}function bt(t){var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=_t(t.split("/").filter(function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function wt(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."}function xt(t){if("/"===t)return"/";var e=(t=(t=bt(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)}function Et(t){V[ze()>>2]=t}function St(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){if("string"!=typeof(e=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=_t(t.split("/").filter(function(t){return!!t}),!e).join("/"))||"."}var Ot=[];function Tt(t,e){Ot[t]={input:[],output:[],$a:e},ee(t,Mt)}var Mt={open:function(t){var e=Ot[t.node.rdev];if(!e)throw new Dt(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.$a.flush(t.tty)},flush:function(t){t.tty.$a.flush(t.tty)},read:function(t,e,r,n){if(!t.tty||!t.tty.$a.qb)throw new Dt(60);for(var i=0,o=0;o<n;o++){try{var a=t.tty.$a.qb(t.tty)}catch(t){throw new Dt(29)}if(void 0===a&&0===i)throw new Dt(6);if(null==a)break;i++,e[r+o]=a}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,n){if(!t.tty||!t.tty.$a.jb)throw new Dt(60);try{for(var i=0;i<n;i++)t.tty.$a.jb(t.tty,e[r+i])}catch(t){throw new Dt(29)}return n&&(t.node.timestamp=Date.now()),i}},It={qb:function(t){if(!t.input.length){var r=null;if(m){var n=i.sb?i.sb(256):new i(256),o=0;try{o=b.readSync(e.stdin.fd,n,0,256,null)}catch(t){if(-1==t.toString().indexOf("EOF"))throw t;o=0}r=0<o?n.slice(0,o).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&(null!==(r=readline())&&(r+="\n"));if(!r)return null;t.input=je(r,!0)}return t.input.shift()},jb:function(t,e){null===e||10===e?(E(Z(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(E(Z(t.output,0)),t.output=[])}},Pt={jb:function(t,e){null===e||10===e?(S(Z(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(S(Z(t.output,0)),t.output=[])}},Ct={Ta:null,Ua:function(){return Ct.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Dt(63);return Ct.Ta||(Ct.Ta={dir:{node:{Sa:Ct.La.Sa,Ra:Ct.La.Ra,lookup:Ct.La.lookup,ab:Ct.La.ab,rename:Ct.La.rename,unlink:Ct.La.unlink,rmdir:Ct.La.rmdir,readdir:Ct.La.readdir,symlink:Ct.La.symlink},stream:{Xa:Ct.Ma.Xa}},file:{node:{Sa:Ct.La.Sa,Ra:Ct.La.Ra},stream:{Xa:Ct.Ma.Xa,read:Ct.Ma.read,write:Ct.Ma.write,lb:Ct.Ma.lb,bb:Ct.Ma.bb,cb:Ct.Ma.cb}},link:{node:{Sa:Ct.La.Sa,Ra:Ct.La.Ra,readlink:Ct.La.readlink},stream:{}},nb:{node:{Sa:Ct.La.Sa,Ra:Ct.La.Ra},stream:te}}),Wt((r=Yt(t,e,r,n)).mode)?(r.La=Ct.Ta.dir.node,r.Ma=Ct.Ta.dir.stream,r.Ka={}):32768==(61440&r.mode)?(r.La=Ct.Ta.file.node,r.Ma=Ct.Ta.file.stream,r.Qa=0,r.Ka=null):40960==(61440&r.mode)?(r.La=Ct.Ta.link.node,r.Ma=Ct.Ta.link.stream):8192==(61440&r.mode)&&(r.La=Ct.Ta.nb.node,r.Ma=Ct.Ta.nb.stream),r.timestamp=Date.now(),t&&(t.Ka[e]=r),r},Lb:function(t){if(t.Ka&&t.Ka.subarray){for(var e=[],r=0;r<t.Qa;++r)e.push(t.Ka[r]);return e}return t.Ka},Mb:function(t){return t.Ka?t.Ka.subarray?t.Ka.subarray(0,t.Qa):new Uint8Array(t.Ka):new Uint8Array(0)},ob:function(t,e){var r=t.Ka?t.Ka.length:0;r>=e||(e=Math.max(e,r*(1048576>r?2:1.125)>>>0),0!=r&&(e=Math.max(e,256)),r=t.Ka,t.Ka=new Uint8Array(e),0<t.Qa&&t.Ka.set(r.subarray(0,t.Qa),0))},Ib:function(t,e){if(t.Qa!=e)if(0==e)t.Ka=null,t.Qa=0;else{if(!t.Ka||t.Ka.subarray){var r=t.Ka;t.Ka=new Uint8Array(e),r&&t.Ka.set(r.subarray(0,Math.min(e,t.Qa)))}else if(t.Ka||(t.Ka=[]),t.Ka.length>e)t.Ka.length=e;else for(;t.Ka.length<e;)t.Ka.push(0);t.Qa=e}},La:{Sa:function(t){var e={};return e.dev=8192==(61440&t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Wt(t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.Qa:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.zb=4096,e.blocks=Math.ceil(e.size/e.zb),e},Ra:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Ct.Ib(t,e.size)},lookup:function(){throw Gt[44]},ab:function(t,e,r,n){return Ct.createNode(t,e,r,n)},rename:function(t,e,r){if(Wt(t.mode)){try{var n=Vt(e,r)}catch(t){}if(n)for(var i in n.Ka)throw new Dt(55)}delete t.parent.Ka[t.name],t.name=r,e.Ka[r]=t,t.parent=e},unlink:function(t,e){delete t.Ka[e]},rmdir:function(t,e){var r,n=Vt(t,e);for(r in n.Ka)throw new Dt(55);delete t.Ka[e]},readdir:function(t){var e,r=[".",".."];for(e in t.Ka)t.Ka.hasOwnProperty(e)&&r.push(e);return r},symlink:function(t,e,r){return(t=Ct.createNode(t,e,41471,0)).link=r,t},readlink:function(t){if(40960!=(61440&t.mode))throw new Dt(28);return t.link}},Ma:{read:function(t,e,r,n,i){var o=t.node.Ka;if(i>=t.node.Qa)return 0;if(8<(t=Math.min(t.node.Qa-i,n))&&o.subarray)e.set(o.subarray(i,i+t),r);else for(n=0;n<t;n++)e[r+n]=o[i+n];return t},write:function(t,e,r,n,i,o){if(e.buffer===z.buffer&&(o=!1),!n)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.Ka||t.Ka.subarray)){if(o)return t.Ka=e.subarray(r,r+n),t.Qa=n;if(0===t.Qa&&0===i)return t.Ka=e.slice(r,r+n),t.Qa=n;if(i+n<=t.Qa)return t.Ka.set(e.subarray(r,r+n),i),n}if(Ct.ob(t,i+n),t.Ka.subarray&&e.subarray)t.Ka.set(e.subarray(r,r+n),i);else for(o=0;o<n;o++)t.Ka[i+o]=e[r+o];return t.Qa=Math.max(t.Qa,i+n),n},Xa:function(t,e,r){if(1===r?e+=t.position:2===r&&32768==(61440&t.node.mode)&&(e+=t.node.Qa),0>e)throw new Dt(28);return e},lb:function(t,e,r){Ct.ob(t.node,e+r),t.node.Qa=Math.max(t.node.Qa,e+r)},bb:function(t,e,r,n,i,o){if(N(0===e),32768!=(61440&t.node.mode))throw new Dt(43);if(t=t.node.Ka,2&o||t.buffer!==B){for((0<n||n+r<t.length)&&(t=t.subarray?t.subarray(n,n+r):Array.prototype.slice.call(t,n,n+r)),n=!0,o=16384*Math.ceil(r/16384),e=Ue(o);r<o;)z[e+r++]=0;if(!(r=e))throw new Dt(48);z.set(t,r)}else n=!1,r=t.byteOffset;return{Hb:r,fb:n}},cb:function(t,e,r,n,i){if(32768!=(61440&t.node.mode))throw new Dt(43);return 2&i?0:(Ct.Ma.write(t,e,0,n,r,!1),0)}}},Lt=null,kt={},Rt=[],At=1,Nt=null,Ft=!0,jt={},Dt=null,Gt={};function Bt(t,e){if(e=e||{},!(t=St("/",t)))return{path:"",node:null};var r,n={pb:!0,kb:0};for(r in n)void 0===e[r]&&(e[r]=n[r]);if(8<e.kb)throw new Dt(32);t=_t(t.split("/").filter(function(t){return!!t}),!1);var i=Lt;for(n="/",r=0;r<t.length;r++){var o=r===t.length-1;if(o&&e.parent)break;if(i=Vt(i,t[r]),n=bt(n+"/"+t[r]),i.Ya&&(!o||o&&e.pb)&&(i=i.Ya.root),!o||e.Wa)for(o=0;40960==(61440&i.mode);)if(i=ue(n),i=Bt(n=St(wt(n),i),{kb:e.kb}).node,40<o++)throw new Dt(32)}return{path:n,node:i}}function zt(t){for(var e;;){if(t===t.parent)return t=t.Ua.rb,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}}function Ut(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%Nt.length}function qt(t){var e=Ut(t.parent.id,t.name);if(Nt[e]===t)Nt[e]=t.Za;else for(e=Nt[e];e;){if(e.Za===t){e.Za=t.Za;break}e=e.Za}}function Vt(t,e){var r;if(r=(r=Ht(t,"x"))?r:t.La.lookup?0:2)throw new Dt(r,t);for(r=Nt[Ut(t.id,e)];r;r=r.Za){var n=r.name;if(r.parent.id===t.id&&n===e)return r}return t.La.lookup(t,e)}function Yt(t,e,r,n){return e=Ut((t=new Fe(t,e,r,n)).parent.id,t.name),t.Za=Nt[e],Nt[e]=t}function Wt(t){return 16384==(61440&t)}var Xt={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Zt(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e}function Ht(t,e){return Ft?0:(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2}function Kt(t,e){try{return Vt(t,e),20}catch(t){}return Ht(t,"wx")}function $t(t,e,r){try{var n=Vt(t,e)}catch(t){return t.Na}if(t=Ht(t,"wx"))return t;if(r){if(!Wt(n.mode))return 54;if(n===n.parent||"/"===zt(n))return 10}else if(Wt(n.mode))return 31;return 0}function Jt(t,e){Ee||((Ee=function(){}).prototype={});var r,n=new Ee;for(r in t)n[r]=t[r];return t=n,e=function(t){for(t=t||0;t<=4096;t++)if(!Rt[t])return t;throw new Dt(33)}(e),t.fd=e,Rt[e]=t}var Qt,te={open:function(t){t.Ma=kt[t.node.rdev].Ma,t.Ma.open&&t.Ma.open(t)},Xa:function(){throw new Dt(70)}};function ee(t,e){kt[t]={Ma:e}}function re(t,e){var r="/"===e,n=!e;if(r&&Lt)throw new Dt(10);if(!r&&!n){var i=Bt(e,{pb:!1});if(e=i.path,(i=i.node).Ya)throw new Dt(10);if(!Wt(i.mode))throw new Dt(54)}e={type:t,Nb:{},rb:e,Fb:[]},(t=t.Ua(e)).Ua=e,e.root=t,r?Lt=t:i&&(i.Ya=e,i.Ua&&i.Ua.Fb.push(e))}function ne(t,e,r){var n=Bt(t,{parent:!0}).node;if(!(t=xt(t))||"."===t||".."===t)throw new Dt(28);var i=Kt(n,t);if(i)throw new Dt(i);if(!n.La.ab)throw new Dt(63);return n.La.ab(n,t,e,r)}function ie(t,e){ne(t,1023&(void 0!==e?e:511)|16384,0)}function oe(t,e,r){void 0===r&&(r=e,e=438),ne(t,8192|e,r)}function ae(t,e){if(!St(t))throw new Dt(44);var r=Bt(e,{parent:!0}).node;if(!r)throw new Dt(44);var n=Kt(r,e=xt(e));if(n)throw new Dt(n);if(!r.La.symlink)throw new Dt(63);r.La.symlink(r,e,t)}function se(t){var e=Bt(t,{parent:!0}).node,r=xt(t),n=Vt(e,r),i=$t(e,r,!1);if(i)throw new Dt(i);if(!e.La.unlink)throw new Dt(63);if(n.Ya)throw new Dt(10);try{jt.willDeletePath&&jt.willDeletePath(t)}catch(e){S("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.La.unlink(e,r),qt(n);try{jt.onDeletePath&&jt.onDeletePath(t)}catch(e){S("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}}function ue(t){if(!(t=Bt(t).node))throw new Dt(44);if(!t.La.readlink)throw new Dt(28);return St(zt(t.parent),t.La.readlink(t))}function le(t,e){if(!(t=Bt(t,{Wa:!e}).node))throw new Dt(44);if(!t.La.Sa)throw new Dt(63);return t.La.Sa(t)}function ce(t){return le(t,!0)}function he(t,e){var r;if(!(r="string"==typeof t?Bt(t,{Wa:!0}).node:t).La.Ra)throw new Dt(63);r.La.Ra(r,{mode:4095&e|-4096&r.mode,timestamp:Date.now()})}function fe(t){var e;if(!(e="string"==typeof t?Bt(t,{Wa:!0}).node:t).La.Ra)throw new Dt(63);e.La.Ra(e,{timestamp:Date.now()})}function pe(t,e){if(0>e)throw new Dt(28);var r;if(!(r="string"==typeof t?Bt(t,{Wa:!0}).node:t).La.Ra)throw new Dt(63);if(Wt(r.mode))throw new Dt(31);if(32768!=(61440&r.mode))throw new Dt(28);if(t=Ht(r,"w"))throw new Dt(t);r.La.Ra(r,{size:e,timestamp:Date.now()})}function de(t,e,r,n){if(""===t)throw new Dt(44);if("string"==typeof e){var i=Xt[e];if(void 0===i)throw Error("Unknown file open mode: "+e);e=i}if(r=64&e?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)var o=t;else{t=bt(t);try{o=Bt(t,{Wa:!(131072&e)}).node}catch(t){}}if(i=!1,64&e)if(o){if(128&e)throw new Dt(20)}else o=ne(t,r,0),i=!0;if(!o)throw new Dt(44);if(8192==(61440&o.mode)&&(e&=-513),65536&e&&!Wt(o.mode))throw new Dt(54);if(!i&&(r=o?40960==(61440&o.mode)?32:Wt(o.mode)&&("r"!==Zt(e)||512&e)?31:Ht(o,Zt(e)):44))throw new Dt(r);512&e&&pe(o,0),e&=-131713,(n=Jt({node:o,path:zt(o),flags:e,seekable:!0,position:0,Ma:o.Ma,Kb:[],error:!1},n)).Ma.open&&n.Ma.open(n),!u.logReadFiles||1&e||(Se||(Se={}),t in Se||(Se[t]=1,S("FS.trackingDelegate error on read file: "+t)));try{jt.onOpenFile&&(o=0,1!=(2097155&e)&&(o|=1),0!=(2097155&e)&&(o|=2),jt.onOpenFile(t,o))}catch(e){S("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return n}function ye(t){if(null===t.fd)throw new Dt(8);t.ib&&(t.ib=null);try{t.Ma.close&&t.Ma.close(t)}catch(t){throw t}finally{Rt[t.fd]=null}t.fd=null}function ge(t,e,r){if(null===t.fd)throw new Dt(8);if(!t.seekable||!t.Ma.Xa)throw new Dt(70);if(0!=r&&1!=r&&2!=r)throw new Dt(28);t.position=t.Ma.Xa(t,e,r),t.Kb=[]}function me(t,e,r,n,i){if(0>n||0>i)throw new Dt(28);if(null===t.fd)throw new Dt(8);if(1==(2097155&t.flags))throw new Dt(8);if(Wt(t.node.mode))throw new Dt(31);if(!t.Ma.read)throw new Dt(28);var o=void 0!==i;if(o){if(!t.seekable)throw new Dt(70)}else i=t.position;return e=t.Ma.read(t,e,r,n,i),o||(t.position+=e),e}function ve(t,e,r,n,i,o){if(0>n||0>i)throw new Dt(28);if(null===t.fd)throw new Dt(8);if(0==(2097155&t.flags))throw new Dt(8);if(Wt(t.node.mode))throw new Dt(31);if(!t.Ma.write)throw new Dt(28);t.seekable&&1024&t.flags&&ge(t,0,2);var a=void 0!==i;if(a){if(!t.seekable)throw new Dt(70)}else i=t.position;e=t.Ma.write(t,e,r,n,i,o),a||(t.position+=e);try{t.path&&jt.onWriteToFile&&jt.onWriteToFile(t.path)}catch(e){S("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+e.message)}return e}function _e(){Dt||((Dt=function(t,e){this.node=e,this.Jb=function(t){this.Na=t},this.Jb(t),this.message="FS error"}).prototype=Error(),Dt.prototype.constructor=Dt,[44].forEach(function(t){Gt[t]=new Dt(t),Gt[t].stack="<generic error, no stack>"}))}function be(t,e){var r=0;return t&&(r|=365),e&&(r|=146),r}function we(t,e,r){t=bt("/dev/"+t);var n=be(!!e,!!r);xe||(xe=64);var i=xe++<<8|0;ee(i,{open:function(t){t.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(t,r,n,i){for(var o=0,a=0;a<i;a++){try{var s=e()}catch(t){throw new Dt(29)}if(void 0===s&&0===o)throw new Dt(6);if(null==s)break;o++,r[n+a]=s}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,i){for(var o=0;o<i;o++)try{r(e[n+o])}catch(t){throw new Dt(29)}return i&&(t.node.timestamp=Date.now()),o}}),oe(t,n,i)}var xe,Ee,Se,Oe={},Te={};function Me(t,e,r){try{var n=t(e)}catch(t){if(t&&t.node&&bt(e)!==bt(zt(t.node)))return-54;throw t}return V[r>>2]=n.dev,V[r+4>>2]=0,V[r+8>>2]=n.ino,V[r+12>>2]=n.mode,V[r+16>>2]=n.nlink,V[r+20>>2]=n.uid,V[r+24>>2]=n.gid,V[r+28>>2]=n.rdev,V[r+32>>2]=0,pt=[n.size>>>0,(ft=n.size,1<=+Math.abs(ft)?0<ft?(0|Math.min(+Math.floor(ft/4294967296),4294967295))>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)],V[r+40>>2]=pt[0],V[r+44>>2]=pt[1],V[r+48>>2]=4096,V[r+52>>2]=n.blocks,V[r+56>>2]=n.atime.getTime()/1e3|0,V[r+60>>2]=0,V[r+64>>2]=n.mtime.getTime()/1e3|0,V[r+68>>2]=0,V[r+72>>2]=n.ctime.getTime()/1e3|0,V[r+76>>2]=0,pt=[n.ino>>>0,(ft=n.ino,1<=+Math.abs(ft)?0<ft?(0|Math.min(+Math.floor(ft/4294967296),4294967295))>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)],V[r+80>>2]=pt[0],V[r+84>>2]=pt[1],0}var Ie=void 0;function Pe(){return V[(Ie+=4)-4>>2]}function Ce(t){if(!(t=Rt[t]))throw new Dt(8);return t}var Le,ke,Re={};function Ae(){if(!Le){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(t in Re)e[t]=Re[t];var r=[];for(t in e)r.push(t+"="+e[t]);Le=r}return Le}function Ne(t){for(var e=ke();ke()-e<t/1e3;);}function Fe(t,e,r,n){t||(t=this),this.parent=t,this.Ua=t.Ua,this.Ya=null,this.id=At++,this.name=e,this.mode=r,this.La={},this.Ma={},this.rdev=n}function je(t,e){var r=Array($(t)+1);return t=K(t,r,0,r.length),e&&(r.length=t),r}ke=m?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()},u._usleep=Ne,Object.defineProperties(Fe.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),_e(),Nt=Array(4096),re(Ct,"/"),ie("/tmp"),ie("/home"),ie("/home/web_user"),function(){ie("/dev"),ee(259,{read:function(){return 0},write:function(t,e,r,n){return n}}),oe("/dev/null",259),Tt(1280,It),Tt(1536,Pt),oe("/dev/tty",1280),oe("/dev/tty1",1536);var t=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(m)try{var e=r(137);return function(){return e.randomBytes(1)[0]}}catch(t){}return function(){lt("randomDevice")}}();we("random",t),we("urandom",t),ie("/dev/shm"),ie("/dev/shm/tmp")}(),ie("/proc"),ie("/proc/self"),ie("/proc/self/fd"),re({Ua:function(){var t=Yt("/proc/self","fd",16895,73);return t.La={lookup:function(t,e){var r=Rt[+e];if(!r)throw new Dt(8);return(t={parent:null,Ua:{rb:"fake"},La:{readlink:function(){return r.path}}}).parent=t}},t}},"/proc/self/fd"),rt.push({Ab:function(){Ge()}});var De={b:function(t,e,r,n){lt("Assertion failed: "+H(t)+", at: "+[e?H(e):"unknown filename",r,n?H(n):"unknown function"])},q:function(t,e){!function(){function t(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}if(!dt){dt=!0,V[Xe()>>2]=60*(new Date).getTimezoneOffset();var e=(new Date).getFullYear(),r=new Date(e,0,1);e=new Date(e,6,1),V[We()>>2]=Number(r.getTimezoneOffset()!=e.getTimezoneOffset());var n=t(r),i=t(e);n=J(n),i=J(i),e.getTimezoneOffset()<r.getTimezoneOffset()?(V[Ye()>>2]=n,V[Ye()+4>>2]=i):(V[Ye()>>2]=i,V[Ye()+4>>2]=n)}}(),t=new Date(1e3*V[t>>2]),V[e>>2]=t.getSeconds(),V[e+4>>2]=t.getMinutes(),V[e+8>>2]=t.getHours(),V[e+12>>2]=t.getDate(),V[e+16>>2]=t.getMonth(),V[e+20>>2]=t.getFullYear()-1900,V[e+24>>2]=t.getDay();var r=new Date(t.getFullYear(),0,1);V[e+28>>2]=(t.getTime()-r.getTime())/864e5|0,V[e+36>>2]=-60*t.getTimezoneOffset();var n=new Date(t.getFullYear(),6,1).getTimezoneOffset();return t=0|(n!=(r=r.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(r,n)),V[e+32>>2]=t,t=V[Ye()+(t?4:0)>>2],V[e+40>>2]=t,e},I:function(t,e){try{var r;if(t=H(t),-8&e)var n=-28;else(r=Bt(t,{Wa:!0}).node)?(t="",4&e&&(t+="r"),2&e&&(t+="w"),1&e&&(t+="x"),n=t&&Ht(r,t)?-2:0):n=-44;return n}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},t:function(t,e){try{return he(t=H(t),e),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},z:function(t){try{return fe(t=H(t)),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},u:function(t,e){try{var r=Rt[t];if(!r)throw new Dt(8);return he(r.node,e),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},B:function(t){try{var e=Rt[t];if(!e)throw new Dt(8);return fe(e.node),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},c:function(t,e,r){Ie=r;try{var n=Ce(t);switch(e){case 0:var i=Pe();return 0>i?-28:de(n.path,n.flags,0,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=Pe(),n.flags|=i,0;case 12:return i=Pe(),q[i+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return Et(28),-1;default:return-28}}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},w:function(t,e){try{return Me(le,Ce(t).path,e)}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},F:function(t,e,r){try{var n=Rt[t];if(!n)throw new Dt(8);if(0==(2097155&n.flags))throw new Dt(28);return pe(n.node,r),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},J:function(t,e){try{return 0===e?-28:e<$("/")+1?-68:(K("/",U,t,e),t)}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},D:function(){return 0},e:function(){return 42},v:function(t,e){try{return Me(ce,t=H(t),e)}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},s:function(t,e){try{return"/"===(t=bt(t=H(t)))[t.length-1]&&(t=t.substr(0,t.length-1)),ie(t,e),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},j:function(t,e,r,n,i,o){try{t:{o<<=12;var a=!1;if(0!=(16&n)&&0!=t%16384)var s=-28;else{if(0!=(32&n)){var u=$e(16384,e);if(!u){s=-48;break t}Be(u,0,e),a=!0}else{var l=Rt[i];if(!l){s=-8;break t}var c=o;if(0!=(2&r)&&0==(2&n)&&2!=(2097155&l.flags))throw new Dt(2);if(1==(2097155&l.flags))throw new Dt(2);if(!l.Ma.bb)throw new Dt(43);var h=l.Ma.bb(l,t,e,c,r,n);u=h.Hb,a=h.fb}Te[u]={Eb:u,Db:e,fb:a,fd:i,Gb:r,flags:n,offset:o},s=u}}return s}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},k:function(t,e){try{if(-1==(0|t)||0===e)var r=-28;else{var n=Te[t];if(n&&e===n.Db){var i=Rt[n.fd];if(2&n.Gb){var o=n.flags,a=n.offset,s=U.slice(t,t+e);i&&i.Ma.cb&&i.Ma.cb(i,s,a,e,o)}Te[t]=null,n.fb&&qe(n.Eb)}r=0}return r}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},i:function(t,e,r){Ie=r;try{return de(H(t),e,Pe()).fd}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},x:function(t,e,r){try{return me(Ce(t),z,e,r)}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},C:function(t,e,r){try{if(t=H(t),0>=r)var n=-28;else{var i=ue(t),o=Math.min(r,$(i)),a=z[e+o];K(i,U,e,r+1),z[e+o]=a,n=o}return n}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},H:function(t){try{var e=Bt(t=H(t),{parent:!0}).node,r=xt(t),n=Vt(e,r),i=$t(e,r,!0);if(i)throw new Dt(i);if(!e.La.rmdir)throw new Dt(63);if(n.Ya)throw new Dt(10);try{jt.willDeletePath&&jt.willDeletePath(t)}catch(e){S("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.La.rmdir(e,r),qt(n);try{jt.onDeletePath&&jt.onDeletePath(t)}catch(e){S("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}return 0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},g:function(t,e){try{return Me(le,t=H(t),e)}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},G:function(t){try{return se(t=H(t)),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),-t.Na}},m:function(t,e,r){U.copyWithin(t,e,e+r)},d:function(t){t>>>=0;var e=U.length;if(2147483648<t)return!1;for(var r=1;4>=r;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296),0<(n=Math.max(16777216,t,n))%65536&&(n+=65536-n%65536);t:{try{k.grow(Math.min(2147483648,n)-B.byteLength+65535>>>16),Q(k.buffer);var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},o:function(t,e){var r=0;return Ae().forEach(function(n,i){var o=e+r;for(i=V[t+4*i>>2]=o,o=0;o<n.length;++o)z[i++>>0]=n.charCodeAt(o);z[i>>0]=0,r+=n.length+1}),0},p:function(t,e){var r=Ae();V[t>>2]=r.length;var n=0;return r.forEach(function(t){n+=t.length+1}),V[e>>2]=n,0},f:function(t){try{return ye(Ce(t)),0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),t.Na}},n:function(t,e){try{var r=Ce(t);return z[e>>0]=r.tty?2:Wt(r.mode)?3:40960==(61440&r.mode)?7:4,0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),t.Na}},l:function(t,e,r,n,i){try{var o=Ce(t);return-9007199254740992>=(t=4294967296*r+(e>>>0))||9007199254740992<=t?-61:(ge(o,t,n),pt=[o.position>>>0,(ft=o.position,1<=+Math.abs(ft)?0<ft?(0|Math.min(+Math.floor(ft/4294967296),4294967295))>>>0:~~+Math.ceil((ft-+(~~ft>>>0))/4294967296)>>>0:0)],V[i>>2]=pt[0],V[i+4>>2]=pt[1],o.ib&&0===t&&0===n&&(o.ib=null),0)}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),t.Na}},E:function(t){try{var e=Ce(t);return e.Ma&&e.Ma.fsync?-e.Ma.fsync(e):0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),t.Na}},y:function(t,e,r,n){try{t:{for(var i=Ce(t),o=t=0;o<r;o++){var a=ve(i,z,V[e+8*o>>2],V[e+(8*o+4)>>2],void 0);if(0>a){var s=-1;break t}t+=a}s=t}return V[n>>2]=s,0}catch(t){return void 0!==Oe&&t instanceof Dt||lt(t),t.Na}},h:function(t){var e=Date.now();return V[t>>2]=e/1e3|0,V[t+4>>2]=e%1e3*1e3|0,0},a:k,K:function(t,e){if(0===t)return Et(28),-1;var r=V[t>>2];return 0>(t=V[t+4>>2])||999999999<t||0>r?(Et(28),-1):(0!==e&&(V[e>>2]=0,V[e+4>>2]=0),Ne(1e6*r+t/1e3))},A:function(t){switch(t){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:case 79:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Et(28),-1},L:function(t){var e=Date.now()/1e3|0;return t&&(V[t>>2]=e),e},r:function(t,e){if(e){var r=1e3*V[e+8>>2];r+=V[e+12>>2]/1e3}else r=Date.now();t=H(t);try{e=r;var n=Bt(t,{Wa:!0}).node;return n.La.Ra(n,{timestamp:Math.max(e,r)}),0}catch(e){if(!((t=e)instanceof Dt)){t+=" : ";t:{if(!(n=Error()).stack){try{throw Error()}catch(t){n=t}if(!n.stack){n="(no stack trace available)";break t}}n=n.stack.toString()}throw u.extraStackTrace&&(n+="\n"+u.extraStackTrace()),n=function(t){return t.replace(/\b_Z[\w\d_]+/g,function(t){return t==t?t:t+" ["+t+"]"})}(n),t+n}return Et(t.Na),-1}}};!function(){function t(t){u.asm=t.exports,R=u.asm.M,at--,u.monitorRunDependencies&&u.monitorRunDependencies(at),0==at&&(null!==st&&(clearInterval(st),st=null),ut&&(t=ut,ut=null,t()))}function e(e){t(e.instance)}function r(t){return(T||!y&&!g||"function"!=typeof fetch||ct("file://")?Promise.resolve().then(mt):fetch(yt,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+yt+"'";return t.arrayBuffer()}).catch(function(){return mt()})).then(function(t){return WebAssembly.instantiate(t,n)}).then(t,function(t){S("failed to asynchronously prepare wasm: "+t),lt(t)})}var n={a:De};if(at++,u.monitorRunDependencies&&u.monitorRunDependencies(at),u.instantiateWasm)try{return u.instantiateWasm(n,t)}catch(t){return S("Module.instantiateWasm callback failed with error: "+t),!1}(function(){if(T||"function"!=typeof WebAssembly.instantiateStreaming||ht()||ct("file://")||"function"!=typeof fetch)return r(e);fetch(yt,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,n).then(e,function(t){return S("wasm streaming compile failed: "+t),S("falling back to ArrayBuffer instantiation"),r(e)})})})()}();var Ge=u.___wasm_call_ctors=function(){return(Ge=u.___wasm_call_ctors=u.asm.N).apply(null,arguments)},Be=u._memset=function(){return(Be=u._memset=u.asm.O).apply(null,arguments)};u._sqlite3_free=function(){return(u._sqlite3_free=u.asm.P).apply(null,arguments)};var ze=u.___errno_location=function(){return(ze=u.___errno_location=u.asm.Q).apply(null,arguments)};u._sqlite3_finalize=function(){return(u._sqlite3_finalize=u.asm.R).apply(null,arguments)},u._sqlite3_reset=function(){return(u._sqlite3_reset=u.asm.S).apply(null,arguments)},u._sqlite3_clear_bindings=function(){return(u._sqlite3_clear_bindings=u.asm.T).apply(null,arguments)},u._sqlite3_value_blob=function(){return(u._sqlite3_value_blob=u.asm.U).apply(null,arguments)},u._sqlite3_value_text=function(){return(u._sqlite3_value_text=u.asm.V).apply(null,arguments)},u._sqlite3_value_bytes=function(){return(u._sqlite3_value_bytes=u.asm.W).apply(null,arguments)},u._sqlite3_value_double=function(){return(u._sqlite3_value_double=u.asm.X).apply(null,arguments)},u._sqlite3_value_int=function(){return(u._sqlite3_value_int=u.asm.Y).apply(null,arguments)},u._sqlite3_value_type=function(){return(u._sqlite3_value_type=u.asm.Z).apply(null,arguments)},u._sqlite3_result_blob=function(){return(u._sqlite3_result_blob=u.asm._).apply(null,arguments)},u._sqlite3_result_double=function(){return(u._sqlite3_result_double=u.asm.$).apply(null,arguments)},u._sqlite3_result_error=function(){return(u._sqlite3_result_error=u.asm.aa).apply(null,arguments)},u._sqlite3_result_int=function(){return(u._sqlite3_result_int=u.asm.ba).apply(null,arguments)},u._sqlite3_result_int64=function(){return(u._sqlite3_result_int64=u.asm.ca).apply(null,arguments)},u._sqlite3_result_null=function(){return(u._sqlite3_result_null=u.asm.da).apply(null,arguments)},u._sqlite3_result_text=function(){return(u._sqlite3_result_text=u.asm.ea).apply(null,arguments)},u._sqlite3_step=function(){return(u._sqlite3_step=u.asm.fa).apply(null,arguments)},u._sqlite3_column_count=function(){return(u._sqlite3_column_count=u.asm.ga).apply(null,arguments)},u._sqlite3_data_count=function(){return(u._sqlite3_data_count=u.asm.ha).apply(null,arguments)},u._sqlite3_column_blob=function(){return(u._sqlite3_column_blob=u.asm.ia).apply(null,arguments)},u._sqlite3_column_bytes=function(){return(u._sqlite3_column_bytes=u.asm.ja).apply(null,arguments)},u._sqlite3_column_double=function(){return(u._sqlite3_column_double=u.asm.ka).apply(null,arguments)},u._sqlite3_column_text=function(){return(u._sqlite3_column_text=u.asm.la).apply(null,arguments)},u._sqlite3_column_type=function(){return(u._sqlite3_column_type=u.asm.ma).apply(null,arguments)},u._sqlite3_column_name=function(){return(u._sqlite3_column_name=u.asm.na).apply(null,arguments)},u._sqlite3_bind_blob=function(){return(u._sqlite3_bind_blob=u.asm.oa).apply(null,arguments)},u._sqlite3_bind_double=function(){return(u._sqlite3_bind_double=u.asm.pa).apply(null,arguments)},u._sqlite3_bind_int=function(){return(u._sqlite3_bind_int=u.asm.qa).apply(null,arguments)},u._sqlite3_bind_text=function(){return(u._sqlite3_bind_text=u.asm.ra).apply(null,arguments)},u._sqlite3_bind_parameter_index=function(){return(u._sqlite3_bind_parameter_index=u.asm.sa).apply(null,arguments)},u._sqlite3_errmsg=function(){return(u._sqlite3_errmsg=u.asm.ta).apply(null,arguments)},u._sqlite3_exec=function(){return(u._sqlite3_exec=u.asm.ua).apply(null,arguments)},u._sqlite3_prepare_v2=function(){return(u._sqlite3_prepare_v2=u.asm.va).apply(null,arguments)},u._sqlite3_changes=function(){return(u._sqlite3_changes=u.asm.wa).apply(null,arguments)},u._sqlite3_close_v2=function(){return(u._sqlite3_close_v2=u.asm.xa).apply(null,arguments)},u._sqlite3_create_function_v2=function(){return(u._sqlite3_create_function_v2=u.asm.ya).apply(null,arguments)},u._sqlite3_open=function(){return(u._sqlite3_open=u.asm.za).apply(null,arguments)};var Ue=u._malloc=function(){return(Ue=u._malloc=u.asm.Aa).apply(null,arguments)},qe=u._free=function(){return(qe=u._free=u.asm.Ba).apply(null,arguments)};u._RegisterExtensionFunctions=function(){return(u._RegisterExtensionFunctions=u.asm.Ca).apply(null,arguments)};var Ve,Ye=u.__get_tzname=function(){return(Ye=u.__get_tzname=u.asm.Da).apply(null,arguments)},We=u.__get_daylight=function(){return(We=u.__get_daylight=u.asm.Ea).apply(null,arguments)},Xe=u.__get_timezone=function(){return(Xe=u.__get_timezone=u.asm.Fa).apply(null,arguments)},Ze=u.stackSave=function(){return(Ze=u.stackSave=u.asm.Ga).apply(null,arguments)},He=u.stackRestore=function(){return(He=u.stackRestore=u.asm.Ha).apply(null,arguments)},Ke=u.stackAlloc=function(){return(Ke=u.stackAlloc=u.asm.Ia).apply(null,arguments)},$e=u._memalign=function(){return($e=u._memalign=u.asm.Ja).apply(null,arguments)};function Je(){function t(){if(!Ve&&(Ve=!0,u.calledRun=!0,!A)){if(u.noFSInit||Qt||(Qt=!0,_e(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?we("stdin",u.stdin):ae("/dev/tty","/dev/stdin"),u.stdout?we("stdout",null,u.stdout):ae("/dev/tty","/dev/stdout"),u.stderr?we("stderr",null,u.stderr):ae("/dev/tty1","/dev/stderr"),de("/dev/stdin","r"),de("/dev/stdout","w"),de("/dev/stderr","w")),vt(rt),Ft=!1,vt(nt),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();it.unshift(t)}vt(it)}}if(!(0<at)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)ot();vt(et),0<at||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),t()},1)):t())}}if(u.cwrap=function(t,e,r,n){var i=(r=r||[]).every(function(t){return"number"===t});return"string"!==e&&i&&!n?F(t):function(){return function(t,e,r,n){var i,o={string:function(t){var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2);e=Ke(r),K(t,U,e,r)}return e},array:function(t){var e=Ke(t.length);return z.set(t,e),e}},a=F(t),s=[];if(t=0,n)for(var u=0;u<n.length;u++){var l=o[r[u]];l?(0===t&&(t=Ze()),s[u]=l(n[u])):s[u]=n[u]}return r=a.apply(null,s),i=r,r="string"===e?H(i):"boolean"===e?!!i:i,0!==t&&He(t),r}(t,e,r,arguments)}},u.stackSave=Ze,u.stackRestore=He,u.stackAlloc=Ke,ut=function t(){Ve||Je(),Ve||(ut=t)},u.run=Je,u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return!0,Je(),l}))};t.exports=a,t.exports.default=a}).call(this,r(31)(t),r(7),"/",r(2).Buffer)},function(t,e){var r={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=/(italic|oblique)$/i,i={};t.exports=function(t,e,o){var a=i[t];if(!a){Array.isArray(t)||(t=[t]);for(var s=400,u="normal",l=[],c=0,h=t.length;c<h;++c){var f=t[c].split(" "),p=f[f.length-1].toLowerCase();for(var d in"normal"==p||"italic"==p||"oblique"==p?(u=p,f.pop(),p=f[f.length-1].toLowerCase()):n.test(p)&&(p=p.replace(n,""),u=f[f.length-1].replace(p,"")),r)if(p==d||p==d.replace("-","")||p==d.replace("-"," ")){s=r[d],f.pop();break}"number"==typeof p&&(s=p);var y=f.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==y.indexOf(" ")&&(y='"'+y+'"'),l.push(y)}a=i[t]=[u,s,l]}return a[0]+" "+a[1]+" "+e+"px"+(o?"/"+o:"")+" "+a[2]}},function(t,e,r){var n=r(232);e.Processor=n},function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=l(t),n=r[0],a=r[1],s=new o(function(t,e,r){return 3*(e+r)/4-r}(0,n,a)),u=0,c=a>0?n-4:n,h=0;h<c;h+=4)e=i[t.charCodeAt(h)]<<18|i[t.charCodeAt(h+1)]<<12|i[t.charCodeAt(h+2)]<<6|i[t.charCodeAt(h+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===a&&(e=i[t.charCodeAt(h)]<<2|i[t.charCodeAt(h+1)]>>4,s[u++]=255&e);1===a&&(e=i[t.charCodeAt(h)]<<10|i[t.charCodeAt(h+1)]<<4|i[t.charCodeAt(h+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){},function(t,e,r){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=r(15),e.createHash=e.Hash=r(17),e.createHmac=e.Hmac=r(60);var n=r(154),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var a=r(63);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=r(156);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=r(173);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var l=r(178);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=r(216);var c=r(217);e.publicEncrypt=c.publicEncrypt,e.privateEncrypt=c.privateEncrypt,e.publicDecrypt=c.publicDecrypt,e.privateDecrypt=c.privateDecrypt;var h=r(220);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e){},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(140);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,r=o,i=s,e.copy(r,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(142),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(8))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,a,s,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[u]=i,n(u),u++},f.clearImmediate=p}function p(t){delete l[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(8),r(7))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(8))},function(t,e,r){"use strict";t.exports=o;var n=r(57),i=r(18);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(0),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(37)},function(t,e,r){t.exports=r(14)},function(t,e,r){t.exports=r(36).Transform},function(t,e,r){t.exports=r(36).PassThrough},function(t,e,r){var n=r(0),i=r(16),o=r(1).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<30|t>>>2}function c(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)r[h]=t.readInt32BE(4*h);for(;h<80;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var f=0;f<80;++f){var p=~~(f/20),d=0|((e=n)<<5|e>>>27)+c(p,i,o,s)+u+r[f]+a[p];u=s,s=o,o=l(i),i=n,n=d}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,r){var n=r(0),i=r(16),o=r(1).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function h(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=(e=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|e>>>31;for(var p=0;p<80;++p){var d=~~(p/20),y=l(n)+h(d,i,o,s)+u+r[p]+a[d]|0;u=s,s=o,o=c(i),i=n,n=y}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,r){var n=r(0),i=r(58),o=r(16),a=r(1).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}n(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},function(t,e,r){var n=r(0),i=r(59),o=r(16),a=r(1).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}n(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},function(t,e,r){"use strict";var n=r(0),i=r(1).Buffer,o=r(12),a=i.alloc(128),s=64;function u(t,e){o.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>s?e=t(e):e.length<s&&(e=i.concat([e,a],s));for(var r=this._ipad=i.allocUnsafe(s),n=this._opad=i.allocUnsafe(s),u=0;u<s;u++)r[u]=54^e[u],n[u]=92^e[u];this._hash=[r]}n(u,o),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=u},function(t,e,r){t.exports=r(62)},function(t,e,r){(function(e,n){var i,o=r(64),a=r(65),s=r(66),u=r(1).Buffer,l=e.crypto&&e.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function f(t,e,r,n,i){return l.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return l.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)}).then(function(t){return u.from(t)})}t.exports=function(t,r,p,d,y,g){"function"==typeof y&&(g=y,y=void 0);var m=c[(y=y||"sha1").toLowerCase()];if(!m||"function"!=typeof e.Promise)return n.nextTick(function(){var e;try{e=s(t,r,p,d,y)}catch(t){return g(t)}g(null,e)});if(o(t,r,p,d),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");u.isBuffer(t)||(t=u.from(t,a)),u.isBuffer(r)||(r=u.from(r,a)),function(t,e){t.then(function(t){n.nextTick(function(){e(null,t)})},function(t){n.nextTick(function(){e(t)})})}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==h[t])return h[t];var r=f(i=i||u.alloc(8),i,10,128,t).then(function(){return!0}).catch(function(){return!1});return h[t]=r,r}(m).then(function(e){return e?f(t,r,p,d,m):s(t,r,p,d,y)}),g)}}).call(this,r(8),r(7))},function(t,e,r){var n=r(157),i=r(42),o=r(43),a=r(172),s=r(25);function u(t,e,r){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,r);if(a[t])return new n({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function l(t,e,r){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,r);if(a[t])return new n({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,n=a[t].iv}var i=s(e,!1,r,n);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,n=a[t].iv}var i=s(e,!1,r,n);return l(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},function(t,e,r){var n=r(12),i=r(41),o=r(0),a=r(1).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){n.call(this);var e,r=t.mode.toLowerCase(),i=s[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,n),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},function(t,e,r){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}r[n+0]=i>>>0,r[n+1]=o>>>0},e.rip=function(t,e,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.pc1=function(t,e,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,i){for(var o=0,a=0,s=n.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>n[u]&1;for(u=s;u<n.length;u++)a<<=1,a|=e>>>n[u]&1;r[i+0]=o>>>0,r[i+1]=a>>>0},e.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,n=0;n<4;n++){r<<=4,r|=i[64*n+(t>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=i[256+64*n+(e>>>18-6*n&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<o.length;r++)e<<=1,e|=t>>>o[r]&1;return e>>>0},e.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(t,e,r){"use strict";var n=r(6);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,r){"use strict";var n=r(6),i=r(0),o=r(41),a=o.utils,s=o.Cipher;function u(){this.tmp=new Array(2),this.keys=null}function l(t){s.call(this,t);var e=new u;this._desState=e,this.deriveKeys(e,t.key)}i(l,s),t.exports=l,l.create=function(t){return new l(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var r=a.readUInt32BE(e,0),i=a.readUInt32BE(e,4);a.pc1(r,i,t.tmp,0),r=t.tmp[0],i=t.tmp[1];for(var o=0;o<t.keys.length;o+=2){var s=c[o>>>1];r=a.r28shl(r,s),i=a.r28shl(i,s),a.pc2(r,i,t.keys,o)}},l.prototype._update=function(t,e,r,n){var i=this._desState,o=a.readUInt32BE(t,e),s=a.readUInt32BE(t,e+4);a.ip(o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,s,i.tmp,0):this._decrypt(i,o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],a.writeUInt32BE(r,o,n),a.writeUInt32BE(r,s,n+4)},l.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},l.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)n.equal(t[r],e);return t.slice(0,t.length-e)},l.prototype._encrypt=function(t,e,r,n,i){for(var o=e,s=r,u=0;u<t.keys.length;u+=2){var l=t.keys[u],c=t.keys[u+1];a.expand(s,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=a.substitute(l,c),f=s;s=(o^a.permute(h))>>>0,o=f}a.rip(s,o,n,i)},l.prototype._decrypt=function(t,e,r,n,i){for(var o=r,s=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],c=t.keys[u+1];a.expand(o,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var h=a.substitute(l,c),f=o;o=(s^a.permute(h))>>>0,s=f}a.rip(o,s,n,i)}},function(t,e,r){"use strict";var n=r(6),i=r(0),o={};function a(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var a=r[n];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,r,n);for(s=0;s<this.blockSize;s++)a[s]=r[n+s]}else{o._update.call(this,t,e,r,n);for(s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},function(t,e,r){"use strict";var n=r(6),i=r(0),o=r(41),a=o.Cipher,s=o.DES;function u(t,e){n.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:r})]}function l(t){a.call(this,t);var e=new u(this.type,this.options.key);this._edeState=e}i(l,a),t.exports=l,l.create=function(t){return new l(t)},l.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},l.prototype._pad=s.prototype._pad,l.prototype._unpad=s.prototype._unpad},function(t,e,r){var n=r(43),i=r(70),o=r(1).Buffer,a=r(71),s=r(12),u=r(24),l=r(25);function c(t,e,r){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}r(0)(c,s),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return o.concat(n)};var h=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function p(t,e,r){var s=n[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof r&&(r=o.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===s.type?new a(s.module,e,r):"auth"===s.type?new i(s.module,e,r):new c(s.module,e,r)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=function(t,e){var r=n[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=l(e,!1,r.key,r.iv);return p(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,r){var n=r(19);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},function(t,e,r){var n=r(1).Buffer,i=r(19);function o(t,e,r){var o=e.length,a=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,r?e:a]),a}e.encrypt=function(t,e,r){for(var i,a=n.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){a=n.concat([a,o(t,e,r)]);break}i=t._cache.length,a=n.concat([a,o(t,e.slice(0,i),r)]),e=e.slice(i)}return a}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([r?e:i])]),i}e.encrypt=function(t,e,r){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],r);return a}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){for(var n,i,a=-1,s=0;++a<8;)n=e&1<<7-a?128:0,s+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>a%8,t._prev=o(t._prev,r?n:i);return s}function o(t,e){var r=t.length,i=-1,o=n.allocUnsafe(t.length);for(t=n.concat([t,n.from([e])]);++i<r;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,r){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],r);return a}},function(t,e,r){(function(t){var n=r(19);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,r(2).Buffer)},function(t,e,r){var n=r(1).Buffer,i=n.alloc(16,0);function o(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=o(i)},a.prototype.update=function(t){var e;for(this.cache=n.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},function(t,e,r){var n=r(70),i=r(1).Buffer,o=r(43),a=r(71),s=r(12),u=r(24),l=r(25);function c(t,e,r){s.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(r),this._mode=t,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function f(t,e,r){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=i.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof e&&(e=i.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,r,!0):"auth"===s.type?new n(s.module,e,r,!0):new c(s.module,e,r)}r(0)(c,s),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return i.concat(n)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=i.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=l(e,!1,r.key,r.iv);return f(t,n.key,n.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,r){(function(t){var n=r(72),i=r(176),o=r(177);var a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var r=new t(i[e].prime,"hex"),n=new t(i[e].gen,"hex");return new o(r,n)},e.createDiffieHellman=e.DiffieHellman=function e(r,i,s,u){return t.isBuffer(i)||void 0===a[i]?e(r,"binary",i,s):(i=i||"binary",u=u||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,u)),"number"==typeof r?new o(n(r,s),s,!0):(t.isBuffer(r)||(r=new t(r,i)),new o(r,s,!0)))}}).call(this,r(2).Buffer)},function(t,e){},function(t,e){},function(t){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(t,e,r){(function(e){var n=r(3),i=new(r(73)),o=new n(24),a=new n(11),s=new n(10),u=new n(3),l=new n(7),c=r(72),h=r(15);function f(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._pub=new n(t),this}function p(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._priv=new n(t),this}t.exports=y;var d={};function y(t,e,r){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function g(t,r){var n=new e(t.toArray());return r?n.toString(r):n}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in d)return d[n];var h,f=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!i.test(t))return f+=1,f+="02"===r||"05"===r?8:4,d[n]=f,f;switch(i.test(t.shrn(1))||(f+=2),r){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(h=t.mod(s)).cmp(u)&&h.cmp(l)&&(f+=8);break;default:f+=4}return d[n]=f,f}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new n(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(t){var r=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(r.toArray()),o=this.getPrime();if(i.length<o.length){var a=new e(o.length-i.length);a.fill(0),i=e.concat([a,i])}return i},y.prototype.getPublicKey=function(t){return g(this._pub,t)},y.prototype.getPrivateKey=function(t){return g(this._priv,t)},y.prototype.getPrime=function(t){return g(this.__prime,t)},y.prototype.getGenerator=function(t){return g(this._gen,t)},y.prototype.setGenerator=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.__gen=t,this._gen=new n(t),this}}).call(this,r(2).Buffer)},function(t,e,r){(function(e){var n=r(17),i=r(34),o=r(0),a=r(179),s=r(215),u=r(62);function l(t){i.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function c(t){i.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){return new l(t)}function f(t){return new c(t)}Object.keys(u).forEach(function(t){u[t].id=new e(u[t].id,"hex"),u[t.toLowerCase()]=u[t]}),o(l,i.Writable),l.prototype._write=function(t,e,r){this._hash.update(t),r()},l.prototype.update=function(t,r){return"string"==typeof t&&(t=new e(t,r)),this._hash.update(t),this},l.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=a(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},o(c,i.Writable),c.prototype._write=function(t,e,r){this._hash.update(t),r()},c.prototype.update=function(t,r){return"string"==typeof t&&(t=new e(t,r)),this._hash.update(t),this},c.prototype.verify=function(t,r,n){"string"==typeof r&&(r=new e(r,n)),this.end();var i=this._hash.digest();return s(r,i,t,this._signType,this._tag)},t.exports={Sign:h,Verify:f,createSign:h,createVerify:f}}).call(this,r(2).Buffer)},function(t,e,r){(function(e){var n=r(60),i=r(44),o=r(4).ec,a=r(3),s=r(27),u=r(83);function l(t,r,i,o){if((t=new e(t.toArray())).length<r.byteLength()){var a=new e(r.byteLength()-t.length);a.fill(0),t=e.concat([a,t])}var s=i.length,u=function(t,r){t=(t=c(t,r)).mod(r);var n=new e(t.toArray());if(n.length<r.byteLength()){var i=new e(r.byteLength()-n.length);i.fill(0),n=e.concat([i,n])}return n}(i,r),l=new e(s);l.fill(1);var h=new e(s);return h.fill(0),h=n(o,h).update(l).update(new e([0])).update(t).update(u).digest(),l=n(o,h).update(l).digest(),{k:h=n(o,h).update(l).update(new e([1])).update(t).update(u).digest(),v:l=n(o,h).update(l).digest()}}function c(t,e){var r=new a(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function h(t,r,i){var o,a;do{for(o=new e(0);8*o.length<t.bitLength();)r.v=n(i,r.k).update(r.v).digest(),o=e.concat([o,r.v]);a=c(o,t),r.k=n(i,r.k).update(r.v).update(new e([0])).digest(),r.v=n(i,r.k).update(r.v).digest()}while(-1!==a.cmp(t));return a}function f(t,e,r,n){return t.toRed(a.mont(r)).redPow(e).fromRed().mod(n)}t.exports=function(t,r,n,p,d){var y=s(r);if(y.curve){if("ecdsa"!==p&&"ecdsa/rsa"!==p)throw new Error("wrong private key type");return function(t,r){var n=u[r.curve.join(".")];if(!n)throw new Error("unknown curve "+r.curve.join("."));var i=new o(n).keyFromPrivate(r.privateKey).sign(t);return new e(i.toDER())}(t,y)}if("dsa"===y.type){if("dsa"!==p)throw new Error("wrong private key type");return function(t,r,n){for(var i,o=r.params.priv_key,s=r.params.p,u=r.params.q,p=r.params.g,d=new a(0),y=c(t,u).mod(u),g=!1,m=l(o,u,t,n);!1===g;)i=h(u,m,n),d=f(p,i,s,u),0===(g=i.invm(u).imul(y.add(o.mul(d))).mod(u)).cmpn(0)&&(g=!1,d=new a(0));return function(t,r){t=t.toArray(),r=r.toArray(),128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r));var n=[48,t.length+r.length+4,2,t.length];return n=n.concat(t,[2,r.length],r),new e(n)}(d,g)}(t,y,n)}if("rsa"!==p&&"ecdsa/rsa"!==p)throw new Error("wrong private key type");t=e.concat([d,t]);for(var g=y.modulus.byteLength(),m=[0,1];t.length+m.length+1<g;)m.push(255);m.push(0);for(var v=-1;++v<t.length;)m.push(t[v]);return i(m,y)},t.exports.getKey=l,t.exports.makeKey=h}).call(this,r(2).Buffer)},function(t){t.exports={_args:[["elliptic@6.4.1","/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js"]],_development:!0,_from:"elliptic@6.4.1",_id:"elliptic@6.4.1",_inBundle:!1,_integrity:"sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C/qvi9P3OqgswKSDftbu8+IoI/QDTAm2fFnQ9SZSQ==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.4.1",name:"elliptic",escapedName:"elliptic",rawSpec:"6.4.1",saveSpec:null,fetchSpec:"6.4.1"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.1.tgz",_spec:"6.4.1",_where:"/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.1"}},function(t,e,r){"use strict";var n=e,i=r(3),o=r(6),a=r(75);n.assert=o,n.toArray=a.toArray,n.zero2=a.zero2,n.toHex=a.toHex,n.encode=a.encode,n.getNAF=function(t,e){for(var r=[],n=1<<e+1,i=t.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var a=i.andln(n-1);o=a>(n>>1)-1?(n>>1)-a:a,i.isubn(o)}else o=0;r.push(o);for(var s=0!==i.cmpn(0)&&0===i.andln(n-1)?e+1:1,u=1;u<s;u++)r.push(0);i.iushrn(s)}return r},n.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,i=0;t.cmpn(-n)>0||e.cmpn(-i)>0;){var o,a,s,u=t.andln(3)+n&3,l=e.andln(3)+i&3;3===u&&(u=-1),3===l&&(l=-1),o=0==(1&u)?0:3!=(s=t.andln(7)+n&7)&&5!==s||2!==l?u:-u,r[0].push(o),a=0==(1&l)?0:3!=(s=e.andln(7)+i&7)&&5!==s||2!==u?l:-l,r[1].push(a),2*n===o+1&&(n=1-n),2*i===a+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return r},n.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(t){return"string"==typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,r){"use strict";var n=r(3),i=r(4).utils,o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var r=t._getDoubles(),n=o(e,1),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var a=[],u=0;u<n.length;u+=r.step){var l=0;for(e=u+r.step-1;e>=u;e--)l=(l<<1)+n[e];a.push(l)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=i;f>0;f--){for(u=0;u<a.length;u++){(l=a[u])===f?h=h.mixedAdd(r.points[u]):l===-f&&(h=h.mixedAdd(r.points[u].neg()))}c=c.add(h)}return c.toP()},u.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,a=o(e,r),u=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(e=0;l>=0&&0===a[l];l--)e++;if(l>=0&&e++,u=u.dblp(e),l<0)break;var c=a[l];s(0!==c),u="affine"===t.type?c>0?u.mixedAdd(i[c-1>>1]):u.mixedAdd(i[-c-1>>1].neg()):c>0?u.add(i[c-1>>1]):u.add(i[-c-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,r,n,i){for(var s=this._wnafT1,u=this._wnafT2,l=this._wnafT3,c=0,h=0;h<n;h++){var f=(O=e[h])._getNAFPoints(t);s[h]=f.wnd,u[h]=f.points}for(h=n-1;h>=1;h-=2){var p=h-1,d=h;if(1===s[p]&&1===s[d]){var y=[e[p],null,null,e[d]];0===e[p].y.cmp(e[d].y)?(y[1]=e[p].add(e[d]),y[2]=e[p].toJ().mixedAdd(e[d].neg())):0===e[p].y.cmp(e[d].y.redNeg())?(y[1]=e[p].toJ().mixedAdd(e[d]),y[2]=e[p].add(e[d].neg())):(y[1]=e[p].toJ().mixedAdd(e[d]),y[2]=e[p].toJ().mixedAdd(e[d].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=a(r[p],r[d]);c=Math.max(m[0].length,c),l[p]=new Array(c),l[d]=new Array(c);for(var v=0;v<c;v++){var _=0|m[0][v],b=0|m[1][v];l[p][v]=g[3*(_+1)+(b+1)],l[d][v]=0,u[p]=y}}else l[p]=o(r[p],s[p]),l[d]=o(r[d],s[d]),c=Math.max(l[p].length,c),c=Math.max(l[d].length,c)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(h=c;h>=0;h--){for(var E=0;h>=0;){var S=!0;for(v=0;v<n;v++)x[v]=0|l[v][h],0!==x[v]&&(S=!1);if(!S)break;E++,h--}if(h>=0&&E++,w=w.dblp(E),h<0)break;for(v=0;v<n;v++){var O,T=x[v];0!==T&&(T>0?O=u[v][T-1>>1]:T<0&&(O=u[v][-T-1>>1].neg()),w="affine"===O.type?w.mixedAdd(O):w.add(O))}}for(h=0;h<n;h++)u[h]=null;return i?w:w.toP()},u.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},function(t,e,r){"use strict";var n=r(26),i=r(4),o=r(3),a=r(0),s=n.base,u=i.utils.assert;function l(t){s.call(this,"short",t),this.a=new o(t.a,16).toRed(this.red),this.b=new o(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,r,n){s.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(e,16),this.y=new o(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(t,e,r,n){s.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(e,16),this.y=new o(r,16),this.z=new o(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(l,s),t.exports=l,l.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new o(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new o(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],u(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map(function(t){return{a:new o(t.a,16),b:new o(t.b,16)}}):this._getEndoBasis(r)}}},l.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:o.mont(t),r=new o(2).toRed(e).redInvm(),n=r.redNeg(),i=new o(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},l.prototype._getEndoBasis=function(t){for(var e,r,n,i,a,s,u,l,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,p=this.n.clone(),d=new o(1),y=new o(0),g=new o(0),m=new o(1),v=0;0!==f.cmpn(0);){var _=p.div(f);l=p.sub(_.mul(f)),c=g.sub(_.mul(d));var b=m.sub(_.mul(y));if(!n&&l.cmp(h)<0)e=u.neg(),r=d,n=l.neg(),i=c;else if(n&&2==++v)break;u=l,p=f,f=l,g=d,d=c,m=y,y=b}a=l.neg(),s=c;var w=n.sqr().add(i.sqr());return a.sqr().add(s.sqr()).cmp(w)>=0&&(a=e,s=r),n.negative&&(n=n.neg(),i=i.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:i},{a:a,b:s}]},l.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),l=o.mul(n.b);return{k1:t.sub(a).sub(s),k2:u.add(l).neg()}},l.prototype.pointFromX=function(t,e){(t=new o(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},l.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},l.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var l=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return l},a(c,s.BasePoint),l.prototype.point=function(t,e,r){return new c(this,t,e,r)},l.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new o(t,16),this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},c.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(h,s.BasePoint),l.prototype.jpoint=function(t,e,r){return new h(this,t,e,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),h=n.redMul(l),f=u.redSqr().redIAdd(c).redISub(h).redISub(h),p=u.redMul(h.redISub(f)).redISub(o.redMul(c)),d=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,p,d)},h.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),c=r.redMul(u),h=s.redSqr().redIAdd(l).redISub(c).redISub(c),f=s.redMul(c.redISub(h)).redISub(i.redMul(l)),p=this.z.redMul(a);return this.curve.jpoint(h,f,p)},h.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),l=a.redAdd(a);for(r=0;r<t;r++){var c=o.redSqr(),h=l.redSqr(),f=h.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(u)),d=o.redMul(h),y=p.redSqr().redISub(d.redAdd(d)),g=d.redISub(y),m=p.redMul(g);m=m.redIAdd(m).redISub(f);var v=l.redMul(s);r+1<t&&(u=u.redMul(f)),o=y,s=v,l=m}return this.curve.jpoint(o,l.redMul(i),s)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=u,e=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(c).redISub(f);p=p.redIAdd(p);var d=c.redAdd(c).redIAdd(c),y=d.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=y.redISub(p).redISub(p),e=d.redMul(p.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},h.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),p=this.x.redSub(c).redMul(this.x.redAdd(c));p=p.redAdd(p).redIAdd(p);var d=f.redIAdd(f),y=(d=d.redIAdd(d)).redAdd(d);t=p.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=p.redMul(d.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},h.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),l=(u=u.redIAdd(u)).redMul(a),c=s.redSqr().redISub(l.redAdd(l)),h=l.redISub(c),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=s.redMul(h).redISub(f),d=r.redAdd(r).redMul(n);return this.curve.jpoint(c,p,d)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),c=e.redMul(l);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(s).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(h,f,p)},h.prototype.mul=function(t,e){return t=new o(t,e),this.curve._wnafMul(this,t)},h.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},h.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,r){"use strict";var n=r(26),i=r(3),o=r(0),a=n.base,s=r(4).utils;function u(t){a.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(t,e,r){a.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(e,16),this.z=new i(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(u,a),t.exports=u,u.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},o(l,a.BasePoint),u.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},u.prototype.point=function(t,e){return new l(this,t,e)},u.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(t,e){return new l(t,e[0],e[1]||t.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),a=i.redMul(n),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},l.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,r){"use strict";var n=r(26),i=r(4),o=r(3),a=r(0),s=n.base,u=i.utils.assert;function l(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new o(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,r,n,i){s.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(e,16),this.y=new o(r,16),this.z=n?new o(n,16):this.curve.one,this.t=i&&new o(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(l,s),t.exports=l,l.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},l.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},l.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},l.prototype.pointFromX=function(t,e){(t=new o(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(i.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},l.prototype.pointFromY=function(t,e){(t=new o(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(i.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},l.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},a(c,s.BasePoint),l.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},l.prototype.point=function(t,e,r,n){return new c(this,t,e,r,n)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),a=o.redSub(r),s=n.redSub(e),u=i.redMul(a),l=o.redMul(s),c=i.redMul(s),h=a.redMul(o);return this.curve.point(u,l,h,c)},c.prototype._projDbl=function(){var t,e,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(i)).redAdd(o);if(this.zOne)t=n.redSub(i).redSub(o).redMul(a.redSub(this.curve.two)),e=a.redMul(l.redSub(o)),r=a.redSqr().redSub(a).redSub(a);else{var s=this.z.redSqr(),u=a.redSub(s).redISub(s);t=n.redSub(i).redISub(o).redMul(u),e=a.redMul(l.redSub(o)),r=a.redMul(u)}}else{var l=i.redAdd(o);s=this.curve._mulC(this.z).redSqr(),u=l.redSub(s).redSub(s);t=this.curve._mulC(n.redISub(l)).redMul(u),e=this.curve._mulC(l).redMul(i.redISub(o)),r=l.redMul(u)}return this.curve.point(t,e,r)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),a=i.redSub(n),s=i.redAdd(n),u=r.redAdd(e),l=o.redMul(a),c=s.redMul(u),h=o.redMul(u),f=a.redMul(s);return this.curve.point(l,c,f,h)},c.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),l=i.redAdd(s),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),h=n.redMul(u).redMul(c);return this.curve.twisted?(e=n.redMul(l).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(l)):(e=n.redMul(l).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(l)),this.curve.point(h,e,r)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},c.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(t,e,r){"use strict";var n,i=e,o=r(45),a=r(4),s=a.utils.assert;function u(t){"short"===t.type?this.curve=new a.curve.short(t):"edwards"===t.type?this.curve=new a.curve.edwards(t):this.curve=new a.curve.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var r=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=u,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(193)}catch(t){n=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(t,e,r){"use strict";e.sha1=r(188),e.sha224=r(189),e.sha256=r(77),e.sha384=r(190),e.sha512=r(78)},function(t,e,r){"use strict";var n=r(9),i=r(20),o=r(76),a=n.rotl32,s=n.sum32,u=n.sum32_5,l=o.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,c),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=a(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],c=this.h[2],f=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var d=~~(n/20),y=u(a(i,5),l(d,o,c,f),p,r[n],h[d]);p=f,f=c,c=a(o,30),o=i,i=y}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],c),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],p)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(9),i=r(77);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,r){"use strict";var n=r(9),i=r(78);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,r){"use strict";var n=r(9),i=r(20),o=n.rotl32,a=n.sum32,s=n.sum32_3,u=n.sum32_4,l=i.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(c,l),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],l=this.h[3],c=this.h[4],v=r,_=n,b=i,w=l,x=c,E=0;E<80;E++){var S=a(o(u(r,h(E,n,i,l),t[d[E]+e],f(E)),g[E]),c);r=c,c=l,l=o(i,10),i=n,n=S,S=a(o(u(v,h(79-E,_,b,w),t[y[E]+e],p(E)),m[E]),x),v=x,x=w,w=o(b,10),b=_,_=S}S=s(this.h[1],i,w),this.h[1]=s(this.h[2],l,x),this.h[2]=s(this.h[3],c,v),this.h[3]=s(this.h[4],r,_),this.h[4]=s(this.h[0],n,b),this.h[0]=S},c.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,r){"use strict";var n=r(9),i=r(6);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,r){"use strict";var n=r(3),i=r(195),o=r(4),a=o.utils.assert,s=r(196),u=r(197);function l(t){if(!(this instanceof l))return new l(t);"string"==typeof t&&(a(o.curves.hasOwnProperty(t),"Unknown curve "+t),t=o.curves[t]),t instanceof o.curves.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=l,l.prototype.keyPair=function(t){return new s(this,t)},l.prototype.keyFromPrivate=function(t,e){return s.fromPrivate(this,t,e)},l.prototype.keyFromPublic=function(t,e){return s.fromPublic(this,t,e)},l.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||o.rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),a=this.n.sub(new n(2));;){var s=new n(e.generate(r));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},l.prototype.sign=function(t,e,r,o){"object"==typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new n(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),l=t.toArray("be",a),c=new i({hash:this.hash,entropy:s,nonce:l,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new n(1)),f=0;;f++){var p=o.k?o.k(f):new n(c.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(h)>=0)){var d=this.g.mul(p);if(!d.isInfinity()){var y=d.getX(),g=y.umod(this.n);if(0!==g.cmpn(0)){var m=p.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(m=m.umod(this.n)).cmpn(0)){var v=(d.getY().isOdd()?1:0)|(0!==y.cmp(g)?2:0);return o.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),v^=1),new u({r:g,s:m,recoveryParam:v})}}}}}},l.prototype.verify=function(t,e,r,i){t=this._truncateToN(new n(t,16)),r=this.keyFromPublic(r,i);var o=(e=new u(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,l=a.invm(this.n),c=l.mul(t).umod(this.n),h=l.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,r.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(c,r.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},l.prototype.recoverPubKey=function(t,e,r,i){a((3&r)===r,"The recovery param is more than two bits"),e=new u(e,i);var o=this.n,s=new n(t),l=e.r,c=e.s,h=1&r,f=r>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");l=f?this.curve.pointFromX(l.add(this.curve.n),h):this.curve.pointFromX(l,h);var p=e.r.invm(o),d=o.sub(s).mul(p).umod(o),y=c.mul(p).umod(o);return this.g.mulAdd(d,l,y)},l.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new u(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,r){"use strict";var n=r(45),i=r(75),o=r(6);function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),r=i.toArray(t.nonce,t.nonceEnc||"hex"),n=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}t.exports=a,a.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=i.toArray(t,e),r=i.toArray(r,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},a.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(r),this._reseed++,i.encode(a,e)}},function(t,e,r){"use strict";var n=r(3),i=r(4).utils.assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,r){return e instanceof o?e:new o(t,{pub:e,pubEnc:r})},o.fromPrivate=function(t,e,r){return e instanceof o?e:new o(t,{priv:e,privEnc:r})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,r){"use strict";var n=r(3),i=r(4).utils,o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var r=t[e.place++];if(!(128&r))return r;for(var n=15&r,i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a];return e.place=a,i}function l(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function c(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=i.toArray(t,e);var r=new s;if(48!==t[r.place++])return!1;if(u(t,r)+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var o=u(t,r),a=t.slice(r.place,o+r.place);if(r.place+=o,2!==t[r.place++])return!1;var l=u(t,r);if(t.length!==l+r.place)return!1;var c=t.slice(r.place,l+r.place);return 0===a[0]&&128&a[1]&&(a=a.slice(1)),0===c[0]&&128&c[1]&&(c=c.slice(1)),this.r=new n(a),this.s=new n(c),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=l(e),r=l(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];c(n,e.length),(n=n.concat(e)).push(2),c(n,r.length);var o=n.concat(r),a=[48];return c(a,o.length),a=a.concat(o),i.encode(a,t)}},function(t,e,r){"use strict";var n=r(45),i=r(4),o=i.utils,a=o.assert,s=o.parseBytes,u=r(199),l=r(200);function c(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof c))return new c(t);t=i.curves[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=c,c.prototype.sign=function(t,e){t=s(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),u=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},c.prototype.verify=function(t,e,r){t=s(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},c.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},c.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},c.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},c.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},c.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},c.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(t){return o.intFromLE(t)},c.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,r){"use strict";var n=r(4).utils,i=n.assert,o=n.parseBytes,a=n.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(s,"privBytes",function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),a(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},s.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=s},function(t,e,r){"use strict";var n=r(3),i=r(4).utils,o=i.assert,a=i.cachedProperty,s=i.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},function(t,e,r){"use strict";var n=r(21);e.certificate=r(212);var i=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=i;var o=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=o;var a=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});e.PublicKey=a;var s=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});e.PrivateKey=u;var l=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=l;var c=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=c,e.DSAparam=n.define("DSAparam",function(){this.int()});var h=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=h;var f=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(t,e,r){var n=r(21),i=r(0);function o(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new o(t,e)},o.prototype._createNamed=function(t){var e;try{e=r(203).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(t){e=function(t){this._initNamed(t)}}return i(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},o.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(n.decoders[t])),this.decoders[t]},o.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},o.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n.encoders[t])),this.encoders[t]},o.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},function(module,exports,__webpack_require__){var indexOf=__webpack_require__(204),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)e.push(r);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,r){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(t){return function(t,e,r){t[e]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var r=e.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(t),function(e){r[e]=t[e]}),forEach(globals,function(e){t[e]&&(r[e]=t[e])});var o=Object_keys(r),a=n.call(r,this.code);return forEach(Object_keys(r),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=r[e])}),forEach(globals,function(e){e in t||defineProp(t,e,r[e])}),document.body.removeChild(e),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),r=this.runInContext(e);return forEach(Object_keys(e),function(r){t[r]=e[r]}),r},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var r=Script(e);return r[t].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(r){e[r]=t[r]}),e}},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,r){var n=r(0);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){var n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){var e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){var e,r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,r){var n=r(22).Reporter,i=r(22).EncoderBuffer,o=r(22).DecoderBuffer,a=r(6),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(t,e){var r={};this._baseState=r,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=l;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){var t=this._baseState,e={};c.forEach(function(r){e[r]=t[r]});var r=new this.constructor(e.parent);return r._baseState=e,r},l.prototype._wrap=function(){var t=this._baseState;u.forEach(function(e){this[e]=function(){var r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}},this)},l.prototype._init=function(t){var e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),a.equal(e.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(t){var e=this._baseState,r=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==r.length&&(a(null===e.children),e.children=r,r.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(r){r==(0|r)&&(r|=0);var n=t[r];e[n]=r}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){l.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),s.forEach(function(t){l.prototype[t]=function(){var e=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(r),this}}),l.prototype.use=function(t){a(t);var e=this._baseState;return a(null===e.use),e.use=t,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(t){var e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},l.prototype.explicit=function(t){var e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},l.prototype.implicit=function(t){var e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},l.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},l.prototype.key=function(t){var e=this._baseState;return a(null===e.key),e.key=t,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(t){var e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},l.prototype.contains=function(t){var e=this._baseState;return a(null===e.use),e.contains=t,this},l.prototype._decode=function(t,e){var r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));var n,i=r.default,a=!0,s=null;if(null!==r.key&&(s=t.enterKey(r.key)),r.optional){var u=null;if(null!==r.explicit?u=r.explicit:null!==r.implicit?u=r.implicit:null!==r.tag&&(u=r.tag),null!==u||r.any){if(a=this._peekTag(t,u,r.any),t.isError(a))return a}else{var l=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),a=!0}catch(t){a=!1}t.restore(l)}}if(r.obj&&a&&(n=t.enterObject()),a){if(null!==r.explicit){var c=this._decodeTag(t,r.explicit);if(t.isError(c))return c;t=c}var h=t.offset;if(null===r.use&&null===r.choice){if(r.any)l=t.save();var f=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(f))return f;r.any?i=t.raw(l):t=f}if(e&&e.track&&null!==r.tag&&e.track(t.path(),h,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),i=r.any?i:null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function(r){r._decode(t,e)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var p=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(p,e)}}return r.obj&&a&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,r.key,i),i},l.prototype._decodeGeneric=function(t,e,r){var n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},l.prototype._getUse=function(t,e){var r=this._baseState;return r.useDecoder=this._use(t,e),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function(t,e){var r=this._baseState,n=null,i=!1;return Object.keys(r.choice).some(function(o){var a=t.save(),s=r.choice[o];try{var u=s._decode(t,e);if(t.isError(u))return!1;n={type:o,value:u},i=!0}catch(e){return t.restore(a),!1}return!0},this),i?n:t.error("Choice not matched")},l.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},l.prototype._encode=function(t,e,r){var n=this._baseState;if(null===n.default||n.default!==t){var i=this._encodeValue(t,e,r);if(void 0!==i&&!this._skipDefault(i,e,r))return i}},l.prototype._encodeValue=function(t,e,r){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);var o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}var a=null,s=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)a=this._getUse(i.contains,r)._encode(t,e),s=!0;else if(i.children)a=i.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");var n=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i},this).filter(function(t){return t}),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(t.map(function(r){var n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)},u))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(a=this._encodePrimitive(i.tag,t),s=!0);if(!i.any&&null===i.choice){var l=null!==i.implicit?i.implicit:i.tag,c=null===i.implicit?"universal":"context";null===l?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(l,s,c,a))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},l.prototype._encodeChoice=function(t,e){var r=this._baseState,n=r.choice[t.type];return n||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},l.prototype._encodePrimitive=function(t,e){var r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},l.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},l.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},function(t,e,r){var n=r(80);e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n._reverse(e.tag)},function(t,e,r){var n=e;n.der=r(81),n.pem=r(209)},function(t,e,r){var n=r(0),i=r(2).Buffer,o=r(81);function a(t){o.call(this,t),this.enc="pem"}n(a,o),t.exports=a,a.prototype.decode=function(t,e){for(var r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,u=-1,l=0;l<r.length;l++){var c=r[l].match(a);if(null!==c&&c[2]===n){if(-1!==s){if("END"!==c[1])break;u=l;break}if("BEGIN"!==c[1])break;s=l}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+n);var h=r.slice(s+1,u).join("");h.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new i(h,"base64");return o.prototype.decode.call(this,f,e)}},function(t,e,r){var n=e;n.der=r(82),n.pem=r(211)},function(t,e,r){var n=r(0),i=r(82);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){for(var r=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"],o=0;o<r.length;o+=64)n.push(r.slice(o,o+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},function(t,e,r){"use strict";var n=r(21),i=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional())}),s=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),u=n.define("RelativeDistinguishedName",function(){this.setof(o)}),l=n.define("RDNSequence",function(){this.seqof(u)}),c=n.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),h=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),f=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),p=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(c),this.key("validity").use(h),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),d=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=d},function(t){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(t,e,r){(function(e){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,a=r(25),s=r(42);t.exports=function(t,r){var u,l=t.toString(),c=l.match(n);if(c){var h="aes"+c[1],f=new e(c[2],"hex"),p=new e(c[3].replace(/[\r\n]/g,""),"base64"),d=a(r,f.slice(0,8),parseInt(c[1],10)).key,y=[],g=s.createDecipheriv(h,d,f);y.push(g.update(p)),y.push(g.final()),u=e.concat(y)}else{var m=l.match(o);u=new e(m[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:u}}}).call(this,r(2).Buffer)},function(t,e,r){(function(e){var n=r(3),i=r(4).ec,o=r(27),a=r(83);function s(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,r,u,l,c){var h=o(u);if("ec"===h.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,r){var n=a[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var o=new i(n),s=r.data.subjectPrivateKey.data;return o.verify(e,t,s)}(t,r,h)}if("dsa"===h.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,r){var i=r.data.p,a=r.data.q,u=r.data.g,l=r.data.pub_key,c=o.signature.decode(t,"der"),h=c.s,f=c.r;s(h,a),s(f,a);var p=n.mont(i),d=h.invm(a);return 0===u.toRed(p).redPow(new n(e).mul(d).mod(a)).fromRed().mul(l.toRed(p).redPow(f.mul(d).mod(a)).fromRed()).mod(i).mod(a).cmp(f)}(t,r,h)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");r=e.concat([c,r]);for(var f=h.modulus.byteLength(),p=[1],d=0;r.length+p.length+2<f;)p.push(255),d++;p.push(0);for(var y=-1;++y<r.length;)p.push(r[y]);p=new e(p);var g=n.mont(h.modulus);t=(t=new n(t).toRed(g)).redPow(new n(h.publicExponent)),t=new e(t.fromRed().toArray());var m=d<8?1:0;for(f=Math.min(t.length,p.length),t.length!==p.length&&(m=1),y=-1;++y<f;)m|=t[y]^p[y];return 0===m}}).call(this,r(2).Buffer)},function(t,e,r){(function(e){var n=r(4),i=r(3);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(t,r,n){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(n&&i.length<n){var o=new e(n-i.length);o.fill(0),i=e.concat([o,i])}return r?i.toString(r):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,r,n){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,r){r=r||"utf8",e.isBuffer(t)||(t=new e(t,r));var n=new i(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(2).Buffer)},function(t,e,r){e.publicEncrypt=r(218),e.privateDecrypt=r(219),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},function(t,e,r){(function(e){var n=r(27),i=r(15),o=r(17),a=r(84),s=r(85),u=r(3),l=r(86),c=r(44);t.exports=function(t,r,h){var f;f=t.padding?t.padding:h?1:4;var p,d=n(t);if(4===f)p=function(t,r){var n=t.modulus.byteLength(),l=r.length,c=o("sha1").update(new e("")).digest(),h=c.length,f=2*h;if(l>n-f-2)throw new Error("message too long");var p=new e(n-l-f-2);p.fill(0);var d=n-h-1,y=i(h),g=s(e.concat([c,p,new e([1]),r],d),a(y,d)),m=s(y,a(g,h));return new u(e.concat([new e([0]),m,g],n))}(d,r);else if(1===f)p=function(t,r,n){var o,a=r.length,s=t.modulus.byteLength();if(a>s-11)throw new Error("message too long");n?(o=new e(s-a-3)).fill(255):o=function(t,r){var n,o=new e(t),a=0,s=i(2*t),u=0;for(;a<t;)u===s.length&&(s=i(2*t),u=0),(n=s[u++])&&(o[a++]=n);return o}(s-a-3);return new u(e.concat([new e([0,n?1:2]),o,new e([0]),r],s))}(d,r,h);else{if(3!==f)throw new Error("unknown padding");if((p=new u(r)).cmp(d.modulus)>=0)throw new Error("data too long for modulus")}return h?c(p,d):l(p,d)}}).call(this,r(2).Buffer)},function(t,e,r){(function(e){var n=r(27),i=r(84),o=r(85),a=r(3),s=r(44),u=r(17),l=r(86);t.exports=function(t,r,c){var h;h=t.padding?t.padding:c?1:4;var f,p=n(t),d=p.modulus.byteLength();if(r.length>d||new a(r).cmp(p.modulus)>=0)throw new Error("decryption error");f=c?l(new a(r),p):s(r,p);var y=new e(d-f.length);if(y.fill(0),f=e.concat([y,f],d),4===h)return function(t,r){t.modulus;var n=t.modulus.byteLength(),a=(r.length,u("sha1").update(new e("")).digest()),s=a.length;if(0!==r[0])throw new Error("decryption error");var l=r.slice(1,s+1),c=r.slice(s+1),h=o(l,i(c,s)),f=o(c,i(h,n-s-1));if(function(t,r){t=new e(t),r=new e(r);var n=0,i=t.length;t.length!==r.length&&(n++,i=Math.min(t.length,r.length));var o=-1;for(;++o<i;)n+=t[o]^r[o];return n}(a,f.slice(0,s)))throw new Error("decryption error");var p=s;for(;0===f[p];)p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}(p,f);if(1===h)return function(t,e,r){var n=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var a=e.slice(2,i-1);e.slice(i-1,i);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,c);if(3===h)return f;throw new Error("unknown padding")}}).call(this,r(2).Buffer)},function(t,e,r){"use strict";(function(t,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r(1),a=r(15),s=o.Buffer,u=o.kMaxLength,l=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function h(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>u)throw new RangeError("buffer too small")}function p(t,e,r,i){if(n.browser){var o=t.buffer,s=new Uint8Array(o,e,r);return l.getRandomValues(s),i?void n.nextTick(function(){i(null,t)}):t}if(!i)return a(r).copy(t,e),t;a(r,function(r,n){if(r)return i(r);n.copy(t,e),i(null,t)})}l&&l.getRandomValues||!n.browser?(e.randomFill=function(e,r,n,i){if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)i=r,r=0,n=e.length;else if("function"==typeof n)i=n,n=e.length-r;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return h(r,e.length),f(n,r,e.length),p(e,r,n,i)},e.randomFillSync=function(e,r,n){void 0===r&&(r=0);if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(r,e.length),void 0===n&&(n=e.length-r);return f(n,r,e.length),p(e,r,n)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,r(8),r(7))},function(t,e,r){"use strict";var n=r(222),i=r(13),o=r(89),a=r(46),s=r(90),u=Object.prototype.toString,l=0,c=-1,h=0,f=8;function p(t){if(!(this instanceof p))return new p(t);this.options=i.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var d;if(d="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=n.deflateSetDictionary(this.strm,d))!==l)throw new Error(a[r]);this._dict_set=!0}}function d(t,e){var r=new p(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}p.prototype.push=function(t,e){var r,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(r=n.deflate(s,a))&&r!==l)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==a||(this.onEnd(l),s.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=p,e.deflate=d,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},function(t,e,r){"use strict";var n,i=r(13),o=r(223),a=r(87),s=r(88),u=r(46),l=0,c=1,h=3,f=4,p=5,d=0,y=1,g=-2,m=-3,v=-5,_=-1,b=1,w=2,x=3,E=4,S=0,O=2,T=8,M=9,I=15,P=8,C=286,L=30,k=19,R=2*C+1,A=15,N=3,F=258,j=F+N+1,D=32,G=42,B=69,z=73,U=91,q=103,V=113,Y=666,W=1,X=2,Z=3,H=4,K=3;function $(t,e){return t.msg=u[e],e}function J(t){return(t<<1)-(t>4?9:0)}function Q(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function et(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function rt(t,e){t.pending_buf[t.pending++]=e}function nt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function it(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-j?t.strstart-(t.w_size-j):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+F,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(r=e)+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<f);if(n=F-(f-o),o=f-F,n>a){if(t.match_start=e,a=n,n>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function ot(t){var e,r,n,o,u,l,c,h,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-j)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--r);e=r=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--r);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,h=t.strstart+t.lookahead,f=o,p=void 0,(p=l.avail_in)>f&&(p=f),r=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,c,p,h):2===l.state.wrap&&(l.adler=s(l.adler,c,p,h)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=N)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+N-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<N)););}while(t.lookahead<j&&0!==t.strm.avail_in)}function at(t,e){for(var r,n;;){if(t.lookahead<j){if(ot(t),t.lookahead<j&&e===l)return W;if(0===t.lookahead)break}if(r=0,t.lookahead>=N&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-j&&(t.match_length=it(t,r)),t.match_length>=N)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-N),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=N){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=t.strstart<N-1?t.strstart:N-1,e===f?(et(t,!0),0===t.strm.avail_out?Z:H):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:X}function st(t,e){for(var r,n,i;;){if(t.lookahead<j){if(ot(t),t.lookahead<j&&e===l)return W;if(0===t.lookahead)break}if(r=0,t.lookahead>=N&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=N-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-j&&(t.match_length=it(t,r),t.match_length<=5&&(t.strategy===b||t.match_length===N&&t.strstart-t.match_start>4096)&&(t.match_length=N-1)),t.prev_length>=N&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-N,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-N),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=N-1,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return W}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return W}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<N-1?t.strstart:N-1,e===f?(et(t,!0),0===t.strm.avail_out?Z:H):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:X}function ut(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*L+1)),this.bl_tree=new i.Buf16(2*(2*k+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(A+1),this.heap=new i.Buf16(2*C+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*C+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=O,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?G:V,t.adler=2===e.wrap?0:1,e.last_flush=l,o._tr_init(e),d):$(t,g)}function ht(t){var e,r=ct(t);return r===d&&((e=t.state).window_size=2*e.w_size,Q(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=N-1,e.match_available=0,e.ins_h=0),r}function ft(t,e,r,n,o,a){if(!t)return g;var s=1;if(e===_&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>M||r!==T||n<8||n>15||e<0||e>9||a<0||a>E)return $(t,g);8===n&&(n=9);var u=new lt;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+N-1)/N),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,ht(t)}n=[new ut(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ot(t),0===t.lookahead&&e===l)return W;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,et(t,!1),0===t.strm.avail_out))return W;if(t.strstart-t.block_start>=t.w_size-j&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Z:H):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),W)}),new ut(4,4,8,4,at),new ut(4,5,16,8,at),new ut(4,6,32,32,at),new ut(4,4,16,16,st),new ut(8,16,32,32,st),new ut(8,16,128,128,st),new ut(8,32,128,256,st),new ut(32,128,258,1024,st),new ut(32,258,258,4096,st)],e.deflateInit=function(t,e){return ft(t,e,T,I,P,S)},e.deflateInit2=ft,e.deflateReset=ht,e.deflateResetKeep=ct,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,d):g},e.deflate=function(t,e){var r,i,a,u;if(!t||!t.state||e>p||e<0)return t?$(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Y&&e!==f)return $(t,0===t.avail_out?v:g);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===G)if(2===i.wrap)t.adler=0,rt(i,31),rt(i,139),rt(i,8),i.gzhead?(rt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),rt(i,255&i.gzhead.time),rt(i,i.gzhead.time>>8&255),rt(i,i.gzhead.time>>16&255),rt(i,i.gzhead.time>>24&255),rt(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),rt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(rt(i,255&i.gzhead.extra.length),rt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=B):(rt(i,0),rt(i,0),rt(i,0),rt(i,0),rt(i,0),rt(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),rt(i,K),i.status=V);else{var m=T+(i.w_bits-8<<4)<<8;m|=(i.strategy>=w||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(m|=D),m+=31-m%31,i.status=V,nt(i,m),0!==i.strstart&&(nt(i,t.adler>>>16),nt(i,65535&t.adler)),t.adler=1}if(i.status===B)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending!==i.pending_buf_size));)rt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=z)}else i.status=z;if(i.status===z)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,rt(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,rt(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=q)}else i.status=q;if(i.status===q&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&tt(t),i.pending+2<=i.pending_buf_size&&(rt(i,255&t.adler),rt(i,t.adler>>8&255),t.adler=0,i.status=V)):i.status=V),0!==i.pending){if(tt(t),0===t.avail_out)return i.last_flush=-1,d}else if(0===t.avail_in&&J(e)<=J(r)&&e!==f)return $(t,v);if(i.status===Y&&0!==t.avail_in)return $(t,v);if(0!==t.avail_in||0!==i.lookahead||e!==l&&i.status!==Y){var _=i.strategy===w?function(t,e){for(var r;;){if(0===t.lookahead&&(ot(t),0===t.lookahead)){if(e===l)return W;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Z:H):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:X}(i,e):i.strategy===x?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=F){if(ot(t),t.lookahead<=F&&e===l)return W;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=N&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+F;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=F-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=N?(r=o._tr_tally(t,1,t.match_length-N),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Z:H):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:X}(i,e):n[i.level].func(i,e);if(_!==Z&&_!==H||(i.status=Y),_===W||_===Z)return 0===t.avail_out&&(i.last_flush=-1),d;if(_===X&&(e===c?o._tr_align(i):e!==p&&(o._tr_stored_block(i,0,0,!1),e===h&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),tt(t),0===t.avail_out))return i.last_flush=-1,d}return e!==f?d:i.wrap<=0?y:(2===i.wrap?(rt(i,255&t.adler),rt(i,t.adler>>8&255),rt(i,t.adler>>16&255),rt(i,t.adler>>24&255),rt(i,255&t.total_in),rt(i,t.total_in>>8&255),rt(i,t.total_in>>16&255),rt(i,t.total_in>>24&255)):(nt(i,t.adler>>>16),nt(i,65535&t.adler)),tt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?d:y)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==G&&e!==B&&e!==z&&e!==U&&e!==q&&e!==V&&e!==Y?$(t,g):(t.state=null,e===V?$(t,m):d):g},e.deflateSetDictionary=function(t,e){var r,n,o,s,u,l,c,h,f=e.length;if(!t||!t.state)return g;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==G||r.lookahead)return g;for(1===s&&(t.adler=a(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(Q(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,e,f-r.w_size,r.w_size,0),e=h,f=r.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,ot(r);r.lookahead>=N;){n=r.strstart,o=r.lookahead-(N-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+N-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=N-1,ot(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=N-1,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,r.wrap=s,d},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";var n=r(13),i=4,o=0,a=1,s=2;function u(t){for(var e=t.length;--e>=0;)t[e]=0}var l=0,c=1,h=2,f=29,p=256,d=p+1+f,y=30,g=19,m=2*d+1,v=15,_=16,b=7,w=256,x=16,E=17,S=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(d+2));u(P);var C=new Array(2*y);u(C);var L=new Array(512);u(L);var k=new Array(256);u(k);var R=new Array(f);u(R);var A,N,F,j=new Array(y);function D(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function G(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function B(t){return t<256?L[t]:L[256+(t>>>7)]}function z(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function U(t,e,r){t.bi_valid>_-r?(t.bi_buf|=e<<t.bi_valid&65535,z(t,t.bi_buf),t.bi_buf=e>>_-t.bi_valid,t.bi_valid+=r-_):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function q(t,e,r){U(t,r[2*e],r[2*e+1])}function V(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function Y(t,e,r){var n,i,o=new Array(v+1),a=0;for(n=1;n<=v;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=V(o[s]++,s))}}function W(t){var e;for(e=0;e<d;e++)t.dyn_ltree[2*e]=0;for(e=0;e<y;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function X(t){t.bi_valid>8?z(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Z(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function H(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&Z(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Z(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function K(t,e,r){var n,i,o,a,s=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===n?q(t,i,e):(q(t,(o=k[i])+p+1,e),0!==(a=O[o])&&U(t,i-=R[o],a),q(t,o=B(--n),r),0!==(a=T[o])&&U(t,n-=j[o],a))}while(s<t.last_lit);q(t,w,e)}function $(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=m,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)H(t,o,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,H(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,y=0;for(o=0;o<=v;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<m;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>d&&(o=d,y++),u[2*n+1]=o,n>l||(t.bl_count[o]++,a=0,n>=p&&(a=f[n-p]),s=u[2*n],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*n+1]+a)));if(0!==y){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,y-=2}while(y>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),Y(o,l,t.bl_count)}function J(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*x]++):s<=10?t.bl_tree[2*E]++:t.bl_tree[2*S]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function Q(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<l)do{q(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(q(t,i,t.bl_tree),s--),q(t,x,t.bl_tree),U(t,s-3,2)):s<=10?(q(t,E,t.bl_tree),U(t,s-3,3)):(q(t,S,t.bl_tree),U(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}u(j);var tt=!1;function et(t,e,r,i){U(t,(l<<1)+(i?1:0),3),function(t,e,r,i){X(t),i&&(z(t,r),z(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}e._tr_init=function(t){tt||(function(){var t,e,r,n,i,o=new Array(v+1);for(r=0,n=0;n<f-1;n++)for(R[n]=r,t=0;t<1<<O[n];t++)k[r++]=n;for(k[r-1]=n,i=0,n=0;n<16;n++)for(j[n]=i,t=0;t<1<<T[n];t++)L[i++]=n;for(i>>=7;n<y;n++)for(j[n]=i<<7,t=0;t<1<<T[n]-7;t++)L[256+i++]=n;for(e=0;e<=v;e++)o[e]=0;for(t=0;t<=143;)P[2*t+1]=8,t++,o[8]++;for(;t<=255;)P[2*t+1]=9,t++,o[9]++;for(;t<=279;)P[2*t+1]=7,t++,o[7]++;for(;t<=287;)P[2*t+1]=8,t++,o[8]++;for(Y(P,d+1,o),t=0;t<y;t++)C[2*t+1]=5,C[2*t]=V(t,5);A=new D(P,O,p+1,d,v),N=new D(C,T,0,y,v),F=new D(new Array(0),M,0,g,b)}(),tt=!0),t.l_desc=new G(t.dyn_ltree,A),t.d_desc=new G(t.dyn_dtree,N),t.bl_desc=new G(t.bl_tree,F),t.bi_buf=0,t.bi_valid=0,W(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,r,n){var u,l,f=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<p;e++)if(0!==t.dyn_ltree[2*e])return a;return o}(t)),$(t,t.l_desc),$(t,t.d_desc),f=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),$(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*I[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),u=t.opt_len+3+7>>>3,(l=t.static_len+3+7>>>3)<=u&&(u=l)):u=l=r+5,r+4<=u&&-1!==e?et(t,e,r,n):t.strategy===i||l===u?(U(t,(c<<1)+(n?1:0),3),K(t,P,C)):(U(t,(h<<1)+(n?1:0),3),function(t,e,r,n){var i;for(U(t,e-257,5),U(t,r-1,5),U(t,n-4,4),i=0;i<n;i++)U(t,t.bl_tree[2*I[i]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),K(t,t.dyn_ltree,t.dyn_dtree)),W(t),n&&X(t)},e._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(k[r]+p+1)]++,t.dyn_dtree[2*B(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){U(t,c<<1,3),q(t,w,P),function(t){16===t.bi_valid?(z(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,r){"use strict";var n=r(225),i=r(13),o=r(89),a=r(91),s=r(46),u=r(90),l=r(228),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);if(this.header=new l,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(s[r])}function f(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}h.prototype.push=function(t,e){var r,s,u,l,h,f=this.strm,p=this.options.chunkSize,d=this.options.dictionary,y=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(r=n.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===y&&(r=a.Z_OK,y=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),l=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(y=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,r){"use strict";var n=r(13),i=r(87),o=r(88),a=r(226),s=r(227),u=0,l=1,c=2,h=4,f=5,p=6,d=0,y=1,g=2,m=-2,v=-3,_=-4,b=-5,w=8,x=1,E=2,S=3,O=4,T=5,M=6,I=7,P=8,C=9,L=10,k=11,R=12,A=13,N=14,F=15,j=16,D=17,G=18,B=19,z=20,U=21,q=22,V=23,Y=24,W=25,X=26,Z=27,H=28,K=29,$=30,J=31,Q=32,tt=852,et=592,rt=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function it(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ot(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,d):m}function at(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ot(t)):m}function st(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?m:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,at(t))):m}function ut(t,e){var r,n;return t?(n=new it,t.state=n,n.window=null,(r=st(t,e))!==d&&(t.state=null),r):m}var lt,ct,ht=!0;function ft(t){if(ht){var e;for(lt=new n.Buf32(512),ct=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(l,t.lens,0,288,lt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(c,t.lens,0,32,ct,0,t.work,{bits:5}),ht=!1}t.lencode=lt,t.lenbits=9,t.distcode=ct,t.distbits=5}function pt(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=at,e.inflateReset2=st,e.inflateResetKeep=ot,e.inflateInit=function(t){return ut(t,rt)},e.inflateInit2=ut,e.inflate=function(t,e){var r,tt,et,rt,it,ot,at,st,ut,lt,ct,ht,dt,yt,gt,mt,vt,_t,bt,wt,xt,Et,St,Ot,Tt=0,Mt=new n.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return m;(r=t.state).mode===R&&(r.mode=A),it=t.next_out,et=t.output,at=t.avail_out,rt=t.next_in,tt=t.input,ot=t.avail_in,st=r.hold,ut=r.bits,lt=ot,ct=at,Et=d;t:for(;;)switch(r.mode){case x:if(0===r.wrap){r.mode=A;break}for(;ut<16;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(2&r.wrap&&35615===st){r.check=0,Mt[0]=255&st,Mt[1]=st>>>8&255,r.check=o(r.check,Mt,2,0),st=0,ut=0,r.mode=E;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&st)<<8)+(st>>8))%31){t.msg="incorrect header check",r.mode=$;break}if((15&st)!==w){t.msg="unknown compression method",r.mode=$;break}if(ut-=4,xt=8+(15&(st>>>=4)),0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=$;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&st?L:R,st=0,ut=0;break;case E:for(;ut<16;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(r.flags=st,(255&r.flags)!==w){t.msg="unknown compression method",r.mode=$;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=$;break}r.head&&(r.head.text=st>>8&1),512&r.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,r.check=o(r.check,Mt,2,0)),st=0,ut=0,r.mode=S;case S:for(;ut<32;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}r.head&&(r.head.time=st),512&r.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,Mt[2]=st>>>16&255,Mt[3]=st>>>24&255,r.check=o(r.check,Mt,4,0)),st=0,ut=0,r.mode=O;case O:for(;ut<16;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}r.head&&(r.head.xflags=255&st,r.head.os=st>>8),512&r.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,r.check=o(r.check,Mt,2,0)),st=0,ut=0,r.mode=T;case T:if(1024&r.flags){for(;ut<16;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}r.length=st,r.head&&(r.head.extra_len=st),512&r.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,r.check=o(r.check,Mt,2,0)),st=0,ut=0}else r.head&&(r.head.extra=null);r.mode=M;case M:if(1024&r.flags&&((ht=r.length)>ot&&(ht=ot),ht&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,tt,rt,ht,xt)),512&r.flags&&(r.check=o(r.check,tt,ht,rt)),ot-=ht,rt+=ht,r.length-=ht),r.length))break t;r.length=0,r.mode=I;case I:if(2048&r.flags){if(0===ot)break t;ht=0;do{xt=tt[rt+ht++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt))}while(xt&&ht<ot);if(512&r.flags&&(r.check=o(r.check,tt,ht,rt)),ot-=ht,rt+=ht,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=P;case P:if(4096&r.flags){if(0===ot)break t;ht=0;do{xt=tt[rt+ht++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt))}while(xt&&ht<ot);if(512&r.flags&&(r.check=o(r.check,tt,ht,rt)),ot-=ht,rt+=ht,xt)break t}else r.head&&(r.head.comment=null);r.mode=C;case C:if(512&r.flags){for(;ut<16;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(st!==(65535&r.check)){t.msg="header crc mismatch",r.mode=$;break}st=0,ut=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=R;break;case L:for(;ut<32;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}t.adler=r.check=nt(st),st=0,ut=0,r.mode=k;case k:if(0===r.havedict)return t.next_out=it,t.avail_out=at,t.next_in=rt,t.avail_in=ot,r.hold=st,r.bits=ut,g;t.adler=r.check=1,r.mode=R;case R:if(e===f||e===p)break t;case A:if(r.last){st>>>=7&ut,ut-=7&ut,r.mode=Z;break}for(;ut<3;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}switch(r.last=1&st,ut-=1,3&(st>>>=1)){case 0:r.mode=N;break;case 1:if(ft(r),r.mode=z,e===p){st>>>=2,ut-=2;break t}break;case 2:r.mode=D;break;case 3:t.msg="invalid block type",r.mode=$}st>>>=2,ut-=2;break;case N:for(st>>>=7&ut,ut-=7&ut;ut<32;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if((65535&st)!=(st>>>16^65535)){t.msg="invalid stored block lengths",r.mode=$;break}if(r.length=65535&st,st=0,ut=0,r.mode=F,e===p)break t;case F:r.mode=j;case j:if(ht=r.length){if(ht>ot&&(ht=ot),ht>at&&(ht=at),0===ht)break t;n.arraySet(et,tt,rt,ht,it),ot-=ht,rt+=ht,at-=ht,it+=ht,r.length-=ht;break}r.mode=R;break;case D:for(;ut<14;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(r.nlen=257+(31&st),st>>>=5,ut-=5,r.ndist=1+(31&st),st>>>=5,ut-=5,r.ncode=4+(15&st),st>>>=4,ut-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=$;break}r.have=0,r.mode=G;case G:for(;r.have<r.ncode;){for(;ut<3;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}r.lens[It[r.have++]]=7&st,st>>>=3,ut-=3}for(;r.have<19;)r.lens[It[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,St={bits:r.lenbits},Et=s(u,r.lens,0,19,r.lencode,0,r.work,St),r.lenbits=St.bits,Et){t.msg="invalid code lengths set",r.mode=$;break}r.have=0,r.mode=B;case B:for(;r.have<r.nlen+r.ndist;){for(;mt=(Tt=r.lencode[st&(1<<r.lenbits)-1])>>>16&255,vt=65535&Tt,!((gt=Tt>>>24)<=ut);){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(vt<16)st>>>=gt,ut-=gt,r.lens[r.have++]=vt;else{if(16===vt){for(Ot=gt+2;ut<Ot;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(st>>>=gt,ut-=gt,0===r.have){t.msg="invalid bit length repeat",r.mode=$;break}xt=r.lens[r.have-1],ht=3+(3&st),st>>>=2,ut-=2}else if(17===vt){for(Ot=gt+3;ut<Ot;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}ut-=gt,xt=0,ht=3+(7&(st>>>=gt)),st>>>=3,ut-=3}else{for(Ot=gt+7;ut<Ot;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}ut-=gt,xt=0,ht=11+(127&(st>>>=gt)),st>>>=7,ut-=7}if(r.have+ht>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=$;break}for(;ht--;)r.lens[r.have++]=xt}}if(r.mode===$)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=$;break}if(r.lenbits=9,St={bits:r.lenbits},Et=s(l,r.lens,0,r.nlen,r.lencode,0,r.work,St),r.lenbits=St.bits,Et){t.msg="invalid literal/lengths set",r.mode=$;break}if(r.distbits=6,r.distcode=r.distdyn,St={bits:r.distbits},Et=s(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,St),r.distbits=St.bits,Et){t.msg="invalid distances set",r.mode=$;break}if(r.mode=z,e===p)break t;case z:r.mode=U;case U:if(ot>=6&&at>=258){t.next_out=it,t.avail_out=at,t.next_in=rt,t.avail_in=ot,r.hold=st,r.bits=ut,a(t,ct),it=t.next_out,et=t.output,at=t.avail_out,rt=t.next_in,tt=t.input,ot=t.avail_in,st=r.hold,ut=r.bits,r.mode===R&&(r.back=-1);break}for(r.back=0;mt=(Tt=r.lencode[st&(1<<r.lenbits)-1])>>>16&255,vt=65535&Tt,!((gt=Tt>>>24)<=ut);){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(mt&&0==(240&mt)){for(_t=gt,bt=mt,wt=vt;mt=(Tt=r.lencode[wt+((st&(1<<_t+bt)-1)>>_t)])>>>16&255,vt=65535&Tt,!(_t+(gt=Tt>>>24)<=ut);){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}st>>>=_t,ut-=_t,r.back+=_t}if(st>>>=gt,ut-=gt,r.back+=gt,r.length=vt,0===mt){r.mode=X;break}if(32&mt){r.back=-1,r.mode=R;break}if(64&mt){t.msg="invalid literal/length code",r.mode=$;break}r.extra=15&mt,r.mode=q;case q:if(r.extra){for(Ot=r.extra;ut<Ot;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}r.length+=st&(1<<r.extra)-1,st>>>=r.extra,ut-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=V;case V:for(;mt=(Tt=r.distcode[st&(1<<r.distbits)-1])>>>16&255,vt=65535&Tt,!((gt=Tt>>>24)<=ut);){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(0==(240&mt)){for(_t=gt,bt=mt,wt=vt;mt=(Tt=r.distcode[wt+((st&(1<<_t+bt)-1)>>_t)])>>>16&255,vt=65535&Tt,!(_t+(gt=Tt>>>24)<=ut);){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}st>>>=_t,ut-=_t,r.back+=_t}if(st>>>=gt,ut-=gt,r.back+=gt,64&mt){t.msg="invalid distance code",r.mode=$;break}r.offset=vt,r.extra=15&mt,r.mode=Y;case Y:if(r.extra){for(Ot=r.extra;ut<Ot;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}r.offset+=st&(1<<r.extra)-1,st>>>=r.extra,ut-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=$;break}r.mode=W;case W:if(0===at)break t;if(ht=ct-at,r.offset>ht){if((ht=r.offset-ht)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=$;break}ht>r.wnext?(ht-=r.wnext,dt=r.wsize-ht):dt=r.wnext-ht,ht>r.length&&(ht=r.length),yt=r.window}else yt=et,dt=it-r.offset,ht=r.length;ht>at&&(ht=at),at-=ht,r.length-=ht;do{et[it++]=yt[dt++]}while(--ht);0===r.length&&(r.mode=U);break;case X:if(0===at)break t;et[it++]=r.length,at--,r.mode=U;break;case Z:if(r.wrap){for(;ut<32;){if(0===ot)break t;ot--,st|=tt[rt++]<<ut,ut+=8}if(ct-=at,t.total_out+=ct,r.total+=ct,ct&&(t.adler=r.check=r.flags?o(r.check,et,ct,it-ct):i(r.check,et,ct,it-ct)),ct=at,(r.flags?st:nt(st))!==r.check){t.msg="incorrect data check",r.mode=$;break}st=0,ut=0}r.mode=H;case H:if(r.wrap&&r.flags){for(;ut<32;){if(0===ot)break t;ot--,st+=tt[rt++]<<ut,ut+=8}if(st!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=$;break}st=0,ut=0}r.mode=K;case K:Et=y;break t;case $:Et=v;break t;case J:return _;case Q:default:return m}return t.next_out=it,t.avail_out=at,t.next_in=rt,t.avail_in=ot,r.hold=st,r.bits=ut,(r.wsize||ct!==t.avail_out&&r.mode<$&&(r.mode<Z||e!==h))&&pt(t,t.output,t.next_out,ct-t.avail_out)?(r.mode=J,_):(lt-=t.avail_in,ct-=t.avail_out,t.total_in+=lt,t.total_out+=ct,r.total+=ct,r.wrap&&ct&&(t.adler=r.check=r.flags?o(r.check,et,ct,t.next_out-ct):i(r.check,et,ct,t.next_out-ct)),t.data_type=r.bits+(r.last?64:0)+(r.mode===R?128:0)+(r.mode===z||r.mode===F?256:0),(0===lt&&0===ct||e===h)&&Et===d&&(Et=b),Et)},e.inflateEnd=function(t){if(!t||!t.state)return m;var e=t.state;return e.window&&(e.window=null),t.state=null,d},e.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?m:(r.head=e,e.done=!1,d):m},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&r.mode!==k?m:r.mode===k&&i(1,e,n,0)!==r.check?v:pt(t,e,n,n)?(r.mode=J,_):(r.havedict=1,d):m},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";t.exports=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_,b,w,x,E,S,O,T;r=t.state,n=t.next_in,O=t.input,i=n+(t.avail_in-5),o=t.next_out,T=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,p=r.hold,d=r.bits,y=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{d<15&&(p+=O[n++]<<d,d+=8,p+=O[n++]<<d,d+=8),_=y[p&m];e:for(;;){if(p>>>=b=_>>>24,d-=b,0===(b=_>>>16&255))T[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=y[(65535&_)+(p&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&_,(b&=15)&&(d<b&&(p+=O[n++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=O[n++]<<d,d+=8,p+=O[n++]<<d,d+=8),_=g[p&v];r:for(;;){if(p>>>=b=_>>>24,d-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=g[(65535&_)+(p&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&_,d<(b&=15)&&(p+=O[n++]<<d,(d+=8)<b&&(p+=O[n++]<<d,d+=8)),(x+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=b,d-=b,x>(b=o-a)){if((b=x-b)>c&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=0,S=f,0===h){if(E+=l-b,b<w){w-=b;do{T[o++]=f[E++]}while(--b);E=o-x,S=T}}else if(h<b){if(E+=l+h-b,(b-=h)<w){w-=b;do{T[o++]=f[E++]}while(--b);if(E=0,h<w){w-=b=h;do{T[o++]=f[E++]}while(--b);E=o-x,S=T}}}else if(E+=h-b,b<w){w-=b;do{T[o++]=f[E++]}while(--b);E=o-x,S=T}for(;w>2;)T[o++]=S[E++],T[o++]=S[E++],T[o++]=S[E++],w-=3;w&&(T[o++]=S[E++],w>1&&(T[o++]=S[E++]))}else{E=o-x;do{T[o++]=T[E++],T[o++]=T[E++],T[o++]=T[E++],w-=3}while(w>2);w&&(T[o++]=T[E++],w>1&&(T[o++]=T[E++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}},function(t,e,r){"use strict";var n=r(13),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,l,c,h,f){var p,d,y,g,m,v,_,b,w,x=f.bits,E=0,S=0,O=0,T=0,M=0,I=0,P=0,C=0,L=0,k=0,R=null,A=0,N=new n.Buf16(16),F=new n.Buf16(16),j=null,D=0;for(E=0;E<=15;E++)N[E]=0;for(S=0;S<u;S++)N[e[r+S]]++;for(M=x,T=15;T>=1&&0===N[T];T--);if(M>T&&(M=T),0===T)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(O=1;O<T&&0===N[O];O++);for(M<O&&(M=O),C=1,E=1;E<=15;E++)if(C<<=1,(C-=N[E])<0)return-1;if(C>0&&(0===t||1!==T))return-1;for(F[1]=0,E=1;E<15;E++)F[E+1]=F[E]+N[E];for(S=0;S<u;S++)0!==e[r+S]&&(h[F[e[r+S]]++]=S);if(0===t?(R=j=h,v=19):1===t?(R=i,A-=257,j=o,D-=257,v=256):(R=a,j=s,v=-1),k=0,S=0,E=O,m=c,I=M,P=0,y=-1,g=(L=1<<M)-1,1===t&&L>852||2===t&&L>592)return 1;for(;;){_=E-P,h[S]<v?(b=0,w=h[S]):h[S]>v?(b=j[D+h[S]],w=R[A+h[S]]):(b=96,w=0),p=1<<E-P,O=d=1<<I;do{l[m+(k>>P)+(d-=p)]=_<<24|b<<16|w|0}while(0!==d);for(p=1<<E-1;k&p;)p>>=1;if(0!==p?(k&=p-1,k+=p):k=0,S++,0==--N[E]){if(E===T)break;E=e[r+h[S]]}if(E>M&&(k&g)!==y){for(0===P&&(P=M),m+=O,C=1<<(I=E-P);I+P<T&&!((C-=N[I+P])<=0);)I++,C<<=1;if(L+=1<<I,1===t&&L>852||2===t&&L>592)return 1;l[y=k&g]=M<<24|I<<16|m-c|0}}return 0!==k&&(l[m+k]=E-P<<24|64<<16|0),f.bits=M,0}},function(t,e,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,r){},,function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}[].includes||(Array.prototype.includes=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i,o=parseInt(arguments[1])||0;for(o>=0?n=o:(n=r+o)<0&&(n=0);n<r;){if(t===(i=e[n])||Object.equals(t,i)||t!=t&&i!=i)return!0;n++}return!1}),[].remove||(Array.prototype.remove=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i=parseInt(arguments[1])||0;i>=0?n=i:(n=r+i)<0&&(n=0);for(var o,a=[];n<r;)(t===(o=e[n])||Object.equals(t,o)||t!=t&&o!=o)&&a.push(n),n++;var s=0;a.forEach(function(t){t+=s,e.splice(t,1),s--})}),Object.equals||(Object.equals=function(t,e){if(null!==t.equals&&"function"==typeof t.equals&&t.equals.call)return t.equals(e);if(null!==e.equals&&"function"==typeof e.equals&&e.equals.call)return e.equals(t);var n,i=[],o=[];if(isNaN(t)&&isNaN(e)&&"number"==typeof t&&"number"==typeof e)return!0;if(t===e)return!0;if("function"==typeof t&&"function"==typeof e||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(i.indexOf(t)>-1||o.indexOf(e)>-1)return!1;for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1}for(n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1;switch(r(t[n])){case"object":case"function":if(i.push(t),o.push(e),!Object.equals(t[n],e[n]))return!1;i.pop(),o.pop();break;default:if(t[n]!==e[n])return!1}}return!0})},function(t,e,r){var n=r(233).newImageData;function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n,i,o=e.buffers,a=e.meta,s=e.imageOps,u=e.width,l=e.height,c=o.length,h=o[0].byteLength;if(s){var f=new Array(c);for(i=0;i<c;++i)f[i]=r(new Uint8ClampedArray(o[i]),u,l);n=t(f,a).data}else{n=new Uint8ClampedArray(h);var p=new Array(c),d=new Array(c);for(i=0;i<c;++i)p[i]=new Uint8ClampedArray(o[i]),d[i]=[0,0,0,0];for(var y=0;y<h;y+=4){for(var g=0;g<c;++g){var m=p[g];d[g][0]=m[y],d[g][1]=m[y+1],d[g][2]=m[y+2],d[g][3]=m[y+3]}var v=t(d,a);n[y]=v[0],n[y+1]=v[1],n[y+2]=v[2],n[y+3]=v[3]}}return n.buffer}}function o(t,e){var r=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(r,{type:"text/javascript"}),o=URL.createObjectURL(n),a=new Worker(o);return a.addEventListener("message",e),a}function a(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=o(t,this._onWorkerMessage.bind(this,n));else r[0]=function(t,e){var r=i(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:r(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}a.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},a.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},a.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},a.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map(function(t){return t.data.buffer}),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,l=[],c=0,h=n.length;c<h;++c)l.push(n[s].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}}},a.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},a.prototype._resolveJob=function(){var t,e,r=this._job,i=this._workers.length;if(1===i)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var a=4*Math.ceil(o/4/i),s=0;s<i;++s){var u=this._dataLookup[s].buffer,l=s*a;t.set(new Uint8ClampedArray(u),l),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,n(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},t.exports=a},function(t,e){var r=!0;try{new ImageData(10,10)}catch(t){r=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,i){if(r)return new ImageData(t,e,i);var o=n.createImageData(e,i);return o.data.set(t),o}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"easeIn",function(){return Nc}),r.d(n,"easeOut",function(){return Fc}),r.d(n,"inAndOut",function(){return jc}),r.d(n,"linear",function(){return Dc}),r.d(n,"upAndDown",function(){return Gc});var i={};r.r(i),r.d(i,"LEFT",function(){return gb}),r.d(i,"CENTER",function(){return mb}),r.d(i,"RIGHT",function(){return vb}),r.d(i,"JUSTIFY",function(){return _b});var o={};r.r(o),r.d(o,"TOP",function(){return bb}),r.d(o,"MIDDLE",function(){return wb}),r.d(o,"BOTTOM",function(){return xb}),r.d(o,"ALPHABETIC",function(){return Eb}),r.d(o,"HANGING",function(){return Sb}),r.d(o,"IDEOGRAPHIC",function(){return Ob});var a={};r.r(a),r.d(a,"POINT",function(){return VL}),r.d(a,"LINE",function(){return YL}),r.d(a,"POLYGON",function(){return WL}),r.d(a,"MPOINT",function(){return XL}),r.d(a,"MLINE",function(){return ZL}),r.d(a,"MPOLYGON",function(){return HL});var s={};r.r(s),r.d(s,"show",function(){return iF}),r.d(s,"info",function(){return oF}),r.d(s,"error",function(){return aF}),r.d(s,"success",function(){return sF});var u=r(5),l=r.n(u),c=r(92),h={inches:1,in:1,Inch:1,ft:12,mi:63360,m:39.3701,dd:4374754,yd:36,d:4374754,degrees:4374754,nmi:72913.4252,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500,mm:39.37/1e3,cm:.3937,dm:39.37*100,km:39370,kmi:72913.4252,fath:71.999856,ch:791.998416,link:7.91998416,"us-in":1,"us-ft":12,"us-yd":36,"us-ch":792.0000000000001,"us-mi":63360,"ind-yd":35.999740205100004,"ind-ft":11.9999134017,"ind-ch":791.9942845122};function f(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d=function(t){return void 0===t},y=function(t){var e=!1;return null===t||d(t)||(e="boolean"==typeof t),e},g=function(t){var e=!1;return y(t)||"number"==typeof t||(d(t)?e=!0:t?null===t&&(e=!0):e=!0),e},m=function(t){var e=!1;return g(t)||(e=Object.prototype.toString.call(t)===Object.prototype.toString.call([])),e},v=function t(e){var r=!1;return g(e)?r=!0:m(e)?(r=!0,e.length>0&&(r=!e.some(function(e){return!t(e)}))):"string"==typeof e&&0===e.trim().length&&(r=!0),r},_=function(t){var e=!1;return g(t)||(e="function"==typeof t&&!d(t.call)),e},b=function(t){var e=!1;return g(t)||(e="object"===p(t)&&!d(t.toString)),e},w=function(t){var e=!1;return g(t)||(e="string"==typeof t),e},x=function(t){var e=!1;return!g(t)&&w(t)&&(e=/(https?:\/\/[^*]+)/.test(t)),e},E=function(t,e){var r=t;return!v(r)&&w(r)&&(r=r.trim(),r=e?r.toUpperCase():r.toLowerCase()),r},S=function(t,e){var r=null,n=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=e,o=i.indexOf("?");-1!==o&&(i=i.substring(o),null!==(r=new RegExp("[\\?&]".concat(n,"=([^&#]*)")).exec(i))&&(r=decodeURIComponent(r[1].replace(/\+/g," "))));return r},O=function(t,e){var r=t;-1===r.indexOf("?")?r+="?":"?"!==r.charAt(r.length-1)&&(r+="&");var n="";b(e)?(Object.keys(e).forEach(function(t){var r=e[t];n+=t,n+="=",n+=encodeURIComponent(r),n+="&"}),n=n.substring(0,n.length-1)):w(e)&&(n=e);return r+=n},T=function(t,e){var r="";return v(t)||(r=t),r=r.concat(Math.random()).replace(/0\./,""),v(e)||(r=r.concat(e)),r},I=function(t,e){var r=t;return r=O(r,"request=GetCapabilities"),r=O(r,"service=WMS"),r=O(r,{version:e})},P=function(t,e){var r=t;return r=O(r,"request=GetCapabilities"),r=O(r,"service=WMTS"),v(e)||(r=O(r,{version:e})),r},C=function(t,e,r){var n=t,i=e,o=new Array(r);n=Number.parseFloat(n),i=Number.parseFloat(i);var a=2;Number.isNaN(n)||(a=Math.pow(i/n,1/(r-1)));for(var s=0;s<r;s+=1)o[s]=i/Math.pow(a,s);return o.sort(function(t,e){return e-t}),o},L=function(t,e){var r,n=e;v(t)||(g(n)&&(n="degrees"),r=1/((t>1?1/t:t)*h[n]*72));return r},k=function(t,e,r,n){var i=t,o=null,a=null;m(i)?(o=i[2]-i[0],a=i[3]-i[1]):b(i)?(o=i.x.max-i.x.min,a=i.y.max-i.y.min):w(i)&&(o=(i=i.split(","))[2]-i[0],a=i[3]-i[1]);var s=o/e[0],u=a/e[1],l=Math.max(s,u);return C(null,l,r)},R=function(t,e){var r=e;return v(r)&&(r="degrees"),t*h[r]*72},A=function(t){var e;if(!v(t)){var r=document.createElement("div");r.innerHTML=t,e=r.children[0]}return e},N=function(t){var e=t;if(e&&(e=e.trim()).length>0){var r=e.indexOf(":");-1!==r&&(r+=1,e=e.substring(r,e.length))}return e},F=function(t){var e=E(t);return e=(e=e.replace(/_(\w)/g,function(t,e){return" ".concat(e.toUpperCase())})).replace(/^\w/,function(t){return t.toUpperCase()})},j=function(t){var e=null;if(!v(t)){e=(e=t[0]).replace(/\/+\s*$/,"");for(var r=1,n=t.length;r<n;r+=1){var i=t[r];0!==i.indexOf("/")&&(e=e.concat("/")),e=e.concat(i)}}return e},D=function(t,e,r){var n=Object(t),i=parseInt(n.length,10)||0;if(0===i)return!1;var o,a,s=parseInt(r,10)||0;for(s>=0?o=s:(o=i+s)<0&&(o=0);o<i;){if(e===(a=n[o])||Object.equals(e,a))return!0;o+=1}return!1},G=function t(e,r,n){var i=e;return Object.keys(r).forEach(function(e){d(i[e])?i[e]=r[e]:Object.getPrototypeOf(i[e])===Object.prototype?t(i[e],r[e],n):!0===n&&(i[e]=r[e])}),i},B=function(t){return t.replace(/(<\s*script[^>]*>)+[^<]*(<\s*\/\s*script[^>]*>)+/gi,"").replace(/(('|')\s*\+\s*)?\s*eval\s*\(.*\)\s*(\+\s*('|'))?/gi,"")},z=function(t){var e=t;if("ontouchstart"in document){var r=0;e.addEventListener("touchstart",function(t){r=e.scrollTop+t.touches[0].pageY}),e.addEventListener("touchmove",function(t){e.scrollTop=r-t.touches[0].pageY})}},U=function(t,e){var r=t.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1"),n=e.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1");return r.toLowerCase()===n.toLowerCase()},q=function(t){var e=["Geometry".toLowerCase(),"GeometryPropertyType".toLowerCase(),"Point".toLowerCase(),"LineString".toLowerCase(),"LinearRing".toLowerCase(),"Polygon".toLowerCase(),"MultiPoint".toLowerCase(),"MultiLineString".toLowerCase(),"MultiPolygon".toLowerCase(),"GeometryCollection".toLowerCase(),"Circle".toLowerCase(),"pointpropertytype","polygonpropertytype","linestringpropertytype","geometrypropertytype","multisurfacepropertytype","multilinestringpropertytype","surfacepropertytype","geometrypropertytype","geometryarraypropertytype","multigeometrypropertytype","multipolygonpropertytype","multipointpropertytype","abstractgeometricaggregatetype","pointarraypropertytype","curvearraypropertytype","solidpropertytype","solidarraypropertytype"],r=t.toLowerCase();return-1!==e.indexOf(r)},V=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},Y=function(t){var e=t;!w(t)&&t.outerHTML&&(e=t.outerHTML);var r=document.createElement("DIV");return r.innerHTML=e,r.textContent||r.innerText||""},W=function(t){var e;if(w(t)){var r=l()(t).hex();r=r.replace(/^#/,"0x"),e=l()(16777215-r).hex()}return e},X=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return v(r)||Object.keys(r).forEach(function(e){var i=r[e];m(i)?i=f(i):b(i)&&(i=t({},i)),v(n[e])?n[e]=i:b(n[e])&&t(n[e],i)}),n},Z=function(t,e){return t.ORDER-e.ORDER},H=function t(e){var r;return m(e)?r=(r=f(e)).map(t):b(e)?(r=X({},e),Object.keys(r).forEach(function(e){var n=r[e];_(n)?r[e]="{{f}}".concat(n.toString()):b(n)&&(r[e]=t(n))})):r=_(e)?"{{f}}".concat(e.toString()):e,r},K=function t(e){var r=e;if(/^\{\{f\}\}/.test(e)){var n=e.replace(/^\{\{f\}\}(.+)/,"$1");r=new Function("f","return ".concat(n))()}else Object.keys(r).forEach(function(e){var n=r[e];if(/^\{\{f\}\}/.test(n)){var i=n.replace(/^\{\{f\}\}(.+)/,"$1");r[e]=new Function("f","return ".concat(i))()}else b(n)&&t(n)});return r},$=function t(e){var r=!1;return Array.isArray(e)||"object"!==p(e)||v(e)?("function"==typeof e||"string"==typeof e&&/\{\{.*\}\}/.test(e))&&(r=!0):r=Object.values(e).some(function(e){return t(e)}),r},J=c,Q=function(t){return J},tt=function(t){var e=null;return v(t)||(e=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],t.forEach(function(t){v(t)||(e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]))})),e};function et(){return function(){throw new Error("Unimplemented abstract method.")}()}var rt=0;function nt(t){return t.ol_uid||(t.ol_uid=String(++rt))}var it="6.3.1",ot={PROPERTYCHANGE:"propertychange"},at="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};function st(t){for(var e in t)delete t[e]}var ut="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function lt(t){var e;for(e in t)return!1;return!e}function ct(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function ht(t,e,r,n){return ct(t,e,r,n,!0)}function ft(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),st(t))}var pt=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function dt(t,e){return t>e?1:t<e?-1:0}function yt(t,e){return t.indexOf(e)>=0}function gt(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function mt(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function vt(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function _t(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null}function bt(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function wt(t,e){var r;return!t.every(function(n,i){return r=i,!e(n,i,t)})?r:-1}function xt(){return!0}function Et(){return!1}function St(){}function Ot(t){t.stopPropagation()}var Tt,Mt=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),It=(Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Pt=function(t){function e(e){var r=t.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_={},r.dispatching_={},r.listeners_={},r}return It(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_[t];r||(r=[],this.listeners_[t]=r),-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Mt(t):t,r=e.type;e.target||(e.target=this.eventTarget_||this);var n,i=this.listeners_[r];if(i){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var o=0,a=i.length;o<a;++o)if(!1===(n="handleEvent"in i[o]?i[o].handleEvent(e):i[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var s=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];s--;)this.removeEventListener(r,St);delete this.dispatching_[r]}return n}},e.prototype.disposeInternal=function(){st(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var r=this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(r[n]=St,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}},e}(pt),Ct={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"},Lt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function kt(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)ft(t[e]);else ft(t)}var Rt=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return Lt(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Ct.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=ct(this,t[i],e);return n}return ct(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=ht(this,t[i],e);return n}return ht(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(Pt),At=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nt=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.key=r,i.oldValue=n,i}return At(e,t),e}(Mt),Ft=function(t){function e(e){var r=t.call(this)||this;return nt(r),r.values_={},void 0!==e&&r.setProperties(e),r}return At(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return at({},this.values_)},e.prototype.notify=function(t,e){var r;r=Dt(t),this.dispatchEvent(new Nt(r,t,e)),r=ot.PROPERTYCHANGE,this.dispatchEvent(new Nt(r,t,e))},e.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},e}(Rt),jt={};function Dt(t){return jt.hasOwnProperty(t)?jt[t]:jt[t]="change:"+t}var Gt=Ft,Bt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zt=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===it?it:"v"+it.split("-")[0])+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return Bt(e,t),e}(Error);function Ut(t,e){if(!t)throw new zt(e)}var qt={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Vt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Yt(t){for(var e=Qt(),r=0,n=t.length;r<n;++r)ae(e,t[r]);return e}function Wt(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Xt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Zt(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i}function Ht(t,e){return $t(t,e[0],e[1])}function Kt(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function $t(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function Jt(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=Vt.UNKNOWN;return a<r?u|=Vt.LEFT:a>i&&(u|=Vt.RIGHT),s<n?u|=Vt.BELOW:s>o&&(u|=Vt.ABOVE),u===Vt.UNKNOWN&&(u=Vt.INTERSECTING),u}function Qt(){return[1/0,1/0,-1/0,-1/0]}function te(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function ee(t){return te(1/0,1/0,-1/0,-1/0,t)}function re(t,e){var r=t[0],n=t[1];return te(r,n,r,n,e)}function ne(t,e,r,n,i){return ue(ee(i),t,e,r,n)}function ie(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function oe(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function ae(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function se(t,e){for(var r=0,n=e.length;r<n;++r)ae(t,e[r]);return t}function ue(t,e,r,n,i){for(;r<n;r+=i)le(t,e[r],e[r+1]);return t}function le(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function ce(t,e){var r;return(r=e(fe(t)))?r:(r=e(pe(t)))?r:(r=e(be(t)))?r:(r=e(_e(t)))||!1}function he(t){var e=0;return Ee(t)||(e=we(t)*me(t)),e}function fe(t){return[t[0],t[1]]}function pe(t){return[t[2],t[1]]}function de(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ye(t,e){var r;return e===qt.BOTTOM_LEFT?r=fe(t):e===qt.BOTTOM_RIGHT?r=pe(t):e===qt.TOP_LEFT?r=_e(t):e===qt.TOP_RIGHT?r=be(t):Ut(!1,13),r}function ge(t,e,r,n,i){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),u=Math.sin(r),l=o*s,c=o*u,h=a*s,f=a*u,p=t[0],d=t[1],y=p-l+f,g=p-l-f,m=p+l-f,v=p+l+f,_=d-c-h,b=d-c+h,w=d+c+h,x=d+c-h;return te(Math.min(y,g,m,v),Math.min(_,b,w,x),Math.max(y,g,m,v),Math.max(_,b,w,x),i)}function me(t){return t[3]-t[1]}function ve(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return xe(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):ee(n),n}function _e(t){return[t[0],t[3]]}function be(t){return[t[2],t[3]]}function we(t){return t[2]-t[0]}function xe(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ee(t){return t[2]<t[0]||t[3]<t[1]}function Se(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function Oe(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)i.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],l=[],c=(s=0,i.length);s<c;s+=2)u.push(i[s]),l.push(i[s+1]);return function(t,e,r){return te(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function Te(t,e){var r=e.getExtent(),n=de(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=we(r),o=Math.floor((n[0]-r[0])/i)*i;t[0]-=o,t[2]-=o}return t}function Me(t,e,r,n,i,o){for(var a=o||[],s=0,u=e;u<r;u+=n){var l=t[u],c=t[u+1];a[s++]=i[0]*l+i[2]*c+i[4],a[s++]=i[1]*l+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function Ie(t,e,r,n,i,o,a){for(var s=a||[],u=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],f=0,p=e;p<r;p+=n){var d=t[p]-c,y=t[p+1]-h;s[f++]=c+d*u-y*l,s[f++]=h+d*l+y*u;for(var g=p+2;g<p+n;++g)s[f++]=t[g]}return a&&s.length!=f&&(s.length=f),s}function Pe(t,e,r,n,i,o,a){for(var s=a||[],u=0,l=e;l<r;l+=n){s[u++]=t[l]+i,s[u++]=t[l+1]+o;for(var c=l+2;c<l+n;++c)s[u++]=t[c]}return a&&s.length!=u&&(s.length=u),s}function Ce(t,e,r){return Math.min(Math.max(t,e),r)}var Le="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function ke(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=s*u)}return Re(t,e,r,n)}function Re(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function Ae(t){return 180*t/Math.PI}function Ne(t){return t*Math.PI/180}function Fe(t,e){var r=t%e;return r*e<0?r+e:r}function je(t,e,r){return t+r*(e-t)}var De={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ge=6371008.8;function Be(t,e,r){var n=r||Ge,i=Ne(t[1]),o=Ne(e[1]),a=(o-i)/2,s=Ne(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function ze(t,e){for(var r=0,n=0,i=t.length;n<i-1;++n)r+=Be(t[n],t[n+1],e);return r}function Ue(t,e){for(var r=0,n=t.length,i=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var s=t[a][0],u=t[a][1];r+=Ne(s-i)*(2+Math.sin(Ne(o))+Math.sin(Ne(u))),i=s,o=u}return r*e*e/2}function qe(t,e,r,n){var i=n||Ge,o=Ne(t[1]),a=Ne(t[0]),s=e/i,u=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(r));return[Ae(a+Math.atan2(Math.sin(r)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(u))),Ae(u)]}var Ve={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ye={};Ye[Ve.DEGREES]=2*Math.PI*6370997/360,Ye[Ve.FEET]=.3048,Ye[Ve.METERS]=1,Ye[Ve.USFEET]=1200/3937;var We=Ve,Xe=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ye[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),Ze=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),He=6378137,Ke=Math.PI*He,$e=[-Ke,-Ke,Ke,Ke],Je=[-180,-85,180,85],Qe=function(t){function e(e){return t.call(this,{code:e,units:We.METERS,extent:$e,global:!0,worldExtent:Je,getPointResolution:function(t,e){return t/Le(e[1]/He)}})||this}return Ze(e,t),e}(Xe),tr=[new Qe("EPSG:3857"),new Qe("EPSG:102100"),new Qe("EPSG:102113"),new Qe("EPSG:900913"),new Qe("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Qe("urn:ogc:def:crs:EPSG::3857"),new Qe("http://www.opengis.net/gml/srs/epsg.xml#3857")];function er(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=Ke,s=0;s<n;s+=i){o[s]=a*t[s]/180;var u=He*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o}function rr(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i)o[a]=180*t[a]/Ke,o[a+1]=360*Math.atan(Math.exp(t[a+1]/He))/Math.PI-90;return o}var nr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ir=[-180,-90,180,90],or=6378137*Math.PI/180,ar=function(t){function e(e,r){return t.call(this,{code:e,units:We.DEGREES,extent:ir,axisOrientation:r,global:!0,metersPerUnit:or,worldExtent:ir})||this}return nr(e,t),e}(Xe),sr=[new ar("CRS:84"),new ar("EPSG:4326","neu"),new ar("urn:ogc:def:crs:EPSG::4326","neu"),new ar("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ar("urn:ogc:def:crs:OGC:1.3:CRS84"),new ar("urn:ogc:def:crs:OGC:2:84"),new ar("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ar("urn:x-ogc:def:crs:EPSG:4326","neu")],ur={};function lr(t,e,r){var n=t.getCode(),i=e.getCode();n in ur||(ur[n]={}),ur[n][i]=r}function cr(t,e){var r;return t in ur&&e in ur[t]&&(r=ur[t][e]),r}var hr={};function fr(t,e,r){var n;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function pr(t,e,r){if(void 0!==e&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function dr(t){!function(t,e){hr[t]=e}(t.getCode(),t),lr(t,t,fr)}function yr(t){return"string"==typeof t?hr[t]||null:t||null}function gr(t,e,r,n){var i,o=(t=yr(t)).getPointResolutionFunc();if(o)i=o(e,r),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/Ye[n]);else if(t.getUnits()==We.DEGREES&&!n||n==We.DEGREES)i=e;else{var a,s=xr(t,yr("EPSG:4326")),u=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];i=(Be((u=s(u,u,2)).slice(0,2),u.slice(2,4))+Be(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=n?Ye[n]:t.getMetersPerUnit())&&(i/=a)}return i}function mr(t){!function(t){t.forEach(dr)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&lr(e,t,fr)})})}function vr(t,e){return t?"string"==typeof t?yr(t):t:yr(e)}function _r(t){return function(e,r,n){for(var i=e.length,o=void 0!==n?n:2,a=void 0!==r?r:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var l=o-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function br(t,e,r,n){var i=yr(t),o=yr(e);lr(i,o,_r(r)),lr(o,i,_r(n))}function wr(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?r:xr(t,e)===fr&&r}function xr(t,e){var r=cr(t.getCode(),e.getCode());return r||(r=pr),r}function Er(t,e){return xr(yr(t),yr(e))}function Sr(t,e,r){return Er(e,r)(t,void 0,t.length)}function Or(t,e,r,n){return Oe(t,Er(e,r),void 0,n)}var Tr,Mr,Ir,Pr=null;function Cr(){return Pr}function Lr(t,e){return Pr?Sr(t,e,Pr):t}function kr(t,e){return Pr?Sr(t,Pr,e):t}function Rr(t,e){return Pr?Or(t,e,Pr):t}function Ar(t,e){return Pr?Or(t,Pr,e):t}mr(tr),mr(sr),Tr=tr,Mr=er,Ir=rr,sr.forEach(function(t){Tr.forEach(function(e){lr(t,e,Mr),lr(e,t,Ir)})});var Nr=new Array(6);function Fr(t){return Dr(t,1,0,0,1,0,0)}function jr(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=r*u+i*l,t[1]=n*u+o*l,t[2]=r*c+i*h,t[3]=n*c+o*h,t[4]=r*f+i*p+a,t[5]=n*f+o*p+s,t}function Dr(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function Gr(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function Br(t,e,r){return jr(t,Dr(Nr,e,0,0,r,0,0))}function zr(t,e,r,n,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=i*u,t[2]=-n*u,t[3]=i*l,t[4]=a*n*l-s*n*u+e,t[5]=a*i*u+s*i*l+r,t}function Ur(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];Ut(0!==n,32);var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=i/n,t[4]=(a*l-s*u)/n,t[5]=-(i*l-o*u)/n,t}function qr(t){return"matrix("+t.join(", ")+")"}var Vr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yr=[1,0,0,1,0,0],Wr=function(t){function e(){var e,r,n,i,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===i&&bt(t,n)||(o=!0,i=this,n=t,r=e.apply(this,arguments)),r}),a}return Vr(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return et()},e.prototype.closestPointXY=function(t,e,r,n){return et()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return et()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){et()},e.prototype.scale=function(t,e,r){et()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return et()},e.prototype.getType=function(){return et()},e.prototype.applyTransform=function(t){et()},e.prototype.intersectsExtent=function(t){return et()},e.prototype.translate=function(t,e){et()},e.prototype.transform=function(t,e){var r=yr(t),n=r.getUnits()==We.TILE_PIXELS?function(t,n,i){var o=r.getExtent(),a=r.getWorldExtent(),s=me(a)/me(o);return zr(Yr,a[0],a[3],s,-s,0,0,0),Me(t,0,t.length,i,Yr,n),Er(r,e)(t,n,i)}:Er(r,e);return this.applyTransform(n),this},e}(Gt),Xr={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Zr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Hr(t){var e;return t==Xr.XY?e=2:t==Xr.XYZ||t==Xr.XYM?e=3:t==Xr.XYZM&&(e=4),e}var Kr=function(t){function e(){var e=t.call(this)||this;return e.layout=Xr.XY,e.stride=2,e.flatCoordinates=null,e}return Zr(e,t),e.prototype.computeExtent=function(t){return ne(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return et()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Hr(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){et()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=Hr(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=Xr.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Xr.XY:3==t?e=Xr.XYZ:4==t&&(e=Xr.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Ie(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var i=r;i||(i=de(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,r,n,i,o,a,s){for(var u=s||[],l=a[0],c=a[1],h=0,f=e;f<r;f+=n){var p=t[f]-l,d=t[f+1]-c;u[h++]=l+i*p,u[h++]=c+o*d;for(var y=f+2;y<f+n;++y)u[h++]=t[y]}s&&u.length!=h&&(u.length=h)}(o,0,o.length,a,t,n,i,o),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Pe(r,0,r.length,n,t,e,r),this.changed()}},e}(Wr);function $r(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function Jr(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function Qr(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=Jr(t,e,r[s],n);o[a++]=l,e=l}return o.length=a,o}var tn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),en=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return tn(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=Re(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)r[s]=i[s];return r.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return re(this.flatCoordinates,t)},e.prototype.getType=function(){return De.POINT},e.prototype.intersectsExtent=function(t){return $t(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$r(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Kr),rn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nn=function(t){function e(e,r,n){var i=t.call(this)||this;if(void 0!==n&&void 0===r)i.setFlatCoordinates(n,e);else{var o=r||0;i.setCenterAndRadius(e,o,n)}return i}return rn(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var l=this.getRadius()/Math.sqrt(s);r[0]=i[0]+l*o,r[1]=i[1]+l*a;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return te(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return De.CIRCLE},e.prototype.intersectsExtent=function(t){if(xe(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||ce(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=$r(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Ie(r,0,r.length,n,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Pe(r,0,r.length,n,t,e,r)),this.changed()},e}(Kr);nn.prototype.transform;var on=nn;function an(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=e;s<r;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function sn(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=an(t,e,l,n,o[a]),e=l}return o.length=a,o}function un(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=sn(t,e,l,n,o[a]),e=l[l.length-1]}return o.length=a,o}var ln=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cn=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return ln(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?vt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){if(n<Zt(this.getExtent(),t,e))return n;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=Re(t,e,i[a],i[a+1]);if(u<n){n=u;for(var l=0;l<o;++l)r[l]=i[a+l];r.length=o}}return n},e.prototype.getCoordinates=function(){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new en(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var a=new en(t.slice(i,i+r),e);n.push(a)}return n},e.prototype.getType=function(){return De.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,i=e.length;n<i;n+=r){if($t(t,e[n],e[n+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Kr);function hn(t,e,r,n,i,o,a){var s,u=t[e],l=t[e+1],c=t[r]-u,h=t[r+1]-l;if(0===c&&0===h)s=e;else{var f=((i-u)*c+(o-l)*h)/(c*c+h*h);if(f>1)s=r;else{if(f>0){for(var p=0;p<n;++p)a[p]=je(t[e+p],t[r+p],f);return void(a.length=n)}s=e}}for(p=0;p<n;++p)a[p]=t[s+p];a.length=n}function fn(t,e,r,n,i){var o=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=Re(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function pn(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=fn(t,e,s,n,i),e=s}return i}function dn(t,e,r,n,i,o,a,s,u,l,c){if(e==r)return l;var h,f;if(0===i){if((f=Re(a,s,t[e],t[e+1]))<l){for(h=0;h<n;++h)u[h]=t[e+h];return u.length=n,f}return l}for(var p=c||[NaN,NaN],d=e+n;d<r;)if(hn(t,d-n,d,n,a,s,p),(f=Re(a,s,p[0],p[1]))<l){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(o&&(hn(t,r-n,e,n,a,s,p),(f=Re(a,s,p[0],p[1]))<l)){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n}return l}function yn(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=dn(t,e,d,n,i,o,a,s,u,l,h),e=d}return l}function gn(t,e,r,n,i,o){var a=NaN,s=NaN,u=(r-e)/n;if(1===u)a=t[e],s=t[e+1];else if(2==u)a=(1-i)*t[e]+i*t[e+n],s=(1-i)*t[e+1]+i*t[e+n+1];else if(0!==u){for(var l=t[e],c=t[e+1],h=0,f=[0],p=e+n;p<r;p+=n){var d=t[p],y=t[p+1];h+=Math.sqrt((d-l)*(d-l)+(y-c)*(y-c)),f.push(h),l=d,c=y}var g=i*h,m=function(t,e,r){for(var n,i,o=r||dt,a=0,s=t.length,u=!1;a<s;)(i=+o(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,u=!i);return u?a:~a}(f,g);if(m<0){var v=(g-f[-m-2])/(f[-m-1]-f[-m-2]),_=e+(-m-2)*n;a=je(t[_],t[_+n],v),s=je(t[_+1],t[_+n+1],v)}else a=t[e+m*n],s=t[e+m*n+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}function mn(t,e,r,n,i,o){if(r==e)return null;var a;if(i<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=i,a):null;if(t[r-1]<i)return o?((a=t.slice(r-n,r))[n-1]=i,a):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;i<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(i==c)return t.slice((s-1)*n,(s-1)*n+n);var h=(i-c)/(t[(s+1)*n-1]-c);a=[];for(var f=0;f<n-1;++f)a.push(je(t[(s-1)*n+f],t[s*n+f],h));return a.push(i),a}function vn(t,e,r,n,i){return!ce(i,function(i){return!_n(t,e,r,n,i[0],i[1])})}function _n(t,e,r,n,i,o){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function bn(t,e,r,n,i,o){if(0===r.length)return!1;if(!_n(t,e,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(_n(t,r[a-1],r[a],n,i,o))return!1;return!0}function wn(t,e,r,n,i){for(var o,a=[t[e],t[e+1]],s=[];e+n<r;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function xn(t,e,r,n,i){var o=ue([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!xe(i,o)&&(!!Kt(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||wn(t,e,r,n,function(t,e){return function(t,e,r){var n=!1,i=Jt(t,e),o=Jt(t,r);if(i===Vt.INTERSECTING||o===Vt.INTERSECTING)n=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=e[0],h=e[1],f=r[0],p=r[1],d=(p-h)/(f-c),y=void 0,g=void 0;o&Vt.ABOVE&&!(i&Vt.ABOVE)&&(n=(y=f-(p-l)/d)>=a&&y<=u),n||!(o&Vt.RIGHT)||i&Vt.RIGHT||(n=(g=p-(f-u)*d)>=s&&g<=l),n||!(o&Vt.BELOW)||i&Vt.BELOW||(n=(y=f-(p-s)/d)>=a&&y<=u),n||!(o&Vt.LEFT)||i&Vt.LEFT||(n=(g=p-(f-a)*d)>=s&&g<=l)}return n}(i,t,e)}))))}function En(t,e,r,n,i){if(!function(t,e,r,n,i){return!!(xn(t,e,r,n,i)||_n(t,e,r,n,i[0],i[1])||_n(t,e,r,n,i[0],i[3])||_n(t,e,r,n,i[2],i[1])||_n(t,e,r,n,i[2],i[3]))}(t,e,r[0],n,i))return!1;if(1===r.length)return!0;for(var o=1,a=r.length;o<a;++o)if(vn(t,r[o-1],r[o],n,i)&&!xn(t,r[o-1],r[o],n,i))return!1;return!0}function Sn(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}function On(t,e,r,n,i,o,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),p=0,d=t[f],y=t[f+1],g=t[h],m=t[h+1],v=f+n;v<h;v+=n){var _=ke(t[v],t[v+1],d,y,g,m);_>p&&(c=v,p=_)}p>i&&(u[(c-e)/n]=1,f+n<c&&l.push(f,c),c+n<h&&l.push(c,h))}for(v=0;v<s;++v)u[v]&&(o[a++]=t[e+v*n],o[a++]=t[e+v*n+1]);return a}function Tn(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=On(t,e,c,n,i,o,a),s.push(a),e=c}return a}function Mn(t,e){return e*Math.round(t/e)}function In(t,e,r,n,i,o,a){if(e==r)return a;var s,u,l=Mn(t[e],i),c=Mn(t[e+1],i);e+=n,o[a++]=l,o[a++]=c;do{if(s=Mn(t[e],i),u=Mn(t[e+1],i),(e+=n)==r)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<r;){var h=Mn(t[e],i),f=Mn(t[e+1],i);if(e+=n,h!=s||f!=u){var p=s-l,d=u-c,y=h-l,g=f-c;p*g==d*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(d<0&&g<d||d==g||d>0&&g>d)?(s=h,u=f):(o[a++]=s,o[a++]=u,l=s,c=u,s=h,u=f)}}return o[a++]=s,o[a++]=u,a}function Pn(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=In(t,e,c,n,i,o,a),s.push(a),e=c}return a}var Cn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ln=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return Cn(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?vt(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Xr.XYM&&this.layout!=Xr.XYZM)return null;var r=void 0!==e&&e;return mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=On(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Xr.XY)},e.prototype.getType=function(){return De.LINE_STRING},e.prototype.intersectsExtent=function(t){return xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Kr);function kn(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function Rn(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=kn(t,e,s,n),e=s}return i}var An=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nn=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return An(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=On(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Xr.XY)},e.prototype.getType=function(){return De.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Kr);function Fn(t,e,r,n,i,o,a){for(var s,u,l,c,h,f,p,d=i[o+1],y=[],g=0,m=r.length;g<m;++g){var v=r[g];for(c=t[v-n],f=t[v-n+1],s=e;s<v;s+=n)h=t[s],p=t[s+1],(d<=f&&p<=d||f<=d&&d<=p)&&(l=(d-f)/(p-f)*(h-c)+c,y.push(l)),c=h,f=p}var _=NaN,b=-1/0;for(y.sort(dt),c=y[0],s=1,u=y.length;s<u;++s){h=y[s];var w=Math.abs(h-c);w>b&&bn(t,e,r,n,l=(c+h)/2,d)&&(_=l,b=w),c=h}return isNaN(_)&&(_=i[o]),a?(a.push(_,d,b),a):[_,d,b]}function jn(t,e,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var u=r[a];o=Fn(t,e,u,n,i,2*a,o),e=u[u.length-1]}return o}function Dn(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function Gn(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function Bn(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=Gn(t,e,u,n);if(0===a){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function zn(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=Gn(t,e,u,n);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&Dn(t,e,u,n),e=u}return e}function Un(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o)e=zn(t,e,r[o],n,i);return e}var qn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vn=function(t){function e(e,r,n){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,e),i.ends_=n):i.setCoordinates(e,r),i}return qn(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?vt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<Zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return bn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Rn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?zn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,sn(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=de(this.getExtent());this.flatInteriorPoint_=Fn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new en(this.getFlatInteriorPoint(),Xr.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Nn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],u=new Nn(e.slice(i,s),t);n.push(u),i=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Bn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=zn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=Pn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,Xr.XY,n)},e.prototype.getType=function(){return De.POLYGON},e.prototype.intersectsExtent=function(t){return En(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Qr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Kr),Yn=Vn;function Wn(t,e,r,n){for(var i=r||32,o=[],a=0;a<i;++a)vt(o,qe(t,e,2*Math.PI*a/i,n));return o.push(o[0],o[1]),new Vn(o,Xr.XY,[o.length])}function Xn(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new Vn(o,Xr.XY,[o.length])}function Zn(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(n+1),u=new Array(s),l=0;l<s;l+=i){u[l]=0,u[l+1]=0;for(var c=2;c<i;c++)u[l+c]=a[c]}var h=[u.length],f=new Vn(u,o,h);return Hn(f,a,t.getRadius(),r),f}function Hn(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=n||0,u=0;u<=a;++u){var l=u*o,c=s+2*Fe(u,a)*Math.PI/a;i[l]=e[0]+r*Math.cos(c),i[l+1]=e[1]+r*Math.sin(c)}t.changed()}var Kn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,r);else if(void 0!==r&&n)i.setFlatCoordinates(r,e),i.ends_=n;else{for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout()),vt(s,h.getFlatCoordinates()),u.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=u}return i}return Kn(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?vt(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<Zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=Xr.XYM&&this.layout!=Xr.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,i=void 0!==r&&r;return function(t,e,r,n,i,o,a){if(a)return mn(t,e,r[r.length-1],n,i,o);var s;if(i<t[n-1])return o?((s=t.slice(0,n))[n-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-n))[n-1]=i,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(e!=c){if(i<t[e+n-1])return null;if(i<=t[c-1])return mn(t,e,c,n,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,i)},e.prototype.getCoordinates=function(){return sn(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Ln(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],u=new Ln(t.slice(i,s),r);n.push(u),i=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];vt(t,gn(e,r,s,i,.5)),r=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=Tn(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,Xr.XY,n)},e.prototype.getType=function(){return De.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){if(xn(t,e,r[o],n,i))return!0;e=r[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Qr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Kr);function Jn(t,e,r,n){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=r.length;a<s;++a){var u=r[a];o=ne(t,e,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}var Qn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ti=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout());for(var f=s.length,p=h.getEnds(),d=0,y=p.length;d<y;++d)p[d]+=f;vt(s,h.getFlatCoordinates()),u.push(p)}r=o,e=s,n=u}return void 0!==r&&n?(i.setFlatCoordinates(r,e),i.endss_=n):i.setCoordinates(e,r),i}return Qn(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;vt(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,r)},e.prototype.closestPointXY=function(t,e,r,n){return n<Zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=pn(t,e,s,n,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=yn(t,e,d,n,i,o,a,s,u,l,h),e=d[d.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return function(t,e,r,n,i,o){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var u=r[a];if(bn(t,e,u,n,i,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=Rn(t,e,s,n),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Un(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,un(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Jn(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=jn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new cn(this.getFlatInteriorPoints().slice(),Xr.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!Bn(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Un(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],h=[];a=Pn(t,e,c,n,i,o,a,h),s.push(h),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,Xr.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new Yn(this.flatCoordinates.slice(e,i),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var h=new Yn(e.slice(i,u),t,s);n.push(h),i=u}return n},e.prototype.getType=function(){return De.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(En(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=function(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=Qr(t,e,r[s],n,o[a]);o[a++]=l,e=l[l.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(Kr),ei=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var ri=function(t){function e(e){var r=t.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(Dt(r.geometryName_),r.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var i=e;r.setProperties(i)}return r}return ei(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ft(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=ct(t,Ct.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;if(Array.isArray(t))e=t;else{Ut("function"==typeof t.getZIndex,41);var r=t;e=[r]}return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Dt(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Dt(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Gt),ni=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?yr(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===We.TILE_PIXELS&&(n=yr(n)).setWorldExtent(e.extent),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return at({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return et()},t.prototype.readFeature=function(t,e){return et()},t.prototype.readFeatures=function(t,e){return et()},t.prototype.readGeometry=function(t,e){return et()},t.prototype.readProjection=function(t){return et()},t.prototype.writeFeature=function(t,e){return et()},t.prototype.writeFeatures=function(t,e){return et()},t.prototype.writeGeometry=function(t,e){return et()},t}();function ii(t,e,r){var n,i=r?yr(r.featureProjection):null,o=r?yr(r.dataProjection):null;if(n=i&&o&&!wr(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&r&&void 0!==r.decimals){var a=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t})}return n}function oi(t,e){var r=e?yr(e.featureProjection):null,n=e?yr(e.dataProjection):null;return r&&n&&!wr(r,n)?Or(t,n,r):t}var ai={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},si=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ui(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var li=function(t){function e(){return t.call(this)||this}return si(e,t),e.prototype.getType=function(){return ai.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(ui(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(ui(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return et()},e.prototype.readFeaturesFromObject=function(t,e){return et()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(ui(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return et()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(ui(t))},e.prototype.readProjectionFromObject=function(t){return et()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return et()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return et()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return et()},e}(ni),ci=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function hi(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var fi=function(t){function e(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return ci(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(ft),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(ct(this.geometries_[t],Ct.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<Zt(this.getExtent(),t,e))return n;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(t,e,r,n);return n},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){ee(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)oe(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return hi(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,i=!1,o=0,a=n.length;o<a;++o){var s=n[o],u=s.getSimplifiedGeometry(t);r.push(u),u!==s&&(i=!0)}if(i){var l=new e(null);return l.setGeometriesArray(r),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return De.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var n=r;n||(n=de(this.getExtent()));for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(hi(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(Wr),pi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function di(t,e){if(!t)return null;var r;switch(t.type){case De.POINT:r=function(t){return new en(t.coordinates)}(t);break;case De.LINE_STRING:r=function(t){return new Ln(t.coordinates)}(t);break;case De.POLYGON:r=function(t){return new Yn(t.coordinates)}(t);break;case De.MULTI_POINT:r=function(t){return new cn(t.coordinates)}(t);break;case De.MULTI_LINE_STRING:r=function(t){return new $n(t.coordinates)}(t);break;case De.MULTI_POLYGON:r=function(t){return new ti(t.coordinates)}(t);break;case De.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map(function(t){return di(t,e)});return new fi(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return ii(r,!1,e)}function yi(t,e){var r,n=(t=ii(t,!0,e)).getType();switch(n){case De.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case De.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case De.POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case De.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case De.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case De.MULTI_POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case De.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var r=at({},e);return delete r.featureProjection,yi(t,r)})}}(t,e);break;case De.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}var gi=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).dataProjection=yr(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(r.defaultFeatureProjection=yr(n.featureProjection)),r.geometryName_=n.geometryName,r.extractGeometryName_=n.extractGeometryName,r}return pi(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=null,n=di((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new ri;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(n),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return di(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=yr(r.properties.name):"EPSG"===r.type?e=yr("EPSG:"+r.properties.code):Ut(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(r.id=n);var i=t.getGeometry();i&&(r.geometry=yi(i,e));var o=t.getProperties();return delete o[t.getGeometryName()],lt(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return yi(t,this.adaptOptions(e))},e}(li),mi=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,vi=/^([a-z]*)$|^hsla?\(.*\)$/i;function _i(t){return"string"==typeof t?t:Ti(t)}function bi(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}var wi,xi,Ei=(wi={},xi=0,function(t){var e;if(wi.hasOwnProperty(t))e=wi[t];else{if(xi>=1024){var r=0;for(var n in wi)0==(3&r++)&&(delete wi[n],--xi)}e=function(t){var e,r,n,i,o;if(vi.exec(t)&&(t=bi(t)),mi.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var u=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),r=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),i=u?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,u&&(i=(i<<4)+i)),o=[e,r,n,i/255]}else 0==t.indexOf("rgba(")?Oi(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Oi(o)):Ut(!1,14);return o}(t),wi[t]=e,++xi}return e});function Si(t){return Array.isArray(t)?t:Ei(t)}function Oi(t){return t[0]=Ce(t[0]+.5|0,0,255),t[1]=Ce(t[1]+.5|0,0,255),t[2]=Ce(t[2]+.5|0,0,255),t[3]=Ce(t[3],0,1),t}function Ti(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}function Mi(t){return Array.isArray(t)?Ti(t):t}var Ii="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Pi=-1!==Ii.indexOf("firefox"),Ci=(-1!==Ii.indexOf("safari")&&Ii.indexOf("chrom"),-1!==Ii.indexOf("webkit")&&-1==Ii.indexOf("edge")),Li=-1!==Ii.indexOf("macintosh"),ki="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ri="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Ai="undefined"!=typeof Image&&Image.prototype.decode,Ni=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Fi(t,e,r){var n=r&&r.length?r.shift():Ri?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function ji(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function Di(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function Gi(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function Bi(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function zi(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var Ui={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},qi="ol-hidden",Vi="ol-selectable",Yi="ol-unselectable",Wi="ol-unsupported",Xi="ol-control",Zi="ol-collapsed",Hi=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ki=["style","variant","weight","size","lineHeight","family"],$i=function(t){var e=t.match(Hi);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=Ki.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[Ki[n]]=o)}return r.families=r.family.split(/,\s?/),r},Ji=[],Qi=[0,0,0,0],to=new Gt,eo=new Pt;eo.setSize=function(){console.warn("labelCache is deprecated.")};var ro,no,io,oo=null,ao={},so=function(){var t,e,r=100,n="32px ",i=["monospace","serif"],o=i.length,a="wmytzilWMYTZIL@#/&?$%10";function s(t,r,s){for(var u=!0,l=0;l<o;++l){var c=i[l];if(e=co(t+" "+r+" "+n+c,a),s!=c){var h=co(t+" "+r+" "+n+s+","+c,a);u=u&&h!=e}}return!!u}function u(){for(var e=!0,n=to.getKeys(),i=0,o=n.length;i<o;++i){var a=n[i];to.get(a)<r&&(s.apply(this,a.split("\n"))?(st(ao),oo=null,ro=void 0,to.set(a,r)):(to.set(a,to.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=$i(e);if(n)for(var i=n.families,o=0,a=i.length;o<a;++o){var l=i[o],c=n.style+"\n"+n.weight+"\n"+l;void 0===to.get(c)&&(to.set(c,r,!0),s(n.style,n.weight,l)||(to.set(c,0,!0),void 0===t&&(t=setInterval(u,32))))}}}(),uo=(io=ao,function(t){var e=io[t];if(null==e)if(Ri){var r=$i(t),n=lo(t,"Žg"),i=isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight);ao[t]=i*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else no||((no=document.createElement("div")).innerHTML="M",no.style.margin="0 !important",no.style.padding="0 !important",no.style.position="absolute !important",no.style.left="-99999px !important"),no.style.font=t,document.body.appendChild(no),e=no.offsetHeight,io[t]=e,document.body.removeChild(no);return e});function lo(t,e){return oo||(oo=Fi(1,1)),t!=ro&&(oo.font=t,ro=oo.font),oo.measureText(e)}function co(t,e){return lo(t,e).width}function ho(t,e,r){if(e in r)return r[e];var n=co(t,e);return r[e]=n,n}function fo(t,e,r,n){0!==e&&(t.translate(r,n),t.rotate(e),t.translate(-r,-n))}function po(t,e,r,n,i,o,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c,c),function(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):t.drawImage(n,i,o,a,s,u,l,a*c,s*c),t.restore()}var yo=null;function go(t){return Ri?qr(t):(yo||(yo=Fi(1,1).canvas),yo.style.transform=qr(t),yo.style.transform)}var mo=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return et()},t.prototype.getImage=function(t){return et()},t.prototype.getHitDetectionImage=function(t){return et()},t.prototype.getImageState=function(){return et()},t.prototype.getImageSize=function(){return et()},t.prototype.getHitDetectionImageSize=function(){return et()},t.prototype.getOrigin=function(){return et()},t.prototype.getSize=function(){return et()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){et()},t.prototype.load=function(){et()},t.prototype.unlistenImageChange=function(t){et()},t}(),vo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_o=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.imageSize_=null,r.hitDetectionImageSize_=null,r.render(),r}return vo(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return Ui.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",r="round",n=0,i=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=Mi(t),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=2*(this.radius_+a)+1,u={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n},l=Fi(s,s);this.canvas_=l.canvas;var c=s=this.canvas_.width,h=this.getDisplacement();this.draw_(u,l,0,0),this.createHitDetectionCanvas_(u),this.anchor_=[s/2-h[0],s/2+h[1]],this.size_=[s,s],this.imageSize_=[c,c]},e.prototype.draw_=function(t,e,r,n){var i,o,a;e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(s*=2),i=0;i<=s;i++)o=2*i*Math.PI/s-Math.PI/2+this.angle_,a=i%2==0?this.radius_:u,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l="#000"),e.fillStyle=Mi(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=Si(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var n=Fi(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,r,n){e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(i*=2);var a=void 0,s=void 0,u=void 0;for(a=0;a<=i;a++)u=2*a*Math.PI/i-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(mo),bo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wo=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return bo(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(_o),xo=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),Eo=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();function So(t){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Oo=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Po,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===So(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Po,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var To=null;function Mo(t,e){if(!To){var r=new xo({color:"rgba(255,255,255,0.4)"}),n=new Eo({color:"#3399CC",width:1.25});To=[new Oo({image:new wo({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return To}function Io(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[De.POLYGON]=[new Oo({fill:new xo({color:[255,255,255,.5]})})],t[De.MULTI_POLYGON]=t[De.POLYGON],t[De.LINE_STRING]=[new Oo({stroke:new Eo({color:e,width:5})}),new Oo({stroke:new Eo({color:r,width:3})})],t[De.MULTI_LINE_STRING]=t[De.LINE_STRING],t[De.CIRCLE]=t[De.POLYGON].concat(t[De.LINE_STRING]),t[De.POINT]=[new Oo({image:new wo({radius:6,fill:new xo({color:r}),stroke:new Eo({color:e,width:1.5})}),zIndex:1/0})],t[De.MULTI_POINT]=t[De.POINT],t[De.GEOMETRY_COLLECTION]=t[De.POLYGON].concat(t[De.LINE_STRING],t[De.POINT]),t}function Po(t){return t.getGeometry()}var Co=Oo,Lo={FRACTION:"fraction",PIXELS:"pixels"},ko=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=Ro(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var i=Ro(t,e,r);this.cache_[i]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Ro(t,e,r){return e+":"+t+":"+(r?_i(r):"null")}var Ao=new ko,No=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fo=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=r,o.state=i,o}return No(e,t),e.prototype.changed=function(){this.dispatchEvent(Ct.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return et()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){et()},e}(Pt),jo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Do(t,e,r){var n=t;if(n.src&&Ai){var i=n.decode(),o=!0;return i.then(function(){o&&e()}).catch(function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())}),function(){o=!1}}var a=[ht(n,Ct.LOAD,e),ht(n,Ct.ERROR,r)];return function(){a.forEach(ft)}}var Go=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,n,Ui.IDLE)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=Ui.IDLE,s.imageLoadFunction_=a,s}return jo(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Ui.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=me(this.extent)/this.image_.height),this.state=Ui.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=Ui.IDLE&&this.state!=Ui.ERROR||(this.state=Ui.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Do(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Fo),Bo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zo=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=r,s.tainted_,s}return Bo(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===Ui.LOADED){t||(t=Fi(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Ct.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Ui.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Ui.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],n=Fi(e,r);n.fillRect(0,0,e,r),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Ui.IDLE){this.imageState_=Ui.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Do(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var r=t.getImageData(0,0,this.image_.width,this.image_.height),n=r.data,i=this.color_[0]/255,o=this.color_[1]/255,a=this.color_[2]/255,s=0,u=n.length;s<u;s+=4)n[s]*=i,n[s+1]*=o,n[s+2]*=a;t.putImageData(r,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Pt);var Uo={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},qo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vo=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.opacity?n.opacity:1,o=void 0!==n.rotation?n.rotation:0,a=void 0!==n.scale?n.scale:1,s=void 0!==n.rotateWithView&&n.rotateWithView;(r=t.call(this,{opacity:i,rotation:o,scale:a,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:s})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:Uo.TOP_LEFT,r.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:Lo.FRACTION,r.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:Lo.FRACTION,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var u=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,c=n.src;Ut(!(void 0!==c&&u),4),Ut(!u||u&&l,5),void 0!==c&&0!==c.length||!u||(c=u.src||nt(u)),Ut(void 0!==c&&c.length>0,6);var h=void 0!==n.src?Ui.IDLE:Ui.LOADED;return r.color_=void 0!==n.color?Si(n.color):null,r.iconImage_=function(t,e,r,n,i,o){var a=Ao.get(e,n,o);return a||(a=new zo(t,e,r,n,i,o),Ao.set(e,n,o,a)),a}(u,c,l,r.crossOrigin_,h,r.color_),r.offset_=void 0!==n.offset?n.offset:[0,0],r.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:Uo.TOP_LEFT,r.origin_=null,r.size_=void 0!==n.size?n.size:null,r}return qo(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Lo.FRACTION||this.anchorYUnits_==Lo.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Lo.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==Lo.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=Uo.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Uo.TOP_RIGHT&&this.anchorOrigin_!=Uo.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Uo.BOTTOM_LEFT&&this.anchorOrigin_!=Uo.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=Uo.TOP_LEFT){var r=this.getSize(),n=this.iconImage_.getSize();if(!r||!n)return null;t=t.slice(),this.offsetOrigin_!=Uo.TOP_RIGHT&&this.offsetOrigin_!=Uo.BOTTOM_RIGHT||(t[0]=n[0]-r[0]-t[0]),this.offsetOrigin_!=Uo.BOTTOM_LEFT&&this.offsetOrigin_!=Uo.BOTTOM_RIGHT||(t[1]=n[1]-r[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Ct.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Ct.CHANGE,t)},e}(mo);function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xo(t,e){return!e||"object"!==Yo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zo(t,e,r){return(Zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ho(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Ho(t){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ko(t,e){return(Ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $o=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xo(this,Ho(e).call(this,t))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ko(t,e)}(e,gi),r=e,i=[{key:"readProjectionFromObject",value:function(t){var e,r=t.crs;if(r)if("name"===r.type)e=yr(r.properties.name);else{if("EPSG"!==r.type)throw e=null,new Error("Unknown crs.type: ".concat(r.type));e=yr("EPSG:".concat(r.properties.code))}else e="EPSG:4326";return e}},{key:"applyIcon",value:function(t,e){var r,n=document.createElement("IMG");n.src=e.url,n.width=e.width,n.height=e.height,n.crossOrigin="anonymous",e.anchor&&e.anchor.x&&e.anchor.y&&(r=[e.anchor.x,e.anchor.y]),t.setStyle(new Co({image:new Vo({img:n,imgSize:[e.width,e.height],anchor:r})}))}}],(n=[{key:"readFeatureFromObject",value:function(t,r){var n=t,i=Zo(Ho(e.prototype),"readFeatureFromObject",this).call(this,n,r);return this.geometryName_&&i.setGeometryName(this.geometryName_),v(n.id)?i.setId(T("geojson_")):i.setId(n.id),n.properties&&i.setProperties(n.properties),n.click&&(i.click=n.click),n.properties&&n.properties.vendor&&n.properties.vendor.mapea&&n.properties.vendor.mapea.icon&&e.applyIcon(i,n.properties.vendor.mapea.icon),i}},{key:"writeFeatureObject",value:function(t,r){var n=r,i={type:"Feature"},o=t.getId();o&&(i.id=o);var a=t.getGeometry();i.geometry=a?Zo(Ho(e.prototype),"writeGeometryObject",this).call(this,a,n):null;var s=t.getProperties();return delete s[t.getGeometryName()],v(s)?i.properties=null:i.properties=s,v(t.click)||(i.click=t.click),i}},{key:"write",value:function(t){var e=this;return t.map(function(t){return e.writeFeatureObject(t.getImpl().getOLFeature())})}},{key:"read",value:function(t,r,n){var i=n.code;v(i)&&(i=v(n.featureProjection)?yr(n.getCode()):yr(n.featureProjection.getCode()));var o=e.readProjectionFromObject(t);return r.map(function(t){var e=t.id,r=new pF(e,t),n=r.getImpl().getOLFeature();if(null!==n.getGeometry()){var a=n.getGeometry().transform(o,i);n.setGeometry(a)}return r})}}])&&Wo(r.prototype,n),i&&Wo(r,i),e}(),Jo=[1,0,0,1,0,0],Qo=function(){function t(t,e,r,n,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===De.POINT?re(this.flatCoordinates_):ne(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=de(this.getExtent());this.flatInteriorPoints_=Fn(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Jn(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=jn(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=gn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=gn(t,e,o,2,.5);vt(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var r=(t=yr(t)).getExtent(),n=t.getWorldExtent(),i=me(n)/me(r);zr(Jo,n[0],n[3],i,-i,0,0,0),Me(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Jo,this.flatCoordinates_)},t}();Qo.prototype.getEnds=function(){return this.ends_},Qo.prototype.getEndss=Qo.prototype.getEnds,Qo.prototype.getFlatCoordinates=Qo.prototype.getOrientedFlatCoordinates;var ta=Qo;function ea(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ra(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function na(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){ia(t,e,r[e])})}return t}function ia(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oa=function(t,e){var r=Er(e,"EPSG:4326"),n=[],i={};return t.forEach(function(e){var o=[];if(Array.isArray(e.geometry.coordinates[0])&&t.length>1)e.geometry.coordinates.forEach(function(t){if(!Number.isFinite(t[0])&&Array.isArray(t))o.push(t.map(function(t){var e=[];return Number.isFinite(t[0])?e.push(r(t)):t.forEach(function(t){e.push(r(t))}),e})),i=na({},e,{geometry:{type:e.geometry.type,coordinates:o}});else{var n=r(t);o.push(n),i=na({},e,{geometry:{type:e.geometry.type,coordinates:o}})}}),n.push(i);else if(3===e.geometry.coordinates.length)e.geometry.coordinates.pop(),i=na({},e,{geometry:{type:e.geometry.type,coordinates:r(e.geometry.coordinates)}}),n.push(i);else if(1===t.length)if(e.geometry.coordinates[0].length>2){var a=e.geometry.coordinates[0].map(function(t){return r(t)});i=na({},e,{geometry:{type:e.geometry.type,coordinates:a}}),n.push(i)}else i=na({},e,{geometry:{type:e.geometry.type,coordinates:r(e.geometry.coordinates[0])}}),n.push(i);else if(Number.isFinite(e.geometry.coordinates[0])){var s=r(e.geometry.coordinates);i=na({},e,{geometry:{type:e.geometry.type,coordinates:s}}),n.push(i)}}),n},aa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateResolutions",value:function(t,e,r,n){var i,o,a,s=[];v(e)&&(i=t.getExtent());var u=we(i)/256;v(r)&&(o=0),v(n)&&(a=20);for(var l=a-o,c=0;c<l;c+=1)s[c]=u/Math.pow(2,c);return s}},{key:"addOverlayImage",value:function(t,e){e.getMapImpl().updateSize();var r=e.getMapImpl().getSize(),n=t.screenXY,i=t.screenXUnits,o=t.screenYUnits,a=t.overlayXY,s=t.overlayXUnits,u=t.overlayYUnits,l=t.size,c=t.src,h=document.createElement("img");h.src=c,h.style.width="".concat(l[0],"px"),h.style.height="".concat(l[1],"px");var f=a[0];"fraction"===s&&(f*=l[0]);var p=a[1];"fraction"===u&&(p=l[1]-p*l[1]),h.style.position="absolute";var d=n[0];"fraction"===i&&(d=d*r[0]-f);var y=n[1];return"fraction"===o&&(y=r[1]-y*r[1]-p),h.style.top="".concat(y,"px"),h.style.left="".concat(d,"px"),e.getMapImpl().getOverlayContainerStopEvent().appendChild(h),h}},{key:"getExtentHeight",value:function(t){return t[3]-t[1]}},{key:"getExtentWidth",value:function(t){return t[2]-t[0]}},{key:"getCentroid",value:function(e){var r,n,i,o,a;if(v(e))r=null;else if(e instanceof ta)r=e;else switch(e.getType()){case"Point":r=e.getCoordinates();break;case"LineString":case"LinearRing":r=(n=e.getCoordinates())[i=Math.floor(n.length/2)];break;case"Polygon":r=t.getCentroid(e.getInteriorPoint());break;case"MultiPoint":o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroid(o[i]);break;case"MultiLineString":a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroid(a[i]);break;case"MultiPolygon":o=e.getInteriorPoints(),r=t.getCentroid(o);break;case"Circle":r=e.getCenter();break;default:return null}return r}},{key:"getFeaturesExtent",value:function(t,e){var r=t.map(function(t){return t instanceof pF?t.getImpl().getOLFeature():t}),n=r.map(function(t){return t.getGeometry().getExtent().slice(0)});if(1===n.length){var i=r[0].getGeometry();if("Point"===i.getType()){var o=function(t,e){return e/yr(t).getMetersPerUnit()}(e,1e3),a=i.getCoordinates()[0],s=i.getCoordinates()[1];n=[[a-o,s-o,a+o,s+o]]}}return 0===n.length?null:n.reduce(function(t,e){return oe(t,e)})}},{key:"getCentroidCoordinate",value:function(e){var r,n,i,o,a,s;return"Point"===e.getType()?r=e.getCoordinates():"LineString"===e.getType()?r=(n=e.getCoordinates())[i=Math.floor(n.length/2)]:"LinearRing"===e.getType()?r=(n=e.getCoordinates())[i=Math.floor(n.length/2)]:"Polygon"===e.getType()?r=t.getCentroidCoordinate(e.getInteriorPoint()):"MultiPoint"===e.getType()?(o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroidCoordinate(o[i])):"MultiLineString"===e.getType()?(a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroidCoordinate(a[i])):"MultiPolygon"===e.getType()?(o=e.getInteriorPoints(),r=t.getCentroidCoordinate(o)):"Circle"===e.getType()?r=e.getCenter():"GeometryCollection"===e.getType()&&(s=e.getGeometries(),i=Math.floor(s.length/2),r=t.getCentroidCoordinate(s[i])),r}},{key:"transformExtent",value:function(t,e,r){var n=w(e)?yr(e):e,i=w(r)?yr(r):r,o=n.getExtent();return t.every(function(t,e){return e<2?t<=o[e]:t>=o[e]})?i.getExtent():Or(t,n,i)}},{key:"olRenderFeature2olFeature",value:function(t,e,r){var n;if(!v(t)){var i,o=t.getId(),a=t.getProperties();if(v(e)&&v(e))i=this.getGeometryFromRenderFeature(t.getGeometry());else{var s=e.getExtent(),u=e.getWorldExtent();if(!v(s)&&!v(u)){var l=this.cloneOLRenderFeature(t);l.transform(e,r),i=this.getGeometryFromRenderFeature(l.getGeometry())}}n=new ri,v(o)?n.setId(T("mapea_feature_")):n.setId(o),n.setProperties(a,!0),n.setGeometry(i)}return n}},{key:"cloneOLRenderFeature",value:function(t){var e=t.getType(),r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getProperties(),o=t.getId(),a=ea(r),s=Object.assign(i),u=ea(n);return new ta(e,a,u,s,o)}},{key:"getGeometryFromRenderFeature",value:function(t){var e,r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getEndss();switch(t.getType()){case De.POINT:e=new en(r);break;case De.LINE_STRING:e=new Ln(r);break;case De.LINEAR_RING:e=new Nn(r);break;case De.POLYGON:e=new Yn(r);break;case De.MULTI_POINT:e=new cn(r);break;case De.MULTI_LINE_STRING:e=new $n(r,void 0,n);break;case De.MULTI_POLYGON:e=new ti(r,void 0,i);break;case De.GEOMETRY_COLLECTION:var o=t.getGeometries();e=new fi(o);break;case De.CIRCLE:var a=t.getFlatInteriorPoint();e=new on(a);break;default:e=null}return e}},{key:"getWMTSScale",value:function(t,e){var r=yr(t.getProjection().code).getMetersPerUnit(),n=t.getMapImpl().getSize(),i=n[0],o=t.getMapImpl().getView().calculateExtent(n),a=r*(o[2]-o[0])/i*1e3/.28;return!0==!e&&(a=a>=1e3&&a<=95e4?1e3*Math.round(a/1e3):a>=95e4?1e6*Math.round(a/1e6):Math.round(a)),Math.trunc(a)}}],(r=null)&&ra(e.prototype,r),n&&ra(e,n),t}();function sa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ua=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=r;this.facadeFeature_=null,this.formatter_=new $o,v(r)?this.olFeature_=new ri:(v(r.type)&&(i.type="Feature"),this.olFeature_=this.formatter_.readFeature(i)),v(e)?v(this.olFeature_.getId())&&this.olFeature_.setId(T("mapea_feature_")):this.olFeature_.setId(e)}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return v(t)||(r=new pF).getImpl().setOLFeature(t,e),r}},{key:"olRenderFeature2Facade",value:function(e,r,n){var i=aa.olRenderFeature2olFeature(e,r,n);return t.olFeature2Facade(i)}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}},{key:"getGeometry",value:function(t){var e,r=t.geometry.type;return"circle"===r?e=new on(t.geometry.coordinates):"geometry"===r?e=new Wr(t.geometry.coordinates):"linestring"===r?e=new Ln(t.geometry.coordinates):"multilinestring"===r?e=new $n(t.geometry.coordinates):"multipoint"===r?e=new cn(t.geometry.coordinates):"multipolygon"===r?e=new ti(t.geometry.coordinates):"point"===r?e=new en(t.geometry.coordinates):"polygon"===r&&(e=new Yn(t.geometry.coordinates)),e}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"setOLFeature",value:function(t,e){v(t)||(this.olFeature_=t,!1!==e&&v(this.olFeature_.getId())&&this.olFeature_.setId(T("mapea_feature_")))}},{key:"getAttributes",value:function(){var t=this.olFeature_.getProperties(),e=t.geometry;return!v(e)&&e instanceof Wr&&delete t.geometry,t}},{key:"getId",value:function(){return this.olFeature_.getId()}},{key:"setId",value:function(t){this.olFeature_.setId(t)}},{key:"setAttributes",value:function(t){this.olFeature_.setProperties(t)}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setAttribute",value:function(t,e){return this.olFeature_.set(t,e)}},{key:"setGeometry",value:function(t){var e=t.type.toLowerCase();"circle"===e?this.olFeature_.setGeometry(new on(t.coordinates)):"geometry"===e?this.olFeature_.setGeometry(new Wr(t.coordinates)):"linestring"===e?this.olFeature_.setGeometry(new Ln(t.coordinates)):"multilinestring"===e?this.olFeature_.setGeometry(new $n(t.coordinates)):"multipoint"===e?this.olFeature_.setGeometry(new cn(t.coordinates)):"multipolygon"===e?this.olFeature_.setGeometry(new ti(t.coordinates)):"point"===e?this.olFeature_.setGeometry(new en(t.coordinates)):"polygon"===e&&this.olFeature_.setGeometry(new Yn(t.coordinates))}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){var e,r=this.getOLFeature().getGeometry(),n=aa.getCentroid(r);if(!v(n)){var i=new en;i.setCoordinates(n),e=new ri({geometry:i,name:"centroid"})}return e=e||t.olFeature2Facade(e)}},{key:"clearStyle",value:function(){this.olFeature_.setStyle(null)}}])&&sa(e.prototype,r),n&&sa(e,n),t}();function la(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ca=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listener=e,this._scope=r,this.eventKey_=T(),this.once_=n}var e,r,n;return e=t,(r=[{key:"fire",value:function(t){var e=t;m(e)||(e=[e]),this._listener.apply(this._scope,e)}},{key:"getEventKey",value:function(){return this.eventKey_}},{key:"isOnce",value:function(){return this.once_}},{key:"has",value:function(t,e){var r=!1;return r=_(t)?this._listener===t&&this._scope===e:this.eventKey_===t,r}}])&&la(e.prototype,r),n&&la(e,n),t}();function ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events_={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!v(t)&&_(e)&&(v(this.events_[t])&&(this.events_[t]=[]),-1===this.indexOf(t,e,r))){var o=new ca(e,r,i);this.events_[t].push(o),n=o.getEventKey()}return n}},{key:"remove",value:function(t,e,r){var n=this.events_[t];if(!v(n)){var i=this.indexOf(t,e,r);-1!==i&&n.splice(i,1)}}},{key:"removeByKey",value:function(t,e){var r=this.events_[t];if(!v(r)){var n=r.map(function(t,r){var n=-1;return t.getEventKey()===e&&(n=r),n});-1!==n&&r.splice(n,1)}}},{key:"fire",value:function(t,e){var r=this,n=[].concat(this.events_[t]);v(n)||n.forEach(function(n){n.fire(e),!0===n.isOnce()&&r.remove(t,n.getEventKey())})}},{key:"indexOf",value:function(t,e,r){var n=-1,i=this.events_[t];if(!v(i))for(var o=0,a=i.length;o<a;o+=1)if(i[o].has(e,r)){n=o;break}return n}}])&&ha(e.prototype,r),n&&ha(e,n),t}();function pa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var da=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventsManager_=new fa}var e,r,n;return e=t,(r=[{key:"on",value:function(t,e,r){return this.eventsManager_.add(t,e,r)}},{key:"once",value:function(t,e,r){return this.eventsManager_.add(t,e,r,!0)}},{key:"un",value:function(t,e,r){this.eventsManager_.remove(t,e,r)}},{key:"unByKey",value:function(t,e){this.eventsManager_.remove(t,e)}},{key:"fire",value:function(t,e){var r=e;v(r)&&(r=[this]),this.eventsManager_.fire(t,r)}}])&&pa(e.prototype,r),n&&pa(e,n),t}();function ya(t){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ma(t){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function va(t,e){return(va=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ba=function(t){function e(t){var r,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(r=!(i=ma(e).call(this))||"object"!==ya(i)&&"function"!=typeof i?_a(n):i).impl_=t,!v(r.impl_)&&_(r.impl_.setFacadeObj)&&r.impl_.setFacadeObj(_a(_a(r))),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&va(t,e)}(e,da),r=e,(n=[{key:"getImpl",value:function(){return this.impl_}},{key:"setImpl",value:function(t){this.impl_=t}},{key:"destroy",value:function(){!v(this.impl_)&&_(this.impl_.destroy)&&this.impl_.destroy()}}])&&ga(r.prototype,n),i&&ga(r,i),e}(),wa=function(t){throw t},xa={translations:{en:r(93),es:r(94)},lang:"es"},Ea=function(t){return xa.translations[t]},Sa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xa.lang;return Ea(e)[t]};function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ma(t,e){return!e||"object"!==Oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ia(t){return(Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pa(t,e){return(Pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ca=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new $o(r);return t=Ma(this,Ia(e).call(this,n)),d($o)&&wa(Sa("exception").geojson_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pa(t,e)}(e,ba),r=e,(n=[{key:"write",value:function(t){var e=t;return m(e)||(e=[e]),this.getImpl().write(e)}},{key:"read",value:function(t,e){var r=t,n=[];if(!v(r)){w(r)&&(r=JSON.parse(r));var i=[];"FeatureCollection"===r.type?i=r.features:"Feature"===r.type&&(i=[r]),n=this.getImpl().read(r,i,e)}return n}}])&&Ta(r.prototype,n),i&&Ta(r,i),e}(),La=(r(112),r(95)),ka=r.n(La),Ra=r(11),Aa=r.n(Ra),Na=(r(114),r(116),1),Fa=2,ja=4,Da=5,Ga=484813681109536e-20,Ba=Math.PI/2,za=.16666666666666666,Ua=.04722222222222222,qa=.022156084656084655,Va=1e-10,Ya=.017453292519943295,Wa=57.29577951308232,Xa=Math.PI/4,Za=2*Math.PI,Ha=3.14159265359,Ka={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},$a={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ja=/[\s_\-\/\(\)]/g;function Qa(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(Ja,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(Ja,"")===i)return t[r]}var ts=function(t){var e,r,n,i={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Ya},lat_1:function(t){i.lat1=t*Ya},lat_2:function(t){i.lat2=t*Ya},lat_ts:function(t){i.lat_ts=t*Ya},lon_0:function(t){i.long0=t*Ya},lon_1:function(t){i.long1=t*Ya},lon_2:function(t){i.long2=t*Ya},alpha:function(t){i.alpha=parseFloat(t)*Ya},lonc:function(t){i.longc=t*Ya},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Qa($a,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Ya},pm:function(t){var e=Qa(Ka,t);i.from_greenwich=(e||parseFloat(t))*Ya},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)r=o[e],e in a?"function"==typeof(n=a[e])?n(r):i[n]=r:i[e]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},es=function(t){return new us(t).output()},rs=1,ns=/\s/,is=/[A-Za-z]/,os=/[A-Za-z84]/,as=/[,\]]/,ss=/[\d\.E\-\+]/;function us(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=rs}function ls(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce(function(t,e){return cs(e,t),t},n);e&&(t[e]=i)}function cs(t,e){if(Array.isArray(t)){var r,n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void cs(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n)switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&cs(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&cs(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void ls(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return cs(t,e[n]);return ls(e,n,t)}else e[n]=t;else e[n]=!0}else e[t]=!0}us.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;ns.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case rs:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},us.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(as.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},us.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=rs)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=rs,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},us.prototype.number=function(t){if(!ss.test(t)){if(as.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},us.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},us.prototype.keyword=function(t){if(os.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=rs)}if(!as.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},us.prototype.neutral=function(t){if(is.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(ss.test(t))return this.word=t,void(this.state=3);if(!as.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},us.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var hs=.017453292519943295;function fs(t){return t*hs}var ps=function(t){var e=es(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return cs(e,i),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function r(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",fs],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",fs],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",fs],["lat0","latitude_of_origin",fs],["lat0","standard_parallel_1",fs],["lat1","standard_parallel_1",fs],["lat2","standard_parallel_2",fs],["azimuth","Azimuth"],["alpha","azimuth",fs],["srsCode","name"]].forEach(function(e){return r=t,i=(n=e)[0],o=n[1],void(!(i in r)&&o in r&&(r[i]=r[o],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,o}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=fs(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function ds(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?ds[t]=ts(arguments[1]):ds[t]=ps(arguments[1]):ds[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?ds.apply(e,t):ds(t)});if("string"==typeof t){if(t in ds)return ds[t]}else"EPSG"in t?ds["EPSG:"+t.EPSG]=t:"ESRI"in t?ds["ESRI:"+t.ESRI]=t:"IAU2000"in t?ds["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(ds);var ys=ds;var gs=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var ms=["3857","900913","3785","102113"];var vs=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in ys}(t))return ys[t];if(function(t){return gs.some(function(e){return t.indexOf(e)>-1})}(t)){var e=ps(t);if(function(t){var e=Qa(t,"authority");if(e){var r=Qa(e,"epsg");return r&&ms.indexOf(r)>-1}}(e))return ys["EPSG:3857"];var r=function(t){var e=Qa(t,"extension");if(e)return Qa(e,"proj4")}(e);return r?ts(r):e}return function(t){return"+"===t[0]}(t)?ts(t):void 0},_s=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t},bs=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)},ws=function(t){return t<0?-1:1},xs=function(t){return Math.abs(t)<=Ha?t:t-ws(t)*Za},Es=function(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(Ba-e))/n},Ss=function(t,e){for(var r,n,i=.5*t,o=Ba-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(o),o+=n=Ba-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-o,Math.abs(n)<=1e-10)return o;return-9999};function Os(t){return t}var Ts=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=bs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,i=t.y;if(i*Wa>90&&i*Wa<-90&&n*Wa>180&&n*Wa<-180)return null;if(Math.abs(Math.abs(i)-Ba)<=Va)return null;if(this.sphere)e=this.x0+this.a*this.k0*xs(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Xa+.5*i));else{var o=Math.sin(i),a=Es(this.e,i,o);e=this.x0+this.a*this.k0*xs(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=Ba-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(r=Ss(this.e,o)))return null}return e=xs(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Os,inverse:Os,names:["longlat","identity"]}],Ms={},Is=[];function Ps(t,e){var r=Is.length;return t.names?(Is[r]=t,t.names.forEach(function(t){Ms[t.toLowerCase()]=r}),this):(console.log(e),!0)}var Cs={start:function(){Ts.forEach(Ps)},add:Ps,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Ms[e]&&Is[Ms[e]]?Is[Ms[e]]:void 0}},Ls={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ks=Ls.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ls.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Rs={};Rs.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Rs.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Rs.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Rs.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Rs.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Rs.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Rs.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Rs.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},Rs.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Rs.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Rs.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Rs.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Rs.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Rs.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Rs.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Rs.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Rs.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var As=function(t,e,r,n,i,o){var a={};return a.datum_type=void 0===t||"none"===t?Da:ja,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=Na),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=Fa,a.datum_params[3]*=Ga,a.datum_params[4]*=Ga,a.datum_params[5]*=Ga,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=r,a.b=n,a.es=i,a.ep2=o,a};function Ns(t,e){if(!(this instanceof Ns))return new Ns(t);e=e||function(t){if(t)throw t};var r=vs(t);if("object"==typeof r){var n=Ns.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=Qa(Rs,r.datumCode);i&&(r.datum_params=i.towgs84?i.towgs84.split(","):null,r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var o,a,s,u,l,c,h,f=function(t,e,r,n,i){if(!t){var o=Qa(Ls,n);o||(o=ks),t=o.a,e=o.b,r=o.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<Va)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(o=f.a,a=f.b,f.rf,s=r.R_A,c=((u=o*o)-(l=a*a))/u,h=0,s?(u=(o*=1-c*(za+c*(Ua+c*qa)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(u-l)/l}),d=r.datum||As(r.datumCode,r.datum_params,f.a,f.b,p.es,p.ep2);_s(this,r),_s(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}Ns.projections=Cs,Ns.projections.start();var Fs=Ns;function js(t){return t===Na||t===Fa}var Ds=function(t,e,r){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===Na?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==Fa||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)?r:t.datum_type===Da||e.datum_type===Da?r:t.es!==e.es||t.a!==e.a||js(t.datum_type)||js(e.datum_type)?(r=function(t,e,r){var n,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-Ba&&u>-1.001*Ba)u=-Ba;else if(u>Ba&&u<1.001*Ba)u=Ba;else{if(u<-Ba)return{x:-1/0,y:-1/0,z:t.z};if(u>Ba)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((n=r/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*i}}(r,t.es,t.a),js(t.datum_type)&&(r=function(t,e,r){if(e===Na)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===Fa){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(r,t.datum_type,t.datum_params)),js(e.datum_type)&&(r=function(t,e,r){if(e===Na)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===Fa){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(r,e.datum_type,e.datum_params)),function(t,e,r,n){var i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_=t.x,b=t.y,w=t.z?t.z:0;if(i=Math.sqrt(_*_+b*b),o=Math.sqrt(_*_+b*b+w*w),i/r<1e-12){if(m=0,o/r<1e-12)return v=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(b,_);a=w/o,h=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*u,g=0;do{g++,l=e*(c=r/Math.sqrt(1-e*f*f))/(c+(v=i*h+w*f-c*(1-e*f*f))),y=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(p=s*(1-l)*u)*f,h=p,f=d}while(y*y>1e-24&&g<30);return{x:m,y:Math.atan(d/Math.abs(p)),z:v}}(r,e.es,e.a,e.b)):r},Gs=function(t,e,r){var n,i,o,a=r.x,s=r.y,u=r.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=a,i="x"):1===o?(n=s,i="y"):(n=u,i="z"),t.axis[o]){case"e":l[i]=n;break;case"w":l[i]=-n;break;case"n":l[i]=n;break;case"s":l[i]=-n;break;case"u":void 0!==r[i]&&(l.z=n);break;case"d":void 0!==r[i]&&(l.z=-n);break;default:return null}return l},Bs=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},zs=function(t){Us(t.x),Us(t.y)};function Us(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function qs(t,e,r){var n;return Array.isArray(r)&&(r=Bs(r)),zs(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===Na||t.datum.datum_type===Fa)&&"WGS84"!==e.datumCode||(e.datum.datum_type===Na||e.datum.datum_type===Fa)&&"WGS84"!==t.datumCode}(t,e)&&(r=qs(t,n=new Fs("WGS84"),r),t=n),"enu"!==t.axis&&(r=Gs(t,!1,r)),"longlat"===t.projName?r={x:r.x*Ya,y:r.y*Ya}:(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter}),r=t.inverse(r)),t.from_greenwich&&(r.x+=t.from_greenwich),r=Ds(t.datum,e.datum,r),e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y}),"longlat"===e.projName?r={x:r.x*Wa,y:r.y*Wa}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter})),"enu"!==e.axis?Gs(e,!0,r):r}var Vs=Fs("WGS84");function Ys(t,e,r){var n,i,o;return Array.isArray(r)?(n=qs(t,e,r),3===r.length?[n.x,n.y,n.z]:[n.x,n.y]):(i=qs(t,e,r),2===(o=Object.keys(r)).length?i:(o.forEach(function(t){"x"!==t&&"y"!==t&&(i[t]=r[t])}),i))}function Ws(t){return t instanceof Fs?t:t.oProj?t.oProj:Fs(t)}var Xs=function(t,e,r){t=Ws(t);var n,i=!1;return void 0===e?(e=t,t=Vs,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=Vs,i=!0),e=Ws(e),r?Ys(t,e,r):(n={forward:function(r){return Ys(t,e,r)},inverse:function(r){return Ys(e,t,r)}},i&&(n.oProj=e),n)},Zs=6,Hs="AJSAJS",Ks="AFAFAF",$s=65,Js=73,Qs=79,tu=86,eu=90,ru={forward:nu,inverse:function(t){var e=su(cu(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:iu};function nu(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,y=t.zoneNumber,g=lu(y),m=Math.floor(p/1e5),v=Math.floor(d/1e5)%20,i=m,o=v,a=g,s=a-1,u=Hs.charCodeAt(s),l=Ks.charCodeAt(s),c=u+i-1,h=l+o,f=!1,c>eu&&(c=c-eu+$s-1,f=!0),(c===Js||u<Js&&c>Js||(c>Js||u<Js)&&f)&&c++,(c===Qs||u<Qs&&c>Qs||(c>Qs||u<Qs)&&f)&&++c===Js&&c++,c>eu&&(c=c-eu+$s-1),h>tu?(h=h-tu+$s-1,f=!0):f=!1,(h===Js||l<Js&&h>Js||(h>Js||l<Js)&&f)&&h++,(h===Qs||l<Qs&&h>Qs||(h>Qs||l<Qs)&&f)&&++h===Js&&h++,h>tu&&(h=h-tu+$s-1),String.fromCharCode(c)+String.fromCharCode(h))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var i,o,a,s,u,l,c,h,f;var p,d,y,g,m,v}(function(t){var e,r,n,i,o,a,s,u=t.lat,l=t.lon,c=6378137,h=ou(u),f=ou(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=ou(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),r=Math.tan(h)*Math.tan(h),n=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(f-a),o=c*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p=.9996*e*(i+(1-r+n)*i*i*i/6+(5-18*r+r*r+72*n-.39089081163157013)*i*i*i*i*i/120)+5e5,d=.9996*(o+e*Math.tan(h)*(i*i/2+(5-r+9*n+4*n*n)*i*i*i*i/24+(61-58*r+r*r+600*n-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(p),zoneNumber:s,zoneLetter:uu(u)}}({lat:t[1],lon:t[0]}),e)}function iu(t){var e=su(cu(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ou(t){return t*(Math.PI/180)}function au(t){return t/Math.PI*180}function su(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=r-5e5,g=e;n<"N"&&(g-=1e7),c=6*(i-1)-180+3,f=(h=g/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=y/(.9996*o);var m=f-o*Math.tan(f)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);m=au(m);var v,_=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(_=c+au(_),t.accuracy){var b=su({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:m,left:_}}else v={lat:m,lon:_};return v}function uu(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function lu(t){var e=t%Zs;return 0===e&&(e=Zs),e}function cu(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var u=lu(a),l=function(t,e){var r=Hs.charCodeAt(e-1),n=1e5,i=!1;for(;r!==t.charCodeAt(0);){if(++r===Js&&r++,r===Qs&&r++,r>eu){if(i)throw"Bad character: "+t;r=$s,i=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=Ks.charCodeAt(e-1),n=0,i=!1;for(;r!==t.charCodeAt(0);){if(++r===Js&&r++,r===Qs&&r++,r>tu){if(i)throw"Bad character: "+t;r=$s,i=!0}n+=1e5}return n}(n.charAt(1),u);c<hu(s);)c+=2e6;var h=r-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,y=h/2,g=0,m=0;return y>0&&(f=1e5/Math.pow(10,y),p=t.substring(o,o+y),g=parseFloat(p)*f,d=t.substring(o+y),m=parseFloat(d)*f),{easting:g+l,northing:m+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function hu(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function fu(t,e,r){if(!(this instanceof fu))return new fu(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}fu.fromMGRS=function(t){return new fu(iu(t))},fu.prototype.toMGRS=function(t){return nu([this.x,this.y],t)};var pu=fu,du=r(48),yu=.01068115234375,gu=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*yu))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*yu)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e},mu=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},vu=function(t,e,r){for(var n=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(mu(i,a,Math.cos(i),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<Va)return i}return i};var _u={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=gu(this.es),this.ml0=mu(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=xs(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>Va?Math.tan(o):0,d=Math.pow(p,2),y=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var g=mu(o,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+y+14*h-58*d*h+c/42*(61+179*y-y*d-479*d)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+y-58*d+270*h-330*d*h+c/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var m=u*Math.sin(a);if(Math.abs(Math.abs(m)-1)<Va)return 93;if(r=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>Va)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,r=vu(e,this.es,this.en),Math.abs(r)<Ba){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>Va?Math.tan(r):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,y=Math.pow(d,2);n=r-(e*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*c*f+c-4*h-y/30*(61+90*f-252*c*f+45*p+46*c-y/56*(1385+3633*f+4095*p+1574*p*f)))),i=xs(this.long0+d*(1-y/6*(1+2*f+c-y/20*(5+28*f+24*p+8*c*f+6*c-y/42*(61+662*f+1320*p+720*p*f))))/u)}else n=Ba*ws(a),i=0;else{var g=Math.exp(o/this.k0),m=.5*(g-1/g),v=this.lat0+a/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(m,2))),n=Math.asin(e),a<0&&(n=-n),i=0===m&&0===_?0:xs(Math.atan2(m,_)+this.long0)}return t.x=i,t.y=n,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},bu=function(t){var e=Math.exp(t);return e=(e-1/e)/2},wu=function(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},xu=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(wu(1,e)+1))),t<0?-e:e},Eu=function(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return e+r*Math.sin(2*e)},Su=function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return Math.sin(e)*r},Ou=function(t,e,r){for(var n,i,o=Math.sin(e),a=Math.cos(e),s=bu(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,y=0;--h>=0;)n=d,i=p,f=l*(d=f)-n-c*(p=y)+t[h],y=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*y,l*y+c*f]};var Tu={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=Eu(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Su(this.gtu,2*n))},forward:function(t){var e=xs(t.x-this.long0),r=t.y;r=Eu(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*i),e=Math.atan2(o*i,wu(n,i*a)),e=xu(Math.tan(e));var s,u,l=Ou(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=Ou(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(bu(n));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(n),l=Math.cos(n);i=Math.atan2(a*l,wu(u,l*s)),n=Math.atan2(u,l*s),e=xs(n+this.long0),r=Eu(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},Mu=function(t,e){if(void 0===t){if((t=Math.floor(30*(xs(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t};var Iu={init:function(){var t=Mu(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Ya,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Tu.init.apply(this),this.forward=Tu.forward,this.inverse=Tu.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Pu=function(t,e){return Math.pow((1-t)/(1+t),e)},Cu=20;var Lu={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Xa)/(Math.pow(Math.tan(.5*this.lat0+Xa),this.C)*Pu(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Xa),this.C)*Pu(this.e*Math.sin(r),this.ratexp))-Ba,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+Xa)/this.K,1/this.C),i=Cu;i>0&&(r=2*Math.atan(n*Pu(this.e*Math.sin(t.y),-.5*this.e))-Ba,!(Math.abs(r-t.y)<1e-14));--i)t.y=r;return i?(t.x=e,t.y=r,t):null},names:["gauss"]};var ku={init:function(){Lu.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=xs(t.x-this.long0),Lu.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,Lu.inverse.apply(this,[t]),t.x=xs(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Ru={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Va&&(this.k0=.5*(1+ws(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Va&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Va&&(this.k0=.5*this.cons*bs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Es(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=bs(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ba,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,i,o,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),h=xs(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Va&&Math.abs(u+this.lat0)<=Va?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-Ba,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=Va?(o=Es(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Va?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*n-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,r,n,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=Va?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Va?this.lat0>0?xs(this.long0+Math.atan2(t.x,-1*t.y)):xs(this.long0+Math.atan2(t.x,t.y)):xs(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=Va){if(a<=Va)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*Ss(this.e,n),e=this.con*xs(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Va?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=xs(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*Ss(this.e,Math.tan(.5*(Ba+o)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(Ba+t))*Math.pow((1-e)/(1+e),.5*r)}};var Au={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};var Nu={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),r=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n,i,o=Es(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-r*r));if(a*a<1&&(a=1),isNaN(this.longc)){var s=Es(this.e,this.lat1,Math.sin(this.lat1)),u=Es(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var l=Math.pow(s,this.bl),c=Math.pow(u,this.bl);i=.5*((n=this.el/l)-1/n);var h=(this.el*this.el-c*l)/(this.el*this.el+c*l),f=(c-l)/(c+l),p=xs(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=xs(this.long0);var d=xs(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else n=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=n*Math.pow(o,this.bl),i=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=xs(i-this.long0);if(Math.abs(Math.abs(o)-Ba)<=Va)n=o>0?-1:1,r=this.al/this.bl*Math.log(Math.tan(Xa+n*this.gamma0*.5)),e=-1*n*Ba*this.al/this.bl;else{var s=Es(this.e,o,Math.sin(o)),u=this.el/Math.pow(s,this.bl),l=.5*(u-1/u),c=.5*(u+1/u),h=Math.sin(this.bl*a),f=(l*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;r=Math.abs(Math.abs(f)-1)<=Va?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=Va?this.al*this.bl*a:this.al*Math.atan2(l*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+r):(e-=this.uc,t.x=this.x0+r*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-r*Math.sin(this.alpha)),t},inverse:function(t){var e,r;this.no_rot?(r=t.y-this.y0,e=t.x-this.x0):(r=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*r/this.al),i=.5*(n-1/n),o=.5*(n+1/n),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,u=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<Va?(t.x=this.long0,t.y=Ba):Math.abs(s+1)<Va?(t.x=this.long0,t.y=-1*Ba):(t.y=Ss(this.e,u),t.x=xs(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var Fu={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Va)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=bs(this.e,e,r),i=Es(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=bs(this.e,o,a),u=Es(this.e,this.lat2,o),l=Es(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Va?this.ns=Math.log(n/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=Va&&(r=ws(r)*(Ba-2*Va));var n,i,o=Math.abs(Math.abs(r)-Ba);if(o>Va)n=Es(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((o=r*this.ns)<=0)return null;i=0}var a=this.ns*xs(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=Ss(this.e,n)))return null}else i=-Ba;return o=xs(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var ju={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y,c=xs(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Du=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},Gu=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Bu=function(t){return.375*t*(1+.25*t*(1+.46875*t))},zu=function(t){return.05859375*t*t*(1+.75*t)},Uu=function(t){return t*t*t*(35/3072)},qu=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)},Vu=function(t){return Math.abs(t)<Ba?t:t-ws(t)*Math.PI},Yu=function(t,e,r,n,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var Wu={init:function(){this.sphere||(this.e0=Gu(this.es),this.e1=Bu(this.es),this.e2=zu(this.es),this.e3=Uu(this.es),this.ml0=this.a*Du(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=xs(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=qu(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=n*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),r=this.a*Du(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Yu(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-Ba)<=Va)return t.x=this.long0,t.y=Ba,i<0&&(t.y*=-1),t;var u=qu(this.a,this.e,Math.sin(s)),l=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=n*this.a/u,f=h*h;e=s-u*Math.tan(s)/l*h*h*(.5-(1+3*c)*h*h/24),r=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return t.x=xs(r+this.long0),t.y=Vu(e),t},names:["Cassini","Cassini_Soldner","cass"]},Xu=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e};var Zu=.3333333333333333,Hu=.17222222222222222,Ku=.10257936507936508,$u=.06388888888888888,Ju=.0664021164021164,Qu=.016415012942191543;var tl={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Ba)<Va?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Va?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Xu(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*Zu,e=t*t,r[0]+=e*Hu,r[1]=e*$u,e*=t,r[0]+=e*Ku,r[1]+=e*Ju,r[2]=e*Qu,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Xu(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,i,o,a,s,u,l,c,h=t.x,f=t.y;if(h=xs(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=Va)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(h),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.phi0)<Va)return null;r=Xa-.5*f,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(h),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=Xu(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=Ba+f,a=this.qp-a;break;case this.S_POLE:l=f-Ba,a=this.qp+a}if(Math.abs(l)<Va)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,o,a,s,u,l,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,y=0;if((r=.5*(p=Math.sqrt(h*h+f*f)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=Va?0:Math.asin(f*y/p),h*=y,f=d*p;break;case this.OBLIQ:r=Math.abs(p)<=Va?this.phi0:Math.asin(d*this.sinph0+f*y*this.cosph0/p),h*=y*this.cosph0,f=(d-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:f=-f,r=Ba-r;break;case this.S_POLE:r-=Ba}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(a=Math.sqrt(h*h+f*f))<Va)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),n=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+f*i*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*n-f*this.sinb1*i):(s=f*i/a,o=this.qp*s,f=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(h,f),u=Math.asin(s),l=this.apa,c=u+u,r=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=xs(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},el=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var rl={init:function(){Math.abs(this.lat1+this.lat2)<Va||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=bs(this.e3,this.sin_po,this.cos_po),this.qs1=Xu(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=bs(this.e3,this.sin_po,this.cos_po),this.qs2=Xu(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Xu(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Va?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=Xu(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*xs(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=xs(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,o,a=el(.5*e);if(t<Va)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(n=t*(r=Math.sin(a)))*n)*i/Math.cos(a)*(e/(1-s)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}};var nl={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=xs(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),(o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=Va?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),a=el(n*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),o=xs(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},il=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*Ba:Ba;for(var n,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=n=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN};var ol={init:function(){this.sphere||(this.k0=bs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,o=xs(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Xu(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=xs(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=il(this.e,2*t.y*this.k0/this.a),e=xs(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var al={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=xs(e-this.long0),i=Vu(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=xs(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Vu(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},sl=20;var ul={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Gu(this.es),this.e1=Bu(this.es),this.e2=zu(this.es),this.e3=Uu(this.es),this.ml0=this.a*Du(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,o=t.y,a=xs(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=Va?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(Vu(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=Va)e=this.a*a,r=-1*this.ml0;else{var s=qu(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),r=this.a*Du(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,o,a,s,u,l;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Va)e=xs(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,u=a,o=sl;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=Va){r=u;break}e=xs(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=Va)r=0,e=xs(this.long0+n/this.a);else{var h,f,p,d,y;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,u=a,o=sl;o;--o)if(y=this.e*Math.sin(u),h=Math.sqrt(1-y*y)*Math.tan(u),f=this.a*Du(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=Va){r=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=xs(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var ll={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,i=r-this.long0,o=n/Ga*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var l,c=u,h=a,f=1,p=0,d=0,y=0;for(e=1;e<=6;e++)l=p*c+f*h,f=f*c-p*h,p=l,d=d+this.B_re[e]*f-this.B_im[e]*p,y=y+this.B_im[e]*f+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,i=t.y,o=n-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,y=h,g=a,m=s;for(e=2;e<=6;e++)p=y*c+d*h,d=d*c-y*h,y=p,g+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),m+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=y*c+d*h,d=d*c-y*h,y=p,v+=e*(this.B_re[e]*d-this.B_im[e]*y),_+=e*(this.B_im[e]*d+this.B_re[e]*y);var b=v*v+_*_;c=(g*v+m*_)/b,h=(m*v-g*_)/b}var w=c,x=h,E=1,S=0;for(e=1;e<=9;e++)E*=w,S+=this.D[e]*E;var O=this.lat0+S*Ga*1e5,T=this.long0+x;return t.x=T,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var cl={init:function(){},forward:function(t){var e=t.x,r=t.y,n=xs(e-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=xs(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},hl=20;var fl={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=gu(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=xs(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=hl;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Va)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);r=this.a*mu(i,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=el((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=el(Math.sin(e)/this.n)),n=xs(n+this.long0),e=Vu(e)):(e=vu(t.y/this.a,this.es,this.en),(i=Math.abs(e))<Ba?(i=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=xs(r)):i-Va<Ba&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var pl={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=xs(e-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Va)break}i/=2,Math.PI/2-Math.abs(r)<Va&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=xs(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]};var dl={init:function(){Math.abs(this.lat1+this.lat2)<Va||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Gu(this.es),this.e1=Bu(this.es),this.e2=zu(this.es),this.e3=Uu(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=bs(this.e,this.sinphi,this.cosphi),this.ml1=Du(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Va?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=bs(this.e,this.sinphi,this.cosphi),this.ml2=Du(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Du(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=Du(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*xs(r-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=xs(this.long0+o/this.ns),n=Vu(this.g-r/this.a),t.x=i,t.y=n,t;var a=this.g-r/this.a;return n=Yu(a,this.e0,this.e1,this.e2,this.e3),i=xs(this.long0+o/this.ns),t.x=i,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var yl={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,i=t.y,o=xs(n-this.long0);Math.abs(i)<=Va&&(e=this.x0+this.R*o,r=this.y0);var a=el(2*Math.abs(i/Math.PI));(Math.abs(o)<=Va||Math.abs(Math.abs(i)-Ba)<=Va)&&(e=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),h=c/(l+c-1),f=h*h,p=h*(2/l-1),d=p*p,y=Math.PI*this.R*(s*(h-d)+Math.sqrt(u*(h-d)*(h-d)-(d+u)*(f-d)))/(d+u);o<0&&(y=-y),e=this.x0+y;var g=u+h;return y=Math.PI*this.R*(p*g-s*Math.sqrt((d+u)*(u+1)-g*g))/(d+u),r=i>=0?this.y0+y:this.y0-y,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,r=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<Va?this.long0:xs(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var gl={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_,b,w,x,E=t.x,S=t.y,O=Math.sin(t.y),T=Math.cos(t.y),M=xs(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Va?(t.x=this.x0+this.a*(Ba-S)*Math.sin(M),t.y=this.y0-this.a*(Ba-S)*Math.cos(M),t):Math.abs(this.sin_p12+1)<=Va?(t.x=this.x0+this.a*(Ba+S)*Math.sin(M),t.y=this.y0+this.a*(Ba+S)*Math.cos(M),t):(v=this.sin_p12*O+this.cos_p12*T*Math.cos(M),m=(g=Math.acos(v))/Math.sin(g),t.x=this.x0+this.a*m*T*Math.sin(M),t.y=this.y0+this.a*m*(this.cos_p12*O-this.sin_p12*T*Math.cos(M)),t):(e=Gu(this.es),r=Bu(this.es),n=zu(this.es),i=Uu(this.es),Math.abs(this.sin_p12-1)<=Va?(o=this.a*Du(e,r,n,i,Ba),a=this.a*Du(e,r,n,i,S),t.x=this.x0+(o-a)*Math.sin(M),t.y=this.y0-(o-a)*Math.cos(M),t):Math.abs(this.sin_p12+1)<=Va?(o=this.a*Du(e,r,n,i,Ba),a=this.a*Du(e,r,n,i,S),t.x=this.x0+(o+a)*Math.sin(M),t.y=this.y0+(o+a)*Math.cos(M),t):(s=O/T,u=qu(this.a,this.e,this.sin_p12),l=qu(this.a,this.e,O),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*T)),_=0===(h=Math.atan2(Math.sin(M),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(M)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Va?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(M)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*_*(1-(b=_*_)*(y=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-y)/6+(w=b*_)/8*(d=f*p)*(1-2*y)+(x=w*_)/120*(y*(4-7*y)-3*f*f*(1-7*y))-x*_/48*d),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h),t))},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m,v,_,b,w,x;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Ba*this.a)return;return r=e/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(e)<=Va?a=this.lat0:(a=el(i*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-Ba,o=Math.abs(s)<=Va?this.lat0>=0?xs(this.long0+Math.atan2(t.x,-t.y)):xs(this.long0-Math.atan2(-t.x,t.y)):xs(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=o,t.y=a,t}return u=Gu(this.es),l=Bu(this.es),c=zu(this.es),h=Uu(this.es),Math.abs(this.sin_p12-1)<=Va?(f=this.a*Du(u,l,c,h,Ba),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Yu((f-e)/this.a,u,l,c,h),o=xs(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Va?(f=this.a*Du(u,l,c,h,Ba),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Yu((e-f)/this.a,u,l,c,h),o=xs(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),p=qu(this.a,this.e,this.sin_p12),g=Math.cos(y),v=-(m=this.e*this.cos_p12*g)*m/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),x=1-v*(w=(b=e/p)-v*(1+v)*Math.pow(b,3)/6-_*(1+3*v)*Math.pow(b,4)/24)*w/2-b*w*w*w/6,d=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*g),o=xs(this.long0+Math.asin(Math.sin(y)*Math.sin(w)/Math.cos(d))),a=Math.atan((1-this.es*x*this.sin_p12/Math.sin(d))*Math.tan(d)/(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var ml={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=xs(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),((o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=Va)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=el(e/this.a),n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(e)<=Va?(s=this.lat0,t.x=a,t.y=s,t):(s=el(i*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-Ba,Math.abs(o)<=Va?(a=this.lat0>=0?xs(this.long0+Math.atan2(t.x,-t.y)):xs(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=xs(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},vl={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},_l={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function bl(t,e,r,n){var i;return t<Va?(n.value=_l.AREA_0,i=0):(i=Math.atan2(e,r),Math.abs(i)<=Xa?n.value=_l.AREA_0:i>Xa&&i<=Ba+Xa?(n.value=_l.AREA_1,i-=Ba):i>Ba+Xa||i<=-(Ba+Xa)?(n.value=_l.AREA_2,i=i>=0?i-Ha:i+Ha):(n.value=_l.AREA_3,i+=Ba)),i}function wl(t,e){var r=t+e;return r<-Ha?r+=Za:r>+Ha&&(r-=Za),r}var xl={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ba-Xa/2?this.face=vl.TOP:this.lat0<=-(Ba-Xa/2)?this.face=vl.BOTTOM:Math.abs(this.long0)<=Xa?this.face=vl.FRONT:Math.abs(this.long0)<=Ba+Xa?this.face=this.long0>0?vl.RIGHT:vl.LEFT:this.face=vl.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===vl.TOP)i=Ba-e,r>=Xa&&r<=Ba+Xa?(u.value=_l.AREA_0,n=r-Ba):r>Ba+Xa||r<=-(Ba+Xa)?(u.value=_l.AREA_1,n=r>0?r-Ha:r+Ha):r>-(Ba+Xa)&&r<=-Xa?(u.value=_l.AREA_2,n=r+Ba):(u.value=_l.AREA_3,n=r);else if(this.face===vl.BOTTOM)i=Ba+e,r>=Xa&&r<=Ba+Xa?(u.value=_l.AREA_0,n=-r+Ba):r<Xa&&r>=-Xa?(u.value=_l.AREA_1,n=-r):r<-Xa&&r>=-(Ba+Xa)?(u.value=_l.AREA_2,n=-r-Ba):(u.value=_l.AREA_3,n=r>0?-r+Ha:-r-Ha);else{var l,c,h,f,p,d;this.face===vl.RIGHT?r=wl(r,+Ba):this.face===vl.BACK?r=wl(r,+Ha):this.face===vl.LEFT&&(r=wl(r,-Ba)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(r),l=p*Math.cos(r),c=p*d,h=f,this.face===vl.FRONT?n=bl(i=Math.acos(l),h,c,u):this.face===vl.RIGHT?n=bl(i=Math.acos(c),h,-l,u):this.face===vl.BACK?n=bl(i=Math.acos(-l),h,-c,u):this.face===vl.LEFT?n=bl(i=Math.acos(-c),h,l,u):(i=n=0,u.value=_l.AREA_0)}return a=Math.atan(12/Ha*(n+Math.acos(Math.sin(n)*Math.cos(Xa))-Ba)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===_l.AREA_1?a+=Ba:u.value===_l.AREA_2?a+=Ha:u.value===_l.AREA_3&&(a+=1.5*Ha),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=_l.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=_l.AREA_1,e-=Ba):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=_l.AREA_2,e=e<0?e+Ha:e-Ha):(d.value=_l.AREA_3,e+=Ba),l=Ha/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===vl.TOP)u=Math.acos(s),p.phi=Ba-u,d.value===_l.AREA_0?p.lam=a+Ba:d.value===_l.AREA_1?p.lam=a<0?a+Ha:a-Ha:d.value===_l.AREA_2?p.lam=a-Ba:p.lam=a;else if(this.face===vl.BOTTOM)u=Math.acos(s),p.phi=u-Ba,d.value===_l.AREA_0?p.lam=-a+Ba:d.value===_l.AREA_1?p.lam=-a:d.value===_l.AREA_2?p.lam=-a-Ba:p.lam=a<0?-a-Ha:-a+Ha;else{var y,g,m;l=(y=s)*y,g=(l+=(m=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*m)>=1?0:Math.sqrt(1-l),d.value===_l.AREA_1?(l=g,g=-m,m=l):d.value===_l.AREA_2?(g=-g,m=-m):d.value===_l.AREA_3&&(l=g,g=m,m=-l),this.face===vl.RIGHT?(l=y,y=-g,g=l):this.face===vl.BACK?(y=-y,g=-g):this.face===vl.LEFT&&(l=y,y=g,g=-l),p.phi=Math.acos(-m)-Ba,p.lam=Math.atan2(g,y),this.face===vl.RIGHT?p.lam=wl(p.lam,-Ba):this.face===vl.BACK?p.lam=wl(p.lam,-Ha):this.face===vl.LEFT&&(p.lam=wl(p.lam,+Ba))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},El=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Sl=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ol=.8487,Tl=1.3523,Ml=Wa/5,Il=1/Ml,Pl=18,Cl=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Ll=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var kl,Rl={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=xs(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*Ml);n<0?n=0:n>=Pl&&(n=Pl-1),r=Wa*(r-Il*n);var i={x:Cl(El[n],r)*e,y:Cl(Sl[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Ol+this.x0,i.y=i.y*this.a*Tl+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Ol),y:Math.abs(t.y-this.y0)/(this.a*Tl)};if(e.y>=1)e.x/=El[Pl][0],e.y=t.y<0?-Ba:Ba;else{var r=Math.floor(e.y*Pl);for(r<0?r=0:r>=Pl&&(r=Pl-1);;)if(Sl[r][0]>e.y)--r;else{if(!(Sl[r+1][0]<=e.y))break;++r}var n=Sl[r],i=5*(e.y-n[0])/(Sl[r+1][0]-n[0]);i=function(t,e,r,n){for(var i=e;n;--n){var o=t(i);if(i-=o,Math.abs(o)<r)break}return i}(function(t){return(Cl(n,t)-e.y)/Ll(n,t)},i,Va,100),e.x/=Cl(El[r],i),e.y=(5*r+i)*Ya,t.y<0&&(e.y=-e.y)}return e.x=xs(e.x+this.long0),e},names:["Robinson","robin"]};Xs.defaultDatum="WGS84",Xs.Proj=Fs,Xs.WGS84=new Xs.Proj("WGS84"),Xs.Point=pu,Xs.toPoint=Bs,Xs.defs=ys,Xs.transform=qs,Xs.mgrs=ru,Xs.version=du.a,(kl=Xs).Proj.projections.add(_u),kl.Proj.projections.add(Tu),kl.Proj.projections.add(Iu),kl.Proj.projections.add(ku),kl.Proj.projections.add(Ru),kl.Proj.projections.add(Au),kl.Proj.projections.add(Nu),kl.Proj.projections.add(Fu),kl.Proj.projections.add(ju),kl.Proj.projections.add(Wu),kl.Proj.projections.add(tl),kl.Proj.projections.add(rl),kl.Proj.projections.add(nl),kl.Proj.projections.add(ol),kl.Proj.projections.add(al),kl.Proj.projections.add(ul),kl.Proj.projections.add(ll),kl.Proj.projections.add(cl),kl.Proj.projections.add(fl),kl.Proj.projections.add(pl),kl.Proj.projections.add(dl),kl.Proj.projections.add(yl),kl.Proj.projections.add(gl),kl.Proj.projections.add(ml),kl.Proj.projections.add(xl),kl.Proj.projections.add(Rl);var Al=Xs;function Nl(t){var e,r,n=Object.keys(t.defs),i=n.length;for(e=0;e<i;++e){var o=n[e];if(!yr(o)){var a=t.defs(o);dr(new Xe({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(e=0;e<i;++e){var s=n[e],u=yr(s);for(r=0;r<i;++r){var l=n[r],c=yr(l);if(!cr(s,l))if(t.defs[s]===t.defs[l])mr([u,c]);else{var h=t(s,l);br(u,c,h.forward,h.inverse)}}}}[{def:"+proj=longlat +datum=WGS84 +no_defs",extent:[-180,-90,180,90],codes:["EPSG:4326","urn:ogc:def:crs:EPSG::4326","urn:ogc:def:crs:OGC:1.3:CRS84","http://www.opengis.net/def/crs/OGC/1.3/CRS84"],units:"d",metersPerUnit:111319.49079327358,axisOrientation:"neu"},{def:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32627","urn:ogc:def:crs:EPSG::32627","http://www.opengis.net/gml/srs/epsg.xml#32627"],units:"m"},{def:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.44317933178,0,833978.5568206678,9329005.18301614],codes:["EPSG:32628","urn:ogc:def:crs:EPSG::32628","http://www.opengis.net/gml/srs/epsg.xml#32628"],units:"m"},{def:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32629","urn:ogc:def:crs:EPSG::32629","http://www.opengis.net/gml/srs/epsg.xml#32629"],units:"m"},{def:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32630","urn:ogc:def:crs:EPSG::32630","http://www.opengis.net/gml/srs/epsg.xml#32630"],units:"m"},{def:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32631","urn:ogc:def:crs:EPSG::32631","http://www.opengis.net/gml/srs/epsg.xml#32631"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-16.1,32.88,39.65,84.17],codes:["EPSG:4258","urn:ogc:def:crs:EPSG::4258","http://www.opengis.net/gml/srs/epsg.xml#4258"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-164850.78,3660417.01,988728.57,9567111.85],codes:["EPSG:25829","urn:ogc:def:crs:EPSG::25829","http://www.opengis.net/gml/srs/epsg.xml#25829"],units:"m"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[397101.09,3638520.14,1034670.43,9625438.82],codes:["EPSG:25828","urn:ogc:def:crs:EPSG::25828","http://www.opengis.net/gml/srs/epsg.xml#25828"],units:"m"},{def:"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-729785.83,3715125.82,940929.67,9518470.69],codes:["EPSG:25830","urn:ogc:def:crs:EPSG::25830","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-1300111.74,3804640.43,893164.13,9478718.31],codes:["EPSG:25831","urn:ogc:def:crs:EPSG::25831","http://www.opengis.net/gml/srs/epsg.xml#25831"],units:"m"},{def:"+proj=longlat +ellps=intl +no_defs",extent:[-16.09882145355955,25.711114310330917,48.60999527749605,84.16977336415472],codes:["EPSG:4230","urn:ogc:def:crs:EPSG::4230","http://www.opengis.net/gml/srs/epsg.xml#4230"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=28 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[997517.95,3873475.61,2024693.05,8529441.99],codes:["EPSG:23028","urn:ogc:def:crs:EPSG::23028","http://www.opengis.net/gml/srs/epsg.xml#23028"],units:"m"},{def:"+proj=utm +zone=29 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[448933.91,3860083.93,1860436.11,8381369.16],codes:["EPSG:23029","urn:ogc:def:crs:EPSG::23029","http://www.opengis.net/gml/srs/epsg.xml#23029"],units:"m"},{def:"+proj=utm +zone=30 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-99844.71,3879626.63,1682737.72,8251830.8],codes:["EPSG:23030","urn:ogc:def:crs:EPSG::23030","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=utm +zone=31 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-650883.16,3932764.97,1493695.91,8141744.84],codes:["EPSG:23031","urn:ogc:def:crs:EPSG::23031","http://www.opengis.net/gml/srs/epsg.xml#23031"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-21.93,24.6,-11.75,32.76],codes:["EPSG:4081","urn:ogc:def:crs:EPSG::4081","http://www.opengis.net/gml/srs/epsg.xml#4081"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[405849.71,2720975.6,1367994.77,3662797.15],codes:["EPSG:4082","urn:ogc:def:crs:EPSG::4082","http://www.opengis.net/gml/srs/epsg.xml#4082"],units:"m"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",extent:[-202677.94,2738405.48,804488.92,3629357.1],codes:["EPSG:4083","urn:ogc:def:crs:EPSG::4083","http://www.opengis.net/gml/srs/epsg.xml#4083"],units:"m"}].forEach(function(t){t.codes.forEach(function(e){Al.defs(e,t.def)}),mr(t.codes.map(function(e){return new Xe({code:e,extent:t.extent,units:t.units,metersPerUnit:t.metersPerUnit,axisOrientation:t.axisOrientation})}))}),Nl(Al);var Fl={ADD:"add",REMOVE:"remove"},jl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dl="length",Gl=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return jl(e,t),e}(Mt),Bl=function(t){function e(e,r){var n=t.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=e||[],n.unique_)for(var o=0,a=n.array_.length;o<a;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return jl(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Dl)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Gl(Fl.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Gl(Fl.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Gl(Fl.REMOVE,n,t)),this.dispatchEvent(new Gl(Fl.ADD,e,t))}else{for(var i=r;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Dl,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new zt(58)},e}(Gt),zl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ul=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.map=r,i.frameState=void 0!==n?n:null,i}return zl(e,t),e}(Mt),ql=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vl=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return ql(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Ul),Yl=(r(32),{SINGLECLICK:"singleclick",CLICK:Ct.CLICK,DBLCLICK:Ct.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}),Wl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xl=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,n,i,o)||this;return a.pointerEvent=n,a}return Wl(e,t),e}(Vl),Zl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kl=function(t){function e(e,r){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=r?r*ki:ki,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=ct(i,Zl.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=ct(i,Zl.POINTERMOVE,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(Ct.TOUCHMOVE,n.boundHandleTouchMove_,!!Ni&&{passive:!1}),n}return Hl(e,t),e.prototype.emulateClick_=function(t){var e=new Xl(Yl.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Xl(Yl.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Xl(Yl.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Yl.POINTERUP||e.type==Yl.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Yl.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Xl(Yl.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(ft),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Xl(Yl.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(ct(document,Yl.POINTERMOVE,this.handlePointerMove_,this),ct(document,Yl.POINTERUP,this.handlePointerUp_,this),ct(this.element_,Yl.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Xl(Yl.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Xl(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ft(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ct.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ft(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ft),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Pt),$l="postrender",Jl="movestart",Ql="moveend",tc={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ec={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},rc={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},nc=1/0,ic=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,st(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){Ut(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=nc&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=i,r[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(r=n(t=i[e]))==nc?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=r,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}(),oc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ac=function(t){function e(e,r){var n=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return oc(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);r&&e[0].addEventListener(Ct.CHANGE,this.boundHandleTileChange_);return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(e.hifi&&r===rc.LOADED||r===rc.ERROR||r===rc.EMPTY){e.removeEventListener(Ct.CHANGE,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==rc.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())},e}(ic);var sc=42,uc=256;function lc(t,e,r){return function(n,i,o,a){if(n){var s=e?0:o[0]*i,u=e?0:o[1]*i,l=t[0]+s/2,c=t[2]-s/2,h=t[1]+u/2,f=t[3]-u/2;l>c&&(c=l=(c+l)/2),h>f&&(f=h=(f+h)/2);var p=Ce(n[0],l,c),d=Ce(n[1],h,f),y=30*i;return a&&r&&(p+=-y*Math.log(1+Math.max(0,l-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-c)/y),d+=-y*Math.log(1+Math.max(0,h-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-f)/y)),[p,d]}}}function cc(t){return t}function hc(t,e,r,n){var i=we(e)/r[0],o=me(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function fc(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),Ce(n,r/2,2*e)}function pc(t,e,r,n,i){return function(o,a,s,u){if(void 0!==o){var l=n?hc(t,n,s,i):t;return(void 0===r||r)&&u?fc(o,l,e):Ce(o,e,l)}}}function dc(t){return void 0!==t?0:void 0}function yc(t){return void 0!==t?t:void 0}var gc=0,mc=1,vc="center",_c="resolution",bc="rotation";function wc(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n}function xc(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function Ec(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Sc(t,e){var r,n,i=t[0],o=t[1],a=e[0],s=e[1],u=a[0],l=a[1],c=s[0],h=s[1],f=c-u,p=h-l,d=0===f&&0===p?0:(f*(i-u)+p*(o-l))/(f*f+p*p||0);return d<=0?(r=u,n=l):d>=1?(r=c,n=h):(r=u+d*f,n=l+d*p),[r,n]}function Oc(t,e,r){var n=Fe(e+180,360)-180,i=Math.abs(3600*n),o=r||0,a=Math.pow(10,o),s=Math.floor(i/3600),u=Math.floor((i-3600*s)/60),l=i-3600*s-60*u;return(l=Math.ceil(l*a)/a)>=60&&(l=0,u+=1),u>=60&&(u=0,s+=1),s+"° "+wc(u,2)+"′ "+wc(l,2,o)+"″"+(0==n?"":" "+t.charAt(n<0?1:0))}function Tc(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function Mc(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function Ic(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function Pc(t,e){return t[0]*=e,t[1]*=e,t}function Cc(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Lc(t,e){return Math.sqrt(Cc(t,e))}function kc(t,e){return Cc(t,Sc(t,e))}function Rc(t,e){return Tc(t,"{x}, {y}",e)}function Ac(t,e){var r=e.getExtent();if(e.canWrapX()&&(t[0]<r[0]||t[0]>=r[2])){var n=we(r),i=Math.floor((t[0]-r[0])/n);t[0]-=i*n}return t}function Nc(t){return Math.pow(t,3)}function Fc(t){return 1-Nc(1-t)}function jc(t){return 3*t*t-2*t*t*t}function Dc(t){return t}function Gc(t){return t<.5?jc(2*t):1-jc(2*(t-.5))}var Bc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zc=0;function Uc(t,e){setTimeout(function(){t(e)},0)}function qc(t){return!(t.sourceCenter&&t.targetCenter&&!Mc(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Vc=function(t){function e(e){var r=t.call(this)||this,n=at({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=vr(n.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.cancelAnchor_=void 0,n.center&&(n.center=kr(n.center,r.projection_)),n.extent&&(n.extent=Ar(n.extent,r.projection_)),r.applyOptions_(n),r}return Bc(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,r,n,i=void 0!==t.minZoom?t.minZoom:zc,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=vr(t.projection,"EPSG:3857"),h=c.getExtent(),f=t.constrainOnlyCenter,p=t.extent;s||p||!c.isGlobal()||(f=!1,p=h);if(void 0!==t.resolutions){var d=t.resolutions;r=d[i],n=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,r,n){return function(i,o,a,s){if(void 0!==i){var u=t[0],l=t[t.length-1],c=r?hc(u,r,a,n):u;if(s)return void 0===e||e?fc(i,c,l):Ce(i,l,c);var h=Math.min(c,i),f=Math.floor(gt(t,h,o));return t[f]>c&&f<t.length-1?t[f+1]:t[f]}}}(d,u,!f&&p,l):pc(r,n,u,!f&&p,l)}else{var y=h?Math.max(we(h),me(h)):360*Ye[We.DEGREES]/c.getMetersPerUnit(),g=y/uc/Math.pow(2,zc),m=g/Math.pow(2,28-zc);void 0!==(r=t.maxResolution)?i=0:r=g/Math.pow(a,i),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,o):g/Math.pow(a,o):m),o=i+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,o-i),e=t.constrainResolution?function(t,e,r,n,i,o){return function(a,s,u,l){if(void 0!==a){var c=i?hc(e,i,u,o):e,h=void 0!==r?r:0;if(l)return void 0===n||n?fc(a,c,h):Ce(a,h,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),y=Math.floor(Math.log(e/d)/Math.log(t)+p),g=Math.max(f,y);return Ce(e/Math.pow(t,g),h,c)}}}(a,r,n,u,!f&&p,l):pc(r,n,u,!f&&p,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return lc(t.extent,t.constrainOnlyCenter,e)}var r=vr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,lc(n,!1,!1)}return cc}(t),n=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=i||Ne(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?yc:"number"==typeof e?(r=e,n=2*Math.PI/r,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):yc}return dc;var r,n;var i,o}(t);this.constraints_={center:r,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=at({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),at({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=at({},n)).center=kr(n.center,this.getProjection())),n.anchor&&((n=at({},n)).anchor=kr(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Uc(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<r;++l){var c=arguments[l],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||jc,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var f=Fe(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+f,s=h.targetRotation}qc(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(gc,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[gc]>0},e.prototype.getInteracting=function(){return this.hints_[mc]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(gc,-this.hints_[gc]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&Uc(n[0].callback,!1),!t)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],p=h+c*(s.targetCenter[0]-h),d=f+c*(s.targetCenter[1]-f);this.targetCenter_=[p,d]}if(s.sourceResolution&&s.targetResolution){var y=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var g=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(y,0,g,!0);this.targetCenter_=this.calculateCenterZoom(m,s.anchor)}this.targetResolution_=y,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var v=1===c?Fe(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(gc,-1);var b=n[0].callback;b&&Uc(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(Ic(r=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),Ec(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]);return r},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Lr(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(vc)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return Rr(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),r=this.getCenterInternal();Ut(r,1);var n=this.getResolution();Ut(void 0!==n,2);var i=this.getRotation();return Ut(void 0!==i,3),ge(r,n,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(_c)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Ar(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSize_(),n=we(t)/r[0],i=me(t)/r[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(bc)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),r=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:r,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=gt(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Ce(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,Ce(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r,n=at({size:this.getViewportSize_()},e||{});if(Ut(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Ut(!Ee(t),25),r=Xn(i=Ar(t,this.getProjection()));else if(t.getType()===De.CIRCLE){var i;(r=Xn(i=Ar(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),de(i))}else{var o=Cr();r=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(r,n)},e.prototype.fitInternal=function(t,e){var r=e||{},n=r.size;n||(n=this.getViewportSize_());var i,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;i=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),l=Math.cos(-u),c=Math.sin(-u),h=1/0,f=1/0,p=-1/0,d=-1/0,y=t.getStride(),g=0,m=s.length;g<m;g+=y){var v=s[g]*l-s[g+1]*c,_=s[g]*c+s[g+1]*l;h=Math.min(h,v),f=Math.min(f,_),p=Math.max(p,v),d=Math.max(d,_)}var b=this.getResolutionForExtentInternal([h,f,p,d],[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);b=isNaN(b)?i:Math.max(b,i),b=this.getConstrainedResolution(b,a?0:1),c=-c;var w=(h+p)/2,x=(f+d)/2,E=[(w+=(o[1]-o[3])/2*b)*l-(x+=(o[0]-o[2])/2*b)*c,x*l+w*c],S=r.callback?r.callback:St;void 0!==r.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(E,b),duration:r.duration,easing:r.easing},S):(this.targetResolution_=b,this.targetCenter_=E,this.applyTargetState_(!1,!0),Uc(S,!0))},e.prototype.centerOn=function(t,e,r){this.centerOnInternal(kr(t,this.getProjection()),e,r)},e.prototype.centerOnInternal=function(t,e,r){var n=this.getRotation(),i=Math.cos(-n),o=Math.sin(-n),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),l=(a+=(e[0]/2-r[0])*u)*i-(s+=(r[1]-e[1]/2)*u)*(o=-o),c=s*i+a*o;this.setCenterInternal([l,c])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Lr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=e&&kr(e,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=kr(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(kr(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r);this.get(bc)!==n&&this.set(bc,n),this.get(_c)!==o&&this.set(_c,o),this.get(vc)&&Mc(this.get(vc),a)||this.set(vc,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();var l=r||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Mc(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:n,easing:Fc,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(mc,1)},e.prototype.endInteraction=function(t,e,r){var n=r&&kr(r,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,r){this.setHint(mc,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(Gt),Yc={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"},Wc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xc=function(t){function e(e){var r=t.call(this)||this,n=at({},e);return n[Yc.OPACITY]=void 0!==e.opacity?e.opacity:1,Ut("number"==typeof n[Yc.OPACITY],64),n[Yc.VISIBLE]=void 0===e.visible||e.visible,n[Yc.Z_INDEX]=e.zIndex,n[Yc.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[Yc.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,n[Yc.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,n[Yc.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return Wc(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=Ce(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return et()},e.prototype.getLayerStatesArray=function(t){return et()},e.prototype.getExtent=function(){return this.get(Yc.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(Yc.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(Yc.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(Yc.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(Yc.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(Yc.OPACITY)},e.prototype.getSourceState=function(){return et()},e.prototype.getVisible=function(){return this.get(Yc.VISIBLE)},e.prototype.getZIndex=function(){return this.get(Yc.Z_INDEX)},e.prototype.setExtent=function(t){this.set(Yc.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(Yc.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(Yc.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(Yc.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(Yc.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Ut("number"==typeof t,64),this.set(Yc.OPACITY,t)},e.prototype.setVisible=function(t){this.set(Yc.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(Yc.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Gt),Zc={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Hc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kc={LAYERS:"layers"},$c=function(t){function e(e){var r=this,n=e||{},i=at({},n);delete i.layers;var o=n.layers;return(r=t.call(this,i)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addEventListener(Dt(Kc.LAYERS),r.handleLayersChanged_),o?Array.isArray(o)?o=new Bl(o.slice(),{unique:!0}):Ut("function"==typeof o.getArray,43):o=new Bl(void 0,{unique:!0}),r.setLayers(o),r}return Hc(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ft),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(ct(t,Fl.ADD,this.handleLayersAdd_,this),ct(t,Fl.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(ft);st(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var o=r[n];this.listenerKeys_[nt(o)]=[ct(o,ot.PROPERTYCHANGE,this.handleLayerChange_,this),ct(o,Ct.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[nt(e)]=[ct(e,ot.PROPERTYCHANGE,this.handleLayerChange_,this),ct(e,Ct.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=nt(t.element);this.listenerKeys_[e].forEach(ft),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(Kc.LAYERS)},e.prototype.setLayers=function(t){this.set(Kc.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),i=r,o=e.length;i<o;i++){var a=e[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=ve(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return Zc.READY},e}(Xc);function Jc(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function Qc(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function th(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var eh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var rh=function(t){function e(e){var r=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new $c({layers:t.layers});o[tc.LAYERGROUP]=a,o[tc.TARGET]=t.target,o[tc.VIEW]=void 0!==t.view?t.view:new Vc,void 0!==t.controls&&(Array.isArray(t.controls)?r=new Bl(t.controls.slice()):(Ut("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new Bl(t.interactions.slice()):(Ut("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new Bl(t.overlays.slice()):(Ut("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new Bl;return{controls:r,interactions:n,keyboardEventTarget:e,overlays:i,values:o}}(e);r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:ki,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=new Kl(r,e.moveTolerance);var i=r.handleMapBrowserEvent.bind(r);for(var o in Yl)r.mapBrowserEventHandler_.addEventListener(Yl[o],i);r.keyboardEventTarget_=n.keyboardEventTarget,r.keyHandlerKeys_=null;var a=r.handleBrowserEvent.bind(r);return r.viewport_.addEventListener(Ct.CONTEXTMENU,a,!1),r.viewport_.addEventListener(Ct.WHEEL,a,!!Ni&&{passive:!1}),r.controls=n.controls||new Bl,r.interactions=n.interactions||new Bl,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new ac(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addEventListener(Dt(tc.LAYERGROUP),r.handleLayerGroupChanged_),r.addEventListener(Dt(tc.VIEW),r.handleViewChanged_),r.addEventListener(Dt(tc.SIZE),r.handleSizeChanged_),r.addEventListener(Dt(tc.TARGET),r.handleTargetChanged_),r.setProperties(n.values),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.controls.addEventListener(Fl.ADD,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(Fl.REMOVE,function(t){t.element.setMap(null)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.addEventListener(Fl.ADD,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(Fl.REMOVE,function(t){t.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(Fl.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(r)),r.overlays_.addEventListener(Fl.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(r)),r}return eh(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(Ct.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ct.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Ct.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:xt,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,function(t){r.push(t)},e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||xt;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:xt,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(tc.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Lr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Gr(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(tc.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=kr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Gr(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(tc.SIZE)},e.prototype.getView=function(){return this.get(tc.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,r,n){return function(t,e,r,n,i){if(!(t&&r in t.wantedTiles))return nc;if(!t.wantedTiles[r][e.getKey()])return nc;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,r,n)},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new Vl(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive())if(!i.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[gc]||i[mc]){var o=!Ai&&Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}!t||!this.hasListener(ec.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(ec.RENDERCOMPLETE,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)ft(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[ct(n,Ct.KEYDOWN,this.handleBrowserEvent,this),ct(n,Ct.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Ct.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),Bi(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Ct.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ft(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ft(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ct(t,ot.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ct(t,Ct.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ft),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[ct(t,ot.PROPERTYCHANGE,this.render,this),ct(t,Ct.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),r=this.getView(),n=this.frameState_,i=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:ge(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n)(!this.previousExtent_||!Ee(this.previousExtent_)&&!ie(i.extent,this.previousExtent_))&&(this.dispatchEvent(new Ul(Jl,this,n)),this.previousExtent_=ee(this.previousExtent_));this.previousExtent_&&!i.viewHints[gc]&&!i.viewHints[mc]&&!ie(i.extent,this.previousExtent_)&&(this.dispatchEvent(new Ul(Ql,this,i)),Xt(i.extent,this.previousExtent_))}this.dispatchEvent(new Ul($l,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(tc.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(tc.SIZE,t)},e.prototype.setTarget=function(t){this.set(tc.TARGET,t)},e.prototype.setView=function(t){this.set(tc.VIEW,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},e}(Gt),nh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ih=function(t){function e(e){var r=t.call(this)||this;return r.element=e.element?e.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render_=e.render?e.render:St,e.target&&r.setTarget(e.target),r}return nh(e,t),e.prototype.disposeInternal=function(){Bi(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Bi(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)ft(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==St&&this.listenerKeys.push(ct(t,$l,this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Gt),oh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ah(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var sh=function(t){function e(e){var r=this,n=at({},e);delete n.source,(r=t.call(this,n)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addEventListener(Dt(Yc.SOURCE),r.handleSourcePropertyChange_);var i=e.source?e.source:null;return r.setSource(i),r}return oh(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Yc.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Zc.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ft(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=ct(t,Ct.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(ft(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ft(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ct(t,ec.PRECOMPOSE,function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Ut(!e.some(function(t){return t.layer===r.layer}),67),e.push(r)},this),this.mapRenderKey_=ct(this,Ct.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Yc.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Xc),uh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function lh(t){this.updateElement_(t.frameState)}var ch=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||lh,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(Ct.CLICK,r.handleClick_.bind(r),!1);var c=i+" "+Yi+" "+Xi+(r.collapsed_&&r.collapsible_?" "+Zi:"")+(r.collapsible_?"":" ol-uncollapsible"),h=r.element;return h.className=c,h.appendChild(r.ulElement_),h.appendChild(l),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return uh(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=t.layerStatesArray,i=0,o=n.length;i<o;++i){var a=n[i];if(ah(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var c=0,h=l.length;c<h;++c)l[c]in e||(r.push(l[c]),e[l[c]]=!0);else l in e||(r.push(l),e[l]=!0)}}}}return r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!bt(e,this.renderedAttributions_)){zi(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(Zi),this.collapsed_?Gi(this.collapseLabel_,this.label_):Gi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(ih),hh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function fh(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains(qi);i||0!==r?i&&0!==r&&this.element.classList.remove(qi):this.element.classList.add(qi)}this.label_.style.transform=n}this.rotation_=r}}var ph=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render||fh,target:n.target})||this;var i=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"⇧";r.label_=null,"string"==typeof o?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=o):(r.label_=o,r.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(r.label_),s.addEventListener(Ct.CLICK,r.handleClick_.bind(r),!1);var u=i+" "+Yi+" "+Xi,l=r.element;return l.className=u,l.appendChild(s),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(qi),r}return hh(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Fc}):t.setRotation(0))}},e}(ih),dh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yh=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),target:n.target})||this;var i=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",u=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",l=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i+"-in",c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(Ct.CLICK,r.handleClick_.bind(r,o),!1);var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(Ct.CLICK,r.handleClick_.bind(r,-o),!1);var f=i+" "+Yi+" "+Xi,p=r.element;return p.className=f,p.appendChild(c),p.appendChild(h),r.duration_=void 0!==n.duration?n.duration:250,r}return dh(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Fc})):e.setZoom(n)}}},e}(ih);function gh(t){var e=t||{},r=new Bl;return(void 0===e.zoom||e.zoom)&&r.push(new yh(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new ph(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new ch(e.attributionOptions)),r}var mh=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),vh={ACTIVE:"active"},_h=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function bh(t,e,r,n){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:Fc})}}var wh=function(t){function e(e){var r=t.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return _h(e,t),e.prototype.getActive=function(){return this.get(vh.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(vh.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Gt),xh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Eh(t){var e=!1;if(t.type==Yl.DBLCLICK){var r=t.originalEvent,n=t.map,i=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_;bh(n.getView(),o,i,this.duration_),t.preventDefault(),e=!0}return!e}var Sh=function(t){function e(e){var r=t.call(this,{handleEvent:Eh})||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return xh(e,t),e}(wh),Oh=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Th=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Mh=function(t){return t.target.getTargetElement()===document.activeElement},Ih=xt,Ph=function(t){var e=t.originalEvent;return 0==e.button&&!(Ci&&Li&&e.ctrlKey)},Ch=Et,Lh=function(t){return t.type==Yl.SINGLECLICK},kh=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Rh=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ah=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Nh=function(t){var e=t.pointerEvent;return Ut(void 0!==e,56),"mouse"==e.pointerType},Fh=function(t){var e=t.pointerEvent;return Ut(void 0!==e,56),e.isPrimary&&0===e.button},jh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Dh(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var Gh=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return jh(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Yl.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Yl.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Yl.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Yl.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Yl.POINTERDOWN||e===Yl.POINTERDRAG||e===Yl.POINTERUP}(t)){var e=t.pointerEvent,r=e.pointerId.toString();t.type==Yl.POINTERUP?delete this.trackedPointers_[r]:t.type==Yl.POINTERDOWN?this.trackedPointers_[r]=e:r in this.trackedPointers_&&(this.trackedPointers_[r]=e),this.targetPointers=ut(this.trackedPointers_)}},e}(wh),Bh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function zh(t){return kh(t)&&Fh(t)}var Uh=function(t){function e(e){var r=t.call(this,{stopDown:Et})||this,n=e||{};return r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1,r.condition_=n.condition?n.condition:zh,r.noKinetic_=!1,r}return Bh(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Mh(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=Dh(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var n=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],i=t.map.getView();Pc(n,i.getResolution()),Ic(n,i.getRotation()),i.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(i),a[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:Fc})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Gh),qh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vh=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:Et})||this).condition_=n.condition?n.condition:Th,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return qh(e,t),e.prototype.handleDragEvent=function(t){if(Nh(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==dc){var n=e.getSize(),i=t.pixel,o=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!Nh(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!Nh(t)&&(!(!Ph(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(Gh),Yh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wh=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return Yh(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Yn([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(pt),Xh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zh="boxstart",Hh="boxdrag",Kh="boxend",$h=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.coordinate=r,i.mapBrowserEvent=n,i}return Xh(e,t),e}(Mt),Jh=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.box_=new Wh(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,r.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:St,r.startPixel_=null,r.condition_=n.condition?n.condition:Ph,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return Xh(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new $h(Hh,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new $h(Kh,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new $h(Zh,t.coordinate,t)),!0)},e}(Gh),Qh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function tf(){var t,e,r=this.getMap(),n=r.getView(),i=r.getSize(),o=this.getGeometry().getExtent();if(this.out_){var a=n.calculateExtentInternal(i),s=(t=[r.getPixelFromCoordinateInternal(fe(o)),r.getPixelFromCoordinateInternal(be(o))],se(ee(e),t));Se(a,1/n.getResolutionForExtentInternal(s,i)),o=a}var u=n.getConstrainedResolution(n.getResolutionForExtentInternal(o,i)),l=n.getConstrainedCenter(de(o),u);n.animateInternal({resolution:u,center:l,duration:this.duration_,easing:Fc})}var ef=function(t){function e(e){var r=this,n=e||{},i=n.condition?n.condition:Rh;return(r=t.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:tf})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return Qh(e,t),e}(Jh),rf={LEFT:37,UP:38,RIGHT:39,DOWN:40},nf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function of(t){var e=!1;if(t.type==Ct.KEYDOWN){var r=t.originalEvent.keyCode;if(this.condition_(t)&&(r==rf.DOWN||r==rf.LEFT||r==rf.RIGHT||r==rf.UP)){var n=t.map.getView(),i=n.getResolution()*this.pixelDelta_,o=0,a=0;r==rf.DOWN?a=-i:r==rf.LEFT?o=-i:r==rf.RIGHT?o=i:a=i;var s=[o,a];Ic(s,n.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Dc,center:t.getConstrainedCenter(i)})}}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}var af=function(t){function e(e){var r=t.call(this,{handleEvent:of})||this,n=e||{};return r.defaultCondition_=function(t){return kh(t)&&Ah(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return nf(e,t),e}(wh),sf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function uf(t){var e=!1;if(t.type==Ct.KEYDOWN||t.type==Ct.KEYPRESS){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,i=r=="+".charCodeAt(0)?this.delta_:-this.delta_;bh(n.getView(),i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var lf=function(t){function e(e){var r=t.call(this,{handleEvent:uf})||this,n=e||{};return r.condition_=n.condition?n.condition:Ah,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return sf(e,t),e}(wh),cf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hf="trackpad",ff="wheel",pf=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.condition_=n.condition?n.condition:Ih,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return cf(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Mh(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==Ct.WHEEL)return!0;t.preventDefault();var e,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Ct.WHEEL&&(e=n.deltaY,Pi&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=ki),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?hf:ff);var o=r.getView();if(this.mode_===hf&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-Ce(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(r=r?r>0?1:-1:0),bh(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(wh),df=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yf=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Et),(r=t.call(this,i)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==n.threshold?n.threshold:.3,r.duration_=void 0!==n.duration?n.duration:250,r}return df(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==dc){var u=a.getViewport().getBoundingClientRect(),l=Dh(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Gh),gf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mf=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Et),(r=t.call(this,i)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return gf(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=Dh(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Gh);function vf(t){var e=t||{},r=new Bl,n=new mh(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new Vh),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new Sh({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new Uh({condition:e.onFocusOnly?Mh:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new yf),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new mf({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new af),r.push(new lf({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new pf({condition:e.onFocusOnly?Mh:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new ef({duration:e.zoomDuration})),r}var _f=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bf=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.inversePixelTransform=r,o.frameState=n,o.context=i,o}return _f(e,t),e}(Mt),wf=function(){function t(){}return t.prototype.drawCustom=function(t,e,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),xf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ef=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=r,u.extent_=n,u.transform_=i,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return xf(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var i=Me(t,e,r,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var h=i[l]-this.imageAnchorX_,f=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var p=h+this.imageAnchorX_,d=f+this.imageAnchorY_;zr(a,p,d,this.imageScale_,this.imageScale_,u,-p,-d),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Me(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=zr(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,r,n,i){var o=this.context_,a=Me(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e},e.prototype.drawCircle=function(t){if(xe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return Me(n,0,n.length,i,e,r)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case De.POINT:this.drawPoint(t);break;case De.LINE_STRING:this.drawLineString(t);break;case De.POLYGON:this.drawPolygon(t);break;case De.MULTI_POINT:this.drawMultiPoint(t);break;case De.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case De.MULTI_POLYGON:this.drawMultiPolygon(t);break;case De.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case De.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&xe(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),xe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(xe(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),xe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),xe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(bt(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:"center";r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var r=t.getColor();this.fillState_={fillStyle:Mi(r||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:"round",lineDash:o||Ji,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==l?l:10,strokeStyle:Mi(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),r=t.getImage(1),n=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:Mi(r||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var i=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||Ji,lineDashOffset:s||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:Mi(i||"#000")}}else this.textStrokeState_=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),y=t.getRotation(),g=t.getScale(),m=t.getText(),v=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==v?v:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==y?y:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=""},e}(wf),Sf={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},Of=.5,Tf={Point:function(t,e,r,n){var i=r.getImage();if(i){if(i.getImageState()!=Ui.LOADED)return;var o=t.getBuilder(r.getZIndex(),Sf.IMAGE);o.setImageStyle(i,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Sf.TEXT);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},LineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Sf.LINE_STRING);o.setFillStrokeStyle(null,i),o.drawLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Sf.TEXT);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Sf.POLYGON);a.setFillStrokeStyle(i,o),a.drawPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Sf.TEXT);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPoint:function(t,e,r,n){var i=r.getImage();if(i){if(i.getImageState()!=Ui.LOADED)return;var o=t.getBuilder(r.getZIndex(),Sf.IMAGE);o.setImageStyle(i,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Sf.TEXT);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},MultiLineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Sf.LINE_STRING);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Sf.TEXT);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(o||i){var a=t.getBuilder(r.getZIndex(),Sf.POLYGON);a.setFillStrokeStyle(i,o),a.drawMultiPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Sf.TEXT);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},GeometryCollection:function(t,e,r,n){var i,o,a=e.getGeometriesArray();for(i=0,o=a.length;i<o;++i){var s=Tf[a[i].getType()];s(t,a[i],r,n)}},Circle:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Sf.CIRCLE);a.setFillStrokeStyle(i,o),a.drawCircle(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Sf.TEXT);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}}};function Mf(t,e){return parseInt(nt(t),10)-parseInt(nt(e),10)}function If(t,e){var r=Pf(t,e);return r*r}function Pf(t,e){return Of*t/e}function Cf(t,e,r,n,i,o){var a=!1,s=r.getImage();if(s){var u=s.getImageState();u==Ui.LOADED||u==Ui.ERROR?s.unlistenImageChange(i):(u==Ui.IDLE&&s.load(),u=s.getImageState(),s.listenImageChange(i),a=!0)}return function(t,e,r,n,i){var o=r.getGeometryFunction()(e);if(!o)return;var a=o.simplifyTransformed(n,i);if(r.getRenderer())!function t(e,r,n,i){if(r.getType()==De.GEOMETRY_COLLECTION){for(var o=r.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,i);return}var u=e.getBuilder(n.getZIndex(),Sf.DEFAULT);u.drawCustom(r,i,n.getRenderer())}(t,a,r,e);else{var s=Tf[a.getType()];s(t,a,r,e)}}(t,e,r,n,o),a}function Lf(t,e){var r=t.canvas,n=e||{},i=n.pixelRatio||ki,o=n.size;o&&(r.width=o[0]*i,r.height=o[1]*i,r.style.width=o[0]+"px",r.style.height=o[1]+"px");var a=[0,0,r.width,r.height],s=Br([1,0,0,1,0,0],i,i);return new Ef(t,i,a,s,0)}function kf(t){var e,r=t.frameState,n=jr(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),i=If(r.viewState.resolution,r.pixelRatio),o=Cr();return o&&(e=xr(o,r.viewState.projection)),new Ef(t.context,r.pixelRatio,r.extent,n,r.viewState.rotation,i,e)}function Rf(t,e){e&&e.clear();for(var r=t.declutterItems,n=r.length-1;n>=0;--n)for(var i=r[n],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return r.length=0,e}var Af=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Nf(t,e){Ao.expire()}var Ff=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r.declutterTree_=null,r}return Af(e,t),e.prototype.dispatchRenderEvent=function(t,e){et()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;zr(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ur(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o,a,s){var u,l=e.viewState;function c(t,e,r){return i.call(o,e,t?r:null)}var h=l.projection,f=Ac(t.slice(),h),p=[[0,0]];if(h.canWrapX()&&n){var d=we(h.getExtent());p.push([-d,0],[d,0])}var y,g=e.layerStatesArray,m=g.length;this.declutterTree_&&(y=this.declutterTree_.all().map(function(t){return t.value}));for(var v=[],_=0;_<p.length;_++)for(var b=m-1;b>=0;--b){var w=g[b],x=w.layer;if(x.hasRenderer()&&ah(w,l)&&a.call(s,x)){var E=x.getRenderer(),S=x.getSource();if(E&&S){var O=S.getWrapX()?f:t,T=c.bind(null,w.managed);v[0]=O[0]+p[_][0],v[1]=O[1]+p[_][1],u=E.forEachFeatureAtCoordinate(v,e,r,T,y)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){return et()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,xt,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=Rf(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){Ao.canExpireCache()&&t.postRenderFunctions.push(Nf)},e}(pt),jf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Df=function(t){function e(e){var r=t.call(this,e)||this;r.fontChangeListenerKey_=ct(to,ot.PROPERTYCHANGE,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=Yi+" ol-layers";var i=e.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return jf(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new bf(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){ft(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(ec.PRECOMPOSE,e);var r=e.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),n=e.viewState;this.children_.length=0;for(var i=null,o=0,a=r.length;o<a;++o){var s=r[o];if(e.layerIndex=o,ah(s,n)&&(s.sourceState==Zc.READY||s.sourceState==Zc.UNDEFINED)){var u=s.layer.render(e,i);u&&u!==i&&(this.children_.push(u),i=u)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(ec.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&ah(u,o)&&i(l)){var c=l.getRenderer().getDataAtPixel(t,e,r);if(c){var h=n(l,c);if(h)return h}}}},e}(Ff),Gf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bf=function(t){function e(e){return(e=at({},e)).controls||(e.controls=gh()),e.interactions||(e.interactions=vf()),t.call(this,e)||this}return Gf(e,t),e.prototype.createRenderer=function(){return new Df(this)},e}(rh),zf=r(96),Uf=r.n(zf),qf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vf={VERTICAL:0,HORIZONTAL:1};function Yf(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var Wf=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||Yf})||this).dragListenerKeys_=[],r.currentResolution_=void 0,r.direction_=Vf.VERTICAL,r.dragging_,r.heightLimit_=0,r.widthLimit_=0,r.startX_,r.startY_,r.thumbSize_=null,r.sliderInitialized_=!1,r.duration_=void 0!==n.duration?n.duration:200;var i=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb "+Yi;var a=r.element;return a.className=i+" "+Yi+" "+Xi,a.appendChild(o),a.addEventListener(Zl.POINTERDOWN,r.handleDraggerStart_.bind(r),!1),a.addEventListener(Zl.POINTERMOVE,r.handleDraggerDrag_.bind(r),!1),a.addEventListener(Zl.POINTERUP,r.handleDraggerEnd_.bind(r),!1),a.addEventListener(Ct.CLICK,r.handleContainerClick_.bind(r),!1),o.addEventListener(Ct.CLICK,Ot,!1),r}return qf(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight,n=t.firstElementChild,i=getComputedStyle(n),o=n.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=n.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[o,a],e>r?(this.direction_=Vf.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=Vf.VERTICAL,this.heightLimit_=r-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:i,duration:this.duration_,easing:Fc})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(ct(document,Zl.POINTERMOVE,r,this),ct(document,Zl.POINTERUP,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(ft),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==Vf.HORIZONTAL?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return Ce(this.direction_===Vf.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return Ce(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e}(ih);function Xf(t){return(Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hf(t,e){return!e||"object"!==Xf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kf(t){return(Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $f(t,e){return($f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jf=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hf(this,Kf(e).call(this,G({},t,!0)))).facadeMap_=null,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$f(t,e)}(e,Wf),r=e,(n=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&Zf(r.prototype,n),i&&Zf(r,i),e}(),Qf="load",tp="completed";function ep(t){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function np(t,e){return!e||"object"!==ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ip(t){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function op(t,e){return(op=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ap=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t;return n=np(this,ip(e).call(this,i)),d(i.addTo)&&wa(Sa("exception").addto_method),d(i.getElement)&&wa(Sa("exception").getelement_method),d(i.isByDefault)&&(i.isByDefault=!0),n.name=r,n.map_=null,n.element_=null,n.activationBtn_=null,n.activated=!1,n.panel_=null,n.controls_=null,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&op(t,e)}(e,ba),r=e,(n=[{key:"setImpl",value:function(t){var e=t;d(e.addTo)&&wa(Sa("exception").addto_method),d(e.getElement)&&wa(Sa("exception").getelement_method),d(e.isByDefault)&&(e.isByDefault=!0)}},{key:"addTo",value:function(t){var e=this;this.map_=t;var r=this.getImpl(),n=this.createView(t);n instanceof Promise?n.then(function(n){e.manageActivation(n),r.addTo(t,n),e.fire("added:map")}):(this.manageActivation(n),r.addTo(t,n),this.fire("added:map"))}},{key:"createView",value:function(t){}},{key:"manageActivation",value:function(t){var e=this;this.element_=t,this.activationBtn_=this.getActivationButton(this.element_),v(this.activationBtn_)||this.activationBtn_.addEventListener("click",function(t){t.preventDefault(),e.activated?(e.deactivate(),e.activated=!1):(e.activate(),e.activated=!0)},!1)}},{key:"getActivationButton",value:function(t){}},{key:"activate",value:function(){v(this.element_)||this.element_.classList.add("activated"),d(this.getImpl().activate)||this.getImpl().activate(),this.activated=!0,this.fire("activated")}},{key:"deactivate",value:function(){v(this.element_)||this.element_.classList.remove("activated"),d(this.getImpl().deactivate)||this.getImpl().deactivate(),this.activated=!1,this.fire("deactivated")}},{key:"getElement",value:function(){return this.getImpl().getElement()}},{key:"setPanel",value:function(t){this.panel_=t}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){}}])&&rp(r.prototype,n),i&&rp(r,i),e}();function sp(t){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function up(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lp(t,e){return!e||"object"!==sp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cp(t){return(cp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hp(t,e){return(hp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fp=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new Jf(r);return t=lp(this,cp(e).call(this,n,e.NAME)),d(Jf)&&wa(Sa("exception").panzoombar_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hp(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return rF(Uf.a)}},{key:"equals",value:function(t){var r=t instanceof e;return r}}])&&up(r.prototype,n),i&&up(r,i),e}();fp.NAME="panzoombar";var pp=fp,dp="KML",yp="WMS",gp="WFS",mp="WMTS",vp="OSM",_p="MBTiles",bp="MBTilesVector",wp="XYZ",xp="TMS",Ep={WMC:"WMC",KML:dp,WMS:yp,WFS:gp,WMTS:mp,OSM:vp,MBTiles:_p,MBTilesVector:bp,GeoJSON:"GeoJSON",Vector:"Vector",MVT:"MVT",XYZ:wp,TMS:xp},Sp=function(t){var e=E(t,!0);return e="WMS_FULL"===e?yp:"WFST"===e?gp:Object.keys(Ep).find(function(t){var r=Ep[t];return w(r)&&E(r,!0)===e}),Ep[e]},Op=function(t){return-1!==["WMC",dp,yp,gp,mp,_p,bp,"MVT",wp,xp].indexOf(Sp(t))};r(118),r(120);function Tp(t){return(Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Mp=/OSM\.*/,Ip=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map(function(t){return t.trim()}).map(function(t){return Number.parseFloat(t)})}};if(w(e)&&t.test(e)){var l=e.split("*")[o];v(l)||(s=u[n](l))}else b(e)?s=e[r]:wa("El parámetro no es de un tipo soportado: ".concat(Tp(e)));return w(s)&&(s=s.trim()),!0===a&&(s=E(s)),s}},Pp=function(t){var e=t,r=[];v(e)&&(e={type:vp,name:"osm"});var n=e;return m(n)||(n=[n]),r=n.map(function(t){return{type:vp,transparent:Ip({parameter:t,type:"boolean",attr:"transparent"})(Mp,1),legend:Ip({parameter:t,type:"string",name:"legend"})(Mp,2),name:Ip({parameter:t,type:"string",name:"name"})(Mp,3)}}),m(e)||(r=r[0]),r};function Cp(t){return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Lp=function(t){var e=t,r={};if(v(e)&&wa(Sa("exception").no_center),w(e))if(e=E(e),/^-?\d+(\.\d+)?[,;]-?\d+(\.\d+)?([*](true|false))?$/i.test(e)){var n=e.split(/\*/),i=n[0],o=n[1],a=i.split(/[,;]+/);2===a.length?(r.x=Number.parseFloat(a[0]),r.y=Number.parseFloat(a[1])):wa(Sa("exception").invalid_center_param),r.draw=/^1|(true)$/i.test(o)}else wa(Sa("exception").invalid_center_param);else m(e)?2===e.length||3===e.length?(w(e[0])&&(e[0]=Number.parseFloat(e[0])),w(e[1])&&(e[1]=Number.parseFloat(e[1])),r.x=e[0],r.y=e[1]):wa(Sa("exception").invalid_center_param):b(e)?(g(e.x)?wa(Sa("exception").invalid_center_param):(w(e.x)&&(e.x=Number.parseFloat(e.x)),r.x=e.x),g(e.y)?wa(Sa("exception").invalid_center_param):(w(e.y)&&(e.y=Number.parseFloat(e.y)),r.y=e.y),g(e.draw)?r.draw=!1:r.draw=/^true$/.test(e.draw)):wa("El parámetro no es de un tipo soportado: ".concat("undefined"==typeof maxExtentParameter?"undefined":Cp(maxExtentParameter)));return(Number.isNaN(r.x)||Number.isNaN(r.y))&&wa(Sa("exception").invalid_center_param),r},kp=function(t){var e,r=t;if(!v(r)){if(e={x:{},y:{}},v(r)&&wa(Sa("exception").no_maxextent),w(r))if(/^\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?$/.test(r)){var n=r.split(/[,;]+/);4===n.length?(e.x.min=Number.parseFloat(n[0]),e.y.min=Number.parseFloat(n[1]),e.x.max=Number.parseFloat(n[2]),e.y.max=Number.parseFloat(n[3])):wa(Sa("exception").invalid_maxextent_param)}else wa(Sa("exception").invalid_maxextent_param);else m(r)?4===r.length?(w(r[0])&&(r[0]=Number.parseFloat(r[0])),w(r[1])&&(r[1]=Number.parseFloat(r[1])),w(r[2])&&(r[2]=Number.parseFloat(r[2])),w(r[3])&&(r[3]=Number.parseFloat(r[3])),e.x.min=r[0],e.y.min=r[1],e.x.max=r[2],e.y.max=r[3]):wa(Sa("exception").invalid_maxextent_param):b(r)?(g(r.left)?g(r.x.min)?wa(Sa("exception").invalid_maxextent_param):(w(r.x.min)&&(r.x.min=Number.parseFloat(r.x.min)),e.x.min=r.x.min):(w(r.left)&&(r.left=Number.parseFloat(r.left)),e.x.min=r.left),g(r.bottom)?g(r.y.min)?wa(Sa("exception").invalid_maxextent_param):(w(r.y.min)&&(r.y.min=Number.parseFloat(r.y.min)),e.y.min=r.y.min):(w(r.bottom)&&(r.bottom=Number.parseFloat(r.bottom)),e.y.min=r.bottom),g(r.right)?g(r.x.max)?wa(Sa("exception").invalid_maxextent_param):(w(r.x.max)&&(r.x.max=Number.parseFloat(r.x.max)),e.x.max=r.x.max):(w(r.right)&&(r.right=Number.parseFloat(r.right)),e.x.max=r.right),g(r.top)?g(r.y.max)?wa(Sa("exception").invalid_maxextent_param):(w(r.y.max)&&(r.y.max=Number.parseFloat(r.y.max)),e.y.max=r.y.max):(w(r.top)&&(r.top=Number.parseFloat(r.top)),e.y.max=r.top)):wa("El parámetro no es de un tipo soportado: ".concat(Cp(r)));(Number.isNaN(e.x.min)||Number.isNaN(e.y.min)||Number.isNaN(e.x.max)||Number.isNaN(e.y.max))&&wa(Sa("exception").invalid_maxextent_param)}return e},Rp=function(t){var e={code:null,units:null};if(v(t)&&wa(Sa("exception").no_projection),w(t))if(/^(EPSG:)?\d+\*((d(egrees)?)|(m(eters)?))$/i.test(t)){var r=t.split(/\*/);e.code=r[0],e.units=E(r[1].substring(0,1))}else wa("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ));else b(t)?g(t.code)||g(t.units)?wa("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ)):(e.code=t.code,e.units=E(t.units.substring(0,1))):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return"m"!==e.units&&"d"!==e.units&&wa('La unidad "'.concat(t.units,'" del parámetro projection no es válida. Las disponibles son: "m" o "d"')),e},Ap=function(t){var e=t,r=[];v(e)&&wa(Sa("exception").no_resolutions),w(e)&&(/^\d+(\.\d+)?([,;]\d+(\.\d+)?)*$/.test(e)?e=e.split(/[,;]+/):wa(Sa("exception").invalid_resolutions_param)),m(e)?r=e.map(function(t){return w(t)?Number.parseFloat(t):t}):wa("El parámetro no es de un tipo soportado: ".concat(Cp(e)));for(var n=!0,i=0,o=r.length;i<o&&n;i+=1)n=!Number.isNaN(r[i]);return n||wa(Sa("exception").invalid_resolutions_param),r},Np=function(t){var e,r=t;return v(r)&&wa(Sa("exception").no_zoom),w(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:wa("El parámetro no es de un tipo soportado: ".concat(Cp(r))),Number.isNaN(e)&&wa(Sa("exception").invalid_zoom_param),e},Fp=function(t){var e,r=t;return v(r)&&wa(Sa("exception").no_zoom),w(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:wa("El parámetro no es de un tipo soportado: ".concat(Cp(r))),Number.isNaN(e)&&wa(Sa("exception").invalid_zoom_param),e},jp=function(t){var e,r=t;return v(r)&&wa(Sa("exception").no_zoom),w(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:wa("El parámetro no es de un tipo soportado: ".concat(Cp(r))),Number.isNaN(e)&&wa(Sa("exception").invalid_zoom_param),e},Dp=function(t){var e=t,r=[];v(e)&&wa(Sa("exception").no_param);var n=e;return m(n)||(n=[n]),r=n.map(function(t){var e,r,n={};return n.type=dp,n.name=(w(e=t)?/^KML\*.+/i.test(e)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(r=e.split(/\*/)[1].trim()):/^[^*]*\*[^*]+/.test(e)?r=e.split(/\*/)[0].trim():/^[^*]*/.test(e)&&(r=e.split(/\*/)[0].trim()):b(e)&&!v(e.name)?r=e.name.trim():b(e)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(e))),(x(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(w(t))if(/^KML\*[^*]+\*[^*]+\*[^*]+\.kml\*(true|false)$/i.test(t)){var r=t.split(/\*/);e=r[2].concat(r[3])}else{var n=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)\*.*/i);n&&n.length>2&&(e=n[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),n.extract=function(t){var e,r;return w(t)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(t)?e=(r=t.split(/\*/))[r.length-3].trim():/^[^*]+\*[^*]+\*(true|false)$/i.test(t)?e=(r=t.split(/\*/))[2].trim():/^[^*]+\*(true|false)$/i.test(t)&&(e=(r=t.split(/\*/))[1].trim()):b(t)?e=E(t.extract):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e=v(e)?void 0:/^1|(true)$/i.test(e)}(t),n.label=function(t){var e,r;return w(t)?e="false"!==(e=(r=t.split(/\*/))[r.length-2].trim()):b(t)?e=E(t.label):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(t),n.visibility=function(t){var e,r;return w(t)?e="false"!==(e=(r=t.split(/\*/))[r.length-1].trim()):b(t)?e=E(t.visibility):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(t),n}),m(e)||(r=r[0]),r},Gp=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(e){var r,n,i={};return i.type=gp,i.name=(w(r=e)?/^WFS(T)?\*.+/i.test(r)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(r)||/^[^*]*\*[^*]+:[^*]+/.test(r)?n=r.split(/\*/)[3].trim().split(":")[1]:/^WFS(T)?\*[^*]*\*[^*]+[^*]+/i.test(r)&&(n=r.split(/\*/)[3].trim()):/^[^*]*\*[^*]+:[^*]+/.test(r)&&(n=r.split(/\*/)[1].trim().split(":")[1]):b(r)&&!v(r.name)?n=r.name.trim():b(r)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(r))),(x(n)||/^(true|false)$/i.test(n))&&(n=null),n),i.url=function(t){var e;if(w(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(e),i.namespace=function(t){var e;return w(t)?/^WFS(T)?\*.+/i.test(t)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim().split(":")[0]):/^[^*]*\*[^*]+:[^*]+/.test(t)&&(e=t.split(/\*/)[1].trim().split(":")[0]):b(t)&&!v(t.namespace)?e=t.namespace.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.legend=function(t){var e;return w(t)?/^WFS(T)?\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):b(t)&&!v(t.legend)?e=t.legend.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.cql=function(t){var e;return w(t)?(/^[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()),/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[6].trim())):b(t)&&!v(t.cql)||!v(t.ecql)?e=t.cql?t.cql.trim():t.ecql.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(/^(true|false)$/i.test(e)||/^\d\.\d\.\d$/.test(e))&&(e=void 0),e}(e),i.geometry=function(t){var e;return w(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+/i.test(t)?e=t.split(/\*/)[4].trim():/^WFS(T)?\*[^*]*\*[^*][^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[4].trim())):b(t)&&!v(t.geometry)?e=t.geometry.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.ids=function(t){var e;return w(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*(.-?)+$/i.test(t)?e=t.split(/\*/)[5].trim().split("-"):/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]+\*(.-?)+$/i.test(t)&&(e=t.split(/\*/)[5].trim().split("-"))):b(t)&&!v(t.ids)?e=t.ids:b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),x(e)&&(e=null),v(e)||m(e)||(e=[e]),e}(e),i.version=function(t){var e;return w(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):b(t)?e=t.version:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(e),i.style=function(t){var e;return w(t)?/^WFS(T)?\*.+/i.test(t)&&/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[7].trim()):b(t)&&!v(t.style)?e=t.style:b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(e),i.options=function(t){var e;return w(t)||(b(t)?e=t.options:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)))),e}(e),i.outputFormat=t.outputFormat,i}),m(t)||(e=e[0]),e},Bp=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r,n={};return n.type="GeoJSON",n.name=(w(e=t)?/^GeoJSON(T)?\*[^*]/i.test(e)?r=e.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(e)&&(r=e.split(/\*/)[2].trim()):b(e)&&!v(e.legend)?r=e.legend.trim():b(e)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(e))),(x(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(w(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),n.extract=function(t){var e,r;return w(t)?/^GeoJSON\*[^*]+\*[^*]+\*[^*]*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():(r=t.split(/\*/)[3],e=!v(r)&&[r]):b(t)?e=E(t.extract):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(t),n.style=function(t){var e;return w(t)?/^GeoJSON(T)?\*.+/i.test(t)&&(/^GeoJSON(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]*/i.test(t)?e=t.split(/\*/)[4].trim():/^GeoJSON(T)?\*[^*]*\*[^*]+\*/i.test(t)&&(e=t.split(/\*/)[4].trim())):b(t)&&!v(t.style)?e=t.style:b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(t),n}),m(t)||(e=e[0]),e},zp=function(t){var e=[];v(t)&&wa("No ha especificado ningún parámetro");var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e={type:"MVT"};return e.name=function(t){var e;if(w(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)/i);r&&r.length>2&&(e=r[2])}}else b(t)&&!v(t.name)?e=t.name.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),e.url=function(t){var e;if(w(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+).*/i);r&&r.length>1&&(e=r[1])}}else b(t)&&!v(t.url)?e=t.url.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),e}),m(t)||(e=e[0]),e},Up=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r,n={};return n.type="WMC",n.name=(w(e=t)?/^\w{3,7}\*[^*]+\*[^*]+$/.test(e)?r=e.split(/\*/)[2].trim():/^\w{3,7}\*[^*]$/.test(e)?r=e.split(/\*/)[1].trim():/^[^*]+\*[^*]+$/.test(e)?r=e.split(/\*/)[1].trim():/^[^*]+$/.test(e)&&!x(e)&&(r=e):b(e)?r=E(e.name):wa("El parámetro no es de un tipo soportado: ".concat(Cp(e))),x(r)&&(r=null),r),n.url=function(t){var e;if(w(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),n.options=function(t){var e;return w(t)||(b(t)?e=t.options:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)))),e}(t),n}),m(t)||(e=e[0]),e},qp=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e=yp,r=function(t){var e;return w(t)?/^WMS\*.+/i.test(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()):/^[^*]*\*[^*]+/.test(t)?e=t.split(/\*/)[1].trim():/^[^*]*/.test(t)&&(e=t.split(/\*/)[0].trim()):b(t)&&!v(t.name)?e=t.name.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n=function(t){var e;if(w(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),i=function(t){var e;return w(t)?/^WMS\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):b(t)&&!v(t.legend)?e=t.legend.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),o=function(t){var e;return w(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[4].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):b(t)?e=E(t.transparent):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),a=function(t){var e;return w(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=!0:/^WMS_FULL\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[2].trim():/^[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)?t.split(/\*/):/^[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(t)&&t.split(/\*/):b(t)?e=E(t.tiled):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),s=function(t){var e;w(t)?(/^WMS(\*[^*]*){6}$/i.test(t)?e=t.split(/\*/)[6].trim():/^WMS_FULL(\*[^*]*){3}/i.test(t)&&(e=t.split(/\*/)[3].trim()),v(e)||(e=e.split(/[,;]+/))):b(t)?e=t.maxExtent:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return v(e)||4!==e.length?v(e)||wa(Sa("exception").invalid_maxextent_param):(w(e[0])&&(e[0]=Number.parseFloat(e[0])),w(e[1])&&(e[1]=Number.parseFloat(e[1])),w(e[2])&&(e[2]=Number.parseFloat(e[2])),w(e[3])&&(e[3]=Number.parseFloat(e[3]))),e}(t),u=function(t){var e;return w(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):b(t)?e=t.version:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(t),l=function(t){var e;return w(t)||(b(t)?e=t.options:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)))),e}(t);return{type:e,name:r,url:n,legend:i,transparent:o,tiled:a,maxExtent:s,version:u,displayInLayerSwitcher:function(t){var e;return w(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[8].trim()):b(t)?e=E(t.displayInLayerSwitcher):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),queryable:function(t){var e;return w(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[9].trim()):b(t)?e=E(t.queryable):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),visibility:function(t){var e;return w(t)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[10].trim()):b(t)?e=E(t.visibility):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),options:l}}),m(t)||(e=e[0]),e},Vp=function(t){var e;if(w(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e},Yp=function(t,e,r,n){var i,o;return w(t)?i=r+3<=(o=t.split(/\*/)).length-1?"false"!==(i=o[r+3].trim()).toLowerCase():e:b(t)?i=E(t[n]):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),i},Wp=function(t){var e=t,r=[];v(e)&&wa(Sa("exception").no_param);var n=e;return m(n)||(n=[n]),r=n.map(function(t){var e,r,n={};return n.type=wp,n.name=(w(e=t)?/^XYZ\*.+/i.test(e)?/^XYZ\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(r=e.split(/\*/)[1].trim()):/^[^*]*\*[^*]+/.test(e)?r=e.split(/\*/)[0].trim():/^[^*]*/.test(e)&&(r=e.split(/\*/)[0].trim()):b(e)&&!v(e.name)?r=e.name.trim():b(e)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(e))),(x(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.legend=n.name,n.url=Vp(t),n.visibility=Yp(t,"true",0,"visibility"),n.transparent=Yp(t,"true",1,"transparent"),n}),m(e)||(r=r[0]),r},Xp=function(t){var e=t,r=[];v(e)&&wa(Sa("exception").no_param);var n=e;return m(n)||(n=[n]),r=n.map(function(t){var e,r,n={};return n.type=xp,n.name=(w(e=t)?/^TMS\*.+/i.test(e)?/^TMS\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(r=e.split(/\*/)[1].trim()):/^[^*]*\*[^*]+/.test(e)?r=e.split(/\*/)[0].trim():/^[^*]*/.test(e)&&(r=e.split(/\*/)[0].trim()):b(e)&&!v(e.name)?r=e.name.trim():b(e)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(e))),(x(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.legend=n.name,n.url=Vp(t),n.visibility=Yp(t,"true",0,"visibility"),n.transparent=Yp(t,"true",1,"transparent"),n}),m(e)||(r=r[0]),r},Zp=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r,n={};return n.type=mp,n.name=(w(e=t)?/^WMTS\*.+/i.test(e)?/^WMTS\*[^*]+\*[^*]+/i.test(e)&&(r=e.split(/\*/)[2].trim()):/^[^*]*\*[^*]+/.test(e)&&(r=e.split(/\*/)[1].trim()):b(e)&&!v(e.name)?r=e.name.trim():b(e)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(e))),(x(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(w(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else b(t)?e=t.url:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return e}(t),n.matrixSet=function(t){var e;return w(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]+/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):b(t)&&!v(t.matrixSet)?e=t.matrixSet.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n.legend=function(t){var e;return w(t)?/^WMTS\*.+/i.test(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]+/i.test(t)&&(e=t.split(/\*/)[4].trim()):/^[^*]+\*[^*]+\*[^*]*\*[^*]+/.test(t)&&(e=t.split(/\*/)[3].trim()):b(t)&&!v(t.legend)?e=t.legend.trim():b(t)||wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),(x(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n.options=function(t){var e;return w(t)||(b(t)?e=t.options:wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)))),e}(t),n.transparent=function(t){var e;return w(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):b(t)?e=E(t.transparent):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),n.format=function(t){var e;return w(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)/i.test(t)&&(e=t.split(/\*/)[6].trim()):b(t)?e=E(t.format):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),e}(t),n.displayInLayerSwitcher=function(t){var e;return w(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[7].trim()):b(t)?e=E(t.displayInLayerSwitcher):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),n.queryable=function(t){var e;return w(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[8].trim()):b(t)?e=E(t.queryable):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),n.visibility=function(t){var e;return w(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)\*(true|false)/i.test(t)&&(e=t.split(/\*/)[9].trim()):b(t)?e=E(t.visibility):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t))),v(e)||(e=/^1|(true)$/i.test(e)),e}(t),n}),m(t)||(e=e[0]),e},Hp={kml:Dp,wfs:Gp,osm:Pp,wmc:Up,wms:qp,wmts:Zp,geojson:Bp,mvt:zp,xyz:Wp,tms:Xp},Kp=function(t,e){var r=[];v(t)&&wa(Sa("exception").no_param);var n=t;return m(n)||(n=[n]),r=n.map(function(t){var r=null;if(b(t)&&t instanceof nd)r=t;else{var n=function(t,e){var r;if(w(t))if(/^\s*osm\s*$/i.test(t))r=vp;else{var n=t.match(/^(\w+)\*.+$/);n&&n.length>1&&(r=Sp(n[1]),d(r)&&wa("No se reconoce el tipo de capa ".concat(n[1]))),d(r)&&!v(e)?r=e:d(r)&&wa("No se reconoce el tipo de capa ".concat(r))}else b(t)?v(t.type)||(r=Sp(t.type),d(r)&&wa("No se reconoce el tipo de capa ".concat(r))):wa("El parámetro no es de un tipo soportado: ".concat(Cp(t)));return v(r)||v(e)||r===e||wa("El tipo de la capa (".concat(r).concat(") no era el esperado (").concat(e).concat(")")),v(r)&&!v(e)&&(r=e),r}(t,e);n=E(n),r=_(Hp[n])?Hp[n](t):t}return r}),m(t)||(r=r[0]),r};function $p(t){return($p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qp(t,e){return!e||"object"!==$p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function td(t){return(td=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ed(t,e){return(ed=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rd=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Qp(this,td(e).call(this,r));var i=Kp(t);return n.type=i.type,n.url=i.url,n.name=i.name,n.transparent=i.transparent,n.maxExtent_=null,n.zindex_=null,n.map_=null,n.userMaxExtent=i.maxExtent,n.legend=i.legend,n.minZoom=i.minZoom||Number.NEGATIVE_INFINITY,n.maxZoom=i.maxZoom||Number.POSITIVE_INFINITY,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ed(t,e)}(e,ba),r=e,(n=[{key:"getLegend",value:function(){return this.getImpl().legend}},{key:"setLegend",value:function(t){this.legend=t,this.getImpl().legend=t}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return v(t)&&(t=this.map_.userMaxExtent,v(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise(function(e){return e(t.getMaxExtent())})}},{key:"setMaxExtent",value:function(t){this.userMaxExtent=t,!m(t)&&b(t)&&(this.userMaxExtent=[t.x.min,t.y.min,t.x.max,t.y.max]),_(this.getImpl().setMaxExtent)&&(v(t)?this.resetMaxExtent():this.getImpl().setMaxExtent(t))}},{key:"resetMaxExtent",value:function(){var t=this;this.userMaxExtent=null,this.calculateMaxExtent().then(function(e){_(t.getImpl().setMaxExtent)&&t.getImpl().setMaxExtent(e)})}},{key:"setMap",value:function(t){this.map_=t}},{key:"getLayerGroup",value:function(){return this.getImpl().layerGroup}},{key:"setLayerGroup",value:function(t){this.getImpl().layerGroup=t}},{key:"isVisible",value:function(){return d(this.getImpl().isVisible)&&wa(Sa("exception").isvisible_method),this.getImpl().isVisible()}},{key:"isQueryable",value:function(){return d(this.getImpl().isQueryable)&&wa(Sa("exception").isqueryable_method),this.getImpl().isQueryable()}},{key:"setVisible",value:function(t){var e=t;v(e)&&wa(Sa("exception").visibility_param),w(e)||y(e)||wa(Sa("exception").visibility_param),d(this.getImpl().setVisible)&&wa(Sa("exception").setvisible_method),e=/^1|(true)$/i.test(e),this.getImpl().setVisible(e)}},{key:"inRange",value:function(){return d(this.getImpl().inRange)&&wa(Sa("exception").inrage_method),this.getImpl().inRange()}},{key:"getLegendURL",value:function(){return this.getImpl().getLegendURL()}},{key:"setLegendURL",value:function(t){var r=t;v(r)&&(r=j([M.config.THEME_URL,e.LEGEND_DEFAULT])),this.getImpl().setLegendURL(r)}},{key:"getZIndex",value:function(){return this.zindex_}},{key:"setZIndex",value:function(t){this.zindex_=t,this.getImpl().setZIndex(t)}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"setMinZoom",value:function(t){this.minZoom=t,this.getImpl().setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"setMaxZoom",value:function(t){this.maxZoom=t,this.getImpl().setMaxZoom(t)}},{key:"getOpacity",value:function(){return this.getImpl().getOpacity()}},{key:"setOpacity",value:function(t){this.getImpl().setOpacity(t)}},{key:"refresh",value:function(){!d(this.getImpl().refresh)&&_(this.getImpl().refresh)&&this.getImpl().refresh()}},{key:"generateName_",value:function(){this.name=T("layer_","_".concat(this.type))}},{key:"url",get:function(){return this.getImpl().url},set:function(t){this.getImpl().url=t}},{key:"name",get:function(){return this.getImpl().name},set:function(t){this.getImpl().name=t}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){v(t)?this.getImpl().transparent=!0:w(t)?this.getImpl().transparent="true"===E(t):this.getImpl().transparent=t}},{key:"displayInLayerSwitcher",get:function(){return this.getImpl().displayInLayerSwitcher},set:function(t){v(t)?this.getImpl().displayInLayerSwitcher=!0:w(t)?this.getImpl().displayInLayerSwitcher="true"===E(t):this.getImpl().displayInLayerSwitcher=t}}])&&Jp(r.prototype,n),i&&Jp(r,i),e}();rd.LEGEND_DEFAULT="/img/legend-default.png",rd.LEGEND_ERROR="/img/legend-error.png";var nd=rd,id="preload",od="useInterimTilesOnError",ad=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sd=function(t){function e(e){var r=this,n=e||{},i=at({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return ad(e,t),e.prototype.getPreload=function(){return this.get(id)},e.prototype.setPreload=function(t){this.set(id,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(od)},e.prototype.setUseInterimTilesOnError=function(t){this.set(od,t)},e}(sh),ud=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ld(t,e,r,n,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new ud(t,e,r,n)}var cd=ud,hd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fd=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return hd(e,t),e.prototype.getFeatures=function(t){return et()},e.prototype.prepareFrame=function(t){return et()},e.prototype.renderFrame=function(t,e){return et()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,i){var o=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){},e.prototype.getDataAtPixel=function(t,e,r){return et()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===Ui.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=Ui.LOADED&&e!=Ui.ERROR&&t.addEventListener(Ct.CHANGE,this.boundHandleImageChange_),e==Ui.IDLE&&(t.load(),e=t.getState()),e==Ui.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Zc.READY&&t.changed()},e}(Rt),pd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dd=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform_=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return pd(e,t),e.prototype.useContainer=function(t,e,r){var n,i,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")));if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=Fi()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=i}},e.prototype.clip=function(t,e,r){var n=e.pixelRatio,i=e.size[0]*n/2,o=e.size[1]*n/2,a=e.viewState.rotation,s=_e(r),u=be(r),l=pe(r),c=fe(r);Gr(e.coordinateToPixelTransform,s),Gr(e.coordinateToPixelTransform,u),Gr(e.coordinateToPixelTransform,l),Gr(e.coordinateToPixelTransform,c),t.save(),fo(t,-a,i,o),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(c[0]*n,c[1]*n),t.clip(),fo(t,a,i,o)},e.prototype.clipUnrotated=function(t,e,r){var n=_e(r),i=be(r),o=pe(r),a=fe(r);Gr(e.coordinateToPixelTransform,n),Gr(e.coordinateToPixelTransform,i),Gr(e.coordinateToPixelTransform,o),Gr(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Gr(s,n),Gr(s,i),Gr(s,o),Gr(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new bf(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(ec.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(ec.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,r,n,i,o,a){var s=i/2,u=o/2,l=n/e,c=-l,h=-t[0]+a,f=-t[1];return zr(this.tempTransform_,s,u,l,c,-r,h,f)},e.prototype.getDataAtPixel=function(t,e,r){var n,i=Gr(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(fd),yd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gd=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new cd(0,0,0,0),r}return yd(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==rc.LOADED||r==rc.EMPTY||r==rc.ERROR&&!n},e.prototype.getTile=function(t,e,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,i,o);return s.getState()==rc.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(rc.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,i=n.projection,o=n.resolution,a=n.center,s=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),h=c.getRevision(),f=c.getTileGridForProjection(i),p=f.getZForResolution(o,c.zDirection),d=f.getResolution(p),y=t.extent,g=r.extent&&Ar(r.extent,i);g&&(y=ve(y,Ar(r.extent,i)));var m=c.getTilePixelRatio(u),v=Math.round(t.size[0]*m),_=Math.round(t.size[1]*m);if(s){var b=Math.round(Math.sqrt(v*v+_*_));v=b,_=b}var w=d*v/2/m,x=d*_/2/m,E=[a[0]-w,a[1]-x,a[0]+w,a[1]+x],S=f.getTileRangeForExtentAndZ(y,p),O={};O[p]={};var T=this.createLoadedTileFinder(c,i,O),M=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;for(var P=S.minX;P<=S.maxX;++P)for(var C=S.minY;C<=S.maxY;++C){var L=this.getTile(p,P,C,t);if(this.isDrawableTile(L)){var k=nt(this);if(L.getState()==rc.LOADED){O[p][L.tileCoord.toString()]=L;var R=L.inTransition(k);this.newTiles_||!R&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(k,t.time))continue}var A=f.getTileCoordChildTileRange(L.tileCoord,I,M),N=!1;A&&(N=T(p+1,A)),N||f.forEachTileCoordParentTileRange(L.tileCoord,T,I,M)}var F=d/o;zr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,s,-v/2,-_/2);var j=go(this.pixelTransform);this.useContainer(e,j,r.opacity);var D=this.context,G=D.canvas;Ur(this.inversePixelTransform,this.pixelTransform),zr(this.tempTransform_,v/2,_/2,F,F,0,-v/2,-_/2),G.width!=v||G.height!=_?(G.width=v,G.height=_):this.containerReused||D.clearRect(0,0,v,_),g&&this.clipUnrotated(D,t,g),this.preRender(D,t),this.renderedTiles.length=0;var B,z,U,q=Object.keys(O).map(Number);q.sort(dt),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],z=[]):q=q.reverse();for(var V=q.length-1;V>=0;--V){var Y=q[V],W=c.getTilePixelSize(Y,u,i),X=f.getResolution(Y)/d,Z=W[0]*X*F,H=W[1]*X*F,K=f.getTileCoordForCoordAndZ(_e(E),Y),$=f.getTileCoordExtent(K),J=Gr(this.tempTransform_,[m*($[0]-E[0])/d,m*(E[3]-$[3])/d]),Q=m*c.getGutterForProjection(i),tt=O[Y];for(var et in tt){var rt=(L=tt[et]).tileCoord,it=J[0]-(K[1]-rt[1])*Z,ot=Math.round(it+Z),at=J[1]-(K[2]-rt[2])*H,st=Math.round(at+H),ut=ot-(P=Math.round(it)),lt=st-(C=Math.round(at)),ct=p===Y;if(!(R=ct&&1!==L.getAlpha(nt(this),t.time)))if(B){D.save(),U=[P,C,P+ut,C,P+ut,C+lt,P,C+lt];for(var ht=0,ft=B.length;ht<ft;++ht)if(p!==Y&&Y<z[ht]){var pt=B[ht];D.beginPath(),D.moveTo(U[0],U[1]),D.lineTo(U[2],U[3]),D.lineTo(U[4],U[5]),D.lineTo(U[6],U[7]),D.moveTo(pt[6],pt[7]),D.lineTo(pt[4],pt[5]),D.lineTo(pt[2],pt[3]),D.lineTo(pt[0],pt[1]),D.clip()}B.push(U),z.push(Y)}else D.clearRect(P,C,ut,lt);this.drawTileImage(L,t,P,C,ut,lt,Q,ct,r.opacity),B&&!R&&D.restore(),this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,c,L)}}return this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!ie(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,c,f,u,i,y,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(D,t),r.extent&&D.restore(),j!==G.style.transform&&(G.style.transform=j),this.container},e.prototype.drawTileImage=function(t,e,r,n,i,o,a,s,u){var l=this.getTileImage(t);if(l){var c=nt(this),h=s?t.getAlpha(c,e.time):1,f=u*h,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,n,i,o),p&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=nt(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var n=nt(e);n in t||(t[n]={}),t[n][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,n,i,o,a,s,u){var l=nt(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,h,f,p,d,y,g=t.wantedTiles[l],m=t.tileQueue;for(y=r.getMinZoom();y<=a;++y)for(h=r.getTileRangeForExtentAndZ(o,y,h),f=r.getResolution(y),p=h.minX;p<=h.maxX;++p)for(d=h.minY;d<=h.maxY;++d)a-y<=s?((c=e.getTile(y,p,d,n,i)).getState()==rc.IDLE&&(g[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),f])),void 0!==u&&u(c)):e.useTile(y,p,d,i)},e}(dd);gd.prototype.getLayer;var md=gd,vd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_d=function(t){function e(e){return t.call(this,e)||this}return vd(e,t),e.prototype.createRenderer=function(){return new md(this)},e}(sd),bd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wd=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return bd(e,t),e}(sh),xd=.5,Ed=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sd=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return Ed(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,i=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=ve(s,Ar(e.extent,n.projection))),!a[gc]&&!a[mc]&&!Ee(s))if(o){var u=n.projection,l=o.getImage(s,i,r,u);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),i=r.getResolution(),o=r.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,u=t.viewState,l=u.center,c=u.resolution,h=t.size,f=s*i/(c*o),p=Math.round(h[0]*s),d=Math.round(h[1]*s),y=u.rotation;if(y){var g=Math.round(Math.sqrt(p*p+d*d));p=g,d=g}zr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,y,-p/2,-d/2),Ur(this.inversePixelTransform,this.pixelTransform);var m=go(this.pixelTransform);this.useContainer(e,m,a.opacity);var v=this.context,_=v.canvas;_.width!=p||_.height!=d?(_.width=p,_.height=d):this.containerReused||v.clearRect(0,0,p,d);var b=!1;if(a.extent){var w=Ar(a.extent,u.projection);(b=!Kt(w,t.extent)&&xe(w,t.extent))&&this.clipUnrotated(v,t,w)}var x=r.getImage(),E=zr(this.tempTransform_,p/2,d/2,f,f,0,o*(n[0]-l[0])/i,o*(l[1]-n[3])/i);this.renderedResolution=i*s/o;var S=E[4],O=E[5],T=x.width*E[0],M=x.height*E[3];if(this.preRender(v,t),T>=.5&&M>=.5){var I=a.opacity,P=void 0;1!==I&&(P=this.context.globalAlpha,this.context.globalAlpha=I),this.context.drawImage(x,0,0,+x.width,+x.height,Math.round(S),Math.round(O),Math.round(T),Math.round(M)),1!==I&&(this.context.globalAlpha=P)}return this.postRender(v,t),b&&v.restore(),m!==_.style.transform&&(_.style.transform=m),this.container},e}(dd),Od=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Td=function(t){function e(e){return t.call(this,e)||this}return Od(e,t),e.prototype.createRenderer=function(){return new Sd(this)},e}(wd);function Md(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function Id(t,e,r){return t+"/"+e+"/"+r}function Pd(t){return Id(t[0],t[1],t[2])}function Cd(t){return t.split("/").map(Number)}function Ld(t){return(t[1]<<t[0])+t[2]}var kd=[0,0,0],Rd=function(){function t(t){var e,r,n,i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Ut((e=this.resolutions_,r=!0,n=function(t,e){return e-t}||dt,e.every(function(t,i){if(0===i)return!0;var o=n(e[i-1],t);return!(o>0||r&&0===o)})),17),!t.origins)for(var o=0,a=this.resolutions_.length-1;o<a;++o)if(i){if(this.resolutions_[o]/this.resolutions_[o+1]!==i){i=void 0;break}}else i=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Ut(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=_e(s)),Ut(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Ut(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:uc,Ut(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new cd(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):s&&this.calculateTileRanges_(s)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,n){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?ld(i=Math.floor(i/2),i,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],i=2*t[2];return ld(n,n+1,i,i+1,e)}var o=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),i=this.getResolution(t),o=th(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*i,s=n[0]+(e.maxX+1)*o[0]*i;return te(a,n[1]+e.minY*o[1]*i,s,n[1]+(e.maxY+1)*o[1]*i,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var n=kd;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var i=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),ld(i,n[1],o,n[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=th(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=th(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n;return te(o,a,o+i[0]*n,a+i[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=th(this.getTileSize(o),this.tmpSize_),l=n?.5:0,c=n?.5:0,h=Math.floor((t-s[0])/r+l),f=Math.floor((s[1]-e)/r+c),p=a*h/u[0],d=a*f/u[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Md(o,p,d,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=th(this.getTileSize(r),this.tmpSize_),u=n?.5:0,l=n?.5:0,c=Math.floor((t-o[0])/a+u),h=Math.floor((o[1]-e)/a+l),f=c/s[0],p=h/s[1];return n?(f=Math.ceil(f)-1,p=Math.ceil(p)-1):(f=Math.floor(f),p=Math.floor(p)),Md(r,f,p,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return Ce(gt(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}();function Ad(t){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fd(t,e){return!e||"object"!==Ad(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jd(t){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dd(t,e){return(Dd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gd=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fd(this,jd(e).call(this,r))).vendorOptions_=n,t.map=null,t.ol3Layer=null,t.options=r,t.visibility=!1!==t.options.visibility,t.displayInLayerSwitcher=!1!==t.options.displayInLayerSwitcher,t.zIndex_=null,t.opacity_=t.options.opacity||1,t.legendUrl_=j([M.config.THEME_URL,nd.LEGEND_DEFAULT]),t.minZoom=t.options.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=t.options.maxZoom||Number.POSITIVE_INFINITY,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dd(t,e)}(e,da),r=e,(n=[{key:"isVisible",value:function(){return v(this.ol3Layer)?this.visibility:this.ol3Layer.getVisible()}},{key:"isQueryable",value:function(){return!1}},{key:"inRange",value:function(){var t=!1;if(!v(this.ol3Layer)){var e=this.map.getMapImpl().getView().getResolution(),r=this.ol3Layer.getMaxResolution();t=e>=this.ol3Layer.getMinResolution()&&e<=r}return t}},{key:"setVisible",value:function(t){this.visibility=t,v(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"getMinZoom",value:function(){return v(this.getOL3Layer())||(this.minZoom=this.getOL3Layer().getMinZoom()),this.minZoom}},{key:"setMinZoom",value:function(t){this.minZoom=t,v(this.getOL3Layer())||this.getOL3Layer().setMinZoom(t)}},{key:"getMaxZoom",value:function(){return v(this.getOL3Layer())||(this.maxZoom=this.getOL3Layer().getMaxZoom()),this.maxZoom}},{key:"setMaxZoom",value:function(t){this.maxZoom=t,v(this.getOL3Layer())||this.getOL3Layer().setMaxZoom(t)}},{key:"getZIndex",value:function(){return v(this.getOL3Layer())||(this.zIndex_=this.getOL3Layer().getZIndex()),this.zIndex_}},{key:"setZIndex",value:function(t){this.zIndex_=t,v(this.getOL3Layer())||this.getOL3Layer().setZIndex(t)}},{key:"getOpacity",value:function(){return v(this.getOL3Layer())||(this.opacity_=this.getOL3Layer().getOpacity()),this.opacity_}},{key:"setOpacity",value:function(t){var e=t;!v(t)&&w(t)&&(e=Number(t)),this.opacity_=e,v(this.getOL3Layer())||this.getOL3Layer().setOpacity(e)}},{key:"getOL3Layer",value:function(){return this.ol3Layer}},{key:"setOL3Layer",value:function(t){var e=this.map.getMapImpl();return e.removeLayer(this.ol3Layer),this.ol3Layer=t,e.addLayer(t),this}},{key:"getMap",value:function(){return this.map}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"getNumZoomLevels",value:function(){return 20}},{key:"unselectFeatures",value:function(t,e,r){}},{key:"selectFeatures",value:function(t,e,r){}}])&&Nd(r.prototype,n),i&&Nd(r,i),e}();function Bd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zd=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.capabilities_=e,this.projection_=n,this.serviceUrl_=r}var e,r,n;return e=t,(r=[{key:"getLayerExtent",value:function(t){var e=this.capabilities_.Capability.Layer,r=this.getExtentRecursive_(e,t);return this.transformExtent(r)}},{key:"getExtentRecursive_",value:function(t,e){var r,n=this,i=null;if(!v(t))if(m(t))for(r=0;r<t.length&&null===i;r+=1)i=this.getExtentRecursive_(t[r],e);else if(b(t))if(v(e)||t.Name===e)if(v(t.BoundingBox)){if(!v(t.LatLonBoundingBox)){var o=t.LatLonBoundingBox[0];this.capabilitiesProj="EPSG:4326";var a=yr("EPSG:4326"),s=yr(this.projection_.code);i=aa.transformExtent(o.extent,a,s)}}else{var u=t.BoundingBox.find(function(t){return t.crs===n.projection_.code});if(v(u)){var l=t.BoundingBox[0];this.capabilitiesProj=l.crs;var c=yr(l.crs),h=yr(this.projection_.code);i=aa.transformExtent(l.extent,c,h)}else this.capabilitiesProj=u.crs,i=u.extent}else d(t.Layer)||(i=this.getExtentRecursive_(t.Layer,e));return i}},{key:"getLayers",value:function(){var t=this.capabilities_.Capability.Layer;return this.getLayersRecursive_(t)}},{key:"getLayersRecursive_",value:function(t){var e=this,r=[];if(v(t.Layer))if(m(t))t.forEach(function(t){r=r.concat(e.getLayersRecursive_(t))});else{var n="image/png";try{var i=this.capabilities_.Capability.Request.GetMap.Format;1===i.length&&(n=i[0])}catch(t){}r.push(new Bm({url:this.serviceUrl_,name:t.Name,legend:v(t.Title)?"":t.Title},{format:n},{capabilitiesMetadata:{abstract:v(t.Abstract)?"":t.Abstract,attribution:v(t.Attribution)?"":t.Attribution,metadataURL:v(t.MetadataURL)?"":t.MetadataURL,style:v(t.Style)?"":t.Style}}))}else r=this.getLayersRecursive_(t.Layer);return r}},{key:"transformExtent",value:function(t){var e=t;if("1.3.0"===this.capabilities_.version&&w(this.capabilitiesProj)){var r=yr(this.capabilitiesProj).getAxisOrientation();Array.isArray(e)&&"ne"===r.substr(0,2)&&(e=[t[1],t[0],t[3],t[2]])}return e}},{key:"capabilities",get:function(){return this.capabilities_}},{key:"projection",get:function(){return this.projection_}},{key:"serviceUrl",get:function(){return this.serviceUrl_}}])&&Bd(e.prototype,r),n&&Bd(e,n),t}(),Ud="http://www.w3.org/1999/xlink";function qd(t){return t.getAttributeNS(Ud,"href")}var Vd="http://www.w3.org/2001/XMLSchema-instance";function Yd(t,e){return fy().createElementNS(t,e)}function Wd(t,e){return function t(e,r,n){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)r?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var i=void 0;for(i=e.firstChild;i;i=i.nextSibling)t(i,r,n)}return n}(t,e,[]).join("")}function Xd(t){return"documentElement"in t}function Zd(t){return(new DOMParser).parseFromString(t,"application/xml")}function Hd(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&vt(n[n.length-1],i)}}function Kd(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}}function $d(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}}function Jd(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:n.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function Qd(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}}function ty(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}}function ey(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var a={};a[e.localName]=t,r[e.namespaceURI]=a,n=ry(e.localName)}uy(r,n,i,o)}}function ry(t,e){var r=t;return function(t,n,i){var o=n[n.length-1].node,a=r;return void 0===a&&(a=i),Yd(void 0!==e?e:o.namespaceURI,a)}}var ny=ry();function iy(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n}function oy(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o}function ay(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function sy(t,e,r,n,i){return n.push(t),ay(e,r,n,i),n.pop()}function uy(t,e,r,n,i,o){for(var a,s,u=(void 0!==i?i:r).length,l=0;l<u;++l)void 0!==(a=r[l])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==i?i[l]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function ly(t,e,r,n,i,o,a){return i.push(t),uy(e,r,n,i,o,a),i.pop()}var cy=void 0;var hy=void 0;function fy(){return void 0===hy&&"undefined"!=typeof document&&(hy=document.implementation.createDocument("","",null)),hy}var py=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=Zd(t);return this.readFromDocument(e)}return Xd(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}();function dy(t){return yy(Wd(t,!1))}function yy(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function gy(t){var e=Wd(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3}function my(t){return vy(Wd(t,!1))}function vy(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function _y(t){return by(Wd(t,!1))}function by(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function wy(t){return Wd(t,!1).trim()}function xy(t,e){Oy(t,e?"1":"0")}function Ey(t,e){var r=e.toPrecision();t.appendChild(fy().createTextNode(r))}function Sy(t,e){var r=e.toString();t.appendChild(fy().createTextNode(r))}function Oy(t,e){t.appendChild(fy().createTextNode(e))}var Ty=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),My=[null,"http://www.opengis.net/wms"],Iy=oy(My,{Service:Qd(function(t,e){return sy({},Ly,t,e)}),Capability:Qd(function(t,e){return sy({},Py,t,e)})}),Py=oy(My,{Request:Qd(function(t,e){return sy({},Gy,t,e)}),Exception:Qd(function(t,e){return sy([],Ny,t,e)}),Layer:Qd(function(t,e){return sy({},Fy,t,e)})}),Cy=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return Ty(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=sy({version:this.version},Iy,t,[]);return e||null},e}(py),Ly=oy(My,{Name:Qd(wy),Title:Qd(wy),Abstract:Qd(wy),KeywordList:Qd(Hy),OnlineResource:Qd(qd),ContactInformation:Qd(function(t,e){return sy({},ky,t,e)}),Fees:Qd(wy),AccessConstraints:Qd(wy),LayerLimit:Qd(_y),MaxWidth:Qd(_y),MaxHeight:Qd(_y)}),ky=oy(My,{ContactPersonPrimary:Qd(function(t,e){return sy({},Ry,t,e)}),ContactPosition:Qd(wy),ContactAddress:Qd(function(t,e){return sy({},Ay,t,e)}),ContactVoiceTelephone:Qd(wy),ContactFacsimileTelephone:Qd(wy),ContactElectronicMailAddress:Qd(wy)}),Ry=oy(My,{ContactPerson:Qd(wy),ContactOrganization:Qd(wy)}),Ay=oy(My,{AddressType:Qd(wy),Address:Qd(wy),City:Qd(wy),StateOrProvince:Qd(wy),PostCode:Qd(wy),Country:Qd(wy)}),Ny=oy(My,{Format:Kd(wy)}),Fy=oy(My,{Name:Qd(wy),Title:Qd(wy),Abstract:Qd(wy),KeywordList:Qd(Hy),CRS:Jd(wy),EX_GeographicBoundingBox:Qd(function(t,e){var r=sy({},Dy,t,e);if(!r)return;var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0===n||void 0===i||void 0===o||void 0===a)return;return[n,i,o,a]}),BoundingBox:Jd(function(t,e){var r=[vy(t.getAttribute("minx")),vy(t.getAttribute("miny")),vy(t.getAttribute("maxx")),vy(t.getAttribute("maxy"))],n=[vy(t.getAttribute("resx")),vy(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:n}}),Dimension:Jd(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:yy(t.getAttribute("multipleValues")),nearestValue:yy(t.getAttribute("nearestValue")),current:yy(t.getAttribute("current")),values:wy(t)}}),Attribution:Qd(function(t,e){return sy({},jy,t,e)}),AuthorityURL:Jd(function(t,e){var r=Wy(t,e);if(r)return r.name=t.getAttribute("name"),r;return}),Identifier:Jd(wy),MetadataURL:Jd(function(t,e){var r=Wy(t,e);if(r)return r.type=t.getAttribute("type"),r;return}),DataURL:Jd(Wy),FeatureListURL:Jd(Wy),Style:Jd(function(t,e){return sy({},qy,t,e)}),MinScaleDenominator:Qd(my),MaxScaleDenominator:Qd(my),Layer:Jd(function(t,e){var r=e[e.length-1],n=sy({},Fy,t,e);if(!n)return;var i=yy(t.getAttribute("queryable"));void 0===i&&(i=r.queryable);n.queryable=void 0!==i&&i;var o=by(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded);n.cascaded=o;var a=yy(t.getAttribute("opaque"));void 0===a&&(a=r.opaque);n.opaque=void 0!==a&&a;var s=yy(t.getAttribute("noSubsets"));void 0===s&&(s=r.noSubsets);n.noSubsets=void 0!==s&&s;var u=vy(t.getAttribute("fixedWidth"));u||(u=r.fixedWidth);n.fixedWidth=u;var l=vy(t.getAttribute("fixedHeight"));l||(l=r.fixedHeight);n.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in n)){var e=r[t];n[t]=e}}),n})}),jy=oy(My,{Title:Qd(wy),OnlineResource:Qd(qd),LogoURL:Qd(Zy)}),Dy=oy(My,{westBoundLongitude:Qd(my),eastBoundLongitude:Qd(my),southBoundLatitude:Qd(my),northBoundLatitude:Qd(my)}),Gy=oy(My,{GetCapabilities:Qd(Xy),GetMap:Qd(Xy),GetFeatureInfo:Qd(Xy)}),By=oy(My,{Format:Jd(wy),DCPType:Jd(function(t,e){return sy({},zy,t,e)})}),zy=oy(My,{HTTP:Qd(function(t,e){return sy({},Uy,t,e)})}),Uy=oy(My,{Get:Qd(Wy),Post:Qd(Wy)}),qy=oy(My,{Name:Qd(wy),Title:Qd(wy),Abstract:Qd(wy),LegendURL:Jd(Zy),StyleSheetURL:Qd(Wy),StyleURL:Qd(Wy)}),Vy=oy(My,{Format:Qd(wy),OnlineResource:Qd(qd)}),Yy=oy(My,{Keyword:Kd(wy)});function Wy(t,e){return sy({},Vy,t,e)}function Xy(t,e){return sy({},By,t,e)}function Zy(t,e){var r=Wy(t,e);if(r){var n=[by(t.getAttribute("width")),by(t.getAttribute("height"))];return r.size=n,r}}function Hy(t,e){return sy([],Yy,t,e)}var Ky=Cy;function $y(t){return($y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qy(t,e){return!e||"object"!==$y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tg(t){return(tg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eg(t,e){return(eg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rg=["SRS","BoundingBox","ScaleHint","LatLonBoundingBox"],ng=function(t,e){null!==t&&rg.forEach(function(r){var n,i;(n=e,i=r,Array.prototype.filter.call(n.children,function(t){return t.tagName===i}).length>0)||Array.prototype.filter.call(t.children,function(t){return t.tagName===r}).forEach(function(t){var r=t.cloneNode(!0);e.appendChild(r)})})},ig=[function t(e,r){var n=e,i=r[n.Name];if(v(i))m(n.Layer)&&n.Layer.forEach(function(e){return t(e,r)});else{var o=i.querySelector("SRS");if(null!==o){var a=o.innerHTML;n.SRS=[a]}}},function t(e,r){var n=r[e.Name];if(v(n))m(e.Layer)&&e.Layer.forEach(function(e){return t(e,r)});else if(m(e.BoundingBox)){var i=Array.prototype.map.call(n.children,function(t){return t});i=i.filter(function(t){return["BoundingBox"].includes(t.tagName)}),e.BoundingBox.forEach(function(t,e){var r=t;if(null===r.crs){var n=i[e];if(!v(n)){var o=n.getAttribute("SRS");v(o)||(r.crs=o)}}})}},function t(e,r){var n=e,i=r[e.Name];if(v(i))m(e.Layer)&&e.Layer.forEach(function(e){return t(e,r)});else{n.ScaleHint=[];var o=Array.prototype.map.call(i.children,function(t){return t});(o=o.filter(function(t){return"ScaleHint"===t.tagName})).forEach(function(t){var e={minScale:parseFloat(t.getAttribute("min")),maxScale:parseFloat(t.getAttribute("max"))};n.ScaleHint.push(e)})}},function t(e,r){var n=e,i=r[e.Name];if(v(i))m(n.Layer)&&n.Layer.forEach(function(e){return t(e,r)});else{n.LatLonBoundingBox=[];var o=Array.prototype.map.call(i.children,function(t){return t});(o=o.filter(function(t){return"LatLonBoundingBox"===t.tagName})).forEach(function(t){var e={crs:"EPSG:4326",extent:[parseFloat(t.getAttribute("minx")),parseFloat(t.getAttribute("miny")),parseFloat(t.getAttribute("maxx")),parseFloat(t.getAttribute("maxy"))]};n.LatLonBoundingBox.push(e)})}},function(t,e){var r=t;v(r.BoundingBox)&&!v(r.LatLonBoundingBox)&&(r.BoundingBox=r.LatLonBoundingBox)},function(t,e){var r=t;v(r.MaxScaleDenominator)&&!v(r.ScaleHint)&&(r.MaxScaleDenominator=r.ScaleHint[0].maxScale)},function(t,e){var r=t;v(r.MinScaleDenominator)&&!v(r.ScaleHint)&&(r.MinScaleDenominator=r.ScaleHint[0].minScale)}],og=function t(e,r){m(e)?e.forEach(function(e){t(e,r)}):b(e)&&(!function(t,e){ig.forEach(function(r){r(t,e)})}(e,r),t(e.Layer,r))},ag=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qy(this,tg(e).apply(this,arguments))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eg(t,e)}(e,Ky),r=e,(n=[{key:"customRead",value:function(t){var e=this.read(t),r=function t(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n,a=e;if(!0===r&&null!==e&&(a=e.querySelector("Layer")),null!==a){ng(i,a);var s=a.querySelector("Name").innerHTML,u=a.children;Array.prototype.forEach.call(u,function(e){"Layer"===e.tagName&&(o=t(e,!1,o,a))}),o[s]=a}return o}(t),n=e.Capability;return v(n)||v(n.Layer)||og(n.Layer,r),e}}])&&Jy(r.prototype,n),i&&Jy(r,i),e}(),sg="1.3.0";function ug(t,e,r,n){var i=Sr(r,e,t),o=gr(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||Ht(u,i)){var l=gr(t,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function lg(t,e,r,n){var i=r-t,o=n-e,a=Math.sqrt(i*i+o*o);return[Math.round(r+i/a),Math.round(n+o/a)]}function cg(t,e,r,n,i,o,a,s,u,l,c){var h=Fi(Math.round(r*t),Math.round(r*e));if(0===u.length)return h.canvas;h.scale(r,r);var f=[1/0,1/0,-1/0,-1/0];u.forEach(function(t,e,r){oe(f,t.extent)});var p=we(f),d=me(f),y=Fi(Math.round(r*p/n),Math.round(r*d/n)),g=r/n;u.forEach(function(t,e,r){var n=t.extent[0]-f[0],i=-(t.extent[3]-f[3]),o=we(t.extent),a=me(t.extent);y.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*g,i*g,o*g,a*g)});var m=_e(a);return s.getTriangles().forEach(function(t,e,i){var a=t.source,s=t.target,u=a[0][0],l=a[0][1],c=a[1][0],p=a[1][1],d=a[2][0],g=a[2][1],v=(s[0][0]-m[0])/o,_=-(s[0][1]-m[1])/o,b=(s[1][0]-m[0])/o,w=-(s[1][1]-m[1])/o,x=(s[2][0]-m[0])/o,E=-(s[2][1]-m[1])/o,S=u,O=l;u=0,l=0;var T=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}([[c-=S,p-=O,0,0,b-v],[d-=S,g-=O,0,0,x-v],[0,0,c,p,w-_],[0,0,d,g,E-_]]);if(T){h.save(),h.beginPath();var M=(v+b+x)/3,I=(_+w+E)/3,P=lg(M,I,v,_),C=lg(M,I,b,w),L=lg(M,I,x,E);h.moveTo(C[0],C[1]),h.lineTo(P[0],P[1]),h.lineTo(L[0],L[1]),h.clip(),h.transform(T[0],T[2],T[1],T[3],v,_),h.translate(f[0]-S,f[3]-O),h.scale(n/r,-n/r),h.drawImage(y.canvas,0,0),h.restore()}}),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach(function(t,e,r){var n=t.target,i=(n[0][0]-m[0])/o,a=-(n[0][1]-m[1])/o,s=(n[1][0]-m[0])/o,u=-(n[1][1]-m[1])/o,l=(n[2][0]-m[0])/o,c=-(n[2][1]-m[1])/o;h.beginPath(),h.moveTo(s,u),h.lineTo(i,a),h.lineTo(l,c),h.closePath(),h.stroke()}),h.restore()),h.canvas}var hg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fg=function(t){function e(e,r,n){var i=t.call(this)||this,o=n||{};return i.tileCoord=e,i.state=r,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return hg(e,t),e.prototype.changed=function(){this.dispatchEvent(Ct.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==rc.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==rc.LOADED){t.interimTile=null;break}t.getState()==rc.LOADING?e=t:t.getState()==rc.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==rc.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){et()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:Nc(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Pt),pg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var dg=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return pg(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=rc.ERROR,this.unlistenImage_(),this.image_=((t=Fi(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=rc.LOADED:this.state=rc.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==rc.ERROR&&(this.state=rc.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==rc.IDLE&&(this.state=rc.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Do(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(fg),yg=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return Ut(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},t.prototype.remove=function(t){var e=this.entries_[t];return Ut(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Ut(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),gg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gg(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Cd(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Pd(e.tileCoord)),e.release())}.bind(this))}},e}(yg),vg=10,_g=function(){function t(t,e,r,n,i,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=Er(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&we(n)==we(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?we(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?we(this.targetProj_.getExtent()):null;var u=_e(r),l=be(r),c=pe(r),h=fe(r),f=this.transformInv_(u),p=this.transformInv_(l),d=this.transformInv_(c),y=this.transformInv_(h),g=vg+(o?Math.max(0,Math.ceil(Math.log2(he(r)/(o*o*256*256)))):0);if(this.addQuad_(u,l,c,h,f,p,d,y,g),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(t,e,r){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-m>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-m>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-m>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,n,i,o,a,s,u){var l=Yt([i,o,a,s]),c=this.sourceWorldWidth_?we(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)p=we(Yt([t,e,r,n]))/this.targetWorldWidth_>.25||p;!f&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)}if(p||!this.maxSourceExtent_||xe(l,this.maxSourceExtent_)){if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;p=!0}if(u>0){if(!p){var d=[(t[0]+r[0])/2,(t[1]+r[1])/2],y=this.transformInv_(d),g=void 0;if(f)g=(Fe(i[0],h)+Fe(a[0],h))/2-Fe(y[0],h);else g=(i[0]+a[0])/2-y[0];var m=(i[1]+a[1])/2-y[1];p=g*g+m*m>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var v=[(e[0]+r[0])/2,(e[1]+r[1])/2],_=this.transformInv_(v),b=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,v,b,i,o,_,w,u-1),this.addQuad_(b,v,r,n,w,_,a,s,u-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(x),S=[(r[0]+n[0])/2,(r[1]+n[1])/2],O=this.transformInv_(S);this.addQuad_(t,x,S,n,i,E,O,s,u-1),this.addQuad_(x,e,r,S,E,o,a,O,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,n,i,a,s),this.addTriangle_(t,e,r,i,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,r,n){var i=e.source;ae(t,i[0]),ae(t,i[1]),ae(t,i[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),bg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wg=function(t){function e(e,r,n,i,o,a,s,u,l,c,h){var f=t.call(this,o,rc.IDLE)||this;f.renderEdges_=void 0!==h&&h,f.pixelRatio_=s,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=r,f.targetTileGrid_=i,f.wrappedTileCoord_=a||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var p=i.getTileCoordExtent(f.wrappedTileCoord_),d=f.targetTileGrid_.getExtent(),y=f.sourceTileGrid_.getExtent(),g=d?ve(p,d):p;if(0===he(g))return f.state=rc.EMPTY,f;var m=e.getExtent();m&&(y=y?ve(y,m):m);var v=i.getResolution(f.wrappedTileCoord_[0]),_=ug(e,n,de(g),v);if(!isFinite(_)||_<=0)return f.state=rc.EMPTY,f;var b=void 0!==c?c:xd;if(f.triangulation_=new _g(e,n,g,y,_*b,v),0===f.triangulation_.getTriangles().length)return f.state=rc.EMPTY,f;f.sourceZ_=r.getZForResolution(_);var w=f.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(w[1]=Ce(w[1],y[1],y[3]),w[3]=Ce(w[3],y[1],y[3])):w=ve(w,y)),he(w)){for(var x=r.getTileRangeForExtentAndZ(w,f.sourceZ_),E=x.minX;E<=x.maxX;E++)for(var S=x.minY;S<=x.maxY;S++){var O=l(f.sourceZ_,E,S,s);O&&f.sourceTiles_.push(O)}0===f.sourceTiles_.length&&(f.state=rc.EMPTY)}else f.state=rc.EMPTY;return f}return bg(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==rc.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=rc.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=cg(n,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=rc.LOADED}this.changed()},e.prototype.load=function(){if(this.state==rc.IDLE){this.state=rc.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var i=e.getState();if(i==rc.IDLE||i==rc.LOADING){t++;var o=ct(e,Ct.CHANGE,function(r){var n=e.getState();n!=rc.LOADED&&n!=rc.ERROR&&n!=rc.EMPTY||(ft(o),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,r){t.getState()==rc.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ft),this.sourcesListenerKeys_=null},e}(fg);function xg(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,function(){var t=a[0],r=e.getFullTileRange(t);return Ut(r,55),(r.getHeight()-a[2]-1).toString()}):void 0}}function Eg(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=xg(t[i],e);return Sg(n)}function Sg(t){return 1===t.length?t[0]:function(e,r,n){if(e){var i=Fe(Ld(e),t.length);return t[i](e,r,n)}}}function Og(t,e,r){}function Tg(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}var Mg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ig(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Pg=function(t){function e(e){var r=t.call(this)||this;return r.projection_=yr(e.projection),r.attributions_=Ig(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:Zc.READY,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return Mg(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return et()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Ig(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Gt);function Cg(t){var e=t.getDefaultTileGrid();return e||(e=Rg(t),t.setDefaultTileGrid(e)),e}function Lg(t){var e=t||{},r=e.extent||yr("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:kg(r,e.maxZoom,e.tileSize,e.maxResolution)};return new Rd(n)}function kg(t,e,r,n){for(var i=void 0!==e?e:sc,o=me(t),a=we(t),s=th(void 0!==r?r:uc),u=n>0?n:Math.max(a/s[0],o/s[1]),l=i+1,c=new Array(l),h=0;h<l;++h)c[h]=u/Math.pow(2,h);return c}function Rg(t,e,r,n){return function(t,e,r,n){var i=void 0!==n?n:qt.TOP_LEFT,o=kg(t,e,r);return new Rd({extent:t,origin:ye(t,i),resolutions:o,tileSize:r})}(Ag(t),e,r,n)}function Ag(t){var e=(t=yr(t)).getExtent();if(!e){var r=180*Ye[We.DEGREES]/t.getMetersPerUnit();e=te(-r,-r,r,r)}return e}var Ng=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fg=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],i=e.tileGrid;i&&th(i.getTileSize(i.getMinZoom()),n);var o="undefined"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,u=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return r.tileCache=new mg(Math.max(u,e.cacheSize||0)),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return Ng(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=Id(e,l,c),s=!1,i.containsKey(a)&&(s=(o=i.get(a)).getState()===rc.LOADED)&&(s=!1!==n(o)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,n,i){return et()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Cg(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!wr(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(e),o=th(n.getTileSize(t),this.tmpSize);return 1==i?o:Qc(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=Ag(r);if(Ht(o,i))return e;var a=we(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,n)}(n,t,r)),function(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,r):e.getFullTileRange(r))||o.containsXY(n,i)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,r,n){},e}(Pg),jg=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return Ng(e,t),e}(Mt),Dg=Fg,Gg="tileloadstart",Bg="tileloadend",zg="tileloaderror",Ug=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qg=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=!e.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,r.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(r):Og,r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return Ug(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,n=nt(r),i=r.getState();i==rc.LOADING?(this.tileLoadingKeys_[n]=!0,e=Gg):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=i==rc.ERROR?zg:i==rc.LOADED?Bg:void 0),null!=e&&this.dispatchEvent(new jg(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=Tg(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Eg(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,r){var n=Id(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Dg),Vg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Yg(t,e){t.getImage().src=e}var Wg=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Yg,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:dg,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return Vg(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[n];i.expireCache(i==r?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!wr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!wr(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!wr(e,t)){var r=nt(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Cg(t)),this.tileGridForProjection[r]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||wr(e,t))return this.tileCache;var r=nt(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new mg(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,e,r,n,i,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,n,i):void 0,l=new this.tileClass(a,void 0!==u?rc.IDLE:rc.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(Ct.CHANGE,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,r,n,i){var o=this.getProjection();if(o&&i&&!wr(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,r],u=void 0,l=Pd(s);a.containsKey(l)&&(u=a.get(l));var c=this.getKey();if(u&&u.key==c)return u;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(i),p=this.getTileCoordForTileUrlFunction(s,i),d=new wg(o,h,i,f,s,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,u?(d.interimTile=u,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,r,n,o||i)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=Id(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,r,n,i,s),u.getState()==rc.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var r=yr(t);if(r){var n=nt(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(qg),Xg="carmentaserver",Zg="geoserver",Hg="mapserver",Kg="qgis";function $g(t,e){var r=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))});var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var Jg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Qg(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=th(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=Jc(a,s,this.tmpSize),o=Wt(o,i*s,o)),1!=e&&(a=Qc(a,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:sg,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return at(u,this.params_),this.getRequestUrl_(t,a,o,e,r,u)}}var tm=function(t){function e(e){var r=this,n=e||{},i=n.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!o,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:Qg,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=i,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return Jg(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){var i=yr(r),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=u[0])){var l=a.getResolution(u[0]),c=a.getTileCoordExtent(u,this.tmpExtent_),h=th(a.getTileSize(u[0]),this.tmpSize),f=this.gutter_;0!==f&&(h=Jc(h,f,this.tmpSize),c=Wt(c,l*f,c)),o&&o!==i&&(l=ug(o,i,t,l),c=Or(c,i,o),t=Sr(t,i,o));var p={SERVICE:"WMS",VERSION:sg,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};at(p,this.params_,n);var d=Math.floor((t[0]-c[0])/l),y=Math.floor((c[3]-t[1])/l);return p[this.v13_?"I":"X"]=d,p[this.v13_?"J":"Y"]=y,this.getRequestUrl_(u,h,c,1,o||i,p)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:sg,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return at(r,e),$g(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case Zg:var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case Hg:o.MAP_RESOLUTION=90*n;break;case Xg:case Kg:o.DPI=90*n;break;default:Ut(!1,52)}var u,l=i.getAxisOrientation(),c=r;if(this.v13_&&"ne"==l.substr(0,2)){var h=void 0;h=r[0],c[0]=r[1],c[1]=h,h=r[2],c[2]=r[3],c[3]=h}if(o.BBOX=c.join(","),1==a.length)u=a[0];else u=a[Fe(Ld(t),a.length)];return $g(u,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){at(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||sg;this.v13_=xc(t,"1.3")>=0},e}(Wg);function em(t){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nm(t,e){return!e||"object"!==em(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function im(t,e,r){return(im="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=om(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function om(t){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function am(t,e){return(am=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sm=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t;return v(t.tileLoadFunction)&&(r.tileLoadFunction=e.tileLoadFunction),nm(this,om(e).call(this,r))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&am(t,e)}(e,tm),r=e,i=[{key:"tileLoadFunction",value:function(t,e){t.getImage().src="".concat(e,"&_= ").concat(this.revision_)}}],(n=[{key:"changed",value:function(){v(this.tileCache)||this.tileCache.clear(),im(om(e.prototype),"changed",this).call(this)}}])&&rm(r.prototype,n),i&&rm(r,i),e}(),um=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lm=function(t){function e(e,r,n,i,o,a){var s=this,u=e.getExtent(),l=r.getExtent(),c=l?ve(n,l):n,h=ug(e,r,de(c),i),f=new _g(e,r,c,u,h*xd,i),p=a(f.calculateSourceExtent(),h,o),d=p?Ui.IDLE:Ui.EMPTY,y=p?p.getPixelRatio():1;return(s=t.call(this,n,i,y,d)||this).targetProj_=r,s.maxSourceExtent_=u,s.triangulation_=f,s.targetResolution_=i,s.targetExtent_=n,s.sourceImage_=p,s.sourcePixelRatio_=y,s.canvas_=null,s.sourceListenerKey_=null,s}return um(e,t),e.prototype.disposeInternal=function(){this.state==Ui.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==Ui.LOADED){var e=we(this.targetExtent_)/this.targetResolution_,r=me(this.targetExtent_)/this.targetResolution_;this.canvas_=cg(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==Ui.IDLE){this.state=Ui.LOADING,this.changed();var t=this.sourceImage_.getState();t==Ui.LOADED||t==Ui.ERROR?this.reproject_():(this.sourceListenerKey_=ct(this.sourceImage_,Ct.CHANGE,function(t){var e=this.sourceImage_.getState();e!=Ui.LOADED&&e!=Ui.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){ft(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Fo),cm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hm="imageloadstart",fm="imageloadend",pm="imageloaderror",dm=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return cm(e,t),e}(Mt);function ym(t,e){t.getImage().src=e}var gm=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return cm(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=gt(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var i=this.getProjection();if(i&&n&&!wr(i,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&wr(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&ie(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new lm(i,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(n=i),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,n){return et()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case Ui.LOADING:this.loading=!0,this.dispatchEvent(new dm(hm,e));break;case Ui.LOADED:this.loading=!1,this.dispatchEvent(new dm(fm,e));break;case Ui.ERROR:this.loading=!1,this.dispatchEvent(new dm(pm,e))}},e}(Pg),mm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vm=[101,101],_m=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:ym,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return mm(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var i=yr(r),o=this.getProjection();o&&o!==i&&(e=ug(o,i,t,e),t=Sr(t,i,o));var a=ge(t,e,0,vm),s={SERVICE:"WMS",VERSION:sg,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};at(s,this.params_,n);var u=Math.floor((t[0]-a[0])/e),l=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=u,s[this.v13_?"J":"Y"]=l,this.getRequestUrl_(a,vm,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:sg,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return at(r,e),$g(this.url_,r)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var i=e/r,o=de(t),a=ge(o,i,0,[Math.ceil(we(t)/i),Math.ceil(me(t)/i)]),s=ge(o,i,0,[Math.ceil(this.ratio_*we(t)/i),Math.ceil(this.ratio_*me(t)/i)]),u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==r&&Kt(u.getExtent(),a))return u;var l={SERVICE:"WMS",VERSION:sg,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};at(l,this.params_),this.imageSize_[0]=Math.round(we(s)/i),this.imageSize_[1]=Math.round(me(s)/i);var c=this.getRequestUrl_(s,this.imageSize_,r,n,l);return this.image_=new Go(s,e,r,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Ct.CHANGE,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){if(Ut(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case Zg:var o=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case Hg:i.MAP_RESOLUTION=90*r;break;case Xg:case Kg:i.DPI=90*r;break;default:Ut(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),$g(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){at(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||sg;this.v13_=xc(t,"1.3")>=0},e}(gm);function bm(t){return(bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xm(t,e){return!e||"object"!==bm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Em(t,e,r){return(Em="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sm(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Sm(t){return(Sm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Om(t,e){return(Om=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tm=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r;return(t=xm(this,Sm(e).call(this,n))).imageLoadFunction_=n.imageLoadFunction||t.imageLoadFunction,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Om(t,e)}(e,_m),r=e,(n=[{key:"changed",value:function(){Em(Sm(e.prototype),"changed",this).call(this)}},{key:"imageLoadFunction",value:function(t,e){t.getImage().src="".concat(e,"&_=").concat(this.revision_)}}])&&wm(r.prototype,n),i&&wm(r,i),e}();function Mm(t){return(Mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pm(t,e){return!e||"object"!==Mm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cm(t){return(Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lm(t,e){return(Lm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var km=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Pm(this,Cm(e).call(this,r,n))).facadeLayer_=null,t.options=r,t.layers=[],t.displayInLayerSwitcher_=!0,t.getCapabilitiesPromise=null,t.extentPromise=null,t.extent=null,t.resolutions_=null,t.extentProj_=null,!1===t.options.visibility&&(t.visibility=!1),v(t.tiled)&&(t.tiled=!0!==t.options.singleTile),v(t.options.numZoomLevels)&&(t.options.numZoomLevels=20),v(t.options.animated)&&(t.options.animated=!1),t.format=v(t.options.format)?"image/png":t.options.format,t.styles=t.options.styles||"",t.sldBody=r.sldBody,t.zIndex_=mv.Z_INDEX[yp],t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lm(t,e)}(e,Gd),r=e,(n=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter(function(t){return!t.equals(e)&&t.isVisible()}).forEach(function(t){return t.setVisible(!1)}),v(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),v(r)||this.map.setZoom(r)}else v(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"addTo",value:function(t){if(this.map=t,this.fire("added:map"),!g(this.options)&&!g(this.options.minScale)&&!g(this.options.maxScale)){var e=this.map.getProjection().units;this.options.minResolution=L(this.options.minScale,e),this.options.maxResolution=L(this.options.maxScale,e)}v(this.name)?this.addAllLayers_():this.addSingleLayer_(),this.legendUrl_===j([M.config.THEME_URL,nd.LEGEND_DEFAULT])&&(this.legendUrl_=O(this.url,{SERVICE:"WMS",VERSION:this.version,REQUEST:"GetLegendGraphic",LAYER:this.name,FORMAT:"image/png"}))}},{key:"setResolutions",value:function(t){var e=this;this.resolutions_=t,this.facadeLayer_.calculateMaxExtent().then(function(r){if(!v(e.ol3Layer)){var n=e.options.minResolution,i=e.options.maxResolution,o=e.createOLSource_(t,n,i,r);e.ol3Layer.setSource(o),e.ol3Layer.setExtent(r)}})}},{key:"addSingleLayer_",value:function(){var t=this,e=this;this.getCapabilities().then(function(r){var n=r.capabilities.Capability.Layer.Layer;if(m(n))for(var i=0,o=n.length;i<o;i+=1)if(void 0!==n[i]&&void 0!==n[i].Name&&n[i].Name===e.facadeLayer_.name){n=n[i],t.addCapabilitiesMetadata(n);try{t.legendUrl_=n.Style[0].LegendURL[0].OnlineResource}catch(t){}}else if(void 0!==n[i]&&void 0!==n[i].Layer&&void 0!==n[i].Layer.filter(function(t){return t.Name===e.facadeLayer_.name})[0]){n=n[i].Layer.filter(function(t){return t.Name===e.facadeLayer_.name})[0],t.addCapabilitiesMetadata(n);try{t.legendUrl_=n.Style[0].LegendURL[0].OnlineResource}catch(t){}}t.addCapabilitiesMetadata(n)}),this.facadeLayer_.calculateMaxExtent().then(function(e){var r=t.options.minResolution,n=t.options.maxResolution,i=t.opacity_,o=t.zIndex_,a=t.visibility&&!1!==t.options.visibility,s=t.map.getResolutions();if(v(s)&&!v(t.resolutions_))s=t.resolutions_;else if(v(s)){var u=t.getNumZoomLevels(),l=t.map.getMapImpl().getSize();t.map.getProjection().units;s=v(r)||v(n)?k(e,l,u):C(r,n,u)}var c=t.createOLSource_(s,r,n,e);!0===t.tiled?t.ol3Layer=new _d(G({visible:a,source:c,extent:e,minResolution:r,maxResolution:n,opacity:i,zIndex:o},t.vendorOptions_,!0)):t.ol3Layer=new Td(G({visible:a,source:c,extent:e,minResolution:r,maxResolution:n,opacity:i,zIndex:o},t.vendorOptions_,!0)),t.map.getMapImpl().addLayer(t.ol3Layer),t.isVisible()&&!t.inRange()?t.setVisible(!1):t.setVisible(t.visibility),null!==o&&t.setZIndex(o),null!==t.resolutions_&&t.setResolutions(t.resolutions_);var h=!1===t.transparent||!0===t.options.animated;t.ol3Layer.set("animated",h),t.ol3Layer.setMaxZoom(t.maxZoom),t.ol3Layer.setMinZoom(t.minZoom)})}},{key:"addCapabilitiesMetadata",value:function(t){var e={abstract:v(t.Abstract)?"":t.Abstract,attribution:v(t.Attribution)?"":t.Attribution,metadataURL:v(t.MetadataURL)?"":t.MetadataURL,style:v(t.Style)?"":t.Style};void 0===this.facadeLayer_.capabilitiesMetadata&&(this.facadeLayer_.capabilitiesMetadata=e)}},{key:"createOLSource_",value:function(t,e,r,n){var i=this,o=this.vendorOptions_.source;if(v(this.vendorOptions_.source)){var a={LAYERS:this.name,VERSION:this.version,TRANSPARENT:this.transparent,FORMAT:this.format,STYLES:this.styles};"1.3.0"!==this.version&&(a.TILED=this.tiled),v(this.sldBody)||(a.SLD_BODY=this.sldBody),v(this.options.params)||Object.keys(this.options.params).forEach(function(t){a[t.toUpperCase()]=i.options.params[t]});var s=this.opacity_,u=this.zIndex_;if(!0===this.tiled){var l=fe(n);o=new sm({url:this.url,params:a,tileGrid:new Rd({resolutions:t,extent:n,origin:l}),extent:n,minResolution:e,maxResolution:r,opacity:s,zIndex:u})}else o=new Tm({url:this.url,params:a,extent:n,minResolution:e,maxResolution:r,opacity:s,zIndex:u})}return o}},{key:"addAllLayers_",value:function(){var t=this;this.getCapabilities().then(function(e){e.getLayers().forEach(function(e){var r=new Bm({url:t.url,name:e.name,version:e.version,tiled:t.tiled},t.vendorOptions_);t.layers.push(r)}),t.map.addWMS(t.layers);var r=t.layers.length;t.layers.forEach(function(t){t.setZIndex(mv.Z_INDEX[yp]+r),r+=1})})}},{key:"getExtent",value:function(){var t=this,e=yr(this.map.getProjection().code);return this.extentPromise=new Promise(function(r,n){v(t.extent_)?t.getCapabilities().then(function(n){t.extent_=n.getLayerExtent(t.name),t.extentProj_=e,r(t.extent_)}):(t.extent_=aa.transformExtent(t.extent_,t.extentProj_,e),t.extentProj_=e,r(t.extent_))}),this.extentPromise}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"updateMinMaxResolution",value:function(t){v(this.options.minResolution)||(this.options.minResolution=L(this.options.minScale,t.units),this.ol3Layer.setMinResolution(this.options.minResolution)),v(this.options.maxResolution)||(this.options.maxResolution=L(this.options.maxScale,t.units),this.ol3Layer.setMaxResolution(this.options.maxResolution))}},{key:"setMaxExtent",value:function(t){var e=this.options.minResolution,r=this.options.maxResolution;if(this.getOL3Layer().setExtent(t),!0===this.tiled){var n=this.map.getResolutions();if(v(n)&&!v(this.resolutions_)&&(n=this.resolutions_),!v(n)){var i=this.createOLSource_(n,e,r,t);this.ol3Layer.setSource(i)}}}},{key:"getNumZoomLevels",value:function(){return this.options.numZoomLevels}},{key:"getLayers",value:function(){return this.layers}},{key:"getCapabilities",value:function(){if(v(this.getCapabilitiesPromise)){var t=this.url,e=this.version,r=this.map.getProjection();this.getCapabilitiesPromise=new Promise(function(n,i){var o=I(t,e);tF(o).then(function(e){var i=e.xml,o=(new ag).customRead(i),a=new zd(o,t,r);n(a)})})}return this.getCapabilitiesPromise}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"refresh",value:function(){var t=this.getOL3Layer();v(t)||t.getSource().changed()}},{key:"getExtentFromCapabilities",value:function(t){var e=this.facadeLayer_.name;return t.getLayerExtent(e)}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),v(this.layers)||(this.layers.map(this.map.removeLayers,this.map),this.layers.length=0),this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.version===t.version),r}}])&&Im(r.prototype,n),i&&Im(r,i),e}();km.LEGEND_IMAGE=null;var Rm=km;function Am(t){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jm(t,e){return!e||"object"!==Am(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dm(t){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gm(t,e){return(Gm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bm=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(Rm)&&wa(Sa("exception").wms_method),v(t)&&wa(Sa("exception").no_param);var o=Kp(t,yp),a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){Nm(t,e,r[e])})}return t}({},n,{visibility:o.visibility,queryable:o.queryable,displayInLayerSwitcher:o.displayInLayerSwitcher}),s=new Rm(a,i);return(r=jm(this,Dm(e).call(this,o,s))).legend=o.legend,r.version=o.version,v(o.tiled)||(r.tiled=o.tiled),r.transparent=o.transparent,v(i.capabilitiesMetadata)||(r.capabilitiesMetadata=i.capabilitiesMetadata),r.minZoom=o.minZoom,r.maxZoom=o.maxZoom,r.options=a,r.getCapabilitiesPromise_=null,r._updateNoCache(),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gm(t,e)}(e,nd),r=e,(n=[{key:"getMaxExtent",value:function(t){var e,r=this;return v(this.userMaxExtent)?(v(this.options.wmcMaxExtent)?v(this.map_.userMaxExtent)?this.getCapabilities().then(function(e){var n=r.getImpl().getExtentFromCapabilities(e);if(v(n)){var i=r.map_.getProjection().getExtent();r.maxExtent_=i}else r.maxExtent_=n;_(t)&&t(r.maxExtent_)}):this.maxExtent_=this.map_.userMaxExtent:this.maxExtent_=this.options.wmcMaxExtent,e=this.maxExtent_):e=this.userMaxExtent,!v(e)&&_(t)&&t(e),e}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise(function(e){return t.getMaxExtent(e)})}},{key:"getCapabilities",value:function(){return v(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"getNoCacheUrl",value:function(){return this._noCacheUrl}},{key:"getNoCacheName",value:function(){return this._noCacheName}},{key:"updateMinMaxResolution",value:function(t){return this.getImpl().updateMinMaxResolution(t)}},{key:"_updateNoCache",value:function(){var t=M.config.tileMappgins.tiledNames.indexOf(this.name);-1!==t&&U(M.config.tileMappgins.tiledUrls[t],this.url)&&(this._noCacheUrl=M.config.tileMappgins.urls[t],this._noCacheName=M.config.tileMappgins.names[t])}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.version===t.version),r}},{key:"type",get:function(){return yp},set:function(t){d(t)||v(t)||t===yp||wa("El tipo de capa debe ser '".concat(yp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){v(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"tiled",get:function(){return this.getImpl().tiled},set:function(t){v(t)?this.getImpl().tiled=!0:w(t)?this.getImpl().tiled="true"===E(t):this.getImpl().tiled=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){v(t)?this.getImpl().version="1.3.0":this.getImpl().version=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&Fm(r.prototype,n),i&&Fm(r,i),e}(),zm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Um=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===cy&&"undefined"!=typeof XMLSerializer&&(cy=new XMLSerializer),cy),e}return zm(e,t),e.prototype.getType=function(){return ai.XML},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=Zd(t);return this.readFeatureFromDocument(r,e)}return Xd(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=Zd(t);return this.readFeaturesFromDocument(r,e)}return Xd(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&vt(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return et()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=Zd(t);return this.readGeometryFromDocument(r,e)}return Xd(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Zd(t);return this.readProjectionFromDocument(e)}return Xd(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(ni),qm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vm="http://www.opengis.net/gml",Ym=/^[\s\xa0]*$/,Wm=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:Kd(r.readFeaturesInternal),featureMembers:$d(r.readFeaturesInternal)},r}return qm(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=sy([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,u=t.childNodes.length;s<u;++s){var l=t.childNodes[s];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",f=0,p=l.namespaceURI;for(var d in a){if(a[d]===p){h=d;break}++f}h||(a[h="p"+f]=p),o.push(h+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var y=a;(a={}).p0=y}var g={},m=Array.isArray(o)?o:[o];for(var v in a){var _={};for(s=0,u=m.length;s<u;++s){(-1===m[s].indexOf(":")?"p0":m[s].split(":")[0])===v&&(_[m[s].split(":").pop()]="featureMembers"==r?Kd(this.readFeatureElement,this):$d(this.readFeatureElement,this))}g[a[v]]=_}n=sy("featureMember"==r?void 0:[],g,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var r=e[0];r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=sy(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?oi(n,r):ii(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Wd(o,!1),Ym.test(a)&&(a=void 0)):(r&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var u=o.attributes.length;if(u>0){i[s]={_content_:i[s]};for(var l=0;l<u;l++){var c=o.attributes[l].name;i[s][c]=o.attributes[l].value}}}if(r){var h=new ri(i);n&&h.setGeometryName(n);var f=t.getAttribute("fid")||function(t,e,r){return t.getAttributeNS(e,r)||""}(t,this.namespace,"id");return f&&h.setId(f),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new en(r,Xr.XYZ)},e.prototype.readMultiPoint=function(t,e){var r=sy([],this.MULTIPOINT_PARSERS_,t,e,this);return r?new cn(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=sy([],this.MULTILINESTRING_PARSERS_,t,e,this);if(r)return new $n(r)},e.prototype.readMultiPolygon=function(t,e){var r=sy([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(r)return new ti(r)},e.prototype.pointMemberParser_=function(t,e){ay(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){ay(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){ay(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);return r?new Ln(r,Xr.XYZ):void 0},e.prototype.readFlatLinearRing_=function(t,e){var r=sy(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return r||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new Nn(r,Xr.XYZ)},e.prototype.readPolygon=function(t,e){var r=sy([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)vt(i,r[a]),o.push(i.length);return new Yn(i,Xr.XYZ,o)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return sy(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var r=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&at(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return yr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Um);Wm.prototype.namespace=Vm,Wm.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Wm.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Wm.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Wm.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Kd(Wm.prototype.pointMemberParser_),pointMembers:Kd(Wm.prototype.pointMemberParser_)}},Wm.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Kd(Wm.prototype.lineStringMemberParser_),lineStringMembers:Kd(Wm.prototype.lineStringMemberParser_)}},Wm.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Kd(Wm.prototype.polygonMemberParser_),polygonMembers:Kd(Wm.prototype.polygonMemberParser_)}},Wm.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Kd(Wm.prototype.readFlatCoordinatesFromNode_)}},Wm.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Kd(Wm.prototype.readLineString)}},Wm.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Kd(Wm.prototype.readPolygon)}},Wm.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:$d(Wm.prototype.readFlatLinearRing_)}};var Xm=Wm,Zm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hm=Vm+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",Km={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},$m=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,r.curve_=void 0!==n.curve&&n.curve,r.multiCurve_=void 0===n.multiCurve||n.multiCurve,r.multiSurface_=void 0===n.multiSurface||n.multiSurface,r.schemaLocation=n.schemaLocation?n.schemaLocation:Hm,r.hasZ=void 0!==n.hasZ&&n.hasZ,r}return Zm(e,t),e.prototype.readMultiCurve_=function(t,e){var r=sy([],this.MULTICURVE_PARSERS_,t,e,this);return r?new $n(r):void 0},e.prototype.readMultiSurface_=function(t,e){var r=sy([],this.MULTISURFACE_PARSERS_,t,e,this);if(r)return new ti(r)},e.prototype.curveMemberParser_=function(t,e){ay(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){ay(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return sy([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return sy([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return sy([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return sy([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var r=sy(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser_=function(t,e){var r=sy(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface_=function(t,e){var r=sy([null],this.SURFACE_PARSERS_,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)vt(i,r[a]),o.push(i.length);return new Yn(i,Xr.XYZ,o)}},e.prototype.readCurve_=function(t,e){var r=sy([null],this.CURVE_PARSERS_,t,e,this);return r?new Ln(r,Xr.XYZ):void 0},e.prototype.readEnvelope_=function(t,e){var r=sy([null],this.ENVELOPE_PARSERS_,t,e,this);return te(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos_=function(t,e){for(var r,n=Wd(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a)s=yr(a).getAxisOrientation();if("neu"===s){var u,l=void 0;for(l=0,u=o.length;l<u;l+=3){var c=o[l],h=o[l+1];o[l]=h,o[l+1]=c}}var f=o.length;if(2==f&&o.push(0),0!==f)return o}},e.prototype.readFlatPosList_=function(t,e){var r=Wd(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=yr(i).getAxisOrientation());var s,u,l,c=r.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=by(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=by(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=by(t.parentNode.getAttribute("srsDimension")):o&&(h=by(o));for(var f=[],p=0,d=c.length;p<d;p+=h)s=parseFloat(c[p]),u=parseFloat(c[p+1]),l=3===h?parseFloat(c[p+2]):0,"en"===a.substr(0,2)?f.push(s,u,l):f.push(u,s,l);return f},e.prototype.writePos_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=n.srsName,s="enu";a&&(s=yr(a).getAxisOrientation());var u,l=e.getCoordinates();(u="en"===s.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],i)&&(u+=" "+(l[2]||0));Oy(t,u)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=yr(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];r&&(i+=" "+(t[2]||0));return i},e.prototype.writePosList_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=n.srsName,u=e.getCoordinates(),l=u.length,c=new Array(l),h=0;h<l;++h)a=u[h],c[h]=this.getCoords_(a,s,i);Oy(t,c.join(" "))},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=Yd(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,r)},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];ly({node:t},this.ENVELOPE_SERIALIZERS_,ny,i,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=Yd(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Yd(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();ly({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=Yd(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=Yd(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)}else if("Curve"===t.nodeName){var o=Yd(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();ly({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();ly({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS_,ry("pointMember"),a,r,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();ly({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeRing_=function(t,e,r){var n=Yd(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writePointMember_=function(t,e,r){var n=Yd(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var n=Yd(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var n=Yd(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=at({},i);o.node=t,n=Array.isArray(e)?oi(e,i):ii(e,!0,i),ly(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=ty(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=ty(Oy)))}var f=at({},i);f.node=t,ly(f,i.serializers,ry(void 0,o),l,r,u)},e.prototype.writeFeatureMembers_=function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=ty(this.writeFeatureElement,this);var s=at({},n);s.node=t,ly(s,a,ry(i,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return Yd(this.namespace,Km[n.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,u=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===u&&(n="MultiCurve"),Yd(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=Yd(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&at(n,e),this.writeGeometryElement(r,t,[n]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Yd(this.namespace,"featureMembers");r.setAttributeNS(Vd,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&at(n,e),this.writeFeatureMembers_(r,t,[n]),r},e}(Xm);$m.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:$d($m.prototype.readFlatPos_),posList:$d($m.prototype.readFlatPosList_)}},$m.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:$m.prototype.interiorParser_,exterior:$m.prototype.exteriorParser_}},$m.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:$d(Xm.prototype.readPoint),MultiPoint:$d(Xm.prototype.readMultiPoint),LineString:$d(Xm.prototype.readLineString),MultiLineString:$d(Xm.prototype.readMultiLineString),LinearRing:$d(Xm.prototype.readLinearRing),Polygon:$d(Xm.prototype.readPolygon),MultiPolygon:$d(Xm.prototype.readMultiPolygon),Surface:$d($m.prototype.readSurface_),MultiSurface:$d($m.prototype.readMultiSurface_),Curve:$d($m.prototype.readCurve_),MultiCurve:$d($m.prototype.readMultiCurve_),Envelope:$d($m.prototype.readEnvelope_)}},$m.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Kd($m.prototype.curveMemberParser_),curveMembers:Kd($m.prototype.curveMemberParser_)}},$m.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Kd($m.prototype.surfaceMemberParser_),surfaceMembers:Kd($m.prototype.surfaceMemberParser_)}},$m.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Kd(Xm.prototype.readLineString),Curve:Kd($m.prototype.readCurve_)}},$m.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Kd(Xm.prototype.readPolygon),Surface:Kd($m.prototype.readSurface_)}},$m.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:$d($m.prototype.readPatch_)}},$m.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:$d($m.prototype.readSegment_)}},$m.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Kd($m.prototype.readFlatPosList_),upperCorner:Kd($m.prototype.readFlatPosList_)}},$m.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:$d($m.prototype.readPolygonPatch_)}},$m.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:$d($m.prototype.readLineStringSegment_)}},$m.prototype.writeFeatures,$m.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ty($m.prototype.writeRing_),interior:ty($m.prototype.writeRing_)}},$m.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ty(Oy),upperCorner:ty(Oy)}},$m.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ty($m.prototype.writeSurfaceOrPolygonMember_),polygonMember:ty($m.prototype.writeSurfaceOrPolygonMember_)}},$m.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ty($m.prototype.writePointMember_)}},$m.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ty($m.prototype.writeLineStringOrCurveMember_),curveMember:ty($m.prototype.writeLineStringOrCurveMember_)}},$m.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ty($m.prototype.writeCurveOrLineString_),MultiCurve:ty($m.prototype.writeMultiCurveOrLineString_),Point:ty($m.prototype.writePoint_),MultiPoint:ty($m.prototype.writeMultiPoint_),LineString:ty($m.prototype.writeCurveOrLineString_),MultiLineString:ty($m.prototype.writeMultiCurveOrLineString_),LinearRing:ty($m.prototype.writeLinearRing_),Polygon:ty($m.prototype.writeSurfaceOrPolygon_),MultiPolygon:ty($m.prototype.writeMultiSurfaceOrPolygon_),Surface:ty($m.prototype.writeSurfaceOrPolygon_),MultiSurface:ty($m.prototype.writeMultiSurfaceOrPolygon_),Envelope:ty($m.prototype.writeEnvelope)}};var Jm=$m,Qm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tv=function(t){function e(e){var r=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return Qm(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Rd),ev=tv;function rv(t,e,r){var n=[],i=[],o=[],a=[],s=[],u=void 0!==r?r:[],l=t.SupportedCRS,c=yr(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||yr(l),h=c.getMetersPerUnit(),f="ne"==c.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(u.length>0)||_t(u,function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix})){i.push(e.Identifier);var r=28e-5*e.ScaleDenominator/h,l=e.TileWidth,c=e.TileHeight;f?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),n.push(r),a.push(l==c?l:[l,c]),s.push([e.MatrixWidth,e.MatrixHeight])}}),new tv({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}var nv={KVP:"KVP",REST:"REST"};Jm.prototype.writePos_=function(t,e,r){var n=e.getCoordinates();Oy(t,"".concat(n[0]," ").concat(n[1]))},Jm.prototype.getCoords_=function(t,e){return"".concat(t[0]," ").concat(t[1])};function iv(t){return(iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ov(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function av(t,e){return!e||"object"!==iv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sv(t){return(sv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uv(t,e){return(uv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=av(this,sv(e).call(this,t))).userZoom_=null,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uv(t,e)}(e,Vc),r=e,(n=[{key:"setUserZoom",value:function(t){this.userZoom_=t,v(t)||this.setZoom(t)}},{key:"getUserZoom",value:function(){return this.userZoom_}},{key:"setProjection",value:function(t){this.projection_=t}},{key:"getResolutions",value:function(){return this.get("resolutions")}},{key:"setResolutions",value:function(t){this.set("resolutions",t),this.maxResolution_=t[0],this.minResolution_=t[t.length-1],this.applyOptions_({minZoom:this.minZoom_,resolutions:t,zoomFactor:this.zoomFactor_,minResolution:this.minResolution_,maxResolution:this.maxResolution_,projection:this.projection_,center:this.getCenter()}),v(this.userZoom_)||this.setZoom(this.userZoom_)}}])&&ov(r.prototype,n),i&&ov(r,i),e}();function cv(t){return(cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hv(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pv(t){return(pv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dv(t,e){return(dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var gv=function(t){function e(t,r){var n,i,o;arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,o=pv(e).call(this),(n=!o||"object"!==cv(o)&&"function"!=typeof o?yv(i):o).facadeMap_=r,n.layers_=[],n.layerGroups_=[],n.controls_=[],n.initZoom_=!0,n.userResolutions_=null,n.userBbox_=null,n.maxExtentForResolutions_=null,n.envolvedMaxExtent_=null,n._calculatedResolutions=!1,n._resolutionsEnvolvedExtent=!1,n._resolutionsBaseLayer=!1,n.map_=new Bf({controls:[],target:t.id,view:new lv}),n.map_.getView().setConstrainResolution(!0),n.facadeMap_.on(tp,function(){n.map_.updateSize()}),n.map_.on("singleclick",n.onMapClick_.bind(yv(yv(n)))),n.map_.addInteraction(new wh({handleEvent:function(t){return"pointermove"===t.type&&n.onMapMove_(t),!0}})),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dv(t,e)}(e,da),r=e,(n=[{key:"getLayers",value:function(t){var e=this.getKML(t),r=this.getWMS(t),n=this.getWFS(t),i=this.getWMTS(t),o=this.getMVT(t),a=this.getMBTiles(t),s=this.getMBTilesVector(t),u=this.getXYZs(t),l=this.getTMS(t),c=this.getUnknowLayers_(t);return e.concat(r).concat(n).concat(i).concat(o).concat(a).concat(s).concat(u).concat(l).concat(c)}},{key:"getBaseLayers",value:function(){return this.getLayers().filter(function(t){var e=!1;return t.type!==yp&&t.type!==mp||(e=!0!==t.transparent),e})}},{key:"addLayers",value:function(t){var e=this,r=t;return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?this:(r.forEach(function(t){t.type===yp?e.facadeMap_.addWMS(t):t.type===mp?e.facadeMap_.addWMTS(t):t.type===dp?e.facadeMap_.addKML(t):t.type===gp?e.facadeMap_.addWFS(t):"MVT"===t.type?e.facadeMap_.addMVT(t):t.type===_p?e.facadeMap_.addMBTiles(t):t.type===bp?e.facadeMap_.addMBTilesVector(t):t.type===wp?e.facadeMap_.addXYZ(t):t.type===xp?e.facadeMap_.addTMS(t):Op(t.type)||e.addUnknowLayers_([t])}),this)}},{key:"removeLayers",value:function(t){var e=t.filter(function(t){return!Op(t.type)}),r=t.filter(function(t){return Op(t.type)});return r.length>0&&(this.removeKML(r),this.removeWMS(r),this.removeWFS(r),this.removeWMTS(r),this.removeMVT(r),this.removeMBTiles(r),this.removeXYZ(r),this.removeTMS(r)),e.length>0&&this.removeUnknowLayers_(e),this}},{key:"getKML",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===dp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.extract)||(n=n&&t.extract===r.extract)),n});e=e.concat(r)},this),e}},{key:"addKML",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if(t.type===dp&&!D(r.layers_,t)){if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX[dp];t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}},this),this}},{key:"removeKML",value:function(t){var e=this;return this.getKML(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!t.equals(e)}),t.getImpl().destroy()},this),this}},{key:"getWMS",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===yp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:t instanceof Bm?n=t===r:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.legend)||(n=n&&t.legend===r.legend),v(t.transparent)||(n=n&&t.transparent===r.transparent),v(t.tiled)||(n=n&&t.tiled===r.tiled),v(t.cql)||(n=n&&t.cql===r.cql),v(t.version)||(n=n&&t.version===r.version)),n});e=e.concat(r)},this),e}},{key:"addWMS",value:function(t){var r=this,n=this.getBaseLayers().length>0,i=[];return t.forEach(function(t){if(t.type===yp&&!D(r.layers_,t))if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),i.push(t),!0!==t.transparent)t.setVisible(!n),n=!0,t.setZIndex(e.Z_INDEX_BASELAYER);else if(null==t.getZIndex()){var o=r.layers_.length+e.Z_INDEX[yp];t.setZIndex(o)}}),(i.length>0&&!n||i.some(function(t){return!0!==t.transparent&&t.isVisible()}))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeWMS",value:function(t){var e=this;return this.getWMS(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!t.equals(e)}),t.getImpl().destroy()}),this}},{key:"getGeoJSON",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return"GeoJSON"===t.type});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.legend)||(n=n&&t.legend===r.legend)),n});e=e.concat(r)}),e}},{key:"getWFS",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===gp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.namespace)||(n=n&&t.namespace===r.namespace),v(t.legend)||(n=n&&t.legend===r.legend),v(t.cql)||(n=n&&t.cql===r.cql),v(t.geometry)||(n=n&&t.geometry===r.geometry),v(t.ids)||(n=n&&t.ids===r.ids),v(t.version)||(n=n&&t.version===r.version)),n});e=e.concat(r)}),e}},{key:"addWFS",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if(t.type===gp&&!D(r.layers_,t)){if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX[gp];t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}}),this}},{key:"removeWFS",value:function(t){var e=this;return this.getWFS(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!e.equals(t)}),t.getImpl().destroy()}),this}},{key:"getWMTS",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===mp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.matrixSet)||(n=n&&t.matrixSet===r.matrixSet),v(t.legend)||(n=n&&t.legend===r.legend)),n});e=e.concat(r)}),e}},{key:"addWMTS",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if(t.type===mp&&!D(r.layers_,t))if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),!0!==t.transparent)t.setVisible(!n),n=!0,t.isVisible()&&r.updateResolutionsFromBaseLayer(),t.setZIndex(e.Z_INDEX_BASELAYER);else{if(null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX[mp];t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}}),this}},{key:"removeWMTS",value:function(t){var e=this;return this.getWMTS(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!e.equals(t)}),t.getImpl().destroy()}),this}},{key:"getMBTiles",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===_p});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.legend)||(n=n&&t.legend===r.legend)),n});e=e.concat(r)}),e}},{key:"addMBTiles",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if(t.type===_p&&!D(r.layers_,t)){if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX[_p];t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}}),this}},{key:"removeMBTiles",value:function(t){var e=this;return this.getMBTiles(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!e.equals(t)}),t.getImpl().destroy(),t.fire("removed:map",[t])}),this}},{key:"getMBTilesVector",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===bp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name),v(t.legend)||(n=n&&t.legend===r.legend)),n});e=e.concat(r)}),e}},{key:"addMBTilesVector",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if(t.type===bp&&!D(r.layers_,t)){if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX[bp];t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}}),this}},{key:"removeMBTilesVector",value:function(t){var e=this;return this.getMBTilesVector(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!e.equals(t)}),t.getImpl().destroy(),t.fire("removed:map",[t])}),this}},{key:"getUnknowLayers_",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return!Op(t.type)});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:t instanceof nd?n=t.equals(r):(v(t.type)||(n=n&&t.type===r.type),v(t.name)||(n=n&&t.name===r.name)),n});e=e.concat(r)}),e}},{key:"addUnknowLayers_",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if(!D(r.layers_,t))if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),!0!==t.transparent)t.setVisible(!n),n=!0,t.isVisible()&&r.updateResolutionsFromBaseLayer(),t.setZIndex(e.Z_INDEX_BASELAYER);else{if(t.setZIndex(t.getZIndex()),null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX[t.type];t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}}),this}},{key:"removeUnknowLayers_",value:function(t){var e=this;t.forEach(function(t){if(D(e.layers_,t)&&(e.layers_=e.layers_.filter(function(e){return!e.equals(t)}),t.getImpl().destroy(),!0!==t.transparent)){var r=e.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}})}},{key:"getMVT",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return"MVT"===t.type});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name)),n});e=e.concat(r)}),e}},{key:"removeMVT",value:function(t){var e=this;return this.getMVT(t).forEach(function(t){e.layers_=e.layers_.filter(function(e){return!e.equals(t)}),t.getImpl().destroy(),t.fire("removed:map",[t])}),this}},{key:"addMVT",value:function(t){var r=this,n=this.getBaseLayers().length>0;return t.forEach(function(t){if("MVT"===t.type&&!D(r.layers_,t)){if(t.getImpl().addTo(r.facadeMap_),r.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var i=r.layers_.length+e.Z_INDEX.MVT;t.setZIndex(i)}n||r.updateResolutionsFromBaseLayer()}}),this}},{key:"getXYZs",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===wp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name)),n});e=e.concat(r)}),e}},{key:"addXYZ",value:function(t){var r=this;return t.forEach(function(t){if(t.type===wp&&!D(r.layers_,t)){t.getImpl().addTo(r.facadeMap_),r.layers_.push(t);var n=r.layers_.length+e.Z_INDEX[wp];t.getImpl().setZIndex(n)}}),this}},{key:"removeXYZ",value:function(t){var e=this;return this.getXYZs(t).forEach(function(t){t.getImpl().destroy(),e.layers_=e.layers_.filter(function(e){return!e.equals(t)})}),this}},{key:"getTMS",value:function(t){var e=[],r=t,n=this.layers_.filter(function(t){return t.type===xp});return v(r)&&(r=[]),m(r)||(r=[r]),0===r.length?e=n:r.forEach(function(t){var r=n.filter(function(r){var n=!0;return e.includes(r)?n=!1:(v(t.type)||(n=n&&t.type===r.type),v(t.url)||(n=n&&t.url===r.url),v(t.name)||(n=n&&t.name===r.name)),n});e=e.concat(r)}),e}},{key:"addTMS",value:function(t){var r=this;return t.forEach(function(t){if(t.type===xp&&!D(r.layers_,t)){t.getImpl().addTo(r.facadeMap_),r.layers_.push(t);var n=r.layers_.length+e.Z_INDEX[xp];t.getImpl().setZIndex(n)}}),this}},{key:"removeTMS",value:function(t){var e=this;return this.getTMS(t).forEach(function(t){t.getImpl().destroy(),e.layers_=e.layers_.filter(function(e){return!e.equals(t)})}),this}},{key:"getControls",value:function(t){var e=t,r=[],n=this.facadeMap_.getPanels().map(function(t){return t.getControls()});n.length>0&&(n=n.reduce(function(t,e){return t.concat(e)}));var i=this.controls_.concat(n);v(e)&&(e=[]),m(e)||(e=[e]),0===e.length?r=i:e.forEach(function(t){r=r.concat(i.filter(function(e){var n=!1;return D(r,e)||(w(t)?n=t===e.name:t instanceof ap?n=t===e:b(t)&&(n=t.name===e.name)),n}))});var o=[];return r.forEach(function(t){o.map(function(t){return t.name}).includes(t.name)||o.push(t)}),o}},{key:"addControls",value:function(t){var e=this;return t.forEach(function(t){t instanceof pp&&e.facadeMap_.addControls(M.config.controls.default.split(",")),D(e.controls_,t)||e.controls_.push(t)}),this}},{key:"removeControls",value:function(t){var e=this;return this.getControls(t).forEach(function(t){t.destroy(),e.controls_=e.controls_.filter(function(e){var r=e.constructor===t.constructor;return v(e.equals)||(r=!e.equals(t)),r})}),this}},{key:"setMaxExtent",value:function(t,e){var r=t;return v(r)||m(r)||!b(r)||(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().set("extent",r),this.updateResolutionsFromBaseLayer(),v(r)||!1===e||this.setBbox(r),this}},{key:"getMaxExtent",value:function(){var t=this.getMapImpl().getView().get("extent");return v(t)?this.envolvedMaxExtent_:{x:{min:t[0],max:t[2]},y:{min:t[1],max:t[3]}}}},{key:"setBbox",value:function(t,e){var r;return v(t)&&wa(Sa("exception").no_bbox),this.userBbox_=t,m(t)?r=t:b(t)&&(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().fit(r,e),this}},{key:"getBbox",value:function(){var t=null,e=this.getMapImpl(),r=e.getView();if(!v(r.getCenter())){var n=r.calculateExtent(e.getSize());v(n)||(t={x:{min:n[0],max:n[2]},y:{min:n[1],max:n[3]}})}return t}},{key:"setZoom",value:function(t){return v(t)&&wa(Sa("exception").no_zoom),this.getMapImpl().getView().setUserZoom(t),this}},{key:"setMinZoom",value:function(t){return v(t)&&wa(Sa("exception").no_zoom),this.getMapImpl().getView().setMinZoom(t),this}},{key:"setMaxZoom",value:function(t){return v(t)&&wa(Sa("exception").no_zoom),this.getMapImpl().getView().setMaxZoom(t),this}},{key:"getZoom",value:function(){var t=null,e=this.getMapImpl().getView(),r=e.getResolution(),n=this.getResolutions();if(v(n))v(r)||(t=e.getZoomForResolution(r));else for(var i=0,o=n.length;i<o;i+=1)if(n[i]<=r){t=i;break}return t}},{key:"getMinZoom",value:function(){var t;return this.getMapImpl()&&this.getMapImpl().getView()&&(t=this.getMapImpl().getView().getMinZoom()),t}},{key:"getMaxZoom",value:function(){var t;return this.getMapImpl()&&this.getMapImpl().getView()&&(t=this.getMapImpl().getView().getMaxZoom()),t}},{key:"setCenter",value:function(t){v(t)&&wa(Sa("exception").no_center);var e=[t.x,t.y],r=this.getMapImpl().getView(),n=r.getCenter();return v(n)||this.getMapImpl().getView().animate({duration:250,source:n}),r.setCenter(e),this}},{key:"getCenter",value:function(){var t=null,e=this.getMapImpl().getView().getCenter();return v(e)||(t={x:e[0],y:e[1]}),t}},{key:"getResolutions",value:function(){return this.getMapImpl().getView().getResolutions()}},{key:"setResolutions",value:function(t,e){v(t)&&wa(Sa("exception").no_resolutions),v(e)&&(this.userResolutions_=t);var r,n=yr(this.getProjection().code),i=this.getMapImpl(),o=i.getView().getProperties(),a=i.getView().getUserZoom(),s=i.getView().getMinZoom(),u=i.getView().getMaxZoom(),l=i.getSize(),c=new lv({projection:n});if(c.setProperties(o),c.setResolutions(t),c.setUserZoom(a),c.setMinZoom(s),c.setMaxZoom(u),c.setConstrainResolution(!0),v(a)){var h=this.facadeMap_.getBbox();if(!v(h)){var f=c.getResolutionForExtent([h.x.min,h.y.min,h.x.max,h.y.max],l),p=t.map(function(t){return Math.abs(t-f)}),d=p.indexOf(Math.min.apply(Math,hv(p)));r=t[d]}}else r=t[a];return c.setResolution(r),i.setView(c),this.getWMS().forEach(function(e){e.getImpl().setResolutions(t)}),this}},{key:"getScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=R(t,e);return v(r)||(r=r>=1e3&&r<=95e4?1e3*Math.round(r/1e3):r>=95e4?1e6*Math.round(r/1e6):Math.round(r)),r}},{key:"getExactScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=R(t,e);return Math.trunc(r)}},{key:"setProjection",value:function(t){v(t)&&wa(Sa("exception").no_projection);var e=yr(t.code);v(e)&&(e=new Xe(t));var r=yr(this.getProjection().code),n=this.facadeMap_.getMaxExtent(),i=this.facadeMap_.getResolutions(),o=this.getMapImpl(),a=o.getView().getProperties(),s=o.getView().getResolution(),u=o.getView().getUserZoom(),l=o.getView().getMinZoom(),c=o.getView().getMaxZoom(),h=new lv({projection:e});h.setProperties(a),v(i)||h.setResolutions(i),v(s)||h.setResolution(s),h.setUserZoom(u),h.setMinZoom(l),h.setMaxZoom(c),h.setConstrainResolution(!0),o.setView(h),this.facadeMap_.getWMS().forEach(function(e){e.updateMinMaxResolution(t)}),v(n)||(m(n)||(n=[n.x.min,n.y.min,n.x.max,n.y.max]),this.setMaxExtent(aa.transformExtent(n,r,e),!1)),this.updateResolutionsFromBaseLayer();var f=this.facadeMap_.getPopup();if(!v(f)){var p=f.getCoordinate();v(p)||(p=Sr(p,r,e),f.setCoordinate(p))}var d=this.facadeMap_.getLabel();if(!v(d)){var y=d.getCoordinate();v(y)||(y=Sr(y,r,e),d.setCoordinate(y))}return this.fire("change"),this}},{key:"getProjection",value:function(){var t=this.getMapImpl().getView().getProjection(),e=null;return v(t)||(e={code:t.getCode(),units:t.getUnits(),getExtent:function(){return t.getExtent()}}),e}},{key:"getMapImpl",value:function(){return this.map_}},{key:"removePopup",value:function(t){if(!v(t)){var e=t.getImpl();this.getMapImpl().removeOverlay(e)}return this}},{key:"destroy",value:function(){this.layers_.length=0,this.controls_.length=0,this.popup_=null,this.options_=null,this.map_.setTarget(null),this.map_=null}},{key:"updateResolutionsFromBaseLayer",value:function(){this.fire(tp),this.refresh()}},{key:"addLabel",value:function(t){return this.label=t,t.show(this.facadeMap_),this}},{key:"getLabel",value:function(){return this.label}},{key:"removeLabel",value:function(){if(!v(this.label)){var t=this.label.getPopup();this.removePopup(t),this.label=null}}},{key:"refresh",value:function(){return this.map_.updateSize(),this}},{key:"getContainer",value:function(){return this.map_.getOverlayContainerStopEvent()}},{key:"setFacadeMap",value:function(t){this.facadeMap_=t}},{key:"onMapClick_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e),n=this.facadeMap_.getLabel();v(n)||n.hide(),this.facadeMap_.fire("click",[{pixel:e,coord:r,vendor:t}])}},{key:"onMapMove_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e);this.facadeMap_.fire("move",[{pixel:e,coord:r,vendor:t}])}}])&&fv(r.prototype,n),i&&fv(r,i),e}();gv.Z_INDEX={},gv.Z_INDEX_BASELAYER=0,gv.Z_INDEX[vp]=5,gv.Z_INDEX[yp]=10,gv.Z_INDEX[mp]=10,gv.Z_INDEX[dp]=10,gv.Z_INDEX[gp]=10,gv.Z_INDEX.MVT=10,gv.Z_INDEX.Vector=10,gv.Z_INDEX.GeoJSON=10,gv.Z_INDEX[_p]=10,gv.Z_INDEX[bp]=10,gv.Z_INDEX[wp]=10,gv.Z_INDEX[xp]=10;var mv=gv,vv={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};function _v(t){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var bv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wv={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},xv=function(t){function e(e){var r=t.call(this)||this;r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+Vi,r.element.style.position="absolute";var n=e.autoPan;return n&&"object"!==_v(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addEventListener(Dt(wv.ELEMENT),r.handleElementChanged),r.addEventListener(Dt(wv.MAP),r.handleMapChanged),r.addEventListener(Dt(wv.OFFSET),r.handleOffsetChanged),r.addEventListener(Dt(wv.POSITION),r.handlePositionChanged),r.addEventListener(Dt(wv.POSITIONING),r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:vv.TOP_LEFT),void 0!==e.position&&r.setPosition(e.position),r}return bv(e,t),e.prototype.getElement=function(){return this.get(wv.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(wv.MAP)},e.prototype.getOffset=function(){return this.get(wv.OFFSET)},e.prototype.getPosition=function(){return this.get(wv.POSITION)},e.prototype.getPositioning=function(){return this.get(wv.POSITIONING)},e.prototype.handleElementChanged=function(){zi(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Bi(this.element),ft(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=ct(t,$l,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(wv.ELEMENT,t)},e.prototype.setMap=function(t){this.set(wv.MAP,t)},e.prototype.setOffset=function(t){this.set(wv.OFFSET,t)},e.prototype.setPosition=function(t){this.set(wv.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(wv.POSITION)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[ji(n),Di(n)]),o=void 0===t.margin?20:t.margin;if(!Kt(r,i)){var a=i[0]-r[0],s=r[2]-i[2],u=i[1]-r[1],l=r[3]-i[3],c=[0,0];if(a<0?c[0]=a-o:s<0&&(c[0]=Math.abs(s)+o),u<0?c[1]=u-o:l<0&&(c[1]=Math.abs(l)+o),0!==c[0]||0!==c[1]){var h=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(h),p=[f[0]+c[0],f[1]+c[1]],d=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(wv.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";i==vv.BOTTOM_RIGHT||i==vv.CENTER_RIGHT||i==vv.TOP_RIGHT?s="-100%":i!=vv.BOTTOM_CENTER&&i!=vv.CENTER_CENTER&&i!=vv.TOP_CENTER||(s="-50%"),i==vv.BOTTOM_LEFT||i==vv.BOTTOM_CENTER||i==vv.BOTTOM_RIGHT?u="-100%":i!=vv.CENTER_LEFT&&i!=vv.CENTER_CENTER&&i!=vv.CENTER_RIGHT||(u="-50%");var l="translate("+s+", "+u+") translate("+o+", "+a+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(Gt);function Ev(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Sv=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"listen",value:function(){t.WIDTH=window.innerWidth,t.HEIGHT=window.innerHeight,window.addEventListener("resize",function(e){t.WIDTH=e.target.innerWidth,t.HEIGHT=e.target.innerHeight})}}],(r=null)&&Ev(e.prototype,r),n&&Ev(e,n),t}();Sv.WIDTH=window.innerWidth,Sv.HEIGHT=window.innerHeight,Sv.listen();var Ov=Sv;function Tv(t){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Iv(t,e){return!e||"object"!==Tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pv(t){return(Pv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cv(t,e){return(Cv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lv=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Iv(this,Pv(e).call(this,{}))).panMapIfOutOfView=r.panMapIfOutOfView,void 0===t.panMapIfOutOfView&&(t.panMapIfOutOfView=!1),t.ani_opts=r.ani_opts,void 0===t.ani_opts&&(t.ani_opts={duration:250}),t.facadeMap_=null,t.cachedAniPixel_=null,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cv(t,e)}(e,xv),r=e,(n=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.container=e,this.content=this.getContentFromContainer(e),z(this.content),this.setElement(this.container),t.getMapImpl().addOverlay(this)}},{key:"show",value:function(t,e){return this.setPosition(t),this.panMapIfOutOfView&&this.panIntoView(t),this.content.scrollTop=0,_(e)&&e(),this}},{key:"centerByStatus",value:function(t,e){var r=this.getMap().getView().getResolution(),n=[].concat(e);if(t===Uv.status.COLLAPSED)n[1]-=.1*Ov.HEIGHT*r;else{if(t!==Uv.status.DEFAULT)return;n[1]-=.275*Ov.HEIGHT*r}var i=this.facadeMap_.getFeatureCenter();this.facadeMap_.setCenter({x:n[0],y:n[1]}),v(i)||this.facadeMap_.drawFeatures([i])}},{key:"getContentFromContainer",value:function(t){return t.querySelector("div.m-body")}},{key:"panIntoView",value:function(t){var e=this;return this.panIntoSynchronizedAnim_().then(function(){e.isAnimating_=!0;var r=e.element.querySelector(".m-popup"),n=r.clientWidth+20,i=r.clientHeight+20+30,o=e.getMap().getSize(),a=e.getMap().getView().getCenter(),s=n-60,u=e.getOffset(),l=e.getMap().getPixelFromCoordinate(t);if(!v(l)){var c=l[0]-60,h=o[0]-(l[0]+s),f=l[1]-(i+u[1]),p=o[1]-(l[1]+20)-u[1],d=e.getMap().getPixelFromCoordinate(a),y=d.slice();h<0?y[0]-=h:c<0&&(y[0]+=c),f<0?y[1]+=f:p<0&&(y[1]-=p),!v(e.ani_opts)&&v(e.ani_opts.source)&&(e.ani_opts.source=a,e.getMap().getView().animate(e.ani_opts)),y[0]===d[0]&&y[1]===d[1]||e.getMap().getView().setCenter(e.getMap().getCoordinateFromPixel(y))}e.isAnimating_=!1}),this.getMap().getView().getCenter()}},{key:"panIntoSynchronizedAnim_",value:function(){var t=this;return new Promise(function(e,r){if(!0===t.isAnimating_){var n=300;v(t.ani_opts)||(n=t.ani_opts.duration),setTimeout(e,n)}else e()})}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"setContainer",value:function(t){this.setElement(t),this.content=this.getContentFromContainer(t),z(this.content)}},{key:"getContent",value:function(){return this.content}}])&&Mv(r.prototype,n),i&&Mv(r,i),e}(),kv=(r(122),r(47)),Rv=r.n(kv);function Av(t){return(Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fv(t,e){return!e||"object"!==Av(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jv(t){return(jv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dv(t,e){return(Dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Bv=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Gv(this,t),this.icon=e.icon,this.title=e.title,this.content=e.content,this.listeners=e.listeners||[]},zv=function(t){function e(t){var r;Gv(this,e);var n=new Lv(t);return(r=Fv(this,jv(e).call(this,n))).coord_=null,r.tabs_=[],r.element_=null,r.status_=e.status.COLLAPSED,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dv(t,e)}(e,ba),r=e,(n=[{key:"getTabs",value:function(){return this.tabs_}},{key:"removeTab",value:function(t){this.tabs_=this.tabs_.filter(function(e){return e.content!==t.content}),this.update()}},{key:"addTab",value:function(t){var e=t;e instanceof Bv||(e=new Bv(t)),this.tabs_.push(e),this.update()}},{key:"addTo",value:function(t,e){if(this.map_=t,v(this.element_)){var r=rF(Rv.a,{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=r,this.addEvents(r),this.getImpl().addTo(t,r),this.show(e))}else this.getImpl().addTo(t,this.element_),this.show(e)}},{key:"update",value:function(){if(!v(this.map_)){var t=rF(Rv.a,{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=t,this.addEventTabs(this.tabs_[0],t),this.addEvents(t),this.getImpl().setContainer(t),this.show(this.coord_))}}},{key:"show",value:function(t){var e=this;this.coord_=t,this.getImpl().show(this.coord_,function(){e.fire("show")})}},{key:"hide",value:function(t){v(t)||t.preventDefault(),this.getImpl().hide()}},{key:"switchTab",value:function(t){if(this.tabs_.length>t){var e=this.tabs_[t];this.setContent_(e.content),this.addEventTabs(e,this.getContent()),this.show(this.coord_)}}},{key:"addEventTabs",value:function(t,e){t.listeners.forEach(function(t){!0===t.all?e.querySelectorAll(t.selector).forEach(function(e){e.addEventListener(t.type,function(e){return t.callback(e)})}):e.querySelector(t.selector).addEventListener(t.type,function(e){return t.callback(e)})})}},{key:"setContent_",value:function(t){this.getContent().innerHTML=t}},{key:"getContent",value:function(){return this.getImpl().getContent()}},{key:"addEvents",value:function(t){var r,n=this,i=t,o=i.querySelectorAll("div.m-tab");Array.prototype.forEach.call(o,function(t){t.addEventListener("click",function(e){e.preventDefault();var i=e.clientY;if("click"===e.type||Math.abs(r-i)<5){Array.prototype.forEach.call(o,function(t){t.classList.remove("m-activated")}),t.classList.add("m-activated");var a=t.getAttribute("data-index");n.switchTab(a)}}),t.addEventListener("touchend",function(e){e.preventDefault();var i=e.clientY;if("touchend"===e.type||Math.abs(r-i)<5){Array.prototype.forEach.call(o,function(t){t.classList.remove("m-activated")}),t.classList.add("m-activated");var a=t.getAttribute("data-index");n.switchTab(a)}})});var a=i.querySelector("a.m-popup-closer");a.addEventListener("click",this.hide.bind(this),!1),a.addEventListener("touchend",this.hide.bind(this),!1);var s=i.querySelector("div.m-tabs");if(v(s)&&(s=i.querySelector("div.m-content > div.m-header")),!v(s)){var u;s.addEventListener("touchstart",function(t){t.preventDefault(),r=t.touches[0].clientY,n.status_===e.status.COLLAPSED?u=.9*Ov.HEIGHT:n.status_===e.status.DEFAULT?u=.45*Ov.HEIGHT:n.status_===e.status.FULL&&(u=0),i.classList.add("m-no-animation")},!1),s.addEventListener("touchmove",function(t){t.preventDefault(),n.touchY=t.touches[0].clientY;var e=n.touchY-r;i.style.top="".concat(u+e,"px")},!1),s.addEventListener("touchend",function(t){t.preventDefault(),n.manageCollapsiblePopup_(r,n.touchY)},!1);var l=window.matchMedia("(max-width: 768px)");setTimeout(function(){return n.manageTransform(l,i)},10),l.addEventListener("change",function(t){n.manageTransform(t,i)}),s.addEventListener("mouseup",function(t){t.preventDefault(),n.tabs_.length<=1&&(n.status_===e.status.COLLAPSED?n.setStatus_(e.status.DEFAULT):n.status_===e.status.DEFAULT?n.setStatus_(e.status.FULL):n.setStatus_(e.status.COLLAPSED))})}}},{key:"setStatus_",value:function(t){t!==this.status_&&(this.element_.classList.remove(this.status_),this.status_=t,this.element_.classList.add(this.status_),this.element_.style.top="",this.element_.classList.remove("m-no-animation"),Ov.WIDTH<=M.config.MOBILE_WIDTH&&this.getImpl().centerByStatus(t,this.coord_))}},{key:"manageTransform",value:function(t,e){e&&e.parentElement&&(t.matches?e.parentElement.classList.add("unsetTransform"):e.parentElement.classList.remove("unsetTransform"))}},{key:"manageCollapsiblePopup_",value:function(t,r){var n=100*r/Ov.HEIGHT;100*Math.abs(t-r)/Ov.HEIGHT>10?this.status_===e.status.COLLAPSED?n<45?this.setStatus_(e.status.FULL):n<85?this.setStatus_(e.status.DEFAULT):this.setStatus_(e.status.COLLAPSED):this.status_===e.status.DEFAULT?n>45?this.setStatus_(e.status.COLLAPSED):n<45?this.setStatus_(e.status.FULL):this.setStatus_(e.status.DEFAULT):this.status_===e.status.FULL&&(n>45?this.setStatus_(e.status.COLLAPSED):n>0?this.setStatus_(e.status.DEFAULT):this.setStatus_(e.status.FULL)):this.setStatus_(this.status_)}},{key:"getCoordinate",value:function(){return this.coord_}},{key:"setCoordinate",value:function(t){this.coord_=t,v(this.element_)||this.getImpl().show(t)}},{key:"destroy",value:function(){this.tabs_.length=0,this.coord_=null,this.fire("destroy")}}])&&Nv(r.prototype,n),i&&Nv(r,i),e}();zv.status={},zv.status.COLLAPSED="m-collapsed",zv.status.DEFAULT="m-default",zv.status.FULL="m-full";var Uv=zv,qv=r(97),Vv=r.n(qv);function Yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Wv=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text_=e,this.coord_=[r.x,r.y],this.popup_=null,this.facadeMap_=null,this.panMapIfOutOfView=n}var e,r,n;return e=t,(r=[{key:"show",value:function(t){this.facadeMap_=t;var e=rF(Vv.a,{vars:{info:this.text_},parseToHtml:!1});t.removePopup(),this.popup_=new Uv({panMapIfOutOfView:this.panMapIfOutOfView}),this.popup_.addTab({icon:"g-cartografia-comentarios",title:"Información",content:e}),t.addPopup(this.popup_,this.coord_)}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"getPopup",value:function(){return this.popup_}},{key:"getCoordinate",value:function(){var t=this.coord;return v(t)&&(t=this.getPopup().getCoordinate()),t}},{key:"setCoordinate",value:function(t){var e=this.getPopup();v(e)||e.setCoordinate(t)}}])&&Yv(e.prototype,r),n&&Yv(e,n),t}();function Xv(t){return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hv(t,e){return!e||"object"!==Xv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kv(t){return(Kv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $v(t,e){return($v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jv=function(t){function e(t,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new Wv(t,r,n);return Hv(this,Kv(e).call(this,i))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$v(t,e)}(e,ba),r=e,(n=[{key:"hide",value:function(){this.getImpl().hide()}},{key:"show",value:function(t){this.getImpl().show(t)}},{key:"getPopup",value:function(){return this.getImpl().getPopup()}},{key:"getCoordinate",value:function(){return this.getImpl().getCoordinate()}},{key:"setCoordinate",value:function(t){this.getImpl().coordinate=t}}])&&Zv(r.prototype,n),i&&Zv(r,i),e}();Jv.POPUP_TEMPLATE="label_popup.html";var Qv=Jv;function t_(t){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e_=function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(e)&&wa(Sa("exception").no_param),this.container=function t(e){var r;return w(e)?r=document.getElementById(e):b(e)?v(e.id)?v(e.container)?wa(Sa("exception").no_container):r=t(e.container):r=document.getElementById(e.id):wa("El tipo del parámetro container no es válido: ".concat(t_(e))),v(r)&&wa(Sa("exception").no_id_container),r}(e),this.layers=(w(r=e)?n=S("layers",r):b(r)?n=r.layers:wa("El tipo del parámetro container no es válido: ".concat(t_(r))),n),this.wmc=function(t){var e;return w(t)?(e=S("wmc",t),v(e)&&(e=S("wmcfile",t)),v(e)&&(e=S("wmcfiles",t))):b(t)?(e=t.wmc,v(e)&&(e=t.wmcfile),v(e)&&(e=t.wmcfiles)):wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.wms=function(t){var e;return w(t)?e=S("wms",t):b(t)?e=t.wms:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.wmts=function(t){var e;return w(t)?e=S("wmts",t):b(t)?e=t.wmts:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.kml=function(t){var e;return w(t)?e=S("kml",t):b(t)?e=t.kml:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.controls=function(t){var e;return w(t)?e=S("controls",t):b(t)?e=t.controls:wa("El tipo del parámetro controls no es válido: ".concat(t_(t))),e}(e),this.getfeatureinfo=function(t){var e;return w(t)?e=S("getfeatureinfo",t):b(t)?(e=t.getfeatureinfo,!d(e)&&v(e)&&(e="plain")):wa("El tipo del parámetro controls no es válido: ".concat(t_(t))),e}(e),this.maxExtent=function(t){var e;return w(t)?(e=S("maxExtent",t),v(e)&&(e=S("maxextent",t))):b(t)?(e=t.maxExtent,v(e)&&(e=t.maxextent)):wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.bbox=function(t){var e;return w(t)?e=S("bbox",t):b(t)?e=t.bbox:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.zoom=function(t){var e;return w(t)?e=S("zoom",t):b(t)?e=t.zoom:wa("El tipo del parámetro zoom no es válido: ".concat(t_(t))),e}(e),this.minZoom=function(t){var e;return w(t)?e=S("minZoom",t):b(t)?e=t.minZoom:wa("El tipo del parámetro minZoom no es válido: ".concat(t_(t))),e}(e),this.maxZoom=function(t){var e;return w(t)?e=S("maxZoom",t):b(t)?e=t.maxZoom:wa("El tipo del parámetro maxZoom no es válido: ".concat(t_(t))),e}(e),this.center=function(t){var e;return w(t)?e=S("center",t):b(t)?e=t.center:wa("El tipo del parámetro center no es válido: ".concat(t_(t))),e}(e),this.resolutions=function(t){var e;return w(t)?e=S("resolutions",t):b(t)?e=t.resolutions:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.projection=function(t){var e;return w(t)?e=S("projection",t):b(t)?e=t.projection:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.label=function(t){var e;return w(t)?e=S("label",t):b(t)?e=t.label:wa("El tipo del parámetro container no es válido: ".concat(t_(t))),e}(e),this.ticket=function(t){var e;return w(t)?e=S("ticket",t):b(t)?e=t.ticket:wa("El tipo del parámetro ticket no es válido: ".concat(t_(t))),e}(e)};function r_(t){return(r_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n_(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o_(t,e){return!e||"object"!==r_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a_(t){return(a_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s_(t,e){return(s_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o_(this,a_(e).call(this,r))).options_=t,n.canvas_=document.createElement("canvas"),n.updateCanvasPromise_=null,n.layer_=null,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s_(t,e)}(e,ba),r=e,i=[{key:"setValue",value:function(t,r,n){var i=n,o=t,a=m(r)?r:r.split("."),s=a.length,u=a[0];1===s?(m(i)?i=n_(i):b(i)&&(i=Object.assign({},i)),o[u]=i):s>1&&(v(o[u])&&(o[u]={}),e.setValue(o[u],a.slice(1,s),i))}},{key:"deserialize",value:function(t){var e=decodeURIComponent(escape(window.atob(t))),r=JSON.parse(e),n=r.parameters,i=r.deserializedMethod;return new Function("serializedParams","return ".concat(i,"(serializedParams)"))(n)}}],(n=[{key:"apply",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"unapply",value:function(t){}},{key:"get",value:function(t){var r;if(r=this.options_[t],v(r)){var n=t.split(".");n.length>1&&(r=n.reduce(function(t,r){var n;return v(t)||(n=t[r],t instanceof e&&(n=t.get(r))),n},this))}return r}},{key:"set",value:function(t,r){var n=this.get(t);return e.setValue(this.options_,t,r),v(this.layer_)||this.getImpl().updateFacadeOptions(this.options_),v(this.feature_)||this.applyToFeature(this.feature_),this.fire("change",[t,n,r]),this.refresh(),this}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;v(t)||(this.layer_=t),v(this.layer_)||(this.apply(this.layer_),this.updateCanvas())}},{key:"getOptions",value:function(){return this.options_}},{key:"toImage",value:function(){var t,e=this;if(v(this.updateCanvasPromise_))if(v(this.options_.icon)||v(this.options_.icon.src))t=this.canvas_.toDataURL("png");else{var r=new Image;r.crossOrigin="Anonymous";var n=this.canvas_;r.onload=function(){n.getContext("2d").drawImage(e,0,0,50,50)},r.src=this.options_.icon.src,t=this.canvas_.toDataURL("png")}else t=this.updateCanvasPromise_.then(function(){return e.canvas_.toDataURL("png")});return t}},{key:"updateCanvas",value:function(){this.updateCanvasPromise_=this.getImpl().updateCanvas(this.canvas_)}},{key:"equals",value:function(t){return this.constructor===t.constructor}},{key:"clone",value:function(){var t={};X(t,this.options_);var e=new(0,this.getImpl().constructor)(t);return new this.constructor(t,e)}},{key:"toJSON",value:function(){return{parameters:[H(this.getOptions())],deserializedMethod:this.getDeserializedMethod_()}}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this))))}},{key:"canvas",get:function(){return this.canvas_}}])&&i_(r.prototype,n),i&&i_(r,i),e}(),l_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c_="renderOrder",h_=function(t){function e(e){var r=this,n=e||{},i=at({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return l_(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(c_)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(c_,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Mo,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var r;Array.isArray(t)?r=t:(Ut("function"==typeof t.getZIndex,41),r=[t]),e=function(){return r}}return e}(this.style_),this.changed()},e}(sh),f_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},p_=[f_.FILL],d_=[f_.STROKE],y_=[f_.BEGIN_PATH],g_=[f_.CLOSE_PATH],m_=f_,v_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return v_(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,r,n,i,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var u,l,c,h=t[e],f=t[e+1],p=this.tmpCoordinate_,d=!0;for(u=e+n;u<r;u+=n)p[0]=t[u],p[1]=t[u+1],(c=Jt(s,p))!==l?(d&&(this.coordinates[a++]=h,this.coordinates[a++]=f),this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):c===Vt.INTERSECTING?(this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):d=!0,h=p[0],f=p[1],l=c;return(i&&d||u===e+n)&&(this.coordinates[a++]=h,this.coordinates[a++]=f),a},e.prototype.drawCustomCoordinates_=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatCoordinates(t,e,s,n,!1,!1);i.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(t,e);var n,i,o,a,s,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==De.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var f=0,p=h.length;f<p;++f){var d=[];s=this.drawCustomCoordinates_(n,s,h[f],l,d),a.push(d)}this.instructions.push([m_.CUSTOM,c,a,t,r,un])}else u==De.POLYGON||u==De.MULTI_LINE_STRING?(o=[],n=u==De.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([m_.CUSTOM,c,o,t,r,sn])):u==De.LINE_STRING||u==De.MULTI_POINT?(n=t.getFlatCoordinates(),i=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([m_.CUSTOM,c,i,t,r,an])):u==De.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),i=this.coordinates.length,this.instructions.push([m_.CUSTOM,c,i,t,r]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var r=t.getExtent();this.beginGeometryInstruction1_=[m_.BEGIN_GEOMETRY,e,0,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[m_.BEGIN_GEOMETRY,e,0,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,i=e.length,o=-1;for(t=0;t<i;++t)(n=(r=e[t])[0])==m_.END_GEOMETRY?o=t:n==m_.BEGIN_GEOMETRY&&(r[2]=t,mt(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=Mi(n||"#000")}else r.fillStyle=void 0;if(e){var i=e.getColor();r.strokeStyle=Mi(i||"#000");var o=e.getLineCap();r.lineCap=void 0!==o?o:"round";var a=e.getLineDash();r.lineDash=a?a.slice():Ji;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:"round";var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[m_.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[m_.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||i!=t.currentLineDash&&!bt(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[m_.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Xt(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Wt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(wf),b_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),w_=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return b_(e,t),e.prototype.drawCoordinates_=function(t,e,r,n){return this.appendFlatCoordinates(t,e,r,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([m_.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([m_.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([m_.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([m_.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=r[0],this.anchorY_=r[1],this.declutterGroups_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(__),x_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E_=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return x_(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var i=this.coordinates.length,o=this.appendFlatCoordinates(t,e,r,n,!1,!1),a=[m_.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([m_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],y_);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(d_),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([m_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],y_);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,o[l],s);this.hitDetectionInstructions.push(d_),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(d_),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(d_),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(y_)},e}(__),S_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O_=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return S_(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(y_),this.hitDetectionInstructions.push(y_);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,n,!0,!a),f=[m_.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(g_),this.hitDetectionInstructions.push(g_)),e=l}return o&&(this.instructions.push(p_),this.hitDetectionInstructions.push(p_)),a&&(this.instructions.push(d_),this.hitDetectionInstructions.push(d_)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([m_.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([m_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var u=[m_.CIRCLE,s];this.instructions.push(y_,u),this.hitDetectionInstructions.push(y_,u),void 0!==r.fillStyle&&(this.instructions.push(p_),this.hitDetectionInstructions.push(p_)),void 0!==r.strokeStyle&&(this.instructions.push(d_),this.hitDetectionInstructions.push(d_)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([m_.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([m_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([m_.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([m_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,o[l],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,i=r.length;n<i;++n)r[n]=Mn(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(__);function T_(t,e,r,n,i){var o,a,s,u,l,c,h,f,p,d=r,y=r,g=0,m=0,v=r;for(o=r;o<n;o+=i){var _=e[o],b=e[o+1];void 0!==u&&(f=_-u,p=b-l,s=Math.sqrt(f*f+p*p),void 0!==c&&(m+=a,Math.acos((c*f+h*p)/(a*s))>t&&(m>g&&(g=m,d=v,y=o),m=0,v=o-i)),a=s,c=f,h=p),u=_,l=b}return(m+=s)>g?[v,o]:[d,y]}var M_={POINT:"point",LINE:"line"},I_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P_={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},C_={Circle:O_,Default:__,Image:w_,LineString:E_,Polygon:O_,Text:function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return I_(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var o,a,s=this.coordinates.length,u=t.getType(),l=null,c=2,h=2;if(i.placement===M_.LINE){if(!xe(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(l=t.getFlatCoordinates(),h=t.getStride(),u==De.LINE_STRING)f=[l.length];else if(u==De.MULTI_LINE_STRING)f=t.getEnds();else if(u==De.POLYGON)f=t.getEnds().slice(0,1);else if(u==De.MULTI_POLYGON){var p=t.getEndss();for(f=[],o=0,a=p.length;o<a;++o)f.push(p[o][0])}this.beginGeometry(t,e);for(var d=i.textAlign,y=0,g=void 0,m=0,v=f.length;m<v;++m){if(null==d){var _=T_(i.maxAngle,l,y,f[m],h);y=_[0],g=_[1]}else g=f[m];for(o=y;o<g;o+=h)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,y=f[m];var b=this.declutterGroups_?0===m?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(s,c,b),s=c}this.endGeometry(e)}else{var w=null;switch(i.overflow||(w=[]),u){case De.POINT:case De.MULTI_POINT:c=(l=t.getFlatCoordinates()).length;break;case De.LINE_STRING:l=t.getFlatMidpoint();break;case De.CIRCLE:l=t.getCenter();break;case De.MULTI_LINE_STRING:c=(l=t.getFlatMidpoints()).length;break;case De.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||w.push(l[2]/this.resolution),h=3;break;case De.MULTI_POLYGON:var x=t.getFlatInteriorPoints();for(l=[],o=0,a=x.length;o<a;o+=3)i.overflow||w.push(x[o+2]/this.resolution),l.push(x[o],x[o+1]);if(0==(c=l.length))return}c=this.appendFlatCoordinates(l,0,c,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var E=this.pixelRatio;this.instructions.push([m_.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==Qi?Qi:i.padding.map(function(t){return t*E}),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.hitDetectionInstructions.push([m_.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e,r){var n=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,l=P_[i.textBaseline],c=this.textOffsetY_*u,h=this.text_,f=i.scale,p=n?n.lineWidth*f/2:0;this.instructions.push([m_.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,u,c,o,p*u,h,a,1]),this.hitDetectionInstructions.push([m_.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,1,c,o,p,h,a,1/u])},e.prototype.setTextStyle=function(t,e){var r,n,i;if(t){this.declutterGroups_=e;var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Mi(o.getColor()||"#000")):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||"round",i.lineDash=s?s.slice():Ji,i.lineDashOffset=void 0===u?0:u,i.lineJoin=a.getLineJoin()||"round",i.lineWidth=void 0===l?1:l,i.miterLimit=void 0===c?10:c,i.strokeStyle=Mi(a.getColor()||"#000")}else i=null,this.textStrokeState_=i;r=this.textState_;var h=t.getFont()||"10px sans-serif";so(h);var f=t.getScale();r.overflow=t.getOverflow(),r.font=h,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||"middle",r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||Qi,r.scale=void 0===f?1:f;var p=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===g?0:g,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:nt(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+nt(n.fillStyle):""}else this.text_=""},e}(__)},L_=function(){function t(t,e,r,n,i){this.declutter_=i,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];void 0===i&&(i=new(0,C_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i);return i},t}();function k_(t,e,r,n,i,o,a,s,u,l,c){for(var h,f,p=[],d=t[e]>t[r-n],y=i.length,g=t[e],m=t[e+1],v=t[e+=n],_=t[e+1],b=0,w=Math.sqrt(Math.pow(v-g,2)+Math.pow(_-m,2)),x=!1,E=0;E<y;++E){for(var S=i[h=d?y-E-1:E],O=s*u(l,S,c),T=o+O/2;e<r-n&&b+w<T;)g=v,m=_,v=t[e+=n],_=t[e+1],b+=w,w=Math.sqrt(Math.pow(v-g,2)+Math.pow(_-m,2));var M=T-b,I=Math.atan2(_-m,v-g);if(d&&(I+=I>0?-Math.PI:Math.PI),void 0!==f){var P=I-f;if(x=x||0!==P,P+=P>Math.PI?-2*Math.PI:P<-Math.PI?2*Math.PI:0,Math.abs(P)>a)return null}f=I;var C=M/w,L=je(g,v,C),k=je(m,_,C);p[h]=[L,k,O/2,I,S],o+=O}return x?p:[[p[0][0],p[0][1],p[0][2],p[0][3],i]]}var R_=r(28),A_=r.n(R_),N_=[1/0,1/0,-1/0,-1/0],F_=[1,0,0,1,0,0],j_=[],D_=[],G_=[],B_=[],z_=function(){function t(t,e,r,n){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,n){var i=t+e+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=s.scale*u,c=P_[s.textAlign||"center"],h=n&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],y=function(t,e,r){for(var n=e.length,i=0,o=0;o<n;++o){var a=co(t,e[o]);i=Math.max(i,a),r.push(a)}return i}(s.font,f,d),g=uo(s.font),m=g*p,v=y+h,_=[],b={width:Math.ceil((v+2)*l),height:Math.ceil((m+h)*l),contextInstructions:_};(1!=l&&_.push("scale",[l,l]),_.push("font",s.font),n)&&(_.push("strokeStyle",o.strokeStyle),_.push("lineWidth",h),_.push("lineCap",o.lineCap),_.push("lineJoin",o.lineJoin),_.push("miterLimit",o.miterLimit),(Ri?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(_.push("setLineDash",[o.lineDash]),_.push("lineDashOffset",o.lineDashOffset)));r&&_.push("fillStyle",a.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");var w,x=.5-c,E=c*v+x*h;if(n)for(w=0;w<p;++w)_.push("strokeText",[f[w],E+x*d[w],.5*(h+g)+w*g]);if(r)for(w=0;w<p;++w)_.push("fillText",[f[w],E+x*d[w],.5*(h+g)+w*g]);return this.labels_[i]=b,b},t.prototype.replayTextBackground_=function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,y,g,m){var v=g||m;e-=i*=f,r-=o*=f;var _=d+l>n.width?n.width-l:d,b=s+c>n.height?n.height-c:s,w=y[3]+_*f+y[1],x=y[0]+b*f+y[2],E=e-y[3],S=r-y[0];(v||0!==h)&&(j_[0]=E,B_[0]=E,j_[1]=S,D_[1]=S,D_[0]=E+w,G_[0]=D_[0],G_[1]=S+x,B_[1]=G_[1]);var O=null;if(0!==h){var T=e+i,M=r+o;O=zr(F_,T,M,1,1,h,-T,-M),Gr(F_,j_),Gr(F_,D_),Gr(F_,G_),Gr(F_,B_),te(Math.min(j_[0],D_[0],G_[0],B_[0]),Math.min(j_[1],D_[1],G_[1],B_[1]),Math.max(j_[0],D_[0],G_[0],B_[0]),Math.max(j_[1],D_[1],G_[1],B_[1]),N_)}else te(E,S,E+w,S+x,N_);var I=t.canvas,P=m?m[2]*f/2:0,C=N_[0]-P<=I.width&&N_[2]+P>=0&&N_[1]-P<=I.height&&N_[3]+P>=0;if(p&&(e=Math.round(e),r=Math.round(r)),a){if(!C&&1==a[4])return;oe(a,N_);var L=C?[t,O?O.slice(0):null,u,n,l,c,_,b,e,r,f]:null;L&&(v&&L.push(g,m,j_.slice(0),D_.slice(0),G_.slice(0),B_.slice(0)),a.push(L))}else C&&(v&&this.replayTextBackground_(t,j_,D_,G_,B_,g,m),po(t,O,u,n,l,c,_,b,e,r,f))},t.prototype.fill_=function(t){if(this.alignFill_){var e=Gr(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,r,n){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new A_.a(9)),!n.collides(o)){n.insert(o);for(var a=5,s=t.length;a<s;++a){var u=t[a],l=u[0],c=l.globalAlpha;c!==r&&(l.globalAlpha=r),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),po.apply(void 0,u),c!==r&&(l.globalAlpha=c)}}t.length=5,ee(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,n){var i=this.textStates[e],o=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=P_[i.textAlign||"center"],l=P_[i.textBaseline||"middle"],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale)+2*(.5-u)*c,anchorY:l*o.height/s+2*(.5-l)*c}},t.prototype.execute_=function(t,e,r,n,i,o){var a,s,u;this.declutterItems.length=0,this.pixelCoordinates_&&bt(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Me(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),s=this.renderedTransform_,u=e,s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5]);for(var l,c,h,f,p,d,y,g,m,v,_,b,w,x,E,S,O,T=0,M=r.length,I=0,P=0,C=0,L=null,k=null,R=this.coordinateCache_,A=this.viewRotation_,N=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,F={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},j=this.instructions!=r||this.overlaps?0:200;T<M;){var D=r[T];switch(D[0]){case m_.BEGIN_GEOMETRY:(E=D[1]).getGeometry()?void 0===o||xe(o,D[3])?++T:T=D[2]+1:T=D[2];break;case m_.BEGIN_PATH:P>j&&(this.fill_(t),P=0),C>j&&(t.stroke(),C=0),P||C||(t.beginPath(),f=NaN,p=NaN),++T;break;case m_.CIRCLE:var G=a[I=D[1]],B=a[I+1],z=a[I+2]-G,U=a[I+3]-B,q=Math.sqrt(z*z+U*U);t.moveTo(G+q,B),t.arc(G,B,q,0,2*Math.PI,!0),++T;break;case m_.CLOSE_PATH:t.closePath(),++T;break;case m_.CUSTOM:I=D[1],l=D[2];var V=D[3],Y=D[4],W=6==D.length?D[5]:void 0;F.geometry=V,F.feature=E,T in R||(R[T]=[]);var X=R[T];W?W(a,I,l,2,X):(X[0]=a[I],X[1]=a[I+1],X.length=2),Y(X,F),++T;break;case m_.DRAW_IMAGE:I=D[1],l=D[2],v=D[3],c=D[4],h=D[5],m=i?null:D[6];var Z=D[7],H=D[8],K=D[9],$=D[10],J=D[11],Q=D[12],tt=D[13],et=D[14];if(!v&&D.length>=19){_=D[18],b=D[19],w=D[20],x=D[21];var rt=this.drawLabelWithPointPlacement_(_,b,w,x);v=rt.label,D[3]=v;var nt=D[22];c=(rt.anchorX-nt)*this.pixelRatio,D[4]=c;var it=D[23];h=(rt.anchorY-it)*this.pixelRatio,D[5]=h,Z=v.height,D[7]=Z,et=v.width,D[14]=et}var ot=void 0;D.length>24&&(ot=D[24]);var at=void 0,st=void 0,ut=void 0;D.length>16?(at=D[15],st=D[16],ut=D[17]):(at=Qi,st=!1,ut=!1),J&&N?Q+=A:J||N||(Q-=A);for(var lt=0,ct=0;I<l;I+=2)if(!(ot&&ot[lt++]<et/this.pixelRatio)){if(m){var ht=Math.floor(ct);m.length<ht+1&&((g=[1/0,1/0,-1/0,-1/0]).push(m[0][4]),m.push(g)),g=m[ht]}this.replayImageOrLabel_(t,a[I],a[I+1],v,c,h,g,Z,H,K,$,Q,tt,n,et,at,st?L:null,ut?k:null),g&&(ct===Math.floor(ct)&&this.declutterItems.push(this,g,E),ct+=1/g[4])}++T;break;case m_.DRAW_CHARS:var ft=D[1],pt=D[2],dt=D[3];g=i?null:D[4];var yt=D[5];x=D[6];var gt=D[7],mt=D[8],vt=D[9];w=D[10];var _t=D[11];_=D[12],b=D[13];var wt=D[14],xt=this.textStates[b],Et=xt.font,St=xt.scale*mt,Ot=void 0;Et in this.widths_?Ot=this.widths_[Et]:(Ot={},this.widths_[Et]=Ot);var Tt=Sn(a,ft,pt,2),Mt=St*ho(Et,_,Ot);if(yt||Mt<=Tt){var It=this.textStates[b].textAlign,Pt=k_(a,ft,pt,2,_,(Tt-Mt)*P_[It],gt,St,ho,Et,Ot);if(Pt){var Ct=void 0,Lt=void 0,kt=void 0,Rt=void 0,At=void 0;if(w)for(Ct=0,Lt=Pt.length;Ct<Lt;++Ct)kt=(At=Pt[Ct])[4],Rt=this.createLabel(kt,b,"",w),c=At[2]+_t,h=dt*Rt.height+2*(.5-dt)*_t-vt,this.replayImageOrLabel_(t,At[0],At[1],Rt,c,h,g,Rt.height,1,0,0,At[3],wt,!1,Rt.width,Qi,null,null);if(x)for(Ct=0,Lt=Pt.length;Ct<Lt;++Ct)kt=(At=Pt[Ct])[4],Rt=this.createLabel(kt,b,x,""),c=At[2],h=dt*Rt.height-vt,this.replayImageOrLabel_(t,At[0],At[1],Rt,c,h,g,Rt.height,1,0,0,At[3],wt,!1,Rt.width,Qi,null,null)}}this.declutterItems.push(this,g,E),++T;break;case m_.END_GEOMETRY:if(void 0!==i){var Nt=i(E=D[1]);if(Nt)return Nt}++T;break;case m_.FILL:j?P++:this.fill_(t),++T;break;case m_.MOVE_TO_LINE_TO:for(I=D[1],l=D[2],S=a[I],y=(O=a[I+1])+.5|0,(d=S+.5|0)===f&&y===p||(t.moveTo(S,O),f=d,p=y),I+=2;I<l;I+=2)d=(S=a[I])+.5|0,y=(O=a[I+1])+.5|0,I!=l-2&&d===f&&y===p||(t.lineTo(S,O),f=d,p=y);++T;break;case m_.SET_FILL_STYLE:L=D,this.alignFill_=D[2],P&&(this.fill_(t),P=0,C&&(t.stroke(),C=0)),t.fillStyle=D[1],++T;break;case m_.SET_STROKE_STYLE:k=D,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,D),++T;break;case m_.STROKE:j?C++:t.stroke(),++T;break;default:++T}}P&&this.fill_(t),C&&t.stroke()},t.prototype.execute=function(t,e,r,n){this.viewRotation_=r,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,r,n,i){return this.viewRotation_=r,this.execute_(t,e,this.hitDetectionInstructions,!0,n,i)},t}(),U_=[Sf.POLYGON,Sf.CIRCLE,Sf.LINE_STRING,Sf.IMAGE,Sf.TEXT,Sf.DEFAULT],q_=function(){function t(t,e,r,n,i,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(i)}return t.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var i in n){var o=n[i];r[i]=new z_(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o){var a=2*(n=Math.round(n))+1,s=zr(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Fi(a,a));var u,l=this.hitDetectionContext_;l.canvas.width!==a||l.canvas.height!==a?(l.canvas.width=a,l.canvas.height=a):l.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(ae(u=[1/0,1/0,-1/0,-1/0],t),Wt(u,e*(this.renderBuffer_+n),u));var c,h=function(t){if(void 0!==V_[t])return V_[t];for(var e=2*t+1,r=new Array(e),n=0;n<e;n++)r[n]=new Array(e);var i=t,o=0,a=0;for(;i>=o;)Y_(r,t+i,t+o),Y_(r,t+o,t+i),Y_(r,t-o,t+i),Y_(r,t-i,t+o),Y_(r,t-i,t-o),Y_(r,t-o,t-i),Y_(r,t+o,t-i),Y_(r,t+i,t-o),2*((a+=1+2*++o)-i)+1>0&&(a+=1-2*(i-=1));return V_[t]=r,r}(n);function f(t){for(var e=l.getImageData(0,0,a,a).data,r=0;r<a;r++)for(var n=0;n<a;n++)if(h[r][n]&&e[4*(n*a+r)+3]>0){var s=void 0;return(!o||c!=Sf.IMAGE&&c!=Sf.TEXT||-1!==o.indexOf(t))&&(s=i(t)),s||void l.clearRect(0,0,a,a)}}var p,d,y,g,m,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(dt),p=v.length-1;p>=0;--p){var _=v[p].toString();for(y=this.executorsByZIndex_[_],d=U_.length-1;d>=0;--d)if(void 0!==(g=y[c=U_[d]])&&(m=g.executeHitDetection(l,s,r,f,u)))return m}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],a=[r,n,r,o,i,o,i,n];return Me(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return lt(this.executorsByZIndex_)},t.prototype.execute=function(t,e,r,n,i,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(dt),this.maxExtent_&&(t.save(),this.clip(t,e));var s,u,l,c,h,f,p=i||U_;for(s=0,u=a.length;s<u;++s){var d=a[s].toString();for(h=this.executorsByZIndex_[d],l=0,c=p.length;l<c;++l){var y=p[l];if(void 0!==(f=h[y]))if(!o||y!=Sf.IMAGE&&y!=Sf.TEXT)f.execute(t,e,r,n);else{var g=o[d];g?g.push(f,e.slice(0)):o[d]=[f,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),V_={0:[[!0]]};function Y_(t,e,r){var n,i=Math.floor(t.length/2);if(e>=i)for(n=i;n<e;n++)t[n][r]=!0;else if(e<i)for(n=e+1;n<i;n++)t[n][r]=!0}function W_(t,e,r,n,i,o){for(var a=Object.keys(t).map(Number).sort(dt),s=0,u=a.length;s<u;++s)for(var l=t[a[s].toString()],c=void 0,h=0,f=l.length;h<f;){var p=l[h++];p!==c&&(c=p,o.push({items:p.declutterItems,opacity:n}));var d=l[h++];p.execute(e,d,r,i)}}var X_=q_;function Z_(t,e,r,n,i,o,a){var s=Fi(t[0]/2,t[1]/2);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new Ef(s,.5,i,null,a),c=r.length,h=Math.floor(16777215/c),f={},p=1;p<=c;++p){var d=r[p-1],y=d.getStyleFunction()||n;if(n){var g=y(d,o);if(g){Array.isArray(g)||(g=[g]);for(var m="#"+("000000"+(p*h).toString(16)).slice(-6),v=0,_=g.length;v<_;++v){var b=g[v],w=b.clone(),x=w.getFill();x&&x.setColor(m);var E=w.getStroke();E&&E.setColor(m),w.setText(void 0);var S=b.getImage();if(S){var O=S.getImageSize();if(!O)continue;var T=document.createElement("canvas");T.width=O[0],T.height=O[1];var M=T.getContext("2d",{alpha:!1});M.fillStyle=m;var I=M.canvas;M.fillRect(0,0,I.width,I.height),Fi(O?O[0]:I.width,O?O[1]:I.height).drawImage(I,0,0),w.setImage(new Vo({img:I,imgSize:O,anchor:S.getAnchor(),anchorXUnits:Lo.PIXELS,anchorYUnits:Lo.PIXELS,offset:S.getOrigin(),size:S.getSize(),opacity:S.getOpacity(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}var P=Number(w.getZIndex());(R=f[P])||(R={},f[P]=R,R[De.POLYGON]=[],R[De.CIRCLE]=[],R[De.LINE_STRING]=[],R[De.POINT]=[]);var C=w.getGeometryFunction()(d);C&&xe(i,C.getExtent())&&R[C.getType().replace("Multi","")].push(C,w)}}}}for(var L=Object.keys(f).map(Number).sort(dt),k=(p=0,L.length);p<k;++p){var R=f[L[p]];for(var A in R){var N=R[A];for(v=0,_=N.length;v<_;v+=2){l.setStyle(N[v+1]);for(var F=0,j=e.length;F<j;++F)l.setTransform(e[F]),l.drawGeometry(N[v])}}}return document.body.appendChild(s.canvas),s.getImageData(0,0,u.width,u.height)}function H_(t,e,r){var n=[];if(r){var i=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*r.width),o=r.data[i],a=r.data[i+1],s=r.data[i+2]+256*(a+256*o),u=Math.floor(16777215/e.length);s&&s%u==0&&n.push(e[s/u-1])}return n}var K_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$_=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return K_(e,t),e.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){Dr(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),Ur(this.inversePixelTransform,this.pixelTransform);var i=qr(this.pixelTransform);this.useContainer(e,i,n.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var u=Math.round(t.size[0]*r),l=Math.round(t.size[1]*r);a.width!=u||a.height!=l?(a.width=u,a.height=l,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,l),this.preRender(o,t);var c=t.extent,h=t.viewState,f=h.center,p=h.resolution,d=h.projection,y=h.rotation,g=d.getExtent(),m=this.getLayer().getSource(),v=!1;if(n.extent){var _=Ar(n.extent,d);(v=!Kt(_,t.extent)&&xe(_,t.extent))&&this.clip(o,t,_)}var b=t.viewHints,w=!(b[gc]||b[mc]),x=this.getRenderTransform(f,p,y,r,u,l,0),E=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,x,y,w,void 0,E),m.getWrapX()&&d.canWrapX()&&!Kt(g,c)){for(var S=c[0],O=we(g),T=0,M=void 0;S<g[0];){M=O*--T;var I=this.getRenderTransform(f,p,y,r,u,l,M);s.execute(o,I,y,w,void 0,E),S+=O}for(T=0,S=c[2];S>g[2];){M=O*++T;var P=this.getRenderTransform(f,p,y,r,u,l,M);s.execute(o,P,y,w,void 0,E),S-=O}}if(E){var C=t.viewHints;W_(E,o,y,1,!(C[gc]||C[mc]),t.declutterItems)}v&&o.restore(),this.postRender(o,t);var L=n.opacity,k=this.container;return L!==parseFloat(k.style.opacity)&&(k.style.opacity=1===L?"":L),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];Gr(this.pixelTransform,n);var i=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,u=this.renderedExtent_,l=this.getLayer(),c=[],h=n[0]/2,f=n[1]/2;c.push(this.getRenderTransform(i,o,a,.5,h,f,0).slice());var p=l.getSource(),d=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!Kt(d,u)){for(var y=u[0],g=we(d),m=0,v=void 0;y<d[0];)v=g*--m,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),y+=g;for(m=0,y=u[2];y>d[2];)v=g*++m,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),y-=g}this.hitDetectionImageData_=Z_(n,c,this.renderedFeatures_,l.getStyleFunction(),u,o,a)}e(H_(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(this.replayGroup_){var o=e.viewState.resolution,a=e.viewState.rotation,s=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,r,function(t){var e=nt(t);if(!(e in u))return u[e]=!0,n(t,s)},s.getDeclutter()?i:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var n=t.viewHints[gc],i=t.viewHints[mc],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,u=t.viewState,l=u.projection,c=u.resolution,h=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=Mf);var y=u.center.slice(),g=Wt(s,p*c),m=[g.slice()],v=l.getExtent();if(r.getWrapX()&&l.canWrapX()&&!Kt(v,t.extent)){var _=we(v),b=Math.max(we(g)/2,_);g[0]=v[0]-b,g[2]=v[2]+b,Ac(y,l);var w=Te(m[0],l);w[0]<v[0]&&w[2]<v[2]?m.push([w[0]+_,w[1],w[2]+_,w[3]]):w[0]>v[0]&&w[2]>v[2]&&m.push([w[0]-_,w[1],w[2]-_,w[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&Kt(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x,E=new L_(Pf(c,h),g,c,h,e.getDeclutter()),S=Cr();if(S){for(var O=0,T=m.length;O<T;++O)r.loadFeatures(Rr(m[O],l),c,S);x=xr(S,l)}else for(O=0,T=m.length;O<T;++O)r.loadFeatures(m[O],c,l);var M=If(c,h),I=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,c)),r){var i=this.renderFeature(t,M,r,E,x);this.dirty_=this.dirty_||i}}.bind(this),P=Rr(g,l),C=r.getFeaturesInExtent(P);d&&C.sort(d);for(O=0,T=C.length;O<T;++O)I(C[O]);this.renderedFeatures_=C;var L=E.finish(),k=new X_(g,c,h,r.getOverlaps(),L,e.getRenderBuffer());return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=g,this.renderedRotation_=u.rotation,this.renderedCenter_=y,this.renderedProjection_=l,this.replayGroup_=k,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=Cf(n,t,r[a],e,this.boundHandleStyleImageChange_,i)||o;else o=Cf(n,t,r,e,this.boundHandleStyleImageChange_,i);return o},e}(dd),J_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q_=function(t){function e(e){return t.call(this,e)||this}return J_(e,t),e.prototype.createRenderer=function(){return new $_(this)},e}(h_),tb=!1;function eb(t,e,r,n){return function(i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,o,a):t,!0),e.getType()==ai.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=tb,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),u=void 0;o==ai.JSON||o==ai.TEXT?u=s.responseText:o==ai.XML?(u=s.responseXML)||(u=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==ai.ARRAY_BUFFER&&(u=s.response),u?r.call(this,e.readFeatures(u,{extent:i,featureProjection:a}),e.readProjection(u)):n.call(this)}else n.call(this)}.bind(this),s.onerror=function(){n.call(this)}.bind(this),s.send()}}function rb(t,e){return eb(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},St)}function nb(t,e){return[[-1/0,-1/0,1/0,1/0]]}var ib={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},ob=function(){function t(t){this.rbush_=new A_.a(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[nt(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var o=t[n],a=e[n],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=s,this.items_[nt(a)]=s}this.rbush_.load(r)},t.prototype.remove=function(t){var e=nt(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[nt(e)];ie([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return lt(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return te(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),ab=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sb=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return ab(e,t),e}(Mt),ub=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,projection:void 0,state:Zc.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=St,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(Ut(r.format_,7),r.loader_=rb(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:nb;var i,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=a?new ob:null,r.loadedExtentsRtree_=new ob,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(i=n.features).getArray()),a||void 0!==i||(i=new Bl(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==i&&r.bindFeaturesCollection_(i),r}return ab(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=nt(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new sb(ib.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[ct(e,Ct.CHANGE,this.handleFeatureChange_,this),ct(e,ot.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&(Ut(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],i=0,o=t.length;i<o;i++){var a=nt(u=t[i]);this.addToIndex_(a,u)&&r.push(u)}i=0;for(var s=r.length;i<s;i++){var u;a=nt(u=r[i]);this.setupChangeEvents_(a,u);var l=u.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(u)}else this.nullGeometryFeatures_[a]=u}this.featuresRtree_&&this.featuresRtree_.load(e,n);i=0;for(var h=r.length;i<h;i++)this.dispatchEvent(new sb(ib.ADDFEATURE,r[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(ib.ADDFEATURE,function(r){e||(e=!0,t.push(r.feature),e=!1)}),this.addEventListener(ib.REMOVEFEATURE,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),t.addEventListener(Fl.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(Fl.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(ft)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new sb(ib.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),lt(this.nullGeometryFeatures_)||vt(t,ut(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||xt;return this.featuresRtree_.forEachInExtent(s,function(t){if(u(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(r,n,o,a))<l){i=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}}),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=nt(e),n=e.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new sb(ib.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:nt(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&lt(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){var n=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=i[t];n.forEachInExtent(s,function(t){return Kt(t.extent,s)})||(a.loader_.call(a,s,e,r),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==St)},a=this,s=0,u=i.length;s<u;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,function(r){if(ie(r.extent,t))return e=r,!0}),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=nt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=nt(t);this.featureChangeKeys_[e].forEach(ft),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new sb(ib.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Ut(this.format_,7),this.setLoader(rb(t,this.format_))},e}(Pg);function lb(t){return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cb(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fb(t,e){return!e||"object"!==lb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pb(t){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function db(t,e){return(db=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fb(this,pb(e).call(this,t,r))).facadeVector_=null,n.features_=[],n.postComposeEvtKey_=null,n.load_=!1,n.loaded_=!1,n.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,n.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,n.visibility=!1!==t.visibility,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&db(t,e)}(e,Gd),r=e,(n=[{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),t.on("change:proj",this.setProjection_.bind(this),this),this.ol3Layer=new Q_(this.vendorOptions_),this.updateSource_(),this.setVisible(this.visibility),this.map.getMapImpl().addLayer(this.ol3Layer),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom)}},{key:"updateSource_",value:function(){v(this.vendorOptions_.source)&&(v(this.ol3Layer.getSource())&&this.ol3Layer.setSource(new ub),this.redraw(),this.loaded_=!0,this.fire(Qf,[this.features_]))}},{key:"inRange",value:function(){return!0}},{key:"addFeatures",value:function(t,e){var r=this;t.forEach(function(t){var e=r.features_.find(function(e){return e.equals(t)});v(e)&&r.features_.push(t)}),e&&this.updateLayer_(),this.redraw()}},{key:"updateLayer_",value:function(){var t=this.facadeVector_.getStyle();v(t)||(t instanceof u_?this.facadeVector_.setStyle(t):t.apply(this.facadeVector_))}},{key:"getFeatures",value:function(t,e){var r=this.features_;return t||(r=e.execute(r)),r}},{key:"getFeatureById",value:function(t){return this.features_.filter(function(e){return e.getId()===t})[0]}},{key:"removeFeatures",value:function(t){this.features_=this.features_.filter(function(e){return!t.includes(e)}),this.redraw()}},{key:"redraw",value:function(){var t=this.getOL3Layer();if(!v(t)){var e=t.getSource();cb(e.getFeatures()).forEach(e.removeFeature,e);var r=this.facadeVector_.getFeatures();e.addFeatures(r.map(ua.facade2OLFeature))}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.getFeatures(t,e),n=aa.getFeaturesExtent(r,this.map.getProjection().code);return null===n&&(n=this.map.getProjection().getExtent()),n}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!v(n)){var i=n.getAttribute("vendor.mapea.click");_(i)&&i(r,n)}}},{key:"unselectFeatures",value:function(){}},{key:"setFacadeObj",value:function(t){this.facadeVector_=t}},{key:"setProjection_",value:function(t,e){if(t.code!==e.code){var r=yr(t.code),n=yr(e.code);this.facadeVector_.getFeatures().forEach(function(t){return t.getImpl().getOLFeature().getGeometry().transform(r,n)})}}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&this.constructor===t.constructor&&(r=!0),r}},{key:"refresh",value:function(){this.getOL3Layer().getSource().clear()}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}}])&&hb(r.prototype,n),i&&hb(r,i),e}(),gb="left",mb="center",vb="right",_b="justify",bb="top",wb="middle",xb="bottom",Eb="alphabetic",Sb="hanging",Ob="ideographic",Tb="#333",Mb=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new xo({color:Tb}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:M_.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();function Ib(t){return(Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cb(t,e){return!e||"object"!==Ib(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lb(t){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kb(t,e){return(kb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rb=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=0;return r.stroke&&(n=r.stroke.getWidth()),t=Cb(this,Lb(e).call(this,{radius:r.radius,fill:r.fill,rotation:r.rotation,rotateWithView:r.rotateWithView})),"number"==typeof r.opacity&&t.setOpacity(r.opacity),t.color_=r.color,t.fontSize_=r.fontSize||1,t.stroke_=r.stroke,t.fill_=r.fill,t.radius_=r.radius-n,t.form_=r.form||"none",t.gradient_=r.gradient,t.offset_=[r.offsetX?r.offsetX:0,r.offsetY?r.offsetY:0],t.glyph_=t.getGlyph(r.glyph)||"",t.renderMaker(),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kb(t,e)}(e,_o),r=e,i=[{key:"addDefs",value:function(t,r){var n=t;if("string"==typeof t&&(n={font:t,name:t,copyright:""}),!n.font||"string"!=typeof n.font)throw new Error("bad font def");var i=n.font;e.defs.fonts[i]=n,Object.keys(r).forEach(function(t){var i=r[t];"string"==typeof i&&1===i.length&&(i={char:i}),e.defs.glyphs[t]={font:n.font,char:i.char||"".concat(String.fromCharCode(i.code))||"",theme:i.theme||n.name,name:i.name||t,search:i.search||""}})}}],(n=[{key:"clone",value:function(){var t=new e({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setScale(this.getScale()),t.setGlyph(this.getGlyph()),t.renderMaker(),t}},{key:"setGlyph",value:function(t){this.glyph_=t}},{key:"getFill",value:function(){return this.fill_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getGlyph",value:function(t){var r=this.glyph_;return t&&(r=(r=e.defs.glyphs[t])||{font:"none",char:t.charAt(0),theme:"none",name:"none",search:""}),r}},{key:"getGlyphName",value:function(){var t=this,r="";return Object.keys(e.defs.glyphs).forEach(function(n){e.defs.glyph[n]===t.glyph_&&(r=n)}),r}},{key:"getFontInfo",value:function(t){return e.defs.fonts[t.font]}},{key:"renderMaker",value:function(t){var e,r=0;this.stroke_&&(e=_i(this.stroke_.getColor()),r=this.stroke_.getWidth());var n=this.getImage(),i={strokeStyle:e,strokeWidth:r,size:n.width},o=n.getContext("2d");o.clearRect(0,0,n.width,n.height),this.drawMarker_(i,o,0,0);var a=this.getAnchor();a[0]=n.width/2-this.offset_[0],a[1]=n.width/2-this.offset_[1]}},{key:"drawPath_",value:function(t,e){var r=e,n=2*this.radius_+t.strokeWidth+1,i=t.strokeWidth/2,o=t.size/2,a={fac:1,posX:t.size/2,posY:t.size/2};r.lineJoin="round",r.beginPath();var s=Math.PI;switch(this.form_){case"none":a.fac=1;break;case"circle":case"ban":r.arc(o,o,n/2,0,2*Math.PI,!0);break;case"poi":r.arc(o,o-.4*this.radius_,.6*this.radius_,.15*s,.85*s,!0),r.lineTo(o-.89*.05*n,(.95+.45*.05)*n+i),r.arc(o,.95*n+i,.05*n,.85*Math.PI,.15*Math.PI,!0),a={fac:.45,posX:o,posY:o-.35*this.radius_};break;case"bubble":r.arc(o,o-.2*this.radius_,.8*this.radius_,.4*s,.6*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"marker":r.arc(o,o-.2*this.radius_,.8*this.radius_,.25*s,.75*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"coma":r.moveTo(o+.8*this.radius_,o-.2*this.radius_),r.quadraticCurveTo(.95*n+i,.75*n+i,.5*n+i,n+i),r.arc(o,o-.2*this.radius_,.8*this.radius_,.45*s,0,!1),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;default:var u;switch(this.form_){case"shield":u=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],a.posY=.45*n+i;break;case"blazon":u=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],a.fac=.8,a.posY=.4*n+i;break;case"bookmark":u=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],a.fac=.9,a.posY=.4*n+i;break;case"hexagon":u=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],a.fac=.9,a.posY=.5*n+i;break;case"diamond":u=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],a.fac=.75,a.posY=.35*n+i;break;case"triangle":u=[0,0,1,0,.5,1,0,0],a.fac=.6,a.posY=.3*n+i;break;case"sign":u=[.5,.05,1,.95,0,.95,.5,.05],a.fac=.7,a.posY=.65*n+i;break;case"lozenge":u=[.5,0,1,.5,.5,1,0,.5,.5,0],a.fac=.7;break;default:u=[0,0,1,0,1,1,0,1,0,0]}for(var l=0;l<u.length;l+=2)r.lineTo(u[l]*n+i,u[l+1]*n+i)}return r.closePath(),a}},{key:"drawMarker_",value:function(t,e,r,n){var i=e,o=this.fill_?this.fill_.getColor():"#000",a=this.stroke_?this.stroke_.getColor():"#000";"none"===this.form_&&this.stroke_&&this.fill_&&(a=this.fill_.getColor(),o=this.stroke_.getColor()),i.setTransform(1,0,0,1,0,0),i.translate(r,n);var s=this.drawPath_(t,i);if(this.fill_){if(this.gradient_&&"none"!==this.form_){var u=i.createLinearGradient(0,0,t.size/2,t.size);u.addColorStop(1,_i(o)),u.addColorStop(0,_i(a)),i.fillStyle=u}else i.fillStyle=_i(o);i.fill()}if(this.stroke_&&t.strokeWidth&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.stroke()),this.glyph_.char){i.font="".concat(2*s.fac*this.radius_*this.fontSize_,"px ").concat(this.glyph_.font),i.strokeStyle=i.fillStyle,i.lineWidth=t.strokeWidth*("none"===this.form_?2:1),i.fillStyle=_i(this.color_||a),i.textAlign="center",i.textBaseline="middle";var l=this.glyph_.char;t.strokeWidth&&"transparent"!==a&&i.strokeText(l,s.posX,s.posY),i.fillText(l,s.posX,s.posY)}if("ban"===this.form_&&this.stroke_&&t.strokeWidth){i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth;var c=this.radius_+t.strokeWidth,h=this.radius_*Math.cos(Math.PI/4);i.moveTo(c+h,c-h),i.lineTo(c-h,c+h),i.stroke()}}},{key:"getChecksum",value:function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||e!==this.checksums_[2]||this.radius_!==this.checksums_[3]||"".concat(this.form_,"-").concat(this.glyphs_!==this.checksums_[4])){var r="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[r,t,e,this.radius_,"".concat(this.form_,"-").concat(this.glyphs_)]}return this.checksums_[0]}}])&&Pb(r.prototype,n),i&&Pb(r,i),e}();function Ab(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Rb.defs={fonts:{},glyphs:{}},Rb.addDefs({font:"g-cartografia",name:"g-cartografia",prefix:"g-cartografia-"},{"g-cartografia-pin":{font:"g-cartografia",code:59660,name:"pin",search:"pin"}});var Nb=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options_=e,this.layer_=null,this.updateFacadeOptions(e)}var e,r,n;return e=t,n=[{key:"getCanvasSize",value:function(){return[100,100]}}],(r=[{key:"updateFacadeOptions",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"applyToLayer",value:function(t){this.layer_=t,t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"updateCanvas",value:function(e){var r=t.getCanvasSize(),n=Lf(e.getContext("2d"),{size:r});n.setStyle(this.olStyleFn_()[0]),this.drawGeometryToCanvas(n)}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"clone",value:function(){return new t(Object.assign({},this.options_))}}])&&Ab(e.prototype,r),n&&Ab(e,n),t}();function Fb(t){return(Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Db(t,e){return!e||"object"!==Fb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gb(t){return(Gb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bb(t,e){return(Bb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zb=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Db(this,Gb(e).call(this,r))).updateFacadeOptions(r),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bb(t,e)}(e,Nb),r=e,i=[{key:"getValue",value:function(t,e,r){var n=/^\{\{([^}]+)\}\}$/,i=t;if(n.test(t)||_(t))if(e instanceof ri){var o=ua.olFeature2Facade(e,!1);if(n.test(t)){var a=t.replace(n,"$1");i=o.getAttribute(a)}else if(_(t)){var s;v(r)||(s=r.getImpl().getMap()),i=t(o,s)}}else i=void 0;return v(i)&&(i=void 0),i}}],(n=[{key:"applyToLayer",value:function(t){this.layer_=t;var e=t.getImpl().getOL3Layer();v(e)||e.setStyle(this.olStyleFn_)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"olStyleFn",get:function(){return this.olStyleFn_}}])&&jb(r.prototype,n),i&&jb(r,i),e}();function Ub(t){return(Ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vb(t,e){return!e||"object"!==Ub(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yb(t){return(Yb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wb(t,e){return(Wb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xb=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vb(this,Yb(e).call(this,t))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wb(t,e)}(e,Co),r=e,(n=[{key:"clone",value:function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}}])&&qb(r.prototype,n),i&&qb(r,i),e}();function Zb(t){return(Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hb(t,e){return!e||"object"!==Zb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kb(t){return(Kb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $b(t,e){return($b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jb=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t;return t.anchor||(r.anchor=[]),t.offset||(r.offset=[]),Hb(this,Kb(e).call(this,{glyph:t.glyph,color:t.color,fontSize:t.fontSize,stroke:t.stroke,fill:t.fill,radius:t.radius,form:t.form,gradient:t.gradient,offsetX:t.offset[0],offsetY:t.offset[1],opacity:t.opacity,rotation:t.rotation,rotateWithView:t.rotateWithView}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$b(t,e)}(e,Rb),e}();function Qb(t){return(Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ew(t,e){return!e||"object"!==Qb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rw(t){return(rw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nw(t,e){return(nw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iw=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ew(this,rw(e).call(this,{anchor:t.anchor?t.anchor.slice():void 0,anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits,anchorYUnits:t.anchorYUnits,crossOrigin:t.crossOrigin||null,color:t.color&&t.color.slice?t.color.slice():t.color||void 0,src:t.src,offset:t.offset?t.offset.slice():void 0,offsetOrigin:t.offsetOrigin,size:t.size?t.size.slice():void 0,imgSize:t.imgSize,opacity:t.opacity,scale:t.scale,snapToPixel:t.snapToPixel,rotation:t.rotation,rotateWithView:t.rotateWithView}))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nw(t,e)}(e,Vo),r=e,(n=[{key:"clone",value:function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}},{key:"size",set:function(t){this.size_=Array.isArray(t)?t:null}},{key:"anchor",set:function(t){this.anchor_=Array.isArray(t)?t:null}},{key:"origin",set:function(t){this.origin_=Array.isArray(t)?t:null}}])&&tw(r.prototype,n),i&&tw(r,i),e}();function ow(t){return(ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sw(t,e){return!e||"object"!==ow(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uw(t){return(uw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lw(t,e){return(lw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cw=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sw(this,uw(e).call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager}))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lw(t,e)}(e,wo),r=e,(n=[{key:"clone",value:function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}}])&&aw(r.prototype,n),i&&aw(r,i),e}();function hw(t){return(hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pw(t,e){return!e||"object"!==hw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dw(t){return(dw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yw(t,e){return(yw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gw=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pw(this,dw(e).apply(this,arguments))}var r,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yw(t,e)}(e,zb),r=e,(n=[{key:"toImage",value:function(t){var r=null,n={fill:this.options_.fill,stroke:this.options_.stroke,icon:this.options_.icon};if(!0===$(n))r=Q();else{if(v(this.olStyleFn_))return null;var i=this.olStyleFn_()[1];if(i.getImage&&null!=i.getImage()&&i.getImage()instanceof mo){if(i.getImage()instanceof Jb){var o=i.getImage().getImage();null!=o&&o&&(r=o.toDataURL())}else if(i.getImage()instanceof iw){var a=i.getImage();if(!v(a)&&!(r=a.getSrc()).startsWith(window.location.origin)){var s=j([M.config.PROXY_URL,"/image"]);r=O(s,{url:r})}}}else{null!=(i=this.olStyleFn_()[0]).getImage()&&null!=i.getImage().getStroke()&&(i.getImage().getStroke().getWidth()>e.DEFAULT_WIDTH_POINT&&i.getImage().getStroke().setWidth(e.DEFAULT_WIDTH_POINT),i.getImage().render());var u=i.getImage().getImage();null!=u&&(r=u.toDataURL())}}return r}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var n=r;n instanceof ri||(n=e);var a,s,u=new Xb({zIndex:zb.getValue(t.zindex,n,e.layer_),geometry:function(t){var e=aa.getCentroid(t.getGeometry()),r=new en(e);return"MultiPoint"===t.getGeometry().getType()&&(r=new cn(t.getGeometry().getCoordinates())),r}}),c=new Xb({zIndex:zb.getValue(t.zindex,n,e.layer_),geometry:function(t){var e=aa.getCentroid(t.getGeometry()),r=new en(e);return"MultiPoint"===t.getGeometry().getType()&&(r=new cn(t.getGeometry().getCoordinates())),r}});if(!v(t.fill)){var h=zb.getValue(t.fill.color,n,e.layer_),f=zb.getValue(t.fill.opacity,n,e.layer_);f||0===f||(f=1),v(h)||(a=new xo({color:l()(h).alpha(f).css()}))}if(!v(t.stroke)){var p=zb.getValue(t.stroke.color,n,e.layer_);if(!v(p)){var d=t.stroke.linedashoffset;s=new Eo({color:p,width:zb.getValue(t.stroke.width,n,e.layer_),lineDash:zb.getValue(t.stroke.linedash,n,e.layer_),lineDashOffset:zb.getValue(d,n,e.layer_),lineCap:zb.getValue(t.stroke.linecap,n,e.layer_),lineJoin:zb.getValue(t.stroke.linejoin,n,e.layer_),miterLimit:zb.getValue(t.stroke.miterlimit,n,e.layer_)})}}if(!v(t.label)){var y=zb.getValue(t.label.text,n,e.layer_),g=zb.getValue(t.label.align,n,e.layer_),m=zb.getValue(t.label.baseline,n,e.layer_),_=new Mb({font:zb.getValue(t.label.font,n,e.layer_),rotateWithView:zb.getValue(t.label.rotate,n,e.layer_),scale:zb.getValue(t.label.scale,n,e.layer_),offsetX:zb.getValue(t.label.offset?t.label.offset[0]:void 0,n,e.layer_),offsetY:zb.getValue(t.label.offset?t.label.offset[1]:void 0,n,e.layer_),fill:new xo({color:zb.getValue(t.label.color||"#000000",n,e.layer_)}),textAlign:Object.values(i).includes(g)?g:"center",textBaseline:Object.values(o).includes(m)?m:"top",text:void 0===y?void 0:String(y),rotation:zb.getValue(t.label.rotation,n,e.layer_)});if(!v(t.label.stroke)){var b=t.label.stroke,w=b.miterlimit,x=b.linedashoffset;_.setStroke(new Eo({color:zb.getValue(t.label.stroke.color,n,e.layer_),width:zb.getValue(t.label.stroke.width,n,e.layer_),lineCap:zb.getValue(t.label.stroke.linecap,n,e.layer_),lineJoin:zb.getValue(t.label.stroke.linejoin,n,e.layer_),lineDash:zb.getValue(t.label.stroke.linedash,n,e.layer_),lineDashOffset:zb.getValue(x,n,e.layer_),miterLimit:zb.getValue(w,n,e.layer_)}))}u.setText(_)}return u.setImage(new cw({fill:a,stroke:s,radius:zb.getValue(t.radius,n,e.layer_),snapToPixel:zb.getValue(t.snapToPixel,n,e.layer_)})),v(t.icon)||(v(t.icon.src)?v(t.icon.form)||c.setImage(new Jb({form:v(zb.getValue(t.icon.form,n,e.layer_))?"":zb.getValue(t.icon.form,n,e.layer_).toLowerCase(),gradient:zb.getValue(t.icon.gradient,n,e.layer_),glyph:zb.getValue(t.icon.class,n,e.layer_),fontSize:zb.getValue(t.icon.fontsize,n,e.layer_),radius:zb.getValue(t.icon.radius,n,e.layer_),rotation:zb.getValue(t.icon.rotation,n,e.layer_),rotateWithView:zb.getValue(t.icon.rotate,n,e.layer_),offsetX:zb.getValue(t.icon.offset?t.icon.offset[0]:void 0,n,e.layer_),offsetY:zb.getValue(t.icon.offset?t.icon.offset[1]:void 0,n,e.layer_),fill:new xo({color:zb.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",n,e.layer_)}),stroke:t.icon.color?new Eo({color:zb.getValue(t.icon.color,n,e.layer_),width:1}):void 0,anchor:zb.getValue(t.icon.anchor,n,e.layer_),anchorXUnits:zb.getValue(t.icon.anchorxunits,n,e.layer_),anchorYUnits:zb.getValue(t.icon.anchoryunits,n,e.layer_),src:zb.getValue(t.icon.src,n,e.layer_),opacity:zb.getValue(t.icon.opacity,n,e.layer_),scale:zb.getValue(t.icon.scale,n,e.layer_),snapToPixel:zb.getValue(t.icon.snaptopixel,n,e.layer_),offsetOrigin:zb.getValue(t.icon.offsetorigin,n,e.layer_),offset:zb.getValue(t.icon.offset,n,e.layer_),crossOrigin:zb.getValue(t.icon.crossorigin,n,e.layer_),anchorOrigin:zb.getValue(t.icon.anchororigin,n,e.layer_),size:zb.getValue(t.icon.size,n,e.layer_)})):c.setImage(new iw({anchor:zb.getValue(t.icon.anchor,n,e.layer_),anchorXUnits:zb.getValue(t.icon.anchorxunits,n,e.layer_),anchorYUnits:zb.getValue(t.icon.anchoryunits,n,e.layer_),src:zb.getValue(t.icon.src,n,e.layer_),opacity:zb.getValue(t.icon.opacity,n,e.layer_),scale:zb.getValue(t.icon.scale,n,e.layer_),rotation:zb.getValue(t.icon.rotation,n,e.layer_),rotateWithView:zb.getValue(t.icon.rotate,n,e.layer_),snapToPixel:zb.getValue(t.icon.snaptopixel,n,e.layer_),offsetOrigin:zb.getValue(t.icon.offsetorigin,n,e.layer_),offset:zb.getValue(t.icon.offset,n,e.layer_),crossOrigin:zb.getValue(t.icon.crossorigin,n,e.layer_),anchorOrigin:zb.getValue(t.icon.anchororigin,n,e.layer_),size:zb.getValue(t.icon.size,n,e.layer_)}))),[u,c]}}},{key:"drawGeometryToCanvas",value:function(t){this.olStyleFn_()[1].getImage()instanceof Rb?t.drawGeometry(new en([10,10])):t.drawCircle(new on([this.getCanvasSize()[0]/2,this.getCanvasSize()[1]/2],this.getRadius_()))}},{key:"updateCanvas",value:function(t){if(this.updateFacadeOptions(this.options_),!$(this.options_)){var e=this.getCanvasSize(),r=Lf(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];v(n.getText())||n.setText(null),!v(this.olStyleFn_()[1])&&this.olStyleFn_()[1].getImage()instanceof Rb&&(n=this.olStyleFn_()[1]);var i=n.getImage().getStroke();v(i)||v(i.getWidth())||i.setWidth(3),r.setStyle(n),this.drawGeometryToCanvas(r)}}},{key:"getCanvasSize",value:function(){var t,e=this.olStyleFn_()[1].getImage();if(e instanceof Rb)t=[90,90];else{var r=this.getRadius_(e);t=[2*r+4,2*r+4]}return t}},{key:"getRadius_",value:function(t){return t instanceof Vo?25:t instanceof Rb?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&fw(r.prototype,n),a&&fw(r,a),e}();gw.DEFAULT_WIDTH_POINT=3;var mw=gw;function vw(t){return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bw(t,e){return!e||"object"!==vw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ww(t){return(ww=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xw(t,e){return(xw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ew=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bw(this,ww(e).call(this,t,r))).feature_=null,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xw(t,e)}(e,u_),r=e,(n=[{key:"applyToFeature",value:function(t){this.feature_=t,this.getImpl().applyToFeature(t)}}])&&_w(r.prototype,n),i&&_w(r,i),e}();function Sw(t){return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ow(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mw(t,e){return!e||"object"!==Sw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Iw(t,e,r){return(Iw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pw(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Pw(t){return(Pw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cw(t,e){return(Cw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lw=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mw(this,Pw(e).apply(this,arguments))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cw(t,e)}(e,Ew),r=e,i=[{key:"deserialize",value:function(t,e){var r=K(t),n=r.map(function(t,e){return"arg".concat(e)}),i=n.reduce(function(t,e){return t.concat(", ").concat(e)});return new Function(n,"return new ".concat(e,"(").concat(i,")")).apply(void 0,Ow(r))}}],(n=[{key:"apply",value:function(t,e,r){var n=this;this.layer_=t,this.getImpl().applyToLayer(t),!0===e&&(r?t.getFeatures().forEach(function(t){t.style=null}):t.getFeatures().forEach(function(t){t.setStyle(n.clone())})),this.updateCanvas()}},{key:"toImage",value:function(){var t=Iw(Pw(e.prototype),"toImage",this).call(this),r={fill:this.options_.fill,stroke:this.options_.stroke};return!0===$(r)&&(t=Q(this.canvas_)),t}},{key:"ORDER",get:function(){return 1}}])&&Tw(r.prototype,n),i&&Tw(r,i),e}();function kw(t){return(kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Aw(t,e){return!e||"object"!==kw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nw(t){return(Nw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fw(t,e){return(Fw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jw=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t;r=v(r)?e.DEFAULT_NULL:X(r,e.DEFAULT),r=X({},r);var n=new mw(r);return Aw(this,Nw(e).call(this,r,n))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fw(t,e)}(e,Lw),r=e,(n=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Point'))"}}])&&Rw(r.prototype,n),i&&Rw(r,i),e}();jw.DEFAULT={radius:5},jw.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5};var Dw=jw;function Gw(t){return(Gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zw(t,e){return!e||"object"!==Gw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uw(t){return(Uw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qw(t,e){return(qw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vw=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=zw(this,Uw(e).call(this,r))).textOverflow_=void 0!==r.textOverflow?r.textOverflow:"",t.minWidth_=r.minWidth||0,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qw(t,e)}(e,Mb),r=e,(n=[{key:"getTextOverflow",value:function(){return this.textOverflow_}},{key:"getMinWidth",value:function(){return this.minWidth_}}])&&Bw(r.prototype,n),i&&Bw(r,i),e}();function Yw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ww=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"render",value:function(t,e){for(var r=t,n=this,i=0,o=0,a=2,s=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)},u=function(t,e){if(!i||o+i<e)for(;a<t.length&&(i=s(t[a-2],t[a-1],t[a],t[a+1]),!(o+i>e))&&!((a+=2)>=t.length);)o+=i;var r=e-o;return a>=t.length&&(a=t.length-2),[r?t[a-2]+(t[a]-t[a-2])*r/i:t[a-2],r?t[a-1]+(t[a+1]-t[a-1])*r/i:t[a-1],Math.atan2(t[a+1]-t[a-1],t[a]-t[a-2])]},l=.25*n.measureText(" ").width,c=0,h=0,f=2;f<e.length;f+=2)h+=s(e[f-2],e[f-1],e[f],e[f+1]);if(!(h<n.minWidth)){var p=r.split(" ").length-1;if("visible"!==n.textOverflow&&h<n.measureText(r).width+(r.length-(1+p))*l){var d="ellipsis"===n.textOverflow?"…":n.textOverflow;do{p=r.split(" ").length-1,r=r.slice(0,r.length-1)}while(r&&h<n.measureText(r+d).width+(r.length+(d.length-1)+p)*l);r+=d}switch(n.textJustify||n.textAlign){case!0:case"center":case"end":case"right":n.textJustify?(c=0,l=(h-n.measureText(r).width)/(t.length-(1+p))):(c=h-n.measureText(r).width-(r.length+p)*l,"center"===n.textAlign&&(c/=2))}for(var y=0;y<r.length;y+=1){var g=r[y],m=n.measureText(g).width,v=u(e,c+m/2);n.save(),n.textAlign="center",n.translate(v[0],v[1]),n.rotate(v[2]),n.lineWidth&&n.strokeText(g,0,0),n.fillText(g,0,0),n.restore(),c+=m+l*(" "===g?2:1)}}}},{key:"getPath_",value:function(t,e,r){var n=[];if(e.forEach(function(e){n.push(t[0]*e[0]+t[1]*e[1]+t[4]),n.push(t[2]*e[0]+t[3]*e[1]+t[5])}),r&&n[0]>n[n.length-2]){for(var i=[],o=n.length-2;o>=0;o-=2)i.push(n[o]),i.push(n[o+1]);return i}return n}},{key:"formatStyle",value:function(t){var e=t;if(null==e)return null;return void 0===e&&(e=[new Co({text:new Mb})]),"function"==typeof e?e:function(){return[e]}}},{key:"draw",value:function(e,r,n,i){var o=this.getPath_(r,i,n.getRotateWithView());e.font=n.getFont(),e.textBaseline=n.getTextBaseline(),e.textAlign=n.getTextAlign(),e.lineWidth=n.getStroke()&&n.getStroke().getWidth()||t.DEFAULT.lineWidth,e.strokeStyle=n.getStroke()&&n.getStroke().getColor()||t.DEFAULT.lineColor,e.fillStyle=n.getFill()&&n.getFill().getColor()||t.DEFAULT.fillColor,e.textJustify="justify"===n.getTextAlign(),e.textOverflow=n.getTextOverflow?n.getTextOverflow():t.DEFAULT.textOverflow,e.minWidth=n.getMinWidth?n.getMinWidth():t.DEFAULT.minWidth,"function"==typeof e.textPath&&e.textPath(n.getText(),o),e.restore()}}],(r=null)&&Yw(e.prototype,r),n&&Yw(e,n),t}();Ww.DEFAULT={lineWidth:0,lineColor:"#fff",fillColor:"#000",textOverflow:"",minWidth:0};var Xw=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(d(window.CanvasRenderingContext2D.prototype.textPath)&&(window.CanvasRenderingContext2D.prototype.textPath=Ww.render),!(e.frameState.viewState.resolution>this.textPathMaxResolution_)){var r=e.frameState.extent,n=e.context;n.save(),n.scale(e.frameState.pixelRatio,e.frameState.pixelRatio),null!=this.getSource()&&0===this.getSource().getFeatures().length||(this.getSource().getFeaturesInExtent(r).forEach(function(r){var i=null!=r.getStyle()?r.getStyle():t.getStyle(),o="function"==typeof i?i(r,e.frameState.viewState.resolution):i;o instanceof Array||(o=[o]),o.forEach(function(t){var i,o=(t instanceof lx?t.getOptions().geometry:t.getGeometry())||r.getGeometry();switch("function"==typeof o&&(o=o(r)),o.getType()){case"MultiLineString":i=o.getLineString(0).getCoordinates();break;default:i=o.getCoordinates()}var a=t instanceof lx?t.getOptions().text:t.textPath;null!=a&&a instanceof Vw&&Ww.draw(n,e.frameState.coordinateToPixelTransform,a,i)})}),n.restore())}};Wr.prototype.cspline=function(t){var e;return this.calcCSpline?this.csplineGeometryRevision===this.getRevision()&&this.csplineOption===JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t),e=this.csplineGeometry_):e=this,e},fi.prototype.calcCSpline=function(t){var e=[];return this.getGeometries().forEach(function(t){return e.push(t.cspline())}),new fi(e)},$n.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach(function(t){return e.push(t.cspline().getCoordinates())}),new $n(e)},Yn.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach(function(t){return e.push(t.cspline().getCoordinates())}),new Yn(e)},ti.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach(function(t){return e.push(t.cspline().getCoordinates())}),new ti(e)};var Zw=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)};function Hw(t){return(Hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $w(t,e){return!e||"object"!==Hw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jw(t,e,r){return(Jw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qw(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Qw(t){return(Qw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tx(t,e){return(tx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ln.prototype.calcCSpline=function(){var t,e,r,n,i,o,a,s,u,l,c,h,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=this.getCoordinates(),y="number"==typeof p.tension?p.tension:.5,g=p.resolution||this.getLength()/d.length/(p.pointsPerSeg||10),m=[],v=d.slice(0);for(d.length>2&&d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]?(v.unshift(d[d.length-2]),v.push(d[1])):(v.unshift(d[0]),v.push(d[d.length-1])),f=1;f<v.length-2;f+=1){var _=Zw(v[f][0],v[f][1],v[f+1][0],v[f+1][1]),b=Math.round(_/g),w=1;if(p.normalize){var x=Zw(v[f+1][0],v[f+1][1],v[f-1][0],v[f-1][1]),E=Zw(v[f+2][0],v[f+2][1],v[f][0],v[f][1]);w=x<E?x/E:E/x}for(r=(v[f+1][0]-v[f-1][0])*y*w,n=(v[f+2][0]-v[f][0])*y*w,i=(v[f+1][1]-v[f-1][1])*y*w,o=(v[f+2][1]-v[f][1])*y*w,h=0;h<=b;h+=1)c=h/b,a=2*Math.pow(c,3)-(3*Math.pow(c,2)+1),s=-2*Math.pow(c,3)+3*Math.pow(c,2),u=Math.pow(c,3)-(2*Math.pow(c,2)+c),l=Math.pow(c,3)-Math.pow(c,2),t=a*v[f][0]+s*v[f+1][0]+u*r+l*n,e=a*v[f][1]+s*v[f+1][1]+u*i+l*o,m.push([t,e])}return new Ln(m)};var ex=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$w(this,Qw(e).call(this,t))).olStyleFn_=r.updateFacadeOptions(t),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tx(t,e)}(e,zb),r=e,i=[{key:"getCanvasSize",value:function(){return[25,15]}}],(n=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof ri||(n=e);var i,o=t.stroke,a=t.label,s=new Xb,u=new Xb,c=zb.getValue;if(v(o)||s.setStroke(new Eo({color:c(o.color,n),width:c(o.width,n),lineDash:c(o.linedash,n),lineDashOffset:c(o.linedashoffset,n),lineCap:c(o.linecap,n),lineJoin:c(o.linejoin,n),miterLimit:c(o.miterlimit,n)})),!v(a)){var h={text:void 0===c(a.text,n)?void 0:String(c(a.text,n)),font:c(a.font,n),fill:new xo({color:c(a.color||"#000000",n)}),textBaseline:(c(a.baseline,n)||"").toLowerCase(),textAlign:c(a.align,n),scale:c(a.scale,n),rotateWithView:c(a.rotate,n)||!1,textOverflow:c(a.textoverflow,n)||"",minWidth:c(a.minwidth,n)||0,geometry:c(a.geometry,n),offsetX:c(t.label.offset?t.label.offset[0]:void 0,n),offsetY:c(t.label.offset?t.label.offset[1]:void 0,n)},f=new Vw(h);v(a.stroke)||f.setStroke(new Eo({color:c(a.stroke.color,n),width:c(a.stroke.width,n),lineCap:c(a.stroke.linecap,n),lineJoin:c(a.stroke.linejoin,n),lineDash:c(a.stroke.linedash,n),lineDashOffset:c(a.stroke.linedashoffset,n),miterLimit:c(a.stroke.miterlimit,n)}));var p=c(a.path,n);"boolean"==typeof p&&p?(s.textPath=f,!v(a.smooth)&&!0===a.smooth&&_(n.getGeometry)&&s.setGeometry(n.getGeometry().cspline())):s.setText(f)}if(!v(t.fill)){var d=zb.getValue(t.fill.color,n,e.layer_),y=zb.getValue(t.fill.opacity,n,e.layer_);y||0===y||(y=1);var g=zb.getValue(t.fill.width,n,e.layer_);v(d)||(i=new Eo({color:l()(d).alpha(y).css(),width:g}))}return u.setStroke(i),[s,u]}}},{key:"applyToLayer",value:function(t){Jw(Qw(e.prototype),"applyToLayer",this).call(this,t);var r=t.getImpl().getOL3Layer();v(r)||(this.postComposeEvtKey_=r.on("postcompose",Xw,r))}},{key:"unapply",value:function(){kt(this.postComposeEvtKey_)}},{key:"drawGeometryToCanvas",value:function(t,r,n,i){var o=e.getCanvasSize()[0],a=e.getCanvasSize()[1];if(t.drawGeometry(new Ln([[0+i/2,0+i/2],[o/3,a/2-i/2],[2*o/3,0+i/2],[o-i/2,a/2-i/2]])),!v(n)){var s=n.width,u=r.getContext("2d");u.lineWidth=n.width,o=r.width,a=r.height,u.strokeStyle=n.color,u.beginPath(),u.lineTo(0+s,0+s),u.lineTo(o/3,a/2-s),u.lineTo(2*o/3,0+s),u.lineTo(o-s,a/2-s),u.stroke()}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var r,n=e.getCanvasSize(),i=Lf(t.getContext("2d"),{size:n}),o=this.olStyleFn_()[1];v(o)||v(o.getStroke())||(r={color:o.getStroke().getColor(),width:1});var a=this.olStyleFn_()[0];v(a.getText())||a.setText(null);var s,u=a.getStroke();v(u)||(v(u.getWidth())?s=1:(s=u.getWidth(),u.getWidth()>e.DEFAULT_WIDTH_LINE&&(s=e.DEFAULT_WIDTH_LINE)),r={color:a.getStroke().getColor(),width:s},a.getStroke().setWidth(s),i.setStyle(a)),this.drawGeometryToCanvas(i,t,r,s)}}])&&Kw(r.prototype,n),i&&Kw(r,i),e}();ex.DEFAULT_WIDTH_LINE=3;var rx=ex;function nx(t){return(nx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ix(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ox(t,e){return!e||"object"!==nx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ax(t){return(ax=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sx(t,e){return(sx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ux=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t;v(r)&&(r=e.DEFAULT_NULL),r=X({},r);var n=new rx(r);return ox(this,ax(e).call(this,r,n))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sx(t,e)}(e,Lw),r=e,(n=[{key:"unapply",value:function(t){this.getImpl().unapply(t)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Line'))"}}])&&ix(r.prototype,n),i&&ix(r,i),e}();ux.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var lx=ux;function cx(t){return(cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fx(t,e){return!e||"object"!==cx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function px(t){return(px=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dx(t,e){return(dx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yx=function(t){function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=document.createElement("canvas"),o=(Number(n.scale)>0?Number(n.scale):1)*ki||ki,a=i.getContext("2d");if(n.image){n.image.load();var s=n.image.getImage();s.width?(i.width=Math.round(s.width*o),i.height=Math.round(s.height*o),a.globalAlpha="number"==typeof n.opacity?n.opacity:1,a.drawImage(s,0,0,s.width,s.height,0,0,i.width,i.height),r=a.createPattern(i,"repeat")):(r=[0,0,0,0],s.onload=function(){i.width=Math.round(s.width*o),i.height=Math.round(s.height*o),a.globalAlpha="number"==typeof n.opacity?n.opacity:1,a.drawImage(s,0,0,s.width,s.height,0,0,i.width,i.height),r=a.createPattern(i,"repeat"),this.color_=r,this.checksum_=void 0})}else{var u=e.getPattern(n);if(i.width=Math.round(u.width*o),i.height=Math.round(u.height*o),a.beginPath(),n.fill&&(a.fillStyle=_i(n.fill.getColor()),a.fillRect(0,0,i.width,i.height)),a.scale(o,o),a.lineCap="round",a.lineWidth=u.stroke||1,a.fillStyle=_i(n.color||"#000"),a.strokeStyle=_i(n.color||"#000"),u.circles)for(var l=0;l<u.circles.length;l+=1){var c=u.circles[l];a.beginPath(),a.arc(c[0],c[1],c[2],0,2*Math.PI),u.fill&&a.fill(),u.stroke&&a.stroke()}if(u.repeat||(u.repeat=[[0,0]]),u.char&&(a.font=u.font||"".concat(u.width,"px Arial"),a.textAlign="center",a.textBaseline="middle",u.angle?(a.fillText(u.char,u.width/4,u.height/4),a.fillText(u.char,5*u.width/4,5*u.height/4),a.fillText(u.char,u.width/4,5*u.height/4),a.fillText(u.char,5*u.width/4,u.height/4),a.fillText(u.char,3*u.width/4,3*u.height/4),a.fillText(u.char,-u.width/4,-u.height/4),a.fillText(u.char,3*u.width/4,-u.height/4),a.fillText(u.char,-u.width/4,3*u.height/4)):a.fillText(u.char,u.width/2,u.height/2)),u.lines)for(var h=0;h<u.lines.length;h+=1)for(var f=0;f<u.repeat.length;f+=1){var p=u.lines[h];a.beginPath(),a.moveTo(p[0]+u.repeat[f][0],p[1]+u.repeat[f][1]);for(var d=2;d<p.length;d+=2)a.lineTo(p[d]+u.repeat[f][0],p[d+1]+u.repeat[f][1]);u.fill&&a.fill(),u.stroke&&a.stroke(),a.save(),a.strokeStyle="red",a.strokeWidth=.1,a.restore()}if(r=a.createPattern(i,"repeat"),n.offset){var y=n.offset;if("number"==typeof y&&(y=[y,y]),y instanceof Array){var g=Math.round(y[0]*o),m=Math.round(y[1]*o);a.scale(1/o,1/o),a.clearRect(0,0,i.width,i.height),a.translate(g,m),a.fillStyle=r,a.fillRect(-g,-m,i.width,i.height),r=a.createPattern(i,"repeat")}}}return(t=fx(this,px(e).call(this,{color:r}))).canvas_=i,t.options_=n,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dx(t,e)}(e,xo),r=e,i=[{key:"getPattern",value:function(t){var r=t,n=e.patterns[r.pattern]||e.patterns.dot,i=Math.round(r.spacing)||10;switch(r.pattern){case"dot":case"circle":var o=0===r.size?0:r.size/2||2;r.angle?(i=Math.round(1.4*i),n.width=i,n.height=i,n.circles=[[i/4,i/4,o],[3*i/4,3*i/4,o]],"circle"===r.pattern&&(n.circles=n.circles.concat([[i/4+i,i/4,o],[i/4,i/4+i,o],[3*i/4-i,3*i/4,o],[3*i/4,3*i/4-i,o],[i/4+i,i/4+i,o],[3*i/4-i,3*i/4-i,o]]))):(n.width=i,n.height=i,n.circles=[[i/2,i/2,o]],"circle"===r.pattern&&(n.circles=n.circles.concat([[i/2+i,i/2,o],[i/2-i,i/2,o],[i/2,i/2+i,o],[i/2,i/2-i,o],[i/2+i,i/2+i,o],[i/2+i,i/2-i,o],[i/2-i,i/2+i,o],[i/2-i,i/2-i,o]])));break;case"tile":case"square":o=0===r.size?0:r.size/2||2,r.angle?(n.width=i,n.height=i,n.lines=[[i/2-o,i/2,i/2,i/2-o,i/2+o,i/2,i/2,i/2+o,i/2-o,i/2]]):(n.width=i,n.height=i,n.lines=[[i/2-o,i/2-o,i/2+o,i/2-o,i/2+o,i/2+o,i/2-o,i/2+o,i/2-o,i/2-o]]),"square"===r.pattern&&(n.repeat=[[0,0],[0,i],[i,0],[0,-i],[-i,0],[-i,-i],[i,i],[-i,i],[i,-i]]);break;case"cross":case"hatch":"cross"===r.pattern&&r.angle&&(r.angle=45);var a=Math.round(((r.angle||0)-90)%360);a>180&&(a-=360),a*=Math.PI/180;var s=Math.cos(a),u=Math.sin(a);if(Math.abs(u)<1e-4)n.width=i,n.height=i,n.lines=[[0,.5,i,.5]],n.repeat=[[0,0],[0,i]];else if(Math.abs(s)<1e-4)n.height=i,n.width=i,n.lines=[[.5,0,.5,i]],n.repeat=[[0,0],[i,0]],"cross"===r.pattern&&(n.lines.push([0,.5,i,.5]),n.repeat.push([0,i]));else{n.width=Math.round(Math.abs(i/u))||1,n.height=Math.round(Math.abs(i/s))||1;var l=n.width,c=n.height;"cross"===r.pattern?(n.lines=[[-l,-c,2*l,2*c],[2*l,-c,-l,2*c]],n.repeat=[[0,0]]):s*u>0?(n.lines=[[-l,-c,2*l,2*c]],n.repeat=[[0,0],[l,0],[0,c]]):(n.lines=[[2*l,-c,-l,2*c]],n.repeat=[[0,0],[-l,0],[0,c]])}n.stroke=0===r.size?0:r.size||4}return n}},{key:"addPattern",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.patterns[t||r.char]={width:r.width||r.size||10,height:r.height||r.size||10,font:r.font,char:r.char,circles:r.circles,lines:r.lines,repeat:r.repeat,stroke:r.stroke,angle:r.angle,fill:r.fill}}}],(n=[{key:"clone",value:function(){return new e(this.options_)}},{key:"getImage",value:function(){return this.canvas_}}])&&hx(r.prototype,n),i&&hx(r,i),e}();function gx(t){return(gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vx(t,e){return!e||"object"!==gx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _x(t){return(_x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bx(t,e){return(bx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}yx.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};var wx=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vx(this,_x(e).call(this,t))).olStyleFn_=r.updateFacadeOptions(t),r}var r,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bx(t,e)}(e,zb),r=e,a=[{key:"getCanvasSize",value:function(){return[25,15]}}],(n=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof ri||(n=e);var a=new Xb;if(v(t.stroke)||a.setStroke(new Eo({color:zb.getValue(t.stroke.color,n,e.layer_),width:zb.getValue(t.stroke.width,n,e.layer_),lineDash:zb.getValue(t.stroke.linedash,n,e.layer_),lineDashOffset:zb.getValue(t.stroke.linedashoffset,n,e.layer_),lineCap:zb.getValue(t.stroke.linecap,n,e.layer_),lineJoin:zb.getValue(t.stroke.linejoin,n,e.layer_),miterLimit:zb.getValue(t.stroke.miterlimit,n,e.layer_)})),!v(t.label)){var s=zb.getValue(t.label.text,n,e.layer_),u=zb.getValue(t.label.align,n,e.layer_),c=zb.getValue(t.label.baseline,n,e.layer_),h=!!v(t.label.overflow,e.layer_)||t.label.overflow;a.setText(new Mb({font:zb.getValue(t.label.font,n,e.layer_),rotateWithView:zb.getValue(t.label.rotate,n,e.layer_),scale:zb.getValue(t.label.scale,n,e.layer_),offsetX:zb.getValue(t.label.offset?t.label.offset[0]:void 0,n,e.layer_),offsetY:zb.getValue(t.label.ofsset?t.label.offset[1]:void 0,n,e.layer_),fill:new xo({color:zb.getValue(t.label.color||"#000000",n,e.layer_)}),textAlign:Object.values(i).includes(u)?u:"center",textBaseline:Object.values(o).includes(c)?c:"top",text:void 0===s?void 0:String(s),rotation:zb.getValue(t.label.rotation,n,e.layer_),overflow:zb.getValue(h,n,e.layer_)})),v(t.label.stroke)||a.getText().setStroke(new Eo({color:zb.getValue(t.label.stroke.color,n,e.layer_),width:zb.getValue(t.label.stroke.width,n,e.layer_),lineCap:zb.getValue(t.label.stroke.linecap,n,e.layer_),lineJoin:zb.getValue(t.label.stroke.linejoin,n,e.layer_),lineDash:zb.getValue(t.label.stroke.linedash,n,e.layer_),lineDashOffset:zb.getValue(t.label.stroke.linedashoffset,n,e.layer_),miterLimit:zb.getValue(t.label.stroke.miterlimit,n,e.layer_)}))}if(!v(t.fill)){var f,p=zb.getValue(t.fill.color,n,e.layer_),d=zb.getValue(t.fill.opacity,n,e.layer_);if(d||0===d||(d=1),v(p)||(f=new xo({color:l()(p).alpha(d).css()})),v(t.fill.pattern))a.setFill(f);else{var y="rgba(0,0,0,1)";if(!v(t.fill.pattern.color)){var g=zb.getValue(t.fill.pattern.opacity,n,e.layer_)||1;g||0===g||(g=1),y=l()(t.fill.pattern.color).alpha(g).css()}a.setFill(new yx({pattern:(zb.getValue(t.fill.pattern.name,n,e.layer_)||"").toLowerCase(),color:y,size:zb.getValue(t.fill.pattern.size,n,e.layer_),spacing:zb.getValue(t.fill.pattern.spacing,n,e.layer_),image:"Image"===zb.getValue(t.fill.pattern.name,n,e.layer_)?new Vo({src:zb.getValue(t.fill.pattern.src,n,e.layer_)}):void 0,angle:zb.getValue(t.fill.pattern.rotation,n,e.layer_),scale:zb.getValue(t.fill.pattern.scale,n,e.layer_),offset:zb.getValue(t.fill.pattern.offset,n,e.layer_),fill:f}))}}return[a]}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var r=e.getCanvasSize(),n=Lf(t.getContext("2d"),{size:r}),i=this.olStyleFn_()[0];v(i.getText())||i.setText(null);var o=i.getStroke();v(o)||v(o.getWidth())||o.getWidth()>e.DEFAULT_WIDTH_POLYGON&&i.getStroke().setWidth(e.DEFAULT_WIDTH_POLYGON),n.setStyle(i),this.drawGeometryToCanvas(n)}},{key:"drawGeometryToCanvas",value:function(t){var r=e.getCanvasSize(),n=Math.floor(r[0]),i=Math.floor(r[1]),o=r[0]-n,a=r[1]-i;t.drawGeometry(new Yn([[[o+3,a+3],[n-3,a+3],[n-3,i-3],[o+3,i-3],[o+3,a+3]]]))}}])&&mx(r.prototype,n),a&&mx(r,a),e}();wx.DEFAULT_WIDTH_POLYGON=3;var xx=wx;function Ex(t){return(Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ox(t,e){return!e||"object"!==Ex(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tx(t){return(Tx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mx(t,e){return(Mx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ix=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r,i=new xx(n);return t=Ox(this,Tx(e).call(this,n,i)),v(n)&&(n=e.DEFAULT_NULL),n=X({},n),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mx(t,e)}(e,Lw),r=e,(n=[{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Polygon'))"}}])&&Sx(r.prototype,n),i&&Sx(r,i),e}();Ix.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var Px=Ix,Cx={generateStyleLayer:function(t,e){var r;switch(e.getGeometryType()){case"Point":case"MultiPoint":r=new Dw(t);break;case"LineString":case"MultiLineString":r=new lx(t);break;case"Polygon":case"MultiPolygon":r=new Px(t);break;default:return null}return r}};function Lx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getFunctionFilter",value:function(){}},{key:"execute",value:function(t){}},{key:"toCQL",value:function(){}}])&&Lx(e.prototype,r),n&&Lx(e,n),t}();function Rx(t){return(Rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nx(t,e){return!e||"object"!==Rx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fx(t){return(Fx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jx(t,e){return(jx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dx=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=o||new yb(n,i);return t=Nx(this,Fx(e).call(this,r,a)),d(yb)&&wa(Sa("exception").vectorlayer_method),t.style_=null,t.filter_=null,t.minZoom=r.minZoom,t.maxZoom=r.maxZoom,t.setStyle(n.style),a.on(Qf,function(e){return t.fire(Qf,[e])}),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jx(t,e)}(e,nd),r=e,(n=[{key:"getFilter",value:function(){return this.filter_}},{key:"removeFilter",value:function(){this.setFilter(null)}},{key:"addFeatures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;v(r)||(m(r)||(r=[r]),this.getImpl().addFeatures(r,e))}},{key:"getFeatures",value:function(t){var e=t;return v(this.getFilter())&&(e=!0),this.getImpl().getFeatures(e,this.filter_)}},{key:"getFeatureById",value:function(t){var e=null;return v(t)?aF(Sa("dialog").id_feature):e=this.getImpl().getFeatureById(t),e}},{key:"removeFeatures",value:function(t){var e=t;m(e)||(e=[e]),this.getImpl().removeFeatures(e)}},{key:"clear",value:function(){this.removeFilter(),this.removeFeatures(this.getFeatures(!0))}},{key:"refresh",value:function(){this.getImpl().refresh(!0),this.redraw()}},{key:"redraw",value:function(){this.getImpl().redraw()}},{key:"getFeaturesExtent",value:function(t){return this.getImpl().getFeaturesExtent(!0,this.filter_)}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}},{key:"setStyle",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_OPTIONS_STYLE;this.getImpl().isLoaded()?(v(this.getStyle())&&this.applyStyle_(i,n),v(t)||this.applyStyle_(t,n)):this.once(Qf,function(){v(r.getStyle())&&r.applyStyle_(i,n),v(t)||r.applyStyle_(t,n)})}},{key:"applyStyle_",value:function(t,e){var r=t;w(r)?r=u_.deserialize(r):r instanceof u_||(r=Cx.generateStyleLayer(r,this)),r instanceof u_&&(!v(this.style_)&&this.style_ instanceof u_&&this.style_.unapply(this),r.apply(this,e),this.style_=r,this.fire("change:style",[r,this])),this.fire("change:style",[r,this])}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null),this.getFeatures().forEach(function(t){return t.clearStyle()})}},{key:"getLegendURL",value:function(){var t=this.getImpl().getLegendURL();return-1!==t.indexOf(nd.LEGEND_DEFAULT)&&-1===t.indexOf(nd.LEGEND_ERROR)&&this.style_ instanceof u_&&(t=this.style_.toImage()),t}},{key:"getGeometryType",value:function(){var t=null;if(!v(this.getFeatures())){var e=this.getFeatures()[0];v(e)||v(e.getGeometry())||(t=e.getGeometry().type)}return t}},{key:"getMaxExtent",value:function(){return this.getFeaturesExtent()}},{key:"calculateMaxExtent",value:function(){return this.getImpl().getFeaturesExtentPromise(!0,this.filter_)}},{key:"setFilter",value:function(t){if(v(t)||t instanceof kx){this.filter_=t;var e=this.style_;e instanceof CE&&e.getImpl().deactivateChangeEvent(),this.redraw(),e instanceof CE&&(e.getImpl().activateChangeEvent(),e.refresh())}else aF(Sa("dialog").vector_filter)}},{key:"toGeoJSON",value:function(){var t=this.map_.getProjection().code,e=this.getFeatures().map(function(t){return t.getGeoJSON()});return{type:"FeatureCollection",features:oa(e,t)}}},{key:"type",get:function(){return"Vector"},set:function(t){d(t)||v(t)||"Vector"===t||wa("El tipo de capa debe ser '".concat("Vector").concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&Ax(r.prototype,n),i&&Ax(r,i),e}();Dx.DEFAULT_OPTIONS_STYLE={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5};var Gx=Dx,Bx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zx=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==e.distance?e.distance:20,r.features=[],r.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Ut(e.getType()==De.POINT,10),e},r.boundRefresh_=r.refresh.bind(r),r.setSource(e.source||null),r}return Bx(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(Ct.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Ct.CHANGE,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!(nt(a)in n)){var s=this.geometryFunction(a);if(s){re(s.getCoordinates(),t),Wt(t,e,t);var u=this.source.getFeaturesInExtent(t);u=u.filter(function(t){var e=nt(t);return!(e in n)&&(n[e]=!0,!0)}),this.features.push(this.createCluster(u))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var n=this.geometryFunction(t[r]);n?Ec(e,n.getCoordinates()):t.splice(r,1)}Pc(e,1/t.length);var i=new ri(new en(e));return i.set("features",t),i},e}(ub);function Ux(t){return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vx(t,e,r){return(Vx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yx(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Yx(t){return(Yx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wx(t,e){return(Wx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Zx=function(t){function e(){var t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(t=!(n=Yx(e).call(this,i))||"object"!==Ux(n)&&"function"!=typeof n?Xx(r):n).styleCluster_=i.style,t.oldCluster_=new ub,t.clusters_=[],t.animation_={start:!1},t.set("animationDuration","number"==typeof i.animationDuration?i.animationDuration:700),t.set("animationMethod",i.animationMethod||Fc),t.getSource().on("change",t.saveCluster_.bind(Xx(Xx(t)))),t.on("prerender",t.animate.bind(Xx(Xx(t)))),t.on("postrender",t.postanimate.bind(Xx(Xx(t)))),t.setStyle(i.style),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wx(t,e)}(e,Q_),r=e,i=[{key:"getClusterForFeature",value:function(t,e){return e.find(function(e){var r,n=e.get("features");return v(n)||(r=n.find(function(e){return e===t})),r})}}],(n=[{key:"saveCluster_",value:function(){if(this.oldCluster_.clear(),this.get("animationDuration")){var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldCluster_.addFeatures(this.clusters_),this.clusters_=t.slice(0),this.sourceChanged=!0)}}},{key:"animate",value:function(t){var e=this,r=t,n=this.get("animationDuration");if(n){if(this.animation_.resolution!==r.frameState.viewState.resolution&&this.sourceChanged){var i=r.frameState.viewState.resolution,o=r.frameState.extent;this.animation_.reverse=this.animation_.resolution>=i,this.prepareAnimation_(o,r.frameState.viewState.resolution),r.frameState.time=this.animation_.start}var a=this.animation_.clustersFrom.length;if(a>0&&a<=1e3&&this.animation_.start){var s=kf(r),u=(r.frameState.time-this.animation_.start)/n;u>1&&(this.animation_.start=!1,u=1),u=this.get("animationMethod")(u),r.context.save(),r.context.globalAlpha=this.getOpacity(),this.animation_.clustersFrom.forEach(function(t,n){var i=t.getGeometry().getCoordinates(),o=e.animation_.clustersTo[n].getGeometry().getCoordinates();e.animation_.reverse?(i[0]=o[0]+u*(i[0]-o[0]),i[1]=o[1]+u*(i[1]-o[1])):(i[0]+=u*(o[0]-i[0]),i[1]+=u*(o[1]-i[1]));var a=e.getStyle()(t,r.frameState.viewState.resolution),l=new en(i);v(a)||a.forEach(function(t){var e=t.getImage();v(e)||(null==e.getOrigin()&&(e.origin_=[]),null==e.getAnchor()&&(e.normalizedAnchor_=[]),null==e.getSize()&&(e.size_=[])),s.setStyle(t),s.drawGeometry(l)})}),r.context.restore(),r.frameState.animate=!0,r.context.save(),r.context.beginPath(),r.context.rect(0,0,0,0),r.context.clip(),this.clip_=!0}else this.animation_.clustersFrom.length=0,this.animation_.clustersTo.length=0,this.animation_.start=!1}}},{key:"prepareAnimation_",value:function(t,r){var n=this;this.animation_.clustersFrom=[],this.animation_.clustersTo=[];var i=Wt(t,100*r),o=this.oldCluster_.getFeaturesInExtent(i),a=this.getSource().getFeaturesInExtent(i),s=this.animation_.reverse?a:o,u=this.animation_.reverse?o:a;s.forEach(function(t){var r=t.get("features");if(!v(r)){var i=e.getClusterForFeature(r[0],u);v(i)||!1===i||(n.animation_.clustersFrom.push(t),n.animation_.clustersTo.push(i))}}),this.animation_.resolution=r,this.sourceChanged=!1,this.animation_.start=(new Date).getTime()}},{key:"postanimate",value:function(t){this.clip_&&(t.context.restore(),this.clip_=!1)}},{key:"setStyle",value:function(t){Vx(Yx(e.prototype),"setStyle",this).call(this,this.styleCluster_)}}])&&qx(r.prototype,n),i&&qx(r,i),e}(),Hx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kx={SELECT:"select"},$x=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return Hx(e,t),e}(Mt),Jx={};function Qx(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,o=t.map,a=this.getFeatures(),s=[],u=[];if(i){st(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return u.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var c=a.item(l),h=u.indexOf(c);h>-1?u.splice(h,1):(a.remove(c),s.push(c))}0!==u.length&&a.extend(u)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||yt(a.getArray(),t)?(r||n)&&yt(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(u.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.length-1;f>=0;--f)a.remove(s[f]);a.extend(u)}return(u.length>0||s.length>0)&&this.dispatchEvent(new $x(Kx.SELECT,u,s,t)),!0}var tE=function(t){function e(e){var r,n,i=t.call(this,{handleEvent:Qx})||this,o=e||{};if(i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=o.condition?o.condition:Lh,i.addCondition_=o.addCondition?o.addCondition:Ch,i.removeCondition_=o.removeCondition?o.removeCondition:Ch,i.toggleCondition_=o.toggleCondition?o.toggleCondition:Rh,i.multi_=!!o.multi&&o.multi,i.filter_=o.filter?o.filter:xt,i.hitTolerance_=o.hitTolerance?o.hitTolerance:0,i.style_=void 0!==o.style?o.style:(vt((r=Io())[De.POLYGON],r[De.LINE_STRING]),vt(r[De.GEOMETRY_COLLECTION],r[De.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.features_=o.features||new Bl,o.layers)if("function"==typeof o.layers)n=o.layers;else{var a=o.layers;n=function(t){return yt(a,t)}}else n=xt;return i.layerFilter_=n,i.featureLayerAssociation_={},i}return Hx(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[nt(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[nt(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(Fl.ADD,this.boundAddFeature_),this.features_.addEventListener(Fl.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Fl.ADD,this.boundAddFeature_),this.features_.removeEventListener(Fl.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;this.style_&&this.applySelectedStyle_(e)},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=nt(t);e in Jx||(Jx[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){var r=nt(t),n=this.getMap().getInteractions().getArray().filter(function(r){return r instanceof e&&r.getStyle()&&-1!==r.getFeatures().getArray().indexOf(t)});n.length>0?t.setStyle(n[n.length-1].getStyle()):(t.setStyle(Jx[r]),delete Jx[r])},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[nt(t)]},e}(wh);function eE(t){return(eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nE(t){return(nE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iE(t,e){return(iE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var aE=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n,i,o=r,a=new Q_({source:new ub({features:new Bl,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:o.featureStyle});return r.layers.push(a),o.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))},n=this,(t=!(i=nE(e).call(this,o))||"object"!==eE(i)&&"function"!=typeof i?oE(n):i).map=o.map,t.pointRadius=o.pointRadius||12,t.circleMaxObjects=o.circleMaxObjects||10,t.maxObjects=o.maxObjects||60,t.spiral=!1!==o.spiral,t.animate=o.animate,t.animationDuration=o.animationDuration||500,t.selectCluster_=!1!==o.selectCluster,t.maxFeaturesToSelect=o.maxFeaturesToSelect,t.facadeLayer_=o.fLayer,t.style_=o.style,t.filter_=o.filter,t.overlayLayer_=a,t.originalHandleEvent=t.handleEvent,t.on("select",t.selectCluster.bind(oE(oE(t))),oE(oE(t))),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iE(t,e)}(e,tE),r=e,(n=[{key:"setMap",value:function(t){var e=this;this.getMap()&&(this.getMap().getView()&&this.getMap().getView().un("change:resolution",this.clear.bind(this)),this.getMap().removeLayer(this.overlayLayer_)),tE.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&t.getView()&&t.getView().on("change:resolution",this.clear.bind(this)),this.handleEvent=function(t){return e.originalHandleEvent.apply(e,[t]),!0}}},{key:"clear",value:function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}},{key:"getLayer",value:function(){return this.overlayLayer_}},{key:"refreshViewEvents",value:function(){this.getMap()&&this.getMap().getView()&&this.getMap().getView().on("change:resolution",this.clear.bind(this))}},{key:"selectCluster",value:function(t){if(t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var r=e.get("features");if(r&&1!==r.length)if(r&&!(r.length>this.maxFeaturesToSelect)||this.facadeLayer_.getImpl().getNumZoomLevels()-this.map.getZoom()==1){this.selectCluster_||this.getFeatures().clear();var n=e.getGeometry().getCoordinates(),i=this.getMap().getView().getResolution(),o=i*this.pointRadius*(.5+r.length/4);!this.spiral||r.length<=this.circleMaxObjects?(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInCircle_(r,i,o,n)):(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInSpiral_(r,i,n)),this.animate&&this.animateCluster_(n)}else{var a=aa.getFeaturesExtent(r,this.map.getProjection().code);this.map.setBbox(a)}}}else this.clear()}},{key:"drawFeaturesAndLinsInCircle_",value:function(t,e,r,n){for(var i=Math.min(t.length,this.circleMaxObjects),o=0;o<i;o+=1){var a=2*Math.PI*(o/i);2!==i&&4!==i||(a+=Math.PI/4);var s=[n[0]+r*Math.sin(a),n[1]+r*Math.cos(a)];this.drawAnimatedFeatureAndLink_(t[o],e,n,s)}}},{key:"drawFeaturesAndLinsInSpiral_",value:function(t,e,r){for(var n,i=0,o=2*this.pointRadius,a=Math.min(this.maxObjects,t.length),s=0;s<a;s+=1){i+=(o+.1)/(n=o/2+o*i/(2*Math.PI));var u=e*n*Math.sin(i),l=e*n*Math.cos(i),c=[r[0]+u,r[1]+l];this.drawAnimatedFeatureAndLink_(t[s],e,r,c)}}},{key:"drawAnimatedFeatureAndLink_",value:function(t,e,r,n){var i=new ri;t.getKeys().forEach(function(e){i.set(e,t.get(e))});var o=t.getStyle();o||(o=this.facadeLayer_.getStyle().getImpl().oldOLLayer.getStyle());var a=o(t,e),s=a.map?a.map(function(t){return t.clone()}):[a.clone()];i.setId(t.getId()),i.setStyle(s),i.set("features",[t]);var u=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new en(n):t.getGeometry(),l=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new Ln([r,n]):new Ln([r,aa.getCentroid(t.getGeometry())]);i.set("geometry",u),this.overlayLayer_.getSource().addFeature(i);var c=new ri({selectclusterlink:!0,geometry:l});this.overlayLayer_.getSource().addFeature(c)}},{key:"animateCluster_",value:function(t,e){var r=this;this.listenerKey_&&(this.overlayLayer_.setVisible(!0),kt(this.listenerKey_));var n=this.overlayLayer_.getSource().getFeatures();if(n.length){this.overlayLayer_.setVisible(!1);var i=this.animationDuration||500,o=(new Date).getTime();this.listenerKey_=this.facadeLayer_.getImpl().getOL3Layer().on(["postrender","postcompose"],function(e){for(var a=kf(e),s=r.getMap().getView().getResolution(),u=Fc((e.frameState.time-o)/i),l=0;l<n.length;l+=1){if(n[l].get("features")){var c=n[l],h=c.get("features")[0],f=c.getGeometry().getCoordinates();f[0]=t[0]+u*(f[0]-t[0]),f[1]=t[1]+u*(f[1]-t[1]);for(var p=new en(f),d=r.overlayLayer_.getStyle()(h,s).map(function(t){return t.clone()}),y=0;y<d.length;y+=1){var g=d[y];g.getImage().size||(g.getImage().size=[42,42]),a.setStyle(g),a.drawLineString(new Ln([t,f]))}var m=h.getStyle();m||(m=r.facadeLayer_.getStyle().getImpl().oldOLLayer.getStyle());for(var v=m(h,s),_=v.map?v.map(function(t){return t.clone()}):[v.clone()],b=0;b<_.length;b+=1){var w=_[b],x=w.getImage();if(x instanceof iw){var E=null==x.getOrigin()?[0,0]:x.getOrigin(),S=null==x.getAnchor()?[0,0]:x.getAnchor(),O=null==x.getSize()?[42,42]:x.getSize();x.size=O,x.anchor=S,x.origin=E,w.setImage(x)}a.setStyle(w),a.drawGeometry(p)}}if(u>1)return kt(r.listenerKey_),r.overlayLayer_.setVisible(!0),void r.overlayLayer_.changed();e.frameState.animate=!0}},this)}}}])&&rE(r.prototype,n),i&&rE(r,i),e}(),sE=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])<=0},uE=function(t){t.sort(function(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]});for(var e=[],r=0;r<t.length;r+=1){for(;e.length>=2&&sE(e[e.length-2],e[e.length-1],t[r]);)e.pop();e.push(t[r])}for(var n=[],i=t.length-1;i>=0;i-=1){for(;n.length>=2&&sE(n[n.length-2],n[n.length-1],t[i]);)n.pop();n.push(t[i])}return n.pop(),e.pop(),e.concat(n)};function lE(t){return(lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cE(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fE(t,e){return!e||"object"!==lE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pE(t){return(pE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dE(t,e){return(dE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fE(this,pE(e).call(this,{}))).convexHullLayer_=null,n.oldOLLayer_=null,n.optionsVendor_=r,n.options_=t,n.clusterLayer_=null,n.selectClusterInteraction_=null,n.hoverInteraction_=null,n}var r,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dE(t,e)}(e,Nb),r=e,o=[{key:"updateRangeImpl",value:function(t,e,r,n,i){var o=i.getOptions().ranges.find(function(r){return r.min===t&&r.max===e})||!1;return o&&(o.style=r),o}}],(i=[{key:"applyToLayer",value:function(t,e){this.layer_=t,this.options_=this.updateLastRange_(),v(this.selectClusterInteraction_)||this.selectClusterInteraction_.clear(),this.updateCanvas();var r=t.getFeatures();r.length>0?this.clusterize_(r):this.layer_.on(Qf,this.clusterize_.bind(this),this)}},{key:"clusterize_",value:function(t){var e=t.map(function(t){return t.getImpl().getOLFeature()});this.clusterLayer_=new Zx({name:"Cluster",source:new zx({distance:this.options_.distance,geometryFunction:function(t){return new en(de(t.getGeometry().getExtent()))},source:new ub({features:e})}),animationDuration:this.optionsVendor_.animationDuration,style:this.clusterStyleFn_.bind(this),animationMethod:n[this.optionsVendor_.animationMethod]}),!1===this.options_.animated&&this.clusterLayer_.set("animationDuration",void 0),this.clusterLayer_.setZIndex(99999);var r=this.layer_.getImpl().getOL3Layer();r instanceof Zx||(this.oldOLLayer_=r),this.layer_.getImpl().setOL3Layer(this.clusterLayer_),v(this.options_.ranges)&&(this.options_.ranges=this.getDefaultRanges_()),!1!==this.options_.hoverInteraction&&this.addCoverInteraction_(),!1!==this.options_.selectInteraction&&this.addSelectInteraction_()}},{key:"setRanges",value:function(t){v(t)?this.options_.ranges=this.getDefaultRanges_():this.options_.ranges=t}},{key:"updateLastRange_",value:function(){var t=X({},this.options_);if(!v(this.options_)&&!v(this.options_.ranges)){var e=t.ranges;if(e.length>0){var r=(e=e.sort(function(t,e){return t.min-e.min})).pop();if(v(r.max)){var n=this.layer_.getFeatures().length;r.max=n}t.ranges.push(r)}}return t}},{key:"setAnimated",value:function(t,e,r){return r.getOptions().animated=t,!1===t?this.clusterLayer_.set("animationDuration",void 0):this.clusterLayer_.set("animationDuration",this.optionsVendor_.animationDuration),this}},{key:"addSelectInteraction_",value:function(){var t=this,e=this.layer_.getImpl().getMap();this.selectClusterInteraction_=new aE({fLayer:this.layer_,map:e,maxFeaturesToSelect:this.options_.maxFeaturesToSelect,pointRadius:this.optionsVendor_.distanceSelectFeatures,animate:!0,style:this.clusterStyleFn_.bind(this),layers:[this.clusterLayer_]}),this.selectClusterInteraction_.on("select",this.selectClusterFeature_.bind(this),this),e.getMapImpl().addInteraction(this.selectClusterInteraction_),e.getMapImpl().on("change:view",function(e){return t.selectClusterInteraction_.refreshViewEvents(e)})}},{key:"removeSelectInteraction_",value:function(){this.layer_.getImpl().getMap().getMapImpl().removeInteraction(this.selectClusterInteraction_)}},{key:"hoverFeatureFn_",value:function(t,e){if(!v(t)){var r=[];t.forEach(function(t){t instanceof vF?r=r.concat(t.getAttribute("features")):r.push(t)});var n=r.map(function(t){return t.getImpl().getOLFeature().getGeometry().getCoordinates()}),i=uE(n);if(i.length>2){var o=new ri(new Yn([i])),a=ua.olFeature2Facade(o);v(this.convexHullLayer_)?(this.convexHullLayer_=new Gx({name:"cluster_cover",extract:!1},{displayInLayerSwitcher:!1,style:new Px(this.optionsVendor_.convexHullStyle)}),this.convexHullLayer_.addFeatures(a),this.layer_.getImpl().getMap().addLayers(this.convexHullLayer_),this.layer_.getImpl().getMap().getMapImpl().getView().on("change:resolution",this.clearConvexHull.bind(this),this),this.convexHullLayer_.setStyle(new Px(this.optionsVendor_.convexHullStyle)),this.convexHullLayer_.setZIndex(99990)):(this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures()),this.convexHullLayer_.addFeatures(a))}}}},{key:"leaveFeatureFn_",value:function(t,e){v(this.convexHullLayer_)||this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures())}},{key:"addCoverInteraction_",value:function(){this.hoverKey_=this.layer_.on("hover:features",this.hoverFeatureFn_.bind(this)),this.leaveKey_=this.layer_.on("leave:features",this.leaveFeatureFn_.bind(this))}},{key:"removeCoverInteraction_",value:function(){this.layer_.unByKey("hover:features",this.hoverKey_),this.layer_.unByKey("leave:features",this.leaveKey_)}},{key:"clusterStyleFn_",value:function(t,e,r){var n,i=t.get("features");if(!i)return new Xb;var o=i.length,a=this.options_.ranges.find(function(t){return t.min<=o&&t.max>=o});if(v(a)){if(1===o){var s=i[0].getStyle();s||(s=this.oldOLLayer_.getStyle()),(n=s(i[0],e))[0].setGeometry(i[0].getGeometry())}}else{var u=a.style.clone();if(r)u.set("fill.opacity",.33);else if(this.options_.displayAmount){u.set("label",this.options_.label);var l=u.get("label.color");if(v(l)){var c=u.get("fill.color");l=v(c)?"#000":W(c),u.set("label.color",l)}}n=u.getImpl().olStyleFn(t,e)}return n}},{key:"getDefaultRanges_",value:function(){var t=this.layer_.getFeatures().length,e=Math.floor(t/3),r=[{min:2,max:e=Math.max(e,3),style:new Dw(CE.RANGE_1_DEFAULT)},{min:e,max:2*e,style:new Dw(CE.RANGE_2_DEFAULT)},{min:2*e,max:t+1,style:new Dw(CE.RANGE_3_DEFAULT)}];return this.options_.ranges=r,r}},{key:"selectClusterFeature_",value:function(t){this.clearConvexHull()}},{key:"unapply",value:function(){v(this.clusterLayer_)?v(this.layer_)||this.layer_.un(Qf,this.clusterize_.bind(this),this):(this.layer_.getImpl().setOL3Layer(this.oldOLLayer_),this.removeCoverInteraction_(),this.removeSelectInteraction_(),this.clearConvexHull(),this.deactivateChangeResolutionEvent(),this.layer_.redraw(),this.deactivateChangeEvent())}},{key:"clearConvexHull",value:function(){null!==this.convexHullLayer_&&(this.layer_.getImpl().getMap().removeLayers(this.convexHullLayer_),this.convexHullLayer_=null)}},{key:"updateCanvas",value:function(){}},{key:"activateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource(),e=zx.prototype.refresh;t.getSource().on("change",e)}}},{key:"deactivateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource();kt({bindTo:void 0,callOnce:!1,listener:zx.prototype.refresh,target:t.getSource(),type:"change"})}}},{key:"deactivateChangeResolutionEvent",value:function(){if(!v(this.layer_)&&!v(this.layer_.getImpl())){var t=this.layer_.getImpl().getMap();if(!v(t)&&!v(t.getMapImpl())){var e=t.getMapImpl().getView();kt({type:"change:resolution",bindTo:void 0,listener:this.clearConvexHull,target:e,callOnce:!1})}}}},{key:"deactivateTemporarilyChangeEvent",value:function(t,e){this.deactivateChangeEvent(),_(t)&&(null==e?t():t.apply(void 0,cE(e)))}},{key:"selectClusterInteraction",get:function(){return this.selectClusterInteraction_}},{key:"oldOLLayer",get:function(){return this.oldOLLayer_}}])&&hE(r.prototype,i),o&&hE(r,o),e}();function gE(t){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vE(t,e){return!e||"object"!==gE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _E(t){return(_E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bE(t,e){return(bE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vE(this,_E(e).call(this,t,r))).styles_=[],n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bE(t,e)}(e,u_),r=e,(n=[{key:"apply",value:function(t){this.layer_=t,v(t)||this.updateInternal_(t)}},{key:"add",value:function(t){var e=this,r=t,n=this.layer_;return this.unapplyInternal(this.layer_),m(r)||(r=[r]),(r=r.filter(function(t){return t.constructor!==e.constructor})).forEach(function(t){e.styles_=e.styles_.filter(function(e){return e.constructor!==t.constructor})}),this.styles_=this.styles_.concat(r),v(n)||this.updateInternal_(n),this}},{key:"remove",value:function(t){var e=t,r=this.layer_;m(e)||(e=[e]),v(this.layer_)||this.unapplyInternal(this.layer_),this.styles_=this.styles_.filter(function(t){return!e.includes(t)}),r.setStyle(this.oldStyle_,!0),r.setStyle(this)}},{key:"getStyles",value:function(){return this.styles_}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"clear",value:function(){this.remove(this.styles_)}},{key:"unapplyInternal",value:function(t){this.styles_.concat(this).sort(function(t,e){return Z(e,t)}).forEach(function(r){r instanceof e&&r.unapplySoft(t)})}},{key:"unapplySoft",value:function(t){}},{key:"unapply",value:function(t){this.unapplyInternal(t),this.layer_=null}},{key:"updateInternal_",value:function(t){this.styles_.concat(this).sort(function(t,e){return Z(t,e)}).forEach(function(r){r instanceof e?r.applyInternal(t):r instanceof u_&&r.apply(t,!0)})}}])&&mE(r.prototype,n),i&&mE(r,i),e}();function xE(t){return(xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function SE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function OE(t,e){return!e||"object"!==xE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function TE(t,e,r){return(TE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ME(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function ME(t){return(ME=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IE(t,e){return(IE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var PE=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new yE(r,n);return t=OE(this,ME(e).call(this,r,i)),X(r,e.DEFAULT),X(n,e.DEFAULT_VENDOR),t.optsVendor_=n,t.oldStyle_=null,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&IE(t,e)}(e,wE),r=e,i=[{key:"deserialize",value:function(t){var e=EE(t,3),r=e[0],n=e[1],i=e[2],o=r;o.ranges.forEach(function(t){t.style=u_.deserialize(t.style)}),o=K(r);var a=K(n),s=new Function(["options","optsVendor"],"return new M.style.Cluster(options, optsVendor)")(o,a),u=i.map(function(t){return u_.deserialize(t)});return s.add(u),s}}],(n=[{key:"apply",value:function(t){TE(ME(e.prototype),"apply",this).call(this,t);var r=t.getStyle();this.oldStyle_=r instanceof e?r.getOldStyle():r}},{key:"unapplySoft",value:function(t){this.getImpl().unapply()}},{key:"add",value:function(t){return v(this.layer_)||this.unapplySoft(this.layer_),TE(ME(e.prototype),"add",this).call(this,t)}},{key:"applyInternal",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"getRanges",value:function(){return this.options_.ranges}},{key:"getOptions",value:function(){return this.options_}},{key:"setRanges",value:function(t){return this.getImpl().ranges=t,this.unapply(this.layer_),this.layer_.style=this,this}},{key:"getRange",value:function(t,e){return this.options_.ranges.find(function(r){return r.min===t&&r.max===e})}},{key:"updateRange",value:function(t,e,r){return yE.updateRangeImpl(t,e,r,this.layer_,this),this.unapply(this.layer_),this.layer_.style=this,this}},{key:"setAnimated",value:function(t){return this.getImpl().setAnimated(t,this.layer_,this)}},{key:"isAnimated",value:function(){return this.options_.animated}},{key:"toImage",value:function(){return this.oldStyle_ instanceof u_?this.oldStyle_.toImage():TE(ME(e.prototype),"toImage",this).call(this)}},{key:"refresh",value:function(){if(!v(this.layer_)){var t=this.layer_;this.unapply(this.layer_),this.apply(t),this.updateCanvas()}}},{key:"toJSON",value:function(){var t=X({},this.getOptions());t.ranges=this.getRanges().map(function(t){var e=X({},t);return e.style=t.style.serialize(),e}),t=H(t);var e=X({},this.optsVendor_);return{parameters:[t,e=H(e),this.getStyles().map(function(t){return t.serialize()})],deserializedMethod:"M.style.Cluster.deserialize"}}},{key:"ORDER",get:function(){return 4}}])&&SE(r.prototype,n),i&&SE(r,i),e}();PE.DEFAULT={ranges:[],hoverInteraction:!0,displayAmount:!0,selectInteraction:!0,distance:60,animated:!0,maxFeaturesToSelect:15,label:{text:function(t){var e,r=t.getAttribute("features");return r.length&&(e=r.length.toString()),e},color:"#fff",font:"bold 15px Arial",baseline:"middle",align:"center"}},PE.DEFAULT_VENDOR={animationDuration:250,animationMethod:"linear",distanceSelectFeatures:15,convexHullStyle:{fill:{color:"#fff",opacity:.25},stroke:{color:"#7b98bc"}}},PE.RANGE_1_DEFAULT={fill:{color:"#81c89a"},stroke:{color:"#6eb988",width:3},radius:15},PE.RANGE_2_DEFAULT={fill:{color:"#85b9d2"},stroke:{color:"#6da4be",width:3},radius:20},PE.RANGE_3_DEFAULT={fill:{color:"#938fcf"},stroke:{color:"#827ec5",width:3},radius:25};var CE=PE;function LE(t){return(LE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RE(t,e){return!e||"object"!==LE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function AE(t){return(AE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NE(t,e){return(NE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var FE=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new DE;return(t=RE(this,AE(e).call(this,r))).id_=T("mapea","render_feature"),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NE(t,e)}(e,ba),r=e,(n=[{key:"getId",value:function(){return this.id_}},{key:"getGeometry",value:function(){return null}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"getType",value:function(){return this.getImpl().getType()}},{key:"getAttribute",value:function(t){var r;if(r=this.getImpl().getAttribute(t),v(r)){var n=t.split(".");n.length>1&&(r=n.reduce(function(t,r){var n;return v(t)||(n=t instanceof e?t.getAttribute(r):t[r]),n},this))}return r}},{key:"equals",value:function(t){return this.getId()===t.getId()}}])&&kE(r.prototype,n),i&&kE(r,i),e}();function jE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var DE=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olFeature_=null}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return v(t)||(r=new FE).getImpl().setOLFeature(t),r}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"getType",value:function(){return this.getOLFeature().getType()}},{key:"setOLFeature",value:function(t){v(t)||(this.olFeature_=t)}},{key:"getAttributes",value:function(){return this.olFeature_.getProperties()}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){}}])&&jE(e.prototype,r),n&&jE(e,n),t}();function GE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var BE=function(t,e){var r,n=t.getId();return v(n)||(r=e.getFeatureById(n)),v(r)&&t instanceof ta&&(r=DE.olFeature2Facade(t)),r},zE=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map_=null,this.defaultCursor_=void 0}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t){this.map_=t}},{key:"getFeaturesByLayer",value:function(t,e){var r=[];if(!v(e)&&e.isVisible()&&!v(e.getImpl().getOL3Layer())){var n=e.getImpl().getOL3Layer();this.map_.getMapImpl().forEachFeatureAtPixel(t.pixel,function(t,n){if(n instanceof Zx&&!v(t.get("features"))){var i=t.get("features").map(function(t){return BE(t,e)});if(1===i.length)r.push(i[0]);else{var o=e.getStyle();o instanceof CE||(o=o.getStyles().find(function(t){return t instanceof CE})),r.push(new vF(i,{ranges:o.getRanges(),hoverInteraction:o.getOptions().hoverInteraction,maxFeaturesToSelect:o.getOptions().maxFeaturesToSelect,distance:o.getOptions().distance}))}}else Object.prototype.hasOwnProperty.call(t.getProperties(),"selectclusterlink")||r.push(BE(t,e))},{layerFilter:function(t){var r=!1;return e.getStyle()instanceof CE&&e.getStyle().getOptions().selectInteraction&&(r=t===e.getStyle().getImpl().selectClusterInteraction.getLayer()),r=r||t===n}})}return r}},{key:"addCursorPointer",value:function(){var t=this.map_.getMapImpl().getViewport();"pointer"!==t.style.cursor&&(this.defaultCursor_=t.style.cursor),t.style.cursor="pointer"}},{key:"removeCursorPointer",value:function(){this.map_.getMapImpl().getViewport().style.cursor=this.defaultCursor_}},{key:"destroy",value:function(){this.map_.un("click",this.onMapClick_,this),this.map_=null}}])&&GE(e.prototype,r),n&&GE(e,n),t}();function UE(t){return(UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qE(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function VE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YE(t,e){return!e||"object"!==UE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function WE(t){return(WE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XE(t,e){return(XE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ZE=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zE(r);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=YE(this,WE(e).call(this,n))).map_=null,t.layers_=[],t.activated_=!1,t.prevSelectedFeatures_={},t.prevHoverFeatures_={},_(n.addTo)||wa(Sa("exception").addto_method),_(n.getFeaturesByLayer)||wa(Sa("exception").getfeaturesbylayer_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&XE(t,e)}(e,ba),r=e,(n=[{key:"addTo",value:function(t){this.map_=t,this.map_.on("move",this.moveOverMap_.bind(this)),this.map_.on("click",this.clickOnMap_.bind(this)),this.getImpl().addTo(this.map_),this.fire("added:map")}},{key:"clickOnMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.map_.removePopup(),this.layers_.forEach(function(n,i){var o=r.getFeaturesByLayer(t,n),a=qE(e.prevSelectedFeatures_[n.name]);if(a[0]===o[0]&&1===i&&o!==[]&&e.selectFeatures(a,n,t),0===o.length&&a.length>0)e.unselectFeatures(a,n,t);else if(o.length>0){var s=o.filter(function(t){return!a.some(function(e){return e.equals(t)})}),u=a.filter(function(t){return!o.some(function(e){return e.equals(t)})});u.length>0&&e.unselectFeatures(u,n,t),s.length>0&&e.selectFeatures(s,n,t)}})}}},{key:"moveOverMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.layers_.forEach(function(n){var i=r.getFeaturesByLayer(t,n),o=qE(e.prevHoverFeatures_[n.name]);if(0===i.length&&o.length>0)e.leaveFeatures_(o,n,t);else if(i.length>0){var a=i.filter(function(t){return t instanceof pF&&!o.some(function(e){return e.equals(t)})}),s=o.filter(function(t){return!i.some(function(e){return e.equals(t)})});s.length>0&&e.leaveFeatures_(s,n,t),a.length>0&&e.hoverFeatures_(a,n,t)}})}}},{key:"selectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].concat(t);var n=e.getImpl();_(n.selectFeatures)&&n.selectFeatures(t,r.coord,r),e.fire("select:features",[t,r])}},{key:"unselectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].filter(function(e){return!t.some(function(t){return t.equals(e)})});var n=e.getImpl();_(n.unselectFeatures)&&n.unselectFeatures(t,r.coord),e.fire("unselect:features",[t,r.coord])}},{key:"hoverFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].concat(t),e.fire("hover:features",[t,r]),this.getImpl().addCursorPointer()}},{key:"leaveFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].filter(function(e){return!t.some(function(t){return t.equals(e)})}),e.fire("leave:features",[t,r.coord]),this.getImpl().removeCursorPointer()}},{key:"activate",value:function(){!1===this.activated_&&(this.activated_=!0,this.fire("activated"))}},{key:"deactivate",value:function(){!0===this.activated_&&(this.activated_=!1,this.fire("deactivated"))}},{key:"addLayer",value:function(t){D(this.layers_,t)||(this.layers_.push(t),this.prevSelectedFeatures_[t.name]=[],this.prevHoverFeatures_[t.name]=[])}},{key:"removeLayer",value:function(t){this.layers_=this.layers_.filter(function(e){return!e.equals(t)}),this.prevSelectedFeatures_[t.name]=null,this.prevHoverFeatures_[t.name]=null,delete this.prevSelectedFeatures_[t.name],delete this.prevHoverFeatures_[t.name]}},{key:"destroy",value:function(){}}])&&VE(r.prototype,n),i&&VE(r,i),e}(),HE=(r(124),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),KE=Vm+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",$E={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},JE=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[Vm].featureMember=Kd(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:KE,r}return HE(e,t),e.prototype.readFlatCoordinates_=function(t,e){var r=Wd(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,i="enu";if(n){var o=yr(n);o&&(i=o.getAxisOrientation())}for(var a=r.trim().split(/\s+/),s=[],u=0,l=a.length;u<l;u++){var c=a[u].split(/,+/),h=parseFloat(c[0]),f=parseFloat(c[1]),p=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?s.push(h,f,p):s.push(f,h,p)}return s},e.prototype.readBox_=function(t,e){var r=sy([null],this.BOX_PARSERS_,t,e,this);return te(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var r=sy(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser_=function(t,e){var r=sy(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),Yd("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=ty(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=ty(Oy)))}var f=at({},i);f.node=t,ly(f,i.serializers,ry(void 0,o),l,r,u)},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var o=Yd(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();ly({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=at({},i);o.node=t,n=Array.isArray(e)?oi(e,i):ii(e,!0,i),ly(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Yd(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,u=new Array(s),l=0;l<s;++l){var c=a[l];u[l]=this.getCoords_(c,o,i)}Oy(t,u.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=Yd(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();ly({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=Yd(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Yd(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=Yd(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeRing_=function(t,e,r){var n=Yd(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=yr(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];r&&(i+=","+(t[2]||0));return i},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();Oy(a,this.getCoords_(s,o,i))},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();ly({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS_,ry("pointMember"),a,r,void 0,this)},e.prototype.writePointMember_=function(t,e,r){var n=Yd(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();ly({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];ly({node:t},this.ENVELOPE_SERIALIZERS_,ny,i,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return Yd("http://www.opengis.net/gml",$E[n.nodeName])},e}(Xm);JE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:$d(JE.prototype.readFlatCoordinates_)}},JE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:JE.prototype.innerBoundaryIsParser_,outerBoundaryIs:JE.prototype.outerBoundaryIsParser_}},JE.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Kd(JE.prototype.readFlatCoordinates_)}},JE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:$d(Xm.prototype.readPoint),MultiPoint:$d(Xm.prototype.readMultiPoint),LineString:$d(Xm.prototype.readLineString),MultiLineString:$d(Xm.prototype.readMultiLineString),LinearRing:$d(Xm.prototype.readLinearRing),Polygon:$d(Xm.prototype.readPolygon),MultiPolygon:$d(Xm.prototype.readMultiPolygon),Box:$d(JE.prototype.readBox_)}},JE.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ty(JE.prototype.writeCurveOrLineString_),MultiCurve:ty(JE.prototype.writeMultiCurveOrLineString_),Point:ty(JE.prototype.writePoint_),MultiPoint:ty(JE.prototype.writeMultiPoint_),LineString:ty(JE.prototype.writeCurveOrLineString_),MultiLineString:ty(JE.prototype.writeMultiCurveOrLineString_),LinearRing:ty(JE.prototype.writeLinearRing_),Polygon:ty(JE.prototype.writeSurfaceOrPolygon_),MultiPolygon:ty(JE.prototype.writeMultiSurfaceOrPolygon_),Surface:ty(JE.prototype.writeSurfaceOrPolygon_),MultiSurface:ty(JE.prototype.writeMultiSurfaceOrPolygon_),Envelope:ty(JE.prototype.writeEnvelope)}},JE.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ty(JE.prototype.writeLineStringOrCurveMember_),curveMember:ty(JE.prototype.writeLineStringOrCurveMember_)}},JE.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:ty(JE.prototype.writeRing_),innerBoundaryIs:ty(JE.prototype.writeRing_)}},JE.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ty(JE.prototype.writePointMember_)}},JE.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ty(JE.prototype.writeSurfaceOrPolygonMember_),polygonMember:ty(JE.prototype.writeSurfaceOrPolygonMember_)}},JE.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ty(Oy),upperCorner:ty(Oy)}};var QE=JE,tS=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),eS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rS=function(t){function e(e,r){var n=t.call(this,e)||this;return n.conditions=r,Ut(n.conditions.length>=2,57),n}return eS(e,t),e}(tS),nS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iS=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return nS(e,t),e}(rS),oS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aS=function(t){function e(e,r,n){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=r,4!==r.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=n,i}return oS(e,t),e}(tS),sS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uS=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.geometryName=r||"the_geom",o.geometry=n,o.srsName=i,o}return sS(e,t),e}(tS),lS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cS=function(t){function e(e,r,n){return t.call(this,"Contains",e,r,n)||this}return lS(e,t),e}(uS),hS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fS=function(t){function e(e,r){var n=t.call(this,e)||this;return n.propertyName=r,n}return hS(e,t),e}(tS),pS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dS=function(t){function e(e,r,n){var i=t.call(this,"During",e)||this;return i.begin=r,i.end=n,i}return pS(e,t),e}(fS),yS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gS=function(t){function e(e,r,n,i){var o=t.call(this,e,r)||this;return o.expression=n,o.matchCase=i,o}return yS(e,t),e}(fS),mS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vS=function(t){function e(e,r,n){return t.call(this,"PropertyIsEqualTo",e,r,n)||this}return mS(e,t),e}(gS),_S=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bS=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThan",e,r)||this}return _S(e,t),e}(gS),wS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xS=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)||this}return wS(e,t),e}(gS),ES=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SS=function(t){function e(e,r,n){return t.call(this,"Intersects",e,r,n)||this}return ES(e,t),e}(uS),OS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TS=function(t){function e(e,r,n){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=r,i.upperBoundary=n,i}return OS(e,t),e}(fS),MS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),IS=function(t){function e(e,r,n,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=r,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return MS(e,t),e}(fS),PS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CS=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return PS(e,t),e}(fS),LS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kS=function(t){function e(e,r){return t.call(this,"PropertyIsLessThan",e,r)||this}return LS(e,t),e}(gS),RS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AS=function(t){function e(e,r){return t.call(this,"PropertyIsLessThanOrEqualTo",e,r)||this}return RS(e,t),e}(gS),NS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FS=function(t){function e(e){var r=t.call(this,"Not")||this;return r.condition=e,r}return NS(e,t),e}(tS),jS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DS=function(t){function e(e,r,n){return t.call(this,"PropertyIsNotEqualTo",e,r,n)||this}return jS(e,t),e}(gS),GS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BS=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return GS(e,t),e}(rS),zS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),US=function(t){function e(e,r,n){return t.call(this,"Within",e,r,n)||this}return zS(e,t),e}(uS);function qS(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(iS,e))}function VS(t,e,r){return new aS(t,e,r)}var YS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),WS={"http://www.opengis.net/gml":{boundedBy:Qd(Xm.prototype.readGeometryElement,"bounds")}},XS={"http://www.opengis.net/wfs":{totalInserted:Qd(_y),totalUpdated:Qd(_y),totalDeleted:Qd(_y)}},ZS={"http://www.opengis.net/wfs":{TransactionSummary:Qd(function(t,e){return sy({},XS,t,e)},"transactionSummary"),InsertResults:Qd(function(t,e){return sy([],aO,t,e)},"insertIds")}},HS={"http://www.opengis.net/wfs":{PropertyName:ty(Oy)}},KS={"http://www.opengis.net/wfs":{Insert:ty(function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a=n.gmlVersion,s=Yd(o,i);t.appendChild(s),2===a?QE.prototype.writeFeatureElement(s,e,r):Jm.prototype.writeFeatureElement(s,e,r)}),Update:ty(function(t,e,r){var n=r[r.length-1];Ut(void 0!==e.getId(),27);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=uO(o,i),u=e.getGeometryName();t.setAttribute("typeName",s),t.setAttributeNS(JS,"xmlns:"+o,a);var l=e.getId();if(void 0!==l){for(var c=e.getKeys(),h=[],f=0,p=c.length;f<p;f++){var d=e.get(c[f]);if(void 0!==d){var y=c[f];d&&"function"==typeof d.getSimplifiedGeometry&&(y=u),h.push({name:y,value:d})}}ly({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},KS,ry("Property"),h,r),sO(t,l,r)}}),Delete:ty(function(t,e,r){var n=r[r.length-1];Ut(void 0!==e.getId(),26);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=uO(o,i);t.setAttribute("typeName",s),t.setAttributeNS(JS,"xmlns:"+o,a);var u=e.getId();void 0!==u&&sO(t,u,r)}),Property:ty(function(t,e,r){var n=Yd(tO,"Name"),i=r[r.length-1].gmlVersion;if(t.appendChild(n),Oy(n,e.name),void 0!==e.value&&null!==e.value){var o=Yd(tO,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===i?QE.prototype.writeGeometryElement(o,e.value,r):Jm.prototype.writeGeometryElement(o,e.value,r):Oy(o,e.value)}}),Native:ty(function(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId);void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore));void 0!==e.value&&Oy(t,e.value)})}},$S="feature",JS="http://www.w3.org/2000/xmlns/",QS="http://www.opengis.net/ogc",tO="http://www.opengis.net/wfs",eO="http://www.opengis.net/fes",rO={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},nO="1.1.0",iO=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType_=n.featureType,r.featureNS_=n.featureNS,r.gmlFormat_=n.gmlFormat?n.gmlFormat:new Jm,r.schemaLocation_=n.schemaLocation?n.schemaLocation:rO[nO],r}return YS(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};at(r,{featureType:this.featureType_,featureNS:this.featureNS_}),at(r,this.getReadOptions(t,e||{}));var n=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[Vm].featureMember=Kd(Xm.prototype.readFeaturesInternal);var i=sy([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Zd(t);return this.readTransactionResponseFromDocument(e)}return Xd(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Zd(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Xd(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=by(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,sy(e,WS,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return sy({},ZS,t,[])},e.prototype.writeGetFeature=function(t){var e,r=Yd(tO,"GetFeature");if(r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0"),t&&(t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){Ut(t.geometryName,12);var n=VS(t.geometryName,t.bbox,t.srsName);e=e?qS(e,n):n}r.setAttributeNS(Vd,"xsi:schemaLocation",this.schemaLocation_);var i={node:r};return at(i,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),Ut(Array.isArray(t.featureTypes),11),function(t,e,r){var n=r[r.length-1],i=at({},n);i.node=t,ly(i,lO,ry("Query"),e,r)}(r,t.featureTypes,[i]),r},e.prototype.writeTransaction=function(t,e,r,n){var i,o,a=[],s=Yd(tO,"Transaction"),u=n.version?n.version:nO,l="1.0.0"===u?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",u),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle));var c=rO[u];s.setAttributeNS(Vd,"xsi:schemaLocation",c);var h=n.featurePrefix?n.featurePrefix:$S;return t&&(o=at({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),at(o,i),ly(o,KS,ry("Insert"),t,a)),e&&(o=at({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),at(o,i),ly(o,KS,ry("Update"),e,a)),r&&ly({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},KS,ry("Delete"),r,a),n.nativeElements&&ly({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},KS,ry("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),yr(r.pop().srsName)}return null},e}(Um);var oO={"http://www.opengis.net/ogc":{FeatureId:Kd(function(t,e){return t.getAttribute("fid")})}};var aO={"http://www.opengis.net/wfs":{Feature:function(t,e){ay(oO,t,e)}}};function sO(t,e,r){var n=Yd(QS,"Filter"),i=Yd(QS,"FeatureId");n.appendChild(i),i.setAttribute("fid",e),t.appendChild(n)}function uO(t,e){var r=(t=t||$S)+":";return 0===e.indexOf(r)?e:r+e}var lO={"http://www.opengis.net/wfs":{Query:ty(function(t,e,r){var n,i=r[r.length-1],o=i.featurePrefix,a=i.featureNS,s=i.propertyNames,u=i.srsName;n=o?uO(o,e):e;t.setAttribute("typeName",n),u&&t.setAttribute("srsName",u);a&&t.setAttributeNS(JS,"xmlns:"+o,a);var l=at({},i);l.node=t,ly(l,HS,ry("PropertyName"),s,r);var c=i.filter;if(c){var h=Yd(QS,"Filter");t.appendChild(h),cO(h,c,r)}})},"http://www.opengis.net/ogc":{During:ty(function(t,e,r){var n=Yd(eO,"ValueReference");Oy(n,e.propertyName),t.appendChild(n);var i=Yd(Vm,"TimePeriod");t.appendChild(i);var o=Yd(Vm,"begin");i.appendChild(o),gO(o,e.begin);var a=Yd(Vm,"end");i.appendChild(a),gO(a,e.end)}),And:ty(hO),Or:ty(hO),Not:ty(function(t,e,r){var n={node:t},i=e.condition;ly(n,lO,ry(i.getTagName()),[i],r)}),BBOX:ty(function(t,e,r){r[r.length-1].srsName=e.srsName,dO(t,e.geometryName),Jm.prototype.writeGeometryElement(t,e.extent,r)}),Contains:ty(function(t,e,r){r[r.length-1].srsName=e.srsName,dO(t,e.geometryName),Jm.prototype.writeGeometryElement(t,e.geometry,r)}),Intersects:ty(function(t,e,r){r[r.length-1].srsName=e.srsName,dO(t,e.geometryName),Jm.prototype.writeGeometryElement(t,e.geometry,r)}),Within:ty(function(t,e,r){r[r.length-1].srsName=e.srsName,dO(t,e.geometryName),Jm.prototype.writeGeometryElement(t,e.geometry,r)}),PropertyIsEqualTo:ty(fO),PropertyIsNotEqualTo:ty(fO),PropertyIsLessThan:ty(fO),PropertyIsLessThanOrEqualTo:ty(fO),PropertyIsGreaterThan:ty(fO),PropertyIsGreaterThanOrEqualTo:ty(fO),PropertyIsNull:ty(function(t,e,r){dO(t,e.propertyName)}),PropertyIsBetween:ty(function(t,e,r){dO(t,e.propertyName);var n=Yd(QS,"LowerBoundary");t.appendChild(n),yO(n,""+e.lowerBoundary);var i=Yd(QS,"UpperBoundary");t.appendChild(i),yO(i,""+e.upperBoundary)}),PropertyIsLike:ty(function(t,e,r){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString());dO(t,e.propertyName),yO(t,""+e.pattern)})}};function cO(t,e,r){ly({node:t},lO,ry(e.getTagName()),[e],r)}function hO(t,e,r){for(var n={node:t},i=e.conditions,o=0,a=i.length;o<a;++o){var s=i[o];ly(n,lO,ry(s.getTagName()),[s],r)}}function fO(t,e,r){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),dO(t,e.propertyName),yO(t,""+e.expression)}function pO(t,e,r){var n=Yd(QS,t);Oy(n,r),e.appendChild(n)}function dO(t,e){pO("PropertyName",t,e)}function yO(t,e){pO("Literal",t,e)}function gO(t,e){var r=Yd(Vm,"TimeInstant");t.appendChild(r);var n=Yd(Vm,"timePosition");r.appendChild(n),Oy(n,e)}var mO=iO,vO=r(98),_O=r.n(vO),bO=r(99),wO=r.n(bO);function xO(t){return(xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SO(t,e){return!e||"object"!==xO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function OO(t){return(OO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TO(t,e){return(TO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var MO=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=SO(this,OO(e).call(this,{}))).facadeMap_=null,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&TO(t,e)}(e,ih),r=e,(n=[{key:"addTo",value:function(t,e){this.facadeMap_=t,ih.call(this,{element:e,target:null}),t.getMapImpl().addControl(this)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"getElement",value:function(){return this.element}}])&&EO(r.prototype,n),i&&EO(r,i),e}();function IO(t){return(IO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PO(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function CO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function LO(t,e){return!e||"object"!==IO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kO(t){return(kO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RO(t,e){return(RO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var AO=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=LO(this,kO(e).call(this))).userFormats=["text/html","text/plain","application/vnd.ogc.gml"],n.featureCount=r.featureCount,v(n.featureCount)&&(n.featureCount=10),n.buffer=r.buffer||5,n.element=document.createElement("div"),n.activated=t,n.currentFormat=0,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RO(t,e)}(e,MO),r=e,i=[{key:"insert",value:function(t,e){var r=!1;switch(e){case"text/html":var n=document.createElement("div");n.innerHTML=t;var i="";Array.prototype.forEach.call(n.querySelectorAll("body"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("div"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("table"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("b"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("span"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("input"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("a"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("img"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("p"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("ul"),function(t){i+=t.innerHTML.trim()}),Array.prototype.forEach.call(n.querySelectorAll("li"),function(t){i+=t.innerHTML.trim()}),i.length>0&&!/WMS\s+server\s+error/i.test(t)&&(r=!0);break;case"application/vnd.ogc.gml":r=(new mO).readFeatures(t).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(t)||/features\s+were\s+found/i.test(t)||/:$/i.test(t)||(r=!0)}return r}},{key:"unsupportedFormat",value:function(t,r){var n=!1;return"text/html"===r&&(n=e.regExs.msUnsupportedFormat.test(t)),n}}],(n=[{key:"addTo",value:function(t,r){!1===t.getMapImpl().getControls().getArray().some(function(t){return t instanceof e})&&(this.facadeMap_=t,t.getMapImpl().addControl(this),this.addOnClickEvent_())}},{key:"deleteOnClickEvent_",value:function(){kt(this.clickEventKey_)}},{key:"addOnClickEvent_",value:function(){var t=this,e=this.facadeMap_.getMapImpl();!0===this.activated&&(this.clickEventKey_=e.on("singleclick",function(e){return t.buildUrl_(s,e)}))}},{key:"buildUrl_",value:function(t,e){this.evt=e;var r=this.facadeMap_.getMapImpl(),n=this.buildWMSInfoURL(this.facadeMap_.getWMS()),i=PO(this.buildWMTSInfoURL(this.facadeMap_.getWMTS())).concat(PO(n)).filter(function(t){return!v(t)});i.length>0?this.showInfoFromURL_(i,e.coordinate,r):t.info("No existen capas consultables")}},{key:"buildWMSInfoURL",value:function(t){var e=this,r=this.facadeMap_.getMapImpl().getView().getResolution(),n=this.facadeMap_.getProjection().code;return t.map(function(t){var i,o=t.getImpl().getOL3Layer();if(t.isVisible()&&t.isQueryable()&&!v(o)){i={};var a={INFO_FORMAT:e.userFormats[e.currentFormat],FEATURE_COUNT:e.featureCount},s=o.getSource(),u=e.evt.coordinate;/buffer/i.test(t.url)||(a.BUFFER=e.buffer);var l=s.getFeatureInfoUrl(u,r,n,a);i={layer:t.legend||t.name,url:l}}return i})}},{key:"buildWMTSInfoURL",value:function(t){var e=this;return t.map(function(t){var r;if(t.isVisible()&&t.isQueryable()){r={};var n=e.userFormats[e.currentFormat],i=e.evt.coordinate,o=t.getFeatureInfoUrl(i,e.facadeMap_.getZoom(),n);r={layer:t.legend||t.name,url:o}}return r})}},{key:"formatInfo",value:function(t,r,n){var i=null;switch(r){case"text/html":i=t;break;case"application/vnd.ogc.gml":var o=(new mO).readFeatures(t);i="",o.forEach(function(t){var e=t.getKeys();i+="<div class='divinfo'>",i+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat(N(n)," '</td></tr>'");for(var r=0,o=e.length;r<o;r+=1){var a=e[r],s=t.get(a);i+='<tr><td class="key"><b>',i+=N(a),i+='</b></td><td class="value">',i+=s,i+="</td></tr>"}i+="</tbody></table></div>"});break;case"text/plain":i=e.regExs.gsResponse.test(t)?this.txtToHtmlGeoserver(t,n):this.txtToHtmlMapserver(t,n)}return i}},{key:"txtToHtmlGeoserver",value:function(t,r){var n=t,i=(n=(n=n.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),o="<div class='divinfo'>";o+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(N(r),"</td></tr>");for(var a=0,s=i.length;a<s;a+=1){var u=i[a].trim();if(-1!==u.indexOf("=")){var l=u.split("="),c=l[0].trim(),h="-";l.length>1&&(0!==(h=l[1].trim()).length&&"null"!==h||(h="-")),!1===e.regExs.gsGeometry.test(c)&&(o+='<tr><td class="key"><b>',o+=N(c),o+='</b></td><td class="value">',o+=h,o+="</td></tr>")}else e.regExs.gsNewFeature.test(u)&&(o+='<tr><td class="header" colspan="3">'.concat(N(r),"</td></tr>"))}return o+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(t){for(var r=t,n=(r=r.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),i=(r=(r=(r=(r=r.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),o="",a="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(N(n),"</td></tr>"),s=0,u=i.length;s<u;s+=1){var l=i[s].trim(),c=i[s]?i[s].trim():"",h=l.split(";"),f=h[0].trim(),p="-";h.length>1&&0===(p=h[1].trim()).length&&(p="-"),f.length>0&&(e.regExs.msNewFeature.test(f)?c.length>0&&!e.regExs.msNewFeature.test(c)&&(o+="<tr><td class='header' colspan='3'>".concat(N(n),"</td><td></td></tr>")):(o+='<tr><td class="key"><b>',o+=N(f),o+='</b></td><td class="value">',o+=p,o+="</td></tr>"))}return o.length>0&&(o="".concat(a+o,"</tbody></table>")),o}},{key:"showInfoFromURL_",value:function(t,r,n){var i=this,o=rF(_O.a,{vars:{info:e.LOADING_MESSAGE},parseToHtml:!1}),a=[],u=this.userFormats[this.currentFormat],l=0,c={icon:"g-cartografia-info",title:e.POPUP_TITLE,content:o},h=this.facadeMap_.getPopup();v(h)?((h=new Uv).addTab(c),this.facadeMap_.addPopup(h,r)):h.getTabs().some(function(t){return t.title!==e.POPUP_TITLE})?h.addTab(c):(this.facadeMap_.removePopup(),(h=new Uv).addTab(c),this.facadeMap_.addPopup(h,r));t.forEach(function(r){var n=r.url,o=r.layer;tF(n).then(function(r){if(h=i.facadeMap_.getPopup(),200===r.code&&!1===r.error){var n=r.text;if(!0===e.insert(n,u)){var f=i.formatInfo(n,u,o);a.push({formatedInfo:f,layerName:o})}else if(e.unsupportedFormat(n,u)){if(!(i.currentFormat>2))return i.currentFormat+=1,void i.buildUrl_(s,i.evt);a.push({formatedInfo:Sa("getfeatureinfo").any_format,layerName:o})}}if(l+=1,t.length===l&&!v(h))if(h.removeTab(c),0===a.length)h.addTab({icon:"g-cartografia-info",title:e.POPUP_TITLE,content:Sa("getfeatureinfo").no_info});else{var p=rF(wO.a,{vars:{layers:a,info_of:Sa("getfeatureinfo").info_of},parseToHtml:!1}).replace(/(.*)(<a href=.*)(>.*<\/a.*)/g,'$1$2 target="_blank"$3');h.addTab({icon:"g-cartografia-info",title:e.POPUP_TITLE,content:p,listeners:[{selector:".m-getfeatureinfo-content-info div.m-arrow-right",all:!0,type:"click",callback:function(t){return i.toogleSection(t)}}]})}})}),this.popup_=h}},{key:"toogleSection",value:function(t){var e=t.target,r=e.parentElement.parentElement.querySelector(".m-getfeatureinfo-content-info-body");if(r.classList.contains("m-content-collapsed")){r.classList.remove("m-content-collapsed"),e.classList.remove("m-arrow-right"),e.classList.add("m-arrow-down");var n=this.popup_.getCoordinate();v(this.popup_.getImpl().panIntoView)||this.popup_.getImpl().panIntoView(n)}else r.classList.add("m-content-collapsed"),e.classList.add("m-arrow-right"),e.classList.remove("m-arrow-down")}}])&&CO(r.prototype,n),i&&CO(r,i),e}();AO.LOADING_MESSAGE="Obteniendo información...",AO.POPUP_TITLE=Sa("getfeatureinfo").info,AO.regExs={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i};var NO=AO;function FO(t){return(FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function DO(t,e){return!e||"object"!==FO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function GO(t){return(GO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BO(t,e){return(BO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zO=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new NO(t,n);return r=DO(this,GO(e).call(this,i,e.NAME)),d(NO)&&wa(Sa("exception").getfeatureinfo_method),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BO(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return""}},{key:"getActivationButton",value:function(t){return null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}}])&&jO(r.prototype,n),i&&jO(r,i),e}();zO.NAME="getfeatureinfo";var UO=zO,qO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VO={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},YO=function(t){function e(e){var r=t.call(this,Ct.ERROR)||this;return r.code=e.code,r.message=e.message,r}return qO(e,t),e}(Mt),WO=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.position_=null,r.transform_=pr,r.watchId_=void 0,r.addEventListener(Dt(VO.PROJECTION),r.handleProjectionChanged_),r.addEventListener(Dt(VO.TRACKING),r.handleTrackingChanged_),void 0!==n.projection&&r.setProjection(n.projection),void 0!==n.trackingOptions&&r.setTrackingOptions(n.trackingOptions),r.setTracking(void 0!==n.tracking&&n.tracking),r}return qO(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=xr(yr("EPSG:4326"),t),this.position_&&this.set(VO.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(VO.ACCURACY,e.accuracy),this.set(VO.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(VO.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(VO.HEADING,null===e.heading?void 0:Ne(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(VO.POSITION,r),this.set(VO.SPEED,null===e.speed?void 0:e.speed);var n=Wn(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(VO.ACCURACY_GEOMETRY,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new YO(t))},e.prototype.getAccuracy=function(){return this.get(VO.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(VO.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(VO.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(VO.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(VO.HEADING)},e.prototype.getPosition=function(){return this.get(VO.POSITION)},e.prototype.getProjection=function(){return this.get(VO.PROJECTION)},e.prototype.getSpeed=function(){return this.get(VO.SPEED)},e.prototype.getTracking=function(){return this.get(VO.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(VO.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(VO.PROJECTION,yr(t))},e.prototype.setTracking=function(t){this.set(VO.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(VO.TRACKING_OPTIONS,t)},e}(Gt);function XO(t){return(XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HO(t,e){return!e||"object"!==XO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function KO(t,e,r){return(KO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$O(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function $O(t){return($O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JO(t,e){return(JO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var QO=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=HO(this,$O(e).call(this,i))).vendorOptions_=i,o.geolocation_=null,o.accuracyFeature_=ua.olFeature2Facade(new ri),o.tracking_=t,o.highAccuracy_=r,o.maximumAge_=n,o.activated_=!1,o.positionFeature_=ua.olFeature2Facade(new ri({style:e.POSITION_STYLE})),o}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&JO(t,e)}(e,MO),r=e,(n=[{key:"activate",value:function(){var t=this;if(this.element.classList.add("m-locating"),v(this.geolocation_)){var r=yr(this.facadeMap_.getProjection().code);this.geolocation_=new WO(G({projection:r,tracking:this.tracking_,trackingOptions:{enableHighAccuracy:this.highAccuracy_,maximumAge:this.maximumAge_}},this.vendorOptions_,!0)),this.geolocation_.on("change:accuracyGeometry",function(e){var r=e.target.get(e.key);t.accuracyFeature_.getImpl().getOLFeature().setGeometry(r)}),this.geolocation_.once("change:position",function(r){var n=r.target.get(r.key),i=v(n)?null:new en(n);t.positionFeature_.getImpl().getOLFeature().setGeometry(i),t.facadeMap_.setCenter(n),t.element.classList.contains("m-locating")&&t.facadeMap_.setZoom(e.ZOOM),t.element.classList.remove("m-locating"),t.element.classList.add("m-located"),t.geolocation_.setTracking(t.tracking_)})}this.geolocation_.setTracking(!0),this.facadeMap_.drawFeatures([this.accuracyFeature_])}},{key:"removePositions_",value:function(){v(this.accuracyFeature_)||this.facadeMap_.removeFeatures([this.accuracyFeature_]),v(this.positionFeature_)||this.facadeMap_.removeFeatures([this.positionFeature_]),this.geolocation_.setTracking(!1)}},{key:"deactivate",value:function(){this.removePositions_(),this.element.classList.remove("m-located"),this.element.classList.remove("m-locating"),this.geolocation_=null}},{key:"setTracking",value:function(t){this.tracking_=t,this.geolocation_.setTracking(t)}},{key:"destroy",value:function(){this.removePositions_(),KO($O(e.prototype),"destroy",this).call(this)}}])&&ZO(r.prototype,n),i&&ZO(r,i),e}();QO.POSITION_STYLE=new Co({image:new wo({radius:6,fill:new xo({color:"#3399CC"}),stroke:new Eo({color:"#fff",width:2})})}),QO.ZOOM=16;var tT=QO,eT=r(100),rT=r.n(eT);r(126);function nT(t){return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oT(t,e){return!e||"object"!==nT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function aT(t){return(aT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sT(t,e){return(sT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uT=function(t){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(tT)&&wa(Sa("exception").location_method);var i=new tT(t,r,6e4,n);return oT(this,aT(e).call(this,i,e.NAME))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sT(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return rF(rT.a,{vars:{title:Sa("location").title}})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-location-button")}},{key:"equals",value:function(t){var r=t instanceof e;return r}},{key:"setTracking",value:function(t){this.getImpl().tracking=t}}])&&iT(r.prototype,n),i&&iT(r,i),e}();uT.NAME="location";var lT=uT,cT=(r(49),r(101)),hT=r.n(cT);function fT(t){return(fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dT(t,e){return!e||"object"!==fT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yT(t,e,r){return(yT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gT(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function gT(t){return(gT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mT(t,e){return(mT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vT=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=dT(this,gT(e).call(this))).facadeMap_=null,t.exactScale=r.exactScale||!1,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mT(t,e)}(e,MO),r=e,(n=[{key:"addTo",value:function(t,e){this.facadeMap_=t;this.scaleContainer_=e.querySelector("#".concat("m-scale-span")),this.element=e,this.render=this.renderCB,this.target_=null,t.getMapImpl().addControl(this)}},{key:"renderCB",value:function(t){var e=t.frameState;v(e)||function(t,e,r,n){var i,o=e;r.getWMTS().length>0?i=aa.getWMTSScale(r,n):r.getWMTS().length<=0&&!0===n?i=aa.getWMTSScale(r,n):r.getWMTS().length<=0&&1==!n&&(i=r.getScale()),v(i)||(o.innerHTML=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}(i));var a=document.querySelector("#m-level-number");null!==a&&(a.innerHTML=Math.round(r.getZoom(),2))}(e.viewState,this.scaleContainer_,this.facadeMap_,this.exactScale)}},{key:"destroy",value:function(){yT(gT(e.prototype),"destroy",this).call(this),this.scaleContainer_=null}}])&&pT(r.prototype,n),i&&pT(r,i),e}();function _T(t){return(_T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wT(t,e){return!e||"object"!==_T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xT(t){return(xT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ET(t,e){return(ET=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ST=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new vT(r);return t=wT(this,xT(e).call(this,n,e.NAME)),d(vT)&&wa(Sa("exception").scale_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ET(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return rF(hT.a,{vars:{title:Sa("scale").title,scale:Sa("scale").scale,level:Sa("scale").level}})}},{key:"equals",value:function(t){var r=t instanceof e;return r}}])&&bT(r.prototype,n),i&&bT(r,i),e}();ST.NAME="scale";var OT=ST;r(129);function TT(t){return(TT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IT(t,e){return!e||"object"!==TT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function PT(t,e,r){return(PT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CT(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function CT(t){return(CT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LT(t,e){return(LT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kT=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=IT(this,CT(e).call(this,t))).facadeMap_=null,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LT(t,e)}(e,MO),r=e,(n=[{key:"addTo",value:function(t,r){var n=this;PT(CT(e.prototype),"addTo",this).call(this,t,r);var i=t.getMapImpl();this.panel=r,this.panel.querySelector("button").addEventListener("click",function(){i.getView().setRotation(0)}),this.addRotationEvent(i),i.on("change:view",function(t){n.addRotationEvent(t.target)})}},{key:"addRotationEvent",value:function(t){var e=this;t.getView().on("change:rotation",function(t){var r=t.target.getRotation(),n="rotate(".concat(360*r/(2*Math.PI),"deg)");e.panel.querySelector("button").style.transform=n})}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&MT(r.prototype,n),i&&MT(r,i),e}();kT.PANEL_ID="m-layerswitcher-panel";var RT=kT,AT=r(102),NT=r.n(AT);function FT(t){return(FT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function DT(t,e){return!e||"object"!==FT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function GT(t){return(GT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BT(t,e){return(BT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zT=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(RT)&&wa("La implementación usada no puede crear controles Scale");var t=new RT;return DT(this,GT(e).call(this,t,e.NAME))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BT(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return rF(NT.a,{vars:{title:Sa("rotate").title}})}},{key:"equals",value:function(t){var r=t instanceof e;return r}}])&&jT(r.prototype,n),i&&jT(r,i),e}();zT.NAME="rotate";var UT=zT,qT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VT="units",YT={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},WT=[1,2,5];function XT(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var ZT=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:n.render||XT,target:n.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=i+"-inner",r.element.className=i+" "+Yi,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==n.minWidth?n.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener(Dt(VT),r.handleUnitsChanged_),r.setUnits(n.units||YT.METRIC),r.scaleBar_=n.bar||!1,r.scaleBarSteps_=n.steps||4,r.scaleBarText_=n.text||!1,r}return qT(e,t),e.prototype.getUnits=function(){return this.get(VT)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(VT,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n==YT.DEGREES?We.DEGREES:We.METERS,o=gr(r,t.resolution,e,i),a=this.minWidth_*o,s="";if(n==YT.DEGREES){var u=Ye[We.DEGREES];(a*=u)<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else n==YT.IMPERIAL?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n==YT.NAUTICAL?(o/=1852,s="nm"):n==YT.METRIC?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n==YT.US?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Ut(!1,33);for(var l,c,h,f,p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){h=Math.floor(p/3);var d=Math.pow(10,h);if(l=WT[(p%3+3)%3]*d,c=Math.round(l/o),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;++p}f=this.scaleBar_?this.createScaleBar(c,l,s):l.toFixed(h<0?-h:0)+" "+s,this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(ih);function HT(t){return(HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $T(t,e){return!e||"object"!==HT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function JT(t){return(JT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function QT(t,e){return(QT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tM="degrees",eM="imperial",rM="nautical",nM="metric",iM="us",oM=[1,2,5],aM=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$T(this,JT(e).call(this,t))).facadeMap_=null,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QT(t,e)}(e,ZT),r=e,(n=[{key:"addTo",value:function(t,e){this.facadeMap_=t,ft(this),ct(this,Dt("units"),this.handleUnitsChanged,this),t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"updateElement_",value:function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n===tM?We.DEGREES:We.METERS,o=gr(r,t.resolution,e,i);r.getUnits()!==We.DEGREES&&r.getMetersPerUnit()&&i===We.METERS&&(o*=r.getMetersPerUnit()),"d"===r.getUnits()&&(o/=12e4);var a=this.minWidth_*o,s="";if(n===tM){var u=Ye[We.DEGREES];r.getUnits()===We.DEGREES?a*=u:o/=u,a<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else n===eM?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n===rM?(o/=1852,s="nm"):n===nM?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n===iM?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Ut(!1,33);for(var l,c,h=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(l=oM[(h%3+3)%3]*Math.pow(10,Math.floor(h/3)),c=Math.round(l/o),Number.isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;h+=1}var f=l.toString().concat(" ").concat(s);this.renderedHTML_!==f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!==c&&(this.innerElement_.style.width=c.toString().concat("px"),this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}}])&&KT(r.prototype,n),i&&KT(r,i),e}(),sM=r(103),uM=r.n(sM);function lM(t){return(lM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hM(t,e){return!e||"object"!==lM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fM(t){return(fM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pM(t,e){return(pM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dM=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new aM(r);return t=hM(this,fM(e).call(this,n,e.NAME)),d(aM)&&wa(Sa("exception").scaleline_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pM(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return rF(uM.a)}},{key:"equals",value:function(t){var r=t instanceof e;return r}}])&&cM(r.prototype,n),i&&cM(r,i),e}();dM.NAME="scaleline";var yM=dM,gM=r(104),mM=r.n(gM);function vM(t){return(vM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bM(t,e){return!e||"object"!==vM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wM(t){return(wM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xM(t,e){return(xM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var EM=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bM(this,wM(e).call(this,t))).facadeMap_=null,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xM(t,e)}(e,yh),r=e,(n=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&_M(r.prototype,n),i&&_M(r,i),e}();function SM(t){return(SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TM(t,e){return!e||"object"!==SM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function MM(t){return(MM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IM(t,e){return(IM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var PM=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new EM(r);return t=TM(this,MM(e).call(this,n,e.NAME)),d(EM)&&wa(Sa("exception").panzoom_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&IM(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){return rF(mM.a)}},{key:"equals",value:function(t){var r=t instanceof e;return r}}])&&OM(r.prototype,n),i&&OM(r,i),e}();PM.NAME="panzoom";var CM=PM,LM=r(105),kM=r.n(LM),RM=(r(131),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),AM=function(t){function e(e){var r=this,n=void 0!==e.requestEncoding?e.requestEncoding:nv.KVP,i=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=Tg(e.url)),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:Og,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=n,r.setKey(r.getKeyForDimensions_()),o&&o.length>0&&(r.tileUrlFunction=Sg(o.map(FM.bind(r)))),r}return RM(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Sg(t.map(FM.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){at(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(Wg);function NM(t,e){var r=_t(t.Contents.Layer,function(t,r,n){return t.Identifier==e.layer});if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?wt(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=_t(i,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=yr(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||yr(o),s=yr(e.projection);return a&&s?wr(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=wt(r.Style,function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach(function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i});var c,h=_t(t.Contents.TileMatrixSet,function(t,e,r){return t.Identifier==o}),f=h.SupportedCRS;if(f&&(c=yr(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||yr(f)),"projection"in e){var p=yr(e.projection);p&&(c&&!wr(p,c)||(c=p))}var d=h.TileMatrix[0],y=28e-5*d.ScaleDenominator,g=c===yr("EPSG:4326")?[d.TopLeftCorner[1],d.TopLeftCorner[0]]:d.TopLeftCorner,m=d.TileWidth*y,v=d.TileHeight*y,_=[g[0],g[1]-v*d.MatrixHeight,g[0]+m*d.MatrixWidth,g[1]];null===c.getExtent()&&c.setExtent(_);var b=rv(h,_,a),w=[],x=e.requestEncoding;if(x=void 0!==x?x:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var E=t.OperationsMetadata.GetTile.DCP.HTTP.Get,S=0,O=E.length;S<O;++S)if(E[S].Constraint){var T=_t(E[S].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===x&&(x=T[0]),x!==nv.KVP)break;yt(T,nv.KVP)&&w.push(E[S].href)}else E[S].href&&(x=nv.KVP,w.push(E[S].href));return 0===w.length&&(x=nv.REST,r.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(s=t.format,w.push(t.template))})),{urls:w,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:x,tileGrid:b,style:u,dimensions:l,wrapX:!1,crossOrigin:e.crossOrigin}}function FM(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==nv.KVP&&at(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==nv.KVP?$g(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t});var n=this.tileGrid,i=this.dimensions_;return function(r,o,a){if(r){var s={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};at(s,i);var u=t;return u=e==nv.KVP?$g(u,s):u.replace(/\{(\w+?)\}/g,function(t,e){return s[e]})}}}var jM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DM=[null,"http://www.opengis.net/ows/1.1"],GM=oy(DM,{ServiceIdentification:Qd(function(t,e){return sy({},JM,t,e)}),ServiceProvider:Qd(function(t,e){return sy({},QM,t,e)}),OperationsMetadata:Qd(function(t,e){return sy({},ZM,t,e)})}),BM=function(t){function e(){return t.call(this)||this}return jM(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=sy({},GM,t,[]);return e||null},e}(py),zM=oy(DM,{DeliveryPoint:Qd(wy),City:Qd(wy),AdministrativeArea:Qd(wy),PostalCode:Qd(wy),Country:Qd(wy),ElectronicMailAddress:Qd(wy)}),UM=oy(DM,{Value:Jd(function(t,e){return wy(t)})}),qM=oy(DM,{AllowedValues:Qd(function(t,e){return sy({},UM,t,e)})}),VM=oy(DM,{Phone:Qd(function(t,e){return sy({},HM,t,e)}),Address:Qd(function(t,e){return sy({},zM,t,e)})}),YM=oy(DM,{HTTP:Qd(function(t,e){return sy({},WM,t,e)})}),WM=oy(DM,{Get:Jd(function(t,e){var r=qd(t);if(!r)return;return sy({href:r},KM,t,e)}),Post:void 0}),XM=oy(DM,{DCP:Qd(function(t,e){return sy({},YM,t,e)})}),ZM=oy(DM,{Operation:function(t,e){var r=t.getAttribute("name"),n=sy({},XM,t,e);if(!n)return;e[e.length-1][r]=n}}),HM=oy(DM,{Voice:Qd(wy),Facsimile:Qd(wy)}),KM=oy(DM,{Constraint:Jd(function(t,e){var r=t.getAttribute("name");if(!r)return;return sy({name:r},qM,t,e)})}),$M=oy(DM,{IndividualName:Qd(wy),PositionName:Qd(wy),ContactInfo:Qd(function(t,e){return sy({},VM,t,e)})}),JM=oy(DM,{Abstract:Qd(wy),AccessConstraints:Qd(wy),Fees:Qd(wy),Title:Qd(wy),ServiceTypeVersion:Qd(wy),ServiceType:Qd(wy)}),QM=oy(DM,{ProviderName:Qd(wy),ProviderSite:Qd(qd),ServiceContact:Qd(function(t,e){return sy({},$M,t,e)})});var tI=BM,eI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rI=[null,"http://www.opengis.net/wmts/1.0"],nI=[null,"http://www.opengis.net/ows/1.1"],iI=oy(rI,{Contents:Qd(function(t,e){return sy({},aI,t,e)})}),oI=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new tI,e}return eI(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=sy(r,iI,t,[]))||null):null},e}(py),aI=oy(rI,{Layer:Jd(function(t,e){return sy({},sI,t,e)}),TileMatrixSet:Jd(function(t,e){return sy({},dI,t,e)})}),sI=oy(rI,{Style:Jd(function(t,e){var r=sy({},uI,t,e);if(!r)return;var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r}),Format:Jd(wy),TileMatrixSetLink:Jd(function(t,e){return sy({},lI,t,e)}),Dimension:Jd(function(t,e){return sy({},fI,t,e)}),ResourceURL:Jd(function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o})},oy(nI,{Title:Qd(wy),Abstract:Qd(wy),WGS84BoundingBox:Qd(function(t,e){var r=sy([],pI,t,e);if(2!=r.length)return;return Yt(r)}),Identifier:Qd(wy)})),uI=oy(rI,{LegendURL:Jd(function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=qd(t),r})},oy(nI,{Title:Qd(wy),Identifier:Qd(wy)})),lI=oy(rI,{TileMatrixSet:Qd(wy),TileMatrixSetLimits:Qd(function(t,e){return sy([],cI,t,e)})}),cI=oy(rI,{TileMatrixLimits:Kd(function(t,e){return sy({},hI,t,e)})}),hI=oy(rI,{TileMatrix:Qd(wy),MinTileRow:Qd(_y),MaxTileRow:Qd(_y),MinTileCol:Qd(_y),MaxTileCol:Qd(_y)}),fI=oy(rI,{Default:Qd(wy),Value:Jd(wy)},oy(nI,{Identifier:Qd(wy)})),pI=oy(nI,{LowerCorner:Kd(gI),UpperCorner:Kd(gI)}),dI=oy(rI,{WellKnownScaleSet:Qd(wy),TileMatrix:Jd(function(t,e){return sy({},yI,t,e)})},oy(nI,{SupportedCRS:Qd(wy),Identifier:Qd(wy)})),yI=oy(rI,{TopLeftCorner:Qd(gI),ScaleDenominator:Qd(my),TileWidth:Qd(_y),TileHeight:Qd(_y),MatrixWidth:Qd(_y),MatrixHeight:Qd(_y)},oy(nI,{Identifier:Qd(wy)}));function gI(t,e){var r=wy(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}var mI=oI;function vI(t){return(vI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bI(t,e){return!e||"object"!==vI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wI(t){return(wI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xI(t,e){return(xI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var EI=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bI(this,wI(e).call(this,r,n))).facadeLayer_=null,t.capabilitiesOptionsPromise=null,t.getCapabilitiesPromise_=null,t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY,t.options=r,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xI(t,e)}(e,Gd),r=e,(n=[{key:"addTo",value:function(t){var e=this;if(this.map=t,this.fire("added:map"),!g(this.options)&&!g(this.options.minScale)&&!g(this.options.maxScale)){var r=this.map.getMapImpl().getView().getProjection().getUnits();this.options.minResolution=L(this.options.minScale,r),this.options.maxResolution=L(this.options.maxScale,r)}this.getCapabilitiesOptions_().then(function(t){return e.addLayer_(t)})}},{key:"setResolutions",value:function(t){var e=this;if(v(this.vendorOptions_.source)){var r=this.facadeLayer_.getMaxExtent(),n=yr(this.map.getProjection().code);this.getCapabilities().then(function(i){var o=i.getMatrixSet(e.name),a=i.getMatrixIds(e.name),s=i.getFormat(e.name),u=new AM({url:e.url,layer:e.name,matrixSet:o,format:s,projection:n,tileGrid:new ev({origin:fe(r),resolutions:t,matrixIds:a}),extent:r});e.ol3Layer.setSource(u)})}}},{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter(function(t){return!t.equals(e)&&t.isVisible()}).forEach(function(t){return t.setVisible(!1)}),v(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),v(r)||this.map.setBbox(r)}else v(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addLayer_",value:function(t){var e=this;if(!v(this.map)){var r=this.facadeLayer_.getMaxExtent(),n=t,i=this.options.minResolution,o=this.options.maxResolution;n.format=this.options.format||t.format;var a=new AM(G(n,{extent:r},!0));this.ol3Layer=new _d(G({visible:this.visibility,source:a,minResolution:i,maxResolution:o},this.vendorOptions_,!0));var s=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),setTimeout(function(){e.ol3Layer.setMaxZoom(e.maxZoom),e.ol3Layer.setMinZoom(e.minZoom)},500),null!==s&&this.setZIndex(s),this.ol3Layer.set("animated",!0),this.fire("added:map",this)}}},{key:"setMaxExtent",value:function(t){this.getOL3Layer().setExtent(t)}},{key:"getCapabilitiesOptions_",value:function(){var t=this;return v(this.capabilitiesOptionsPromise)&&(this.capabilitiesOptionsPromise=this.getCapabilities().then(function(e){var r=t.name,n=t.matrixSet;v(n)&&(n=t.map.getProjection().code);var i=e.Contents.Layer;m(i)&&(i=i.filter(function(e){return e.Identifier===t.facadeLayer_.name})[0]),i.Style.length>0&&void 0!==i.Style[0].LegendURL&&(t.legendUrl_=i.Style[0].LegendURL);var o=v(i.Abstract)?"":i.Abstract,a=v(i.Style)?"":i.Style,s=t.facadeLayer_.getMaxExtent(),u=v(e.ServiceProvider)?"":e.ServiceProvider,l=function(t,e){var r=_t(t.Contents.Layer,function(t,r,n){return t.Identifier==e.layer});if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?wt(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=_t(i,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=yr(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||yr(o),s=yr(e.projection);return a&&s?equivalent(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=wt(r.Style,function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach(function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i});var c,h=_t(t.Contents.TileMatrixSet,function(t,e,r){return t.Identifier==o}),f=h.SupportedCRS;if(f&&(c=yr(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||yr(f)),"projection"in e){var p=yr(e.projection);p&&(c&&!equivalent(p,c)||(c=p))}var d,y,g=r.WGS84BoundingBox;if(e.extent)d=e.extent;else if(void 0!==g){var m=yr("EPSG:4326").getExtent();y=g[0]==m[0]&&g[2]==m[2],d=transformExtent(g,"EPSG:4326",c);var v=c.getExtent();v&&(containsExtent(v,d)||(d=void 0))}var _=rv(h,d,a),b=[],w=e.requestEncoding;if(w=void 0!==w?w:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var x=t.OperationsMetadata.GetTile.DCP.HTTP.Get,E=0,S=x.length;E<S;++E)if(x[E].Constraint){var O=_t(x[E].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===w&&(w=O[0]),w!==nv.KVP)break;yt(O,nv.KVP)&&b.push(x[E].href)}else x[E].href&&(w=nv.KVP,b.push(x[E].href));return 0===b.length&&(w=nv.REST,r.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(s=t.format,b.push(t.template))})),{urls:b,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:w,tileGrid:_,style:u,dimensions:l,wrapX:y,crossOrigin:e.crossOrigin}}(e,{layer:r,matrixSet:n,extent:s}),c={abstract:o,attribution:u,style:a};return l.tileGrid.extent=s,void 0===t.facadeLayer_.capabilitiesMetadata&&(t.facadeLayer_.capabilitiesMetadata=c),l})),this.capabilitiesOptionsPromise}},{key:"getCapabilities",value:function(){var t=this;return v(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=new Promise(function(e,r){var n=P(t.url),i=new mI;tF(n).then(function(r){var n=r.xml,o=i.read(n);try{o.Contents.Layer.forEach(function(t){var e=t.Identifier;t.Style.forEach(function(t){var n=r.text.split("Layer>").filter(function(t){return t.indexOf("Identifier>".concat(e,"<"))>-1})[0];t.LegendURL=n.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]})})}catch(t){}e.call(t,o)})})),this.getCapabilitiesPromise_}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.matrixSet===t.matrixSet),r}},{key:"getFeatureInfoUrl",value:function(t,e,r){var n=this.getTileColTileRow(t,e),i=this.getRelativeTileCoordInPixel_(t,e),o=this.name,a=this.matrixSet,s=e,u=r,l=n[0],c=n[1],h=i[0],f=i[1];return O(this.url,{service:"WMTS",request:"GetFeatureInfo",version:"1.0.0",layer:o,style:"default",format:"image/jpeg",tilematrixset:a,tilematrix:s,tilerow:c,tilecol:l,J:f,I:h,infoFormat:u})}},{key:"getTileColTileRow",value:function(t,e){var r=null;if(!v(this.ol3Layer)){var n=this.ol3Layer.getSource();if(!v(n))(r=n.tileGrid.getTileCoordForCoordAndZ(t,e))[2]=-r[2]-1}return r.slice(1)}},{key:"getRelativeTileCoordInPixel_",value:function(t,e){var r;if(!v(this.ol3Layer)){var n=this.ol3Layer.getSource();if(!v(n)){var i=n.tileGrid,o=i.getTileCoordForCoordAndZ(t,e),a=i.getTileCoordExtent(o,[]),s=i.getResolution(o[0]);r=[Math.floor((t[0]-a[0])/s),Math.floor((a[3]-t[1])/s)]}}return r}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}}])&&_I(r.prototype,n),i&&_I(r,i),e}();function SI(t){return(SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function MI(t,e){return!e||"object"!==SI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function II(t){return(II=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PI(t,e){return(PI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CI=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=Kp(t,mp),a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){OI(t,e,r[e])})}return t}({},n,o);void 0!==t.minZoom&&(a.minZoom=t.minZoom),void 0!==t.maxZoom&&(a.maxZoom=t.maxZoom);var s=new EI(a,i);return r=MI(this,II(e).call(this,o,s)),d(EI)&&wa(Sa("exception").wmts_method),v(t)&&wa(Sa("exception").no_param),r.matrixSet=o.matrixSet,r.legend=o.legend,r.transparent=o.transparent,r.options=a,v(i.capabilitiesMetadata)||(r.capabilitiesMetadata=i.capabilitiesMetadata),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&PI(t,e)}(e,nd),r=e,(n=[{key:"getCapabilities",value:function(){return v(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.matrixSet===t.matrixSet),r}},{key:"getFeatureInfoUrl",value:function(t,e,r){return this.getImpl().getFeatureInfoUrl(t,e,r)}},{key:"getTileColTileRow",value:function(t,e){return this.getImpl().getTileColTileRow(t,e)}},{key:"type",get:function(){return mp},set:function(t){d(t)||v(t)||t===mp||wa("El tipo de capa debe ser '".concat(mp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"matrixSet",get:function(){return this.getImpl().matrixSet},set:function(t){this.getImpl().matrixSet=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){v(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&TI(r.prototype,n),i&&TI(r,i),e}();function LI(t){return(LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RI(t,e){return!e||"object"!==LI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function AI(t){return(AI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NI(t,e){return(NI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var FI=5,jI=function(t){function e(t,r,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new MO;return i=RI(this,AI(e).call(this,o,e.NAME)),t.getBaseLayers().forEach(function(e){e.on(Qf,t.removeLayers(e))}),i.layers=M.config.backgroundlayers.slice(0,FI).map(function(t){return{id:t.id,title:t.title,layers:t.layers.map(function(t){return/WMTS.*/.test(t)?new CI(t):new Bm(t)})}}),i.flattedLayers=i.layers.reduce(function(t,e){return t.concat(e.layers)},[]),i.activeLayer=-1,i.idLayer=null==r?0:r,i.visible=null==n||n,i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NI(t,e)}(e,ap),r=e,(n=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise(function(t,r){var n=rF(kM.a,{vars:{layers:e.layers}});e.html=n,e.listen(n),e.uniqueButton=e.html.querySelector("#m-baselayerselector-unique-btn"),e.uniqueButton.innerHTML=e.layers[0].title,e.on("added:map",function(){var t=e.visible;e.idLayer>-1&&(window.innerWidth>M.config.MOBILE_WIDTH&&(e.activeLayer=e.idLayer),e.showBaseLayer({target:{parentElement:n}},e.layers[e.activeLayer],e.activeLayer)),!1===t&&e.map_.removeLayers(e.map_.getBaseLayers())}),t(n)})}},{key:"equals",value:function(t){return t instanceof e}},{key:"showBaseLayer",value:function(t,e,r){var n=this.handlerClickDesktop.bind(this);window.innerWidth<=M.config.MOBILE_WIDTH&&(n=this.handlerClickMobile.bind(this)),n(t,e,r)}},{key:"handlerClickDesktop",value:function(t,e,r){this.removeLayers(),this.visible=!1;var n=e.layers,i=e.title,o=t.target.parentElement.querySelector("#m-baselayerselector-".concat(e.id)).classList.contains("activeBaseLayerButton");n.forEach(function(t,e,r){return t.setZIndex(e-r.length)}),t.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach(function(t){t.classList.contains("activeBaseLayerButton")&&t.classList.remove("activeBaseLayerButton")}),o||(this.visible=!0,this.activeLayer=r,t.target.parentElement.querySelector("#m-baselayerselector-unique-btn").innerText=i,t.target.parentElement.querySelector("#m-baselayerselector-".concat(e.id)).classList.add("activeBaseLayerButton"),this.map.addLayers(n))}},{key:"handlerClickMobile",value:function(t){this.removeLayers(),this.activeLayer+=1,this.activeLayer=this.activeLayer%this.layers.length;var e=this.layers[this.activeLayer],r=e.layers,n=e.id,i=e.title;r.forEach(function(t,e,r){return t.setZIndex(e-r.length)}),t.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach(function(t){t.classList.contains("activeBaseLayerButton")&&t.classList.remove("activeBaseLayerButton")}),t.target.innerHTML=i,t.target.parentElement.querySelector("#m-baselayerselector-".concat(n)).classList.add("activeBaseLayerButton"),this.map.addLayers(r)}},{key:"removeLayers",value:function(){this.map.removeLayers(this.flattedLayers),this.map.removeLayers(this.map.getBaseLayers())}},{key:"listen",value:function(t){var e=this;t.querySelectorAll("button.m-background-group-btn").forEach(function(t,r){return t.addEventListener("click",function(t){return e.showBaseLayer(t,e.layers[r],r)})}),t.querySelector("#m-baselayerselector-unique-btn").addEventListener("click",function(t){return e.showBaseLayer(t)})}}])&&kI(r.prototype,n),i&&kI(r,i),e}();jI.NAME="backgroundlayers";var DI=jI,GI=r(106),BI=r.n(GI);function zI(t){return(zI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qI(t,e){return!e||"object"!==zI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function VI(t){return(VI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function YI(t,e){return(YI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var WI=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=qI(this,VI(e).call(this))).map_=t,i.url_=r,i.format_=n,i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&YI(t,e)}(e,da),r=e,(n=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then(function(e){t(e)})}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise(function(t,r){tF(e.url_).then(function(r){var n=e.map_.getProjection().code;if(v(r.text))wa(Sa("exception").no_kml_response);else{var i=e.format_.readCustomFeatures(r.text,{featureProjection:n}),o=e.format_.getScreenOverlay(),a=i.map(function(t){var e=new pF(t.getId(),{geometry:{coordinates:t.getGeometry().getCoordinates(),type:t.getGeometry().getType()},properties:t.getProperties()});return e.getImpl().getOLFeature().setStyle(t.getStyle()),e});t({features:a,screenOverlay:o})}})})}}])&&UI(r.prototype,n),i&&UI(r,i),e}();function XI(t){return(XI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ZI,HI,KI,$I,JI,QI,tP,eP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rP=["http://www.google.com/kml/ext/2.2"],nP=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],iP={fraction:Lo.FRACTION,pixels:Lo.PIXELS,insetPixels:Lo.PIXELS},oP=oy(nP,{ExtendedData:JP,Region:QP,MultiGeometry:Qd(qP,"geometry"),LineString:Qd(BP,"geometry"),LinearRing:Qd(zP,"geometry"),Point:Qd(VP,"geometry"),Polygon:Qd(WP,"geometry"),Style:Qd(ZP),StyleMap:function(t,e){var r=TP.call(this,t,e);if(!r)return;var n=e[e.length-1];Array.isArray(r)?n.Style=r:"string"==typeof r?n.styleUrl=r:Ut(!1,38)},address:Qd(wy),description:Qd(wy),name:Qd(wy),open:Qd(dy),phoneNumber:Qd(wy),styleUrl:Qd(EP),visibility:Qd(dy)},oy(rP,{MultiTrack:Qd(function(t,e){var r=sy([],RP,t,e);if(!r)return;return new $n(r)},"geometry"),Track:Qd(NP,"geometry")})),aP=oy(nP,{ExtendedData:JP,Region:QP,Link:function(t,e){ay(sP,t,e)},address:Qd(wy),description:Qd(wy),name:Qd(wy),open:Qd(dy),phoneNumber:Qd(wy),visibility:Qd(dy)}),sP=oy(nP,{href:Qd(EP)}),uP=oy(nP,{LatLonAltBox:function(t,e){var r=sy({},rC,t,e);if(!r)return;var n=e[e.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(t,e){var r=sy({},nC,t,e);if(!r)return;var n=e[e.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),lP=oy(nP,["Document","Placemark"]),cP=oy(nP,{Document:ty(function(t,e,r){ly({node:t},uC,lC,e,r,void 0,this)}),Placemark:ty(RC)}),hP=null;var fP,pP=null;var dP,yP=null;var gP=null;var mP=null;var vP,_P=null;var bP=function(t){function e(e){var r=t.call(this)||this,n=e||{};return _P||(hP=new xo({color:ZI=[255,255,255,1]}),HI=[20,2],KI=Lo.PIXELS,$I=Lo.PIXELS,JI=[64,64],QI="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",tP=.5,pP=new Vo({anchor:HI,anchorOrigin:Uo.BOTTOM_LEFT,anchorXUnits:KI,anchorYUnits:$I,crossOrigin:"anonymous",rotation:0,scale:tP,size:JI,src:QI}),fP="NO_IMAGE",yP=new Eo({color:ZI,width:1}),dP=new Eo({color:[51,51,51,1],width:2}),gP=new Mb({font:"bold 16px Helvetica",fill:hP,stroke:dP,scale:.8}),mP=new Co({fill:hP,image:pP,text:gP,stroke:yP,zIndex:0}),_P=[mP]),r.dataProjection=yr("EPSG:4326"),r.defaultStyle_=n.defaultStyle?n.defaultStyle:_P,r.extractStyles_=void 0===n.extractStyles||n.extractStyles,r.writeStyles_=void 0===n.writeStyles||n.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===n.showPointNames||n.showPointNames,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r}return eP(e,t),e.prototype.readDocumentOrFolder_=function(t,e){var r=sy([],oy(nP,{Document:Hd(this.readDocumentOrFolder_,this),Folder:Hd(this.readDocumentOrFolder_,this),Placemark:Kd(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);return r||void 0},e.prototype.readPlacemark_=function(t,e){var r=sy({geometry:null},oP,t,e,this);if(r){var n=new ri,i=t.getAttribute("id");null!==i&&n.setId(i);var o=e[0],a=r.geometry;if(a&&ii(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){var s=function(t,e,r,n,i){return function(o,a){var s=i,u="",l=[];if(s){var c=o.getGeometry();if(c){var h=c.getType();h===De.GEOMETRY_COLLECTION?(l=c.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===De.POINT||e===De.MULTI_POINT}),s=l.length>0):s=h===De.POINT||h===De.MULTI_POINT}}s&&(u=o.get("name"),(s=s&&!!u)&&u.search(/&[^&]+;/)>-1&&(vP||(vP=document.createElement("textarea")),vP.innerHTML=u,u=vP.value));var f=r;if(t?f=t:e&&(f=function t(e,r,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],r,n)):r}(e,r,n)),s){var p=function(t,e){var r=[0,0],n="start",i=t.getImage();if(i){var o=i.getImageSize();if(null===o&&(o=JI),2==o.length){var a=i.getScale();r[0]=a*o[0]/2,r[1]=-a*o[1]/2,n="left"}}var s=t.getText();s?((s=s.clone()).setFont(s.getFont()||gP.getFont()),s.setScale(s.getScale()||gP.getScale()),s.setFill(s.getFill()||gP.getFill()),s.setStroke(s.getStroke()||dP)):s=gP.clone();return s.setText(e),s.setOffsetX(r[0]),s.setOffsetY(r[1]),s.setTextAlign(n),new Co({image:i,text:s})}(f[0],u);if(l.length>0){p.setGeometry(new fi(l));var d=new Co({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[p,d].concat(f.slice(1))}return p}return f}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(s)}return delete r.Style,n.setProperties(r,!0),n}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=ZP.call(this,t,e);if(n){var i=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=TP.call(this,t,e);if(n){var i,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readFeatureFromNode=function(t,e){if(!yt(nP,t.namespaceURI))return null;var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){if(!yt(nP,t.namespaceURI))return[];var r,n=t.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&vt(r,a)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Zd(t);return this.readNameFromDocument(e)}return Xd(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(yt(nP,e.namespaceURI)&&"name"==e.localName)return wy(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var r=e.localName;if(yt(nP,e.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=Zd(t);vt(e,this.readNetworkLinksFromDocument(r))}else Xd(t)?vt(e,this.readNetworkLinksFromDocument(t)):vt(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&vt(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(yt(nP,r.namespaceURI)&&"NetworkLink"==r.localName){var n=sy({},aP,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!yt(nP,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||vt(e,this.readNetworkLinksFromNode(r))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=Zd(t);vt(e,this.readRegionFromDocument(r))}else Xd(t)?vt(e,this.readRegionFromDocument(t)):vt(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&vt(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(yt(nP,r.namespaceURI)&&"Region"==r.localName){var n=sy({},uP,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!yt(nP,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||vt(e,this.readRegionFromNode(r))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Yd(nP[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",rP[0]),r.setAttributeNS(n,"xmlns:xsi",Vd),r.setAttributeNS(Vd,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=lP[r.namespaceURI],s=iy(o,a);return ly(i,cP,ny,s,[e],a,this),r},e}(Um);function wP(t){var e=Wd(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function xP(t){for(var e,r=Wd(t,!1),n=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(r);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),r=r.substr(e[0].length)}if(""===r)return n}function EP(t){var e=Wd(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function SP(t){return my(t)}var OP=oy(nP,{Pair:function(t,e){var r=sy({},tC,t,e,this);if(!r)return;var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(e[e.length-1]=i);var o=r.Style;o&&(e[e.length-1]=o)}}});function TP(t,e){return sy(void 0,OP,t,e,this)}var MP=oy(nP,{Icon:Qd(function(t,e){var r=sy({},FP,t,e);return r||null}),color:Qd(wP),heading:Qd(my),hotSpot:Qd(function(t){var e,r=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==n?Uo.BOTTOM_LEFT:Uo.TOP_LEFT:"insetPixels"!==n?Uo.BOTTOM_RIGHT:Uo.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:iP[r],y:parseFloat(t.getAttribute("y")),yunits:iP[n],origin:e}}),scale:Qd(SP)});var IP=oy(nP,{color:Qd(wP),scale:Qd(SP)});var PP=oy(nP,{color:Qd(wP),width:Qd(my)});var CP=oy(nP,{color:Qd(wP),fill:Qd(dy),outline:Qd(dy)});var LP=oy(nP,{coordinates:$d(xP)});function kP(t,e){return sy(null,LP,t,e)}var RP=oy(rP,{Track:Kd(NP)});var AP=oy(nP,{when:function(t,e){var r=e[e.length-1].whens,n=Wd(t,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},oy(rP,{coord:function(t,e){var r=e[e.length-1].flatCoordinates,n=Wd(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push(o,a,s,0)}else r.push(0,0,0,0)}}));function NP(t,e){var r=sy({flatCoordinates:[],whens:[]},AP,t,e);if(r){for(var n=r.flatCoordinates,i=r.whens,o=0,a=Math.min(n.length,i.length);o<a;++o)n[4*o+3]=i[o];return new Ln(n,Xr.XYZM)}}var FP=oy(nP,{href:Qd(EP)},oy(rP,{x:Qd(my),y:Qd(my),w:Qd(my),h:Qd(my)}));var jP=oy(nP,{coordinates:$d(xP)});function DP(t,e){return sy(null,jP,t,e)}var GP=oy(nP,{extrude:Qd(dy),tessellate:Qd(dy),altitudeMode:Qd(wy)});function BP(t,e){var r=sy({},GP,t,e),n=DP(t,e);if(n){var i=new Ln(n,Xr.XYZ);return i.setProperties(r,!0),i}}function zP(t,e){var r=sy({},GP,t,e),n=DP(t,e);if(n){var i=new Yn(n,Xr.XYZ,[n.length]);return i.setProperties(r,!0),i}}var UP=oy(nP,{LineString:Kd(BP),LinearRing:Kd(zP),MultiGeometry:Kd(qP),Point:Kd(VP),Polygon:Kd(WP)});function qP(t,e){var r,n=sy([],UP,t,e);if(!n)return null;if(0===n.length)return new fi(n);for(var i=!0,o=n[0].getType(),a=1,s=n.length;a<s;++a)if(n[a].getType()!=o){i=!1;break}if(i){var u=void 0,l=void 0;if(o==De.POINT){var c=n[0];u=c.getLayout(),l=c.getFlatCoordinates();for(a=1,s=n.length;a<s;++a)vt(l,n[a].getFlatCoordinates());HP(r=new cn(l,u),n)}else o==De.LINE_STRING?HP(r=new $n(n),n):o==De.POLYGON?HP(r=new ti(n),n):o==De.GEOMETRY_COLLECTION?r=new fi(n):Ut(!1,37)}else r=new fi(n);return r}function VP(t,e){var r=sy({},GP,t,e),n=DP(t,e);if(n){var i=new en(n,Xr.XYZ);return i.setProperties(r,!0),i}}var YP=oy(nP,{innerBoundaryIs:function(t,e){var r=sy(void 0,iC,t,e);if(r){var n=e[e.length-1];n.push(r)}},outerBoundaryIs:function(t,e){var r=sy(void 0,oC,t,e);if(r){var n=e[e.length-1];n[0]=r}}});function WP(t,e){var r=sy({},GP,t,e),n=sy([null],YP,t,e);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)vt(i,n[a]),o.push(i.length);var u=new Yn(i,Xr.XYZ,o);return u.setProperties(r,!0),u}}var XP=oy(nP,{IconStyle:function(t,e){var r=sy({},MP,t,e);if(r){var n,i,o,a,s=e[e.length-1],u="Icon"in r?r.Icon:{},l=!("Icon"in r)||Object.keys(u).length>0,c=u.href;c?n=c:l&&(n=QI);var h,f=Uo.BOTTOM_LEFT,p=r.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,f=p.origin):n===QI?(i=HI,o=KI,a=$I):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(i=[.5,0],o=Lo.FRACTION,a=Lo.FRACTION);var d,y=u.x,g=u.y;void 0!==y&&void 0!==g&&(h=[y,g]);var m,v=u.w,_=u.h;void 0!==v&&void 0!==_&&(d=[v,_]);var b=r.heading;void 0!==b&&(m=Ne(b));var w=r.scale,x=r.color;if(l){n==QI&&(d=JI,void 0===w&&(w=tP));var E=new Vo({anchor:i,anchorOrigin:f,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:h,offsetOrigin:Uo.BOTTOM_LEFT,rotation:m,scale:w,size:d,src:n,color:x});s.imageStyle=E}else s.imageStyle=fP}},LabelStyle:function(t,e){var r=sy({},IP,t,e);if(r){var n=e[e.length-1],i=new Mb({fill:new xo({color:"color"in r?r.color:ZI}),scale:r.scale});n.textStyle=i}},LineStyle:function(t,e){var r=sy({},PP,t,e);if(r){var n=e[e.length-1],i=new Eo({color:"color"in r?r.color:ZI,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(t,e){var r=sy({},CP,t,e);if(r){var n=e[e.length-1],i=new xo({color:"color"in r?r.color:ZI});n.fillStyle=i;var o=r.fill;void 0!==o&&(n.fill=o);var a=r.outline;void 0!==a&&(n.outline=a)}}});function ZP(t,e){var r=sy({},XP,t,e,this);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:hP,o=r.fill;void 0===o||o||(i=null),"imageStyle"in r?r.imageStyle!=fP&&(n=r.imageStyle):n=pP;var a="textStyle"in r?r.textStyle:gP,s="strokeStyle"in r?r.strokeStyle:yP,u=r.outline;return void 0===u||u?[new Co({fill:i,image:n,stroke:s,text:a,zIndex:void 0})]:[new Co({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===De.GEOMETRY_COLLECTION?new fi(e.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e!==De.POLYGON&&e!==De.MULTI_POLYGON})):r!==De.POLYGON&&r!==De.MULTI_POLYGON?e:void 0},fill:i,image:n,stroke:s,text:a,zIndex:void 0}),new Co({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===De.GEOMETRY_COLLECTION?new fi(e.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===De.POLYGON||e===De.MULTI_POLYGON})):r===De.POLYGON||r===De.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function HP(t,e){var r,n,i,o=e.length,a=new Array(e.length),s=new Array(e.length),u=new Array(e.length);r=!1,n=!1,i=!1;for(var l=0;l<o;++l){var c=e[l];a[l]=c.get("extrude"),s[l]=c.get("tessellate"),u[l]=c.get("altitudeMode"),r=r||void 0!==a[l],n=n||void 0!==s[l],i=i||u[l]}r&&t.set("extrude",a),n&&t.set("tessellate",s),i&&t.set("altitudeMode",u)}var KP=oy(nP,{displayName:Qd(wy),value:Qd(wy)});var $P=oy(nP,{Data:function(t,e){var r=t.getAttribute("name");ay(KP,t,e);var n=e[e.length-1];r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){ay(eC,t,e)}});function JP(t,e){ay($P,t,e)}function QP(t,e){ay(uP,t,e)}var tC=oy(nP,{Style:Qd(ZP),key:Qd(wy),styleUrl:Qd(EP)});var eC=oy(nP,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var n=wy(t),i=e[e.length-1];i[r]=n}}});var rC=oy(nP,{altitudeMode:Qd(wy),minAltitude:Qd(my),maxAltitude:Qd(my),north:Qd(my),south:Qd(my),east:Qd(my),west:Qd(my)});var nC=oy(nP,{minLodPixels:Qd(my),maxLodPixels:Qd(my),minFadeExtent:Qd(my),maxFadeExtent:Qd(my)});var iC=oy(nP,{LinearRing:$d(kP)});var oC=oy(nP,{LinearRing:$d(kP)});function aC(t,e){for(var r=Si(e),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}Oy(t,n.join(""))}var sC=oy(nP,{Data:ty(function(t,e,r){t.setAttribute("name",e.name);var n={node:t},i=e.value;"object"==XI(i)?(null!==i&&i.displayName&&ly(n,sC,ny,[i.displayName],r,["displayName"]),null!==i&&i.value&&ly(n,sC,ny,[i.value],r,["value"])):ly(n,sC,ny,[i],r,["value"])}),value:ty(function(t,e){Oy(t,e)}),displayName:ty(function(t,e){!function(t,e){t.appendChild(fy().createCDATASection(e))}(t,e)})});var uC=oy(nP,{Placemark:ty(RC)}),lC=function(t,e,r){return Yd(e[e.length-1].node.namespaceURI,"Placemark")};var cC=ry("Data");var hC=oy(nP,["href"],oy(rP,["x","y","w","h"])),fC=oy(nP,{href:ty(Oy)},oy(rP,{x:ty(Ey),y:ty(Ey),w:ty(Ey),h:ty(Ey)})),pC=function(t,e,r){return Yd(rP[0],"gx:"+r)};var dC=oy(nP,["scale","heading","Icon","color","hotSpot"]),yC=oy(nP,{Icon:ty(function(t,e,r){var n={node:t},i=r[r.length-1].node,o=hC[i.namespaceURI],a=iy(e,o);ly(n,fC,ny,a,r,o),a=iy(e,o=hC[rP[0]]),ly(n,fC,pC,a,r,o)}),color:ty(aC),heading:ty(Ey),hotSpot:ty(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:ty(qC)});var gC=oy(nP,["color","scale"]),mC=oy(nP,{color:ty(aC),scale:ty(qC)});var vC=oy(nP,["color","width"]),_C=oy(nP,{color:ty(aC),width:ty(Ey)});var bC={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},wC=function(t,e,r){if(t)return Yd(e[e.length-1].node.namespaceURI,bC[t.getType()])},xC=ry("Point"),EC=ry("LineString"),SC=ry("LinearRing"),OC=ry("Polygon"),TC=oy(nP,{LineString:ty(FC),Point:ty(FC),Polygon:ty(zC),GeometryCollection:ty(MC)});function MC(t,e,r){var n,i={node:t},o=e.getType(),a=[];o===De.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach(function(t){var e=t.getType();e===De.MULTI_POINT?a=a.concat(t.getPoints()):e===De.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===De.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===De.POINT||e===De.LINE_STRING||e===De.POLYGON?a.push(t):Ut(!1,39)}),n=wC):o===De.MULTI_POINT?(a=e.getPoints(),n=xC):o===De.MULTI_LINE_STRING?(a=e.getLineStrings(),n=EC):o===De.MULTI_POLYGON?(a=e.getPolygons(),n=OC):Ut(!1,39),ly(i,TC,n,a,r)}var IC=oy(nP,{LinearRing:ty(FC)});function PC(t,e,r){ly({node:t},IC,SC,[e],r)}var CC=oy(nP,{ExtendedData:ty(function(t,e,r){for(var n={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)ly(n,sC,cC,[{name:i[s],value:o[s]}],r)}),MultiGeometry:ty(MC),LineString:ty(FC),LinearRing:ty(FC),Point:ty(FC),Polygon:ty(zC),Style:ty(function(t,e,r){var n={node:t},i={};if(e.pointStyles.length){var o=e.pointStyles[0].getText();o&&(i.LabelStyle=o);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(i.IconStyle=a)}if(e.lineStyles.length){var s=e.lineStyles[0].getStroke();s&&(i.LineStyle=s)}if(e.polyStyles.length){var s=e.polyStyles[0].getStroke();s&&!i.LineStyle&&(i.LineStyle=s),i.PolyStyle=e.polyStyles[0]}var u=r[r.length-1].node,l=VC[u.namespaceURI],c=iy(i,l);ly(n,YC,ny,c,r,l)}),address:ty(Oy),description:ty(Oy),name:ty(Oy),open:ty(xy),phoneNumber:ty(Oy),styleUrl:ty(Oy),visibility:ty(xy)}),LC=oy(nP,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),kC=ry("ExtendedData");function RC(t,e,r){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter(function(t){return!o[t]}),s=e.getStyleFunction();if(s){var u=s(e,0);if(u){var l=Array.isArray(u)?u:[u],c=l;if(e.getGeometry()&&(c=l.filter(function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===De.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===De.POINT||e===De.MULTI_POINT}).length:n===De.POINT||n===De.MULTI_POINT}})),this.writeStyles_){var h=l,f=l;e.getGeometry()&&(h=l.filter(function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===De.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===De.LINE_STRING||e===De.MULTI_LINE_STRING}).length:n===De.LINE_STRING||n===De.MULTI_LINE_STRING}}),f=l.filter(function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===De.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter(function(t){var e=t.getType();return e===De.POLYGON||e===De.MULTI_POLYGON}).length:n===De.POLYGON||n===De.MULTI_POLYGON}})),i.Style={pointStyles:c,lineStyles:h,polyStyles:f}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=r[r.length-1].node,y=LC[d.namespaceURI],g=iy(i,y);if(ly(n,CC,ny,g,r,y),a.length>0){var m=iy(i,a);ly(n,CC,kC,[{names:a,values:m}],r)}var v=r[0],_=e.getGeometry();_&&(_=ii(_,!0,v)),ly(n,CC,wC,[_],r)}var AC=oy(nP,["extrude","tessellate","altitudeMode","coordinates"]),NC=oy(nP,{extrude:ty(xy),tessellate:ty(xy),altitudeMode:ty(Oy),coordinates:ty(function(t,e,r){var n,i=r[r.length-1],o=i.layout,a=i.stride;o==Xr.XY||o==Xr.XYM?n=2:o==Xr.XYZ||o==Xr.XYZM?n=3:Ut(!1,34);var s=e.length,u="";if(s>0){u+=e[0];for(var l=1;l<n;++l)u+=","+e[l];for(var c=a;c<s;c+=a)for(u+=" "+e[c],l=1;l<n;++l)u+=","+e[c+l]}Oy(t,u)})});function FC(t,e,r){var n=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=AC[a.namespaceURI],u=iy(o,s);ly(i,NC,ny,u,r,s)}var jC=oy(nP,["color","fill","outline"]),DC=oy(nP,{outerBoundaryIs:ty(PC),innerBoundaryIs:ty(PC)}),GC=ry("innerBoundaryIs"),BC=ry("outerBoundaryIs");function zC(t,e,r){var n=e.getLinearRings(),i=n.shift(),o={node:t};ly(o,DC,GC,n,r),ly(o,DC,BC,[i],r)}var UC=oy(nP,{color:ty(aC),fill:ty(xy),outline:ty(xy)});function qC(t,e){Ey(t,Math.round(1e6*e)/1e6)}var VC=oy(nP,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),YC=oy(nP,{IconStyle:ty(function(t,e,r){var n={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),u={href:o};if(a){u.w=a[0],u.h=a[1];var l=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(u.x=c[0],u.y=s[1]-(c[1]+a[1])),l&&(l[0]!==a[0]/2||l[1]!==a[1]/2)){var h={x:l[0],xunits:Lo.PIXELS,y:a[1]-l[1],yunits:Lo.PIXELS};i.hotSpot=h}}i.Icon=u;var f=e.getScale();1!==f&&(i.scale=f);var p=e.getRotation();0!==p&&(i.heading=p);var d=e.getColor();d&&(i.color=d);var y=r[r.length-1].node,g=dC[y.namespaceURI],m=iy(i,g);ly(n,yC,ny,m,r,g)}),LabelStyle:ty(function(t,e,r){var n={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,u=gC[s.namespaceURI],l=iy(i,u);ly(n,mC,ny,l,r,u)}),LineStyle:ty(function(t,e,r){var n={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=r[r.length-1].node,a=vC[o.namespaceURI],s=iy(i,a);ly(n,_C,ny,s,r,a)}),PolyStyle:ty(function(t,e,r){var n={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,u=jC[s.namespaceURI],l=iy(a,u);ly(n,UC,ny,l,r,u)})});var WC=bP;function XC(t){return(XC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HC(t,e){return!e||"object"!==XC(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function KC(t){return(KC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $C(t,e){return($C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var JC=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=HC(this,KC(e).call(this))).screenOverlay_=null,t.label_=void 0===r.label||r.label,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$C(t,e)}(e,WC),r=e,(n=[{key:"readCustomFeatures",value:function(t,e){var r=this,n=this.readFeatures(t,e).map(function(t){var e=t.getStyle()(t);if(!1===r.label_){var n=[e[0]];t.setStyle(n)}return Array.isArray(e)||(e=[e]),e.forEach(function(t){if(t.getImage()instanceof Vo){var e=t.getImage();e.getImage().removeAttribute("crossorigin"),t.setImage(e)}}),t.set("name",V(t.get("name"))),t});return this.readScreenOverlay(t),n}},{key:"readScreenOverlay",value:function(t){var r=Zd(t).querySelector("ScreenOverlay");if(null!==r){var n,i,o,a,s,u,l=r.querySelector("Icon"),c=null!==l?l.querySelector("href").innerHTML:e.DEFAULT_NO_IMAGE_STYLE,h=r.querySelector("overlayXY");if(null!==h)n=[parseFloat(h.getAttribute("x")),parseFloat(h.getAttribute("y"))],i=h.getAttribute("xunits"),o=h.getAttribute("yunits");var f,p,d,y=r.querySelector("screenXY");if(null!==y)a=[parseFloat(y.getAttribute("x")),parseFloat(y.getAttribute("y"))],s=y.getAttribute("xunits"),u=y.getAttribute("yunits");else c===e.DEFAULT_IMAGE_STYLE_SRC?(a=e.DEFAULT_IMAGE_STYLE_ANCHOR,s=e.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,u=e.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(c)&&(a=[.5,0],s=Lo.FRACTION,u=Lo.FRACTION);var g,m,v,_=r.querySelector("rotationXY");if(null!==_){var b=parseFloat(_.getAttribute("x"));f=Math.PI/180*b,p=_.getAttribute("xunits"),d=_.getAttribute("yunits")}var w=r.querySelector("size");if(null!==w)g=[parseFloat(w.getAttribute("x")),parseFloat(w.getAttribute("y"))],m=w.getAttribute("xunits"),v=w.getAttribute("yunits");this.screenOverlay_={screenXY:a,screenXUnits:s,screenYUnits:u,overlayXY:n,overlayXUnits:i,overlayYUnits:o,rotationXY:f,rotationXUnits:p,rotationYUnits:d,size:g,sizeXUnits:m,sizeYUnits:v,src:c}}}},{key:"getScreenOverlay",value:function(){return this.screenOverlay_}}])&&ZC(r.prototype,n),i&&ZC(r,i),e}();JC.DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",JC.DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",JC.DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],JC.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",JC.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels";var QC=JC;function tL(t){return(tL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rL(t,e){return!e||"object"!==tL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nL(t){return(nL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iL(t,e){return(iL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oL=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rL(this,nL(e).call(this,t,r))).popup_=null,n.tabPopup_=null,n.loadFeaturesPromise_=null,n.screenOverlayImg_=null,n.label_=t.label,n.visibility=null==t.visibility||t.visibility,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iL(t,e)}(e,yb),r=e,(n=[{key:"setVisible",value:function(t){if(this.visibility=t,v(this.ol3Layer)||this.ol3Layer.setVisible(t),!v(this.screenOverlayImg_)){var e="none";!0===t&&(e="inherit"),this.screenOverlayImg_.style[e]=e}}},{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),t.on("change:proj",this.setProjection_.bind(this),this),this.formater_=new QC({label:this.label_}),this.loader_=new WI(this.map,this.url,this.formater_),this.ol3Layer=new Q_(G({},this.vendorOptions_,!0)),this.updateSource_(),this.setVisible(this.visibility),null!==this.zIndex_&&this.setZIndex(this.zIndex_),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&!v(n)){var i=n.getAttribute("name"),o=n.getAttribute("description"),a=n.getImpl().getOLFeature().getGeometry().getFirstCoordinate(),s=rF(BI.a,{vars:{name:i,desc:o},parseToHtml:!1});this.tabPopup_={icon:"g-cartografia-comentarios",title:i,content:s};var u=this.map.getPopup();v(u)?(this.popup_=new Uv,this.popup_.addTab(this.tabPopup_),this.map.addPopup(this.popup_,a)):u.addTab(this.tabPopup_)}}},{key:"unselectFeatures",value:function(){v(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"updateSource_",value:function(){var t=this;v(this.vendorOptions_.source)&&this.requestFeatures_().then(function(e){t.ol3Layer.setSource(new ub({loader:function(){var r=e.screenOverlay;if(t.facadeVector_.clear(),t.facadeVector_.addFeatures(e.features),t.fire(Qf,[e.features]),!v(r)){var n=aa.addOverlayImage(r,t.map);t.setScreenOverlayImg(n)}}})),t.facadeVector_.addFeatures(e.features)})}},{key:"setScreenOverlayImg",value:function(t){this.screenOverlayImg_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.removePopup(),this.options=null,this.map=null}},{key:"removePopup",value:function(){v(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return aa.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise(function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=aa.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then(function(t){var e=aa.getFeaturesExtent(t.features,i);n(e)})})}},{key:"requestFeatures_",value:function(){var t=this;return v(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise(function(e){t.loader_.getLoaderFn(function(t){e(t)})(null,null,yr(t.map.getProjection().code))})),this.loadFeaturesPromise_}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.extract===t.extract),r}}])&&eL(r.prototype,n),i&&eL(r,i),e}();function aL(t){return(aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uL(t,e){return!e||"object"!==aL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lL(t){return(lL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cL(t,e){return(cL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hL=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=Kp(t,dp),a=n;a.label=o.label,a.visibility=o.visibility;var s=new oL(a,i);return r=uL(this,lL(e).call(this,o,n,void 0,s)),d(oL)&&wa(Sa("exception").kmllayer_method),v(t)&&wa(Sa("exception").no_param),r.extract=o.extract,r.options=n,r.label=o.label,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cL(t,e)}(e,Gx),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.extract===t.extract),r}},{key:"type",get:function(){return dp},set:function(t){d(t)||v(t)||t===dp||wa("El tipo de capa debe ser '".concat(dp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){v(t)?this.getImpl().extract=!1:w(t)?this.getImpl().extract="true"===E(t):this.getImpl().extract=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&sL(r.prototype,n),i&&sL(r,i),e}();function fL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pL=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootPrefix=null,this.namespaces={ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema",ogc:"http://www.opengis.net/ogc"},this.options=e}var e,r,n;return e=t,n=[{key:"getChildValue",value:function(t,e){var r=e||"";if(t)for(var n=t.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:r+=n.nodeValue}return r}}],(r=[{key:"read",value:function(t){var e=t;w(t)&&(e=Zd(t)),9!==e.nodeType&&wa(Sa("exception").must_be_document);var r={};return this.readRoot(r,e),r}},{key:"readRoot",value:function(t,e){var r=t,n=e.documentElement;this.rootPrefix=n.prefix,r.version=n.getAttribute("version"),this.runChildNodes(r,n)}},{key:"runChildNodes",value:function(t,e){for(var r,n,i,o,a=e.childNodes,s=0,u=a.length;s<u;s+=1)1===(r=a[s]).nodeType&&(i=this.getNamespacePrefix(r.namespaceURI),o=r.nodeName.split(":").pop(),(n=this["read".concat(i).concat(o)])&&n.apply(this,[t,r]))}},{key:"getNamespacePrefix",value:function(t){var e=null;if(null===t)e=this.namespaces[this.defaultPrefix];else for(var r=Object.keys(this.namespaces),n=0;n<r.length&&(e=r[n],this.namespaces[e]!==t);n+=1);return e}},{key:"getAttributeNS",value:function(t,e,r){var n="";if(t.getAttributeNS)n=t.getAttributeNS(e,r)||"";else{var i=this.getAttributeNodeNS(t,e,r);i&&(n=i.nodeValue)}return n}}])&&fL(e.prototype,r),n&&fL(e,n),t}();function dL(t){return(dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gL(t,e){return!e||"object"!==dL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mL(t){return(mL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vL(t,e){return(vL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _L=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gL(this,mL(e).call(this,t))).featureTypeIdx_=0,r.readingFeatureType=!1,r.serviceException_=!1,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vL(t,e)}(e,pL),r=e,(n=[{key:"readRoot",value:function(t,e){var r=e.documentElement;if(/ServiceExceptionReport/i.test(r.localName))this.serviceException_=!0;else{this.rootPrefix=r.prefix;var n=t;n.elementFormDefault=r.getAttribute("elementFormDefault"),n.targetNamespace=r.getAttribute("targetNamespace"),n.targetPrefix=r.getAttribute("targetPrefix"),n.featureTypes=[]}this.runChildNodes(t,r)}},{key:"readogcServiceException",value:function(t,e){aF("Error en el DescribeFeatureType: ".concat(e.textContent.trim()," "))}},{key:"readxsdschema",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdimport",value:function(t,e){}},{key:"readxsdcomplexType",value:function(t,e){this.readingFeatureType=!0,t.featureTypes.push({properties:[]}),this.runChildNodes(t,e),this.readingFeatureType=!1}},{key:"readxsdcomplexContent",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdextension",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdsequence",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdelement",value:function(t,e){!0===this.readingFeatureType?t.featureTypes[this.featureTypeIdx_].properties.push({name:e.getAttribute("name"),maxOccurs:e.getAttribute("maxOccurs"),minOccurs:e.getAttribute("minOccurs"),nillable:e.getAttribute("nillable"),type:e.getAttribute("type"),localType:e.getAttribute("type").replace(/^\w+:/g,"")}):(t.featureTypes[this.featureTypeIdx_].typeName=e.getAttribute("name"),this.featureTypeIdx_+=1)}}])&&yL(r.prototype,n),i&&yL(r,i),e}();function bL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wL=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.typeName_=e,this.outputFormat_=r,this.projection_=n,this.gmlFormatter_=new _L({outputFormat:r,featureType:e,srsName:this.projection_.code})}var e,r,n;return e=t,(r=[{key:"read",value:function(t){var e,r=this,n={};if(/json/gi.test(this.outputFormat_))try{e=JSON.parse(t.text)}catch(t){throw t}return e||(e=this.gmlFormatter_.read(t.text)),n.featureNS=e.targetNamespace,n.featurePrefix=e.targetPrefix,e.featureTypes.some(function(t){return t.typeName===r.typeName_&&(n.properties=t.properties,n.properties.some(function(t){return q(t.localType)&&(n.geometryName=t.name),q(t.localType)})),t.typeName===r.typeName_}),n}}])&&bL(e.prototype,r),n&&bL(e,n),t}();function xL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var EL=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url_=e.url,this.namespace_=e.namespace,this.name_=e.name,this.typeName_=this.name_,v(this.namespace_)||(this.typeName_=this.namespace_.concat(":").concat(this.name_)),this.version_=e.version,this.ids_=e.ids,this.cql_=e.cql,this.projection_=e.projection,this.getFeatureOutputFormat_=e.getFeatureOutputFormat,v(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=e.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},v(r)||v(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},v(r)||v(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var e,r,n;return e=t,(r=[{key:"getDescribeFeatureType",value:function(){var t={service:"WFS",version:this.version_,request:"DescribeFeatureType",typename:this.typeName_};v(this.describeFeatureTypeOutputFormat_)||(t.outputFormat=this.describeFeatureTypeOutputFormat_);var e=O(this.url_,t),r=O(e,this.describeFeatureTypeVendor_),n=this.describeFeatureTypeOutputFormat_,i=new wL(this.name_,n,this.projection_);return new Promise(function(t,e){tF(r).then(function(e){t(i.read(e))})})}},{key:"getFeatureUrl",value:function(t,e){var r=this,n={service:"WFS",version:this.version_,request:"GetFeature",typename:this.typeName_,outputFormat:this.getFeatureOutputFormat_,srsname:e.getCode()};return v(this.ids_)||(n.featureId=this.ids_.map(function(t){return r.name_.concat(".").concat(t)})),v(this.cql_)?v(t)||(n.bbox="".concat(t.join(","),",").concat(e.getCode())):n.CQL_FILTER=this.cql_,O(O(this.url_,n),this.getFeatureVendor_)}}])&&xL(e.prototype,r),n&&xL(e,n),t}(),SL=Jm;SL.prototype.writeFeatures,SL.prototype.writeFeaturesNode;var OL=SL;function TL(t){return(TL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ML(t,e){return!e||"object"!==TL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function IL(t){return(IL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PL(t,e){return(PL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CL=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ML(this,IL(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&PL(t,e)}(e,OL),e}();function LL(t){return(LL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RL(t,e){return!e||"object"!==LL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function AL(t){return(AL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NL(t,e){return(NL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var FL=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=RL(this,AL(e).call(this))).map_=t,i.service_=r,i.format_=n,i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NL(t,e)}(e,da),r=e,(n=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){var o=e.getRequestUrl_(r,i);e.loadInternal_(o,i).then(t.bind(e))}}},{key:"loadInternal_",value:function(t,e){var r=this;return new Promise(function(n,i){tF(t).then(function(t){if(!v(t.text)&&t.text.indexOf("ServiceExceptionReport")<0){var i=r.format_.read(t.text,e);n(i)}else 401===t.code?aF(Sa("dialog").unauthorized_user):t.text.indexOf("featureId and cql_filter")>=0?aF(Sa("dialog").only_one_filter):wa(Sa("exception").no_getfeature_response)})})}},{key:"getRequestUrl_",value:function(t,e){return this.service_.getFeatureUrl(null,e)}}])&&kL(r.prototype,n),i&&kL(r,i),e}();function jL(t){return(jL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GL(t,e){return!e||"object"!==jL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function BL(t,e,r){return(BL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zL(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function zL(t){return(zL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UL(t,e){return(UL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qL=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=GL(this,zL(e).call(this,r,n))).describeFeatureType_=null,t.formater_=null,t.loader_=null,t.service_=null,t.loaded_=!1,v(t.options.getFeatureOutputFormat)&&(t.options.getFeatureOutputFormat="application/json"),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UL(t,e)}(e,yb),r=e,(n=[{key:"addTo",value:function(t){var r=this;BL(zL(e.prototype),"addTo",this).call(this,t),this.updateSource_(),t.getImpl().on("change",function(){return r.refresh()})}},{key:"refresh",value:function(t){t&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(t)}},{key:"updateSource_",value:function(t){var e=this;if(v(this.vendorOptions_.source)){this.service_=new EL({url:this.url,namespace:this.namespace,name:this.name,version:this.version,ids:this.ids,cql:this.cql,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.options.vendor),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new Ca({defaultDataProjection:yr(this.map.getProjection().code)}):this.formater_=new CL(this.name,this.version,this.map.getProjection()),this.loader_=new FL(this.map,this.service_,this.formater_);var r=this.ol3Layer.getSource();this.requestFeatures_().then(function(n){if(!0===t||v(r)){var i=new ub({loader:function(){e.loaded_=!0,e.facadeVector_.addFeatures(n),e.fire(Qf,[n]),e.facadeVector_.redraw()}});e.ol3Layer.setSource(i)}else r.set("format",e.formater_),r.set("loader",e.loader_.getLoaderFn(function(t){e.loaded_=!0,e.facadeVector_.addFeatures(t),e.fire(Qf,[t]),e.facadeVector_.redraw()})),r.set("strategy",nb),r.changed()})}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return aa.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise(function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=aa.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then(function(t){var e=aa.getFeaturesExtent(t,i);n(e)})})}},{key:"setCQL",value:function(t){this.cql=t,this.refresh(!0)}},{key:"getDescribeFeatureType",value:function(){var t=this;return v(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then(function(e){return v(e)||(t.formater_=new $o({geometryName:e.geometryName,defaultDataProjection:yr(t.map.getProjection().code)})),e})),this.describeFeatureType_}},{key:"getDefaultValue",value:function(t){return"dateTime"===t?"0000-00-00T00:00:00":"date"===t?"0000-00-00":"time"===t?"00:00:00":"duration"===t?"P0Y":"int"===t||"number"===t||"float"===t||"double"===t||"decimal"===t||"short"===t||"byte"===t||"integer"===t||"long"===t||"negativeInteger"===t||"nonNegativeInteger"===t||"nonPositiveInteger"===t||"positiveInteger"===t||"unsignedLong"===t||"unsignedInt"===t||"unsignedShort"===t||"unsignedByte"===t?0:"hexBinary"===t?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var t=this;return new Promise(function(e){t.loader_.getLoaderFn(function(t){e(t)})(null,null,yr(t.map.getProjection().code))})}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.namespace===t.namespace,r=r&&this.name===t.name,r=r&&this.ids===t.ids,r=r&&this.cql===t.cql,r=r&&this.version===t.version),r}}])&&DL(r.prototype,n),i&&DL(r,i),e}(),VL="POINT",YL="LINE",WL="POLYGON",XL="MPOINT",ZL="MLINE",HL="MPOLYGON",KL=function(t){var e=E(t,!0);return a[e]};function $L(t){return($L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QL(t,e){return!e||"object"!==$L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tk(t,e,r){return(tk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ek(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function ek(t){return(ek=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rk(t,e){return(rk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nk=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new qL(n,i);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=Kp(t,gp);return r=QL(this,ek(e).call(this,a,n,void 0,o)),d(qL)&&wa(Sa("exception").wfslayer_method),v(t)&&wa(Sa("exception").no_param),r.namespace=a.namespace,r.legend=a.legend,r.cql=a.cql,r.geometry=a.geometry,r.ids=a.ids,r.version=a.version,r.options=n,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rk(t,e)}(e,Gx),r=e,(n=[{key:"setCQL",value:function(t){var e=this,r=t;this.getImpl().getDescribeFeatureType().then(function(t){if(!v(r)){var n=t.geometryName;r=r.replace(/{{geometryName}}/g,n)}e.getImpl().cql!==r&&e.getImpl().setCQL(r)})}},{key:"setStyle",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_OPTIONS_STYLE;tk(ek(e.prototype),"setStyle",this).call(this,t,r,n)}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.namespace===t.namespace,r=r&&this.name===t.name,r=r&&this.ids===t.ids,r=r&&this.cql===t.cql,r=r&&this.version===t.version),r}},{key:"type",get:function(){return gp},set:function(t){d(t)||v(t)||t===gp||wa("El tipo de capa debe ser '".concat(gp).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"namespace",get:function(){return this.getImpl().namespace},set:function(t){this.getImpl().namespace=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){v(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"cql",get:function(){return this.getImpl().cql},set:function(t){this.getImpl().cql=t}},{key:"geometry",get:function(){return this.getImpl().geometry},set:function(t){if(!v(t)){var e=KL(t);v(e)&&wa("El tipo de capa WFS <b>".concat(t,"</b> no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON, MPOINT, MLINE, MPOLYGON")),this.getImpl().geometry=e}}},{key:"ids",get:function(){return this.getImpl().ids},set:function(t){v(t)?this.getImpl().ids=this.ids:this.getImpl().ids=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){v(t)?this.getImpl().version="1.0.0":this.getImpl().version=t}}])&&JL(r.prototype,n),i&&JL(r,i),e}();nk.DEFAULT_OPTIONS_STYLE={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1},radius:5};var ik=nk,ok=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ak=[],sk=function(t){function e(e,r,n,i){var o=t.call(this,e,r,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return ok(e,t),e.prototype.getContext=function(t){var e=nt(t);return e in this.context_||(this.context_[e]=Fi(1,1,ak)),this.context_[e]},e.prototype.hasContext=function(t){return nt(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=nt(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)ak.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(fg),uk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lk=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s}return uk(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==rc.IDLE&&(this.setState(rc.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(rc.ERROR)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(rc.LOADED)},e.prototype.setLoader=function(t){this.loader_=t},e}(fg),ck=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hk=function(t){function e(e){var r=this,n=e.projection||"EPSG:3857",i=e.extent||Ag(n),o=e.tileGrid||Lg({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:fk,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new mg(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:lk,r.tileGrids_={},r}return ck(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=Cd(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach(function(r){if(r.tileCoord[0]===n&&r.getState()===rc.LOADED)for(var o=r.getSourceTiles(),a=0,s=o.length;a<s;++a){var u=o[a],l=u.tileCoord;if(xe(t,i.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();xe(t,d.getExtent())&&e.push(p)}}}}),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,r){t.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,r){var n=r.wrappedTileCoord,i=this.getTileGridForProjection(e),o=i.getTileCoordExtent(n),a=n[0],s=i.getResolution(a);Wt(o,-s,o);var u=this.tileGrid,l=u.getExtent();l&&ve(o,l,o);var c,h,f,p=u.getZForResolution(s,1),d=u.getMinZoom(),y=r.sourceTiles;if(y&&y.length>0&&y[0].tileCoord[0]===p)c=y,h=!0,f=p;else{c=[],f=p+1;do{--f,h=!0,u.forEachTileCoord(o,f,function(n){var i,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var a=(i=this.sourceTileCache.get(o)).getState();if(a===rc.LOADED||a===rc.ERROR||a===rc.EMPTY)return void c.push(i)}else f===p&&((i=new this.tileClass(n,rc.IDLE,o,this.format_,this.tileLoadFunction)).extent=u.getTileCoordExtent(n),i.projection=e,i.resolution=u.getResolution(n[0]),this.sourceTileCache.set(o,i),i.addEventListener(Ct.CHANGE,this.handleTileChange.bind(this)),i.load());h=h&&i&&i.getState()===rc.LOADED,i&&i.getState()!==rc.EMPTY&&r.getState()===rc.IDLE&&(r.loadingSourceTiles++,i.addEventListener(Ct.CHANGE,function t(){var e=i.getState(),n=i.getKey();if(e===rc.LOADED||e===rc.ERROR){e===rc.LOADED?(i.removeEventListener(Ct.CHANGE,t),r.loadingSourceTiles--,delete r.errorSourceTileKeys[n]):e===rc.ERROR&&(r.errorSourceTileKeys[n]=!0);var o=Object.keys(r.errorSourceTileKeys).length;r.loadingSourceTiles-o==0&&(r.hifi=0===o,r.sourceZ=p,r.setState(rc.LOADED))}}))}.bind(this)),h||(c.length=0)}while(!h&&f>d)}return r.getState()===rc.IDLE&&r.setState(rc.LOADING),h&&(r.hifi=p===f,r.sourceZ=f,r.getState()<rc.LOADED?r.setState(rc.LOADED):y&&bt(c,y)||(r.sourceTiles=c)),c},e.prototype.getTile=function(t,e,r,n,i){var o,a=Id(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var u=[t,e,r],l=this.getTileCoordForTileUrlFunction(u,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(l&&c){var f=h.getTileCoordExtent(l);Wt(f,-h.getResolution(t),f),xe(c,f)||(l=null)}var p=!0;if(null!==l){var d=this.tileGrid,y=h.getResolution(t),g=d.getZForResolution(y,1),m=h.getTileCoordExtent(l);Wt(m,-y,m),d.forEachTileCoord(m,g,function(t){p=p&&!this.tileUrlFunction(t,n,i)}.bind(this))}var v=new sk(u,p?rc.EMPTY:rc.IDLE,l,this.getSourceTiles.bind(this,n,i));return v.key=s,o?(v.interimTile=o,v.refreshInterimChain(),this.tileCache.replace(a,v)):this.tileCache.set(a,v),v},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var n=this.tileGrid;r=Rg(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=r}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var n=th(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(qg);function fk(t,e){var r=eb(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(r)}var pk={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},dk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yk={image:[Sf.POLYGON,Sf.CIRCLE,Sf.LINE_STRING,Sf.IMAGE,Sf.TEXT],hybrid:[Sf.POLYGON,Sf.LINE_STRING],vector:[]},gk={image:[Sf.DEFAULT],hybrid:[Sf.IMAGE,Sf.TEXT,Sf.DEFAULT],vector:[Sf.POLYGON,Sf.CIRCLE,Sf.LINE_STRING,Sf.IMAGE,Sf.TEXT,Sf.DEFAULT]},mk=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=[1,0,0,1,0,0],r}return dk(e,t),e.prototype.prepareTile=function(t,e,r,n){var i,o=nt(t),a=t.getState();return(a===rc.LOADED&&t.hifi||a===rc.ERROR)&&o in this.tileListenerKeys_&&(ft(this.tileListenerKeys_[o]),delete this.tileListenerKeys_[o]),a!==rc.LOADED&&a!==rc.ERROR||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t,e,r)&&(i=!0,n&&(this.renderTileImageQueue_[o]=t))),i},e.prototype.getTile=function(e,r,n,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,u=a.projection,l=this.getLayer(),c=l.getSource().getTile(e,r,n,o,u);if(c.getState()<rc.LOADED){c.wantedResolution=s;var h=nt(c);if(!(h in this.tileListenerKeys_)){var f=ct(c,Ct.CHANGE,this.prepareTile.bind(this,c,o,u,!0));this.tileListenerKeys_[h]=f}}else{var p=i.viewHints;!!(p[gc]||p[mc])&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,u,!1)&&l.getRenderMode()!==pk.VECTOR&&this.renderTileImage_(c,i)}return t.prototype.getTile.call(this,e,r,n,i)},e.prototype.isDrawableTile=function(e){var r=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&r.getRenderMode()===pk.VECTOR||e.hasContext(r)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,r){var n=this.getLayer(),i=n.getRevision(),o=n.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(n);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=i||s.renderedRenderOrder!=o||s.renderedZ!==t.sourceZ){var u=n.getSource(),l=u.getTileGrid(),c=u.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),h=u.getSourceTiles(e,r,t),f=nt(n);delete t.hitDetectionImageData[f],t.executorGroups[f]=[];for(var p=function(r,i){var p=h[r];if(p.getState()!=rc.LOADED)return"continue";var y=p.tileCoord,g=l.getTileCoordExtent(y),m=ve(c,g),v=ie(g,m)?null:Wt(m,n.getRenderBuffer()*a,d.tmpExtent);s.dirty=!1;var _=new L_(0,m,a,e,n.getDeclutter()),b=If(a,e),w=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,a)),e){var i=this.renderFeature(t,b,e,_);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},x=p.getFeatures();o&&o!==s.renderedRenderOrder&&x.sort(o);for(var E=0,S=x.length;E<S;++E){var O=x[E];v&&!xe(v,O.getGeometry().getExtent())||w.call(d,O)}var T=_.finish(),M=n.getRenderMode()!==pk.VECTOR&&n.getDeclutter()&&1===h.length?null:m,I=new X_(M,a,e,u.getOverlaps(),T,n.getRenderBuffer());t.executorGroups[f].push(I)},d=this,y=0,g=h.length;y<g;++y)p(y);s.renderedRevision=i,s.renderedZ=t.sourceZ,s.renderedRenderOrder=o,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){var o=e.viewState.resolution,a=e.viewState.rotation;r=null==r?0:r;var s,u,l,c=this.getLayer(),h=c.getDeclutter(),f=c.getSource().getTileGridForProjection(e.viewState.projection),p={},d=this.renderedTiles,y=function(){var e=d[u],l=Ht(f.getTileCoordExtent(e.wrappedTileCoord),t);if(!h&&!l)return"continue";for(var y=e.executorGroups[nt(c)],g=0,m=y.length;g<m;++g){var v=y[g];s=s||v.forEachFeatureAtCoordinate(t,o,a,r,function(t){if(l||i&&-1!==i.indexOf(t)){var e=t.getId();if(void 0===e&&(e=nt(t)),!(e in p))return p[e]=!0,n(t,c)}},c.getDeclutter()?i:null)}};for(u=0,l=d.length;u<l;++u)y();return s},e.prototype.getFeatures=function(t){return new Promise(function(e,r){for(var n,i=this.getLayer(),o=nt(i),a=i.getSource(),s=this.renderedProjection,u=s.getExtent(),l=this.renderedResolution,c=a.getTileGridForProjection(s),h=Gr(this.renderedPixelToCoordinateTransform_,t.slice()),f=c.getTileCoordForCoordAndResolution(h,l),p=0,d=this.renderedTiles.length;p<d;++p)if(f.toString()===this.renderedTiles[p].tileCoord.toString()){if((n=this.renderedTiles[p]).getState()===rc.LOADED&&n.hifi){var y=c.getTileCoordExtent(n.tileCoord);a.getWrapX()&&s.canWrapX()&&!Kt(u,y)&&Ac(h,s);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var g=_e(c.getTileCoordExtent(n.wrappedTileCoord)),m=[(h[0]-g[0])/l,(g[1]-h[1])/l],v=n.getSourceTiles().reduce(function(t,e){return t.concat(e.getFeatures())},[]),_=n.hitDetectionImageData[o];if(!_&&!this.animatingOrInteracting_){var b=th(c.getTileSize(c.getZForResolution(l))),w=[b[0]/2,b[1]/2],x=this.renderedRotation_;_=Z_(b,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),l,0,.5,w[0],w[1],0)],v,i.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(i).renderedResolution,x),n.hitDetectionImageData[o]=_}e(H_(m,v,_))}}.bind(this))},e.prototype.handleFontsChanged=function(){st(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,r){var n=e.viewHints,i=!(n[gc]||n[mc]);this.renderQueuedTileImages_(i,e),t.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode();if(a===pk.IMAGE)return this.container;var s=o.getSource(),u=e.usedTiles[nt(s)];for(var l in this.renderTileImageQueue_)u&&l in u||delete this.renderTileImageQueue_[l];for(var c=this.context,h=o.getDeclutter()?{}:null,f=gk[a],p=e.pixelRatio,d=e.viewState,y=d.center,g=d.resolution,m=d.rotation,v=e.size,_=Math.round(v[0]*p),b=Math.round(v[1]*p),w=this.renderedTiles,x=s.getTileGridForProjection(e.viewState.projection),E=[],S=[],O=w.length-1;O>=0;--O)for(var T=w[O],M=T.tileCoord,I=x.getTileCoordExtent(T.wrappedTileCoord),P=x.getTileCoordExtent(M,this.tmpExtent)[0]-I[0],C=jr(Br(this.inversePixelTransform.slice(),1/p,1/p),this.getRenderTransform(y,g,m,p,_,b,P)),L=T.executorGroups[nt(o)],k=!1,R=0,A=L.length;R<A;++R){var N=L[R];if(N.hasExecutors(f)){var F=T.tileCoord[0],j=void 0;if(!h&&!k){j=N.getClipCoords(C),c.save();for(var D=0,G=E.length;D<G;++D){var B=E[D];F<S[D]&&(c.beginPath(),c.moveTo(j[0],j[1]),c.lineTo(j[2],j[3]),c.lineTo(j[4],j[5]),c.lineTo(j[6],j[7]),c.moveTo(B[6],B[7]),c.lineTo(B[4],B[5]),c.lineTo(B[2],B[3]),c.lineTo(B[0],B[1]),c.clip())}}N.execute(c,C,m,i,f,h),h||k||(c.restore(),E.push(j),S.push(F),k=!0)}}h&&W_(h,c,m,e.layerStatesArray[e.layerIndex].opacity,i,e.declutterItems);return this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var r in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,r,n){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)i=Cf(n,t,r[o],e,this.boundHandleStyleImageChange_)||i;else i=Cf(n,t,r,e,this.boundHandleStyleImageChange_);return i},e.prototype.tileImageNeedsRender_=function(t,e,r){var n=this.getLayer(),i=t.getReplayState(n),o=n.getRevision(),a=t.sourceZ,s=t.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==o||i.renderedTileZ!==a},e.prototype.renderTileImage_=function(t,e){var r=this.getLayer(),n=t.getReplayState(r),i=r.getRevision(),o=t.executorGroups[nt(r)];n.renderedTileRevision=i,n.renderedTileZ=t.sourceZ;var a=t.wrappedTileCoord,s=a[0],u=r.getSource(),l=e.pixelRatio,c=e.viewState.projection,h=u.getTileGridForProjection(c),f=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=h.getResolution(s),y=t.getContext(r);l=Math.max(l,p/l);var g=u.getTilePixelSize(s,l,c);y.canvas.width=g[0],y.canvas.height=g[1];var m=l/p;if(1!==m){var v=Fr(this.tmpTransform_);Br(v,m,m),y.setTransform.apply(y,v)}var _=h.getTileCoordExtent(a,this.tmpExtent),b=p/d,w=Fr(this.tmpTransform_);Br(w,b,-b),function(t,e,r){jr(t,Dr(Nr,1,0,0,1,e,r))}(w,-_[0],-_[3]);for(var x=0,E=o.length;x<E;++x){o[x].execute(y,w,0,!0,yk[r.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},e}(md),vk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_k=function(t){function e(e){var r=this,n=e||{},i=at({},n);delete i.preload,delete i.useInterimTilesOnError,r=t.call(this,i)||this;var o=n.renderMode||pk.HYBRID;return Ut(null==o||o==pk.IMAGE||o==pk.HYBRID||o==pk.VECTOR,28),r.renderMode_=o,r.setPreload(n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return vk(e,t),e.prototype.createRenderer=function(){return new mk(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(id)},e.prototype.getUseInterimTilesOnError=function(){return this.get(od)},e.prototype.setPreload=function(t){this.set(id,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(od,t)},e}(h_),bk=r(29),wk=r.n(bk),xk=r(107),Ek=r.n(xk),Sk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ok(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(Tk,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Tk(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1===(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function Mk(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function Ik(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(Mk,i,n),i}var Pk=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=new Xe({code:"",units:We.TILE_PIXELS}),r.featureClass_=n.featureClass?n.featureClass:ta,r.geometryName_=n.geometryName,r.layerName_=n.layerName?n.layerName:"layer",r.layers_=n.layers?n.layers:null,r.idProperty_=n.idProperty,r}return Sk(e,t),e.prototype.readRawGeometry_=function(t,e,r,n){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,u=0,l=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),u+=t.readSVarint(),1===o&&l>c&&(n.push(l),c=l),r.push(s,u),l+=2):7===o?l>c&&(r.push(r[c],r[c+1]),l+=2):Ut(!1,59)}l>c&&(n.push(l),c=l)},e.prototype.createFeature_=function(t,e,r){var n,i=e.type;if(0===i)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],u=[];this.readRawGeometry_(t,e,s,u);var l=function(t,e){var r;1===t?r=1===e?De.POINT:De.MULTI_POINT:2===t?r=1===e?De.LINE_STRING:De.MULTI_LINE_STRING:3===t&&(r=De.POLYGON);return r}(i,u.length);if(this.featureClass_===ta)(n=new this.featureClass_(l,s,u,a,o)).transform(r.dataProjection,r.featureProjection);else{var c=void 0;if(l==De.POLYGON){for(var h=[],f=0,p=0,d=0,y=u.length;d<y;++d){var g=u[d];Gn(s,f,g,2)||(h.push(u.slice(p,d)),p=d),f=g}c=h.length>1?new ti(s,Xr.XY,h):new Yn(s,Xr.XY,u)}else c=l===De.POINT?new en(s,Xr.XY):l===De.LINE_STRING?new Ln(s,Xr.XY):l===De.POLYGON?new Yn(s,Xr.XY,u):l===De.MULTI_POINT?new cn(s,Xr.XY):l===De.MULTI_LINE_STRING?new $n(s,Xr.XY,u):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var m=ii(c,!1,r);n.setGeometry(m),n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return ai.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var r=this.layers_,n=this.adaptOptions(e),i=yr(n.dataProjection);i.setWorldExtent(n.extent),n.dataProjection=i;var o=new Ek.a(t),a=o.readFields(Ok,{}),s=[];for(var u in a)if(!r||-1!=r.indexOf(u)){var l=a[u],c=l?[0,0,l.extent,l.extent]:null;i.setExtent(c);for(var h=0,f=l.length;h<f;++h){var p=Ik(o,l,h);s.push(this.createFeature_(o,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(ni);function Ck(t){return(Ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kk(t,e){return!e||"object"!==Ck(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rk(t){return(Rk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ak(t,e){return(Ak=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nk=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=kk(this,Rk(e).call(this,r,n))).formater_=null,i.popup_=null,i.lastZoom_=-1,i.projection_=t.projection||"EPSG:3857",i.features_=[],i.mode_=t.mode,i.loaded_=!1,i.opacity_=t.opacity||1,i.visibility_=!1!==t.visibility,i.layers_=t.layers,i.extract=t.extract,i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ak(t,e)}(e,yb),r=e,(n=[{key:"addTo",value:function(t){var e=this;this.map=t,this.fire("added:map"),void 0!==this.layers_?this.formater_=new Pk({layers:this.layers_,featureClass:this.mode_===Uk.FEATURE?ri:ta}):this.formater_=new Pk({featureClass:this.mode_===Uk.FEATURE?ri:ta});var r=this.facadeVector_.getMaxExtent(),n=new hk({format:this.formater_,url:this.url,projection:this.projection_});n.on(zg,function(t){return e.checkAllTilesLoaded_(t)}),this.ol3Layer=new _k(G({source:n,extent:r},this.vendorOptions_,!0)),this.setOpacity(this.opacity_),this.setVisible(this.visibility_),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.on("change:zoom",function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}}),this.map.on("move",function(t){if(e.map){var r=e.map.getContainer().parentElement.parentElement.id;document.getElementById(r).style.cursor="inherit",e.map.getMapImpl().forEachFeatureAtPixel(t.pixel,function(t){t&&(document.getElementById(r).style.cursor="pointer")})}}),setTimeout(function(){var t=e.map.getLayers().filter(function(t){var r=void 0===t.getImpl().layers_||t.getImpl().layers_===e.layers_;return t.url===e.url&&r});t.length>0&&null!==t[0].getStyle()&&t[0].setStyle(t[0].getStyle())},10)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!v(n))){var i=rF(wk.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),o={icon:"g-cartografia-pin",title:this.name,content:i},a=this.map.getPopup();v(a)?((a=new Uv).addTab(o),this.map.addPopup(a,e)):a.addTab(o)}}},{key:"parseFeaturesForTemplate_",value:function(t){var e={features:[]};return t.forEach(function(t){var r=t.getAttributes(),n=Object.keys(r),i=[];n.forEach(function(t){i.push({key:F(t),value:r[t]})});var o={id:t.getId(),attributes:i};e.features.push(o)}),e}},{key:"unselectFeatures",value:function(){v(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"removePopup",value:function(){v(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeatures",value:function(t,e){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=Cd(n.peekFirstKey())[0];n.forEach(function(t){if(t.tileCoord[0]===i&&t.getState()===rc.LOADED)for(var e=t.getSourceTiles(),n=0,o=e.length;n<o;n+=1){var a=e[n].getFeatures();a&&(r=r.concat(a))}})}return r}},{key:"checkAllTilesLoaded_",value:function(t){var e=t.tile.getTileCoord(),r=yr(this.projection_);this.ol3Layer.getSource().getTileCacheForProjection(r).getValues().every(function(t){var r=t.getTileCoord(),n=t.getState();return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]||n!==rc.LOADING})&&!this.loaded_&&(this.loaded_=!0,this.facadeVector_.fire(Qf))}},{key:"isLoaded",value:function(){return!0}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.extract===t.extract),r}}])&&Lk(r.prototype,n),i&&Lk(r,i),e}();function Fk(t){return(Fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dk(t,e){return!e||"object"!==Fk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gk(t,e,r){return(Gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bk(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Bk(t){return(Bk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zk(t,e){return(zk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uk={RENDER:"render",FEATURE:"feature"},qk=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=o||new Nk(r,n,i);return t=Dk(this,Bk(e).call(this,r,n,i,a)),d(Nk)&&wa("La implementación usada no puede crear capas Vector"),t.extract=r.extract,t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zk(t,e)}(e,Gx),r=e,(n=[{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return v(t)&&(t=this.map_.userMaxExtent,v(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise(function(e){return e(t.getMaxExtent())})}},{key:"setStyle",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_OPTIONS_STYLE;Gk(Bk(e.prototype),"setStyle",this).call(this,t,r,n)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!v(e)){var r=e[0];v(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map(function(t){return DE.olFeature2Facade(t)})}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}},{key:"type",get:function(){return"MVT"},set:function(t){d(t)||v(t)||"MVT"===t||wa("El tipo de capa debe ser '".concat("MVT").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){v(t)?this.getImpl().extract=!1:w(t)?this.getImpl().extract="true"===E(t):this.getImpl().extract=t}}])&&jk(r.prototype,n),i&&jk(r,i),e}();qk.DEFAULT_OPTIONS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2},radius:5};var Vk=qk,Yk=(r(133),r(108)),Wk=r.n(Yk),Xk=".m-top.m-left",Zk=".m-top.m-right",Hk=".m-bottom.m-left",Kk=".m-bottom.m-right";function $k(t){return($k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qk(t,e){return!e||"object"!==$k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tR(t){return(tR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eR(t,e){return(eR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rR=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Qk(this,tR(e).call(this))).name=t,r._map=null,r._controls=[],r._buttonPanel=null,r._collapsible=!1,v(n.collapsible)||(r._collapsible=n.collapsible),r.position=Xk,v(n.position)||(r.position=n.position),r._collapsed=r._collapsible,v(n.collapsed)||(r._collapsed=n.collapsed&&!0===r._collapsible),r._multiActivation=!1,v(n.multiActivation)||(r._multiActivation=n.multiActivation),r._className=null,v(n.className)||(r._className=n.className),r._collapsedButtonClass=null,v(n.collapsedButtonClass)?r.position===Xk||r.position===Hk?r._collapsedButtonClass="g-cartografia-flecha-derecha":r.position!==Zk&&r.position!==Kk||(r._collapsedButtonClass="g-cartografia-flecha-izquierda"):r._collapsedButtonClass=n.collapsedButtonClass,r._openedButtonClass=null,v(n.openedButtonClass)?r.position===Xk||r.position===Hk?r._openedButtonClass="g-cartografia-flecha-izquierda":r.position!==Zk&&r.position!==Kk||(r._openedButtonClass="g-cartografia-flecha-derecha"):r._openedButtonClass=n.openedButtonClass,r._element=null,r._areaContainer=null,r._controlsContainer=null,r._tooltip=null,v(n.tooltip)||(r._tooltip=n.tooltip),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eR(t,e)}(e,da),r=e,(n=[{key:"destroy",value:function(){null!=this._element&&this._areaContainer.removeChild(this._element),this._controlsContainer=null}},{key:"addTo",value:function(t,e){var r=this;this._map=t,this._areaContainer=e;var n=rF(Wk.a);this._element=n,v(this._tooltip)||this._element.setAttribute("title",this._tooltip),this._buttonPanel=n.querySelector("button.m-panel-btn"),v(this._className)||this._className.split(/\s+/).forEach(function(t){n.classList.add(t)}),!0===this._collapsed?this.collapse():this.open(),!0!==this._collapsible&&n.classList.add("no-collapsible"),this._controlsContainer=n.querySelector("div.m-panel-controls"),e.appendChild(n),this._buttonPanel.addEventListener("click",function(t){t.preventDefault(),!1===r._collapsed?r.collapse():r.open()}),this.addControls(this._controls),this.fire("added:map",n)}},{key:"_collapse",value:function(t){t.classList.remove("opened"),this._buttonPanel.classList.remove(this._openedButtonClass),t.classList.add("collapsed"),this._buttonPanel.classList.add(this._collapsedButtonClass),this._collapsed=!0,this.fire("hide")}},{key:"_open",value:function(t){t.classList.remove("collapsed"),this._buttonPanel.classList.remove(this._collapsedButtonClass),t.classList.add("opened"),this._buttonPanel.classList.add(this._openedButtonClass),this._collapsed=!1,this.fire("show")}},{key:"open",value:function(){this._open(this._element)}},{key:"collapse",value:function(){this._collapse(this._element)}},{key:"getControls",value:function(){return this._controls}},{key:"addControls",value:function(t){var e=this,r=t;v(r)||(m(r)||(r=[r]),r.forEach(function(t){t instanceof ap&&(e.hasControl(t)||(e._controls.push(t),t.setPanel(e),t.on("destroy",e._removeControl.bind(e),e)),v(e._controlsContainer)||(t.on("added:map",e._moveControlView.bind(e),e),e._map.addControls(t)),t.on("activated",e._manageActivation.bind(e),e))}))}},{key:"hasControl",value:function(t){var e=!1;return v(t)||(w(t)?e=null!=this._controls.filter(function(e){return e.name===t})[0]:t instanceof ap&&(e=D(this._controls,t))),e}},{key:"removeControls",value:function(t){var e=this,r=t;v(r)||(m(r)||(r=[r]),r.forEach(function(t){var r=t;r instanceof ap&&e.hasControl(r)&&(e._controls=e._controls.filter(function(t){return!r.equals(t)}),r.setPanel(null))},this),0===this._controls.length&&this._map.removePanel(this))}},{key:"_removeControl",value:function(t){var e=this;this._map.controls(t).forEach(function(t){var r=e._controls.indexOf(t);-1!==r&&e._controls.splice(r,1)})}},{key:"removeClassName",value:function(t){v(this._element)?this._className=this._className.replace(new RegExp("s* ".concat(t," s*")),""):this._element.classList.remove(t)}},{key:"addClassName",value:function(t){v(this._element)?this._className=this._className.concat(" ").concat(t):this._element.classList.add(t)}},{key:"_moveControlView",value:function(t){var e=t.getElement();v(this._controlsContainer)||this._controlsContainer.appendChild(e),t.fire("added:panel")}},{key:"_manageActivation",value:function(t){!0!==this._multiActivation&&this._controls.forEach(function(e){!e.equals(t)&&e.activated&&e.deactivate()})}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=t.name===this.name),r}},{key:"getTemplatePanel",value:function(){return this._element}},{key:"getButtonPanel",value:function(){return this._buttonPanel}},{key:"isCollapsed",value:function(){return this._collapsed}},{key:"getControlsContainer",value:function(){return this._controlsContainer}}])&&Jk(r.prototype,n),i&&Jk(r,i),e}();function nR(t){return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oR(t,e){return!e||"object"!==nR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function aR(t){return(aR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sR(t,e){return(sR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uR=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=oR(this,aR(e).call(this))).map_=t,i.url_=r,i.format_=n,i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sR(t,e)}(e,da),r=e,(n=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then(function(r){t.apply(e,r)})}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise(function(r){tF(e.url_).then(function(n){if(v(n.text))wa(Sa("exception").no_service_response);else{var i=n.text.replace("urn:ogc:def:crs:OGC:1.3:CRS84","urn:ogc:def:crs:EPSG::4326"),o=e.format_.read(i,{featureProjection:t});r.call(e,[o])}})})}}])&&iR(r.prototype,n),i&&iR(r,i),e}();function lR(t){return(lR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hR(t,e){return!e||"object"!==lR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fR(t,e,r){return(fR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pR(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function pR(t){return(pR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dR(t,e){return(dR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yR=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=hR(this,pR(e).call(this,r,n))).popup_=null,i.formater_=null,i.loader_=null,i.loadFeaturesPromise_=null,i.loaded_=!1,i.hiddenAttributes_=[],v(r.hide)||(i.hiddenAttributes_=r.hide),i.showAttributes_=[],v(r.show)||(i.showAttributes_=r.show),i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dR(t,e)}(e,yb),r=e,(n=[{key:"addTo",value:function(t){this.formater_=new Ca({defaultDataProjection:yr(t.getProjection().code)}),v(this.url)||(this.loader_=new uR(t,this.url,this.formater_)),fR(pR(e.prototype),"addTo",this).call(this,t)}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={type:"FeatureCollection",features:this.formater_.write(this.facadeVector_.getFeatures()),crs:{properties:{code:this.map.getProjection().code.split(":")[1]},type:"EPSG"}};b(t)&&(e=t),this.source=e,this.updateSource_()}},{key:"setSource",value:function(t){this.source=t,v(this.map)||this.updateSource_()}},{key:"requestFeatures_",value:function(){var t=this;return v(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise(function(e){if(t.source){var r=t.formater_.read(t.source,t.map.getProjection());e(r)}else t.loader_.getLoaderFn(function(t){e(t)})(null,null,yr(t.map.getProjection().code))})),this.loadFeaturesPromise_}},{key:"updateSource_",value:function(){var t=this;v(this.vendorOptions_.source)&&this.requestFeatures_().then(function(e){t.ol3Layer&&t.ol3Layer.setSource(new ub({loader:function(r,n,i){t.loaded_=!0,t.facadeVector_.clear(),t.facadeVector_.addFeatures(e),t.fire(Qf,[e])}})),t.facadeVector_.addFeatures(e)})}},{key:"getFeaturesExtent",value:function(t,e){var r=this.map.getProjection().code,n=this.getFeatures(t,e);return aa.getFeaturesExtent(n,r)}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise(function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=aa.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then(function(t){var e=aa.getFeaturesExtent(t,i);n(e)})})}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!0===this.extract&&(this.unselectFeatures(),!v(n))){var i=n.getAttribute("vendor.mapea.click");if(_(i))i(r,n);else{var o=rF(wk.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),a={icon:"g-cartografia-pin",title:this.name,content:o},s=this.map.getPopup();v(s)?((s=new Uv).addTab(a),this.map.addPopup(s,e)):s.addTab(a)}}}},{key:"parseFeaturesForTemplate_",value:function(t){var e=this,r={features:[]};return t.forEach(function(t){var n=t.getAttributes(),i=Object.keys(n),o=[];i.forEach(function(t){var r=!0;v(e.showAttributes_)?v(e.hiddenAttributes_)||(r=!D(e.hiddenAttributes_,t)):r=D(e.showAttributes_,t),r&&o.push({key:F(t),value:n[t]})});var a={id:t.getId(),attributes:o};r.features.push(a)}),r}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=r&&this.name===t.name,r=r&&this.extract===t.extract),r}}])&&cR(r.prototype,n),i&&cR(r,i),e}();function gR(t){return(gR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vR(t,e){return!e||"object"!==gR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _R(t,e,r){return(_R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bR(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function bR(t){return(bR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wR(t,e){return(wR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xR=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new yR(t,n,i);return r=vR(this,bR(e).call(this,t,n,void 0,o)),d(yR)&&wa(Sa("exception").geojsonlayer_method),v(t)&&wa(Sa("exception").no_param),w(t)?r.url=t:m(t)?r.source=t:(r.url=t.url,r.name=t.name,r.source=t.source,r.extract=t.extract||!1,v(t.crs)||(v(r.source)&&(r.source={type:"FeatureCollection",features:[]}),r.source.crs={type:"EPSG",properties:{code:t.crs}})),r.options=n,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wR(t,e)}(e,Gx),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name,r=r&&this.extract===t.extract),r}},{key:"setSource",value:function(t){this.source=t,this.getImpl().refresh(t)}},{key:"setStyle",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_OPTIONS_STYLE;_R(bR(e.prototype),"setStyle",this).call(this,t,r,n)}},{key:"type",get:function(){return"GeoJSON"},set:function(t){d(t)||v(t)||"GeoJSON"===t||wa("El tipo de capa debe ser '".concat("GeoJSON").concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"source",get:function(){return this.getImpl().source},set:function(t){this.getImpl().source=t}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){v(t)?this.getImpl().extract=!1:w(t)?this.getImpl().extract="true"===E(t):this.getImpl().extract=t}}])&&mR(r.prototype,n),i&&mR(r,i),e}();xR.DEFAULT_OPTIONS_STYLE={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5};var ER=xR,SR=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OR=function(t){function e(e){var r=e||{},n=void 0!==r.projection?r.projection:"EPSG:3857",i=void 0!==r.tileGrid?r.tileGrid:Lg({extent:Ag(n),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return SR(e,t),e}(Wg);function TR(t){return(TR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PR(t,e){return!e||"object"!==TR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function CR(t){return(CR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LR(t,e){return(LR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kR=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){MR(t,e,r[e])})}return t}({},t,{tileUrlFunction:e.tileUrlFunction});return PR(this,CR(e).call(this,r))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LR(t,e)}(e,OR),r=e,i=[{key:"tileUrlFunction",value:function(t){return""}}],(n=null)&&IR(r.prototype,n),i&&IR(r,i),e}(),RR=r(109),AR=r.n(RR),NR=r(30);function FR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tiles_={},this.db_=null,this.init(e)}var e,r,n;return e=t,(r=[{key:"init",value:function(t){var e=this;this.initPromise_=new Promise(function(r,n){AR()({locateFile:function(t){return"".concat(M.config.SQL_WASM_URL).concat(t)}}).then(function(n){(function t(e){return new Promise(function(r,n){var i=new Uint8Array;e instanceof ArrayBuffer?(i=new Uint8Array(e),r(i)):e instanceof File?e.arrayBuffer().then(function(t){i=new Uint8Array(t),r(i)}):e instanceof Response?r(e.arrayBuffer().then(t)):e instanceof Uint8Array?r(e):r(i)})})(t).then(function(t){e.db_=new n.Database(t),r(e.db_)})}).catch(function(t){n(t)})})}},{key:"executeQuery",value:function(t){return this.initPromise_.then(function(e){return e.exec(t)[0]})}},{key:"getTile",value:function(t){var e="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",t[0]).replace("{x}",t[1]).replace("{y}",t[2]),r=this.tiles_[t]||null,n=null;if(this.db_&&!r){var i=this.db_.exec(e)[0];v(i)||(n=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i="",o=t.length;for(e=2;e<o;e+=3)i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4|t[e-1]>>4],i+=n[(15&t[e-1])<<2|t[e]>>6],i+=n[63&t[e]];return e===o+1&&(i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4],i+="=="),e===o&&(i+=n[t[e-2]>>2],i+=n[(3&t[e-2])<<4|t[e-1]>>4],i+=n[(15&t[e-1])<<2],i+="="),"data:".concat(r,";base64,").concat(i)}(r=i.values[0][0]))}return this.setTile(t,n),n}},{key:"getVectorTile",value:function(t){var e,r=this,n="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",t[0]).replace("{x}",t[1]).replace("{y}",t[2]),i=this.tiles_[t]||null;return i=i?new Promise(function(t){return t(i)}):this.executeQuery(n).then(function(n){return v(n)||(e=n.values[0][0],e=Object(NR.inflate)(e)),r.setTile(t,e),e})}},{key:"setTile",value:function(t,e){this.tiles_[t]=e}},{key:"getExtent",value:function(){var t=null;return this.executeQuery('select value from metadata where name="bounds"').then(function(e){if(e){var r=e.values[0][0];t=r.split(",").map(Number.parseFloat)}return t})}},{key:"getFormat",value:function(){var t="png";return this.executeQuery('select value from metadata where name="format"').then(function(e){return e&&(t=e.values[0][0]),t})}}])&&FR(e.prototype,r),n&&FR(e,n),t}();function DR(t){return(DR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function BR(t,e){return!e||"object"!==DR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zR(t){return(zR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UR(t,e){return(UR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qR=256,VR=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=BR(this,zR(e).call(this,n,i))).tileLoadFunction_=t.tileLoadFunction||null,r.url_=t.url,r.source_=t.source,r.tileSize_="number"==typeof t.tileSize?t.tileSize:qR,r.maxExtent_=t.maxExtent||null,r.minZoomLevel_="number"==typeof t.minZoomLevel?t.minZoomLevel:0,r.maxZoomLevel_="number"==typeof t.maxZoomLevel?t.maxZoomLevel:0,r.opacity_="number"==typeof n.opacity?n.opacity:1,r.zIndex_=mv.Z_INDEX[_p],r.visibility=!1!==t.visibility||t.visibility,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UR(t,e)}(e,Gd),r=e,(n=[{key:"setVisible",value:function(t){this.visibility=t}},{key:"addTo",value:function(t){var e=this;this.map=t;var r=yr("EPSG:3857"),n=r.getExtent(),i=function(t,e,r){for(var n=we(t)/e,i=new Array(r),o=0;o<r;o+=1)i[o]=n/Math.pow(2,o);return i}(n,this.tileSize_,16);if(this.ol3Layer=new _d({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:n}),this.map.getMapImpl().addLayer(this.ol3Layer),this.tileLoadFunction_){var o=new kR({projection:r,tileLoadFunction:function(t){return e.loadTile(t)},tileGrid:new Rd({extent:n,origin:fe(n),resolutions:i})});this.ol3Layer.setSource(o)}else this.fetchSource().then(function(t){e.tileProvider_=t;var o=new kR({projection:r,tileLoadFunction:function(r){return e.loadTileWithProvider(r,t)},tileGrid:new Rd({extent:n,origin:fe(n),resolutions:i})});e.ol3Layer.setSource(o)})}},{key:"loadTile",value:function(t){var e=t,r=t.getTileCoord();this.tileLoadFunction_(r[0],r[1],-r[2]-1).then(function(t){e.getImage().src=t||e.getImage().src})}},{key:"loadTileWithProvider",value:function(t,e){var r=t,n=t.getTileCoord(),i=e.getTile([n[0],n[1],-n[2]-1]);r.getImage().src=i||r.getImage().src}},{key:"fetchSource",value:function(){var t=this;return new Promise(function(e,r){if(t.tileProvider_)e(t.tileProvider_);else if(t.source_){e(new jR(t.source_))}else{if(t.url_)throw new Error("");r(new Error("No url or source was specified."))}})}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new _d(e)}return t}}])&&GR(r.prototype,n),i&&GR(r,i),e}();function YR(t){return(YR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var WR=/MBTiles\*.*/,XR=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map(function(t){return t.trim()}).map(function(t){return Number.parseFloat(t)})}};if(w(e)&&t.test(e)){var l=e.split("*")[o];v(l)||(s=u[n](l))}else b(e)?s=e[r]:wa("El parámetro no es de un tipo soportado: ".concat(YR(e)));return w(s)&&(s=s.trim()),!0===a&&(s=E(s)),s}},ZR=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r=_p,n=XR({parameter:t,type:"string",attr:"name"}),i=XR({parameter:t,type:"string",attr:"url"}),o=XR({parameter:t,type:"string",attr:"legend"});return(WR.test(t)||b(t))&&(e={type:r,name:n(WR,3),url:i(WR,2),legend:o(WR,1)}),e}),m(t)||(e=e[0]),e};function HR(t){return(HR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JR(t,e){return!e||"object"!==HR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function QR(t){return(QR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tA(t,e){return(tA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var eA=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(VR)&&wa(Sa("exception").mbtiles_method);var o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){KR(t,e,r[e])})}return t}({},ZR(t),{source:t.source}),a=new VR(t,n,i);return(r=JR(this,QR(e).call(this,o,a))).url=o.url,r.name=o.name,r.legend=o.legend,r.options=n,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tA(t,e)}(e,nd),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.options===t.options),r}},{key:"type",get:function(){return _p},set:function(t){d(t)||v(t)||t===_p||wa("El tipo de capa debe ser '".concat(_p).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&$R(r.prototype,n),i&&$R(r,i),e}(),rA=r(10),nA=r(110),iA=r.n(nA);"function"==typeof Object.assign&&Object.assign;function oA(t){return t*Math.PI/180}var aA=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function sA(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}var uA,lA=Array(256).join(" ");function cA(t,e){if(e>=.05){for(var r="",n=t.split("\n"),i=lA.slice(0,Math.round(e/.1)),o=0,a=n.length;o<a;++o)o>0&&(r+="\n"),r+=n[o].split("").join(i);return r}return t}function hA(){return uA||(uA=sA(1,1).getContext("2d")),uA}function fA(t,e){return hA().measureText(t).width+(t.length-1)*e}var pA={};eo&&ct(eo,Ct.CLEAR,function(){pA={}});var dA,yA,gA=rA.e.isFunction,mA=rA.e.convertFunction,vA=rA.c.isExpression,_A=rA.c.createPropertyExpression,bA={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},wA={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},xA=function(t,e){var r=_A(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value},EA={},SA={zoom:0},OA={};function TA(t,e,r,n,i){var o=t.id;OA[o]||(OA[o]={});var a=OA[o];if(!a[r]){var s=(t[e]||EA)[r],u=rA.f[e+"_"+t.type][r];void 0===s&&(s=u.default);var l=vA(s);if(!l&&gA(s)&&(s=mA(s,u),l=!0),l){var c=xA(s,u);a[r]=c.evaluate.bind(c)}else"color"==u.type&&(s=rA.a.parse(s)),a[r]=function(){return s}}return SA.zoom=n,a[r](SA,i)}var MA={};function IA(t,e){if(t){if(0===t.a||0===e)return;var r=t.a;return e=void 0===e?1:e,"rgba("+Math.round(255*t.r/r)+","+Math.round(255*t.g/r)+","+Math.round(255*t.b/r)+","+r*e+")"}return t}var PA=/^([^]*)\{(.*)\}([^]*)$/;function CA(t,e){var r;do{if(r=t.match(PA)){var n=e[r[2]]||"";t=r[1]+n+r[3]}}while(r);return t}var LA=!1;var kA=function(t,e,r,n,i,o,a){if(void 0===n&&(n=aA),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var s,u;if(o)if("undefined"!=typeof Image){var l=new Image;l.crossOrigin="anonymous",l.onload=function(){s=l,u=[l.width,l.height],t.changed(),l.onload=null},l.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(s=t.data.image,u=[s.width,s.height])})}for(var h,f=Object(rA.b)(e.layers),p={},d=[],y=0,g=f.length;y<g;++y){var m=f[y],v=m.id;if("string"==typeof r&&m.source==r||-1!==r.indexOf(v)){var _=m["source-layer"];if(!h){h=m.source;var b=e.sources[h];if(!b)throw new Error('Source "'+h+'" is not defined');var w=b.type;if("vector"!==w&&"geojson"!==w)throw new Error('Source "'+h+'" is not of type "vector" or "geojson", but "'+w+'"')}var x=p[_];x||(x=p[_]=[]),x.push({layer:m,index:y}),d.push(v)}delete OA[v],delete MA[v]}var E=new Eo,S=new xo,O={},T={},M=[],I=function(t,e){var r=t.getProperties(),o=p[r.layer];if(o){var l=n.indexOf(e);-1==l&&(l=function(t,e){for(var r=0,n=e.length;r<n;++r)if(e[r]<t&&r+1<n){var i=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(i)}return n-1}(e,n));for(var c,h=bA[t.getGeometry().getType()],f={properties:r,type:h},d=-1,y=function(n,p){var y=o[n],g=y.layer,m=g.id,v=g.layout||EA,_=g.paint||EA;if("none"===v.visibility||"minzoom"in g&&l<g.minzoom||"maxzoom"in g&&l>=g.maxzoom)return"continue";var b=g.filter;if(!b||function(t,e,r,n){return t in MA||(MA[t]=Object(rA.d)(e).filter),SA.zoom=n,MA[t](SA,r)}(m,b,f,l)){c=g;var w=void 0,x=void 0,I=void 0,P=void 0,C=void 0,L=void 0,k=y.index;if(3==h&&("fill"==g.type||"fill-extrusion"==g.type))if(x=TA(g,"paint",g.type+"-opacity",l,f),g.type+"-pattern"in _){var R=TA(g,"paint",g.type+"-pattern",l,f);if(R){var A="string"==typeof R?CA(R,r):R.toString();if(s&&i&&i[A]){(L=M[++d])&&L.getFill()&&!L.getStroke()&&!L.getText()||(L=M[d]=new Co({fill:new xo})),I=L.getFill(),L.setZIndex(k);var N=T[lt=A+"."+x];if(!N)(ft=(ht=sA((ct=i[A]).width,ct.height)).getContext("2d")).globalAlpha=x,ft.drawImage(s,ct.x,ct.y,ct.width,ct.height,0,0,ct.width,ct.height),N=ft.createPattern(ht,"repeat"),T[lt]=N;I.setColor(N)}}}else(w=IA(TA(g,"paint",g.type+"-color",l,f),x))&&(g.type+"-outline-color"in _&&(C=IA(TA(g,"paint",g.type+"-outline-color",l,f),x)),C||(C=w),(L=M[++d])&&L.getFill()&&L.getStroke()&&!L.getText()||(L=M[d]=new Co({fill:new xo,stroke:new Eo})),(I=L.getFill()).setColor(w),(P=L.getStroke()).setColor(C),P.setWidth(1),L.setZIndex(k));if(1!=h&&"line"==g.type){w=!("line-pattern"in _)&&"line-color"in _?IA(TA(g,"paint","line-color",l,f),TA(g,"paint","line-opacity",l,f)):void 0;var F=TA(g,"paint","line-width",l,f);w&&F>0&&((L=M[++d])&&L.getStroke()&&!L.getFill()&&!L.getText()||(L=M[d]=new Co({stroke:new Eo})),(P=L.getStroke()).setLineCap(TA(g,"layout","line-cap",l,f)),P.setLineJoin(TA(g,"layout","line-join",l,f)),P.setMiterLimit(TA(g,"layout","line-miter-limit",l,f)),P.setColor(w),P.setWidth(F),P.setLineDash(_["line-dasharray"]?TA(g,"paint","line-dasharray",l,f).map(function(t){return t*F}):null),L.setZIndex(k))}var j=!1,D=null,G=0,B=void 0,z=void 0,U=void 0;if((1==h||2==h)&&"icon-image"in v){var q=TA(g,"layout","icon-image",l,f);if(q){B="string"==typeof q?CA(q,r):q.toString();var V=void 0;if(s&&i&&i[B]){var Y=TA(g,"layout","icon-rotation-alignment",l,f);if(2==h){var W=t.getGeometry();if(W.getFlatMidpoint||W.getFlatMidpoints){var X=W.getExtent();if(Math.sqrt(Math.max(Math.pow((X[2]-X[0])/e,2),Math.pow((X[3]-X[1])/e,2)))>150){var Z="MultiLineString"===W.getType()?W.getFlatMidpoints():W.getFlatMidpoint();if(yA||(yA=new ta("Point",dA=[NaN,NaN],[],{},null)),V=yA,dA[0]=Z[0],dA[1]=Z[1],"line"===(kt=TA(g,"layout","symbol-placement",l,f))&&"map"===Y)for(var H=W.getStride(),K=W.getFlatCoordinates(),$=0,J=K.length-H;$<J;$+=H){var Q=K[$],tt=K[$+1],et=K[$+H],rt=K[$+H+1],nt=Math.min(Q,et),it=Math.min(tt,rt),ot=Math.max(Q,et),at=Math.max(tt,rt);if(Z[0]>=nt&&Z[0]<=ot&&Z[1]>=it&&Z[1]<=at){G=Math.atan2(tt-rt,et-Q);break}}}}}if(2!==h||V){var st=TA(g,"layout","icon-size",l,f),ut=void 0!==_["icon-color"]?TA(g,"paint","icon-color",l,f):null;if(!ut||0!==ut.a){var lt=B+"."+st;if(null!==ut&&(lt+="."+ut),!(z=O[lt])){var ct=i[B];if(null!==ut){var ht,ft;(ft=(ht=sA(ct.width,ct.height)).getContext("2d")).drawImage(s,ct.x,ct.y,ct.width,ct.height,0,0,ct.width,ct.height);for(var pt=ft.getImageData(0,0,ht.width,ht.height),dt=0,yt=pt.data.length;dt<yt;dt+=4){var gt=ut.a;0!==gt&&(pt.data[dt]=255*ut.r/gt,pt.data[dt+1]=255*ut.g/gt,pt.data[dt+2]=255*ut.b/gt),pt.data[dt+3]=gt}ft.putImageData(pt,0,0),z=O[lt]=new Vo({img:ht,imgSize:[ht.width,ht.height],scale:st/ct.pixelRatio})}else z=O[lt]=new Vo({img:s,imgSize:u,size:[ct.width,ct.height],offset:[ct.x,ct.y],rotateWithView:"map"===Y,scale:st/ct.pixelRatio})}}z&&((L=M[++d])&&L.getImage()&&!L.getFill()&&!L.getStroke()||(L=M[d]=new Co),L.setGeometry(V),z.setRotation(G+oA(TA(g,"layout","icon-rotate",l,f))),z.setOpacity(TA(g,"paint","icon-opacity",l,f)),z.setAnchor(wA[TA(g,"layout","icon-anchor",l,f)]),L.setImage(z),D=L.getText(),L.setText(void 0),L.setZIndex(k),j=!0,U=!1)}else U=!0}}}if(1==h&&"circle-radius"in _){(L=M[++d])&&L.getImage()&&!L.getFill()&&!L.getStroke()||(L=M[d]=new Co);var mt=TA(g,"paint","circle-radius",l,f),vt=IA(TA(g,"paint","circle-stroke-color",l,f),TA(g,"paint","circle-stroke-opacity",l,f)),_t=IA(TA(g,"paint","circle-color",l,f),TA(g,"paint","circle-opacity",l,f)),bt=TA(g,"paint","circle-stroke-width",l,f),wt=mt+"."+vt+"."+_t+"."+bt;(z=O[wt])||(z=O[wt]=new wo({radius:mt,stroke:vt&&bt>0?new Eo({width:bt,color:vt}):void 0,fill:_t?new xo({color:_t}):void 0})),L.setImage(z),D=L.getText(),L.setText(void 0),L.setGeometry(void 0),L.setZIndex(k),j=!0}var xt=void 0;if("text-field"in v)xt=CA(TA(g,"layout","text-field",l,f).toString(),r).trim(),x=TA(g,"paint","text-opacity",l,f);if(xt&&x&&!U){j||((L=M[++d])&&L.getText()&&!L.getFill()&&!L.getStroke()||(L=M[d]=new Co),L.setImage(void 0),L.setGeometry(void 0)),L.getText()||L.setText(D||new Mb({padding:[2,2,2,2]})),D=L.getText();var Et=Math.round(TA(g,"layout","text-size",l,f)),St=TA(g,"layout","text-font",l,f),Ot=TA(g,"layout","text-line-height",l,f),Tt=iA()(a?a(St):St,Et,Ot),Mt=v["text-transform"];"uppercase"==Mt?xt=xt.toUpperCase():"lowercase"==Mt&&(xt=xt.toLowerCase());var It=TA(g,"layout","text-max-width",l,f),Pt=TA(g,"layout","text-letter-spacing",l,f),Ct=2==h?cA(xt,Pt):function t(e,r,n,i){if(-1!==e.indexOf("\n")){for(var o=e.split("\n"),a=[],s=0,u=o.length;s<u;++s)a.push(t(o[s],r,n,i));return a.join("\n")}var l=n+","+r+","+e+","+i,c=pA[l];if(!c){var h=e.split(" ");if(h.length>1){var f=hA();f.font=r;var p=f.measureText("M").width*n,d="";for(a=[],s=0,u=h.length;s<u;++s){var y=h[s],g=d+(d?" ":"")+y;fA(g,i)<=p?d=g:(d&&a.push(d),d=y)}for(d&&a.push(d),s=0,u=a.length;s<u&&u>1;++s){var m=a[s];if(fA(m,i)<.35*p){var v=s>0?fA(a[s-1],i):1/0,_=s<u-1?fA(a[s+1],i):1/0;a.splice(s,1),u-=1,v<_?(a[s-1]+=" "+m,s-=1):a[s]=m+" "+a[s]}}for(s=0,u=a.length-1;s<u;++s){var b=a[s],w=a[s+1];if(fA(b,i)>.7*p&&fA(w,i)<.6*p){var x=b.split(" "),E=x.pop();fA(E,i)<.2*p&&(a[s]=x.join(" "),a[s+1]=E+" "+w),u-=1}}c=a.join("\n")}else c=e;c=cA(c,i),pA[l]=c}return c}(xt,Tt,It,Pt);D.setText(Ct),D.setFont(Tt),D.setRotation(oA(TA(g,"layout","text-rotate",l,f)));var Lt=TA(g,"layout","text-anchor",l,f),kt=j||1==h?"point":TA(g,"layout","symbol-placement",l,f);D.setPlacement(kt);var Rt=TA(g,"paint","text-halo-width",l,f),At=TA(g,"layout","text-offset",l,f),Nt=TA(g,"paint","text-translate",l,f),Ft=0,jt=0;if("point"==kt){var Dt="center";-1!==Lt.indexOf("left")?(Dt="left",jt=Rt):-1!==Lt.indexOf("right")&&(Dt="right",jt=-Rt),D.setTextAlign(Dt);var Gt=TA(g,"layout","text-rotation-alignment",l,f);D.setRotateWithView("map"==Gt)}else D.setMaxAngle(oA(TA(g,"layout","text-max-angle",l,f))*xt.length/Ct.length),D.setTextAlign(),D.setRotateWithView(!1);var Bt="middle";0==Lt.indexOf("bottom")?(Bt="bottom",Ft=-Rt-.5*(Ot-1)*Et):0==Lt.indexOf("top")&&(Bt="top",Ft=Rt+.5*(Ot-1)*Et),D.setTextBaseline(Bt),D.setOffsetX(At[0]*Et+jt+Nt[0]),D.setOffsetY(At[1]*Et+Ft+Nt[1]),S.setColor(IA(TA(g,"paint","text-color",l,f),x)),D.setFill(S);var zt=IA(TA(g,"paint","text-halo-color",l,f),x);if(zt){E.setColor(zt),Rt*=2;var Ut=.5*Et;E.setWidth(Rt<=Ut?Rt:Ut),D.setStroke(E)}else D.setStroke(void 0);var qt=TA(g,"layout","text-padding",l,f),Vt=D.getPadding();qt!==Vt[0]&&(Vt[0]=Vt[1]=Vt[2]=Vt[3]=qt),L.setZIndex(k)}}},g=0,m=o.length;g<m;++g)y(g);return d>-1?(M.length=d+1,LA&&("function"==typeof t.set?t.set("mapbox-layer",c):t.getProperties()["mapbox-layer"]=c),M):void 0}};return t.setStyle(I),t.set("mapbox-source",h),t.set("mapbox-layers",d),I};function RA(t){return(RA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NA(t,e){return!e||"object"!==RA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function FA(t){return(FA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jA(t,e){return(jA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var DA=256,GA=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=NA(this,FA(e).call(this,n,i))).tileLoadFunction_=t.tileLoadFunction||null,r.url_=t.url,r.source_=t.source,r.style_=t.style,r.tileSize_="number"==typeof t.tileSize?t.tileSize:DA,r.maxExtent_=t.maxExtent||null,r.minZoomLevel_="number"==typeof t.minZoomLevel?t.minZoomLevel:0,r.maxZoomLevel_="number"==typeof t.maxZoomLevel?t.maxZoomLevel:0,r.opacity_="number"==typeof n.opacity?n.opacity:1,r.zIndex_=mv.Z_INDEX[bp],r.visibility=!1!==t.visibility||t.visibility,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jA(t,e)}(e,yb),r=e,(n=[{key:"setVisible",value:function(t){this.visibility=t}},{key:"addTo",value:function(t){var e=this;this.map=t;var r,n=this.map.getProjection().code,i=yr(n),o=i.getExtent(),a=function(t,e,r){for(var n=we(t)/e,i=new Array(r),o=0;o<r;o+=1)i[o]=n/Math.pow(2,o);return i}(o,this.tileSize_,10);(r=this.style_,new Promise(function(t,e){var n=new window.FileReader;n.onload=function(){var e=JSON.parse(n.result);t(e)};try{n.readAsText(r)}catch(e){t(null)}})).then(function(t){e.glStyle_=t,e.tileLoadFunction_?(e.ol3Layer=e.createLayer({resolutions:a,sourceExtent:o,projection:i}),e.ol3Layer.getSource().on(zg,function(t){return e.checkAllTilesLoaded_(t)}),e.ol3Layer.getSource().on(Bg,function(t){return e.checkAllTilesLoaded_(t)}),e.map.on("change:zoom",function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}}),e.map.getMapImpl().addLayer(e.ol3Layer)):e.fetchSource().then(function(t){e.tileProvider_=t,e.tileProvider_.getExtent().then(function(r){var s=r;s&&(s=Or(r,"EPSG:4326",n)),e.ol3Layer=e.createLayer({tileProvider:t,resolutions:a,extent:s,sourceExtent:o,projection:i}),e.ol3Layer.getSource().on(zg,function(t){return e.checkAllTilesLoaded_(t)}),e.ol3Layer.getSource().on(Bg,function(t){return e.checkAllTilesLoaded_(t)}),e.map.on("change:zoom",function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}}),kA(e.ol3Layer,e.glStyle_,""),e.map.getMapImpl().addLayer(e.ol3Layer)})})})}},{key:"createLayer",value:function(t){var e=this,r=new Pk({layers:["0502p_ent_pob_ine"]}),n=new _k({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.maxExtent_||t.extent});if(this.tileLoadFunction_){var i=new hk({projection:t.projection,url:"{z},{x},{y}",tileLoadFunction:function(t){return e.loadVectorTile(t,r)},tileGrid:new Rd({extent:t.sourceExtent,origin:fe(t.sourceExtent),resolutions:t.resolutions})});n.setSource(i)}else{var o=new hk({projection:t.projection,url:"{z},{x},{y}",format:r,tileLoadFunction:function(r){return e.loadVectorTileWithProvider(r,t)},tileGrid:new Rd({extent:t.sourceExtent,origin:fe(t.sourceExtent),resolutions:t.resolutions})});n.setSource(o)}return n}},{key:"loadVectorTile",value:function(t,e){var r=this;t.setState(rc.LOADING),t.setLoader(function(n,i,o){var a=t.getTileCoord();r.tileLoadFunction_(a[0],a[1],-a[2]-1).then(function(r){if(r){var i=Object(NR.inflate)(r),a=e.readFeatures(i,{extent:n,featureProjection:o});t.setFeatures(a),t.setState(rc.LOADED)}else t.setState(rc.ERROR)})})}},{key:"loadVectorTileWithProvider",value:function(t,e){t.setState(rc.LOADING),t.setLoader(function(r,n,i){var o=t.getTileCoord(),a=t.getFormat();e.tileProvider.getVectorTile([o[0],o[1],-o[2]-1],r).then(function(e){if(e){var n=a.readFeatures(e,{extent:r,featureProjection:i});t.setFeatures(n),t.setState(rc.LOADED)}else t.setState(rc.ERROR)})})}},{key:"fetchSource",value:function(){var t=this;return new Promise(function(e,r){if(t.tileProvider_)e(t.tileProvider_);else if(t.source_){e(new jR(t.source_))}else{if(t.url_)throw new Error("");r(new Error("No url or source was specified."))}})}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}},{key:"getFeatures",value:function(t,e){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=Cd(n.peekFirstKey())[0];n.forEach(function(t){if(t.tileCoord[0]===i&&t.getState()===rc.LOADED)for(var e=t.getSourceTiles(),n=0,o=e.length;n<o;n+=1){var a=e[n].getFeatures();a&&(r=r.concat(a))}})}return r}},{key:"checkAllTilesLoaded_",value:function(t){var e=this.map.getProjection().code,r=t.tile.getTileCoord(),n=yr(e);this.ol3Layer.getSource().getTileCacheForProjection(n).getValues().some(function(t){var e=t.getTileCoord(),n=t.getState();return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]||n!==rc.LOADING})&&!this.loaded_&&(this.loaded_=!0,this.facadeLayer_.fire(Qf))}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new _d(e)}return t}}])&&AA(r.prototype,n),i&&AA(r,i),e}();function BA(t){return(BA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zA=/MBTiles\*.*/,UA=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map(function(t){return t.trim()}).map(function(t){return Number.parseFloat(t)})}};if(w(e)&&t.test(e)){var l=e.split("*")[o];v(l)||(s=u[n](l))}else b(e)?s=e[r]:wa("El parámetro no es de un tipo soportado: ".concat(BA(e)));return w(s)&&(s=s.trim()),!0===a&&(s=E(s)),s}},qA=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r=bp,n=UA({parameter:t,type:"string",attr:"name"}),i=UA({parameter:t,type:"string",attr:"url"}),o=UA({parameter:t,type:"string",attr:"legend"});return(zA.test(t)||b(t))&&(e={type:r,name:n(zA,3),url:i(zA,2),legend:o(zA,1)}),e}),m(t)||(e=e[0]),e};function VA(t){return(VA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function XA(t,e){return!e||"object"!==VA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ZA(t,e,r){return(ZA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HA(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function HA(t){return(HA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KA(t,e){return(KA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $A=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){YA(t,e,r[e])})}return t}({},qA(r),{source:r.source,style:r.style,tileLoadFunction:r.tileLoadFunction}),a=new GA(o,n,i);return t=XA(this,HA(e).call(this,o,n,i,a)),d(GA)&&wa("La implementación usada no puede crear capas Vector"),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&KA(t,e)}(e,Gx),r=e,(n=[{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return v(t)&&(t=this.map_.userMaxExtent,v(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise(function(e){return e(t.getMaxExtent())})}},{key:"setStyle",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_OPTIONS_STYLE;ZA(HA(e.prototype),"setStyle",this).call(this,t,r,n)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!v(e)){var r=e[0];v(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map(function(t){return DE.olFeature2Facade(t)})}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}},{key:"type",get:function(){return bp},set:function(t){d(t)||v(t)||t===bp||wa("El tipo de capa debe ser '".concat(bp).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&WA(r.prototype,n),i&&WA(r,i),e}();$A.DEFAULT_OPTIONS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2},radius:5};var JA=$A;function QA(t){return(QA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eN(t,e){return!e||"object"!==QA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rN(t){return(rN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nN(t,e){return(nN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var iN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=eN(this,rN(e).call(this,n,i))).url=t.url,r.tileSize_="number"==typeof t.tileSize?t.tileSize:256,r.opacity_="number"==typeof n.opacity?n.opacity:1,r.zIndex_=mv.Z_INDEX[wp],r.visibility=!1!==t.visibility||t.visibility,r.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,r.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,r.tileGridMaxZoom=t.tileGridMaxZoom,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nN(t,e)}(e,Gd),r=e,(n=[{key:"setVisible",value:function(t){if(this.visibility=t,!0===t&&!0!==this.transparent){v(this.ol3Layer)||this.ol3Layer.setVisible(t);var e=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),v(e)||this.map.setZoom(e)}else v(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){this.map=t;var e=yr("EPSG:3857").getExtent();this.ol3Layer=new _d({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:e}),this.map.getMapImpl().addLayer(this.ol3Layer);var r=new OR({projection:this.map.getProjection().code,url:this.url,tileSize:this.getTileSize()});this.ol3Layer.setSource(r),void 0!==this.tileGridMaxZoom&&this.tileGridMaxZoom>0?this.ol3Layer.getSource().tileGrid.maxZoom=this.tileGridMaxZoom:(this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom))}},{key:"setTileUrlFunction",value:function(t){this.ol3Layer.getSource().setTileUrlFunction(t)}},{key:"getTileUrlFunction",value:function(){this.ol3Layer.getSource().getTileUrlFunction()}},{key:"getTileSize",value:function(){return this.tileSize_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}}])&&tN(r.prototype,n),i&&tN(r,i),e}();function oN(t){return(oN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sN(t,e){return!e||"object"!==oN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uN(t){return(uN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lN(t,e){return(lN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(iN)&&wa(Sa("exception").xyz_method);var o=Kp(t,wp),a=new iN(t,n,i);return(r=sN(this,uN(e).call(this,o,a))).url=o.url,r.name=o.name,r.legend=o.legend,r.minZoom=o.minZoom,r.maxZoom=o.maxZoom,r.tileGridMaxZoom=o.tileGridMaxZoom,r.options=n,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lN(t,e)}(e,nd),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.options===t.options),r}},{key:"type",get:function(){return wp},set:function(t){d(t)||v(t)||t===wp||wa("El tipo de capa debe ser '".concat(wp).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&aN(r.prototype,n),i&&aN(r,i),e}();function hN(t){return(hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pN(t,e){return!e||"object"!==hN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dN(t){return(dN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yN(t,e){return(yN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pN(this,dN(e).call(this,t,n,i))).zIndex_=mv.Z_INDEX[xp],r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yN(t,e)}(e,iN),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.name===t.name),r}}])&&fN(r.prototype,n),i&&fN(r,i),e}();function mN(t){return(mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _N(t,e){return!e||"object"!==mN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bN(t){return(bN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wN(t,e){return(wN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(gN)&&wa(Sa("exception").tms_method);var o=Kp(t,xp),a=new gN(t,n,i);return(r=_N(this,bN(e).call(this,o,a))).url=o.url,r.name=o.name,r.legend=o.legend,r.minZoom=o.minZoom,r.maxZoom=o.maxZoom,r.options=n,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wN(t,e)}(e,nd),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.options===t.options),r}},{key:"type",get:function(){return xp},set:function(t){d(t)||v(t)||t===xp||wa("El tipo de capa debe ser '".concat(xp).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&vN(r.prototype,n),i&&vN(r,i),e}(),EN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SN='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',ON=function(t){function e(e){var r,n=e||{};r=void 0!==n.attributions?n.attributions:[SN];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return EN(e,t),e}(OR);function TN(t){return(TN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IN(t,e){return!e||"object"!==TN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function PN(t){return(PN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CN(t,e){return(CN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var LN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=IN(this,PN(e).call(this,n,i))).resolutions_=null,r.facadeLayer_=null,r.hasAttributtion=!1,r.haveOSMorMapboxLayer=!1,!1===n.visibility&&(r.visibility=!1),r.zIndex_=mv.Z_INDEX[vp],r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CN(t,e)}(e,Gd),r=e,(n=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().forEach(function(t){!t.equals(e)&&t.isVisible()&&t.setVisible(!1)}),v(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),v(r)||this.map.setBbox(r)}else v(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){var e=this;this.map=t,this.fire("added:map"),this.ol3Layer=new _d(G({},this.vendorOptions_,!0)),this.updateSource_(),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.getImpl().getMapImpl().getControls().getArray().forEach(function(t){t instanceof ch&&(e.hasAttributtion=!0)},this),this.hasAttributtion||(this.map.getMapImpl().addControl(new ch({className:"ol-attribution ol-unselectable ol-control ol-collapsed m-attribution",collapsible:!0})),this.hasAttributtion=!1),this.map.getMapImpl().updateSize();var r=this.map.getMapImpl().getSize();this.map.getProjection().units;this.resolutions_=k(this.facadeLayer_.getMaxExtent(),r,16),this.isVisible()&&!this.inRange()&&this.setVisible(!1),null!==this.zIndex_&&this.setZIndex(this.zIndex_),null!==this.resolutions_&&this.setResolutions(this.resolutions_);var n=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",n),this.map.on("change:proj",function(){return e.updateSource_()})}},{key:"setResolutions",value:function(t){this.resolutions_=t,this.updateSource_(t)}},{key:"updateSource_",value:function(t){if(v(t)&&!v(this.map)){this.map.getMapImpl().updateSize();var e=this.map.getMapImpl().getSize();this.map.getProjection().units;this.resolutions_=k(this.facadeLayer_.getMaxExtent(),e,16)}if(!v(this.ol3Layer)&&v(this.vendorOptions_.source)){var r=this.facadeLayer_.getMaxExtent(),n=new ON({});this.ol3Layer.setSource(n),this.ol3Layer.setExtent(r)}}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this,e=this.map.getMapImpl();v(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map.getLayers().forEach(function(e){e instanceof jN&&(t.haveOSMorMapboxLayer=!0)}),this.haveOSMorMapboxLayer||this.map.getImpl().getMapImpl().getControls().getArray().forEach(function(e){e instanceof ch&&t.map.getImpl().getMapImpl().removeControl(e)}),this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name),r}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new _d(e)}return t}}])&&MN(r.prototype,n),i&&MN(r,i),e}();function kN(t){return(kN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AN(t,e){return!e||"object"!==kN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function NN(t){return(NN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FN(t,e){return(FN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t;d(LN)&&wa(Sa("exception").osm_method),v(o)&&(o="OSM");var a=new LN(o,n,i),s=Kp(o,vp);return v(s.name)&&(s.name="osm"),(r=AN(this,NN(e).call(this,s,a))).name=s.name,r.legend=s.legend,v(s.legend)&&(r.legend="OpenStreetMap"),r.transparent=s.transparent,r.options=n,r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FN(t,e)}(e,nd),r=e,(n=[{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=this.url===t.url,r=r&&this.name===t.name,r=r&&this.options===t.options),r}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){v(t)?this.getImpl().transparent=!1:this.getImpl().transparent=t}},{key:"type",get:function(){return vp},set:function(t){d(t)||v(t)||t===vp||wa("El tipo de capa debe ser '".concat(vp).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&RN(r.prototype,n),i&&RN(r,i),e}();function DN(t){return(DN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function BN(t,e,r){return(BN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zN(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function zN(t){return(zN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UN(t,e){return(UN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var VN=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,o,a=new e_(t);i=this,o=zN(e).call(this),r=!o||"object"!==DN(o)&&"function"!=typeof o?qN(i):o;var s=new mv(a.container,qN(qN(r)),n);if(r.setImpl(s),v(t)&&wa(Sa("exception").no_param),d(mv)&&wa(Sa("exception").constructor_impl),r._panels=[],r._plugins=[],r._areasContainer=null,r.popup_=null,r._defaultProj=!0,r.panel={LEFT:null,RIGHT:"null"},r._userZoom=null,r.userCenter_=null,r._finishedInitCenter=!0,r._finishedMaxExtent=!0,r._finishedMapImpl=!1,r._finishedMap=!1,r.centerFeature_=null,r.drawLayer_=null,r.userMaxExtent=null,a.container.classList.add("m-mapea-container"),s.on(tp,function(){r._finishedMapImpl=!0,r._checkCompleted()}),r.createMainPanels_(),r.featuresHandler_=new ZE,r.featuresHandler_.addTo(qN(qN(r))),r.featuresHandler_.activate(),r.drawLayer_=new Gx({name:"__draw__"},{displayInLayerSwitcher:!1}),r.drawLayer_.setStyle(new Dw(e.DRAWLAYER_STYLE)),r.drawLayer_.setZIndex(mv.Z_INDEX[gp]+999),r.addLayers(r.drawLayer_),v(a.projection)?r.setProjection(M.config.DEFAULT_PROJ,!0):r.setProjection(a.projection),v(a.bbox)||r.setBbox(a.bbox),v(a.resolutions)||r.setResolutions(a.resolutions),!v(a.maxExtent)){var u=v(a.zoom)&&v(a.bbox);r.setMaxExtent(a.maxExtent,u)}return v(a.layers)||r.addLayers(a.layers),v(a.wms)||r.addWMS(a.wms),v(a.wmts)||r.addWMTS(a.wmts),v(a.kml)||r.addKML(a.kml),v(a.controls)||r.addControls(a.controls),v(a.layers)&&!m(a.layers)&&r.addWMTS(M.config.wmts.base),v(a.center)||r.setCenter(a.center),v(a.zoom)?v(a.bbox)&&r.setZoom(0):r.setZoom(a.zoom),v(a.minZoom)||r.setMinZoom(a.minZoom),v(a.maxZoom)||r.setMaxZoom(a.maxZoom),v(a.label)||r.addLabel(a.label),v(a.ticket)||r.setTicket(a.ticket),v(a.bbox)&&v(a.zoom)&&v(a.center)&&r.zoomToMaxExtent(!0),v(a.center)&&v(a.bbox)&&(r._finishedInitCenter=!1,r.getInitCenter_().then(function(t){v(r.userCenter_)&&r.setCenter(t),r._finishedInitCenter=!0,r._checkCompleted()})),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UN(t,e)}(e,ba),r=e,i=[{key:"LAYER_SORT",value:function(t,e){return v(t)||v(e)?0:t.getZIndex()-e.getZIndex()}}],(n=[{key:"getLayers",value:function(t){var r=t;d(mv.prototype.getLayers)&&wa(Sa("exception").getlayers_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(Kp)),this.getImpl().getLayers(n).sort(e.LAYER_SORT)}},{key:"getRootLayers",value:function(t){return this.getLayers(t).filter(function(t){return v(t.group)})}},{key:"getBaseLayers",value:function(){return d(mv.prototype.getBaseLayers)&&wa(Sa("exception").getbaselayers_method),this.getImpl().getBaseLayers().sort(e.LAYER_SORT)}},{key:"getFeatureHandler",value:function(){return this.featuresHandler_}},{key:"addLayers",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addLayers)&&wa(Sa("exception").addlayers_method),m(r)||(r=[r]);var n=r.map(function(t){var r;if(t instanceof nd)r=t;else{var n=Kp(t);if(v(n.type))aF(Sa("dialog").invalid_type_layer);else switch(n.type){case"WFS":r=new ik(t,{style:n.style});break;case"WMS":r=new Bm(t);break;case"GeoJSON":r=new ER(n,{style:n.style});break;case"KML":r=new hL(t);break;case"Vector":r=new Gx(t);break;case"WMTS":r=new CI(t);break;case"MVT":r=new Vk(t);break;case"MBTiles":r=new eA(n);break;case"XYZ":r=new cN(n);break;case"TMS":r=new xN(n);break;case"OSM":r=new jN(t);break;default:aF(Sa("dialog").invalid_type_layer)}}return r instanceof Gx&&!(r instanceof ik)&&e.featuresHandler_.addLayer(r),r.setMap(e),r});this.getImpl().addLayers(n),this.fire("added:layer",[n])}return this}},{key:"removeLayers",value:function(t){var e=this;if(!v(t)){d(mv.prototype.removeLayers)&&wa(Sa("exception").removelayers_method);var r=this.getLayers(t);r.forEach(function(t){t instanceof Gx&&e.featuresHandler_.removeLayer(t)}),this.getImpl().removeLayers(r)}return this}},{key:"getKML",value:function(t){var r=t;d(mv.prototype.getKML)&&wa(Sa("exception").getkml_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(function(t){return Kp(t,dp)})),this.getImpl().getKML(n).sort(e.LAYER_SORT)}},{key:"addKML",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addKML)&&wa(Sa("exception").addkml_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){var r;b(t)&&t instanceof hL?r=t:t instanceof nd||(r=new hL(t,t.options)),!0===r.extract&&e.featuresHandler_.addLayer(r),n.push(r)}),this.getImpl().addKML(n),this.fire("added:layer",[n]),this.fire("added:kml",[n])}return this}},{key:"removeKML",value:function(t){var e=this;if(!v(t)){d(mv.prototype.removeKML)&&wa(Sa("exception").removekml_method);var r=this.getKML(t);r.length>0&&(r.forEach(function(t){e.featuresHandler_.removeLayer(t)}),this.getImpl().removeKML(r))}return this}},{key:"getWMS",value:function(t){var r=t;d(mv.prototype.getWMS)&&wa(Sa("exception").getwms_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(function(t){return Kp(t,yp)})),this.getImpl().getWMS(n).sort(e.LAYER_SORT)}},{key:"addWMS",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addWMS)&&wa(Sa("exception").addwms_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){var r=t;t instanceof Bm||(r=new Bm(t,t.options)),r.setMap(e),n.push(r)}),this.getImpl().addWMS(n),this.fire("added:layer",[n]),this.fire("added:wms",[n])}return this}},{key:"removeWMS",value:function(t){if(!v(t)){d(mv.prototype.removeWMS)&&wa(Sa("exception").removewms_method);var e=this.getWMS(t);e.length>0&&this.getImpl().removeWMS(e)}return this}},{key:"getWFS",value:function(t){var r=t;d(mv.prototype.getWFS)&&wa(Sa("exception").getwfs_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(function(t){return Kp(t,gp)})),this.getImpl().getWFS(n).sort(e.LAYER_SORT)}},{key:"getGeoJSON",value:function(t){var r=t;return d(mv.prototype.getGeoJSON)&&wa(Sa("exception").getgeojson_method),g(r)?r=[]:m(r)||(r=[r]),this.getImpl().getGeoJSON(r).sort(e.LAYER_SORT)}},{key:"addWFS",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addWFS)&&wa(Sa("exception").addwfs_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){var r;if(b(t)&&t instanceof ik)r=t;else if(!(t instanceof nd))try{r=new ik(t,t.options)}catch(t){throw aF(t.toString()),t}e.featuresHandler_.addLayer(r),n.push(r)}),this.getImpl().addWFS(n),this.fire("added:layer",[n]),this.fire("added:wfs",[n])}return this}},{key:"removeWFS",value:function(t){var e=this;if(!v(t)){d(mv.prototype.removeWFS)&&wa(Sa("exception").removewfs_method);var r=this.getWFS(t);r.length>0&&(r.forEach(function(t){e.featuresHandler_.removeLayer(t)}),this.getImpl().removeWFS(r))}return this}},{key:"getWMTS",value:function(t){var r=t;d(mv.prototype.getWMTS)&&wa(Sa("exception").getwmts_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(function(t){return Kp(t,mp)})),this.getImpl().getWMTS(n).sort(e.LAYER_SORT)}},{key:"addWMTS",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addWMTS)&&wa(Sa("exception").addwmts_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){if(b(t)&&t instanceof CI)t.setMap(e),n.push(t);else if(!(t instanceof nd)){var r=new CI(t,t.options);r.setMap(e),n.push(r)}}),this.getImpl().addWMTS(n),this.fire("added:layer",[n]),this.fire("added:wmts",[n])}return this}},{key:"removeWMTS",value:function(t){if(!v(t)){d(mv.prototype.removeWMTS)&&wa(Sa("exception").removewmts_method);var e=this.getWMTS(t);e.length>0&&this.getImpl().removeWMTS(e)}return this}},{key:"getMVT",value:function(t){var r=t;d(mv.prototype.getMVT)&&wa("La implementación usada no posee el método getWFS"),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(function(t){return Kp(t,"MVT")})),this.getImpl().getMVT(n).sort(e.LAYER_SORT)}},{key:"removeMVT",value:function(t){var e=this;if(!v(t)){d(mv.prototype.removeMVT)&&wa("La implementación usada no posee el método removeWFS");var r=this.getMVT(t);r.length>0&&(r.forEach(function(t){e.featuresHandler_.removeLayer(t)}),this.getImpl().removeMVT(r))}return this}},{key:"addMVT",value:function(t){var e=t;if(!v(e)){d(mv.prototype.addMVT)&&wa("La implementación usada no posee el método addWFS"),m(e)||(e=[e]);var r=[];e.forEach(function(t){var e;if(b(t)&&t instanceof Vk)e=t;else if(!(t instanceof nd))try{e=new Vk(t,t.options)}catch(t){throw aF(t.toString()),t}r.push(e)}),this.getImpl().addMVT(r),this.fire("added:layer",[r]),this.fire("added:vectortile",[r])}return this}},{key:"getMBTiles",value:function(t){var r=t;d(mv.prototype.getMBTiles)&&wa(Sa("exception").getmbtiles_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(Kp)),this.getImpl().getMBTiles(n).sort(e.LAYER_SORT)}},{key:"addMBTiles",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addMBTiles)&&wa(Sa("exception").addmbtiles_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){if(b(t)&&t instanceof eA)t.setMap(e),n.push(t);else if(!(t instanceof nd)){var r=new eA(t,t.options);r.setMap(e),n.push(r)}}),this.getImpl().addMBTiles(n),this.fire("added:layer",[n]),this.fire("added:mbtiles",[n])}return this}},{key:"removeMBTiles",value:function(t){if(!v(t)){d(mv.prototype.removeMBTiles)&&wa(Sa("exception").removembtiles_method);var e=this.getMBTiles(t);e.length>0&&this.getImpl().removeMBTiles(e)}return this}},{key:"getMBTilesVector",value:function(t){var r=t;d(mv.prototype.getMBTilesVector)&&wa(Sa("exception").getmbtiles_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(Kp)),this.getImpl().getMBTilesVector(n).sort(e.LAYER_SORT)}},{key:"addMBTilesVector",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addMBTilesVector)&&wa(Sa("exception").addmbtiles_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){b(t)&&t instanceof JA&&(t.setMap(e),n.push(t))}),this.getImpl().addMBTilesVector(n),this.fire("added:layer",[n]),this.fire("added:mbtilesvector",[n])}return this}},{key:"removeMBTilesVector",value:function(t){if(!v(t)){d(mv.prototype.removeMBTilesVector)&&wa(Sa("exception").removembtiles_method);var e=this.getMBTilesVector(t);e.length>0&&this.getImpl().removeMBTilesVector(e)}return this}},{key:"getXYZs",value:function(t){var r=t;d(mv.prototype.getXYZs)&&wa(Sa("exception").getxyzs_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(Kp)),this.getImpl().getXYZs(n).sort(e.LAYER_SORT)}},{key:"addXYZ",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addXYZ)&&wa(Sa("exception").addxyz_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){if(b(t)&&t instanceof cN)t.setMap(e),n.push(t);else if(!(t instanceof nd)){var r=new cN(t,t.options);r.setMap(e),n.push(r)}}),this.getImpl().addXYZ(n),this.fire("added:layer",[n]),this.fire("added:xyz",[n])}return this}},{key:"removeXYZ",value:function(t){if(!v(t)){d(mv.prototype.removeXYZ)&&wa(Sa("exception").removexyz_method);var e=this.getXYZs(t);e.length>0&&this.getImpl().removeXYZ(e)}return this}},{key:"getTMS",value:function(t){var r=t;d(mv.prototype.getTMS)&&wa(Sa("exception").gettms_method),g(r)?r=[]:m(r)||(r=[r]);var n=[];return r.length>0&&(n=r.map(Kp)),this.getImpl().getTMS(n).sort(e.LAYER_SORT)}},{key:"addTMS",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addTMS)&&wa(Sa("exception").addtms_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){if(b(t)&&t instanceof xN)t.setMap(e),n.push(t);else if(!(t instanceof nd)){var r=new xN(t,t.options);r.setMap(e),n.push(r)}}),this.getImpl().addTMS(n),this.fire("added:layer",[n]),this.fire("added:tms",[n])}return this}},{key:"removeTMS",value:function(t){if(!v(t)){d(mv.prototype.removeTMS)&&wa(Sa("exception").removetms_method);var e=this.getTMS(t);e.length>0&&this.getImpl().removeTMS(e)}return this}},{key:"getControls",value:function(t){var e=t;return d(mv.prototype.getControls)&&wa(Sa("exception").getcontrols_method),g(e)?e=[]:m(e)||(e=[e]),this.getImpl().getControls(e)}},{key:"addControls",value:function(t){var e=this,r=t;if(!v(r)){d(mv.prototype.addControls)&&wa(Sa("exception").addcontrols_method),m(r)||(r=[r]);var n=[];r.forEach(function(t){var r,i,o=t;if(w(o))switch(o=E(o)){case OT.NAME:r=new OT,i=e.getPanels("map-info")[0],v(i)&&(i=new rR("map-info",{collapsible:!1,className:"m-map-info",position:Kk})).on("added:map",function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")}),i.addClassName("m-with-scale");break;case"".concat(OT.NAME,"*true"):r=new OT({exactScale:!0}),i=e.getPanels("map-info")[0],v(i)&&(i=new rR("map-info",{collapsible:!1,className:"m-map-info",position:Kk})).on("added:map",function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")}),i.addClassName("m-with-scale");break;case yM.NAME:r=new yM,(i=new rR(yM.NAME,{collapsible:!1,className:"m-scaleline",position:Hk,tooltip:"Línea de escala"})).on("added:map",function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")});break;case pp.NAME:r=new pp,i=new rR(pp.NAME,{collapsible:!1,className:"m-panzoombar",position:Xk,tooltip:"Nivel de zoom"});break;case CM.NAME:r=new CM,i=new rR(CM.NAME,{collapsible:!1,className:"m-panzoom",position:Xk});break;case lT.NAME:r=new lT,i=new rR(lT.NAME,{collapsible:!1,className:"m-location",position:Kk});break;case UO.NAME:r=new UO(!0);break;case UT.NAME:r=new UT,i=new rR(UT.name,{collapsible:!1,className:"m-rotate",position:Zk});break;case DI.NAME:r=new DI(e),i=new rR(DI.NAME,{collapsible:!1,position:Zk,className:"m-plugin-baselayer"});break;default:if(/backgroundlayers\*([0-9])+\*(true|false)/.test(o)){var a=o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[1],s="true"===o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[2];r=new DI(e,Number.parseInt(a,10),s),i=new rR(DI.NAME,{collapsible:!1,position:Zk,className:"m-plugin-baselayer"})}else{var u=j([M.config.MAPEA_URL,"/api/actions/controls"]);aF("El control ".concat(o," no está definido. Consulte los controles disponibles <a href='").concat(u,'\' target="_blank">aquí</a>'))}}else o instanceof ap?r=o:wa('El control "'.concat(o).concat('" no es un control válido.'));v(i)||i.hasControl(r)?(r.addTo(e),n.push(r)):(i.addControls(r),e.addPanels(i))}),this.getImpl().addControls(n)}return this}},{key:"removeControls",value:function(t){v(t)&&wa(Sa("exception").remove_control),d(mv.prototype.removeControls)&&wa(Sa("exception").removecontrol_method);var e=this.getControls(t);return(e=[].concat(e)).length>0&&(e.forEach(function(t){v(t.getPanel())||t.getPanel().removeControls(t)}),this.getImpl().removeControls(e)),this}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return v(t)&&(t=this.getProjection().getExtent()),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise(function(e){var r=t.userMaxExtent;if(v(r)){var n=t.getLayers().filter(function(t){return"__draw__"!==t.name}).map(function(t){return t.calculateMaxExtent()});Promise.all(n).then(function(n){r=tt(n),v(r)&&(r=t.getProjection().getExtent()),v(t.userMaxExtent)||(r=t.userMaxExtent),e(r)})}else e(r)})}},{key:"setMaxExtent",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v(t)&&this.resetMaxExtent(),d(mv.prototype.setMaxExtent)&&wa(Sa("exception").setmaxextent_method);try{var r=kp(t);!m(r)&&b(r)&&(r=[r.x.min,r.y.min,r.x.max,r.y.max]),this.userMaxExtent=r,this.getImpl().setMaxExtent(r,e)}catch(t){throw aF(t.toString()),t}return this}},{key:"resetMaxExtent",value:function(){var t=this;return this.userMaxExtent=null,this.calculateMaxExtent().then(function(e){var r=kp(e);t.getImpl().setMaxExtent(r,!0)}),this}},{key:"getBbox",value:function(){return d(mv.prototype.getBbox)&&wa(Sa("exception").getbbox_method),this.getImpl().getBbox()}},{key:"setBbox",value:function(t,e){v(t)&&wa(Sa("exception").no_bbox),d(mv.prototype.setBbox)&&wa(Sa("exception").setbbox_method);try{var r=kp(t);this.getImpl().setBbox(r,e)}catch(t){throw aF(Sa("exception").incorrect_format_bbox),t}return this}},{key:"getZoom",value:function(){return d(mv.prototype.getZoom)&&wa(Sa("exception").getzoom_method),this.getImpl().getZoom()}},{key:"getMinZoom",value:function(){return d(mv.prototype.getMinZoom)&&wa(Sa("exception").getzoom_method),this.getImpl().getMinZoom()}},{key:"getMaxZoom",value:function(){return d(mv.prototype.getMaxZoom)&&wa(Sa("exception").getzoom_method),this.getImpl().getMaxZoom()}},{key:"setZoom",value:function(t){v(t)&&wa(Sa("exception").no_zoom),d(mv.prototype.setZoom)&&wa(Sa("exception").setzoom_method);try{var e=Np(t);this._userZoom=e,this.getImpl().setZoom(e)}catch(t){throw aF(t.toString()),t}return this}},{key:"setMinZoom",value:function(t){v(t)&&wa(Sa("exception").no_zoom),d(mv.prototype.setMinZoom)&&wa(Sa("exception").setzoom_method);var e=Fp(t);return this.minZoom=e,this.getImpl().setMinZoom(e),this}},{key:"setMaxZoom",value:function(t){v(t)&&wa(Sa("exception").no_zoom),d(mv.prototype.setMaxZoom)&&wa(Sa("exception").setzoom_method);var e=jp(t);return this.userMaxZoom_=e,this.getImpl().setMaxZoom(e),this}},{key:"getCenter",value:function(){return d(mv.prototype.getCenter)&&wa(Sa("exception").getcenter_method),this.getImpl().getCenter()}},{key:"setCenter",value:function(t){var e=this;v(t)&&wa(Sa("exception").no_center),d(mv.prototype.setCenter)&&wa(Sa("exception").setcenter_method);var r=Lp(t);return this.getImpl().setCenter(r),this.userCenter_=r,!0===r.draw&&(this.drawLayer_.clear(),this.centerFeature_=new pF("__mapeacenter__",{type:"Feature",geometry:{type:"Point",coordinates:[r.x,r.y]},properties:{vendor:{mapea:{click:function(t){var r=e.getLabel();v(r)||r.show(e)}}}}}),this.drawFeatures([this.centerFeature_])),this}},{key:"getFeatureCenter",value:function(){return this.centerFeature_}},{key:"removeCenter",value:function(){this.removeFeatures(this.centerFeature_),this.centerFeature_=null,this.zoomToMaxExtent()}},{key:"getResolutions",value:function(){return d(mv.prototype.getResolutions)&&wa(Sa("exception").getresolutions_method),this.getImpl().getResolutions()}},{key:"setResolutions",value:function(t){v(t)&&wa(Sa("exception").no_resolutions),d(mv.prototype.setResolutions)&&wa(Sa("exception").setresolutions_method);var e=Ap(t);return this.getImpl().setResolutions(e),this}},{key:"getScale",value:function(){return d(mv.prototype.getScale)&&wa(Sa("exception").getscale_method),this.getImpl().getScale()}},{key:"getExactScale",value:function(){return d(mv.prototype.getExactScale)&&wa("La implementación usada no posee el método getScale"),this.getImpl().getExactScale()}},{key:"getProjection",value:function(){return d(mv.prototype.getProjection)&&wa(Sa("exception").getprojection_method),this.getImpl().getProjection()}},{key:"setProjection",value:function(t,e){var r=t;v(r)&&wa(Sa("exception").no_projection),d(mv.prototype.setProjection)&&wa(Sa("exception").setprojection_method);try{var n=this.getProjection();r=Rp(r),this.getImpl().setProjection(r),this._defaultProj=this._defaultProj&&!0===e,this.fire("change:proj",[n,r])}catch(t){aF(t.toString()),String(t).indexOf("El formato del parámetro projection no es correcto")>=0&&this.setProjection(M.config.DEFAULT_PROJ,!0)}return this}},{key:"getPlugins",value:function(t){var e=this,r=t;g(r)?r=[]:m(r)||(r=[r]);var n=[];return 0===r.length?n=this._plugins:r.forEach(function(t){n=n.concat(e._plugins.filter(function(e){return t===e.name}))}),n}},{key:"addPlugin",value:function(t){return v(t)&&wa(Sa("exception").no_plugins),d(t.addTo)&&wa(Sa("exception").no_add_plugin_to_map),this._plugins.push(t),t.addTo(this),this}},{key:"removePlugins",value:function(t){var e=this,r=t;return v(r)&&wa(Sa("exception").no_plugin_to_remove),m(r)||(r=[r]),(r=[].concat(r)).length>0&&r.forEach(function(t){t.destroy(),e._plugins=e._plugins.filter(function(e){return t.name!==e.name})}),this}},{key:"getEnvolvedExtent",value:function(){var t=this;return new Promise(function(e){var r=t.getBaseLayers().find(function(t){return t.isVisible()});if(v(r)){var n=t.getLayers().filter(function(t){return"__draw__"!==t.name});Promise.all(n.map(function(t){return t.calculateMaxExtent()})).then(function(r){var n=v(r)?[t.getProjection().getExtent()]:r,i=tt(n);e(i)})}else r.getMaxExtent(e)})}},{key:"zoomToMaxExtent",value:function(t){var e=this;return this.calculateMaxExtent().then(function(r){(!0!==t||v(e._userZoom))&&e.setBbox(r),e._finishedMaxExtent=!0,e._checkCompleted()}),this}},{key:"setTicket",value:function(t){return v(t)||(-1===M.config.PROXY_POST_URL.indexOf("ticket=")&&M.config("PROXY_POST_URL",O(M.config.PROXY_POST_URL,{ticket:t})),-1===M.config.PROXY_URL.indexOf("ticket=")&&M.config("PROXY_URL",O(M.config.PROXY_URL,{ticket:t}))),this}},{key:"getInitCenter_",value:function(){var t=this;return new Promise(function(e,r){t.calculateMaxExtent().then(function(t){var r;r=m(t)?{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}:{x:(t.x.max+t.x.min)/2,y:(t.y.max+t.y.min)/2},e(r)})})}},{key:"destroy",value:function(){return d(mv.prototype.destroy)&&wa(Sa("exception").destroy_method),this.getImpl().destroy(),this}},{key:"addLabel",value:function(t,e){var r=this,n=void 0===t.panMapIfOutOfView||t.panMapIfOutOfView;v(t)&&wa(Sa("exception").no_projection),d(mv.prototype.addLabel)&&wa(Sa("exception").addlabel_method);var i=null,o=null;if(b(t)?(i=B(t.text),o=t.coord):(i=B(t),o=e),o=v(o)?this.getCenter():Lp(o),v(o))this.getInitCenter_().then(function(t){var e=new Qv(i,t,n);r.getImpl().addLabel(e)});else{var a=new Qv(i,o,n);this.getImpl().addLabel(a)}return this}},{key:"getLabel",value:function(){return this.getImpl().getLabel()}},{key:"removeLabel",value:function(){return this.getImpl().removeLabel()}},{key:"drawPoints",value:function(t){var e=t;v(e)&&wa(Sa("exception").no_point),m(e)||(e=[e]);var r=e.map(function(t){var e={type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},properties:{}};return _(t.click)&&(e.properties.vendor={mapea:{click:t.click}}),new pF(null,e)});this.drawLayer_.addFeatures(r)}},{key:"drawFeatures",value:function(t){return this.drawLayer_.addFeatures(t),this}},{key:"removeFeatures",value:function(t){return this.drawLayer_.removeFeatures(t),this}},{key:"addPanels",value:function(t){var e=this,r=t;return v(r)||(m(r)||(r=[r]),r.forEach(function(t){var r=e._panels.some(function(e){return e.equals(t)});if(t instanceof rR&&!r){e._panels.push(t);var n="div.m-area".concat(t.position),i=e._areasContainer.querySelector(n);t.addTo(e,i)}})),this}},{key:"removePanel",value:function(t){return t.getControls().length>0&&wa(Sa("exception").remove_control_from_panel),t instanceof rR&&(t.destroy(),this._panels=this._panels.filter(function(e){return!e.equals(t)})),this}},{key:"getPanels",value:function(t){var e=this,r=t,n=[];return v(r)?n=this._panels:(m(r)||(r=[r]),r.forEach(function(t){e._panels.filter(function(e){return e.name===t}).forEach(function(t){v(t)||n.push(t)})})),n}},{key:"createMainPanels_",value:function(){this._areasContainer=document.createElement("div"),this._areasContainer.classList.add("m-areas");var t=document.createElement("div");t.classList.add("m-area"),t.classList.add("m-top"),t.classList.add("m-left");var e=document.createElement("div");e.classList.add("m-area"),e.classList.add("m-top"),e.classList.add("m-right");var r=document.createElement("div");r.classList.add("m-area"),r.classList.add("m-bottom"),r.classList.add("m-left");var n=document.createElement("div");n.classList.add("m-area"),n.classList.add("m-bottom"),n.classList.add("m-right"),this._areasContainer.appendChild(t),this._areasContainer.appendChild(e),this._areasContainer.appendChild(r),this._areasContainer.appendChild(n),this.getContainer().appendChild(this._areasContainer)}},{key:"getContainer",value:function(){return d(mv.prototype.getContainer)&&wa(Sa("exception").getcontainer_method),this.getImpl().getContainer()}},{key:"getMapImpl",value:function(){return d(mv.prototype.getMapImpl)&&wa(Sa("exception").getmapimpl_method),this.getImpl().getMapImpl()}},{key:"getPopup",value:function(){return this.popup_}},{key:"removePopup",value:function(){return d(mv.prototype.removePopup)&&wa(Sa("exception").removepopup_method),v(this.popup_)||(this.getImpl().removePopup(this.popup_),this.popup_.destroy(),this.popup_=null),this}},{key:"addPopup",value:function(t,e){return v(t)&&wa(Sa("exception").no_popup),t instanceof Uv||wa(Sa("exception").invalid_popup),v(this.popup_)||this.removePopup(),this.popup_=t,this.popup_.addTo(this,e),this}},{key:"_checkCompleted",value:function(){this._finishedInitCenter&&this._finishedMaxExtent&&this._finishedMapImpl&&(this._finishedMap=!0,this.fire(tp))}},{key:"on",value:function(t,r,n){BN(zN(e.prototype),"on",this).call(this,t,r,n),t===tp&&!0===this._finishedMap&&this.fire(tp)}},{key:"refresh",value:function(){return!d(this.getImpl().refresh)&&_(this.getImpl().refresh)&&this.getImpl().refresh(),this.getLayers().forEach(function(t){return t.refresh()}),this}},{key:"isFinished",value:function(){return this._finishedMap}},{key:"defaultProj",get:function(){return this._defaultProj}},{key:"areasContainer",get:function(){return this._areasContainer}}])&&GN(r.prototype,n),i&&GN(r,i),e}();VN.DRAWLAYER_STYLE={fill:{color:"#009e00"},stroke:{color:"#fcfcfc",width:2},radius:7};var YN=VN,WN=(r(229),r(231),!0);function XN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ZN=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=null,this.xml=null,this.headers={},this.error=!1,this.code=0}var e,r,n;return e=t,(r=[{key:"parseXmlHttp",value:function(t){var e=this;this.text=t.responseText,this.xml=t.responseXML,this.code=t.status,this.error="OK"!==t.statusText;var r=t.getAllResponseHeaders();(r=r.split("\n")).forEach(function(t){var r=t,n=(r=r.trim()).replace(/^([^:]+):(.+)$/,"$1").trim(),i=r.replace(/^([^:]+):(.+)$/,"$2").trim();""!==n&&(e.headers[n]=i)})}},{key:"parseProxy",value:function(t){var e=this;if(this.code=t.code,this.error=t.error,200===this.code&&!0!==this.error){this.text=t.content.trim();try{var r=t.headers["Content-Type"];"undefined"!=typeof DOMParser&&/text\/html/i.test(r)?this.xml=(new DOMParser).parseFromString(this.text,"text/html"):/xml/i.test(r)&&(this.xml=(new DOMParser).parseFromString(this.text,"text/xml"))}catch(t){this.xml=null,this.error=!0}}Object.keys(t.headers).forEach(function(r){e.headers[r]=t.headers[r]})}}])&&XN(e.prototype,r),n&&XN(e,n),t}(),HN="GET",KN="POST",$N=function(t,e){var r=M.config.PROXY_URL;return e===KN&&(r=M.config.PROXY_POST_URL),r=O(r,{url:t})},JN=function(t,e,r){var n=t;v(e)||(n=O(n,e)),WN&&(n=$N(n,HN));var i=T("mapea_jsonphandler_");n=O(n,{callback:i});var o=new Promise(function(t,e){var r=t;new Promise(function(t){window[i]=t}).then(function(t){delete window[i],function(t){var e=document.getElementById(t);e.parentNode.removeChild(e)}(i);var e=new ZN;e.parseProxy(t),r(e)})});return function(t,e){var r=document.createElement("script");r.type="text/javascript",r.id=e,r.src=t,r.setAttribute("async",""),window.document.body.appendChild(r)}(n,i),o},QN=function(t,e,r,n){var i=t,o=e;return!1!==n&&!0===WN&&(i=$N(i,r)),b(o)&&(o=JSON.stringify(o)),new Promise(function(t,e){var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){if(4===n.readyState){var e=new ZN;e.parseXmlHttp(n),t(e)}},n.open(r,i,!0),n.send(o)})},tF=function(t,e,r){return!0===((v(r)||!1!==r.jsonp)&&!1!==WN)?JN(t,e):QN(t,e,HN,!1)};Aa.a.registerHelper("gt",function(t,e,r){return t>e?r.fn(this):r.inverse(this)}),Aa.a.registerHelper("lt",function(t,e,r){return t<e?r.fn(this):r.inverse(this)}),Aa.a.registerHelper("eq",function(t,e,r){return Object.equals(t,e)?r.fn(this):r.inverse(this)}),Aa.a.registerHelper("oneword",function(t,e){return/\s/g.test(Y(t))?e.inverse(this):e.fn(this)});var eF={},rF=function(t,e){var r,n={};d(e)||(n=X(n,e.vars),r=e.parseToHtml);var i=Aa.a.compile(t)(n);return!1!==r?A(i):i},nF=function(t,e){var r;return d(e)||(r=e.scope),new Promise(function(n,i){var o=eF[t];if(d(o)){var a=t;d(e)||!0!==e.jsonp||(a=function(t){var e=null;return v(t)||(e=(e=M.config.MAPEA_URL.concat(M.config.TEMPLATES_PATH)).concat(t)),e}(t));var s=v(e)&&!0===e.jsonp;tF(a,null,{jsonp:s}).then(function(e){o=Aa.a.compile(e.text),eF[t]=o,n.call(r,o)})}else n.call(r,o)})},iF=function(t,e,r){var n,i={message:t,title:e,severity:r},o=rF(ka.a,{vars:i});n=document.querySelectorAll("div.m-dialog"),Array.prototype.forEach.call(n,function(t){t.parentElement.removeChild(t)});var a=document.querySelector("div.m-mapea-container");o.querySelector("div.m-button > button").addEventListener("click",function(t){var e;(e=o).parentElement.removeChild(e)}),a.appendChild(o)},oF=function(t,e){var r=e;return v(r)&&(r=Sa("dialog").info),iF(t,r,"info")},aF=function(t,e){var r=e;return v(r)&&(r=Sa("dialog").error),iF(t,r,"error")},sF=function(t,e){var r=e;return v(r)&&(r=Sa("dialog").success),iF(t,r,"success")};function uF(t){return(uF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cF(t,e){return!e||"object"!==uF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hF(t){return(hF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fF(t,e){return(fF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pF=function(t){function e(t,r,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new ua(t,r,n);return(i=cF(this,hF(e).call(this,o))).style_=null,i.formatGeoJSON_=new Ca,i.setStyle(n),i}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fF(t,e)}(e,ba),r=e,(n=[{key:"setId",value:function(t){this.getImpl().setId(t)}},{key:"getId",value:function(){return this.getImpl().getId()}},{key:"getGeometry",value:function(){return this.getGeoJSON().geometry}},{key:"setGeometry",value:function(t){this.getImpl().setGeometry(t)}},{key:"getGeoJSON",value:function(){return this.formatGeoJSON_.write(this)[0]}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"setAttributes",value:function(t){"object"===uF(t)?this.getImpl().setAttributes(t):oF(Sa("feature").incorrect_attributes)}},{key:"getAttribute",value:function(t){var r;if(r=this.getImpl().getAttribute(t),v(r)){var n=t.split(".");n.length>1&&(r=n.reduce(function(t,r){var n;return v(t)||(n=t instanceof e?t.getAttribute(r):t[r]),n},this))}return r}},{key:"setAttribute",value:function(t,e){return this.getImpl().setAttribute(t,e)}},{key:"setStyle",value:function(t){!v(t)&&t instanceof Ew?(this.style_=t,this.style_.applyToFeature(this)):v(t)&&(this.style_=null,this.getImpl().clearStyle()),this.fire("change:style",[t,this])}},{key:"equals",value:function(t){return this.getId()===t.getId()}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null)}},{key:"getCentroid",value:function(){var t=this.getId(),e=this.getAttributes(),r=new Dw({stroke:{color:"#67af13",width:2},radius:8,fill:{color:"#67af13",opacity:.2}}),n=this.getImpl().getCentroid();return v(n)||(n.id("".concat(t," centroid}")),n.attributes(e),n.style=r),n}}])&&lF(r.prototype,n),i&&lF(r,i),e}();function dF(t){return(dF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yF(t,e){return!e||"object"!==dF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gF(t){return(gF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mF(t,e){return(mF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vF=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yF(this,gF(e).call(this,T("_mapea_cluster_")))).setAttributes(r),n.setAttribute("features",t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mF(t,e)}(e,pF),e}();function _F(t){return(_F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wF(t,e){return!e||"object"!==_F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xF(t){return(xF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EF(t,e){return(EF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var SF=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wF(this,xF(e).apply(this,arguments))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&EF(t,e)}(e,ba),r=e,(n=[{key:"addTo",value:function(t){var e=this;v(t)&&wa(Sa("exception").no_map);var r=this.getImpl();d(r.addTo)&&wa(Sa("exception").addto_method);var n=this.createView(t);n instanceof Promise?n.then(function(n){r.addTo(t,n),e.fire("added:map")}):(r.addTo(t,n),this.fire("added:map"))}},{key:"createView",value:function(t){}},{key:"getControls",value:function(){}}])&&bF(r.prototype,n),i&&bF(r,i),e}();function OF(t){return(OF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function MF(t,e){return!e||"object"!==OF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function IF(t){return(IF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PF(t,e){return(PF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var CF=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=MF(this,IF(e).call(this))).filterFunction_=t,r.cqlFilter_="",v(n.cqlFilter)||(r.cqlFilter_=n.cqlFilter),r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&PF(t,e)}(e,kx),r=e,(n=[{key:"setFunction",value:function(t){this.filterFunction_=t}},{key:"getFunctionFilter",value:function(){return this.filterFunction_}},{key:"execute",value:function(t){return t.filter(this.filterFunction_)}},{key:"toCQL",value:function(){return this.cqlFilter_}}])&&TF(r.prototype,n),i&&TF(r,i),e}();function LF(t){return(LF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kF(t,e){return!e||"object"!==LF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function RF(t){return(RF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AF(t,e){return(AF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var NF=function(t){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);return kF(this,RF(e).call(this,function(e,r){var n=null;return v(e)||(n=e.getGeometry()),t(n,r)},r))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AF(t,e)}(e,CF),e}(),FF=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function jF(t){return"string"==typeof t?t:""}var DF=function(t){function e(){return t.call(this)||this}return FF(e,t),e.prototype.getType=function(){return ai.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(jF(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return et()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(jF(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return et()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(jF(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return et()},e.prototype.readProjection=function(t){return this.readProjectionFromText(jF(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return et()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return et()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return et()},e}(ni),GF=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BF={POINT:en,LINESTRING:Ln,POLYGON:Yn,MULTIPOINT:cn,MULTILINESTRING:$n,MULTIPOLYGON:ti},zF="EMPTY",UF="Z",qF="M",VF=1,YF=2,WF=3,XF=4,ZF=5,HF=6,KF={};for(var $F in De)KF[$F]=De[$F].toUpperCase();var JF=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,n=e;if("("==e)t=YF;else if(","==e)t=ZF;else if(")"==e)t=WF;else if(this.isNumeric_(e)||"-"==e)t=XF,n=this.readNumber_();else if(this.isAlpha_(e))t=VF,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=HF}return{position:r,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),QF=function(){function t(t){this.lexer_=t,this.token_,this.layout_=Xr.XY}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=Xr.XY,e=this.token_;if(this.isTokenType(VF)){var r=e.value;r===UF?t=Xr.XYZ:r===qF?t=Xr.XYM:"ZM"===r&&(t=Xr.XYZM),t!==Xr.XY&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(YF)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(ZF));if(this.match(WF))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(YF)){var t=this.parsePoint_();if(this.match(WF))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(YF)){var t=this.parsePointList_();if(this.match(WF))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(YF)){var t=this.parseLineStringTextList_();if(this.match(WF))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(YF)){var t=void 0;if(t=this.token_.type==YF?this.parsePointTextList_():this.parsePointList_(),this.match(WF))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(YF)){var t=this.parseLineStringTextList_();if(this.match(WF))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(YF)){var t=this.parsePolygonTextList_();if(this.match(WF))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var n=this.token_;if(!this.match(XF))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(ZF);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(ZF);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(ZF);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(ZF);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(VF)&&this.token_.value==zF;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(VF)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var r=this.parseGeometryCollectionText_();return new fi(r)}var n=BF[e];if(!n)throw new Error("Invalid geometry type: "+e);var i=void 0;switch(e){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return i||(i=n===BF.POINT?[NaN,NaN]:[]),new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),tj=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,r}return GF(e,t),e.prototype.parse_=function(t){var e=new JF(t);return new QF(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);if(r){var n=new ri;return n.setGeometry(r),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var r=[],n=this.readGeometryFromText(t,e),i=[],o=0,a=(r=this.splitCollection_&&n.getType()==De.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new ri;s.setGeometry(r[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){var r=this.parse_(t);return r?ii(r,!1,e):null},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(t[n].getGeometry());var o=new fi(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return oj(ii(t,!0,e))},e}(DF);function ej(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function rj(t){for(var e=t.getCoordinates(),r=[],n=0,i=e.length;n<i;++n)r.push(e[n].join(" "));return r.join(",")}function nj(t){for(var e=[],r=t.getLinearRings(),n=0,i=r.length;n<i;++n)e.push("("+rj(r[n])+")");return e.join(",")}var ij={Point:ej,LineString:rj,Polygon:nj,MultiPoint:function(t){for(var e=[],r=t.getPoints(),n=0,i=r.length;n<i;++n)e.push("("+ej(r[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),n=0,i=r.length;n<i;++n)e.push("("+rj(r[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),n=0,i=r.length;n<i;++n)e.push("("+nj(r[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),n=0,i=r.length;n<i;++n)e.push(oj(r[n]));return e.join(",")}};function oj(t){var e=t.getType(),r=(0,ij[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),r="";return e!==Xr.XYZ&&e!==Xr.XYZM||(r+=UF),e!==Xr.XYM&&e!==Xr.XYZM||(r+=qF),r}(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" "+zF:e+"("+r+")"}var aj=tj;function sj(t){return(sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cj(t,e){return!e||"object"!==sj(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hj(t){return(hj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fj(t,e){return(fj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pj=function(t){return{dataProjection:yr(t.dataProjection),featureProjection:yr(t.featureProjection)}},dj=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=cj(this,hj(e).call(this,r))).gjFormat_=new $o,t.formatter_=new aj(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){uj(t,e,r[e])})}return t}({splitCollection:!0},r)),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fj(t,e)}(e,da),r=e,(n=[{key:"getFormatter",value:function(){return this.formatter_}},{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pj(e),n=e.id,i=this.formatter_.readFeatureFromText(t,r),o=ua.olFeature2Facade(i);return null!=n&&o.setId(n),o}},{key:"readCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pj(e),n=e.ids,i=this.formatter_.readFeaturesFromText(t,r).map(function(t){return ua.olFeature2Facade(t)});return null!=n&&n.length===i.length&&i.forEach(function(t,e){return t.setId(n[e])}),i}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pj(e),n=ua.facade2OLFeature(t);return this.formatter_.writeFeatureText(n,r)}},{key:"writeFeature",value:function(t){var e=this.gjFormat_.readGeometryFromObject(t);if("point"===e.getType().toLowerCase()){var r=e.getCoordinates();e.setCoordinates([r[0],r[1]])}return this.formatter_.writeGeometryText(e)}},{key:"writeCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pj(e),n=t.map(function(t){return ua.facade2OLFeature(t)});return this.formatter_.writeFeaturesText(n,r)}}])&&lj(r.prototype,n),i&&lj(r,i),e}();function yj(t){return(yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mj(t,e){return!e||"object"!==yj(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vj(t){return(vj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _j(t,e){return(_j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bj=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new dj(r);return t=mj(this,vj(e).call(this,n)),d(dj)&&wa(Sa("exception").wkt_method),t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_j(t,e)}(e,ba),r=e,(n=[{key:"read",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().read(t,e)}},{key:"readCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().readCollection(t,e)}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().write(t,e)}},{key:"writeFeature",value:function(t){return this.getImpl().writeFeature(t)}},{key:"writeCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().writeCollection(t,e)}}])&&gj(r.prototype,n),i&&gj(r,i),e}();function wj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xj=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parser=new mI,this.capabilities=null}var e,r,n;return e=t,(r=[{key:"read",value:function(t){return this.capabilities=this.parser.read(t),this}},{key:"getMatrixSet",value:function(t,e){for(var r,n=0;n<this.capabilities.Contents.Layer.length&&void 0===r;n+=1){var i=this.capabilities.Contents.Layer[n];i.Identifier===t&&(v(e)||(r=i.TileMatrixSetLink.filter(function(t){return t.contains(e)})[0]),void 0===r&&(r=i.TileMatrixSetLink[0].TileMatrixSet))}return r}},{key:"getMatrixIds",value:function(t,e){var r=[],n=this.getMatrixSet(t,e),i=this.capabilities.Contents.TileMatrixSet.filter(function(t){return t.Identifier===n})[0];return null!=i&&i.length>0&&(r=i.TileMatrix.map(function(t){return t.Identifier})),r}},{key:"getFormat",value:function(t){var e,r=this.capabilities.Contents.Layer.filter(function(e){return e.Identifier===t})[0];return null!=r&&(e=r.Format[0]),e}},{key:"getOptionsFromCapabilities",value:function(t,e){return NM(this.capabilities,{layer:t,matrixSet:e})}}])&&wj(e.prototype,r),n&&wj(e,n),t}();function Ej(t){return(Ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oj(t,e){return!e||"object"!==Ej(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tj(t){return(Tj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mj(t,e){return(Mj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ij=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Oj(this,Tj(e).call(this))).geojsonFormatter_=new $o,t.name="drawLayer",t.selectedFeatures_=[],t}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mj(t,e)}(e,Gd),r=e,(n=[{key:"addTo",value:function(t){this.map=t,this.fire("added:map"),this.ol3Layer=new Q_({source:new ub({}),style:new Co({fill:new xo({color:"rgba(0, 158, 0, 0.1)"}),stroke:new Eo({color:"#fcfcfc",width:2}),image:new wo({radius:7,fill:new xo({color:"#009E00"}),stroke:new Eo({color:"#fcfcfc",width:2})})}),zIndex:mv.Z_INDEX.WFS+999}),!1!==this.options.visibility&&this.setVisible(this.inRange()),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t){this.selectedFeatures_=t,_(this.selectedFeatures_[0].click)&&this.selectedFeatures_[0].click()}},{key:"unselectFeatures",value:function(){this.selectedFeatures_.length>0&&(this.selectedFeatures_.length=0,this.map.removePopup())}},{key:"drawPoints",value:function(t){var e=t;v(e)&&wa(Sa("exception").no_point),m(e)||(e=[e]);var r=this.pointsToGeoJSON_(e);this.drawGeoJSON(r)}},{key:"drawGeoJSON",value:function(t){var e=this,r=t;v(r)&&wa(Sa("exception").no_geojson),m(r)||(r=[r]);var n=yr(this.map.getProjection().code),i=[];r.forEach(function(t){var r=e.geojsonFormatter_.readFeatures(t,{dataProjection:n});i=i.concat(r)}),this.ol3Layer.getSource().addFeatures(i)}},{key:"drawFeatures",value:function(t){var e=t;v(e)||(m(e)||(e=[e]),this.ol3Layer.getSource().addFeatures(e))}},{key:"removeFeatures",value:function(t){var e=t;if(!v(e)){m(e)||(e=[e]);var r=this.ol3Layer.getSource();e.forEach(function(t){try{r.removeFeature(t)}catch(t){throw t}})}}},{key:"getPoints",value:function(t){var e=[],r=this.ol3Layer.getSource();return e=v(t)?r.getFeatures():r.getFeaturesAtCoordinate(t),this.featuresToPoints_(e)}},{key:"destroy",value:function(){var t=this.map.getMapImpl();v(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.options=null,this.map=null}},{key:"equals",value:function(t){var r=!1;return t instanceof e&&(r=r&&this.name===t.name),r}},{key:"pointsToGeoJSON_",value:function(t){var e=this,r=yr(this.map.getProjection().code);return t.map(function(t){var n=t.data,i=new en([t.x,t.y]);return{type:"Feature",geometry:e.geojsonFormatter_.writeGeometryObject(i,{dataProjection:r}),properties:n,click:t.click,showPopup:t.showPopup}})}},{key:"featuresToPoints_",value:function(t){return[]}}])&&Sj(r.prototype,n),i&&Sj(r,i),e}();function Pj(t){return(Pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lj(t,e){return!e||"object"!==Pj(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kj(t){return(kj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rj(t,e){return(Rj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Aj=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lj(this,kj(e).apply(this,arguments))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rj(t,e)}(e,Vo),r=e,(n=[{key:"getImageSize",value:function(){return this.iconImage_.getSize()}}])&&Cj(r.prototype,n),i&&Cj(r,i),e}(),Nj=function(t,e,r){return function t(e,r,n){var i=null;if(!v(e))if(m(e))for(var o=0;o<e.length&&null===i;o+=1)i=t(e[o],r,n);else if(b(e)&&(v(r)||e.Identifier===r)){i=e.WGS84BoundingBox;var a=yr("EPSG:4326"),s=yr(n);i=aa.transformExtent(i,a,s)}return i}(t.Layer,e,r)};function Fj(t){return(Fj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var jj=/TMS\*.*/,Dj=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map(function(t){return t.trim()}).map(function(t){return Number.parseFloat(t)})}};if(w(e)&&t.test(e)){var l=e.split("*")[o];v(l)||(s=u[n](l))}else b(e)?s=e[r]:wa("El parámetro no es de un tipo soportado: ".concat(Fj(e)));return w(s)&&(s=s.trim()),!0===a&&(s=E(s)),s}},Gj=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r=xp,n=Dj({parameter:t,type:"string",attr:"name"}),i=Dj({parameter:t,type:"string",attr:"url"}),o=Dj({parameter:t,type:"string",attr:"legend"}),a=Dj({parameter:t,type:"boolean",attr:"displayInLayerSwitcher"});return(jj.test(t)||b(t))&&(e={type:r,name:n(jj,3),url:i(jj,2),legend:o(jj,1),displayInLayerSwitcher:a(jj,4)}),e}),m(t)||(e=e[0]),e};function Bj(t){return(Bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zj,Uj,qj,Vj,Yj,Wj,Xj=/XYZ\*.*/,Zj=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,u={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map(function(t){return t.trim()}).map(function(t){return Number.parseFloat(t)})}};if(w(e)&&t.test(e)){var l=e.split("*")[o];v(l)||(s=u[n](l))}else b(e)?s=e[r]:wa("El parámetro no es de un tipo soportado: ".concat(Bj(e)));return w(s)&&(s=s.trim()),!0===a&&(s=E(s)),s}},Hj=function(t){var e=[];v(t)&&wa(Sa("exception").no_param);var r=t;return m(r)||(r=[r]),e=r.map(function(t){var e,r=wp,n=Zj({parameter:t,type:"string",attr:"name"}),i=Zj({parameter:t,type:"string",attr:"url"}),o=Zj({parameter:t,type:"string",attr:"legend"}),a=Zj({parameter:t,type:"boolean",attr:"displayInLayerSwitcher"});return(Xj.test(t)||b(t))&&(e={type:r,name:n(Xj,3),url:i(Xj,2),legend:o(Xj,1),displayInLayerSwitcher:a(Xj,4)}),e}),m(t)||(e=e[0]),e},Kj=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1};function $j(){}class Jj{constructor(){Jj.constructor_.apply(this,arguments)}setOrdinate(t,e,r){}size(){}getOrdinate(t,e){}getCoordinate(){if(1===arguments.length){arguments[0]}else if(2===arguments.length){arguments[0],arguments[1]}}getCoordinateCopy(t){}getDimension(){}getX(t){}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getClass(){return Jj}get interfaces_(){return[$j]}}Jj.constructor_=function(){},Jj.X=0,Jj.Y=1,Jj.Z=2,Jj.M=3;class Qj{constructor(){Qj.constructor_.apply(this,arguments)}create(){if(1===arguments.length){if(arguments[0]instanceof Array){arguments[0]}else if(Kj(arguments[0],Jj)){arguments[0]}}else if(2===arguments.length){arguments[0],arguments[1]}}getClass(){return Qj}get interfaces_(){return[]}}function tD(t){this.message=t}Qj.constructor_=function(){};class eD{constructor(){eD.constructor_.apply(this,arguments)}filter(t){}getClass(){return eD}get interfaces_(){return[]}}function rD(){}function nD(){}eD.constructor_=function(){};class iD{constructor(){iD.constructor_.apply(this,arguments)}static equalsWithTolerance(t,e,r){return Math.abs(t-e)<=r}getClass(){return iD}get interfaces_(){return[]}}function oD(t,e){this.low=0|e,this.high=0|t}function aD(){}function sD(){}function uD(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}iD.constructor_=function(){},oD.toBinaryString=function(t){for(var e="",r=2147483648;r>0;r>>>=1)e+=(t.high&r)===r?"1":"0";for(r=2147483648;r>0;r>>>=1)e+=(t.low&r)===r?"1":"0";return e},aD.isNaN=(t=>Number.isNaN(t)),aD.isInfinite=(t=>!Number.isFinite(t)),aD.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?(Yj=new Float64Array(1),Wj=new Int32Array(Yj.buffer),aD.doubleToLongBits=function(t){Yj[0]=t;var e=0|Wj[0],r=0|Wj[1];return 2146435072==(2146435072&r)&&0!=(1048575&r)&&0!==e&&(e=0,r=2146959360),new oD(r,e)},aD.longBitsToDouble=function(t){return Wj[0]=t.low,Wj[1]=t.high,Yj[0]}):(zj=Math.log2,Uj=Math.floor,qj=Math.pow,Vj=function(){for(var t=53;t>0;t--){var e=qj(2,t)-1;if(Uj(zj(e))+1===t)return e}return 0}(),aD.doubleToLongBits=function(t){var e,r,n,i,o,a,s,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(a=1<<31,t=-t):a=0,0===t)return new oD(u=a,l=0);if(t===1/0)return new oD(u=2146435072|a,l=0);if(t!=t)return new oD(u=2146959360,l=0);if(i=0,l=0,(e=Uj(t))>1)if(e<=Vj)(i=Uj(zj(e)))<=20?(l=0,u=e<<20-i&1048575):(l=e%(r=qj(2,n=i-20))<<32-n,u=e/r&1048575);else for(n=e,l=0;0!==(n=Uj(r=n/2));)i++,l>>>=1,l|=(1&u)<<31,u>>>=1,r!==n&&(u|=524288);if(s=i+1023,o=0===e,e=t-e,i<52&&0!==e)for(n=0;;){if((r=2*e)>=1?(e=r-1,o?(s--,o=!1):(n<<=1,n|=1,i++)):(e=r,o?0==--s&&(i++,o=!1):(n<<=1,i++)),20===i)u|=n,n=0;else if(52===i){l|=n;break}if(1===r){i<20?u|=n<<20-i:i<52&&(l|=n<<52-i);break}}return u|=s<<20,new oD(u|=a,l)},aD.longBitsToDouble=function(t){var e,r,n,i,o=t.high,a=t.low;r=o&1<<31?-1:1,n=((2146435072&o)>>20)-1023,i=0,e=1<<19;for(var s=1;s<=20;s++)o&e&&(i+=qj(2,-s)),e>>>=1;for(e=1<<31,s=21;s<=52;s++)a&e&&(i+=qj(2,-s)),e>>>=1;if(-1023===n){if(0===i)return 0*r;n=-1022}else{if(1024===n)return 0===i?r/0:NaN;i+=1}return r*i*qj(2,n)}),uD.prototype=Object.create(Error.prototype),uD.prototype.constructor=Error;class lD extends uD{constructor(){super(),lD.constructor_.apply(this,arguments)}getClass(){return lD}get interfaces_(){return[]}}lD.constructor_=function(){if(0===arguments.length)uD.constructor_.call(this);else if(1===arguments.length){let t=arguments[0];uD.constructor_.call(this,t)}};class cD{constructor(){cD.constructor_.apply(this,arguments)}static shouldNeverReachHere(){if(0===arguments.length)cD.shouldNeverReachHere(null);else if(1===arguments.length){let t=arguments[0];throw new lD("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){let t=arguments[0];cD.isTrue(t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(!t)throw null===e?new lD:new lD(e)}}static equals(){if(2===arguments.length){let t=arguments[0],e=arguments[1];cD.equals(t,e,null)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];if(!e.equals(t))throw new lD("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))}}getClass(){return cD}get interfaces_(){return[]}}cD.constructor_=function(){};class hD{constructor(){hD.constructor_.apply(this,arguments)}static hashCode(){if(1===arguments.length&&"number"==typeof arguments[0]){let e=arguments[0];var t=aD.doubleToLongBits(e);return Math.trunc(t^t>>>32)}}setOrdinate(t,e){switch(t){case hD.X:this.x=e;break;case hD.Y:this.y=e;break;case hD.Z:this.z=e;break;default:throw new tD("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){let t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){let t=arguments[0],e=arguments[1];return!!iD.equalsWithTolerance(this.x,t.x,e)&&!!iD.equalsWithTolerance(this.y,t.y,e)}}getOrdinate(t){switch(t){case hD.X:return this.x;case hD.Y:return this.y;case hD.Z:return this.z}throw new tD("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||aD.isNaN(this.z)&&aD.isNaN(t.z))}equals(t){return t instanceof hD&&this.equals2D(t)}equalInZ(t,e){return iD.equalsWithTolerance(this.z,t.z,e)}compareTo(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return cD.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new hD(this)}toString(){return"("+this.x+", "+this.y+", "+this.z+")"}distance3D(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)}distance(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}hashCode(){var t=17;return t=37*(t=37*t+hD.hashCode(this.x))+hD.hashCode(this.y)}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.z}getClass(){return hD}get interfaces_(){return[rD,$j,nD]}}class fD{constructor(){fD.constructor_.apply(this,arguments)}static compare(t,e){return t<e?-1:t>e?1:aD.isNaN(t)?aD.isNaN(e)?0:-1:aD.isNaN(e)?1:0}compare(t,e){var r=t,n=e,i=fD.compare(r.x,n.x);if(0!==i)return i;var o=fD.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:fD.compare(r.z,n.z)}getClass(){return fD}get interfaces_(){return[sD]}}fD.constructor_=function(){if(this._dimensionsToTest=2,0===arguments.length)fD.constructor_.call(this,2);else if(1===arguments.length){let t=arguments[0];if(2!==t&&3!==t)throw new tD("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}},hD.DimensionalComparator=fD,hD.constructor_=function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)hD.constructor_.call(this,0,0);else if(1===arguments.length){let t=arguments[0];hD.constructor_.call(this,t.x,t.y,t.z)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];hD.constructor_.call(this,t,e,hD.NULL_ORDINATE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.z=r}},hD.serialVersionUID=0x5cbf2c235c7e5800,hD.NULL_ORDINATE=aD.NaN,hD.X=0,hD.Y=1,hD.Z=2;class pD{constructor(){pD.constructor_.apply(this,arguments)}static intersects(){if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){let i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];var t=Math.min(a.x,s.x),e=Math.max(a.x,s.x),r=Math.min(i.x,o.x),n=Math.max(i.x,o.x);return!(r>e)&&(!(n<t)&&(t=Math.min(a.y,s.y),e=Math.max(a.y,s.y),r=Math.min(i.y,o.y),n=Math.max(i.y,o.y),!(r>e)&&!(n<t)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof pD))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new pD;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new pD(e,n,r,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof hD){let t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof pD){let t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof pD){let t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof hD){let t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof hD&&arguments[1]instanceof hD){let t=arguments[0],e=arguments[1];return!this.isNull()&&(!((t.x<e.x?t.x:e.x)>this._maxx)&&(!((t.x>e.x?t.x:e.x)<this._minx)&&(!((t.y<e.y?t.y:e.y)>this._maxy)&&!((t.y>e.y?t.y:e.y)<this._miny))))}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof hD){let t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof pD){let t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){let t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof pD){let t=arguments[0];return this.covers(t)}if(arguments[0]instanceof hD){let t=arguments[0];return this.covers(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new hD((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof hD){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof pD){let t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),r<n?(this._miny=r,this._maxy=n):(this._miny=n,this._maxy=r)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)}hashCode(){var t=17;return t=37*(t=37*(t=37*(t=37*t+hD.hashCode(this._minx))+hD.hashCode(this._maxx))+hD.hashCode(this._miny))+hD.hashCode(this._maxy)}getClass(){return pD}get interfaces_(){return[rD,nD]}}pD.constructor_=function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof hD){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof pD){let t=arguments[0];this.init(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.init(t,e,r,n)}},pD.serialVersionUID=0x51845cd552189800;class dD{constructor(){dD.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===dD.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equals(){if(arguments[0]instanceof dD){let t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){let e=arguments[0];if(!(e instanceof dD))return!1;var t=e;return this.equalsExact(t)}}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(dD.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){if(1===arguments.length){let e=arguments[0];var t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){let e=arguments[0],r=arguments[1];t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,r)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(t){if(t.getTypeCode()===dD.TYPECODE_GEOMETRYCOLLECTION)throw new tD("This method does not support GeometryCollection arguments")}equal(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r}norm(){var t=this.copy();return t.normalize(),t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new pD(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),a=i.compareTo(o);if(0!==a)return a}return r.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isGeometryCollectionOrDerived(){return this.getTypeCode()===dD.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===dD.TYPECODE_MULTIPOINT||this.getTypeCode()===dD.TYPECODE_MULTILINESTRING||this.getTypeCode()===dD.TYPECODE_MULTIPOLYGON}get interfaces_(){return[$j,rD,nD]}getClass(){return dD}static hasNonEmptyElements(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}dD.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},dD.serialVersionUID=0x799ea46522854c00,dD.TYPECODE_POINT=0,dD.TYPECODE_MULTIPOINT=1,dD.TYPECODE_LINESTRING=2,dD.TYPECODE_LINEARRING=3,dD.TYPECODE_MULTILINESTRING=4,dD.TYPECODE_POLYGON=5,dD.TYPECODE_MULTIPOLYGON=6,dD.TYPECODE_GEOMETRYCOLLECTION=7,dD.TYPENAME_POINT="Point",dD.TYPENAME_MULTIPOINT="MultiPoint",dD.TYPENAME_LINESTRING="LineString",dD.TYPENAME_LINEARRING="LinearRing",dD.TYPENAME_MULTILINESTRING="MultiLineString",dD.TYPENAME_POLYGON="Polygon",dD.TYPENAME_MULTIPOLYGON="MultiPolygon",dD.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",dD.geometryChangedFilter={get interfaces_(){return[eD]},filter(t){t.geometryChangedAction()}};class yD{constructor(){yD.constructor_.apply(this,arguments)}filter(t){}getClass(){return yD}get interfaces_(){return[]}}yD.constructor_=function(){};class gD{constructor(){gD.constructor_.apply(this,arguments)}isInBoundary(t){}getClass(){return gD}get interfaces_(){return[]}}class mD{constructor(){mD.constructor_.apply(this,arguments)}isInBoundary(t){return t%2==1}getClass(){return mD}get interfaces_(){return[gD]}}mD.constructor_=function(){};class vD{constructor(){vD.constructor_.apply(this,arguments)}isInBoundary(t){return t>0}getClass(){return vD}get interfaces_(){return[gD]}}vD.constructor_=function(){};class _D{constructor(){_D.constructor_.apply(this,arguments)}isInBoundary(t){return t>1}getClass(){return _D}get interfaces_(){return[gD]}}_D.constructor_=function(){};class bD{constructor(){bD.constructor_.apply(this,arguments)}isInBoundary(t){return 1===t}getClass(){return bD}get interfaces_(){return[gD]}}function wD(){}function xD(){}function ED(t){this.message=t||""}function SD(){}function OD(t){this.message=t||""}function TD(t){this.message=t||""}function MD(){this.array_=[],arguments[0]instanceof xD&&this.addAll(arguments[0])}bD.constructor_=function(){},gD.Mod2BoundaryNodeRule=mD,gD.EndPointBoundaryNodeRule=vD,gD.MultiValentEndPointBoundaryNodeRule=_D,gD.MonoValentEndPointBoundaryNodeRule=bD,gD.constructor_=function(){},gD.MOD2_BOUNDARY_RULE=new mD,gD.ENDPOINT_BOUNDARY_RULE=new vD,gD.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new _D,gD.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new bD,gD.OGC_SFS_BOUNDARY_RULE=gD.MOD2_BOUNDARY_RULE,wD.prototype.hasNext=function(){},wD.prototype.next=function(){},wD.prototype.remove=function(){},xD.prototype.add=function(){},xD.prototype.addAll=function(){},xD.prototype.isEmpty=function(){},xD.prototype.iterator=function(){},xD.prototype.size=function(){},xD.prototype.toArray=function(){},xD.prototype.remove=function(){},ED.prototype=new Error,ED.prototype.name="IndexOutOfBoundsException",SD.prototype=Object.create(xD.prototype),SD.prototype.constructor=SD,SD.prototype.get=function(){},SD.prototype.set=function(){},SD.prototype.isEmpty=function(){},OD.prototype=new Error,OD.prototype.name="NoSuchElementException",TD.prototype=new Error,TD.prototype.name="OperationNotSupported",MD.prototype=Object.create(SD.prototype),MD.prototype.constructor=MD,MD.prototype.ensureCapacity=function(){},MD.prototype.interfaces_=[SD,xD],MD.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},MD.prototype.clear=function(){this.array_=[]},MD.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},MD.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},MD.prototype.iterator=function(){return new ID(this)},MD.prototype.get=function(t){if(t<0||t>=this.size())throw new ED;return this.array_[t]},MD.prototype.isEmpty=function(){return 0===this.array_.length},MD.prototype.size=function(){return this.array_.length},MD.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},MD.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},MD.prototype.removeAll=function(t){for(var e=t.iterator();e.hasNext();)this.remove(e.next());return!0};var ID=function(t){this.arrayList_=t,this.position_=0};ID.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new OD;return this.arrayList_.get(this.position_++)},ID.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},ID.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},ID.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};class PD extends MD{constructor(){super(),PD.constructor_.apply(this,arguments)}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&Kj(arguments[0],xD)){let r=arguments[0],n=arguments[1];for(var t=!1,e=r.iterator();e.hasNext();)this.add(e.next(),n),t=!0;return t}return super.addAll.apply(this,arguments)}clone(){for(var t=super.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){return this.toArray(PD.coordArrayType)}add(){if(1===arguments.length){let t=arguments[0];super.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof hD&&"boolean"==typeof arguments[1]){let t=arguments[0];if(!arguments[1])if(this.size()>=1)if(this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let e=arguments[0],r=arguments[1];if(arguments[2])for(var t=0;t<e.length;t++)this.add(e[t],r);else for(t=e.length-1;t>=0;t--)this.add(e[t],r);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof hD){let t=arguments[0],r=arguments[1];if(!arguments[2]){var e=this.size();if(e>0){if(t>0)if(this.get(t-1).equals2D(r))return null;if(t<e)if(this.get(t).equals2D(r))return null}}super.add.call(this,t,r)}}else if(4===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var r=1;i>o&&(r=-1);for(t=i;t!==o;t+=r)this.add(e[t],n);return!0}}closeRing(){this.size()>0&&this.add(new hD(this.get(0)),!1)}getClass(){return PD}get interfaces_(){return[]}}PD.constructor_=function(){if(0===arguments.length);else if(1===arguments.length){let t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}},PD.coordArrayType=new Array(0).fill(null);class CD{constructor(){CD.constructor_.apply(this,arguments)}static log10(t){var e=Math.log(t);return aD.isInfinite(e)?e:aD.isNaN(e)?e:e/CD.LOG_10}static min(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){let e=arguments[0],r=arguments[1],n=arguments[2];return r>(t=e)&&(t=r),n>t&&(t=n),t}if(4===arguments.length){let e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];var t;return r>(t=e)&&(t=r),n>t&&(t=n),i>t&&(t=i),t}}static average(t,e){return(t+e)/2}getClass(){return CD}get interfaces_(){return[]}}function LD(){}CD.constructor_=function(){},CD.LOG_10=Math.log(10),LD.arraycopy=((t,e,r,n,i)=>{let o=0;for(let a=e;a<e+i;a++)r[n+o]=t[a],o++}),LD.getProperty=(t=>({"line.separator":"\n"})[t]);class kD{constructor(){kD.constructor_.apply(this,arguments)}static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(kD.indexOf(n,e)<0)return n}return null}static scroll(t,e){var r=kD.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);LD.arraycopy(t,r,n,0,t.length-r),LD.arraycopy(t,0,n,t.length-r,r),LD.arraycopy(n,0,t,0,t.length)}static equals(){if(2===arguments.length){let e=arguments[0],r=arguments[1];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].equals(r[t]))return!1;return!0}if(3===arguments.length){let e=arguments[0],r=arguments[1],n=arguments[2];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(t=0;t<e.length;t++)if(0!==n.compare(e[t],r[t]))return!1;return!0}}static intersection(t,e){for(var r=new PD,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()}static hasRepeatedPoints(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){return kD.hasRepeatedPoints(t)?new PD(t,!1).toCoordinateArray():t}static reverse(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}}static removeNull(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;var i=0;for(r=0;r<t.length;r++)null!==t[r]&&(n[i++]=t[r]);return n}static copyDeep(){if(1===arguments.length){let r=arguments[0];for(var t=new Array(r.length).fill(null),e=0;e<r.length;e++)t[e]=new hD(r[e]);return t}if(5===arguments.length){let t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4];for(e=0;e<o;e++)n[i+e]=new hD(t[r+e])}}static isEqualReversed(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0}static envelope(t){for(var e=new pD,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e}static toCoordinateArray(t){return t.toArray(kD.coordArrayType)}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1}static increasingDirection(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1}static compare(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0}static minCoordinate(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e}static extract(t,e,r){e=CD.clamp(e,0,t.length);var n=(r=CD.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,a=e;a<=r;a++)i[o++]=t[a];return i}getClass(){return kD}get interfaces_(){return[]}}class RD{constructor(){RD.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e;return kD.compare(r,n)}getClass(){return RD}get interfaces_(){return[sD]}}RD.constructor_=function(){};class AD{constructor(){AD.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=kD.compare(r,n);return kD.isEqualReversed(r,n)?0:i}OLDcompare(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=kD.increasingDirection(r),o=kD.increasingDirection(n),a=i>0?0:r.length-1,s=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[a].compareTo(n[s]);if(0!==l)return l;a+=i,s+=o}return 0}getClass(){return AD}get interfaces_(){return[sD]}}function ND(){}function FD(){}function jD(){}function DD(){this.array_=[],arguments[0]instanceof xD&&this.addAll(arguments[0])}AD.constructor_=function(){},kD.ForwardComparator=RD,kD.BidirectionalComparator=AD,kD.constructor_=function(){},kD.coordArrayType=new Array(0).fill(null),ND.prototype.get=function(){},ND.prototype.put=function(){},ND.prototype.size=function(){},ND.prototype.values=function(){},ND.prototype.entrySet=function(){},FD.prototype=new ND,jD.prototype=new xD,jD.prototype.contains=function(){},DD.prototype=new jD,DD.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(this.array_[e]===t)return!0}return!1},DD.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},DD.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},DD.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},DD.prototype.size=function(){return this.array_.length},DD.prototype.isEmpty=function(){return 0===this.array_.length},DD.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},DD.prototype.iterator=function(){return new GD(this)};var GD=function(t){this.hashSet_=t,this.position_=0};GD.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new OD;return this.hashSet_.array_[this.position_++]},GD.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},GD.prototype.remove=function(){throw new TD};const BD=0;function zD(t){return null==t?BD:t.color}function UD(t){return null==t?null:t.parent}function qD(t,e){null!==t&&(t.color=e)}function VD(t){return null==t?null:t.left}function YD(t){return null==t?null:t.right}function WD(){this.root_=null,this.size_=0}WD.prototype=new FD,WD.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},WD.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:BD,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:r,color:BD,getValue(){return this.value},getKey(){return this.key}};return n<0?r.left=a:r.right=a,this.fixAfterInsertion(a),this.size_++,null},WD.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var e;if(UD(t)==VD(UD(UD(t))))1==zD(e=YD(UD(UD(t))))?(qD(UD(t),BD),qD(e,BD),qD(UD(UD(t)),1),t=UD(UD(t))):(t==YD(UD(t))&&(t=UD(t),this.rotateLeft(t)),qD(UD(t),BD),qD(UD(UD(t)),1),this.rotateRight(UD(UD(t))));else 1==zD(e=VD(UD(UD(t))))?(qD(UD(t),BD),qD(e,BD),qD(UD(UD(t)),1),t=UD(UD(t))):(t==VD(UD(t))&&(t=UD(t),this.rotateRight(t)),qD(UD(t),BD),qD(UD(UD(t)),1),this.rotateLeft(UD(UD(t))))}this.root_.color=BD},WD.prototype.values=function(){var t=new MD,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=WD.successor(e));)t.add(e.value);return t},WD.prototype.entrySet=function(){var t=new DD,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=WD.successor(e));)t.add(e);return t},WD.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},WD.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},WD.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},WD.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var r=t;null!==e&&r===e.right;)r=e,e=e.parent;return e},WD.prototype.size=function(){return this.size_},WD.prototype.containsKey=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return!0;e=e.right}}return!1};class XD{constructor(){XD.constructor_.apply(this,arguments)}getClass(){return XD}get interfaces_(){return[]}}function ZD(){}function HD(){this.array_=[],arguments[0]instanceof xD&&this.addAll(arguments[0])}XD.constructor_=function(){},ZD.prototype=new jD,HD.prototype=new ZD,HD.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},HD.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},HD.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},HD.prototype.remove=function(t){throw new TD},HD.prototype.size=function(){return this.array_.length},HD.prototype.isEmpty=function(){return 0===this.array_.length},HD.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},HD.prototype.iterator=function(){return new $D(this)};var KD,$D=function(t){this.treeSet_=t,this.position_=0};function JD(){}function QD(){}$D.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new OD;return this.treeSet_.array_[this.position_++]},$D.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},$D.prototype.remove=function(){throw new TD},JD.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)return n=function(t,e){return t.compareTo(e)},void i.sort(n);if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else{if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}if(4===arguments.length){for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}}},JD.asList=function(t){for(var e=new MD,r=0,n=t.length;r<n;r++)e.add(t[r]);return e},QD.isWhitespace=(t=>t<=32&&t>=0||127==t),QD.toUpperCase=(t=>t.toUpperCase());class tG{constructor(){tG.constructor_.apply(this,arguments)}static toDimensionSymbol(t){switch(t){case tG.FALSE:return tG.SYM_FALSE;case tG.TRUE:return tG.SYM_TRUE;case tG.DONTCARE:return tG.SYM_DONTCARE;case tG.P:return tG.SYM_P;case tG.L:return tG.SYM_L;case tG.A:return tG.SYM_A}throw new tD("Unknown dimension value: "+t)}static toDimensionValue(t){switch(QD.toUpperCase(t)){case tG.SYM_FALSE:return tG.FALSE;case tG.SYM_TRUE:return tG.TRUE;case tG.SYM_DONTCARE:return tG.DONTCARE;case tG.SYM_P:return tG.P;case tG.SYM_L:return tG.L;case tG.SYM_A:return tG.A}throw new tD("Unknown dimension symbol: "+t)}getClass(){return tG}get interfaces_(){return[]}}tG.constructor_=function(){},tG.P=0,tG.L=1,tG.A=2,tG.FALSE=-1,tG.TRUE=-2,tG.DONTCARE=-3,tG.SYM_FALSE="F",tG.SYM_TRUE="T",tG.SYM_DONTCARE="*",tG.SYM_P="0",tG.SYM_L="1",tG.SYM_A="2";class eG{constructor(){eG.constructor_.apply(this,arguments)}filter(t){}getClass(){return eG}get interfaces_(){return[]}}eG.constructor_=function(){};class rG{constructor(){rG.constructor_.apply(this,arguments)}filter(t,e){}isDone(){}isGeometryChanged(){}getClass(){return rG}get interfaces_(){return[]}}rG.constructor_=function(){};class nG extends dD{constructor(){super(),nG.constructor_.apply(this,arguments)}computeEnvelopeInternal(){for(var t=new pD,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t}getArea(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var t=r;if(this._geometries.length!==t._geometries.length)return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].equalsExact(t._geometries[e],n))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();JD.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){for(var t=tG.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}getTypeCode(){return dD.TYPECODE_GEOMETRYCOLLECTION}getDimension(){for(var t=tG.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)}compareToSameClass(){if(1===arguments.length){let r=arguments[0];var t=new HD(JD.asList(this._geometries)),e=new HD(JD.asList(r._geometries));return this.compare(t,e)}if(2===arguments.length){let t=arguments[0],e=arguments[1];for(var r=t,n=this.getNumGeometries(),i=r.getNumGeometries(),o=0;o<n&&o<i;){var a=this.getGeometryN(o),s=r.getGeometryN(o),u=a.compareToSameClass(s,e);if(0!==u)return u;o++}return o<n?1:o<i?-1:0}}apply(){if(Kj(arguments[0],yD)){let e=arguments[0];for(var t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(Kj(arguments[0],rG)){let e=arguments[0];if(0===this._geometries.length)return null;for(t=0;t<this._geometries.length&&(this._geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(Kj(arguments[0],eG)){let e=arguments[0];e.filter(this);for(t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(Kj(arguments[0],eD)){let e=arguments[0];e.filter(this);for(t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}}getBoundary(){return this.checkNotGeometryCollection(this),cD.shouldNeverReachHere(),null}getGeometryType(){return dD.TYPENAME_GEOMETRYCOLLECTION}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new nG(t,this._factory)}isEmpty(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}getClass(){return nG}get interfaces_(){return[]}}nG.constructor_=function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(dD.constructor_.call(this,e),null===t&&(t=[]),dD.hasNullElements(t))throw new tD("geometries must not contain null elements");this._geometries=t}},nG.serialVersionUID=-0x4f07bcb1f857d800;class iG extends nG{constructor(){super(),iG.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?tG.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return dD.TYPECODE_MULTILINESTRING}getDimension(){return 1}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)}getBoundary(){return new oG(this).getBoundary()}getGeometryType(){return dD.TYPENAME_MULTILINESTRING}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new iG(t,this._factory)}getClass(){return iG}get interfaces_(){return[XD]}}iG.constructor_=function(){let t=arguments[0],e=arguments[1];nG.constructor_.call(this,t,e)},iG.serialVersionUID=0x7155d2ab4afa8000;class oG{constructor(){oG.constructor_.apply(this,arguments)}static getBoundary(){if(1===arguments.length){let t=arguments[0];return new oG(t).getBoundary()}if(2===arguments.length){let t=arguments[0],e=arguments[1];return new oG(t,e).getBoundary()}}boundaryMultiLineString(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)}getBoundary(){return this._geom instanceof gG?this.boundaryLineString(this._geom):this._geom instanceof iG?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(t){var e=new MD;this._endpointMap=new WD;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return kD.toCoordinateArray(e)}addEndpoint(t){var e=this._endpointMap.get(t);null===e&&(e=new aG,this._endpointMap.put(t,e)),e.count++}getClass(){return oG}get interfaces_(){return[]}}oG.constructor_=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){let t=arguments[0];oG.constructor_.call(this,t,gD.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}};class aG{constructor(){aG.constructor_.apply(this,arguments)}getClass(){return aG}get interfaces_(){return[]}}aG.constructor_=function(){this.count=null};class sG{constructor(){sG.constructor_.apply(this,arguments)}static ofLine(t){var e=t.size();if(e<=1)return 0;var r=0,n=new hD;t.getCoordinate(0,n);for(var i=n.x,o=n.y,a=1;a<e;a++){t.getCoordinate(a,n);var s=n.x,u=n.y,l=s-i,c=u-o;r+=Math.sqrt(l*l+c*c),i=s,o=u}return r}getClass(){return sG}get interfaces_(){return[]}}function uG(){}function lG(){}function cG(){}function hG(){}function fG(){}sG.constructor_=function(){};class pG{constructor(){pG.constructor_.apply(this,arguments)}static chars(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return new String(r)}static getStackTrace(){if(1===arguments.length){let r=arguments[0];var t=new cG,e=new uG(t);return r.printStackTrace(e),t.toString()}if(2===arguments.length){let t=arguments[0],e=arguments[1];for(var r="",n=new fG(new lG(pG.getStackTrace(t))),i=0;i<e;i++)try{r+=n.readLine()+pG.NEWLINE}catch(t){if(!(t instanceof hG))throw t;cD.shouldNeverReachHere()}return r}}static split(t,e){for(var r=e.length,n=new MD,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);n.add(a),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var s=new Array(n.size()).fill(null),u=0;u<s.length;u++)s[u]=n.get(u);return s}static toString(){if(1===arguments.length&&"number"==typeof arguments[0]){let t=arguments[0];return pG.SIMPLE_ORDINATE_FORMAT.format(t)}}static spaces(t){return pG.chars(" ",t)}getClass(){return pG}get interfaces_(){return[]}}function dG(t){this.str=t}pG.constructor_=function(){},pG.NEWLINE=LD.getProperty("line.separator"),pG.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),dG.prototype.append=function(t){this.str+=t},dG.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},dG.prototype.toString=function(t){return this.str};class yG{constructor(){yG.constructor_.apply(this,arguments)}static copyCoord(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))}static isRing(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Jj.X)===t.getOrdinate(e-1,Jj.X)&&t.getOrdinate(0,Jj.Y)===t.getOrdinate(e-1,Jj.Y))}static isEqual(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!aD.isNaN(a)||!aD.isNaN(s)))return!1}return!0}static extend(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(yG.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)yG.copy(e,i-1,n,o,1);return n}static reverse(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)yG.swap(t,n,e-n)}static swap(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}}static copy(t,e,r,n,i){for(var o=0;o<i;o++)yG.copyCoord(t,e+o,r,n+o)}static toString(){if(1===arguments.length&&Kj(arguments[0],Jj)){let o=arguments[0];var t=o.size();if(0===t)return"()";var e=o.getDimension(),r=new dG;r.append("(");for(var n=0;n<t;n++){n>0&&r.append(" ");for(var i=0;i<e;i++)i>0&&r.append(","),r.append(pG.toString(o.getOrdinate(n,i)))}return r.append(")"),r.toString()}}static ensureValidRing(t,e){var r=e.size();return 0===r?e:r<=3?yG.createClosedRing(t,e,4):e.getOrdinate(0,Jj.X)===e.getOrdinate(r-1,Jj.X)&&e.getOrdinate(0,Jj.Y)===e.getOrdinate(r-1,Jj.Y)?e:yG.createClosedRing(t,e,r+1)}static createClosedRing(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();yG.copy(e,0,n,0,i);for(var o=i;o<r;o++)yG.copy(e,0,n,o,1);return n}getClass(){return yG}get interfaces_(){return[]}}yG.constructor_=function(){};class gG extends dD{constructor(){super(),gG.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this.isEmpty()?new pD:this._points.expandEnvelope(new pD)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var t=r;if(this._points.size()!==t._points.size())return!1;for(var e=0;e<this._points.size();e++)if(!this.equal(this._points.getCoordinate(e),t._points.getCoordinate(e),n))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var r=this._points.copy();yG.reverse(r),this._points=r}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?tG.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return dD.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return sG.ofLine(this._points)}getNumPoints(){return this._points.size()}reverse(){var t=this._points.copy();return yG.reverse(t),this.getFactory().createLineString(t)}compareToSameClass(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(Kj(arguments[0],yD)){let e=arguments[0];for(var t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t))}else if(Kj(arguments[0],rG)){let e=arguments[0];if(0===this._points.size())return null;for(t=0;t<this._points.size()&&(e.filter(this._points,t),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(Kj(arguments[0],eG)){arguments[0].filter(this)}else if(Kj(arguments[0],eD)){arguments[0].filter(this)}}getBoundary(){return new oG(this).getBoundary()}isEquivalentClass(t){return t instanceof gG}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return dD.TYPENAME_LINESTRING}copy(){return new gG(this._points.copy(),this._factory)}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new tD("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}getClass(){return gG}get interfaces_(){return[XD]}}gG.constructor_=function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];dD.constructor_.call(this,e),this.init(t)}},gG.serialVersionUID=0x2b2b51ba435c8e00;class mG{constructor(){mG.constructor_.apply(this,arguments)}getClass(){return mG}get interfaces_(){return[]}}mG.constructor_=function(){};class vG extends dD{constructor(){super(),vG.constructor_.apply(this,arguments)}computeEnvelopeInternal(){if(this.isEmpty())return new pD;var t=new pD;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return tG.FALSE}getTypeCode(){return dD.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}reverse(){return this.copy()}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(Kj(arguments[0],yD)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Kj(arguments[0],rG)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(Kj(arguments[0],eG)){arguments[0].filter(this)}else if(Kj(arguments[0],eD)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return dD.TYPENAME_POINT}copy(){return new vG(this._coordinates.copy(),this._factory)}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),cD.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}getClass(){return vG}get interfaces_(){return[mG]}}vG.constructor_=function(){this._coordinates=null;let t=arguments[0],e=arguments[1];dD.constructor_.call(this,e),this.init(t)},vG.serialVersionUID=0x44077bad161cbc00;class _G{constructor(){_G.constructor_.apply(this,arguments)}static ofRing(){if(arguments[0]instanceof Array){let t=arguments[0];return Math.abs(_G.ofRingSigned(t))}if(Kj(arguments[0],Jj)){let t=arguments[0];return Math.abs(_G.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){let o=arguments[0];if(o.length<3)return 0;for(var t=0,e=o[0].x,r=1;r<o.length-1;r++){var n=o[r].x-e,i=o[r+1].y;t+=n*(o[r-1].y-i)}return t/2}if(Kj(arguments[0],Jj)){let n=arguments[0];var o=n.size();if(o<3)return 0;var a=new hD,s=new hD,u=new hD;n.getCoordinate(0,s),n.getCoordinate(1,u);e=s.x;u.x-=e;for(t=0,r=1;r<o-1;r++)a.y=s.y,s.x=u.x,s.y=u.y,n.getCoordinate(r+1,u),u.x-=e,t+=s.x*(a.y-u.y);return t/2}}getClass(){return _G}get interfaces_(){return[]}}function bG(t){this.str=t}function wG(t){this.value=t}_G.constructor_=function(){},bG.prototype.append=function(t){this.str+=t},bG.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},bG.prototype.toString=function(t){return this.str},wG.prototype.intValue=function(){return this.value},wG.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},wG.isNaN=(t=>Number.isNaN(t));class xG{constructor(){xG.constructor_.apply(this,arguments)}static sqr(t){return xG.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){let t=arguments[0];return xG.parse(t)}if("number"==typeof arguments[0]){let t=arguments[0];return new xG(t)}}static sqrt(t){return xG.valueOf(t).sqrt()}static parse(t){for(var e=0,r=t.length;QD.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new xG,a=0,s=0,u=0;!(e>=r);){var l=t.charAt(e);if(e++,QD.isDigit(l)){var c=l-"0";o.selfMultiply(xG.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=wG.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=xG.TEN.pow(p);f=o.divide(d)}else if(p<0){d=xG.TEN.pow(-p);f=o.multiply(d)}return n?f.negate():f}static createNaN(){return new xG(aD.NaN,aD.NaN)}static copy(t){return new xG(t)}static magnitude(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){for(var r=new bG,n=0;n<e;n++)r.append(t);return r.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){var r=this.abs(),n=xG.magnitude(r._hi),i=xG.TEN.pow(n);(r=r.divide(i)).gt(xG.TEN)?(r=r.divide(xG.TEN),n+=1):r.lt(xG.ONE)&&(r=r.multiply(xG.TEN),n-=1);for(var o=n+1,a=new bG,s=xG.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(r._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),r=r.subtract(xG.valueOf(l)).multiply(xG.TEN),c&&r.selfAdd(xG.TEN);var f=!0,p=xG.magnitude(r._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=n,a.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof xG){let t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){let t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof xG){let t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof xG){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof xG){let t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){let u=arguments[0],l=arguments[1];var t,e,r,n,i=null,o=null,a=null,s=null;return r=this._hi/u,s=(i=(a=xG.SPLIT*r)-(i=a-r))*(o=(s=xG.SPLIT*u)-(o=s-u))-(n=r*u)+i*(e=u-o)+(t=r-i)*o+t*e,s=r+(a=(this._hi-n-s+this._lo-r*l)/u),this._hi=s,this._lo=r-s+a,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof xG){let u=arguments[0];var t,e,r,n,i=null,o=null,a=null,s=null;return t=(r=this._hi/u._hi)-(i=(a=xG.SPLIT*r)-(i=a-r)),s=i*(o=(s=xG.SPLIT*u._hi)-(o=s-u._hi))-(n=r*u._hi)+i*(e=u._hi-o)+t*o+t*e,a=(this._hi-n-s+this._lo-r*u._lo)/u._hi,new xG(s=r+a,r-s+a)}if("number"==typeof arguments[0]){let t=arguments[0];return aD.isNaN(t)?xG.createNaN():xG.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return xG.valueOf(1);var e=new xG(this),r=xG.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r}ceil(){if(this.isNaN())return xG.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new xG(t,e)}compareTo(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}setValue(){if(arguments[0]instanceof xG){let t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){let t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return xG.valueOf(0);if(this.isNegative())return xG.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=xG.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof xG){let t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){let a=arguments[0];var t=null,e=null,r=null,n=null,i=null,o=null;return n=(r=this._hi+a)-(i=r-this._hi),e=(o=(n=a-i+(this._hi-n))+this._lo)+(r-(t=r+o)),this._hi=t+e,this._lo=e+(t-this._hi),this}}else if(2===arguments.length){let c=arguments[0],h=arguments[1];t=null,e=null;var a,s=null;r=null,n=null,i=null,o=null;r=this._hi+c,a=this._lo+h,n=r-(i=r-this._hi),s=a-(o=a-this._lo);var u=(t=r+(i=(n=c-i+(this._hi-n))+a))+(i=(s=h-o+(this._lo-s))+(e=i+(r-t))),l=i+(t-u);return this._hi=u,this._lo=l,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof xG){let t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){let u=arguments[0],l=arguments[1];var t,e,r=null,n=null,i=null,o=null;r=(i=xG.SPLIT*this._hi)-this._hi,o=xG.SPLIT*u,r=i-r,t=this._hi-r,n=o-u;var a=(i=this._hi*u)+(o=r*(n=o-n)-i+r*(e=u-n)+t*n+t*e+(this._hi*l+this._lo*u)),s=o+(r=i-a);return this._hi=a,this._lo=s,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return xG.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new xG(t,e)}negate(){return this.isNaN()?this:new xG(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof xG){let t=arguments[0];return t.isNaN()?xG.createNaN():xG.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){let t=arguments[0];return aD.isNaN(t)?xG.createNaN():xG.copy(this).selfMultiply(t,0)}}isNaN(){return aD.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){var t=xG.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+xG.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+xG.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){var t,e,r,n,i=null,o=null,a=null,s=null;t=(r=1/this._hi)-(i=(a=xG.SPLIT*r)-(i=a-r)),o=(s=xG.SPLIT*this._hi)-this._hi;var u=r+(a=(1-(n=r*this._hi)-(s=i*(o=s-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new xG(u,r-u+a)}toSciNotation(){if(this.isZero())return xG.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=xG.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?xG.NaN:this.isNegative()?this.negate():new xG(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof xG){let t=arguments[0];return xG.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){let t=arguments[0];return xG.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof xG){let t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?xG.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}getClass(){return xG}get interfaces_(){return[nD,rD,$j]}}xG.constructor_=function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this.init(t)}else if(arguments[0]instanceof xG){let t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){let t=arguments[0];xG.constructor_.call(this,xG.parse(t))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t,e)}},xG.PI=new xG(3.141592653589793,1.2246467991473532e-16),xG.TWO_PI=new xG(6.283185307179586,2.4492935982947064e-16),xG.PI_2=new xG(1.5707963267948966,6.123233995736766e-17),xG.E=new xG(2.718281828459045,1.4456468917292502e-16),xG.NaN=new xG(aD.NaN,aD.NaN),xG.EPS=1.23259516440783e-32,xG.SPLIT=134217729,xG.MAX_PRINT_DIGITS=32,xG.TEN=xG.valueOf(10),xG.ONE=xG.valueOf(1),xG.SCI_NOT_EXPONENT_CHAR="E",xG.SCI_NOT_ZERO="0.0E0";class EG{constructor(){EG.constructor_.apply(this,arguments)}static orientationIndex(t,e,r){var n=EG.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=xG.valueOf(e.x).selfAdd(-t.x),o=xG.valueOf(e.y).selfAdd(-t.y),a=xG.valueOf(r.x).selfAdd(-e.x),s=xG.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[0]instanceof xG){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];return t.multiply(n).selfSubtract(e.multiply(r)).signum()}if("number"==typeof arguments[0]){let i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];var t=xG.valueOf(i),e=xG.valueOf(o),r=xG.valueOf(a),n=xG.valueOf(s);return t.multiply(n).selfSubtract(e.multiply(r)).signum()}}static intersection(t,e,r,n){var i=xG.valueOf(n.y).selfSubtract(r.y).selfMultiply(xG.valueOf(e.x).selfSubtract(t.x)),o=xG.valueOf(n.x).selfSubtract(r.x).selfMultiply(xG.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=xG.valueOf(n.x).selfSubtract(r.x).selfMultiply(xG.valueOf(t.y).selfSubtract(r.y)),u=xG.valueOf(n.y).selfSubtract(r.y).selfMultiply(xG.valueOf(t.x).selfSubtract(r.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=xG.valueOf(t.x).selfAdd(xG.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=xG.valueOf(e.x).selfSubtract(t.x).selfMultiply(xG.valueOf(t.y).selfSubtract(r.y)),f=xG.valueOf(e.y).selfSubtract(t.y).selfMultiply(xG.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=xG.valueOf(r.y).selfAdd(xG.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new hD(c,d)}static orientationIndexFilter(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),a=i-o;if(i>0){if(o<=0)return EG.signum(a);n=i+o}else{if(!(i<0))return EG.signum(a);if(o>=0)return EG.signum(a);n=-i-o}var s=EG.DP_SAFE_EPSILON*n;return a>=s||-a>=s?EG.signum(a):2}static signum(t){return t>0?1:t<0?-1:0}getClass(){return EG}get interfaces_(){return[]}}EG.constructor_=function(){},EG.DP_SAFE_EPSILON=1e-15;class SG{constructor(){SG.constructor_.apply(this,arguments)}static index(t,e,r){return EG.orientationIndex(t,e,r)}static isCCW(t){var e=t.length-1;if(e<3)throw new tD("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var a=n;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(r)&&a!==n);var s=n;do{s=(s+1)%e}while(t[s].equals2D(r)&&s!==n);var u=t[a],l=t[s];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var c=SG.index(u,r,l);return 0===c?u.x>l.x:c>0}getClass(){return SG}get interfaces_(){return[]}}SG.constructor_=function(){},SG.CLOCKWISE=-1,SG.RIGHT=SG.CLOCKWISE,SG.COUNTERCLOCKWISE=1,SG.LEFT=SG.COUNTERCLOCKWISE,SG.COLLINEAR=0,SG.STRAIGHT=SG.COLLINEAR;class OG{constructor(){OG.constructor_.apply(this,arguments)}getClass(){return OG}get interfaces_(){return[]}}OG.constructor_=function(){};class TG extends dD{constructor(){super(),TG.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t}getArea(){var t=0;t+=_G.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=_G.ofRing(this._holes[e].getCoordinateSequence());return t}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){if((o=t.getX(r))!==e.getMinX()&&o!==e.getMaxX())return!1;if((a=t.getY(r))!==e.getMinY()&&a!==e.getMaxY())return!1}var n=t.getX(0),i=t.getY(0);for(r=1;r<=4;r++){var o,a;if((o=t.getX(r))!==n===((a=t.getY(r))!==i))return!1;n=o,i=a}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var t=i,e=this._shell,r=t._shell;if(!e.equalsExact(r,o))return!1;if(this._holes.length!==t._holes.length)return!1;for(var n=0;n<this._holes.length;n++)if(!this._holes[n].equalsExact(t._holes[n],o))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);JD.sort(this._holes)}else if(2===arguments.length){let t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var e=new Array(t.getCoordinates().length-1).fill(null);LD.arraycopy(t.getCoordinates(),0,e,0,e.length);var r=kD.minCoordinate(t.getCoordinates());kD.scroll(e,r),LD.arraycopy(e,0,t.getCoordinates(),0,e.length),t.getCoordinates()[e.length]=e[0],SG.isCCW(t.getCoordinates())===n&&kD.reverse(t.getCoordinates())}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getTypeCode(){return dD.TYPECODE_POLYGON}getDimension(){return 2}getLength(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}reverse(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t}convexHull(){return this.getExteriorRing().convexHull()}compareToSameClass(){if(1===arguments.length){let r=arguments[0];var t=this._shell,e=r._shell;return t.compareToSameClass(e)}if(2===arguments.length){let c=arguments[0],h=arguments[1];var r=c,n=(t=this._shell,e=r._shell,t.compareToSameClass(e,h));if(0!==n)return n;for(var i=this.getNumInteriorRing(),o=r.getNumInteriorRing(),a=0;a<i&&a<o;){var s=this.getInteriorRingN(a),u=r.getInteriorRingN(a),l=s.compareToSameClass(u,h);if(0!==l)return l;a++}return a<i?1:a<o?-1:0}}apply(){if(Kj(arguments[0],yD)){let e=arguments[0];this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(Kj(arguments[0],rG)){let e=arguments[0];if(this._shell.apply(e),!e.isDone())for(t=0;t<this._holes.length&&(this._holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(Kj(arguments[0],eG)){arguments[0].filter(this)}else if(Kj(arguments[0],eD)){let e=arguments[0];e.filter(this),this._shell.apply(e);for(t=0;t<this._holes.length;t++)this._holes[t].apply(e)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return dD.TYPENAME_POLYGON}copy(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),r=0;r<this._holes.length;r++)e[r]=this._holes[r].copy();return new TG(t,e,this._factory)}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}getClass(){return TG}get interfaces_(){return[OG]}}TG.constructor_=function(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],r=arguments[2];if(dD.constructor_.call(this,r),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),dD.hasNullElements(e))throw new tD("holes must not contain null elements");if(t.isEmpty()&&dD.hasNonEmptyElements(e))throw new tD("shell is empty but holes are not");this._shell=t,this._holes=e},TG.serialVersionUID=-0x307ffefd8dc97200;class MG extends nG{constructor(){super(),MG.constructor_.apply(this,arguments)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){let t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return tG.FALSE}getTypeCode(){return dD.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return dD.TYPENAME_MULTIPOINT}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new MG(t,this._factory)}getClass(){return MG}get interfaces_(){return[mG]}}MG.constructor_=function(){let t=arguments[0],e=arguments[1];nG.constructor_.call(this,t,e)},MG.serialVersionUID=-0x6fb1ed4162e0fc00;class IG extends gG{constructor(){super(),IG.constructor_.apply(this,arguments)}getBoundaryDimension(){return tG.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}getTypeCode(){return dD.TYPECODE_LINEARRING}reverse(){var t=this._points.copy();return yG.reverse(t),this.getFactory().createLinearRing(t)}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new tD("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<IG.MINIMUM_VALID_SIZE)throw new tD("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return dD.TYPENAME_LINEARRING}copy(){return new IG(this._points.copy(),this._factory)}getClass(){return IG}get interfaces_(){return[]}}IG.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof YG){let t=arguments[0],e=arguments[1];IG.constructor_.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(Kj(arguments[0],Jj)&&arguments[1]instanceof YG){let t=arguments[0],e=arguments[1];gG.constructor_.call(this,t,e),this.validateConstruction()}},IG.MINIMUM_VALID_SIZE=4,IG.serialVersionUID=-0x3b229e262367a600;class PG extends nG{constructor(){super(),PG.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dD){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return dD.TYPECODE_MULTIPOLYGON}getDimension(){return 2}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new MD,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}getGeometryType(){return dD.TYPENAME_MULTIPOLYGON}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new PG(t,this._factory)}getClass(){return PG}get interfaces_(){return[OG]}}PG.constructor_=function(){let t=arguments[0],e=arguments[1];nG.constructor_.call(this,t,e)},PG.serialVersionUID=-0x7a5aa1369171980;class CG{constructor(){CG.constructor_.apply(this,arguments)}setCopyUserData(t){this._isUserDataCopied=t}edit(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r}editInternal(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof nG?this.editGeometryCollection(t,e):t instanceof TG?this.editPolygon(t,e):t instanceof vG?e.edit(t,this._factory):t instanceof gG?e.edit(t,this._factory):(cD.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)}editGeometryCollection(t,e){for(var r=e.edit(t,this._factory),n=new MD,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===MG?this._factory.createMultiPoint(n.toArray([])):r.getClass()===iG?this._factory.createMultiLineString(n.toArray([])):r.getClass()===PG?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))}editPolygon(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon()),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new MD,o=0;o<r.getNumInteriorRing();o++){var a=this.edit(r.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(n,i.toArray([]))}getClass(){return CG}get interfaces_(){return[]}}function LG(){}CG.GeometryEditorOperation=LG;class kG{constructor(){kG.constructor_.apply(this,arguments)}edit(t,e){return t}getClass(){return kG}get interfaces_(){return[LG]}}kG.constructor_=function(){};class RG{constructor(){RG.constructor_.apply(this,arguments)}edit(t,e){var r=this.edit(t.getCoordinates(),t);return t instanceof IG?null===r?e.createLinearRing():e.createLinearRing(r):t instanceof gG?null===r?e.createLineString():e.createLineString(r):t instanceof vG?null===r||0===r.length?e.createPoint():e.createPoint(r[0]):t}getClass(){return RG}get interfaces_(){return[LG]}}RG.constructor_=function(){};class AG{constructor(){AG.constructor_.apply(this,arguments)}edit(t,e){return t instanceof IG?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof gG?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof vG?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t}getClass(){return AG}get interfaces_(){return[LG]}}AG.constructor_=function(){},CG.NoOpGeometryOperation=kG,CG.CoordinateOperation=RG,CG.CoordinateSequenceOperation=AG,CG.constructor_=function(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._factory=t}};class NG{constructor(){NG.constructor_.apply(this,arguments)}setOrdinate(t,e,r){switch(e){case Jj.X:this._coordinates[t].x=r;break;case Jj.Y:this._coordinates[t].y=r;break;case Jj.Z:this._coordinates[t].z=r;break;default:throw new tD("invalid ordinateIndex")}}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case Jj.X:return this._coordinates[t].x;case Jj.Y:return this._coordinates[t].y;case Jj.Z:return this._coordinates[t].z}return aD.NaN}getCoordinate(){if(1===arguments.length){let t=arguments[0];return this._coordinates[t]}if(2===arguments.length){let t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}}getCoordinateCopy(t){return new hD(this._coordinates[t])}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}expandEnvelope(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new NG(t,this._dimension)}toString(){if(this._coordinates.length>0){var t=new dG(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}getClass(){return NG}get interfaces_(){return[Jj,nD]}}NG.constructor_=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];NG.constructor_.call(this,t,3)}else if(Number.isInteger(arguments[0])){let e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new hD}else if(Kj(arguments[0],Jj)){let e=arguments[0];if(null===e)return this._coordinates=new Array(0).fill(null),null;this._dimension=e.getDimension(),this._coordinates=new Array(e.size()).fill(null);for(t=0;t<this._coordinates.length;t++)this._coordinates[t]=e.getCoordinateCopy(t)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1];this._coordinates=t,this._dimension=e,null===t&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let e=arguments[0],r=arguments[1];this._coordinates=new Array(e).fill(null),this._dimension=r;for(t=0;t<e;t++)this._coordinates[t]=new hD}},NG.serialVersionUID=-0xcb44a778db18e00;class FG{constructor(){FG.constructor_.apply(this,arguments)}static instance(){return FG.instanceObject}readResolve(){return FG.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return new NG(t)}if(Kj(arguments[0],Jj)){let t=arguments[0];return new NG(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new NG(t):new NG(t,e)}}getClass(){return FG}get interfaces_(){return[Qj,nD]}}FG.constructor_=function(){},FG.serialVersionUID=-0x38e49fa6cf6f2e00,FG.instanceObject=new FG;var jG=Object.defineProperty;var DG=function(t,e){function r(t){if(!this||this.constructor!==r)return new r(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t)}e||jG(t,"size",{get:BG});return t.constructor=r,r.prototype=t,r}({delete:function(t){this.has(t)&&(this._keys.splice(KD,1),this._values.splice(KD,1),this._itp.forEach(function(t){KD<t[0]&&t[0]--}));return KD>-1},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(KD=t.length;KD--&&(r=t[KD],n=e,r!==n&&(r==r||n==n)););else KD=t.indexOf(e);var r,n;return KD>-1}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[KD]:void 0},set:function(t,e){return this.has(t)?this._values[KD]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return GG(this._itp,this._keys)},values:function(){return GG(this._itp,this._values)},entries:function(){return GG(this._itp,this._keys,this._values)},forEach:function(t,e){for(var r=this.entries();;){var n=r.next();if(n.done)break;t.call(e,n.value[1],n.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}});function GG(t,e,r){var n=[0],i=!1;return t.push(n),{next:function(){var o,a=n[0];return!i&&a<e.length?(o=r?[e[a],r[a]]:e[a],n[0]++):(i=!0,t.splice(t.indexOf(n),1)),{done:i,value:o}}}}function BG(){return this._values.length}let zG="undefined"!=typeof Map&&Map.prototype.values?Map:DG;function UG(){this.map_=new zG}UG.prototype=new ND,UG.prototype.get=function(t){return this.map_.get(t)||null},UG.prototype.put=function(t,e){return this.map_.set(t,e),e},UG.prototype.values=function(){const t=new MD,e=this.map_.values();let r=e.next();for(;!r.done;)t.add(r.value),r=e.next();return t},UG.prototype.entrySet=function(){const t=new DD;return this.map_.entries().forEach(e=>t.add(e)),t},UG.prototype.size=function(){return this.map_.size()};class qG{constructor(){qG.constructor_.apply(this,arguments)}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof qG))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new wG(r).compareTo(new wG(n))}getScale(){return this._scale}isFloating(){return this._modelType===qG.FLOATING||this._modelType===qG.FLOATING_SINGLE}getType(){return this._modelType}toString(){var t="UNKNOWN";return this._modelType===qG.FLOATING?t="Floating":this._modelType===qG.FLOATING_SINGLE?t="Floating-Single":this._modelType===qG.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){let t=arguments[0];return aD.isNaN(t)?t:this._modelType===qG.FLOATING_SINGLE?t:this._modelType===qG.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof hD){let t=arguments[0];if(this._modelType===qG.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){var t=16;return this._modelType===qG.FLOATING?t=16:this._modelType===qG.FLOATING_SINGLE?t=6:this._modelType===qG.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}getClass(){return qG}get interfaces_(){return[nD,rD]}}class VG{constructor(){VG.constructor_.apply(this,arguments)}readResolve(){return VG.nameToTypeMap.get(this._name)}toString(){return this._name}getClass(){return VG}get interfaces_(){return[nD]}}VG.constructor_=function(){this._name=null;let t=arguments[0];this._name=t,VG.nameToTypeMap.put(t,this)},VG.serialVersionUID=-552860263173159e4,VG.nameToTypeMap=new UG,qG.Type=VG,qG.constructor_=function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=qG.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof VG){let t=arguments[0];this._modelType=t,t===qG.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){let t=arguments[0];this._modelType=qG.FIXED,this.setScale(t)}else if(arguments[0]instanceof qG){let t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}},qG.serialVersionUID=0x6bee6404e9a25c00,qG.FIXED=new VG("FIXED"),qG.FLOATING=new VG("FLOATING"),qG.FLOATING_SINGLE=new VG("FLOATING SINGLE"),qG.maximumPreciseValue=9007199254740992;class YG{constructor(){YG.constructor_.apply(this,arguments)}static toMultiPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return FG.instance()}static toMultiLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new hD(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new hD(t.getMinX(),t.getMinY()),new hD(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new hD(t.getMinX(),t.getMinY()),new hD(t.getMinX(),t.getMaxY()),new hD(t.getMaxX(),t.getMaxY()),new hD(t.getMaxX(),t.getMinY()),new hD(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Kj(arguments[0],Jj)){let t=arguments[0];return new gG(t,this)}}}createMultiLineString(){if(0===arguments.length)return new iG(null,this);if(1===arguments.length){let t=arguments[0];return new iG(t,this)}}buildGeometry(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(r=!0),o instanceof nG&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(YG.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof TG)return this.createMultiPolygon(YG.toPolygonArray(t));if(s instanceof gG)return this.createMultiLineString(YG.toLineStringArray(t));if(s instanceof vG)return this.createMultiPoint(YG.toPointArray(t));cD.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof hD){let t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Kj(arguments[0],Jj)){let t=arguments[0];return new vG(t,this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(Kj(arguments[0],Jj)){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof IG){let t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return new TG(t,e,this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new nG(null,this);if(1===arguments.length){let t=arguments[0];return new nG(t,this)}}createGeometry(t){return new CG(this).edit(t,new class{edit(){if(2===arguments.length&&arguments[1]instanceof dD&&Kj(arguments[0],Jj)){let t=arguments[0];arguments[1];return this._coordinateSequenceFactory.create(t)}}})}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Kj(arguments[0],Jj)){let t=arguments[0];return new IG(t,this)}}}createMultiPolygon(){if(0===arguments.length)return new PG(null,this);if(1===arguments.length){let t=arguments[0];return new PG(t,this)}}createMultiPoint(){if(0===arguments.length)return new MG(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return new MG(t,this)}if(Kj(arguments[0],Jj)){let n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(n.size()).fill(null),e=0;e<n.size();e++){var r=this.getCoordinateSequenceFactory().create(1,n.getDimension());yG.copy(n,e,r,0,1),t[e]=this.createPoint(r)}return this.createMultiPoint(t)}}}getClass(){return YG}get interfaces_(){return[nD]}}YG.constructor_=function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)YG.constructor_.call(this,new qG,0);else if(1===arguments.length){if(Kj(arguments[0],Qj)){let t=arguments[0];YG.constructor_.call(this,new qG,0,t)}else if(arguments[0]instanceof qG){let t=arguments[0];YG.constructor_.call(this,t,0,YG.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];YG.constructor_.call(this,t,e,YG.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=r,this._SRID=e}},YG.serialVersionUID=-0x5ea75f2051eeb400;const WG=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class XG{constructor(t){this.geometryFactory=t||new YG}read(t){let e;const r=(e="string"==typeof t?JSON.parse(t):t).type;if(!ZG[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==WG.indexOf(r)?ZG[r].call(this,e.coordinates):"GeometryCollection"===r?ZG[r].call(this,e.geometries):ZG[r].call(this,e)}write(t){const e=t.getGeometryType();if(!HG[e])throw new Error("Geometry is not supported");return HG[e].call(this,t)}}const ZG={Feature:function(t){const e={};for(let r in t)e[r]=t[r];if(t.geometry){const r=t.geometry.type;if(!ZG[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ZG.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(new hD(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new hD(t[0],t[1]),new hD(t[2],t[1]),new hD(t[2],t[3]),new hD(t[0],t[3]),new hD(t[0],t[1])])},Point:function(t){const e=new hD(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(ZG.Point.call(this,t[r]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=ZG.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(ZG.LineString.call(this,t[r]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=ZG.coordinates.call(this,t[0]),r=this.geometryFactory.createLinearRing(e),n=[];for(let e=1;e<t.length;++e){var i=t[e],o=ZG.coordinates.call(this,i),a=this.geometryFactory.createLinearRing(o);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(ZG.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},HG={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:HG.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=HG.Point.call(this,n);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],r=t.getCoordinates();for(let t=0;t<r.length;++t){const n=r[t];e.push(HG.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=HG.LineString.call(this,n);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],r=HG.LineString.call(this,t._shell);e.push(r.coordinates);for(let r=0;r<t._holes.length;++r){const n=t._holes[r],i=HG.LineString.call(this,n);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=HG.Polygon.call(this,n);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=n.getGeometryType();e.push(HG[i].call(this,n))}return{type:"GeometryCollection",geometries:e}}};class KG{constructor(t){this.parser=new XG(t||new YG)}read(t){return this.parser.read(t)}}const $G={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};class JG{constructor(t){this.geometryFactory=t||new YG,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=$G.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=$G.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],tB[r]&&(e=tB[r].call(this,n))),void 0===e)throw new Error("Could not parse WKT "+t);return e}write(t){return this.extractGeometry(t)}extractGeometry(t){var e=t.getGeometryType().toLowerCase();if(!QG[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+QG[e].call(this,t)+")"}}const QG={coordinate:t=>t.x+" "+t.y,point(t){return QG.coordinate.call(this,t._coordinates._coordinates[0])},multipoint(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+QG.point.call(this,t._geometries[r])+")");return e.join(",")},linestring(t){var e=[];for(let r=0,n=t._points._coordinates.length;r<n;++r)e.push(QG.coordinate.call(this,t._points._coordinates[r]));return e.join(",")},linearring(t){var e=[];for(let r=0,n=t._points._coordinates.length;r<n;++r)e.push(QG.coordinate.call(this,t._points._coordinates[r]));return e.join(",")},multilinestring(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+QG.linestring.call(this,t._geometries[r])+")");return e.join(",")},polygon(t){var e=[];e.push("("+QG.linestring.call(this,t._shell)+")");for(let r=0,n=t._holes.length;r<n;++r)e.push("("+QG.linestring.call(this,t._holes[r])+")");return e.join(",")},multipolygon(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+QG.polygon.call(this,t._geometries[r])+")");return e.join(",")},geometrycollection(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},tB={coord(t){var e=t.trim().split($G.spaces),r=new hD(Number.parseFloat(e[0]),Number.parseFloat(e[1]));return this.precisionModel.makePrecise(r),r},point(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(tB.coord.call(this,t))},multipoint(t){if(void 0===t)return this.geometryFactory.createMultiPoint();var e,r=t.trim().split(","),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace($G.trimParens,"$1"),n.push(tB.point.call(this,e));return this.geometryFactory.createMultiPoint(n)},linestring(t){if(void 0===t)return this.geometryFactory.createLineString();var e=t.trim().split(","),r=[];for(let t=0,n=e.length;t<n;++t)r.push(tB.coord.call(this,e[t]));return this.geometryFactory.createLineString(r)},linearring(t){if(void 0===t)return this.geometryFactory.createLinearRing();var e=t.trim().split(","),r=[];for(let t=0,n=e.length;t<n;++t)r.push(tB.coord.call(this,e[t]));return this.geometryFactory.createLinearRing(r)},multilinestring(t){if(void 0===t)return this.geometryFactory.createMultiLineString();var e,r=t.trim().split($G.parenComma),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace($G.trimParens,"$1"),n.push(tB.linestring.call(this,e));return this.geometryFactory.createMultiLineString(n)},polygon(t){if(void 0===t)return this.geometryFactory.createPolygon();var e,r,n,i,o=t.trim().split($G.parenComma),a=[];for(let t=0,s=o.length;t<s;++t)e=o[t].replace($G.trimParens,"$1"),r=tB.linestring.call(this,e),n=this.geometryFactory.createLinearRing(r._points),0===t?i=n:a.push(n);return this.geometryFactory.createPolygon(i,a)},multipolygon(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();var e,r=t.trim().split($G.doubleParenComma),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace($G.trimParens,"$1"),n.push(tB.polygon.call(this,e));return this.geometryFactory.createMultiPolygon(n)},geometrycollection(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[];for(let t=0,n=e.length;t<n;++t)r.push(this.read(e[t]));return this.geometryFactory.createGeometryCollection(r)}};class eB{constructor(t){this.parser=new JG(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class rB{constructor(){rB.constructor_.apply(this,arguments)}static toLocationSymbol(t){switch(t){case rB.EXTERIOR:return"e";case rB.BOUNDARY:return"b";case rB.INTERIOR:return"i";case rB.NONE:return"-"}throw new tD("Unknown location value: "+t)}getClass(){return rB}get interfaces_(){return[]}}function nB(){}rB.constructor_=function(){},rB.INTERIOR=0,rB.BOUNDARY=1,rB.EXTERIOR=2,rB.NONE=-1;class iB extends nB{constructor(){super(),iB.constructor_.apply(this,arguments)}getClass(){return iB}get interfaces_(){return[]}}iB.constructor_=function(){nB.constructor_.call(this,"Projective point not representable on the Cartesian plane.")};class oB{constructor(){oB.constructor_.apply(this,arguments)}static intersection(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=r.y-n.y,u=n.x-r.x,l=r.x*n.y-n.x*r.y,c=i*u-s*o,h=(o*l-u*a)/c,f=(s*a-i*l)/c;if(aD.isNaN(h)||aD.isInfinite(h)||aD.isNaN(f)||aD.isInfinite(f))throw new iB;return new hD(h,f)}getY(){var t=this.y/this.w;if(aD.isNaN(t)||aD.isInfinite(t))throw new iB;return t}getX(){var t=this.x/this.w;if(aD.isNaN(t)||aD.isInfinite(t))throw new iB;return t}getCoordinate(){var t=new hD;return t.x=this.getX(),t.y=this.getY(),t}getClass(){return oB}get interfaces_(){return[]}}oB.constructor_=function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){let t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];this.x=t,this.y=e,this.w=1}else if(arguments[0]instanceof oB&&arguments[1]instanceof oB){let t=arguments[0],e=arguments[1];this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y}else if(arguments[0]instanceof hD&&arguments[1]instanceof hD){let t=arguments[0],e=arguments[1];this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.w=r}else if(4===arguments.length){let a=arguments[0],s=arguments[1],u=arguments[2],l=arguments[3];var t=a.y-s.y,e=s.x-a.x,r=a.x*s.y-s.x*a.y,n=u.y-l.y,i=l.x-u.x,o=u.x*l.y-l.x*u.y;this.x=e*o-i*r,this.y=n*r-t*o,this.w=t*i-n*e}};class aB{constructor(){aB.constructor_.apply(this,arguments)}static segmentToSegment(t,e,r,n){if(t.equals(e))return aB.pointToSegment(t,r,n);if(r.equals(n))return aB.pointToSegment(n,t,e);var i=!1;if(pD.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var a=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),s=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?CD.min(aB.pointToSegment(t,r,n),aB.pointToSegment(e,r,n),aB.pointToSegment(r,t,e),aB.pointToSegment(n,t,e)):0}static pointToSegment(t,e,r){if(e.x===r.x&&e.y===r.y)return t.distance(e);var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;if(i<=0)return t.distance(e);if(i>=1)return t.distance(r);var o=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)}static pointToSegmentString(t,e){if(0===e.length)throw new tD("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=aB.pointToSegment(t,e[n],e[n+1]);i<r&&(r=i)}return r}getClass(){return aB}get interfaces_(){return[]}}aB.constructor_=function(){};class sB{constructor(){sB.constructor_.apply(this,arguments)}static computeEdgeDistance(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=n>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return cD.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return cD.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){var t=new dG;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){let t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){let e=arguments[0];for(var t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==sB.NO_INTERSECTION}getEdgeDistance(t,e){return sB.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===sB.COLLINEAR_INTERSECTION}toString(){return eB.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+eB.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}getClass(){return sB}get interfaces_(){return[]}}sB.constructor_=function(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new hD,this._intPt[1]=new hD,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},sB.DONT_INTERSECT=0,sB.DO_INTERSECT=1,sB.COLLINEAR=2,sB.NO_INTERSECTION=0,sB.POINT_INTERSECTION=1,sB.COLLINEAR_INTERSECTION=2;class uB extends sB{constructor(){super(),uB.constructor_.apply(this,arguments)}static nearestEndpoint(t,e,r,n){var i=t,o=aB.pointToSegment(t,r,n),a=aB.pointToSegment(e,r,n);return a<o&&(o=a,i=e),(a=aB.pointToSegment(r,t,e))<o&&(o=a,i=r),(a=aB.pointToSegment(n,t,e))<o&&(o=a,i=n),i}isInSegmentEnvelopes(t){var e=new pD(this._inputLines[0][0],this._inputLines[0][1]),r=new pD(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{let t=arguments[0],e=arguments[1],r=arguments[2];if(this._isProper=!1,pD.intersects(e,r,t)&&0===SG.index(e,r,t)&&0===SG.index(r,e,t))return this._isProper=!0,(t.equals(e)||t.equals(r))&&(this._isProper=!1),this._result=sB.POINT_INTERSECTION,null;this._result=sB.NO_INTERSECTION}}normalizeToMinimum(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y}safeHCoordinateIntersection(t,e,r,n){var i=null;try{i=oB.intersection(t,e,r,n)}catch(o){if(!(o instanceof iB))throw o;i=uB.nearestEndpoint(t,e,r,n)}return i}intersection(t,e,r,n){var i=this.intersectionWithNormalization(t,e,r,n);return this.isInSegmentEnvelopes(i)||(i=new hD(uB.nearestEndpoint(t,e,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}smallestInAbsValue(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i}checkDD(t,e,r,n,i){var o=EG.intersection(t,e,r,n),a=this.isInSegmentEnvelopes(o);LD.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&LD.out.println("Distance = "+i.distance(o))}intersectionWithNormalization(t,e,r,n){var i=new hD(t),o=new hD(e),a=new hD(r),s=new hD(n),u=new hD;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l}computeCollinearIntersection(t,e,r,n){var i=pD.intersects(t,e,r),o=pD.intersects(t,e,n),a=pD.intersects(r,n,t),s=pD.intersects(r,n,e);return i&&o?(this._intPt[0]=r,this._intPt[1]=n,sB.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,sB.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||s?sB.COLLINEAR_INTERSECTION:sB.POINT_INTERSECTION):i&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||a?sB.COLLINEAR_INTERSECTION:sB.POINT_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||i||s?sB.COLLINEAR_INTERSECTION:sB.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||i||a?sB.COLLINEAR_INTERSECTION:sB.POINT_INTERSECTION):sB.NO_INTERSECTION}normalizeToEnvCentre(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y}computeIntersect(t,e,r,n){if(this._isProper=!1,!pD.intersects(t,e,r,n))return sB.NO_INTERSECTION;var i=SG.index(t,e,r),o=SG.index(t,e,n);if(i>0&&o>0||i<0&&o<0)return sB.NO_INTERSECTION;var a=SG.index(r,n,t),s=SG.index(r,n,e);return a>0&&s>0||a<0&&s<0?sB.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,r,n):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(r)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:0===i?this._intPt[0]=new hD(r):0===o?this._intPt[0]=new hD(n):0===a?this._intPt[0]=new hD(t):0===s&&(this._intPt[0]=new hD(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,r,n)),sB.POINT_INTERSECTION)}getClass(){return uB}get interfaces_(){return[]}}uB.constructor_=function(){};class lB{constructor(){lB.constructor_.apply(this,arguments)}static locatePointInRing(){if(arguments[0]instanceof hD&&Kj(arguments[1],Jj)){let i=arguments[0],o=arguments[1];for(var t=new lB(i),e=new hD,r=new hD,n=1;n<o.size();n++)if(o.getCoordinate(n,e),o.getCoordinate(n-1,r),t.countSegment(e,r),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof hD&&arguments[1]instanceof Array){let i=arguments[0],o=arguments[1];for(t=new lB(i),n=1;n<o.length;n++){e=o[n],r=o[n-1];if(t.countSegment(e,r),t.isOnSegment())return t.getLocation()}return t.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=SG.index(t,e,this._p);if(i===SG.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===SG.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==rB.EXTERIOR}getLocation(){return this._isPointOnSegment?rB.BOUNDARY:this._crossingCount%2==1?rB.INTERIOR:rB.EXTERIOR}isOnSegment(){return this._isPointOnSegment}getClass(){return lB}get interfaces_(){return[]}}lB.constructor_=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;let t=arguments[0];this._p=t};class cB{constructor(){cB.constructor_.apply(this,arguments)}static isOnLine(){if(arguments[0]instanceof hD&&Kj(arguments[1],Jj)){let o=arguments[0],a=arguments[1];for(var t=new uB,e=new hD,r=new hD,n=a.size(),i=1;i<n;i++)if(a.getCoordinate(i-1,e),a.getCoordinate(i,r),t.computeIntersection(o,e,r),t.hasIntersection())return!0;return!1}if(arguments[0]instanceof hD&&arguments[1]instanceof Array){let n=arguments[0],o=arguments[1];for(t=new uB,i=1;i<o.length;i++){e=o[i-1],r=o[i];if(t.computeIntersection(n,e,r),t.hasIntersection())return!0}return!1}}static locateInRing(t,e){return lB.locatePointInRing(t,e)}static isInRing(t,e){return cB.locateInRing(t,e)!==rB.EXTERIOR}getClass(){return cB}get interfaces_(){return[]}}cB.constructor_=function(){};class hB{constructor(){hB.constructor_.apply(this,arguments)}static isAtomic(t){return!(t instanceof nG)}next(){if(this._atStart)return this._atStart=!1,hB.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new OD;var t=this._parent.getGeometryN(this._index++);return t instanceof nG?(this._subcollectionIterator=new hB(t),this._subcollectionIterator.next()):t}remove(){throw new UnsupportedOperationException(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}getClass(){return hB}get interfaces_(){return[wD]}}hB.constructor_=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;let t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};class fB{constructor(){fB.constructor_.apply(this,arguments)}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?cB.locateInRing(t,e.getCoordinates()):rB.EXTERIOR}intersects(t,e){return this.locate(t,e)!==rB.EXTERIOR}updateLocationInfo(t){t===rB.INTERIOR&&(this._isIn=!0),t===rB.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof vG&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof gG)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof TG)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof iG)for(var r=e,n=0;n<r.getNumGeometries();n++){var i=r.getGeometryN(n);this.updateLocationInfo(this.locateOnLineString(t,i))}else if(e instanceof PG){var o=e;for(n=0;n<o.getNumGeometries();n++){var a=o.getGeometryN(n);this.updateLocationInfo(this.locateInPolygon(t,a))}}else if(e instanceof nG)for(var s=new hB(e);s.hasNext();){var u=s.next();u!==e&&this.computeLocation(t,u)}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?rB.INTERIOR:rB.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return rB.EXTERIOR;var r=e.getCoordinateSequence();return e.isClosed()||!t.equals(r.getCoordinate(0))&&!t.equals(r.getCoordinate(r.size()-1))?cB.isOnLine(t,r)?rB.INTERIOR:rB.EXTERIOR:rB.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return rB.EXTERIOR;var r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===rB.EXTERIOR)return rB.EXTERIOR;if(n===rB.BOUNDARY)return rB.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===rB.INTERIOR)return rB.EXTERIOR;if(a===rB.BOUNDARY)return rB.BOUNDARY}return rB.INTERIOR}locate(t,e){return e.isEmpty()?rB.EXTERIOR:e instanceof gG?this.locateOnLineString(t,e):e instanceof TG?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?rB.BOUNDARY:this._numBoundaries>0||this._isIn?rB.INTERIOR:rB.EXTERIOR)}getClass(){return fB}get interfaces_(){return[]}}fB.constructor_=function(){if(this._boundaryRule=gD.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){let t=arguments[0];if(null===t)throw new tD("Rule must be non-null");this._boundaryRule=t}};class pB{constructor(){pB.constructor_.apply(this,arguments)}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return e===tG.SYM_DONTCARE||(e===tG.SYM_TRUE&&(t>=0||t===tG.TRUE)||(e===tG.SYM_FALSE&&t===tG.FALSE||(e===tG.SYM_P&&t===tG.P||(e===tG.SYM_L&&t===tG.L||e===tG.SYM_A&&t===tG.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return new pB(t).matches(e)}}static isTrue(t){return t>=0||t===tG.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])||pB.isTrue(this._matrix[rB.INTERIOR][rB.BOUNDARY])||pB.isTrue(this._matrix[rB.BOUNDARY][rB.INTERIOR])||pB.isTrue(this._matrix[rB.BOUNDARY][rB.BOUNDARY]))&&this._matrix[rB.EXTERIOR][rB.INTERIOR]===tG.FALSE&&this._matrix[rB.EXTERIOR][rB.BOUNDARY]===tG.FALSE}isCoveredBy(){return(pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])||pB.isTrue(this._matrix[rB.INTERIOR][rB.BOUNDARY])||pB.isTrue(this._matrix[rB.BOUNDARY][rB.INTERIOR])||pB.isTrue(this._matrix[rB.BOUNDARY][rB.BOUNDARY]))&&this._matrix[rB.INTERIOR][rB.EXTERIOR]===tG.FALSE&&this._matrix[rB.BOUNDARY][rB.EXTERIOR]===tG.FALSE}set(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<n.length;t++){var e=Math.trunc(t/3),r=t%3;this._matrix[e][r]=tG.toDimensionValue(n.charAt(t))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]=r}}isContains(){return pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])&&this._matrix[rB.EXTERIOR][rB.INTERIOR]===tG.FALSE&&this._matrix[rB.EXTERIOR][rB.BOUNDARY]===tG.FALSE}setAtLeast(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<n.length;t++){var e=Math.trunc(t/3),r=t%3;this.setAtLeast(e,r,tG.toDimensionValue(n.charAt(t)))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]<r&&(this._matrix[t][e]=r)}}setAtLeastIfValid(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)}isWithin(){return pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])&&this._matrix[rB.INTERIOR][rB.EXTERIOR]===tG.FALSE&&this._matrix[rB.BOUNDARY][rB.EXTERIOR]===tG.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===tG.A&&e===tG.A||t===tG.L&&e===tG.L||t===tG.L&&e===tG.A||t===tG.P&&e===tG.A||t===tG.P&&e===tG.L)&&(this._matrix[rB.INTERIOR][rB.INTERIOR]===tG.FALSE&&(pB.isTrue(this._matrix[rB.INTERIOR][rB.BOUNDARY])||pB.isTrue(this._matrix[rB.BOUNDARY][rB.INTERIOR])||pB.isTrue(this._matrix[rB.BOUNDARY][rB.BOUNDARY])))}isOverlaps(t,e){return t===tG.P&&e===tG.P||t===tG.A&&e===tG.A?pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])&&pB.isTrue(this._matrix[rB.INTERIOR][rB.EXTERIOR])&&pB.isTrue(this._matrix[rB.EXTERIOR][rB.INTERIOR]):t===tG.L&&e===tG.L&&(1===this._matrix[rB.INTERIOR][rB.INTERIOR]&&pB.isTrue(this._matrix[rB.INTERIOR][rB.EXTERIOR])&&pB.isTrue(this._matrix[rB.EXTERIOR][rB.INTERIOR]))}isEquals(t,e){return t===e&&(pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])&&this._matrix[rB.INTERIOR][rB.EXTERIOR]===tG.FALSE&&this._matrix[rB.BOUNDARY][rB.EXTERIOR]===tG.FALSE&&this._matrix[rB.EXTERIOR][rB.INTERIOR]===tG.FALSE&&this._matrix[rB.EXTERIOR][rB.BOUNDARY]===tG.FALSE)}toString(){for(var t=new dG("123456789"),e=0;e<3;e++)for(var r=0;r<3;r++)t.setCharAt(3*e+r,tG.toDimensionSymbol(this._matrix[e][r]));return t.toString()}setAll(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this._matrix[e][r]=t}get(t,e){return this._matrix[t][e]}transpose(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new tD("Should be length 9: "+t);for(var e=0;e<3;e++)for(var r=0;r<3;r++)if(!pB.matches(this._matrix[e][r],t.charAt(3*e+r)))return!1;return!0}add(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this.setAtLeast(e,r,t.get(e,r))}isDisjoint(){return this._matrix[rB.INTERIOR][rB.INTERIOR]===tG.FALSE&&this._matrix[rB.INTERIOR][rB.BOUNDARY]===tG.FALSE&&this._matrix[rB.BOUNDARY][rB.INTERIOR]===tG.FALSE&&this._matrix[rB.BOUNDARY][rB.BOUNDARY]===tG.FALSE}isCrosses(t,e){return t===tG.P&&e===tG.L||t===tG.P&&e===tG.A||t===tG.L&&e===tG.A?pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])&&pB.isTrue(this._matrix[rB.INTERIOR][rB.EXTERIOR]):t===tG.L&&e===tG.P||t===tG.A&&e===tG.P||t===tG.A&&e===tG.L?pB.isTrue(this._matrix[rB.INTERIOR][rB.INTERIOR])&&pB.isTrue(this._matrix[rB.EXTERIOR][rB.INTERIOR]):t===tG.L&&e===tG.L&&0===this._matrix[rB.INTERIOR][rB.INTERIOR]}getClass(){return pB}get interfaces_(){return[$j]}}pB.constructor_=function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(tG.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){let t=arguments[0];pB.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof pB){let t=arguments[0];pB.constructor_.call(this),this._matrix[rB.INTERIOR][rB.INTERIOR]=t._matrix[rB.INTERIOR][rB.INTERIOR],this._matrix[rB.INTERIOR][rB.BOUNDARY]=t._matrix[rB.INTERIOR][rB.BOUNDARY],this._matrix[rB.INTERIOR][rB.EXTERIOR]=t._matrix[rB.INTERIOR][rB.EXTERIOR],this._matrix[rB.BOUNDARY][rB.INTERIOR]=t._matrix[rB.BOUNDARY][rB.INTERIOR],this._matrix[rB.BOUNDARY][rB.BOUNDARY]=t._matrix[rB.BOUNDARY][rB.BOUNDARY],this._matrix[rB.BOUNDARY][rB.EXTERIOR]=t._matrix[rB.BOUNDARY][rB.EXTERIOR],this._matrix[rB.EXTERIOR][rB.INTERIOR]=t._matrix[rB.EXTERIOR][rB.INTERIOR],this._matrix[rB.EXTERIOR][rB.BOUNDARY]=t._matrix[rB.EXTERIOR][rB.BOUNDARY],this._matrix[rB.EXTERIOR][rB.EXTERIOR]=t._matrix[rB.EXTERIOR][rB.EXTERIOR]}};class dB{constructor(){dB.constructor_.apply(this,arguments)}static isNorthern(t){return t===dB.NE||t===dB.NW}static isOpposite(t,e){return t!==e&&2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r}static isInHalfPlane(t,e){return e===dB.SE?t===dB.SE||t===dB.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new tD("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?dB.NE:dB.SE:e>=0?dB.NW:dB.SW}if(arguments[0]instanceof hD&&arguments[1]instanceof hD){let t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new tD("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?dB.NE:dB.SE:e.y>=t.y?dB.NW:dB.SW}}getClass(){return dB}get interfaces_(){return[]}}dB.constructor_=function(){},dB.NE=0,dB.NW=1,dB.SW=2,dB.SE=3;class yB{constructor(){yB.constructor_.apply(this,arguments)}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:SG.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){var e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=dB.quadrant(this._dx,this._dy),cD.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}getClass(){return yB}get interfaces_(){return[rD]}}yB.constructor_=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){let t=arguments[0];this._edge=t}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];yB.constructor_.call(this,t,e,r,null)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];yB.constructor_.call(this,t),this.init(e,r),this._label=n}};class gB{constructor(){gB.constructor_.apply(this,arguments)}static opposite(t){return t===gB.LEFT?gB.RIGHT:t===gB.RIGHT?gB.LEFT:t}getClass(){return gB}get interfaces_(){return[]}}gB.constructor_=function(){},gB.ON=0,gB.LEFT=1,gB.RIGHT=2;class mB{constructor(){mB.constructor_.apply(this,arguments)}setAllLocations(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==rB.NONE)return!1;return!0}setAllLocationsIfNull(t){for(var e=0;e<this.location.length;e++)this.location[e]===rB.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[gB.ON]=this.location[gB.ON],e[gB.LEFT]=rB.NONE,e[gB.RIGHT]=rB.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===rB.NONE&&r<t.location.length&&(this.location[r]=t.location[r])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;var t=this.location[gB.LEFT];this.location[gB.LEFT]=this.location[gB.RIGHT],this.location[gB.RIGHT]=t}toString(){var t=new bG;return this.location.length>1&&t.append(rB.toLocationSymbol(this.location[gB.LEFT])),t.append(rB.toLocationSymbol(this.location[gB.ON])),this.location.length>1&&t.append(rB.toLocationSymbol(this.location[gB.RIGHT])),t.toString()}setLocations(t,e,r){this.location[gB.ON]=t,this.location[gB.LEFT]=e,this.location[gB.RIGHT]=r}get(t){return t<this.location.length?this.location[t]:rB.NONE}isArea(){return this.location.length>1}isAnyNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]===rB.NONE)return!0;return!1}setLocation(){if(1===arguments.length){let t=arguments[0];this.setLocation(gB.ON,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(rB.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}getClass(){return mB}get interfaces_(){return[]}}mB.constructor_=function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){let t=arguments[0];this.init(1),this.location[gB.ON]=t}else if(arguments[0]instanceof mB){let e=arguments[0];if(this.init(e.location.length),null!==e)for(var t=0;t<this.location.length;t++)this.location[t]=e.location[t]}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.init(3),this.location[gB.ON]=t,this.location[gB.LEFT]=e,this.location[gB.RIGHT]=r}};class vB{constructor(){vB.constructor_.apply(this,arguments)}static toLineLabel(t){for(var e=new vB(rB.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e}getGeometryCount(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){let t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new mB(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){let t=arguments[0];return this.elt[t].get(gB.ON)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){var t=new bG;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){let t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setLocation(gB.ON,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.elt[t].setLocation(e,r)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new mB(this.elt[t].location[0]))}getClass(){return vB}get interfaces_(){return[]}}vB.constructor_=function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){let t=arguments[0];this.elt[0]=new mB(t),this.elt[1]=new mB(t)}else if(arguments[0]instanceof vB){let t=arguments[0];this.elt[0]=new mB(t.elt[0]),this.elt[1]=new mB(t.elt[1])}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[0]=new mB(rB.NONE),this.elt[1]=new mB(rB.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.elt[0]=new mB(t,e,r),this.elt[1]=new mB(t,e,r)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.elt[0]=new mB(rB.NONE,rB.NONE,rB.NONE),this.elt[1]=new mB(rB.NONE,rB.NONE,rB.NONE),this.elt[t].setLocations(e,r,n)}};class _B{constructor(){_B.constructor_.apply(this,arguments)}createEdgeEndForNext(t,e,r,n){var i=r.segmentIndex+1;if(i>=t.getNumPoints()&&null===n)return null;var o=t.getCoordinate(i);null!==n&&n.segmentIndex===r.segmentIndex&&(o=n.coord);var a=new yB(t,r.coord,o,new vB(t.getLabel()));e.add(a)}createEdgeEndForPrev(t,e,r,n){var i=r.segmentIndex;if(0===r.dist){if(0===i)return null;i--}var o=t.getCoordinate(i);null!==n&&n.segmentIndex>=i&&(o=n.coord);var a=new vB(t.getLabel());a.flip();var s=new yB(t,r.coord,o,a);e.add(s)}computeEdgeEnds(){if(1===arguments.length){let n=arguments[0];for(var t=new MD,e=n;e.hasNext();){var r=e.next();this.computeEdgeEnds(r,t)}return t}if(2===arguments.length){let t=arguments[0],e=arguments[1];var n=t.getEdgeIntersectionList();n.addEndpoints();var i=n.iterator(),o=null,a=null;if(!i.hasNext())return null;var s=i.next();do{o=a,a=s,s=null,i.hasNext()&&(s=i.next()),null!==a&&(this.createEdgeEndForPrev(t,e,a,o),this.createEdgeEndForNext(t,e,a,s))}while(null!==a)}}getClass(){return _B}get interfaces_(){return[]}}_B.constructor_=function(){};class bB{constructor(){bB.constructor_.apply(this,arguments)}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){cD.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}getClass(){return bB}get interfaces_(){return[]}}bB.constructor_=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._label=t}};class wB extends bB{constructor(){super(),wB.constructor_.apply(this,arguments)}isIncidentEdgeInResult(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){var r=rB.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==rB.BOUNDARY&&(r=n)}return r}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{let t=arguments[0],e=arguments[1];null===this._label?this._label=new vB(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof wB){let t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof vB){let r=arguments[0];for(var t=0;t<2;t++){var e=this.computeMergedLocation(r,t);this._label.getLocation(t)===rB.NONE&&this._label.setLocation(t,e)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;var e=rB.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case rB.BOUNDARY:r=rB.INTERIOR;break;case rB.INTERIOR:default:r=rB.BOUNDARY}this._label.setLocation(t,r)}getClass(){return wB}get interfaces_(){return[]}}wB.constructor_=function(){this._coord=null,this._edges=null;let t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new vB(0,rB.NONE)};class xB{constructor(){xB.constructor_.apply(this,arguments)}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof hD){let e=arguments[0];return null===(t=this.nodeMap.get(e))&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof wB){let e=arguments[0];var t;return null===(t=this.nodeMap.get(e.getCoordinate()))?(this.nodeMap.put(e.getCoordinate(),e),e):(t.mergeLabel(e),t)}}print(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){for(var e=new MD,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===rB.BOUNDARY&&e.add(n)}return e}add(t){var e=t.getCoordinate();this.addNode(e).add(t)}getClass(){return xB}get interfaces_(){return[]}}xB.constructor_=function(){this.nodeMap=new WD,this.nodeFact=null;let t=arguments[0];this.nodeFact=t};class EB extends uD{constructor(){if(1===arguments.length){let t=arguments[0];super(t),uD.call(this,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];super(EB.msgWithCoord(t,e)),this.name="TopologyException",this.pt=new hD(e)}}getCoordinate(){return this.pt}get interfaces_(){return[]}getClass(){return EB}static msgWithCoord(t,e){return null!==e?t+" [ "+e+" ]":t}}class SB{constructor(){SB.constructor_.apply(this,arguments)}locate(t){}getClass(){return SB}get interfaces_(){return[]}}SB.constructor_=function(){};class OB{constructor(){OB.constructor_.apply(this,arguments)}static locatePointInPolygon(t,e){if(e.isEmpty())return rB.EXTERIOR;var r=e.getExteriorRing(),n=OB.locatePointInRing(t,r);if(n!==rB.INTERIOR)return n;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=OB.locatePointInRing(t,o);if(a===rB.BOUNDARY)return rB.BOUNDARY;if(a===rB.INTERIOR)return rB.EXTERIOR}return rB.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?cB.locateInRing(t,e.getCoordinates()):rB.EXTERIOR}static containsPointInPolygon(t,e){return rB.EXTERIOR!==OB.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof TG)return OB.locatePointInPolygon(t,e);if(e instanceof nG)for(var r=new hB(e);r.hasNext();){var n=r.next();if(n!==e){var i=OB.locateInGeometry(t,n);if(i!==rB.EXTERIOR)return i}}return rB.EXTERIOR}static locate(t,e){return e.isEmpty()?rB.EXTERIOR:OB.locateInGeometry(t,e)}locate(t){return OB.locate(t,this._geom)}getClass(){return OB}get interfaces_(){return[SB]}}OB.constructor_=function(){this._geom=null;let t=arguments[0];this._geom=t};class TB{constructor(){TB.constructor_.apply(this,arguments)}getNextCW(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)}propagateSideLabels(t){for(var e=rB.NONE,r=this.iterator();r.hasNext();){(o=(i=r.next()).getLabel()).isArea(t)&&o.getLocation(t,gB.LEFT)!==rB.NONE&&(e=o.getLocation(t,gB.LEFT))}if(e===rB.NONE)return null;var n=e;for(r=this.iterator();r.hasNext();){var i,o;if((o=(i=r.next()).getLabel()).getLocation(t,gB.ON)===rB.NONE&&o.setLocation(t,gB.ON,n),o.isArea(t)){var a=o.getLocation(t,gB.LEFT),s=o.getLocation(t,gB.RIGHT);if(s!==rB.NONE){if(s!==n)throw new EB("side location conflict",i.getCoordinate());a===rB.NONE&&cD.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),n=a}else cD.isTrue(o.getLocation(t,gB.LEFT)===rB.NONE,"found single null side"),o.setLocation(t,gB.RIGHT,n),o.setLocation(t,gB.LEFT,n)}}}getCoordinate(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}print(t){LD.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,gB.LEFT);cD.isTrue(n!==rB.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var a=o.next().getLabel();cD.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,gB.LEFT),u=a.getLocation(t,gB.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0}findIndex(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new MD(this._edgeMap.values())),this._edgeList}getLocation(t,e,r){return this._ptInAreaLocation[t]===rB.NONE&&(this._ptInAreaLocation[t]=OB.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]}toString(){var t=new bG;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=(o=r.next()).getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===rB.BOUNDARY&&(e[i]=!0);for(r=this.iterator();r.hasNext();){var o;for(n=(o=r.next()).getLabel(),i=0;i<2;i++)if(n.isAnyNull(i)){var a=rB.NONE;if(e[i])a=rB.EXTERIOR;else{var s=o.getCoordinate();a=this.getLocation(i,s,t)}n.setAllLocationsIfNull(i,a)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}getClass(){return TB}get interfaces_(){return[]}}TB.constructor_=function(){this._edgeMap=new WD,this._edgeList=null,this._ptInAreaLocation=[rB.NONE,rB.NONE]};class MB{constructor(){MB.constructor_.apply(this,arguments)}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}getClass(){return MB}get interfaces_(){return[]}}MB.constructor_=function(){this.mce=null,this.chainIndex=null;let t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};class IB{constructor(){IB.constructor_.apply(this,arguments)}isDelete(){return this._eventType===IB.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===IB.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}getClass(){return IB}get interfaces_(){return[rD]}}IB.constructor_=function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){let t=arguments[0],e=arguments[1];this._eventType=IB.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._eventType=IB.INSERT,this._label=t,this._xValue=e,this._obj=r}},IB.INSERT=1,IB.DELETE=2;class PB{constructor(){PB.constructor_.apply(this,arguments)}getClass(){return PB}get interfaces_(){return[]}}PB.constructor_=function(){};const CB={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return CB.sort(t),t.get(0)},sort:function(t,e){const r=t.toArray();e?JD.sort(r,e):JD.sort(r);const n=t.iterator();for(let t=0,e=r.length;t<e;t++)n.next(),n.set(r[t])},singletonList:function(t){const e=new MD;return e.add(t),e}};var LB=CB;class kB{constructor(){kB.constructor_.apply(this,arguments)}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(kB.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getClass(){return kB}get interfaces_(){return[]}}kB.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;let t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};class RB extends PB{constructor(){super(),RB.constructor_.apply(this,arguments)}prepareEvents(){LB.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){let r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var e=this.events.get(t);if(e.isInsert()&&this.processOverlaps(t,e.getDeleteEventIndex(),e,r),r.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof kB&&Kj(arguments[0],SD)&&Kj(arguments[1],SD)){let t=arguments[0],e=arguments[1],r=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(r)}else if("boolean"==typeof arguments[2]&&Kj(arguments[0],SD)&&arguments[1]instanceof kB){let t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new MB(r,i),a=new IB(e,r.getMinX(i),o);this.events.add(a),this.events.add(new IB(r.getMaxX(i),a))}}processOverlaps(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();r.isSameLabel(a)||(i.computeIntersections(s,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){let r=arguments[0],n=arguments[1];for(t=r.iterator();t.hasNext();){e=t.next();this.addEdge(e,n)}}}getClass(){return RB}get interfaces_(){return[]}}RB.constructor_=function(){this.events=new MD,this.nOverlaps=null};class AB{constructor(){AB.constructor_.apply(this,arguments)}visitItem(t){}getClass(){return AB}get interfaces_(){return[]}}AB.constructor_=function(){};class NB{constructor(){NB.constructor_.apply(this,arguments)}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return eB.toLineString(new hD(this._min,0),new hD(this._max,0))}getClass(){return NB}get interfaces_(){return[]}}class FB{constructor(){FB.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0}getClass(){return FB}get interfaces_(){return[sD]}}FB.constructor_=function(){},NB.NodeComparator=FB,NB.constructor_=function(){this._min=aD.POSITIVE_INFINITY,this._max=aD.NEGATIVE_INFINITY};class jB extends NB{constructor(){super(),jB.constructor_.apply(this,arguments)}query(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)}getClass(){return jB}get interfaces_(){return[]}}jB.constructor_=function(){this._item=null;let t=arguments[0],e=arguments[1],r=arguments[2];this._min=t,this._max=e,this._item=r};class DB extends NB{constructor(){super(),DB.constructor_.apply(this,arguments)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)}getClass(){return DB}get interfaces_(){return[]}}DB.constructor_=function(){this._node1=null,this._node2=null;let t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)};class GB{constructor(){GB.constructor_.apply(this,arguments)}buildTree(){LB.sort(this._leaves,new NB.NodeComparator);for(var t=this._leaves,e=null,r=new MD;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}}insert(t,e,r){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new jB(t,e,r))}query(t,e,r){this.init(),this._root.query(t,e,r)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){LD.out.println(eB.toLineString(new hD(t._min,this._level),new hD(t._max,this._level)))}init(){if(null!==this._root)return null;this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new DB(t.get(r),t.get(r+1));e.add(i)}}}getClass(){return GB}get interfaces_(){return[]}}GB.constructor_=function(){this._leaves=new MD,this._root=null,this._level=0};class BB{constructor(){BB.constructor_.apply(this,arguments)}static midPoint(t,e){return new hD((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof BB){let r=arguments[0];var t=SG.index(this.p0,this.p1,r.p0),e=SG.index(this.p0,this.p1,r.p1);return t>=0&&e>=0?Math.max(t,e):t<=0&&e<=0?Math.max(t,e):0}if(arguments[0]instanceof hD){let t=arguments[0];return SG.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof BB))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){var e=new uB;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof hD){let r=arguments[0];if(r.equals(this.p0)||r.equals(this.p1))return new hD(r);var t=this.projectionFactor(r),e=new hD;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}if(arguments[0]instanceof BB){let t=arguments[0];var r=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(r>=1&&n>=1)return null;if(r<=0&&n<=0)return null;var i=this.project(t.p0);r<0&&(i=this.p0),r>1&&(i=this.p1);var o=this.project(t.p1);return n<0&&(o=this.p0),n>1&&(o=this.p1),new BB(i,o)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return aB.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return BB.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?aD.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n}closestPoints(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=aD.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<n&&(n=i,r[0]=a,r[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r}closestPoint(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)}reverse(){var t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){try{return oB.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof iB))throw t}return null}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new hD(r-u,n+s)}setCoordinates(){if(1===arguments.length){let t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||aD.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}distance(){if(arguments[0]instanceof BB){let t=arguments[0];return aB.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof hD){let t=arguments[0];return aB.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){var e=new hD;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=java.lang.Double.doubleToLongBits(this.p1.x);return r^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(r)^Math.trunc(r>>32))}getClass(){return BB}get interfaces_(){return[rD,nD]}}BB.constructor_=function(){if(this.p0=null,this.p1=null,0===arguments.length)BB.constructor_.call(this,new hD,new hD);else if(1===arguments.length){let t=arguments[0];BB.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];BB.constructor_.call(this,new hD(t,e),new hD(r,n))}},BB.serialVersionUID=0x2d2172135f411c00;class zB{constructor(){zB.constructor_.apply(this,arguments)}static getGeometry(){if(1===arguments.length){let t=arguments[0];return t.getFactory().buildGeometry(zB.getLines(t))}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(zB.getLines(t,e))}}static getLines(){if(1===arguments.length){let t=arguments[0];return zB.getLines(t,!1)}if(2===arguments.length){if(Kj(arguments[0],xD)&&Kj(arguments[1],xD)){let r=arguments[0],n=arguments[1];for(var t=r.iterator();t.hasNext();){var e=t.next();zB.getLines(e,n)}return n}if(arguments[0]instanceof dD&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];var r=new MD;return t.apply(new zB(r,e)),r}if(arguments[0]instanceof dD&&Kj(arguments[1],xD)){let t=arguments[0],e=arguments[1];return t instanceof gG?e.add(t):t.apply(new zB(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Kj(arguments[0],xD)&&Kj(arguments[1],xD)){let r=arguments[0],n=arguments[1],i=arguments[2];for(t=r.iterator();t.hasNext();){e=t.next();zB.getLines(e,n,i)}return n}if("boolean"==typeof arguments[2]&&arguments[0]instanceof dD&&Kj(arguments[1],xD)){let t=arguments[0],e=arguments[1],r=arguments[2];return t.apply(new zB(e,r)),e}}}filter(t){if(this._isForcedToLineString&&t instanceof IG){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof gG&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}getClass(){return zB}get interfaces_(){return[eD]}}zB.constructor_=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){let t=arguments[0];this._lines=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}};class UB{constructor(){UB.constructor_.apply(this,arguments)}visitItem(t){this._items.add(t)}getItems(){return this._items}getClass(){return UB}get interfaces_(){return[AB]}}UB.constructor_=function(){this._items=new MD};class qB{constructor(){qB.constructor_.apply(this,arguments)}locate(t){var e=new lB(t),r=new VB(e);return this._index.query(t.y,t.y,r),e.getLocation()}getClass(){return qB}get interfaces_(){return[SB]}}class VB{constructor(){VB.constructor_.apply(this,arguments)}visitItem(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}getClass(){return VB}get interfaces_(){return[AB]}}VB.constructor_=function(){this._counter=null;let t=arguments[0];this._counter=t};class YB{constructor(){YB.constructor_.apply(this,arguments)}init(t){for(var e=zB.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}}addLine(t){for(var e=1;e<t.length;e++){var r=new BB(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}}query(){if(2===arguments.length){let e=arguments[0],r=arguments[1];var t=new UB;return this._index.query(e,r,t),t.getItems()}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._index.query(t,e,r)}}getClass(){return YB}get interfaces_(){return[]}}YB.constructor_=function(){this._index=new GB;let t=arguments[0];this.init(t)},qB.SegmentVisitor=VB,qB.IntervalIndexedGeometry=YB,qB.constructor_=function(){this._index=null;let t=arguments[0];if(!(Kj(t,OG)||t instanceof IG))throw new tD("Argument must be Polygonal or LinearRing");this._index=new YB(t)};class WB{constructor(){WB.constructor_.apply(this,arguments)}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){var e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}getClass(){return WB}get interfaces_(){return[rD]}}WB.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;let t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new hD(t),this.segmentIndex=e,this.dist=r};class XB{constructor(){XB.constructor_.apply(this,arguments)}print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}}addEndpoints(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new hD(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new $B(o,new vB(this.edge._label))}add(t,e,r){var n=new WB(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}isIntersection(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}getClass(){return XB}get interfaces_(){return[]}}XB.constructor_=function(){this._nodeMap=new WD,this.edge=null;let t=arguments[0];this.edge=t};class ZB{constructor(){ZB.constructor_.apply(this,arguments)}static toIntArray(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}getChainStartIndices(t){var e=0,r=new MD;r.add(new wG(e));do{var n=this.findChainEnd(t,e);r.add(new wG(n)),e=n}while(e<t.length-1);return ZB.toIntArray(r)}findChainEnd(t,e){for(var r=dB.quadrant(t[e],t[e+1]),n=e+1;n<t.length;){if(dB.quadrant(t[n-1],t[n])!==r)break;n++}return n-1}getClass(){return ZB}get interfaces_(){return[]}}ZB.constructor_=function(){};class HB{constructor(){HB.constructor_.apply(this,arguments)}getCoordinates(){return this.pts}getMaxX(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r}getMinX(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r}computeIntersectsForChain(){if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){let r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(n-r==1&&a-o==1)return s.addIntersections(this.e,r,i.e,o),null;if(!this.overlaps(r,n,i,o,a))return null;var t=Math.trunc((r+n)/2),e=Math.trunc((o+a)/2);r<t&&(o<e&&this.computeIntersectsForChain(r,t,i,o,e,s),e<a&&this.computeIntersectsForChain(r,t,i,e,a,s)),t<n&&(o<e&&this.computeIntersectsForChain(t,n,i,o,e,s),e<a&&this.computeIntersectsForChain(t,n,i,e,a,s))}}overlaps(t,e,r,n,i){return pD.intersects(this.pts[t],this.pts[e],r.pts[n],r.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)}getClass(){return HB}get interfaces_(){return[]}}HB.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;let t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ZB;this.startIndex=e.getChainStartIndices(this.pts)};class KB{constructor(){KB.constructor_.apply(this,arguments)}static depthAtLocation(t){return t===rB.EXTERIOR?0:t===rB.INTERIOR?1:KB.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,r){this._depth[t][e]=r}isNull(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==KB.NULL_VALUE)return!1;return!0}if(1===arguments.length){let t=arguments[0];return this._depth[t][1]===KB.NULL_VALUE}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this._depth[t][e]===KB.NULL_VALUE}}normalize(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}}getDelta(t){return this._depth[t][gB.RIGHT]-this._depth[t][gB.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?rB.EXTERIOR:rB.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<2;t++)for(var e=1;e<3;e++){var r=n.getLocation(t,e);r!==rB.EXTERIOR&&r!==rB.INTERIOR||(this.isNull(t,e)?this._depth[t][e]=KB.depthAtLocation(r):this._depth[t][e]+=KB.depthAtLocation(r))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1];arguments[2]===rB.INTERIOR&&this._depth[t][e]++}}getClass(){return KB}get interfaces_(){return[]}}KB.constructor_=function(){this._depth=Array(2).fill().map(()=>Array(3));for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=KB.NULL_VALUE},KB.NULL_VALUE=-1;class $B extends bB{constructor(){super(),$B.constructor_.apply(this,arguments)}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof pB&&arguments[0]instanceof vB))return super.updateIM.apply(this,arguments);{let t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,gB.ON),t.getLocation(1,gB.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,gB.LEFT),t.getLocation(1,gB.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,gB.RIGHT),t.getLocation(1,gB.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new $B(t,vB.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof $B))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var r=!0,n=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(r=!1),this.pts[o].equals2D(e.pts[--i])||(n=!1),!r&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){let t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){$B.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new HB(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new pD;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,r,n){var i=new hD(t.getIntersection(n)),o=e,a=t.getEdgeDistance(r,n),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)}toString(){var t=new dG;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)}getClass(){return $B}get interfaces_(){return[]}}$B.constructor_=function(){if(this.pts=null,this._env=null,this.eiList=new XB(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new KB,this._depthDelta=0,1===arguments.length){let t=arguments[0];$B.constructor_.call(this,t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.pts=t,this._label=e}};class JB extends yB{constructor(){super(),JB.constructor_.apply(this,arguments)}static depthFactor(t,e){return t===rB.EXTERIOR&&e===rB.INTERIOR?1:t===rB.INTERIOR&&e===rB.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new vB(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new EB("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,gB.LEFT)===rB.INTERIOR&&this._label.getLocation(e,gB.RIGHT)===rB.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[gB.LEFT]+"/"+this._depth[gB.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,rB.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,rB.EXTERIOR);return t&&e&&r}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===gB.LEFT&&(n=-1);var i=gB.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}getClass(){return JB}get interfaces_(){return[]}}JB.constructor_=function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];let t=arguments[0],e=arguments[1];if(yB.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()};class QB{constructor(){QB.constructor_.apply(this,arguments)}createNode(t){return new wB(t,null)}getClass(){return QB}get interfaces_(){return[]}}QB.constructor_=function(){};class tz{constructor(){tz.constructor_.apply(this,arguments)}static linkResultDirectedEdges(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof wB){let t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof hD){let t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){LD.out.println(t)}isBoundaryNode(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===rB.BOUNDARY}linkAllDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,r,n){return!!t.equals(r)&&(SG.index(t,e,n)===SG.COLLINEAR&&dB.quadrant(t,e)===dB.quadrant(r,n))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){LD.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null}addEdges(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._edges.add(r);var n=new JB(r,!0),i=new JB(r,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null}getClass(){return tz}get interfaces_(){return[]}}tz.constructor_=function(){if(this._edges=new MD,this._nodes=null,this._edgeEndList=new MD,0===arguments.length)this._nodes=new xB(new QB);else if(1===arguments.length){let t=arguments[0];this._nodes=new xB(t)}};class ez extends tz{constructor(){super(),ez.constructor_.apply(this,arguments)}static determineBoundary(t,e){return t.isInBoundary(e)?rB.BOUNDARY:rB.INTERIOR}insertBoundaryPoint(t,e){var r=this._nodes.addNode(e).getLabel(),n=1;rB.NONE;r.getLocation(t,gB.ON)===rB.BOUNDARY&&n++;var i=ez.determineBoundary(this._boundaryNodeRule,n);r.setLocation(t,i)}computeSelfNodes(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){let i=arguments[0],o=arguments[1],a=arguments[2];var t=new kB(i,!0,!1);t.setIsDoneIfProperInt(a);var e=this.createEdgeSetIntersector(),r=this._parentGeom instanceof IG||this._parentGeom instanceof TG||this._parentGeom instanceof PG,n=o||!r;return e.computeIntersections(this._edges,t,n),this.addSelfIntersectionNodes(this._argIndex),t}}computeSplitEdges(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,r){var n=new kB(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof vG){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,rB.INTERIOR)}else if(arguments[0]instanceof hD){let t=arguments[0];this.insertPoint(this._argIndex,t,rB.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),rB.EXTERIOR,rB.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,rB.INTERIOR,rB.EXTERIOR)}}addEdge(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],rB.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],rB.BOUNDARY)}addLineString(t){var e=kD.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new $B(e,new vB(this._argIndex,rB.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),cD.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,r){if(this.isBoundaryNode(t,e))return null;r===rB.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)}addPolygonRing(t,e,r){if(t.isEmpty())return null;var n=kD.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;SG.isCCW(n)&&(i=r,o=e);var a=new $B(n,new vB(this._argIndex,rB.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],rB.BOUNDARY)}insertPoint(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new vB(t,r):i.setLocation(t,r)}createEdgeSetIntersector(){return new RB}addSelfIntersectionNodes(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}}add(){if(!(1===arguments.length&&arguments[0]instanceof dD))return super.add.apply(this,arguments);{let t=arguments[0];if(t.isEmpty())return null;if(t instanceof PG&&(this._useBoundaryDeterminationRule=!1),t instanceof TG)this.addPolygon(t);else if(t instanceof gG)this.addLineString(t);else if(t instanceof vG)this.addPoint(t);else if(t instanceof MG)this.addCollection(t);else if(t instanceof iG)this.addCollection(t);else if(t instanceof PG)this.addCollection(t);else{if(!(t instanceof nG))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}}addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}}locate(t){return Kj(this._parentGeom,OG)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new qB(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof gG){let t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}getClass(){return ez}get interfaces_(){return[]}}ez.constructor_=function(){if(this._parentGeom=null,this._lineEdgeMap=new UG,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new fB,2===arguments.length){let t=arguments[0],e=arguments[1];ez.constructor_.call(this,t,e,gD.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=r,null!==e&&this.add(e)}};class rz extends yB{constructor(){super(),rz.constructor_.apply(this,arguments)}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){for(var r=0,n=!1,i=this.iterator();i.hasNext();){(o=i.next().getLabel().getLocation(t))===rB.BOUNDARY&&r++,o===rB.INTERIOR&&(n=!0)}var o=rB.NONE;n&&(o=rB.INTERIOR),r>0&&(o=ez.determineBoundary(e,r)),this._label.setLocation(t,o)}computeLabelSide(t,e){for(var r=this.iterator();r.hasNext();){var n=r.next();if(n.getLabel().isArea()){var i=n.getLabel().getLocation(t,e);if(i===rB.INTERIOR)return this._label.setLocation(t,e,rB.INTERIOR),null;i===rB.EXTERIOR&&this._label.setLocation(t,e,rB.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,gB.LEFT),this.computeLabelSide(t,gB.RIGHT)}updateIM(t){$B.updateIM(this._label,t)}computeLabel(t){for(var e=!1,r=this.iterator();r.hasNext();){r.next().getLabel().isArea()&&(e=!0)}this._label=e?new vB(rB.NONE,rB.NONE,rB.NONE):new vB(rB.NONE);for(var n=0;n<2;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)}getClass(){return rz}get interfaces_(){return[]}}rz.constructor_=function(){if(this._edgeEnds=new MD,1===arguments.length){let t=arguments[0];rz.constructor_.call(this,null,t)}else if(2===arguments.length){arguments[0];let t=arguments[1];yB.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new vB(t.getLabel())),this.insert(t)}};class nz extends TB{constructor(){super(),nz.constructor_.apply(this,arguments)}updateIM(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}}insert(t){var e=this._edgeMap.get(t);null===e?(e=new rz(t),this.insertEdgeEnd(t,e)):e.insert(t)}getClass(){return nz}get interfaces_(){return[]}}nz.constructor_=function(){};class iz extends wB{constructor(){super(),iz.constructor_.apply(this,arguments)}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}getClass(){return iz}get interfaces_(){return[]}}iz.constructor_=function(){let t=arguments[0],e=arguments[1];wB.constructor_.call(this,t,e)};class oz extends QB{constructor(){super(),oz.constructor_.apply(this,arguments)}createNode(t){return new iz(t,new nz)}getClass(){return oz}get interfaces_(){return[]}}oz.constructor_=function(){};class az{constructor(){az.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._nodes.add(r)}}computeProperIntersectionIM(t,e){var r=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===r&&2===n?i&&e.setAtLeast("212101212"):2===r&&1===n?(i&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===r&&2===n?(i&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===r&&1===n&&o&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(var r=this._arg[t].getEdgeIterator();r.hasNext();){var n=r.next();n.isIsolated()&&(this.labelIsolatedEdge(n,e,this._arg[e].getGeometry()),this._isolatedEdges.add(n))}}labelIsolatedEdge(t,e,r){if(r.getDimension()>0){var n=this._ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,rB.EXTERIOR)}computeIM(){var t=new pB;if(t.set(rB.EXTERIOR,rB.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var r=new _B,n=r.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);var i=r.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}}copyNodesAndLabels(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._nodes.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this._nodes.find(o.coord);a.getLabel().isNull(t)&&(n===rB.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,rB.INTERIOR))}}labelIsolatedNode(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,r)}computeIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this._nodes.addNode(o.coord);n===rB.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,rB.INTERIOR)}}labelIsolatedNodes(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next(),r=e.getLabel();cD.isTrue(r.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(var e=this._isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var r=this._nodes.iterator();r.hasNext();){var n=r.next();n.updateIM(t),n.updateIMFromEdges(t)}}computeDisjointIM(t){var e=this._arg[0].getGeometry();e.isEmpty()||(t.set(rB.INTERIOR,rB.EXTERIOR,e.getDimension()),t.set(rB.BOUNDARY,rB.EXTERIOR,e.getBoundaryDimension()));var r=this._arg[1].getGeometry();r.isEmpty()||(t.set(rB.EXTERIOR,rB.INTERIOR,r.getDimension()),t.set(rB.EXTERIOR,rB.BOUNDARY,r.getBoundaryDimension()))}getClass(){return az}get interfaces_(){return[]}}az.constructor_=function(){this._li=new uB,this._ptLocator=new fB,this._arg=null,this._nodes=new xB(new oz),this._im=null,this._isolatedEdges=new MD,this._invalidPoint=null;let t=arguments[0];this._arg=t};class sz{constructor(){sz.constructor_.apply(this,arguments)}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}getClass(){return sz}get interfaces_(){return[]}}sz.constructor_=function(){if(this._li=new uB,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){let t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ez(0,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];sz.constructor_.call(this,t,e,gD.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ez(0,t,r),this._arg[1]=new ez(1,e,r)}};class uz{constructor(){uz.constructor_.apply(this,arguments)}static contains(t,e){return new uz(t).contains(e)}isContainedInBoundary(t){if(t instanceof TG)return!1;if(t instanceof vG)return this.isPointContainedInBoundary(t);if(t instanceof gG)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);if(!this.isContainedInBoundary(r))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){for(var e=t.getCoordinateSequence(),r=new hD,n=new hD,i=0;i<e.size()-1;i++)if(e.getCoordinate(i,r),e.getCoordinate(i+1,n),!this.isLineSegmentContainedInBoundary(r,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof vG){let t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof hD){let t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}getClass(){return uz}get interfaces_(){return[]}}uz.constructor_=function(){this._rectEnv=null;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal()};class lz{constructor(){lz.constructor_.apply(this,arguments)}intersects(t,e){var r=new pD(t,e);if(!this._rectEnv.intersects(r))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var n=t;t=e,e=n}var i=!1;return e.y>t.y&&(i=!0),i?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}getClass(){return lz}get interfaces_(){return[]}}lz.constructor_=function(){this._li=new uB,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;let t=arguments[0];this._rectEnv=t,this._diagUp0=new hD(t.getMinX(),t.getMinY()),this._diagUp1=new hD(t.getMaxX(),t.getMaxY()),this._diagDown0=new hD(t.getMinX(),t.getMaxY()),this._diagDown1=new hD(t.getMaxX(),t.getMinY())};class cz{constructor(){cz.constructor_.apply(this,arguments)}applyTo(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var r=t.getGeometryN(e);if(r instanceof nG)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}}getClass(){return cz}get interfaces_(){return[]}}cz.constructor_=function(){this._isDone=!1};class hz{constructor(){hz.constructor_.apply(this,arguments)}static intersects(t,e){return new hz(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new fz(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;var r=new pz(this._rectangle);if(r.applyTo(t),r.containsPoint())return!0;var n=new dz(this._rectangle);return n.applyTo(t),!!n.intersects()}getClass(){return hz}get interfaces_(){return[]}}hz.constructor_=function(){this._rectangle=null,this._rectEnv=null;let t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()};class fz extends cz{constructor(){super(),fz.constructor_.apply(this,arguments)}isDone(){return!0===this._intersects}visit(t){var e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}getClass(){return fz}get interfaces_(){return[]}}fz.constructor_=function(){this._rectEnv=null,this._intersects=!1;let t=arguments[0];this._rectEnv=t};class pz extends cz{constructor(){super(),pz.constructor_.apply(this,arguments)}isDone(){return!0===this._containsPoint}visit(t){if(!(t instanceof TG))return null;var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;for(var r=new hD,n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,r),e.contains(r)&&OB.containsPointInPolygon(r,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}getClass(){return pz}get interfaces_(){return[]}}pz.constructor_=function(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;let t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()};class dz extends cz{constructor(){super(),dz.constructor_.apply(this,arguments)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;var r=zB.getLines(t);this.checkIntersectionWithLineStrings(r)}checkIntersectionWithLineStrings(t){for(var e=t.iterator();e.hasNext();){var r=e.next();if(this.checkIntersectionWithSegments(r),this._hasIntersection)return null}}checkIntersectionWithSegments(t){for(var e=t.getCoordinateSequence(),r=1;r<e.size();r++)if(e.getCoordinate(r-1,this._p0),e.getCoordinate(r,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}getClass(){return dz}get interfaces_(){return[]}}dz.constructor_=function(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new hD,this._p1=new hD;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new lz(this._rectEnv)};class yz extends sz{constructor(){super(),yz.constructor_.apply(this,arguments)}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new yz(t,e).getIntersectionMatrix().isCovers())))}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return hz.intersects(t,e);if(e.isRectangle())return hz.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(var r=0;r<t.getNumGeometries();r++)for(var n=0;n<e.getNumGeometries();n++)if(t.getGeometryN(r).intersects(e.getGeometryN(n)))return!0;return!1}return new yz(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new yz(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static relate(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return new yz(t,e).getIntersectionMatrix()}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];return new yz(t,e,r).getIntersectionMatrix()}}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new yz(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new yz(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?uz.contains(t,e):new yz(t,e).getIntersectionMatrix().isContains())))}getIntersectionMatrix(){return this._relate.computeIM()}getClass(){return yz}get interfaces_(){return[]}}function gz(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}yz.constructor_=function(){if(this._relate=null,2===arguments.length){let t=arguments[0],e=arguments[1];sz.constructor_.call(this,t,e),this._relate=new az(this._arg)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];sz.constructor_.call(this,t,e,r),this._relate=new az(this._arg)}};var mz=function(t){var e=t,r=[];return e instanceof Gx?r=gz(e.getFeatures().map(function(t){return t.getGeometry()})):(m(e)||(e=[e]),r=e.map(function(t){var e;return t instanceof pF?e=t.getGeometry():b(t)&&(e=t),e})),r},vz=function(t,e){var r="",n=new bj;return e.forEach(function(e,i){0!==i&&(r+=" OR ");var o=e;"point"===o.type.toLowerCase()&&(o.coordinates.length=2);var a=n.writeFeature(o);r+="".concat(t,"({{geometryName}}, ").concat(a,")")}),r},_z=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bz=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],wz="enterfullscreen",xz="leavefullscreen";function Ez(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function Sz(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Oz(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var Tz=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var i=void 0!==n.label?n.label:"⤢";r.labelNode_="string"==typeof i?document.createTextNode(i):i;var o=void 0!==n.labelActive?n.labelActive:"×";r.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,r.button_=document.createElement("button");var a=n.tipLabel?n.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,Sz()),r.button_.setAttribute("type","button"),r.button_.title=a,r.button_.appendChild(r.labelNode_),r.button_.addEventListener(Ct.CLICK,r.handleClick_.bind(r),!1);var s=r.cssClassName_+" "+Yi+" "+Xi+" "+(Ez()?"":Wi),u=r.element;return u.className=s,u.appendChild(r.button_),r.keys_=void 0!==n.keys&&n.keys,r.source_=n.source,r}return _z(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(Ez()){var t=this.getMap();if(t)if(Sz())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=void 0;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Oz(t)}(e):Oz(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();Sz()?(this.setClassName_(this.button_,!0),Gi(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(wz)):(this.setClassName_(this.button_,!1),Gi(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(xz)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var r=this.cssClassName_+"-true",n=this.cssClassName_+"-false",i=e?r:n;t.classList.remove(r),t.classList.remove(n),t.classList.add(i)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var r=0,n=bz.length;r<n;++r)this.listenerKeys.push(ct(document,bz[r],this.handleFullScreenChange_,this))},e}(ih),Mz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iz="projection";function Pz(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var Cz=function(t){function e(e){var r=this,n=e||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render||Pz,target:n.target})||this).addEventListener(Dt(Iz),r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection),r.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return Mz(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(Iz)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(ct(r,Zl.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(ct(r,Zl.POINTEROUT,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(Iz,yr(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?xr(this.mapProjection_,r):pr}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=Cr();i&&(this.transform_=xr(this.mapProjection_,i)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(ih),Lz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kz=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lz(e,t),e.prototype.createRenderer=function(){return new Df(this)},e}(rh);function Rz(t){this.validateExtent_(),this.updateBox_()}var Az=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||Rz,target:n.target})||this).boundHandleRotationChanged_=r.handleRotationChanged_.bind(r),r.collapsed_=void 0===n.collapsed||n.collapsed,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1),r.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,r.viewExtent_=void 0;var i=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"»";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(Ct.CLICK,r.handleClick_.bind(r),!1),r.ovmapDiv_=document.createElement("div"),r.ovmapDiv_.className="ol-overviewmap-map",r.view_=n.view,r.ovmap_=new kz({view:n.view});var c=r.ovmap_;n.layers&&n.layers.forEach(function(t){c.addLayer(t)});var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",r.boxOverlay_=new xv({position:[0,0],positioning:vv.CENTER_CENTER,element:h}),r.ovmap_.addOverlay(r.boxOverlay_);var f=i+" "+Yi+" "+Xi+(r.collapsed_&&r.collapsible_?" "+Zi:"")+(r.collapsible_?"":" ol-uncollapsible"),p=r.element;p.className=f,p.appendChild(r.ovmapDiv_),p.appendChild(l);var d=r,y=r.boxOverlay_,g=r.boxOverlay_.getElement(),m=function(t){var e,r={clientX:(e=t).clientX,clientY:e.clientY},n=c.getEventCoordinateInternal(r);y.setPosition(n)},v=function t(e){var r=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",t)};return g.addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",v)}),r}return Lz(e,t),e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var n=r.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ct(e,ot.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===tc.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}},e.prototype.bindView_=function(t){if(!this.view_){var e=new Vc({projection:t.getProjection()});this.ovmap_.setView(e)}t.addEventListener(Dt(bc),this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeEventListener(Dt(bc),this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtentInternal(r);if(!this.viewExtent_||!ie(n,this.viewExtent_)){this.viewExtent_=n;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(_e(n)),s=e.getPixelFromCoordinateInternal(pe(n)),u=Math.abs(a[0]-s[0]),l=Math.abs(a[1]-s[1]),c=i[0],h=i[1];u<.1*c||l<.1*h||u>.75*c||l>.75*h?this.resetExtent_():Kt(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtentInternal(r),i=e.getView(),o=Math.log(7.5)/Math.LN2;Se(n,1/(.1*Math.pow(2,o/2))),i.fitInternal(Xn(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),i=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),u=n.getCenterInternal(),l=n.getResolution(),c=i.getResolution(),h=r[0]*l/c,f=r[1]*l/c;if(a.setPosition(u),s){s.style.width=h+"px",s.style.height=f+"px";var p="rotate("+o+"rad)";s.style.transform=p}}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(Zi),this.collapsed_?Gi(this.collapseLabel_,this.label_):Gi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),ht(t,$l,function(t){this.updateBox_()},this)}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(ih),Nz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fz=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var i=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(Ct.CLICK,r.handleClick_.bind(r),!1);var u=i+" "+Yi+" "+Xi,l=r.element;return l.className=u,l.appendChild(s),r}return Nz(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Xn(e))},e}(ih),jz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dz={};Dz[De.POINT]=function(t){var e;e=void 0!==t.m&&void 0!==t.z?new en([t.x,t.y,t.z,t.m],Xr.XYZM):void 0!==t.z?new en([t.x,t.y,t.z],Xr.XYZ):void 0!==t.m?new en([t.x,t.y,t.m],Xr.XYM):new en([t.x,t.y]);return e},Dz[De.LINE_STRING]=function(t){var e=zz(t);return new Ln(t.paths[0],e)},Dz[De.POLYGON]=function(t){var e=zz(t);return new Yn(t.rings,e)},Dz[De.MULTI_POINT]=function(t){var e=zz(t);return new cn(t.points,e)},Dz[De.MULTI_LINE_STRING]=function(t){var e=zz(t);return new $n(t.paths,e)},Dz[De.MULTI_POLYGON]=function(t){var e=zz(t);return new ti(t.rings,e)};var Gz={};function Bz(t,e){var r,n,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=De.POINT;else if(t.points)i=De.MULTI_POINT;else if(t.paths){i=1===t.paths.length?De.LINE_STRING:De.MULTI_LINE_STRING}else if(t.rings){var o=t,a=zz(o),s=function(t,e){var r,n,i=[],o=[],a=[];for(r=0,n=t.length;r<n;++r){i.length=0,Jr(i,0,t[r],e.length);var s=Gn(i,0,i.length,e.length);s?o.push([t[r]]):a.push(t[r])}for(;a.length;){var u=a.shift(),l=!1;for(r=o.length-1;r>=0;r--){var c=o[r][0],h=Kt(new Nn(c).getExtent(),new Nn(u).getExtent());if(h){o[r].push(u),l=!0;break}}l||o.push([u.reverse()])}return o}(o.rings,a);1===s.length?(i=De.POLYGON,t=Object.assign({},t,((r={}).rings=s[0],r))):(i=De.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=s,n)))}return ii((0,Dz[i])(t),!1,e)}function zz(t){var e=Xr.XY;return!0===t.hasZ&&!0===t.hasM?e=Xr.XYZM:!0===t.hasZ?e=Xr.XYZ:!0===t.hasM&&(e=Xr.XYM),e}function Uz(t){var e=t.getLayout();return{hasZ:e===Xr.XYZ||e===Xr.XYZM,hasM:e===Xr.XYM||e===Xr.XYZM}}function qz(t,e){return(0,Gz[t.getType()])(ii(t,!0,e),e)}Gz[De.POINT]=function(t,e){var r,n=t.getCoordinates(),i=t.getLayout();i===Xr.XYZ?r={x:n[0],y:n[1],z:n[2]}:i===Xr.XYM?r={x:n[0],y:n[1],m:n[2]}:i===Xr.XYZM?r={x:n[0],y:n[1],z:n[2],m:n[3]}:i===Xr.XY?r={x:n[0],y:n[1]}:Ut(!1,34);return r},Gz[De.LINE_STRING]=function(t,e){var r=Uz(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},Gz[De.POLYGON]=function(t,e){var r=Uz(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},Gz[De.MULTI_POINT]=function(t,e){var r=Uz(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},Gz[De.MULTI_LINE_STRING]=function(t,e){var r=Uz(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},Gz[De.MULTI_POLYGON]=function(t,e){for(var r=Uz(t),n=t.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}};var Vz=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).geometryName_=n.geometryName,r}return jz(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=t,n=Bz(r.geometry,e),i=new ri;return this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(n),e&&e.idField&&r.attributes[e.idField]&&i.setId(r.attributes[e.idField]),r.attributes&&i.setProperties(r.attributes,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){var n=[],i=t.features;r.idField=t.objectIdFieldName;for(var o=0,a=i.length;o<a;++o)n.push(this.readFeatureFromObject(i[o],r));return n}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return Bz(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?yr("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return qz(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={},n=t.getGeometry();n&&(r.geometry=qz(n,e),e&&e.featureProjection&&(r.geometry.spatialReference={wkid:Number(yr(e.featureProjection).getCode().split(":").pop())}));var i=t.getProperties();return delete i[t.getGeometryName()],lt(i)?r.attributes={}:r.attributes=i,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}},e}(li),Yz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wz=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:r.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",r}return Yz(e,t),e}(Jm);Wz.prototype.namespace="http://www.opengis.net/gml/3.2",Wz.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:$d(Jm.prototype.readFlatPos_),posList:$d(Jm.prototype.readFlatPosList_)}},Wz.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Jm.prototype.interiorParser_,exterior:Jm.prototype.exteriorParser_}},Wz.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:$d(Xm.prototype.readPoint),MultiPoint:$d(Xm.prototype.readMultiPoint),LineString:$d(Xm.prototype.readLineString),MultiLineString:$d(Xm.prototype.readMultiLineString),LinearRing:$d(Xm.prototype.readLinearRing),Polygon:$d(Xm.prototype.readPolygon),MultiPolygon:$d(Xm.prototype.readMultiPolygon),Surface:$d(Wz.prototype.readSurface_),MultiSurface:$d(Jm.prototype.readMultiSurface_),Curve:$d(Wz.prototype.readCurve_),MultiCurve:$d(Jm.prototype.readMultiCurve_),Envelope:$d(Wz.prototype.readEnvelope_)}},Wz.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:Kd(Jm.prototype.curveMemberParser_),curveMembers:Kd(Jm.prototype.curveMemberParser_)}},Wz.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:Kd(Jm.prototype.surfaceMemberParser_),surfaceMembers:Kd(Jm.prototype.surfaceMemberParser_)}},Wz.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:Kd(Xm.prototype.readLineString),Curve:Kd(Jm.prototype.readCurve_)}},Wz.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:Kd(Xm.prototype.readPolygon),Surface:Kd(Jm.prototype.readSurface_)}},Wz.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:$d(Jm.prototype.readPatch_)}},Wz.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:$d(Jm.prototype.readSegment_)}},Wz.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:Kd(Jm.prototype.readFlatPosList_),upperCorner:Kd(Jm.prototype.readFlatPosList_)}},Wz.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:$d(Jm.prototype.readPolygonPatch_)}},Wz.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:$d(Jm.prototype.readLineStringSegment_)}},Wz.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:Kd(Xm.prototype.pointMemberParser_),pointMembers:Kd(Xm.prototype.pointMemberParser_)}},Wz.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:Kd(Xm.prototype.lineStringMemberParser_),lineStringMembers:Kd(Xm.prototype.lineStringMemberParser_)}},Wz.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:Kd(Xm.prototype.polygonMemberParser_),polygonMembers:Kd(Xm.prototype.polygonMemberParser_)}},Wz.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:Kd(Xm.prototype.readFlatCoordinatesFromNode_)}},Wz.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:Kd(Xm.prototype.readLineString)}},Wz.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:Kd(Xm.prototype.readPolygon)}},Wz.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:$d(Xm.prototype.readFlatLinearRing_)}},Wz.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:ty(Jm.prototype.writeRing_),interior:ty(Jm.prototype.writeRing_)}},Wz.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:ty(Oy),upperCorner:ty(Oy)}},Wz.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:ty(Jm.prototype.writeSurfaceOrPolygonMember_),polygonMember:ty(Jm.prototype.writeSurfaceOrPolygonMember_)}},Wz.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:ty(Jm.prototype.writePointMember_)}},Wz.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:ty(Jm.prototype.writeLineStringOrCurveMember_),curveMember:ty(Jm.prototype.writeLineStringOrCurveMember_)}},Wz.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:ty(Jm.prototype.writeCurveOrLineString_),MultiCurve:ty(Jm.prototype.writeMultiCurveOrLineString_),Point:ty(Wz.prototype.writePoint_),MultiPoint:ty(Jm.prototype.writeMultiPoint_),LineString:ty(Jm.prototype.writeCurveOrLineString_),MultiLineString:ty(Jm.prototype.writeMultiCurveOrLineString_),LinearRing:ty(Jm.prototype.writeLinearRing_),Polygon:ty(Jm.prototype.writeSurfaceOrPolygon_),MultiPolygon:ty(Jm.prototype.writeMultiSurfaceOrPolygon_),Surface:ty(Jm.prototype.writeSurfaceOrPolygon_),MultiSurface:ty(Jm.prototype.writeMultiSurfaceOrPolygon_),Envelope:ty(Jm.prototype.writeEnvelope)}};var Xz=Wz,Zz=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hz=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Kz={rte:SU,trk:OU,wpt:TU},$z=oy(Hz,{rte:Kd(SU),trk:Kd(OU),wpt:Kd(TU)}),Jz=oy(Hz,{text:Qd(wy,"linkText"),type:Qd(wy,"linkType")}),Qz=oy(Hz,{rte:ty(function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==De.LINE_STRING){var s=ii(a,!0,n);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var u=r[r.length-1].node,l=lU[u.namespaceURI],c=iy(i,l);ly(o,cU,ny,c,r,l)}),trk:ty(function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==De.MULTI_LINE_STRING){var s=ii(a,!0,n);i.trkseg=s.getLineStrings()}var u=r[r.length-1].node,l=fU[u.namespaceURI],c=iy(i,l);ly(o,pU,ny,c,r,l)}),wpt:ty(function(t,e,r){var n=r[0],i=r[r.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==De.POINT){var a=ii(o,!0,n);i.geometryLayout=a.getLayout(),IU(t,a.getCoordinates(),r)}})}),tU=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=yr("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return Zz(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var n=t[e];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!yt(Hz,t.namespaceURI))return null;var r=Kz[t.localName];if(!r)return null;var n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!yt(Hz,t.namespaceURI))return[];if("gpx"==t.localName){var r=sy([],$z,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Yd("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Vd),r.setAttributeNS(Vd,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),ly({node:r},Qz,_U,t,[e]),r},e}(Um),eU=oy(Hz,{name:Qd(wy),cmt:Qd(wy),desc:Qd(wy),src:Qd(wy),link:xU,number:Qd(_y),extensions:EU,type:Qd(wy),rtept:function(t,e){var r=sy({},rU,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;bU(i,o,t,r)}}}),rU=oy(Hz,{ele:Qd(my),time:Qd(gy)}),nU=oy(Hz,{name:Qd(wy),cmt:Qd(wy),desc:Qd(wy),src:Qd(wy),link:xU,number:Qd(_y),type:Qd(wy),extensions:EU,trkseg:function(t,e){var r=e[e.length-1];ay(iU,t,e);var n=r.flatCoordinates;r.ends.push(n.length)}}),iU=oy(Hz,{trkpt:function(t,e){var r=sy({},oU,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;bU(i,o,t,r)}}}),oU=oy(Hz,{ele:Qd(my),time:Qd(gy)}),aU=oy(Hz,{ele:Qd(my),time:Qd(gy),magvar:Qd(my),geoidheight:Qd(my),name:Qd(wy),cmt:Qd(wy),desc:Qd(wy),src:Qd(wy),link:xU,sym:Qd(wy),type:Qd(wy),fix:Qd(wy),sat:Qd(_y),hdop:Qd(my),vdop:Qd(my),pdop:Qd(my),ageofdgpsdata:Qd(my),dgpsid:Qd(_y),extensions:EU}),sU=["text","type"],uU=oy(Hz,{text:ty(Oy),type:ty(Oy)}),lU=oy(Hz,["name","cmt","desc","src","link","number","type","rtept"]),cU=oy(Hz,{name:ty(Oy),cmt:ty(Oy),desc:ty(Oy),src:ty(Oy),link:ty(MU),number:ty(Sy),type:ty(Oy),rtept:ey(ty(IU))}),hU=oy(Hz,["ele","time"]),fU=oy(Hz,["name","cmt","desc","src","link","number","type","trkseg"]),pU=oy(Hz,{name:ty(Oy),cmt:ty(Oy),desc:ty(Oy),src:ty(Oy),link:ty(MU),number:ty(Sy),type:ty(Oy),trkseg:ey(ty(function(t,e,r){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},ly(n,yU,dU,e.getCoordinates(),r)}))}),dU=ry("trkpt"),yU=oy(Hz,{trkpt:ty(IU)}),gU=oy(Hz,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),mU=oy(Hz,{ele:ty(Ey),time:ty(function(t,e){var r=new Date(1e3*e),n=r.getUTCFullYear()+"-"+wc(r.getUTCMonth()+1,2)+"-"+wc(r.getUTCDate(),2)+"T"+wc(r.getUTCHours(),2)+":"+wc(r.getUTCMinutes(),2)+":"+wc(r.getUTCSeconds(),2)+"Z";t.appendChild(fy().createTextNode(n))}),magvar:ty(Ey),geoidheight:ty(Ey),name:ty(Oy),cmt:ty(Oy),desc:ty(Oy),src:ty(Oy),link:ty(MU),sym:ty(Oy),type:ty(Oy),fix:ty(Oy),sat:ty(Sy),hdop:ty(Ey),vdop:ty(Ey),pdop:ty(Ey),ageofdgpsdata:ty(Ey),dgpsid:ty(Sy)}),vU={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function _U(t,e,r){var n=t.getGeometry();if(n){var i=vU[n.getType()];if(i)return Yd(e[e.length-1].node.namespaceURI,i)}}function bU(t,e,r,n){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function wU(t,e,r){var n=Xr.XY,i=2;if(t.hasZ&&t.hasM?(n=Xr.XYZM,i=4):t.hasZ?(n=Xr.XYZ,i=3):t.hasM&&(n=Xr.XYM,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*i}return n}function xU(t,e){var r=e[e.length-1],n=t.getAttribute("href");null!==n&&(r.link=n),ay(Jz,t,e)}function EU(t,e){e[e.length-1].extensionsNode_=t}function SU(t,e){var r=e[0],n=sy({flatCoordinates:[],layoutOptions:{}},eU,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=wU(o,i),s=new Ln(i,a);ii(s,!1,r);var u=new ri(s);return u.setProperties(n,!0),u}}function OU(t,e){var r=e[0],n=sy({flatCoordinates:[],ends:[],layoutOptions:{}},nU,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=wU(a,i,o),u=new $n(i,s,o);ii(u,!1,r);var l=new ri(u);return l.setProperties(n,!0),l}}function TU(t,e){var r=e[0],n=sy({},aU,t,e);if(n){var i={},o=bU([],i,t,n),a=wU(i,o),s=new en(o,a);ii(s,!1,r);var u=new ri(s);return u.setProperties(n,!0),u}}function MU(t,e,r){t.setAttribute("href",e);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];ly({node:t},uU,ny,i,r,sU)}function IU(t,e,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Xr.XYZM:0!==e[3]&&(o.time=e[3]);case Xr.XYZ:0!==e[2]&&(o.ele=e[2]);break;case Xr.XYM:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?hU[i]:gU[i],s=iy(o,a);ly({node:t,properties:o},mU,ny,s,r,a)}var PU=tU,CU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LU={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},kU=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,RU=/^H.([A-Z]{3}).*?:(.*)/,AU=/^HFDTE(\d{2})(\d{2})(\d{2})/,NU=/\r\n|\r|\n/,FU=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=yr("EPSG:4326"),r.altitudeMode_=n.altitudeMode?n.altitudeMode:LU.NONE,r}return CU(e,t),e.prototype.readFeatureFromText=function(t,e){var r,n,i=this.altitudeMode_,o=t.split(NU),a={},s=[],u=2e3,l=0,c=1,h=-1;for(r=0,n=o.length;r<n;++r){var f=o[r],p=void 0;if("B"==f.charAt(0)){if(p=kU.exec(f)){var d=parseInt(p[1],10),y=parseInt(p[2],10),g=parseInt(p[3],10),m=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(m=-m);var v=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(v=-v),s.push(v,m),i!=LU.NONE){var _=void 0;_=i==LU.GPS?parseInt(p[11],10):i==LU.BAROMETRIC?parseInt(p[12],10):0,s.push(_)}var b=Date.UTC(u,l,c,d,y,g);b<h&&(b=Date.UTC(u,l,c+1,d,y,g)),s.push(b/1e3),h=b}}else"H"==f.charAt(0)&&((p=AU.exec(f))?(c=parseInt(p[1],10),l=parseInt(p[2],10)-1,u=2e3+parseInt(p[3],10)):(p=RU.exec(f))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var w=i==LU.NONE?Xr.XYM:Xr.XYZM,x=new Ln(s,w),E=new ri(ii(x,!1,e));return E.setProperties(a,!0),E},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(DF),jU={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},DU={};DU[jU.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},DU[jU.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},DU[jU.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},DU.none={none:{supports:[],formats:[],qualities:[]}};var GU=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),BU=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),zU=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)");var UU={};UU[jU.VERSION1]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=DU[jU.VERSION1].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:e.formats.concat([void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:e.qualities.concat([void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},UU[jU.VERSION2]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return void 0===t.height?t.width:t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:e.supports.concat(n),formats:e.formats.concat(i),qualities:e.qualities.concat(o)}},UU[jU.VERSION3]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?e.formats:e.formats.concat(t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(t){return["jpg","png","gif"].includes(t)}).reduce(function(t,e){return void 0===t&&r.includes(e)?e:t},void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:e.supports.concat(t.imageInfo.extraFeatures),formats:r,qualities:void 0===t.imageInfo.extraQualities?e.qualities:e.qualities.concat(t.imageInfo.extraQualities),preferredFormat:n}};var qU=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return jU.VERSION1;case"http://iiif.io/api/image/2/context.json":return jU.VERSION2;case"http://iiif.io/api/image/3/context.json":return jU.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(jU.VERSION1)&&this.imageInfo.identifier)return jU.VERSION1}Ut(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case jU.VERSION1:if(GU.test(this.imageInfo.profile))return this.imageInfo.profile;break;case jU.VERSION3:if(zU.test(this.imageInfo.profile))return this.imageInfo.profile;break;case jU.VERSION2:if("string"==typeof this.imageInfo.profile&&BU.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&BU.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var r=e.match(/level[0-2](\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?DU.none.none:DU[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:UU[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(t,e){return e-t}):void 0,tileSize:n.tileSize}}},t}(),VU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YU=[null],WU=oy(YU,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:KU}),XU=oy(YU,{node:function(t,e){var r=e[0],n=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[i]=o;var a=sy({tags:{}},HU,t,e);if(!lt(a.tags)){var s=new en(o);ii(s,!1,r);var u=new ri(s);u.setId(i),u.setProperties(a.tags,!0),n.features.push(u)}},way:function(t,e){var r=sy({id:t.getAttribute("id"),ndrefs:[],tags:{}},WU,t,e);e[e.length-1].ways.push(r)}}),ZU=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=yr("EPSG:4326"),e}return VU(e,t),e.prototype.readFeaturesFromNode=function(t,e){var r=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=sy({nodes:{},ways:[],features:[]},XU,t,[r]),i=0;i<n.ways.length;i++){for(var o=n.ways[i],a=[],s=0,u=o.ndrefs.length;s<u;s++){vt(a,n.nodes[o.ndrefs[s]])}var l=void 0;ii(l=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Yn(a,Xr.XY,[a.length]):new Ln(a,Xr.XY),!1,r);var c=new ri(l);c.setId(o.id),c.setProperties(o.tags,!0),n.features.push(c)}if(n.features)return n.features}return[]},e}(Um),HU=oy(YU,{tag:KU});function KU(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var $U=ZU;function JU(t,e,r,n,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var u=e;u<r;){var l=t[u++];a[s++]=t[u++],a[s++]=l;for(var c=2;c<n;++c)a[s++]=t[u++]}return a.length=s,a}var QU=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function tq(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var u=t[a],l=u-o[n];o[n]=u,t[a]=l}return rq(t,i)}function eq(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=nq(t,i),s=0,u=a.length;s<u;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function rq(t,e){for(var r=e||1e5,n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*r);return function(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",r=0,n=t.length;r<n;++r)e+=iq(t[r]);return e}(t)}(t)}function nq(t,e){for(var r=e||1e5,n=function(t){for(var e=function(t){for(var e=[],r=0,n=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(e.push(r),r=0,n=0):n+=5}return e}(t),r=0,n=e.length;r<n;++r){var i=e[r];e[r]=1&i?~(i>>1):i>>1}return e}(t),i=0,o=n.length;i<o;++i)n[i]/=r;return n}function iq(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+=String.fromCharCode(e)}var oq=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=yr("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:Xr.XY,r}return QU(e,t),e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new ri(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=Hr(this.geometryLayout_),n=eq(t,r,this.factor_);JU(n,0,n.length,r,n);var i=an(n,0,n.length,r);return ii(new Ln(i,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):(Ut(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=ii(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return JU(r,0,r.length,n,r),tq(r,n,this.factor_)},e}(DF),aq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sq=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.layerName_=n.layerName,r.layers_=n.layers?n.layers:null,r.dataProjection=yr(n.dataProjection?n.dataProjection:"EPSG:4326"),r}return aq(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r=t,n=void 0,i=null,o=null;r.transform&&(i=(n=r.transform).scale,o=n.translate);var a=r.arcs;n&&function(t,e,r){for(var n=0,i=t.length;n<i;++n)fq(t[n],e,r)}(a,i,o);var s=[],u=r.objects,l=this.layerName_,c=void 0;for(var h in u)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===u[h].type?(c=u[h],s.push.apply(s,cq(c,a,i,o,l,h,e))):(c=u[h],s.push(hq(c,a,i,o,l,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(li),uq={Point:function(t,e,r){var n=t.coordinates;e&&r&&pq(n,e,r);return new en(n)},LineString:function(t,e){var r=lq(t.arcs,e);return new Ln(r)},Polygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=lq(t.arcs[n],e);return new Yn(r)},MultiPoint:function(t,e,r){var n=t.coordinates;if(e&&r)for(var i=0,o=n.length;i<o;++i)pq(n[i],e,r);return new cn(n)},MultiLineString:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=lq(t.arcs[n],e);return new $n(r)},MultiPolygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n){for(var o=t.arcs[n],a=[],s=0,u=o.length;s<u;++s)a[s]=lq(o[s],e);r[n]=a}return new ti(r)}};function lq(t,e){for(var r,n,i=[],o=0,a=t.length;o<a;++o)r=t[o],o>0&&i.pop(),n=r>=0?e[r]:e[~r].slice().reverse(),i.push.apply(i,n);for(var s=0,u=i.length;s<u;++s)i[s]=i[s].slice();return i}function cq(t,e,r,n,i,o,a){for(var s=t.geometries,u=[],l=0,c=s.length;l<c;++l)u[l]=hq(s[l],e,r,n,i,o,a);return u}function hq(t,e,r,n,i,o,a){var s,u=t.type,l=uq[u];s="Point"===u||"MultiPoint"===u?l(t,r,n):l(t,e);var c=new ri;c.setGeometry(ii(s,!1,a)),void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function fq(t,e,r){for(var n=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,pq(s,e,r)}}function pq(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}var dq=sq,yq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gq=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new QE,r.layers_=n.layers?n.layers:null,r}return yq(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var i=0,o=t.childNodes.length;i<o;i++){var a=t.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var s=a,u=e[0],l=s.localName.replace("_layer","");if(!this.layers_||yt(this.layers_,l)){var c=l+"_feature";u.featureType=c,u.featureNS=this.featureNS_;var h={};h[c]=Kd(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var f=oy([u.featureNS,null],h);s.setAttribute("namespaceURI",this.featureNS_);var p=sy([],f,s,e,this.gmlFormat_);p&&vt(n,p)}}}if("FeatureCollection"==r){var d=sy([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);d&&(n=d)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&at(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(Um),mq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vq="addfeatures",_q=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.features=n,o.file=r,o.projection=i,o}return mq(e,t),e}(Mt);function bq(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(Ct.LOAD,this.handleResult_.bind(this,i)),o.readAsText(i)}}function wq(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var xq=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{handleEvent:xt})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?yr(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return mq(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),i=this.projection_;i||(i=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,u=o.length;s<u;++s){var l=new o[s];if((a=this.tryReadFeatures_(l,r,{featureProjection:i}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new _q(vq,t,a,i))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[ct(e,Ct.DROP,bq,this),ct(e,Ct.DRAGENTER,wq,this),ct(e,Ct.DRAGOVER,wq,this),ct(e,Ct.DROP,wq,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(ft),this.dropListenKeys_=null)},e}(wh),Eq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sq=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).condition_=n.condition?n.condition:Rh,r.lastAngle_=void 0,r.lastMagnitude_=void 0,r.lastScaleDelta_=0,r.duration_=void 0!==n.duration?n.duration:400,r}return Eq(e,t),e.prototype.handleDragEvent=function(t){if(Nh(t)){var e=t.map,r=e.getSize(),n=t.pixel,i=n[0]-r[0]/2,o=r[1]/2-n[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),u=e.getView();if(void 0!==this.lastAngle_){var l=this.lastAngle_-a;u.adjustRotationInternal(l)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!Nh(t))return!0;var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Nh(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(Gh),Oq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tq={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Mq="drawstart",Iq="drawend",Pq="drawabort",Cq=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return Oq(e,t),e}(Mt);var Lq=function(t){function e(e){var r=this,n=e;n.stopDown||(n.stopDown=Et),(r=t.call(this,n)||this).shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(t){var e;t===De.POINT||t===De.MULTI_POINT?e=Tq.POINT:t===De.LINE_STRING||t===De.MULTI_LINE_STRING?e=Tq.LINE_STRING:t===De.POLYGON||t===De.MULTI_POLYGON?e=Tq.POLYGON:t===De.CIRCLE&&(e=Tq.CIRCLE);return e}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:r.mode_===Tq.POLYGON?3:2,r.maxPoints_=e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:xt;var i,o=e.geometryFunction;if(!o)if(r.type_===De.CIRCLE)o=function(t,e,r){var n=e||new on([NaN,NaN]),i=kr(t[0],r),o=Cc(i,kr(t[1],r));n.setCenterAndRadius(i,Math.sqrt(o));var a=Cr();return a&&n.transform(r,a),n};else{var a,s=r.mode_;s===Tq.POINT?a=en:s===Tq.LINE_STRING?a=Ln:s===Tq.POLYGON&&(a=Yn),o=function(t,e,r){var n=e;return n?s===Tq.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new a(t),n}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new Q_({source:new ub({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=Io(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:kh,r.freehandCondition_,e.freehand?r.freehandCondition_=Ih:r.freehandCondition_=e.freehandCondition?e.freehandCondition:Rh,r.addEventListener(Dt(vh.ACTIVE),r.updateState_),r}return Oq(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===Ct.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==Tq.POINT&&this.freehandCondition_(e);var r=e.type===Yl.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===Yl.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===Yl.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Yl.POINTERDOWN?n=!1:r?(n=e.type===Yl.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===Yl.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Yl.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Xl(Yl.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.mode_===Tq.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===Tq.POINT&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_];if(this.mode_===Tq.LINE_STRING)r=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===Tq.POLYGON){var i=this.sketchCoords_;r=i[0].length>this.minPoints_,n=[i[0][0],i[0][i[0].length-2]]}if(r)for(var o=t.map,a=0,s=n.length;a<s;a++){var u=n[a],l=o.getPixelFromCoordinate(u),c=t.pixel,h=c[0]-l[0],f=c[1]-l[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+f*f)<=p){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new ri(new en(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,r=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===Tq.POINT?this.sketchCoords_=e.slice():this.mode_===Tq.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ri(new Ln(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,r);this.sketchFeature_=new ri,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Cq(Mq,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,n,i=t.coordinate,o=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===Tq.POINT?r=this.sketchCoords_:this.mode_===Tq.POLYGON?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=i[0],r[1]=i[1],this.geometryFunction_(this.sketchCoords_,o,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(i);if(o.getType()==De.POLYGON&&this.mode_!==Tq.POLYGON){this.sketchLine_||(this.sketchLine_=new ri);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new Ln(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===Tq.LINE_STRING?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,i)):this.mode_===Tq.POLYGON&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===Tq.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,r),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===Tq.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,r)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===Tq.LINE_STRING?(e.pop(),this.geometryFunction_(e,r,n)):this.mode_===Tq.POLYGON&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),this.type_===De.MULTI_POINT?t.setGeometry(new cn([e])):this.type_===De.MULTI_LINE_STRING?t.setGeometry(new $n([e])):this.type_===De.MULTI_POLYGON&&t.setGeometry(new ti([e])),this.dispatchEvent(new Cq(Iq,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new Cq(Pq,t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,r=[];e===Tq.LINE_STRING?r=this.sketchCoords_:e===Tq.POLYGON&&(r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=r.pop(),i=0;i<t.length;i++)this.addToDrawing_(t[i]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Cq(Mq,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(Gh),kq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rq={EXTENTCHANGED:"extentchanged"},Aq=function(t){function e(e){var r=t.call(this,Rq.EXTENTCHANGED)||this;return r.extent=e,r}return kq(e,t),e}(Mt);function Nq(){var t=Io();return function(e,r){return t[De.POINT]}}function Fq(t){return function(e){return Yt([t,e])}}function jq(t,e){return t[0]==e[0]?function(r){return Yt([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return Yt([t,[e[0],r[1]]])}:null}var Dq=function(t){function e(e){var r,n=this,i=e||{};return(n=t.call(this,i)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new Q_({source:new ub({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(r=Io(),function(t,e){return r[De.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new Q_({source:new ub({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:Nq(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return kq(e,t),e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);i.sort(function(t,e){return kc(r,t)-kc(r,e)});var o=i[0],a=Sc(r,o),s=e.getPixelFromCoordinateInternal(a);if(Lc(t,s)<=this.pixelTolerance_){var u=e.getPixelFromCoordinateInternal(o[0]),l=e.getPixelFromCoordinateInternal(o[1]),c=Cc(s,u),h=Cc(s,l),f=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,n=this.snapToVertex_(e,r);n||(n=r.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Xn(t)):e.setGeometry(void 0):(e=new ri(t?Xn(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new ri(new en(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=Yl.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,n=this.getExtentInternal(),i=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=Fq(o(i)):null!==a?this.pointerHandler_=jq(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=jq(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=Fq(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==he(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return Rr(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new Aq(this.extent_))},e}(Gh),Gq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bq=1,zq=[0,0,0,0],Uq=[],qq="modifystart",Vq="modifyend",Yq=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.mapBrowserEvent=n,i}return Gq(e,t),e}(Mt);function Wq(t,e){return t.index-e.index}function Xq(t,e,r){var n=e.geometry;if(n.getType()===De.CIRCLE){var i=n;if(e.index===Bq){var o=Cr();o&&(i=i.clone().transform(o,r));var a=Cc(i.getCenter(),kr(t,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var u=kr(t,r);return Uq[0]=kr(e.segment[0],r),Uq[1]=kr(e.segment[1],r),kc(u,Uq)}function Zq(t,e,r){var n=e.geometry;if(n.getType()===De.CIRCLE&&e.index===Bq){var i=n,o=Cr();return o&&(i=i.clone().transform(o,r)),Lr(i.getClosestPoint(kr(t,r)),r)}var a=kr(t,r);return Uq[0]=kr(e.segment[0],r),Uq[1]=kr(e.segment[1],r),Lr(Sc(a,Uq),r)}var Hq=function(t){function e(e){var r,n,i=t.call(this,e)||this;if(i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:Fh,i.defaultDeleteCondition_=function(t){return Oh(t)&&Lh(t)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Ih,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.modified_=!1,i.rBush_=new ob,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new Q_({source:new ub({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(r=Io(),function(t,e){return r[De.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,e.source?(i.source_=e.source,n=new Bl(i.source_.getFeatures()),i.source_.addEventListener(ib.ADDFEATURE,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(ib.REMOVEFEATURE,i.handleSourceRemove_.bind(i))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return i.features_=n,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(Fl.ADD,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(Fl.REMOVE,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i}return Gq(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var r=this.SEGMENT_WRITERS_[e.getType()];r&&r(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(Ct.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Yq(qq,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Ct.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach(function(e){t===e.feature&&r.push(e)});for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Yt(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(Yt(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(Yt(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,geometry:e,depth:[a,n],index:l,segment:h};this.rBush_.insert(Yt(h),f)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[r,r]},i={feature:t,geometry:e,index:Bq,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert(re(r),n);var a=e,s=Cr();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=Zn(a=a.clone().transform(s,u)).transform(u,s)}this.rBush_.insert(a.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new ri(new en(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Yl.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=Yl.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Yl.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],o=i[0],a=o.depth,s=o.geometry,u=void 0,l=o.segment,c=i[1];e.length<s.getStride();)e.push(l[c][e.length]);switch(s.getType()){case De.POINT:u=e,l[0]=e,l[1]=e;break;case De.MULTI_POINT:(u=s.getCoordinates())[o.index]=e,l[0]=e,l[1]=e;break;case De.LINE_STRING:(u=s.getCoordinates())[o.index+c]=e,l[c]=e;break;case De.MULTI_LINE_STRING:case De.POLYGON:(u=s.getCoordinates())[a[0]][o.index+c]=e,l[c]=e;break;case De.MULTI_POLYGON:(u=s.getCoordinates())[a[1]][a[0]][o.index+c]=e,l[c]=e;break;case De.CIRCLE:if(l[0]=e,l[1]=e,0===o.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=t.map.getView().getProjection(),f=Lc(kr(s.getCenter(),h),kr(e,h)),p=Cr();if(p){var d=s.clone().transform(p,h);d.setRadius(f),f=d.transform(h,p).getRadius()}s.setRadius(f),this.changingFeature_=!1}}u&&this.setGeometryCoordinates_(s,u)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=t.map.getView().getProjection(),i=[],o=r.getGeometry().getCoordinates(),a=Yt([o]),s=this.rBush_.getInExtent(a),u={};s.sort(Wq);for(var l=0,c=s.length;l<c;++l){var h=s[l],f=h.segment,p=nt(h.feature),d=h.depth;if(d&&(p+="-"+d.join("-")),u[p]||(u[p]=new Array(2)),h.geometry.getType()!==De.CIRCLE||h.index!==Bq)if(!Mc(f[0],o)||u[p][0])if(!Mc(f[1],o)||u[p][1])nt(f)in this.vertexSegments_&&!u[p][0]&&!u[p][1]&&this.insertVertexCondition_(t)&&i.push([h,o]);else{if((h.geometry.getType()===De.LINE_STRING||h.geometry.getType()===De.MULTI_LINE_STRING)&&u[p][0]&&0===u[p][0].index)continue;this.dragSegments_.push([h,1]),u[p][1]=h}else this.dragSegments_.push([h,0]),u[p][0]=h;else Mc(Zq(e,h,n),o)&&!u[p][0]&&(this.dragSegments_.push([h,0]),u[p][0]=h)}i.length&&this.willModifyFeatures_(t);for(var y=i.length-1;y>=0;--y)this.insertVertex_.apply(this,i[y])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()===De.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(re(i),o);var s=n,u=Cr();if(u){var l=t.map.getView().getProjection();s=Zn(s=s.clone().transform(u,l)).transform(l,u)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(Yt(r.segment),r)}return this.modified_&&(this.dispatchEvent(new Yq(Vq,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,r){var n=r||e.getCoordinateFromPixel(t),i=e.getView().getProjection(),o=Rr(Wt(Ar(re(n,zq),i),e.getView().getResolution()*this.pixelTolerance_,zq),i),a=this.rBush_.getInExtent(o);if(a.length>0){a.sort(function(t,e){return Xq(n,t,i)-Xq(n,e,i)});var s=a[0],u=s.segment,l=Zq(n,s,i),c=e.getPixelFromCoordinate(l),h=Lc(t,c);if(h<=this.pixelTolerance_){var f={};if(s.geometry.getType()===De.CIRCLE&&s.index===Bq)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var p=e.getPixelFromCoordinate(u[0]),d=e.getPixelFromCoordinate(u[1]),y=Cc(c,p),g=Cc(c,d);h=Math.sqrt(Math.min(y,g)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(l=y>g?u[1]:u[0]),this.createOrUpdateVertexFeature_(l);for(var m=1,v=a.length;m<v;++m){var _=a[m].segment;if(!(Mc(u[0],_[0])&&Mc(u[1],_[1])||Mc(u[0],_[1])&&Mc(u[1],_[0])))break;f[nt(_)]=!0}}return f[nt(u)]=!0,void(this.vertexSegments_=f)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case De.MULTI_LINE_STRING:case De.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case De.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case De.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,s,a,1);var l={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};u.insert(Yt(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};u.insert(Yt(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Yl.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new Yq(Vq,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,r,n,i,o,a,s,u,l,c,h=this.dragSegments_,f={},p=!1;for(i=h.length-1;i>=0;--i)c=nt((l=(r=h[i])[0]).feature),l.depth&&(c+="-"+l.depth.join("-")),c in f||(f[c]={}),0===r[1]?(f[c].right=l,f[c].index=l.index):1==r[1]&&(f[c].left=l,f[c].index=l.index+1);for(c in f){switch(u=f[c].right,a=f[c].left,(s=(o=f[c].index)-1)<0&&(s=0),t=e=(n=(l=void 0!==a?a:u).geometry).getCoordinates(),p=!1,n.getType()){case De.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(o,1),p=!0);break;case De.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case De.MULTI_POLYGON:t=t[l.depth[1]];case De.POLYGON:(t=t[l.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.setGeometryCoordinates_(n,e);var d=[];if(void 0!==a&&(this.rBush_.remove(a),d.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),d.push(u.segment[1])),void 0!==a&&void 0!==u){var y={depth:l.depth,feature:l.feature,geometry:l.geometry,index:s,segment:d};this.rBush_.insert(Yt(y.segment),y)}this.updateSegmentIndices_(n,o,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),function(i){i.geometry===t&&(void 0===r||void 0===i.depth||bt(i.depth,r))&&i.index>e&&(i.index+=n)})},e}(Gh),Kq=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function $q(t){return t.feature?t.feature:t.element?t.element:void 0}var Jq=[],Qq=function(t){function e(e){var r=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=xt),i.stopDown||(i.stopDown=Et),(r=t.call(this,i)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new ob,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return Kq(e,t),e.prototype.addFeature=function(t,e){var r=void 0===e||e,n=nt(t),i=t.getGeometry();if(i){var o=this.SEGMENT_WRITERS_[i.getType()];o&&(this.indexedFeaturesExtents_[n]=i.getExtent([1/0,1/0,-1/0,-1/0]),o(t,i))}r&&(this.featureChangeListenerKeys_[n]=ct(t,Ct.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r.snapped&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=$q(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=$q(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=nt(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=ut(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,n=nt(t),i=this.indexedFeaturesExtents_[n];if(i){var o=this.rBush_,a=[];o.forEachInExtent(i,function(e){t===e.feature&&a.push(e)});for(var s=a.length-1;s>=0;--s)o.remove(a[s])}r&&(ft(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(ft),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(ct(this.features_,Fl.ADD,this.handleFeatureAdd_,this),ct(this.features_,Fl.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(ct(this.source_,ib.ADDFEATURE,this.handleFeatureAdd_,this),ct(this.source_,ib.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var n=Yt([r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),i=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(i=i.filter(function(t){return t.feature.getGeometry().getType()!==De.CIRCLE}));var o=!1,a=null,s=null;if(0===i.length)return{snapped:o,vertex:a,vertexPixel:s};for(var u,l=r.getView().getProjection(),c=kr(e,l),h=1/0,f=0;f<i.length;++f){var p=i[f];Jq[0]=kr(p.segment[0],l),Jq[1]=kr(p.segment[1],l);var d=kc(c,Jq);d<h&&(u=p,h=d)}var y=u.segment;if(this.vertex_&&!this.edge_){var g=r.getPixelFromCoordinate(y[0]),m=r.getPixelFromCoordinate(y[1]),v=Cc(t,g),_=Cc(t,m);Math.sqrt(Math.min(v,_))<=this.pixelTolerance_&&(o=!0,a=v>_?y[1]:y[0],s=r.getPixelFromCoordinate(a))}else if(this.edge_){var b=u.feature.getGeometry().getType()===De.CIRCLE;if(b){var w=u.feature.getGeometry(),x=Cr();x&&(w=w.clone().transform(x,l)),a=Lr(function(t,e){var r=e.getRadius(),n=e.getCenter(),i=n[0],o=n[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var u=Math.sqrt(a*a+s*s);return[i+r*a/u,o+r*s/u]}(c,w),l)}else Jq[0]=kr(y[0],l),Jq[1]=kr(y[1],l),a=Lr(Sc(c,Jq),l);if(Lc(t,s=r.getPixelFromCoordinate(a))<=this.pixelTolerance_&&(o=!0,this.vertex_&&!b)){g=r.getPixelFromCoordinate(y[0]),m=r.getPixelFromCoordinate(y[1]),v=Cc(s,g),_=Cc(s,m);Math.sqrt(Math.min(v,_))<=this.pixelTolerance_&&(a=v>_?y[1]:y[0],s=r.getPixelFromCoordinate(a))}}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var r=this.getMap().getView().getProjection(),n=e,i=Cr();i&&(n=n.clone().transform(i,r));var o=Zn(n);i&&o.transform(r,i);for(var a=o.getCoordinates()[0],s=0,u=a.length-1;s<u;++s){var l=a.slice(s,s+2),c={feature:t,segment:l};this.rBush_.insert(Yt(l),c)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(t,r[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(Yt(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(Yt(u),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,segment:h};this.rBush_.insert(Yt(h),f)}},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(Yt(u),l)}},e}(Gh),tV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eV="translatestart",rV="translating",nV="translateend",iV=function(t){function e(e,r,n,i,o){var a=t.call(this,e)||this;return a.features=r,a.coordinate=n,a.startCoordinate=i,a.mapBrowserEvent=o,a}return tV(e,t),e}(Mt),oV=function(t){function e(e){var r,n=this,i=e||{};if((n=t.call(this,i)||this).lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==i.features?i.features:null,i.layers)if("function"==typeof i.layers)r=i.layers;else{var o=i.layers;r=function(t){return yt(o,t)}}else r=xt;return n.layerFilter_=r,n.filter_=i.filter?i.filter:xt,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.lastFeature_=null,n.addEventListener(Dt(vh.ACTIVE),n.handleActiveChanged_),n}return tV(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new Bl([this.lastFeature_]);return this.dispatchEvent(new iV(eV,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new Bl([this.lastFeature_]);return this.dispatchEvent(new iV(nV,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],i=this.features_||new Bl([this.lastFeature_]);i.forEach(function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new iV(rV,i,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||yt(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(Gh);function aV(t,e,r){for(var n,i,o,a,s,u,l=[],c=t(0),h=t(1),f=e(c),p=e(h),d=[h,c],y=[p,f],g=[1,0],m={},v=1e5;--v>0&&g.length>0;)o=g.pop(),c=d.pop(),f=y.pop(),(u=o.toString())in m||(l.push(f[0],f[1]),m[u]=!0),a=g.pop(),h=d.pop(),p=y.pop(),ke((i=e(n=t(s=(o+a)/2)))[0],i[1],f[0],f[1],p[0],p[1])<r?(l.push(p[0],p[1]),m[u=a.toString()]=!0):(g.push(a,s,s,o),y.push(p,i,i,f),d.push(h,n,n,c));return l}var sV,uV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lV=new Eo({color:"rgba(0,0,0,0.2)"}),cV=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],hV=function(t){function e(e){var r=this,n=e||{},i=at({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(r=t.call(this,i)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==n.targetSize?n.targetSize:100,r.maxLines_=void 0!==n.maxLines?n.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:lV,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,n.showLabels&&(r.lonLabelFormatter_=null==n.lonLabelFormatter?Oc.bind(r,"EW"):n.lonLabelFormatter,r.latLabelFormatter_=null==n.latLabelFormatter?Oc.bind(r,"NS"):n.latLabelFormatter,r.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,r.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,r.lonLabelStyleBase_=new Co({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new Mb({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new xo({color:"rgba(0,0,0,1)"}),stroke:new Eo({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(r),r.latLabelStyleBase_=new Co({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new Mb({font:"12px Calibri,sans-serif",textAlign:"right",fill:new xo({color:"rgba(0,0,0,1)"}),stroke:new Eo({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(ec.POSTRENDER,r.drawLabels_.bind(r))),r.intervals_=void 0!==n.intervals?n.intervals:cV,r.setSource(new ub({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new Bl,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),r.featurePool_=[],r.lineStyle_=new Co({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.setRenderOrder(null),r}return uV(e,t),e.prototype.strategyFunction=function(t,e){var r,n,i,o=t.slice();return this.projection_&&this.getSource().getWrapX()&&Te(o,this.projection_),this.loadedExtent_&&(r=this.loadedExtent_,n=o,i=e,Math.abs(r[0]-n[0])<i&&Math.abs(r[2]-n[2])<i&&Math.abs(r[1]-n[1])<i&&Math.abs(r[3]-n[3])<i?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},e.prototype.loaderFunction=function(t,e,r){this.loadedExtent_=t;var n=this.getSource(),i=ve(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.renderedExtent_&&ie(this.renderedExtent_,i)||(this.renderedExtent_=i,Ee(i)))){var o=de(i),a=e*e/4;(!this.projection_||!wr(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(i,o,e,a);var s,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)s=new ri,this.featurePool_.push(s);var l=n.getFeaturesCollection();l.clear();var c,h,f=0;for(c=0,h=this.meridians_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.meridians_[c]),s.setStyle(this.lineStyle_),l.push(s);for(c=0,h=this.parallels_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.parallels_[c]),s.setStyle(this.lineStyle_),l.push(s)}},e.prototype.addMeridian_=function(t,e,r,n,i,o){var a=this.getMeridian_(t,e,r,n,o);if(xe(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new en([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,r,n,i,o){var a=this.getParallel_(t,e,r,n,o);if(xe(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new en([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,r=t.frameState.extent,n=de(r),i=r;if(e){var o=we(r),a=me(r),s=Math.abs(Math.cos(e)),u=Math.abs(Math.sin(e)),l=(u*a-s*o)/(u*u-s*s),c=(u*o-s*a)/(u*u-s*s);i=[n[0]-l/2,n[1]-c/2,n[0]+l/2,n[1]+c/2]}var h=0,f=0,p=this.latLabelPosition_<.5,d=this.projection_.getExtent(),y=we(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Kt(d,r)&&(h=Math.floor((r[0]-d[0])/y),f=Math.ceil((r[2]-d[2])/y),p=p!==Math.abs(e)>Math.PI/2);for(var g=kf(t),m=h;m<=f;++m){var v=this.meridians_.length+this.parallels_.length,_=void 0,b=void 0,w=void 0,x=void 0;if(this.meridiansLabels_)for(b=0,w=this.meridiansLabels_.length;b<w;++b){var E=this.meridians_[b];if(e||0!==m)(S=E.clone()).translate(m*y,0),S.rotate(-e,n),(x=this.getMeridianPoint_(S,i,b)).rotate(e,n);else x=this.getMeridianPoint_(E,r,b);(_=this.featurePool_[v++]).setGeometry(x),_.set("graticule_label",this.meridiansLabels_[b].text),g.drawFeature(_,this.lonLabelStyle_(_))}if(this.parallelsLabels_&&(m===h&&p||m===f&&!p))for(b=0,w=this.parallels_.length;b<w;++b){var S;E=this.parallels_[b];if(e||0!==m)(S=E.clone()).translate(m*y,0),S.rotate(-e,n),(x=this.getParallelPoint_(S,i,b)).rotate(e,n);else x=this.getParallelPoint_(E,r,b);(_=this.featurePool_[v++]).setGeometry(x),_.set("graticule_label",this.parallelsLabels_[b].text),g.drawFeature(_,this.latLabelStyle_(_))}}},e.prototype.createGraticule_=function(t,e,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=we(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Kt(a,t)&&(we(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var u=[Ce(e[0],this.minX_,this.maxX_),Ce(e[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(u);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,h,f,p,d=Ce(l[0],this.minLon_,this.maxLon_),y=Ce(l[1],this.minLat_,this.maxLat_),g=this.maxLines_,m=t;o||(m=[Ce(t[0],this.minX_,this.maxX_),Ce(t[1],this.minY_,this.maxY_),Ce(t[2],this.minX_,this.maxX_),Ce(t[3],this.minY_,this.maxY_)]);var v=Oe(m,this.toLonLatTransform_,void 0,8),_=v[3],b=v[2],w=v[1],x=v[0];if(o||(Ht(m,this.bottomLeft_)&&(x=this.minLon_,w=this.minLat_),Ht(m,this.bottomRight_)&&(b=this.maxLon_,w=this.minLat_),Ht(m,this.topLeft_)&&(x=this.minLon_,_=this.maxLat_),Ht(m,this.topRight_)&&(b=this.maxLon_,_=this.maxLat_),_=Ce(_,y,this.maxLat_),b=Ce(b,d,this.maxLon_),w=Ce(w,this.minLat_,y),x=Ce(x,this.minLon_,d)),p=Ce(d=Math.floor(d/i)*i,this.minLon_,this.maxLon_),h=this.addMeridian_(p,w,_,n,t,0),c=0,o)for(;(p-=i)>=x&&c++<g;)h=this.addMeridian_(p,w,_,n,t,h);else for(;p!=this.minLon_&&c++<g;)p=Math.max(p-i,this.minLon_),h=this.addMeridian_(p,w,_,n,t,h);if(p=Ce(d,this.minLon_,this.maxLon_),c=0,o)for(;(p+=i)<=b&&c++<g;)h=this.addMeridian_(p,w,_,n,t,h);else for(;p!=this.maxLon_&&c++<g;)p=Math.min(p+i,this.maxLon_),h=this.addMeridian_(p,w,_,n,t,h);for(this.meridians_.length=h,this.meridiansLabels_&&(this.meridiansLabels_.length=h),f=Ce(y=Math.floor(y/i)*i,this.minLat_,this.maxLat_),h=this.addParallel_(f,x,b,n,t,0),c=0;f!=this.minLat_&&c++<g;)f=Math.max(f-i,this.minLat_),h=this.addParallel_(f,x,b,n,t,h);for(f=Ce(y,this.minLat_,this.maxLat_),c=0;f!=this.maxLat_&&c++<g;)f=Math.min(f+i,this.maxLat_),h=this.addParallel_(f,x,b,n,t,h);this.parallels_.length=h,this.parallelsLabels_&&(this.parallelsLabels_.length=h)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,u=this.intervals_.length;s<u;++s){var l=Ce(this.intervals_[s]/2,0,90),c=Ce(r,-90+l,90-l);if(o[0]=e-l,o[1]=c-l,a[0]=e+l,a[1]=c+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return aV(function(n){return[t,e+(r-e)*n]},Er(yr("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates(Xr.XY,o),a.changed()):(a=new Ln(o,Xr.XY),this.meridians_[i]=a),a},e.prototype.getMeridianPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=1,o=n.length-1;n[i]>n[o]&&(i=o,o=1);var a=Math.max(e[1],n[i]),s=Math.min(e[3],n[o]),u=Ce(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),l=[n[i-1]+(n[o-1]-n[i-1])*(u-n[i])/(n[o]-n[i]),u],c=this.meridiansLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return aV(function(n){return[e+(r-e)*n,t]},Er(yr("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates(Xr.XY,o),a.changed()):a=new Ln(o,Xr.XY),a},e.prototype.getParallelPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=0,o=n.length-2;n[i]>n[o]&&(i=o,o=0);var a=Math.max(e[0],n[i]),s=Math.min(e[2],n[o]),u=Ce(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),l=[u,n[i+1]+(n[o+1]-n[i+1])*(u-n[i])/(n[o]-n[i])],c=this.parallelsLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=yr("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];var n=Er(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var i=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,r){for(var o=r||2,a=n(t,e,o),s=0,u=a.length;s<u;s+=o)a[s]<i&&(a[s]+=360);return a}}this.fromLonLatTransform_=Er(e,t);var o=Oe([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(de(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(Q_),fV=34962,pV=34963,dV=35048,yV=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function gV(t,e){for(var r=yV.length,n=0;n<r;++n)try{var i=t.getContext(yV[n],e);if(i)return i}catch(t){}return null}var mV={STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:dV};function vV(t){switch(t){case fV:return Float32Array;case pV:return Uint32Array;default:return Float32Array}}var _V=function(){function t(t,e){this.array=null,this.type=t,Ut(t===fV||t===pV,62),this.usage=void 0!==e?e:mV.STATIC_DRAW}return t.prototype.ofSize=function(t){this.array=new(vV(this.type))(t)},t.prototype.fromArray=function(t){this.array=vV(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(vV(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),bV={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};function wV(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var xV="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",EV="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n",SV=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||xV),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||EV),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var r=this.getGL(),n=t.size;r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)})},t}(),OV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TV={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},MV={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function IV(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*PV(n.type)}return e}function PV(t){switch(t){case MV.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case MV.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case MV.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case MV.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var CV=function(t){function e(e){var r=t.call(this)||this,n=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.canvas_.style.left="0",r.gl_=gV(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,Ut(yt(function(){if(!sV){var t=gV(document.createElement("canvas"));t&&(sV=t.getSupportedExtensions())}return sV}(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),r.canvas_.addEventListener(bV.LOST,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(bV.RESTORED,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=[1,0,0,1,0,0],r.offsetScaleMatrix_=[1,0,0,1,0,0],r.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms)for(var o in n.uniforms)r.uniforms_.push({name:o,value:n.uniforms[o]});return r.postProcessPasses_=n.postProcesses?n.postProcesses.map(function(t){return new SV({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})}):[new SV({webGlContext:i})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return OV(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),r=nt(t),n=this.bufferCache_[r];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=n);e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=nt(t),n=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(bV.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(bV.RESTORED,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),r=this.getCanvas(),n=t.size,i=t.pixelRatio;r.width=n[0]*i,r.height=n[1]*i,r.style.width=n[0]+"px",r.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL(),n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Fr(this.offsetScaleMatrix_);Br(n,2/e[0],2/e[1]);var i,o,a,s,u=Fr(this.offsetRotateMatrix_);0!==r&&(i=u,o=-r,a=Math.cos(o),s=Math.sin(o),jr(i,Dr(Nr,a,s,-s,a,0,0))),this.setUniformMatrixValue(TV.OFFSET_SCALE_MATRIX,wV(this.tmpMat4_,n)),this.setUniformMatrixValue(TV.OFFSET_ROTATION_MATRIX,wV(this.tmpMat4_,u)),this.setUniformFloatValue(TV.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(TV.ZOOM,t.viewState.zoom),this.setUniformFloatValue(TV.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,wV(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+r.getShaderInfoLog(n)),r.getShaderInfoLog(i)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+r.getShaderInfoLog(i));var o=r.createProgram();return r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return Fr(e),zr(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=IV(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||5126,e,r),r+=i.size*PV(i.type)}},e.prototype.handleWebGLContextLost=function(){st(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(pt),LV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kV={GENERATE_BUFFERS:"GENERATE_BUFFERS"},RV=function(t){function e(e,r){var n=t.call(this,e)||this,i=r||{};return n.helper=new CV({postProcesses:i.postProcesses,uniforms:i.uniforms}),n}return LV(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(fd);var AV=RV,NV=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),FV=URL.createObjectURL(NV);var jV=new Uint8Array(4),DV=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){bt(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return jV[0]=0,jV[1]=0,jV[2]=0,jV[3]=0,jV;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return jV[0]=this.data_[4*r],jV[1]=this.data_[4*r+1],jV[2]=this.data_[4*r+2],jV[3]=this.data_[4*r+3],jV},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),GV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BV=function(t){function e(e,r){var n=this,i=r.uniforms||{},o=[1,0,0,1,0,0];i[TV.PROJECTION_MATRIX]=o,(n=t.call(this,e,{uniforms:i,postProcesses:r.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new _V(fV,dV),n.hitVerticesBuffer_=new _V(fV,dV),n.indicesBuffer_=new _V(pV,dV),n.program_=n.helper.getProgram(r.fragmentShader,r.vertexShader),n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var a=r.attributes?r.attributes.map(function(t){return{name:"a_"+t.name,size:1,type:MV.FLOAT}}):[];n.attributes=[{name:"a_position",size:2,type:MV.FLOAT},{name:"a_index",size:1,type:MV.FLOAT}].concat(a),n.hitDetectionAttributes=[{name:"a_position",size:2,type:MV.FLOAT},{name:"a_index",size:1,type:MV.FLOAT},{name:"a_hitColor",size:4,type:MV.FLOAT},{name:"a_featureUid",size:1,type:MV.FLOAT}].concat(a),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=[1/0,1/0,-1/0,-1/0],n.currentTransform_=o,n.renderTransform_=[1,0,0,1,0,0],n.invertRenderTransform_=[1,0,0,1,0,0],n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new DV(n.helper),n.worker_=new Worker(FV),n.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===kV.GENERATE_BUFFERS){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,Ur(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var s=n.getLayer().getSource();return n.sourceListenKeys_=[ct(s,ib.ADDFEATURE,n.handleSourceFeatureAdded_,n),ct(s,ib.CHANGEFEATURE,n.handleSourceFeatureChanged_,n),ct(s,ib.REMOVEFEATURE,n.handleSourceFeatureDelete_,n),ct(s,ib.CLEAR,n.handleSourceFeatureClear_,n)],s.forEachFeature(function(t){this.featureCache_[nt(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}.bind(n)),n}return GV(e,t),e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[nt(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[nt(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){var e=t.feature;delete this.featureCache_[nt(e)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var r=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(r.style.opacity)&&(r.style.opacity=n),this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),r},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewState,i=!t.viewHints[gc]&&!t.viewHints[mc],o=!ie(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)){var s=n.projection,u=n.resolution,l=e instanceof h_?e.getRenderBuffer():0,c=Wt(t.extent,l*u);r.loadFeatures(c,u,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),jr(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var r,n,i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,u,l=[],c=[],h=0,f=0;for(var p in this.featureCache_)if((n=(r=this.featureCache_[p]).geometry)&&n.getType()===De.POINT){l[0]=n.getFlatCoordinates()[0],l[1]=n.getFlatCoordinates()[1],Gr(e,l),s=f+6,u=void 0,(u=c||[])[0]=Math.floor(s/256/256/256)/255,u[1]=Math.floor(s/256/256)%256/255,u[2]=Math.floor(s/256)%256/255,u[3]=s%256/255,a=u,this.renderInstructions_[h++]=l[0],this.renderInstructions_[h++]=l[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=l[0],this.hitRenderInstructions_[f++]=l[1],this.hitRenderInstructions_[f++]=a[0],this.hitRenderInstructions_[f++]=a[1],this.hitRenderInstructions_[f++]=a[2],this.hitRenderInstructions_[f++]=a[3],this.hitRenderInstructions_[f++]=Number(p));for(var d=void 0,y=0;y<this.customAttributes.length;y++)d=this.customAttributes[y].callback(r.feature,r.properties),this.renderInstructions_[h++]=d,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=d)}var g={type:kV.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(g.projectionTransform=e,this.worker_.postMessage(g,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var m={type:kV.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=e,m.hitDetection=!0,this.worker_.postMessage(m,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(Ut(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=Gr(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),e+=Math.round(256*t[2]*255),e+=Math.round(255*t[3])}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),u=this.hitRenderInstructions_[s],l=Math.floor(u).toString(),c=this.getLayer().getSource().getFeatureByUid(l);return c?n(c,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(t){ft(t)}),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(AV),zV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UV={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},qV=["#00f","#0ff","#0f0","#ff0","#f00"];var VV=function(t){function e(e){var r=this,n=e||{},i=at({},n);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(r=t.call(this,i)||this).gradient_=null,r.addEventListener(Dt(UV.GRADIENT),r.handleGradientChanged_),r.setGradient(n.gradient?n.gradient:qV),r.setBlur(void 0!==n.blur?n.blur:15),r.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return r.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return zV(e,t),e.prototype.getBlur=function(){return this.get(UV.BLUR)},e.prototype.getGradient=function(){return this.get(UV.GRADIENT)},e.prototype.getRadius=function(){return this.get(UV.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Fi(1,256),r=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),i=0,o=t.length;i<o;++i)r.addColorStop(i*n,t[i]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(UV.BLUR,t)},e.prototype.setGradient=function(t){this.set(UV.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(UV.RADIUS,t)},e.prototype.createRenderer=function(){return new BV(this,{attributes:[{name:"weight",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?Ce(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(UV.RADIUS)+this.get(UV.BLUR))}.bind(this),u_blurSlope:function(){return this.get(UV.RADIUS)/Math.max(1,this.get(UV.BLUR))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},e}(Q_),YV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),WV=function(t){function e(e,r,n,i,o){var a=this,s=void 0!==o?Ui.IDLE:Ui.LOADED;return(a=t.call(this,e,r,n,s)||this).loader_=void 0!==o?o:null,a.canvas_=i,a.error_=null,a}return YV(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Ui.ERROR):this.state=Ui.LOADED,this.changed()},e.prototype.load=function(){this.state==Ui.IDLE&&(this.state=Ui.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(Fo),XV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZV=function(t){function e(e){var r=t.call(this,e)||this;return r.vectorRenderer_=new $_(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],r.renderedPixelToCoordinateTransform_=null,r}return XV(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(this.vectorRenderer_){var e=Gr(this.coordinateToVectorPixelTransform_,Gr(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}return new Promise(function(t,e){t([])})},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,r=t.viewState,n=r.resolution,i=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&Se(a=a.slice(0),this.layerImageRatio_);var s=we(a)/n,u=me(a)/n;if(!i[gc]&&!i[mc]&&!Ee(a)){o.useContainer(null,null,1);var l=o.context,c=at({},t,{declutterItems:[],extent:a,size:[s,u],viewState:at({},t.viewState,{rotation:0})}),h=new WV(a,n,e,l.canvas,function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.renderFrame(c,null),Rf(c,null),t())});h.addEventListener(Ct.CHANGE,function(){h.getState()===Ui.LOADED&&(this.image_=h)}.bind(this)),h.load()}if(this.image_){var f=this.image_,p=f.getResolution()*e/f.getPixelRatio();this.renderedResolution=p,this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.coordinateToVectorPixelTransform_=zr(this.coordinateToVectorPixelTransform_,s/2,u/2,1/p,-1/p,0,-r.center[0],-r.center[1])}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,n,i,o)},e}(Sd),HV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KV=function(t){function e(e){var r=this,n=e||{},i=at({},n);return delete i.imageRatio,(r=t.call(this,i)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,r}return HV(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new ZV(this)},e}(h_);function $V(t,e,r,n){var i=document.createElement("script"),o="olc_"+nt(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+o;var s=setTimeout(function(){a(),r&&r()},1e4);window[o]=function(t){clearTimeout(s),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var JV=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var QV=function(t){function e(e){var r=this,n=void 0!==e.hidpi&&e.hidpi;return(r=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:yr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:Zc.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,r.culture_=void 0!==e.culture?e.culture:"en-us",r.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,r.apiKey_=e.key,r.imagerySet_=e.imagerySet,$V("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return JV(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=Ag(this.getProjection()),i=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],a=Lg({extent:n,minZoom:e.zoomMin,maxZoom:r,tileSize:o});this.tileGrid=a;var s=this.culture_,u=this.hidpi_;if(this.tileUrlFunction=Sg(e.imageUrlSubdomains.map(function(t){var r=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,i){if(t){Md(t[0],t[1],t[2],r);var o=n;return u&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,r,n=t[0],i=new Array(n),o=1<<n-1;for(e=0;e<n;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[e]=String.fromCharCode(r),o>>=1;return i.join("")}(r))}}})),e.imageryProviders){var l=xr(yr("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],n=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(n.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map(function(e){for(var n=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var u=i[o];if(a>=u.zoomMin&&a<=u.zoomMax){var c=u.bbox;if(xe(Oe([c[1],c[0],c[3],c[2]],l),t.extent)){n=!0;break}}}n&&r.push(e.attribution)}),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}.bind(this))}this.setState(Zc.READY)}else this.setState(Zc.ERROR)},e}(Wg),tY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eY=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return r.account_=e.account,r.mapId_=e.map||"",r.config_=e.config||{},r.templateCache_={},r.initializeMap_(),r}return tY(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){at(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var n=void 0;try{n=JSON.parse(r.responseText)}catch(t){return void this.setState(Zc.ERROR)}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(Zc.READY)}else this.setState(Zc.ERROR)},e.prototype.handleInitError_=function(t){this.setState(Zc.ERROR)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(OR),rY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nY={DEFAULT:"default",TRUNCATED:"truncated"},iY=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this,r,n,i,o,a,s)||this;return u.zoomifyImage_=null,u.tileSize_=e,u}return rY(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==rc.LOADED){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var n=Fi(r[0],r[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(dg),oY=function(t){function e(e){var r=this,n=e,i=n.size,o=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:nY.DEFAULT,a=n.tilePixelRatio||1,s=i[0],u=i[1],l=[],c=n.tileSize||uc,h=c*a;switch(o){case nY.DEFAULT:for(;s>h||u>h;)l.push([Math.ceil(s/h),Math.ceil(u/h)]),h+=h;break;case nY.TRUNCATED:for(var f=s,p=u;f>h||p>h;)l.push([Math.ceil(f/h),Math.ceil(p/h)]),f>>=1,p>>=1;break;default:Ut(!1,53)}l.push([1,1]),l.reverse();for(var d=[a],y=[0],g=1,m=l.length;g<m;g++)d.push(a<<g),y.push(l[g-1][0]*l[g-1][1]+y[g-1]);d.reverse();var v=new Rd({tileSize:c,extent:n.extent||[0,-u,s,0],resolutions:d}),_=n.url;_&&-1==_.indexOf("{TileGroup}")&&-1==_.indexOf("{tileIndex}")&&(_+="{TileGroup}/{z}-{x}-{y}.jpg");var b=Tg(_),w=c*a;var x=Sg(b.map(function(t){return function(e,r,n){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*l[i][0],u={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+y[i])/w|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return u[e]})}}})),E=iY.bind(null,th(c*a));(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,tilePixelRatio:a,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:E,tileGrid:v,tileUrlFunction:x,transition:n.transition})||this).zDirection=n.zDirection;var S=x(v.getTileCoordForCoordAndResolution(de(v.getExtent()),d[d.length-1]),1,null),O=new Image;return O.addEventListener("error",function(){w=c,this.changed()}.bind(r)),O.src=S,r}return rY(e,t),e}(Wg),aY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function sY(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var uY=function(t){function e(e){var r=this,n=e||{},i=n.url||"";i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/";var o=n.version||jU.VERSION2,a=n.sizes||[],s=n.size;Ut(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,60);var u,l,c,h=s[0],f=s[1],p=n.tileSize,d=n.tilePixelRatio||1,y=n.format||"jpg",g=n.quality||(n.version==jU.VERSION1?"native":"default"),m=n.resolutions||[],v=n.supports||[],_=n.extent||[0,-f,h,0],b=null!=a&&Array.isArray(a)&&a.length>0,w=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),x=null!=v&&Array.isArray(v)&&(v.includes("regionByPx")||v.includes("regionByPct"))&&(v.includes("sizeByWh")||v.includes("sizeByH")||v.includes("sizeByW")||v.includes("sizeByPct"));if(m.sort(function(t,e){return e-t}),w||x)if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(u=p,l=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(u=p[0],l=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(u=p[0],l=p[1]):null==p[0]&&Number.isInteger(p[1])&&(u=p[1],l=p[1])))),void 0!==u&&void 0!==l||(u=uc,l=uc),0==m.length)for(var E=c=Math.max(Math.ceil(Math.log(h/u)/Math.LN2),Math.ceil(Math.log(f/l)/Math.LN2));E>=0;E--)m.push(Math.pow(2,E));else{var S=Math.max.apply(Math,m);c=Math.round(Math.log(S)/Math.LN2)}else if(u=h,l=f,m=[],b){a.sort(function(t,e){return t[0]-e[0]}),c=-1;var O=[];for(E=0;E<a.length;E++){var T=h/a[E][0];m.length>0&&m[m.length-1]==T?O.push(E):(m.push(T),c++)}if(O.length>0)for(E=0;E<O.length;E++)a.splice(O[E]-E,1)}else m.push(1),a.push([h,f]),c=0;var M=new Rd({tileSize:[u,l],extent:_,origin:_e(_),resolutions:m}),I=iY.bind(null,th(p||256).map(function(t){return t*d}));return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:I,tileGrid:M,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,r){var n,s,p=t[0];if(!(p>c)){var d=t[1],_=t[2],E=m[p];if(!(void 0===d||void 0===_||void 0===E||d<0||Math.ceil(h/E/u)<=d||_<0||Math.ceil(f/E/l)<=_)){if(x||w){var S=d*u*E,O=_*l*E,T=u*E,M=l*E,I=u,P=l;S+T>h&&(T=h-S),O+M>f&&(M=f-O),S+u*E>h&&(I=Math.floor((h-S+E-1)/E)),O+l*E>f&&(P=Math.floor((f-O+E-1)/E)),0==S&&T==h&&0==O&&M==f?n="full":!x||v.includes("regionByPx")?n=S+","+O+","+T+","+M:v.includes("regionByPct")&&(n="pct:"+sY(S/h*100)+","+sY(O/f*100)+","+sY(T/h*100)+","+sY(M/f*100)),o!=jU.VERSION3||x&&!v.includes("sizeByWh")?!x||v.includes("sizeByW")?s=I+",":v.includes("sizeByH")?s=","+P:v.includes("sizeByWh")?s=I+","+P:v.includes("sizeByPct")&&(s="pct:"+sY(100/E)):s=I+","+P}else if(n="full",b){var C=a[p][0],L=a[p][1];s=o==jU.VERSION3?C==h&&L==f?"max":C+","+L:C==h?"full":C+","}else s=o==jU.VERSION3?"max":"full";return i+n+"/"+s+"/0/"+g+"."+y}}},transition:n.transition})||this).zDirection=n.zDirection,r}return aY(e,t),e}(Wg),lY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cY=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.hidpi_=void 0===n.hidpi||n.hidpi,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:ym,r.params_=n.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return lY(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Kt(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};at(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var u=this.ratio_*we(t)/2,l=this.ratio_*me(t)/2;t[0]=a-u,t[1]=s-l,t[2]=a+u,t[3]=s+l}var c=e/r,h=Math.ceil(we(t)/c),f=Math.ceil(me(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*f/2,t[3]=s+c*f/2,this.imageSize_[0]=h,this.imageSize_[1]=f;var p=this.getRequestUrl_(t,this.imageSize_,r,n,o);return this.image_=new Go(t,e,r,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Ct.CHANGE,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){var o=n.getCode().split(":").pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*r);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&Ut(!1,50),$g(s,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){at(this.params_,t),this.image_=null,this.changed()},e}(gm),hY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fY=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,r.canvas_=null,r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return hY(e,t),e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Kt(i.getExtent(),t))return i;Se(t=t.slice(),this.ratio_);var o=[we(t)/e*r,me(t)/e*r],a=this.canvasFunction_.call(this,t,e,r,o,n);return a&&(i=new WV(t,e,r,a)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},e}(gm),pY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var dY=function(t){function e(e){var r=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:ym,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return pY(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Kt(i.getExtent(),t))return i;1!=this.ratio_&&Se(t=t.slice(),this.ratio_);var o=[we(t)/e*r,me(t)/e*r];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(i=new Go(t,e,r,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(Ct.CHANGE,this.handleImageChange.bind(this))}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){at(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,n,i){var o=function(t,e,r,n){var i=we(t),o=me(t),a=e[0],s=e[1],u=.0254/n;return s*i>a*o?i*r/(a*u):o*r/(s*u)}(r,n,this.metersPerUnit_,this.displayDpi_),a=de(r),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return at(s,e),$g(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(gm),yY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gY=function(t){function e(e){var r=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:ym;return(r=t.call(this,{attributions:e.attributions,projection:yr(e.projection)})||this).url_=e.url,r.imageExtent_=e.imageExtent,r.image_=new Go(r.imageExtent_,void 0,1,r.url_,n,i),r.imageSize_=e.imageSize?e.imageSize:null,r.image_.addEventListener(Ct.CHANGE,r.handleImageChange.bind(r)),r}return yY(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,n){return xe(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==Ui.LOADED){var r=this.image_.getExtent(),n=this.image_.getImage(),i=void 0,o=void 0;this.imageSize_?(i=this.imageSize_[0],o=this.imageSize_[1]):(i=n.width,o=n.height);var a=me(r)/o,s=Math.ceil(we(r)/a);if(s!=i){var u=Fi(s,o),l=u.canvas;u.drawImage(n,0,0,i,o,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(gm),mY=r(111),vY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Y="beforeoperations",bY="afteroperations",wY={PIXEL:"pixel",IMAGE:"image"},xY=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return vY(e,t),e}(Mt),EY=function(t){function e(e){var r=t.call(this,{projection:null})||this;r.worker_=null,r.operationType_=void 0!==e.operationType?e.operationType:wY.PIXEL,r.threads_=void 0!==e.threads?e.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=TY(t[n]);return r}(e.sources);for(var n,i=r.changed.bind(r),o=0,a=r.layers_.length;o<a;++o)r.layers_[o].addEventListener(Ct.CHANGE,i);return r.tileQueue_=new ac(function(){return 1},r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map(function(t){return t.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},r.setAttributions(function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=(o instanceof Pg?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);r.push.apply(r,s)}}return 0!==r.length?r:null}),void 0!==e.operation&&r.setOperation(e.operation,e.lib),r}return vY(e,t),e.prototype.setOperation=function(t,e){this.worker_=new mY.Processor({operation:t,imageOps:this.operationType_===wY.IMAGE,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var n=at({},this.frameState_);n.viewState=at({},n.viewState);var i=de(t);n.extent=t.slice(),n.size[0]=Math.round(we(t)/e),n.size[1]=Math.round(me(t)/e),n.time=1/0;var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.layers_.length;e<r;++e)if(this.layers_[e].getSource().getState()!==Zc.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,r,n){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&ie(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n;var i=OY(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new xY(_Y,t,o)),this.worker_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,n){if(!e&&r){var i=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&ie(i,this.requestedFrameState_.extent)){var a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else a=Fi(Math.round(we(i)/o),Math.round(me(i)/o)),this.renderedImageCanvas_=new WV(i,o,1,a.canvas);a.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new xY(bY,t,n))}}},e.prototype.getImageInternal=function(){return null},e}(gm),SY=null;function OY(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n,i=e.size[0],o=e.size[1],a=r.renderFrame(e,null);if(a&&(n=a.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===i&&n.height===o)return n.getContext("2d").getImageData(0,0,i,o);if(SY){var s=SY.canvas;s.width!==i||s.height!==o?SY=Fi(i,o):SY.clearRect(0,0,i,o)}else SY=Fi(i,o);return SY.drawImage(n,0,0,i,o),SY.getImageData(0,0,i,o)}function TY(t){var e;return t instanceof Pg?t instanceof Dg?e=new _d({source:t}):t instanceof gm&&(e=new Td({source:t})):e=t,e}var MY=EY,IY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),PY=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',SN],CY={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},LY={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},kY=function(t){function e(e){var r=e.layer.indexOf("-"),n=-1==r?e.layer:e.layer.slice(0,r),i=LY[n],o=CY[e.layer],a=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;return t.call(this,{attributions:PY,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX})||this}return IY(e,t),e}(OR),RY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function AY(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var i=n.getTileCoordExtent(t,this.tmpExtent_),o=th(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=Qc(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return at(a,this.params_),this.getRequestUrl_(t,o,i,e,r,a)}}var NY=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:AY,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.setKey(r.getKeyForParams_()),r}return RY(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){var s,u=i.getCode().split(":").pop();if(o.SIZE=e[0]+","+e[1],o.BBOX=r.join(","),o.BBOXSR=u,o.IMAGESR=u,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),1==a.length)s=a[0];else s=a[Fe(Ld(t),a.length)];return $g(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){at(this.params_,t),this.setKey(this.getKeyForParams_())},e}(Wg),FY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jY=function(t){function e(e,r,n){var i=t.call(this,e,rc.LOADED)||this;return i.tileSize_=r,i.text_=n,i.canvas_=null,i}return FY(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Fi(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(fg),DY=function(t){function e(e){var r=e||{};return t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection})||this}return FY(e,t),e.prototype.getTile=function(t,e,r){var n=Id(t,e,r);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var i=th(this.tileGrid.getTileSize(t)),o=[t,e,r],a=this.getTileCoordForTileUrlFunction(o),s=void 0;s=a?"z:"+a[0]+" x:"+a[1]+" y:"+a[2]:"none";var u=new jY(o,i,s);return this.tileCache.set(n,u),u},e}(OR),GY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BY=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:yr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:Zc.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(r.tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)$V(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Ut(!1,51);return r}return GY(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=yr("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=xr(r,n);e=Oe(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=Lg({extent:Ag(n),maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=Eg(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var u=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return xe(u,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(Zc.READY)},e.prototype.handleTileJSONError=function(){this.setState(Zc.ERROR)},e}(Wg),zY=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UY=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r)||this;return s.src_=n,s.extent_=i,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return zY(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,r){this.state==rc.EMPTY&&!0===r?(this.state=rc.IDLE,ht(this,Ct.CHANGE,function(r){e(this.getData(t))},this),this.loadInternal_()):!0===r?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=rc.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=rc.LOADED,this.changed()},e.prototype.loadInternal_=function(){if(this.state==rc.IDLE)if(this.state=rc.LOADING,this.jsonp_)$V(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(rc.EMPTY)},e}(fg),qY=function(t){function e(e){var r=t.call(this,{projection:yr("EPSG:3857"),state:Zc.LOADING})||this;if(r.preemptive_=void 0===e.preemptive||e.preemptive,r.tileUrlFunction_=Og,r.template_=void 0,r.jsonp_=e.jsonp||!1,e.url)if(r.jsonp_)$V(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Ut(!1,51);return r}return zY(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout(function(){r(null)},0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(Zc.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,r=yr("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=xr(r,n);e=Oe(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=Lg({extent:Ag(n),maxZoom:a,minZoom:o});this.tileGrid=s,this.template_=t.template;var u=t.grids;if(u){if(this.tileUrlFunction_=Eg(u,s),void 0!==t.attribution){var l=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return xe(l,e.extent)?[t.attribution]:null})}this.setState(Zc.READY)}else this.setState(Zc.ERROR)},e.prototype.getTile=function(t,e,r,n,i){var o=Id(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=this.tileUrlFunction_(s,n,i),l=new UY(a,void 0!==u?rc.IDLE:rc.EMPTY,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},e.prototype.useTile=function(t,e,r){var n=Id(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Dg),VY=window.M={},YY=window.ol={};VY.ClusteredFeature=vF,VY.Control=ap,VY.Feature=pF,VY.Filter=kx,VY.Label=Qv,VY.Layer=nd,VY.Map=YN,VY.Object=da,VY.Parameters=e_,VY.Plugin=SF,VY.Popup=Uv,VY.RenderFeature=FE,VY.Style=u_,VY.config=function t(e,r){t[e]=r},VY.control={},VY.control.BackgroundLayers=DI,VY.control.GetFeatureInfo=UO,VY.control.Location=lT,VY.control.Panzoom=CM,VY.control.Panzoombar=pp,VY.control.Rotate=UT,VY.control.Scale=OT,VY.control.ScaleLine=yM,VY.dialog={},VY.dialog.error=aF,VY.dialog.info=oF,VY.dialog.show=iF,VY.dialog.success=sF,VY.evt={},VY.evt.ACTIVATED="activated",VY.evt.ADDED_KML="added:kml",VY.evt.ADDED_LAYER="added:layer",VY.evt.ADDED_MBTILES="added:mbtiles",VY.evt.ADDED_MBTILES_VECTOR="added:mbtilesvector",VY.evt.ADDED_TMS="added:tms",VY.evt.ADDED_TO_MAP="added:map",VY.evt.ADDED_TO_PANEL="added:panel",VY.evt.ADDED_VECTOR_TILE="added:vectortile",VY.evt.ADDED_WFS="added:wfs",VY.evt.ADDED_WMC="added:wmc",VY.evt.ADDED_WMS="added:wms",VY.evt.ADDED_WMTS="added:wmts",VY.evt.ADDED_XYZ="added:xyz",VY.evt.CHANGE="change",VY.evt.CHANGE_PROJ="change:proj",VY.evt.CHANGE_ROTATION="change:rotation",VY.evt.CHANGE_STYLE="change:style",VY.evt.CHANGE_WMC="change:wmc",VY.evt.CHANGE_ZOOM="change:zoom",VY.evt.CLICK="click",VY.evt.COMPLETED=tp,VY.evt.DEACTIVATED="deactivated",VY.evt.DESTROY="destroy",VY.evt.DOUBLE_CLICK="doubleclick",VY.evt.EventsManager=fa,VY.evt.HIDE="hide",VY.evt.HOVER_FEATURES="hover:features",VY.evt.LEAVE_FEATURES="leave:features",VY.evt.LOAD=Qf,VY.evt.Listener=ca,VY.evt.MOVE="move",VY.evt.REMOVED_FROM_MAP="removed:map",VY.evt.REMOVED_LAYER="removed:layer",VY.evt.SELECT_FEATURES="select:features",VY.evt.SHOW="show",VY.evt.UNSELECT_FEATURES="unselect:features",VY.exception=wa,VY.facade={},VY.facade.Base=ba,VY.filter=NF,VY.filter.AND=function(t){var e="",r=t.length;return t.forEach(function(t,n){e+="(".concat(t.toCQL(),")"),n<r-1&&(e+=" AND ")}),new CF(function(e){return t.every(function(t){return t.getFunctionFilter()(e)})},{cqlFilter:e})},VY.filter.EQUAL=function(t,e){return new CF(function(r){return Object.is(r.getAttribute(t),e)},{cqlFilter:"".concat(t,"='").concat(e,"'")})},VY.filter.Function=CF,VY.filter.GT=function(t,e){return new CF(function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>e},{cqlFilter:"".concat(t," > '").concat(e,"'")})},VY.filter.GTE=function(t,e){return new CF(function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>=e},{cqlFilter:"".concat(t," >= '").concat(e,"'")})},VY.filter.LIKE=function(t,e){return new CF(function(r){return r.getAttribute(t).toString().match(new RegExp(e))},{cqlFilter:"".concat(t," LIKE '%").concat(e,"%'")})},VY.filter.LT=function(t,e){return new CF(function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<e},{cqlFilter:"".concat(t," < '").concat(e,"'")})},VY.filter.LTE=function(t,e){return new CF(function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<=e},{cqlFilter:"".concat(t," <= '").concat(e,"'")})},VY.filter.NOT=function(t){return new CF(function(e){return!t.getFunctionFilter()(e)},{cqlFilter:"NOT ".concat(t.toCQL())})},VY.filter.OR=function(t){var e=t.length,r="";return t.forEach(function(t,n){r+="(".concat(t.toCQL(),")"),n<e-1&&(r+=" OR ")}),new CF(function(e){return t.some(function(t){return t.getFunctionFilter()(e)})},{cqlFilter:r})},VY.filter.spatial={},VY.filter.spatial.CONTAIN=function(t){var e=mz(t);return new NF(function(t,r){var n=new KG,i=n.read(t);return e.some(function(t){var e=n.read(t);return yz.contains(e,i)})},{cqlFilter:vz("CONTAINS",e)})},VY.filter.spatial.DISJOINT=function(t){var e=mz(t);return new NF(function(t,r){var n=new KG,i=n.read(t);return e.some(function(t){var e=n.read(t);return!yz.intersects(i,e)})},{cqlFilter:vz("DISJOINT",e)})},VY.filter.spatial.INTERSECT=function(t){var e=mz(t);return new NF(function(t,r){var n=new KG,i=n.read(t);return e.some(function(t){var e=n.read(t);return yz.intersects(i,e)})},{cqlFilter:vz("INTERSECTS",e)})},VY.filter.spatial.WITHIN=function(t){var e=mz(t);return new NF(function(t,r){var n=new KG,i=n.read(t);return e.some(function(t){var e=n.read(t);return yz.contains(e,i)})},{cqlFilter:vz("WITHIN",e)})},VY.filter.spatial.parseParamToGeometries=mz,VY.format={},VY.format.GeoJSON=Ca,VY.format.WKT=bj,VY.geom={},VY.geom.geojson={},VY.geom.geojson.type={},VY.geom.geojson.type.GEOMETRY_COLLECTION="GeometryCollection",VY.geom.geojson.type.LINE_STRING="LineString",VY.geom.geojson.type.MULTI_LINE_STRING="MultiLineString",VY.geom.geojson.type.MULTI_POINT="MultiPoint",VY.geom.geojson.type.MULTI_POLYGON="MultiPolygon",VY.geom.geojson.type.POINT="Point",VY.geom.geojson.type.POLYGON="Polygon",VY.geom.parse=KL,VY.geom.parseWFS=function(t){var e;return t===VL?e="Point":t===YL?e="LineString":t===WL?e="Polygon":t===XL?e="MultiPoint":t===ZL?e="MultiLineString":t===HL&&(e="MultiPolygon"),e},VY.geom.wfs={},VY.geom.wfs.type={},VY.geom.wfs.type.LINE=YL,VY.geom.wfs.type.MLINE=ZL,VY.geom.wfs.type.MPOINT=XL,VY.geom.wfs.type.MPOLYGON=HL,VY.geom.wfs.type.POINT=VL,VY.geom.wfs.type.POLYGON=WL,VY.geom.wkt={},VY.geom.wkt.type={},VY.geom.wkt.type.CIRCLE="Circle",VY.geom.wkt.type.GEOMETRY="Geometry",VY.geom.wkt.type.GEOMETRY_COLLECTION="GeometryCollection",VY.geom.wkt.type.LINEAR_RING="LinearRing",VY.geom.wkt.type.LINE_STRING="LineString",VY.geom.wkt.type.MULTI_LINE_STRING="MultiLineString",VY.geom.wkt.type.MULTI_POINT="MultiPoint",VY.geom.wkt.type.MULTI_POLYGON="MultiPolygon",VY.geom.wkt.type.POINT="Point",VY.geom.wkt.type.POLYGON="Polygon",VY.handler={},VY.handler.Feature=ZE,VY.impl={},VY.impl.Control=MO,VY.impl.Feature=ua,VY.impl.GetCapabilities=zd,VY.impl.Label=Wv,VY.impl.Layer=Gd,VY.impl.Map=mv,VY.impl.Popup=Lv,VY.impl.RenderFeature=DE,VY.impl.Style=Nb,VY.impl.View=lv,VY.impl.control={},VY.impl.control.GetFeatureInfo=NO,VY.impl.control.Location=tT,VY.impl.control.Panzoom=EM,VY.impl.control.Panzoombar=Jf,VY.impl.control.Rotate=RT,VY.impl.control.Scale=vT,VY.impl.control.ScaleLine=aM,VY.impl.format={},VY.impl.format.DescribeFeatureType=wL,VY.impl.format.DescribeFeatureTypeXML=_L,VY.impl.format.GML=CL,VY.impl.format.GeoJSON=$o,VY.impl.format.KML=QC,VY.impl.format.WKT=dj,VY.impl.format.WMSCapabilities=ag,VY.impl.format.WMTSCapabilities=xj,VY.impl.format.XML=pL,VY.impl.handler={},VY.impl.handler.Feature=zE,VY.impl.interaction={},VY.impl.interaction.SelectCluster=aE,VY.impl.layer={},VY.impl.layer.AnimatedCluster=Zx,VY.impl.layer.Draw=Ij,VY.impl.layer.GeoJSON=yR,VY.impl.layer.KML=oL,VY.impl.layer.MBTiles=VR,VY.impl.layer.MBTilesVector=GA,VY.impl.layer.MVT=Nk,VY.impl.layer.OSM=LN,VY.impl.layer.TMS=gN,VY.impl.layer.Vector=yb,VY.impl.layer.WFS=qL,VY.impl.layer.WMS=Rm,VY.impl.layer.WMTS=EI,VY.impl.layer.XYZ=iN,VY.impl.loader={},VY.impl.loader.JSONP=uR,VY.impl.loader.KML=WI,VY.impl.loader.WFS=FL,VY.impl.service={},VY.impl.service.WFS=EL,VY.impl.source={},VY.impl.source.ImageWMS=Tm,VY.impl.source.TileWMS=sm,VY.impl.style={},VY.impl.style.Centroid=Xb,VY.impl.style.Cluster=yE,VY.impl.style.Icon=Aj,VY.impl.style.Line=rx,VY.impl.style.Path=Vw,VY.impl.style.Point=mw,VY.impl.style.Polygon=xx,VY.impl.style.Simple=zb,VY.impl.util={},VY.impl.util.wmtscapabilities=Nj,VY.impl.util.wmtscapabilities.getLayers=function(t,e,r){return function t(e,r,n,i){var o=[];if(v(e.Layer))if(m(e))e.forEach(function(e){o=o.concat(t(e,r,n,i))});else{var a=e.TileMatrixSetLink,s=n;"EPSG:3857"===n&&(a.includes("EPSG:3857")||(s="GoogleMapsCompatible")),o.push(new CI({url:r,name:e.Identifier,matrixSet:s,legend:v(e.Title)?"":e.Title},{},{capabilitiesMetadata:{abstract:v(e.Abstract)?"":e.Abstract,attribution:v(i.ServiceProvider)?"":i.ServiceProvider,style:v(e.Style)?"":e.Style}}))}else o=t(e.Layer);return o}(t.Contents.Layer,e,r,t)},VY.impl.utils=aa,VY.language={},VY.language.addTranslation=function(t,e){xa.translations[t]=e},VY.language.getLang=function(){return xa.lang},VY.language.getTranslation=Ea,VY.language.getValue=Sa,VY.language.setLang=function(t){Object.keys(xa.translations).includes(t)||wa(Sa("exception").unsupported_lang),xa.lang=t},VY.layer={},VY.layer.GeoJSON=ER,VY.layer.KML=hL,VY.layer.MBTiles=eA,VY.layer.MBTilesVector=JA,VY.layer.MBTilesVector.mode={RENDER:"render",FEATURE:"feature"},VY.layer.MVT=Vk,VY.layer.MVT.mode=Uk,VY.layer.OSM=jN,VY.layer.TMS=xN,VY.layer.Vector=Gx,VY.layer.WFS=ik,VY.layer.WMS=Bm,VY.layer.WMTS=CI,VY.layer.XYZ=cN,VY.layer.type={},VY.layer.type.GeoJSON="GeoJSON",VY.layer.type.KML=dp,VY.layer.type.MBTiles=_p,VY.layer.type.MBTilesVector=bp,VY.layer.type.MVT="MVT",VY.layer.type.OSM=vp,VY.layer.type.TMS=xp,VY.layer.type.Vector="Vector",VY.layer.type.WFS=gp,VY.layer.type.WMC="WMC",VY.layer.type.WMS=yp,VY.layer.type.WMTS=mp,VY.layer.type.XYZ=wp,VY.map=function(t,e){return v(mv)&&wa(Sa("exception").no_impl),new YN(t,e)},VY.parameter={},VY.parameter.center=Lp,VY.parameter.geojson=Bp,VY.parameter.kml=Dp,VY.parameter.layer=Kp,VY.parameter.maxExtent=kp,VY.parameter.maxZoom=jp,VY.parameter.mbtiles=ZR,VY.parameter.mbtilesvector=qA,VY.parameter.minZoom=Fp,VY.parameter.mvt=zp,VY.parameter.osm=Pp,VY.parameter.projection=Rp,VY.parameter.resolutions=Ap,VY.parameter.tms=Gj,VY.parameter.tms=Xp,VY.parameter.wfs=Gp,VY.parameter.wmc=Up,VY.parameter.wms=qp,VY.parameter.wmts=Zp,VY.parameter.xyz=Hj,VY.parameter.xyz=Wp,VY.parameter.zoom=Np,VY.proxy=function(t){"boolean"==typeof t&&(WN=t)},VY.remote={},VY.remote.Response=ZN,VY.remote.get=tF,VY.remote.post=function(t,e,r){return QN(t,e,KN)},VY.style={},VY.style.Cluster=CE,VY.style.Composite=wE,VY.style.Feature=Ew,VY.style.Line=lx,VY.style.Point=Dw,VY.style.Polygon=Px,VY.style.Simple=Lw,VY.style.align={},VY.style.align.CENTER=mb,VY.style.align.JUSTIFY=_b,VY.style.align.LEFT=gb,VY.style.align.RIGHT=vb,VY.style.baseline={},VY.style.baseline.ALPHABETIC=Eb,VY.style.baseline.BOTTOM=xb,VY.style.baseline.HANGING=Sb,VY.style.baseline.IDEOGRAPHIC=Ob,VY.style.baseline.MIDDLE=wb,VY.style.baseline.TOP=bb,VY.style.form={},VY.style.form.BAN="BAN",VY.style.form.BLAZON="BLAZON",VY.style.form.BUBBLE="BUBBLE",VY.style.form.CIRCLE="CIRCLE",VY.style.form.LOZENGE="LOZENGE",VY.style.form.MARKER="MARKER",VY.style.form.NONE="none",VY.style.form.SHIELD="SHIELD",VY.style.form.SIGN="SIGN",VY.style.form.SQUARE="SQUARE",VY.style.form.TRIANGLE="TRIANGLE",VY.style.pattern={},VY.style.pattern.BRECCIA="BRECCIA",VY.style.pattern.BRICK="BRICK",VY.style.pattern.CAPS="CAPS",VY.style.pattern.CEMETRY="CEMETRY",VY.style.pattern.CHAOS="CHAOS",VY.style.pattern.CHARACTER="CHARACTER",VY.style.pattern.CIRCLE="CIRCLE",VY.style.pattern.CLAY="CLAY",VY.style.pattern.COAL="COAL",VY.style.pattern.CONGLOMERATE="CONGLOMERATE",VY.style.pattern.CROSS="CROSS",VY.style.pattern.CROSSES="CROSSES",VY.style.pattern.DOLOMITE="DOLOMITE",VY.style.pattern.DOT="DOT",VY.style.pattern.FLOODED="FLOODED",VY.style.pattern.FOREST="FOREST",VY.style.pattern.GRASS="GRASS",VY.style.pattern.GRAVEL="GRAVEL",VY.style.pattern.HATCH="HATCH",VY.style.pattern.HEXAGON="HEXAGON",VY.style.pattern.ICON="ICON",VY.style.pattern.IMAGE="IMAGE",VY.style.pattern.NYLON="NYLON",VY.style.pattern.PINE="PINE",VY.style.pattern.PINES="PINES",VY.style.pattern.ROCK="ROCK",VY.style.pattern.ROCKS="ROCKS",VY.style.pattern.SAND="SAND",VY.style.pattern.SCRUB="SCRUB",VY.style.pattern.SQUARE="SQUARE",VY.style.pattern.SWAMP="SWAMP",VY.style.pattern.TILE="TILE",VY.style.pattern.TREE="TREE",VY.style.pattern.VINE="VINE",VY.style.pattern.WAVE="WAVE",VY.style.pattern.WOVEN="WOVEN",VY.style.state={},VY.style.state.DEFAULT="default",VY.style.state.NEW="new",VY.style.state.SELECTED="selected",VY.style.textoverflow={},VY.style.textoverflow.ELLIPSIS="ellipsis",VY.style.textoverflow.HIDDEN="",VY.style.textoverflow.VISIBLE="visible",VY.template={},VY.template.add=function(t,e){d(eF[t])&&(eF[t]=e)},VY.template.compile=function(t,e){var r,n,i={};return d(e)||(i=X(i,e.vars),r=e.parseToHtml,n=e.scope),new Promise(function(o,a){nF(t,e).then(function(t){var e=t.call(null,i);!1!==r?o.call(n,A(e)):o.call(n,e)})})},VY.template.compileSync=rF,VY.template.get=nF,VY.ui={},VY.ui.Panel=rR,VY.ui.position={},VY.ui.position.BL=Hk,VY.ui.position.BR=Kk,VY.ui.position.TL=Xk,VY.ui.position.TR=Zk,VY.units={},VY.units.DOTS_PER_INCH=72,VY.units.INCHES_PER_UNIT=h,VY.utils={},VY.utils.addParameters=O,VY.utils.beautifyAttribute=N,VY.utils.beautifyAttributeName=F,VY.utils.beautifyString=function(t){var e;return e=(e=(e=(e=(e=(e=(e=t.toLowerCase()).trim(e)).charAt(0).toUpperCase()+e.slice(1)).replace(/_/g," ")).replace(/\s+/," ")).replace(/(\s\w)+/g,function(t){return t.toUpperCase()})).replace(/\s+(de|del|las?|el|los?|un|unas?|unos?|y|a|al|en)\s+/gi,function(t){return t.toLowerCase()})},VY.utils.concatUrlPaths=j,VY.utils.decodeHtml=V,VY.utils.defineFunctionFromString=K,VY.utils.drawDynamicStyle=Q,VY.utils.enableTouchScroll=z,VY.utils.escapeJSCode=B,VY.utils.escapeXSS=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},VY.utils.extend=G,VY.utils.extendsObj=X,VY.utils.fillResolutions=C,VY.utils.generateRandom=T,VY.utils.generateResolutionsFromExtent=k,VY.utils.generateResolutionsFromScales=function(t,e,r,n){var i=L(t,n),o=L(e,n);return C(i,o,r)},VY.utils.getEnvolvedExtent=tt,VY.utils.getImageSize=function(t){var e=new Image;return new Promise(function(r,n){e.onload=function(){return r(e)},e.src=t})},VY.utils.getOpacityFromRgba=function(t){var e,r=/^rgba\s*\((\s*\d+\s*,){3}\s*([\d.]+)\s*\)$/;if(r.test(t)){e=t.replace(r,"$2");try{e=parseFloat(e)}catch(t){throw t}}return e},VY.utils.getParameterValue=S,VY.utils.getResolutionFromScale=L,VY.utils.getRgba=function(t,e){return l()(t).alpha(e).css()},VY.utils.getScaleFromResolution=R,VY.utils.getTextFromHtml=Y,VY.utils.getWMSGetCapabilitiesUrl=I,VY.utils.getWMTSGetCapabilitiesUrl=P,VY.utils.htmlToString=function(t){var e;if(!v(t)){var r=document.createElement("div");r.appendChild(t),e=r.innerHTML}return e},VY.utils.includes=D,VY.utils.inverseColor=W,VY.utils.isArray=m,VY.utils.isBoolean=y,VY.utils.isDynamic=$,VY.utils.isFunction=_,VY.utils.isGeometryType=q,VY.utils.isNull=g,VY.utils.isNullOrEmpty=v,VY.utils.isObject=b,VY.utils.isString=w,VY.utils.isUndefined=d,VY.utils.isUrl=x,VY.utils.normalize=E,VY.utils.rgbToHex=function(t){var e;try{e=l()(t).hex()}catch(t){throw t}return e},VY.utils.rgbaToHex=function(t){var e;try{e=l()(t).hex()}catch(t){throw t}return e},VY.utils.sameUrl=U,VY.utils.setDynamicLegend=function(t){J=t},VY.utils.stringToHtml=A,VY.utils.stringifyFunctions=H,VY.utils.styleComparator=Z,VY.window=Ov,YY.AssertionError=zt,YY.Collection=Bl,YY.Feature=ri,YY.Geolocation=WO,YY.Kinetic=mh,YY.Map=Bf,YY.MapBrowserEvent=Vl,YY.Object=Gt,YY.Observable=Rt,YY.Observable.unByKey=kt,YY.Overlay=xv,YY.PluggableMap=rh,YY.View=Vc,YY.array={},YY.array.stableSort=function(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort(function(t,r){return e(t.value,r.value)||t.index-r.index}),r=0;r<t.length;r++)t[r]=i[r].value},YY.color={},YY.color.asArray=Si,YY.color.asString=_i,YY.colorlike={},YY.colorlike.asColorLike=Mi,YY.control={},YY.control.Attribution=ch,YY.control.Control=ih,YY.control.FullScreen=Tz,YY.control.MousePosition=Cz,YY.control.OverviewMap=Az,YY.control.Rotate=ph,YY.control.ScaleLine=ZT,YY.control.Zoom=yh,YY.control.ZoomSlider=Wf,YY.control.ZoomToExtent=Fz,YY.control.defaults=gh,YY.coordinate={},YY.coordinate.add=Ec,YY.coordinate.createStringXY=function(t){return function(e){return Rc(e,t)}},YY.coordinate.format=Tc,YY.coordinate.rotate=Ic,YY.coordinate.toStringHDMS=function(t,e){return t?Oc("NS",t[1],e)+" "+Oc("EW",t[0],e):""},YY.coordinate.toStringXY=Rc,YY.easing={},YY.easing.easeIn=Nc,YY.easing.easeOut=Fc,YY.easing.inAndOut=jc,YY.easing.linear=Dc,YY.easing.upAndDown=Gc,YY.events={},YY.events.condition={},YY.events.condition.altKeyOnly=Oh,YY.events.condition.altShiftKeysOnly=Th,YY.events.condition.always=Ih,YY.events.condition.click=function(t){return t.type==Yl.CLICK},YY.events.condition.doubleClick=function(t){return t.type==Yl.DBLCLICK},YY.events.condition.focus=Mh,YY.events.condition.mouseOnly=Nh,YY.events.condition.never=Ch,YY.events.condition.noModifierKeys=kh,YY.events.condition.penOnly=function(t){var e=t.pointerEvent;return Ut(void 0!==e,56),"pen"===e.pointerType},YY.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(Li?e.metaKey:e.ctrlKey)&&!e.shiftKey},YY.events.condition.pointerMove=function(t){return"pointermove"==t.type},YY.events.condition.primaryAction=Fh,YY.events.condition.shiftKeyOnly=Rh,YY.events.condition.singleClick=Lh,YY.events.condition.targetNotEditable=Ah,YY.events.condition.touchOnly=function(t){var e=t.pointerEvent;return Ut(void 0!==e,56),"touch"===e.pointerType},YY.extent={},YY.extent.applyTransform=Oe,YY.extent.boundingExtent=Yt,YY.extent.buffer=Wt,YY.extent.containsCoordinate=Ht,YY.extent.containsExtent=Kt,YY.extent.containsXY=$t,YY.extent.createEmpty=Qt,YY.extent.equals=ie,YY.extent.extend=oe,YY.extent.getArea=he,YY.extent.getBottomLeft=fe,YY.extent.getBottomRight=pe,YY.extent.getCenter=de,YY.extent.getHeight=me,YY.extent.getIntersection=ve,YY.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},YY.extent.getTopLeft=_e,YY.extent.getTopRight=be,YY.extent.getWidth=we,YY.extent.intersects=xe,YY.extent.isEmpty=Ee,YY.featureloader={},YY.featureloader.setWithCredentials=function(t){tb=t},YY.featureloader.xhr=rb,YY.format={},YY.format.EsriJSON=Vz,YY.format.Feature=ni,YY.format.GML=OL,YY.format.GML2=QE,YY.format.GML3=Jm,YY.format.GML32=Xz,YY.format.GPX=PU,YY.format.GeoJSON=gi,YY.format.IGC=FU,YY.format.IIIFInfo=qU,YY.format.KML=WC,YY.format.MVT=Pk,YY.format.OSMXML=$U,YY.format.Polyline=oq,YY.format.Polyline.decodeDeltas=eq,YY.format.Polyline.decodeFloats=nq,YY.format.Polyline.encodeDeltas=tq,YY.format.Polyline.encodeFloats=rq,YY.format.TopoJSON=dq,YY.format.WFS=mO,YY.format.WFS.writeFilter=function(t){var e=Yd(QS,"Filter");return cO(e,t,[]),e},YY.format.WKT=aj,YY.format.WMSCapabilities=Ky,YY.format.WMSGetFeatureInfo=gq,YY.format.WMTSCapabilities=mI,YY.format.filter={},YY.format.filter.Bbox=aS,YY.format.filter.Contains=cS,YY.format.filter.During=dS,YY.format.filter.EqualTo=vS,YY.format.filter.GreaterThan=bS,YY.format.filter.GreaterThanOrEqualTo=xS,YY.format.filter.Intersects=SS,YY.format.filter.IsBetween=TS,YY.format.filter.IsLike=IS,YY.format.filter.IsNull=CS,YY.format.filter.LessThan=kS,YY.format.filter.LessThanOrEqualTo=AS,YY.format.filter.Not=FS,YY.format.filter.NotEqualTo=DS,YY.format.filter.Or=BS,YY.format.filter.Within=US,YY.format.filter.and=qS,YY.format.filter.bbox=VS,YY.format.filter.between=function(t,e,r){return new TS(t,e,r)},YY.format.filter.contains=function(t,e,r){return new cS(t,e,r)},YY.format.filter.during=function(t,e,r){return new dS(t,e,r)},YY.format.filter.equalTo=function(t,e,r){return new vS(t,e,r)},YY.format.filter.greaterThan=function(t,e){return new bS(t,e)},YY.format.filter.greaterThanOrEqualTo=function(t,e){return new xS(t,e)},YY.format.filter.intersects=function(t,e,r){return new SS(t,e,r)},YY.format.filter.isNull=function(t){return new CS(t)},YY.format.filter.lessThan=function(t,e){return new kS(t,e)},YY.format.filter.lessThanOrEqualTo=function(t,e){return new AS(t,e)},YY.format.filter.like=function(t,e,r,n,i,o){return new IS(t,e,r,n,i,o)},YY.format.filter.not=function(t){return new FS(t)},YY.format.filter.notEqualTo=function(t,e,r){return new DS(t,e,r)},YY.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(BS,e))},YY.format.filter.within=function(t,e,r){return new US(t,e,r)},YY.geom={},YY.geom.Circle=on,YY.geom.Geometry=Wr,YY.geom.GeometryCollection=fi,YY.geom.LineString=Ln,YY.geom.LinearRing=Nn,YY.geom.MultiLineString=$n,YY.geom.MultiPoint=cn,YY.geom.MultiPolygon=ti,YY.geom.Point=en,YY.geom.Polygon=Yn,YY.geom.Polygon.circular=Wn,YY.geom.Polygon.fromCircle=Zn,YY.geom.Polygon.fromExtent=Xn,YY.geom.SimpleGeometry=Kr,YY.has={},YY.has.DEVICE_PIXEL_RATIO=ki,YY.interaction={},YY.interaction.DoubleClickZoom=Sh,YY.interaction.DragAndDrop=xq,YY.interaction.DragBox=Jh,YY.interaction.DragPan=Uh,YY.interaction.DragRotate=Vh,YY.interaction.DragRotateAndZoom=Sq,YY.interaction.DragZoom=ef,YY.interaction.Draw=Lq,YY.interaction.Draw.createBox=function(){return function(t,e,r){var n=Yt(t.map(function(t){return kr(t,r)})),i=[[fe(n),pe(n),be(n),_e(n),fe(n)]],o=e;o?o.setCoordinates(i):o=new Yn(i);var a=Cr();return a&&o.transform(r,a),o}},YY.interaction.Draw.createRegularPolygon=function(t,e){return function(r,n,i){var o=kr(r[0],i),a=kr(r[1],i),s=Math.sqrt(Cc(o,a)),u=n||Zn(new on(o),t),l=e;if(!e){var c=a[0]-o[0],h=a[1]-o[1];l=Math.atan(h/c)-(c<0?Math.PI:0)}Hn(u,o,s,l);var f=Cr();return f&&u.transform(i,f),u}},YY.interaction.Extent=Dq,YY.interaction.Interaction=wh,YY.interaction.KeyboardPan=af,YY.interaction.KeyboardZoom=lf,YY.interaction.Modify=Hq,YY.interaction.MouseWheelZoom=pf,YY.interaction.PinchRotate=yf,YY.interaction.PinchZoom=mf,YY.interaction.Pointer=Gh,YY.interaction.Select=tE,YY.interaction.Snap=Qq,YY.interaction.Translate=oV,YY.interaction.defaults=vf,YY.layer={},YY.layer.Base=Xc,YY.layer.BaseImage=wd,YY.layer.BaseTile=sd,YY.layer.BaseVector=h_,YY.layer.Graticule=hV,YY.layer.Group=$c,YY.layer.Heatmap=VV,YY.layer.Image=Td,YY.layer.Layer=sh,YY.layer.Tile=_d,YY.layer.Vector=Q_,YY.layer.VectorImage=KV,YY.layer.VectorTile=_k,YY.loadingstrategy={},YY.loadingstrategy.all=nb,YY.loadingstrategy.bbox=function(t,e){return[t]},YY.loadingstrategy.tile=function(t){return function(e,r){var n=t.getZForResolution(r),i=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1])for(a[2]=i.minY;a[2]<=i.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},YY.proj={},YY.proj.Projection=Xe,YY.proj.Units={},YY.proj.Units.METERS_PER_UNIT=Ye,YY.proj.addCoordinateTransforms=br,YY.proj.addEquivalentProjections=mr,YY.proj.addProjection=dr,YY.proj.equivalent=wr,YY.proj.fromLonLat=function(t,e){return Sr(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},YY.proj.get=yr,YY.proj.getPointResolution=gr,YY.proj.getTransform=Er,YY.proj.proj4={},YY.proj.proj4.register=Nl,YY.proj.toLonLat=function(t,e){var r=Sr(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Fe(n+180,360)-180),r},YY.proj.transform=Sr,YY.proj.transformExtent=Or,YY.render={},YY.render.VectorContext=wf,YY.render.canvas={},YY.render.canvas.labelCache=eo,YY.render.getRenderPixel=function(t,e){var r=e.slice(0);return Gr(t.inversePixelTransform.slice(),r),r},YY.render.getVectorContext=kf,YY.render.toContext=Lf,YY.renderer={},YY.renderer.Composite=Df,YY.renderer.canvas={},YY.renderer.canvas.ImageLayer=Sd,YY.renderer.canvas.TileLayer=md,YY.renderer.canvas.VectorImageLayer=ZV,YY.renderer.canvas.VectorLayer=$_,YY.renderer.canvas.VectorTileLayer=mk,YY.renderer.webgl={},YY.renderer.webgl.PointsLayer=BV,YY.size={},YY.size.toSize=th,YY.source={},YY.source.BingMaps=QV,YY.source.CartoDB=eY,YY.source.Cluster=zx,YY.source.IIIF=uY,YY.source.Image=gm,YY.source.ImageArcGISRest=cY,YY.source.ImageCanvas=fY,YY.source.ImageMapGuide=dY,YY.source.ImageStatic=gY,YY.source.ImageWMS=_m,YY.source.OSM=ON,YY.source.OSM.ATTRIBUTION=SN,YY.source.Raster=MY,YY.source.Source=Pg,YY.source.Stamen=kY,YY.source.Tile=Dg,YY.source.TileArcGISRest=NY,YY.source.TileDebug=DY,YY.source.TileImage=Wg,YY.source.TileJSON=BY,YY.source.TileWMS=tm,YY.source.UTFGrid=qY,YY.source.Vector=ub,YY.source.VectorTile=hk,YY.source.WMSServerType={},YY.source.WMSServerType.CARMENTA_SERVER=void 0,YY.source.WMSServerType.GEOSERVER=void 0,YY.source.WMSServerType.MAPSERVER=void 0,YY.source.WMSServerType.QGIS=void 0,YY.source.WMTS=AM,YY.source.WMTS.optionsFromCapabilities=NM,YY.source.XYZ=OR,YY.source.Zoomify=oY,YY.sphere={},YY.sphere.getArea=function t(e,r){var n=r||{},i=n.radius||Ge,o=n.projection||"EPSG:3857",a=e.getType();a!==De.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case De.POINT:case De.MULTI_POINT:case De.LINE_STRING:case De.MULTI_LINE_STRING:case De.LINEAR_RING:break;case De.POLYGON:for(s=e.getCoordinates(),p=Math.abs(Ue(s[0],i)),l=1,c=s.length;l<c;++l)p-=Math.abs(Ue(s[l],i));break;case De.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(u=s[l],p+=Math.abs(Ue(u[0],i)),h=1,f=u.length;h<f;++h)p-=Math.abs(Ue(u[h],i));break;case De.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},YY.sphere.getDistance=Be,YY.sphere.getLength=function t(e,r){var n=r||{},i=n.radius||Ge,o=n.projection||"EPSG:3857",a=e.getType();a!==De.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case De.POINT:case De.MULTI_POINT:break;case De.LINE_STRING:case De.LINEAR_RING:p=ze(s=e.getCoordinates(),i);break;case De.MULTI_LINE_STRING:case De.POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)p+=ze(s[l],i);break;case De.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(h=0,f=(u=s[l]).length;h<f;++h)p+=ze(u[h],i);break;case De.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},YY.style={},YY.style.Circle=wo,YY.style.Fill=xo,YY.style.Icon=Vo,YY.style.IconAnchorUnits={},YY.style.IconAnchorUnits.FRACTION=void 0,YY.style.IconAnchorUnits.PIXELS=void 0,YY.style.IconImageCache={},YY.style.IconImageCache.shared=Ao,YY.style.IconOrigin={},YY.style.IconOrigin.BOTTOM_LEFT=void 0,YY.style.IconOrigin.BOTTOM_RIGHT=void 0,YY.style.IconOrigin.TOP_LEFT=void 0,YY.style.IconOrigin.TOP_RIGHT=void 0,YY.style.Image=mo,YY.style.RegularShape=_o,YY.style.Stroke=Eo,YY.style.Style=Co,YY.style.Text=Mb,YY.tilegrid={},YY.tilegrid.TileGrid=Rd,YY.tilegrid.WMTS=ev,YY.tilegrid.WMTS.createFromCapabilitiesMatrixSet=rv,YY.tilegrid.createXYZ=Lg,YY.transform={},YY.transform.composeCssTransform=function(t,e,r,n,i,o,a){return qr(zr([1,0,0,1,0,0],t,e,r,n,i,o,a))},YY.util={},YY.util.getUid=nt,YY.webgl={},YY.webgl.ARRAY_BUFFER=fV,YY.webgl.Buffer=_V,YY.webgl.DYNAMIC_DRAW=dV,YY.webgl.ELEMENT_ARRAY_BUFFER=pV,YY.webgl.Helper=CV,YY.webgl.Helper.computeAttributesStride=IV,YY.webgl.PostProcessingPass=SV,YY.webgl.RenderTarget=DV,YY.webgl.STATIC_DRAW=35044,YY.webgl.STREAM_DRAW=35040,YY.xml={},YY.xml.getAllTextContent=Wd,YY.xml.parse=Zd,YY.xml.registerDocument=function(t){hy=t},YY.xml.registerXMLSerializer=function(t){cy=t},window.Handlebars=r(11),VY.plugin={}}]);
//# sourceMappingURL=apiign.ol.min.js.map