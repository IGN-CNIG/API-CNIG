!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports='<table id="m-querydatabase-dataelements" summary="Tabla con los atributos de los elementos de la capa vectorial">\n  <thead>\n    <tr class="m-querydatabase-table-thead">\n      {{#each atributos}}\n      <th>{{value}}</th>\n      {{/each}}\n      </tr>\n    </thead>\n    <tbody>\n      {{#each elementos}}\n      <tr id="{{featureId}}">\n        {{#each datos}}\n        <td>{{this}}</td>\n        {{/each}}\n      </tr>\n      {{/each}}\n    </tbody>\n</table>'},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,l=[],s=!1,f=-1;function p(){s&&c&&(s=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!s){var t=u(p);s=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,s=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||s||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-querydatabase">\n  <div class="title">{{translations.attribute_table}}</div>\n\n  <div id="m-querydatabase-options-container"></div>\n\n  <div id="m-querydatabase-options-information-container"></div>\n\n  <div id="m-querydatabase-options-buttons">\n    <button id="limpiar-filtro-btn" style="display: none;">{{translations.clean_filters}}</button>\n    <button id="exportar-btn" style="display: none;">{{translations.export}}</button>\n    <button id="cleanEmphasis-btn" style="display: none;">Limpiar marcas</button>\n  </div>\n</div>\n'},function(t,e){t.exports='<div id="m-querydatabase-initialview">\n    <div id="m-querydatabase-table">\n      <div class="m-querydatabase-table-loading">\n        <p>{{translations.loading}}</p>\n        <span class="icon-spinner" />\n      </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div id="m-querydatabase-table-content">\n    <div id="m-querydatabase-table-filter">\n      {{#if filters}}\n      {{#each filters}}\n        <label>{{value}}</label>\n        <input class="filter-input" type="text" id="{{value}}"/>\n        {{/each}}\n        <button id="filtrar-elementos">Buscar</button>\n        {{/if}}\n    </div>\n    <div id="m-querydatabase-table-container">\n    </div>\n    <button id="atras">Ver tablas</button>\n</div>'},function(t,e){t.exports='<div id="m-querydatabase-table-content">\n    <div id="m-querydatabase-table-container">\n        <table id="databases" summary="Tabla con las bases de datos disponibles">\n            <thead>\n              <tr class="m-querydatabase-table-thead">\n                <th>Nombre</th>\n                <th>NombreBD</th>\n                <th>Host</th>\n                <th>Puerto</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n                {{#each databases}}\n                <tr>\n                    <td>{{Nombre}}</td>\n                    <td>{{NombreBD}}</td>\n                    <td>{{Host}}</td>\n                    <td>{{Puerto}}</td>\n                    <td><button class="showtables" id="{{Nombre}}">Mostrar tablas</button></td>\n                </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n</div>\n'},function(t,e){t.exports='<div id="m-querydatabase-table-content">\n    <div id="m-querydatabase-table-container">\n        <table id="tables" summary="Tabla con las tablas geométricas disponibles en una base de datos">\n            <thead>\n              <tr class="m-querydatabase-table-thead">\n                <th>Esquema</th>\n                <th>Nombre</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n                {{#each tables}}\n                <tr id="{{Schema}}&{{Nombre}}">\n                      <td>{{Schema}}</td>\n                      <td>{{Nombre}}</td>\n                      <td>\n                        <button class="filter">Filtrar</button>\n\x3c!--                        <button class="showdata">Ver datos</button>--\x3e\n                        <button class="drawtable">Pintar</button>\n                      </td>\n                </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n    <button id="atras">Ver conexiones</button>\n</div>\n'},function(t,e){t.exports='<div id="m-querydatabase-table-content">\n    <div id="m-querydatabase-table-container">\n      <table id="attributedata" summary="Tabla con los atributos de los elementos de la capa vectorial">\n            <thead>\n              <tr class="m-querydatabase-table-thead">\n                <th>Nombre</th>\n                <th>Tipo dato</th>\n              </tr>\n            </thead>\n            <tbody>\n                {{#each attributes}}\n                <tr>\n                  <td>{{Nombre}}</td>\n                  <td>{{TipoDato}}</td>\n                </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n    <button id="atras">Ver tablas</button>\n</div>\n'},function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create QueryDatabaseControl.","no_data":"No data for export."},"tooltip":"Search by filters","values":"Values","attribute_table":"Table of attributes","clean_filters":"Clean applied filters","export":"Export data","not_attributes":"No attributes found.","close":"Close","filters":"Filters","bbox":"By view","area":"By area","csv":"CSV (only attributes)","download":"Download","loading":"Loading information...","search":"Search","filter_by_bbox":"Filter results by current view","filter_by_area":"Filter results by drawing geometry","show_hide":"Hide / Show","information":"Information","search_all_fields":"Search over all fields"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles QueryDatabaseControl.","no_data":"No hay datos para exportar."},"tooltip":"Tabla de contenido","values":"Valores","attribute_table":"Tabla de contenido","clean_filters":"Limpiar filtros aplicados","export":"Exportar datos","not_attributes":"No se han encontrado atributos.","close":"Cerrar","filters":"Filtros","bbox":"Por vista","area":"Por área","csv":"CSV (sólo atributos)","download":"Descargar","loading":"Cargando datos...","search":"Buscar","filter_by_bbox":"Filtrar resultados por vista actual","filter_by_area":"Filtrar resultados dibujando geometría","show_hide":"Ocultar / Mostrar","information":"Información","search_all_fields":"Búsqueda en todos los campos"}')},function(t,e,n){},function(t,e,n){},function(t,e,n){(function(t,n,r,o){(function(e){"use strict";function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var a=Math.max;function u(t){return t}function c(t,e){return function(t,e,n){return e=a(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,u=a(r.length-e,0),c=Array(u);++o<u;)c[o]=r[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=r[o];return l[e]=n(c),i(t,this,l)}}(t,e,u)}var l=function(t){return c((function(e){var n=e.pop();t.call(this,e,n)}))};function s(t){return c((function(e,n){var r=l((function(n,r){var o=this;return t(e,(function(t,e){t.apply(o,n.concat([e]))}),r)}));return n.length?r.apply(this,n):r}))}var f="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,d=f||p||Function("return this")(),h=d.Symbol,y=Object.prototype,m=y.hasOwnProperty,b=y.toString,v=h?h.toStringTag:void 0,g=Object.prototype.toString,w=h?h.toStringTag:void 0;function S(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(t=Object(t),w&&w in t?function(t){var e=m.call(t,v),n=t[v];try{t[v]=void 0;var r=!0}catch(t){}var o=b.call(t);return r&&(e?t[v]=n:delete t[v]),o}(t):function(t){return g.call(t)}(t))}function k(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function E(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function _(t){return null!=t&&E(t.length)&&!function(t){if(!k(t))return!1;var e=S(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)}function j(){}function T(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}var x="function"==typeof Symbol&&Symbol.iterator;function O(t){return null!=t&&"object"==typeof t}function M(t){return O(t)&&"[object Arguments]"==S(t)}var A=Object.prototype,L=A.hasOwnProperty,P=A.propertyIsEnumerable,I=M(function(){return arguments}())?M:function(t){return O(t)&&L.call(t,"callee")&&!P.call(t,"callee")},C=Array.isArray,q="object"==typeof e&&e&&!e.nodeType&&e,F=q&&"object"==typeof n&&n&&!n.nodeType&&n,D=F&&F.exports===q?d.Buffer:void 0,B=(D?D.isBuffer:void 0)||function(){return!1},N=/^(?:0|[1-9]\d*)$/;function R(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||N.test(t))&&t>-1&&t%1==0&&t<e}var V={};V["[object Float32Array]"]=V["[object Float64Array]"]=V["[object Int8Array]"]=V["[object Int16Array]"]=V["[object Int32Array]"]=V["[object Uint8Array]"]=V["[object Uint8ClampedArray]"]=V["[object Uint16Array]"]=V["[object Uint32Array]"]=!0,V["[object Arguments]"]=V["[object Array]"]=V["[object ArrayBuffer]"]=V["[object Boolean]"]=V["[object DataView]"]=V["[object Date]"]=V["[object Error]"]=V["[object Function]"]=V["[object Map]"]=V["[object Number]"]=V["[object Object]"]=V["[object RegExp]"]=V["[object Set]"]=V["[object String]"]=V["[object WeakMap]"]=!1;var G,U="object"==typeof e&&e&&!e.nodeType&&e,W=U&&"object"==typeof n&&n&&!n.nodeType&&n,z=W&&W.exports===U&&f.process,Q=function(){try{return z&&z.binding("util")}catch(t){}}(),J=Q&&Q.isTypedArray,$=J?(G=J,function(t){return G(t)}):function(t){return O(t)&&E(t.length)&&!!V[S(t)]},H=Object.prototype.hasOwnProperty;function K(t,e){var n=C(t),r=!n&&I(t),o=!n&&!r&&B(t),i=!n&&!r&&!o&&$(t),a=n||r||o||i,u=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=u.length;for(var l in t)!e&&!H.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||R(l,c))||u.push(l);return u}var X=Object.prototype,Y=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Z=Object.prototype.hasOwnProperty;function tt(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||X))return Y(t);var e,n,r=[];for(var o in Object(t))Z.call(t,o)&&"constructor"!=o&&r.push(o);return r}function et(t){return _(t)?K(t):tt(t)}function nt(t){if(_(t))return function(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}(t);var e,n,r,o,i=function(t){return x&&t[x]&&t[x]()}(t);return i?function(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}(i):(n=et(e=t),r=-1,o=n.length,function(){var t=n[++r];return r<o?{value:e[t],key:t}:null})}function rt(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}var ot={};function it(t){return function(e,n,r){if(r=T(r||j),t<=0||!e)return r(null);var o=nt(e),i=!1,a=0;function u(t,e){if(a-=1,t)i=!0,r(t);else{if(e===ot||i&&a<=0)return i=!0,r(null);c()}}function c(){for(;a<t&&!i;){var e=o();if(null===e)return i=!0,void(a<=0&&r(null));a+=1,n(e.value,e.key,rt(u))}}c()}}function at(t,e,n,r){it(e)(t,n,r)}function ut(t,e){return function(n,r,o){return t(n,e,r,o)}}function ct(t,e,n){n=T(n||j);var r=0,o=0,i=t.length;function a(t){t?n(t):++o===i&&n(null)}for(0===i&&n(null);r<i;r++)e(t[r],r,rt(a))}var lt=ut(at,1/0),st=function(t,e,n){(_(t)?ct:lt)(t,e,n)};function ft(t){return function(e,n,r){return t(st,e,n,r)}}function pt(t,e,n,r){r=r||j;var o=[],i=0;t(e=e||[],(function(t,e,r){var a=i++;n(t,(function(t,e){o[a]=e,r(t)}))}),(function(t){r(t,o)}))}var dt=ft(pt),ht=s(dt);function yt(t){return function(e,n,r,o){return t(it(n),e,r,o)}}var mt=yt(pt),bt=ut(mt,1),vt=s(bt),gt=c((function(t,e){return c((function(n){return t.apply(null,e.concat(n))}))}));function wt(t){return l((function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}k(r)&&"function"==typeof r.then?r.then((function(t){n(null,t)}),(function(t){n(t.message?t:new Error(t))})):n(null,r)}))}function St(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}var kt,Et=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var u=i[kt?a:++r];if(!1===e(o[u],u,o))break}return t};function _t(t,e){return t&&Et(t,e,et)}function jt(t){return t!=t}function Tt(t,e,n){return e==e?function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,jt,n)}var xt=function(t,e,n){"function"==typeof e&&(n=e,e=null),n=T(n||j);var r=et(t).length;if(!r)return n(null);e||(e=r);var o={},i=0,a=!1,u={},l=[],s=[],f={};function p(t,e){l.push((function(){!function(t,e){if(!a){var r=rt(c((function(e,r){if(i--,r.length<=1&&(r=r[0]),e){var c={};_t(o,(function(t,e){c[e]=t})),c[t]=r,a=!0,u=[],n(e,c)}else o[t]=r,St(u[t]||[],(function(t){t()})),d()})));i++;var l=e[e.length-1];e.length>1?l(o,r):l(r)}}(t,e)}))}function d(){if(0===l.length&&0===i)return n(null,o);for(;l.length&&i<e;)l.shift()()}function h(e){var n=[];return _t(t,(function(t,r){C(t)&&Tt(t,e,0)>=0&&n.push(r)})),n}_t(t,(function(e,n){if(!C(e))return p(n,[e]),void s.push(n);var r=e.slice(0,e.length-1),o=r.length;if(0===o)return p(n,e),void s.push(n);f[n]=o,St(r,(function(i){if(!t[i])throw new Error("async.auto task `"+n+"` has a non-existent dependency in "+r.join(", "));var a,c,l;c=function(){0==--o&&p(n,e)},(l=u[a=i])||(l=u[a]=[]),l.push(c)}))})),function(){for(var t,e=0;s.length;)t=s.pop(),e++,St(h(t),(function(t){0==--f[t]&&s.push(t)}));if(e!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),d()};function Ot(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var Mt=h?h.prototype:void 0,At=Mt?Mt.toString:void 0;function Lt(t){if("string"==typeof t)return t;if(C(t))return Ot(t,Lt)+"";if(function(t){return"symbol"==typeof t||O(t)&&"[object Symbol]"==S(t)}(t))return At?At.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Pt(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}(t,e,n)}var It=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Ct="[\\ud800-\\udfff]",qt="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Ft="\\ud83c[\\udffb-\\udfff]",Dt="[^\\ud800-\\udfff]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="(?:"+qt+"|"+Ft+")?",Vt="[\\ufe0e\\ufe0f]?"+Rt+"(?:\\u200d(?:"+[Dt,Bt,Nt].join("|")+")[\\ufe0e\\ufe0f]?"+Rt+")*",Gt="(?:"+[Dt+qt+"?",qt,Bt,Nt,Ct].join("|")+")",Ut=RegExp(Ft+"(?="+Ft+")|"+Gt+Vt,"g");function Wt(t){return function(t){return It.test(t)}(t)?function(t){return t.match(Ut)||[]}(t):function(t){return t.split("")}(t)}var zt=/^\s+|\s+$/g;function Qt(t,e,n){var r;if((t=null==(r=t)?"":Lt(r))&&(n||void 0===e))return t.replace(zt,"");if(!t||!(e=Lt(e)))return t;var o=Wt(t),i=Wt(e);return Pt(o,function(t,e){for(var n=-1,r=t.length;++n<r&&Tt(e,t[n],0)>-1;);return n}(o,i),function(t,e){for(var n=t.length;n--&&Tt(e,t[n],0)>-1;);return n}(o,i)+1).join("")}var Jt=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,$t=/,/,Ht=/(=.+)?(\s*)$/,Kt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function Xt(t,e){var n={};_t(t,(function(t,e){var r;if(C(t))r=t.slice(0,-1),t=t[t.length-1],n[e]=r.concat(r.length>0?o:t);else if(1===t.length)n[e]=t;else{if(r=function(t){return t=(t=(t=(t=t.toString().replace(Kt,"")).match(Jt)[2].replace(" ",""))?t.split($t):[]).map((function(t){return Qt(t.replace(Ht,""))}))}(t),0===t.length&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");r.pop(),n[e]=r.concat(o)}function o(e,n){var o=Ot(r,(function(t){return e[t]}));o.push(n),t.apply(null,o)}})),xt(n,e)}var Yt="function"==typeof r&&r,Zt="object"==typeof o&&"function"==typeof o.nextTick;function te(t){setTimeout(t,0)}function ee(t){return c((function(e,n){t((function(){e.apply(null,n)}))}))}var ne=ee(Yt?r:Zt?o.nextTick:te);function re(){this.head=this.tail=null,this.length=0}function oe(t,e){t.length=1,t.head=t.tail=e}function ie(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function r(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(u.started=!0,C(t)||(t=[t]),0===t.length&&u.idle())return ne((function(){u.drain()}));for(var r=0,o=t.length;r<o;r++){var i={data:t[r],callback:n||j};e?u._tasks.unshift(i):u._tasks.push(i)}ne(u.process)}function o(t){return c((function(e){i-=1;for(var n=0,r=t.length;n<r;n++){var o=t[n],c=Tt(a,o,0);c>=0&&a.splice(c),o.callback.apply(o,e),null!=e[0]&&u.error(e[0],o.data)}i<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()}))}var i=0,a=[],u={_tasks:new re,concurrency:e,payload:n,saturated:j,unsaturated:j,buffer:e/4,empty:j,drain:j,error:j,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){u.drain=j,u._tasks.empty()},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!u.paused&&i<u.concurrency&&u._tasks.length;){var e=[],n=[],r=u._tasks.length;u.payload&&(r=Math.min(r,u.payload));for(var c=0;c<r;c++){var l=u._tasks.shift();e.push(l),n.push(l.data)}0===u._tasks.length&&u.empty(),i+=1,a.push(e[0]),i===u.concurrency&&u.saturated();var s=rt(o(e));t(n,s)}},length:function(){return u._tasks.length},running:function(){return i},workersList:function(){return a},idle:function(){return u._tasks.length+i===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u._tasks.length),e=1;e<=t;e++)ne(u.process)}}};return u}function ae(t,e){return ie(t,1,e)}re.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},re.prototype.empty=re,re.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},re.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},re.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):oe(this,t)},re.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):oe(this,t)},re.prototype.shift=function(){return this.head&&this.removeLink(this.head)},re.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var ue=ut(at,1);function ce(t,e,n,r){r=T(r||j),ue(t,(function(t,r,o){n(e,t,(function(t,n){e=n,o(t)}))}),(function(t){r(t,e)}))}var le=c((function(t){return c((function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=j,ce(t,e,(function(t,e,r){e.apply(n,t.concat([c((function(t,e){r(t,e)}))]))}),(function(t,e){r.apply(n,[t].concat(e))}))}))})),se=c((function(t){return le.apply(null,t.reverse())}));function fe(t,e,n,r){var o=[];t(e,(function(t,e,r){n(t,(function(t,e){o=o.concat(e||[]),r(t)}))}),(function(t){r(t,o)}))}var pe,de=ft(fe),he=(pe=fe,function(t,e,n){return pe(ue,t,e,n)}),ye=c((function(t){var e=[null].concat(t);return l((function(t,n){return n.apply(this,e)}))}));function me(t,e,n){return function(r,o,i,a){function u(){a&&a(null,n(!1))}function c(t,r,o){if(!a)return o();i(t,(function(r,u){a&&(r||e(u))?(r?a(r):a(r,n(!0,t)),a=i=!1,o(r,ot)):o()}))}arguments.length>3?(a=a||j,t(r,o,c,u)):(a=(a=i)||j,i=o,t(r,c,u))}}function be(t,e){return e}var ve=me(st,u,be),ge=me(at,u,be),we=me(ue,u,be);function Se(t){return c((function(e,n){e.apply(null,n.concat([c((function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&St(n,(function(e){console[t](e)})))}))]))}))}var ke=Se("dir");function Ee(t,e,n){n=rt(n||j);var r=c((function(t,r){if(t)return n(t);r.push(o),e.apply(this,r)}));function o(e,o){return e?n(e):o?void t(r):n(null)}o(null,!0)}function _e(t,e,n){n=rt(n||j);var r=c((function(o,i){return o?n(o):e.apply(this,i)?t(r):void n.apply(null,[null].concat(i))}));t(r)}function je(t,e,n){_e(t,(function(){return!e.apply(this,arguments)}),n)}function Te(t,e,n){function r(e){if(e)return n(e);t(o)}function o(t,o){return t?n(t):o?void e(r):n(null)}n=rt(n||j),t(o)}function xe(t){return function(e,n,r){return t(e,r)}}function Oe(t,e,n){st(t,xe(e),n)}function Me(t,e,n,r){it(e)(t,xe(n),r)}var Ae=ut(Me,1);function Le(t){return l((function(e,n){var r=!0;e.push((function(){var t=arguments;r?ne((function(){n.apply(null,t)})):n.apply(null,t)})),t.apply(this,e),r=!1}))}function Pe(t){return!t}var Ie=me(st,Pe,Pe),Ce=me(at,Pe,Pe),qe=ut(Ce,1);function Fe(t){return function(e){return null==e?void 0:e[t]}}function De(t,e,n,r){var o=new Array(e.length);t(e,(function(t,e,r){n(t,(function(t,n){o[e]=!!n,r(t)}))}),(function(t){if(t)return r(t);for(var n=[],i=0;i<e.length;i++)o[i]&&n.push(e[i]);r(null,n)}))}function Be(t,e,n,r){var o=[];t(e,(function(t,e,r){n(t,(function(n,i){n?r(n):(i&&o.push({index:e,value:t}),r())}))}),(function(t){t?r(t):r(null,Ot(o.sort((function(t,e){return t.index-e.index})),Fe("value")))}))}function Ne(t,e,n,r){(_(e)?De:Be)(t,e,n,r||j)}var Re=ft(Ne),Ve=yt(Ne),Ge=ut(Ve,1);function Ue(t,e){var n=rt(e||j),r=Le(t);!function t(e){if(e)return n(e);r(t)}()}var We=Se("log");function ze(t,e,n,r){r=T(r||j);var o={};at(t,e,(function(t,e,r){n(t,e,(function(t,n){if(t)return r(t);o[e]=n,r()}))}),(function(t){r(t,o)}))}var Qe=ut(ze,1/0),Je=ut(ze,1);function $e(t,e){return e in t}function He(t,e){var n=Object.create(null),r=Object.create(null);e=e||u;var o=l((function(o,i){var a=e.apply(null,o);$e(n,a)?ne((function(){i.apply(null,n[a])})):$e(r,a)?r[a].push(i):(r[a]=[i],t.apply(null,o.concat([c((function(t){n[a]=t;var e=r[a];delete r[a];for(var o=0,i=e.length;o<i;o++)e[o].apply(null,t)}))])))}));return o.memo=n,o.unmemoized=t,o}var Ke=ee(Zt?o.nextTick:Yt?r:te);function Xe(t,e,n){n=n||j;var r=_(e)?[]:{};t(e,(function(t,e,n){t(c((function(t,o){o.length<=1&&(o=o[0]),r[e]=o,n(t)})))}),(function(t){n(t,r)}))}function Ye(t,e){Xe(st,t,e)}function Ze(t,e,n){Xe(it(e),t,n)}var tn=function(t,e){return ie((function(e,n){t(e[0],n)}),e,1)},en=function(t,e){var n=tn(t,e);return n.push=function(t,e,r){if(null==r&&(r=j),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,C(t)||(t=[t]),0===t.length)return ne((function(){n.drain()}));e=e||0;for(var o=n._tasks.head;o&&e>=o.priority;)o=o.next;for(var i=0,a=t.length;i<a;i++){var u={data:t[i],priority:e,callback:r};o?n._tasks.insertBefore(o,u):n._tasks.push(u)}ne(n.process)},delete n.unshift,n};function nn(t,e){if(e=T(e||j),!C(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)t[n](e)}var rn=Array.prototype.slice;function on(t,e,n,r){ce(rn.call(t).reverse(),e,n,r)}function an(t){return l((function(e,n){return e.push(c((function(t,e){if(t)n(null,{error:t});else{var r=null;1===e.length?r=e[0]:e.length>1&&(r=e),n(null,{value:r})}}))),t.apply(this,e)}))}function un(t,e,n,r){Ne(t,e,(function(t,e){n(t,(function(t,n){e(t,!n)}))}),r)}var cn=ft(un);function ln(t){var e;return C(t)?e=Ot(t,an):(e={},_t(t,(function(t,n){e[n]=an.call(this,t)}))),e}var sn=yt(un),fn=ut(sn,1);function pn(t){return function(){return t}}function dn(t,e,n){var r=5,o=0,i={times:r,intervalFunc:pn(o)};function a(t,e){if("object"==typeof e)t.times=+e.times||r,t.intervalFunc="function"==typeof e.interval?e.interval:pn(+e.interval||o),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||r}}if(arguments.length<3&&"function"==typeof t?(n=e||j,e=t):(a(i,t),n=n||j),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var u=1;function c(){e((function(t){t&&u++<i.times&&("function"!=typeof i.errorFilter||i.errorFilter(t))?setTimeout(c,i.intervalFunc(u)):n.apply(null,arguments)}))}c()}var hn=function(t,e){return e||(e=t,t=null),l((function(n,r){function o(t){e.apply(null,n.concat([t]))}t?dn(t,o,r):dn(o,r)}))};function yn(t,e){Xe(ue,t,e)}var mn=me(st,Boolean,u),bn=me(at,Boolean,u),vn=ut(bn,1);function gn(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}dt(t,(function(t,n){e(t,(function(e,r){if(e)return n(e);n(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return n(t);n(null,Ot(e.sort(r),Fe("value")))}))}function wn(t,e,n){var r,o,i=!1;function a(){i||(r.apply(null,arguments),clearTimeout(o))}function u(){var e=t.name||"anonymous",o=new Error('Callback function "'+e+'" timed out.');o.code="ETIMEDOUT",n&&(o.info=n),i=!0,r(o)}return l((function(n,i){r=i,o=setTimeout(u,e),t.apply(null,n.concat(a))}))}var Sn=Math.ceil,kn=Math.max;function En(t,e,n,r){mt(function(t,e,n,r){for(var o=-1,i=kn(Sn((e-t)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=t,t+=n;return a}(0,t,1),e,n,r)}var _n=ut(En,1/0),jn=ut(En,1);function Tn(t,e,n,r){3===arguments.length&&(r=n,n=e,e=C(t)?[]:{}),r=T(r||j),st(t,(function(t,r,o){n(e,t,r,o)}),(function(t){r(t,e)}))}function xn(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function On(t,e,n){if(n=rt(n||j),!t())return n(null);var r=c((function(o,i){return o?n(o):t()?e(r):void n.apply(null,[null].concat(i))}));e(r)}function Mn(t,e,n){On((function(){return!t.apply(this,arguments)}),e,n)}var An=function(t,e){if(e=T(e||j),!C(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;!function r(o){if(n===t.length)return e.apply(null,[null].concat(o));var i=rt(c((function(t,n){if(t)return e.apply(null,[t].concat(n));r(n)})));o.push(i),t[n++].apply(null,o)}([])},Ln={applyEach:ht,applyEachSeries:vt,apply:gt,asyncify:wt,auto:xt,autoInject:Xt,cargo:ae,compose:se,concat:de,concatSeries:he,constant:ye,detect:ve,detectLimit:ge,detectSeries:we,dir:ke,doDuring:Ee,doUntil:je,doWhilst:_e,during:Te,each:Oe,eachLimit:Me,eachOf:st,eachOfLimit:at,eachOfSeries:ue,eachSeries:Ae,ensureAsync:Le,every:Ie,everyLimit:Ce,everySeries:qe,filter:Re,filterLimit:Ve,filterSeries:Ge,forever:Ue,log:We,map:dt,mapLimit:mt,mapSeries:bt,mapValues:Qe,mapValuesLimit:ze,mapValuesSeries:Je,memoize:He,nextTick:Ke,parallel:Ye,parallelLimit:Ze,priorityQueue:en,queue:tn,race:nn,reduce:ce,reduceRight:on,reflect:an,reflectAll:ln,reject:cn,rejectLimit:sn,rejectSeries:fn,retry:dn,retryable:hn,seq:le,series:yn,setImmediate:ne,some:mn,someLimit:bn,someSeries:vn,sortBy:gn,timeout:wn,times:_n,timesLimit:En,timesSeries:jn,transform:Tn,unmemoize:xn,until:Mn,waterfall:An,whilst:On,all:Ie,any:mn,forEach:Oe,forEachSeries:Ae,forEachLimit:Me,forEachOf:st,forEachOfSeries:ue,forEachOfLimit:at,inject:ce,foldl:ce,foldr:on,select:Re,selectLimit:Ve,selectSeries:Ge,wrapSync:wt};e.default=Ln,e.applyEach=ht,e.applyEachSeries=vt,e.apply=gt,e.asyncify=wt,e.auto=xt,e.autoInject=Xt,e.cargo=ae,e.compose=se,e.concat=de,e.concatSeries=he,e.constant=ye,e.detect=ve,e.detectLimit=ge,e.detectSeries=we,e.dir=ke,e.doDuring=Ee,e.doUntil=je,e.doWhilst=_e,e.during=Te,e.each=Oe,e.eachLimit=Me,e.eachOf=st,e.eachOfLimit=at,e.eachOfSeries=ue,e.eachSeries=Ae,e.ensureAsync=Le,e.every=Ie,e.everyLimit=Ce,e.everySeries=qe,e.filter=Re,e.filterLimit=Ve,e.filterSeries=Ge,e.forever=Ue,e.log=We,e.map=dt,e.mapLimit=mt,e.mapSeries=bt,e.mapValues=Qe,e.mapValuesLimit=ze,e.mapValuesSeries=Je,e.memoize=He,e.nextTick=Ke,e.parallel=Ye,e.parallelLimit=Ze,e.priorityQueue=en,e.queue=tn,e.race=nn,e.reduce=ce,e.reduceRight=on,e.reflect=an,e.reflectAll=ln,e.reject=cn,e.rejectLimit=sn,e.rejectSeries=fn,e.retry=dn,e.retryable=hn,e.seq=le,e.series=yn,e.setImmediate=ne,e.some=mn,e.someLimit=bn,e.someSeries=vn,e.sortBy=gn,e.timeout=wn,e.times=_n,e.timesLimit=En,e.timesSeries=jn,e.transform=Tn,e.unmemoize=xn,e.until=Mn,e.waterfall=An,e.whilst=On,e.all=Ie,e.allLimit=Ce,e.allSeries=qe,e.any=mn,e.anyLimit=bn,e.anySeries=vn,e.find=ve,e.findLimit=ge,e.findSeries=we,e.forEach=Oe,e.forEachSeries=Ae,e.forEachLimit=Me,e.forEachOf=st,e.forEachOfSeries=ue,e.forEachOfLimit=at,e.inject=ce,e.foldl=ce,e.foldr=on,e.select=Re,e.selectLimit=Ve,e.selectSeries=Ge,e.wrapSync=wt,Object.defineProperty(e,"__esModule",{value:!0})})(e)}).call(this,n(0),n(14)(t),n(15).setImmediate,n(2))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(16),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,u,c=1,l={},s=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){h(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){h(t.data)},r=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(h,0,t)}:(a="setImmediate$"+Math.random()+"$",u=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&h(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),r=function(e){t.postMessage(a+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return l[c]=o,r(c),c++},p.clearImmediate=d}function d(t){delete l[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=l[t];if(e){s=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(0),n(2))},function(t){t.exports=JSON.parse("{}")},function(t,e,n){"use strict";n.r(e);n(11),n(12);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(s,M.impl.Control);var e,n,r,u=l(s);function s(){return o(this,s),u.apply(this,arguments)}return e=s,(n=[{key:"addTo",value:function(t,e){a(f(s.prototype),"addTo",this).call(this,t,e),this.facadeMap=t,this.vectorSource=void 0}},{key:"setSource",value:function(){this.vectorSource=this.newVectorSource(!1)}},{key:"newVectorSource",value:function(t){return t?new ol.source.Vector({features:new ol.Collection([])}):new ol.source.Vector}},{key:"getPolygonFromExtent",value:function(t){var e=ol.geom.Polygon.fromExtent(t);return new M.Feature("featurebbox.1",{geometry:{coordinates:e.getCoordinates(),type:e.getType()},properties:[]})}},{key:"getLayerExtent",value:function(t){return t.getImpl().getOL3Layer().getSource().getExtent()}},{key:"getGeomExtent",value:function(t,e){var n=null;return"multipoint"===t?n=new ol.geom.MultiPoint(e).getExtent():"point"===t?n=new ol.geom.Point(e).getExtent():"multipolygon"===t?n=new ol.geom.MultiPolygon(e).getExtent():"polygon"===t?n=new ol.geom.Polygon(e).getExtent():"multilinestring"===t?n=new ol.geom.MultiLineString(e).getExtent():"linestring"===t&&(n=new ol.geom.LineString(e).getExtent()),n}},{key:"getTransformedCoordinates",value:function(t,e){var n=ol.proj.getTransform(t,"EPSG:4326");return this.getFullCoordinates(e,n(this.getXY(e)))}},{key:"getXY",value:function(t){for(var e=[],n=0;n<t.length;n+=1)e.push(t[n]);for(;e.length>2;)e.pop();return e}},{key:"getFullCoordinates",value:function(t,e){var n=t;return n[0]=e[0],n[1]=e[1],n}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(),d=n(3),h=n.n(d),y=n(4),m=n.n(y),b=n(1),v=n.n(b),g=n(5),w=n.n(g),S=n(6),k=n.n(S),E=n(7),_=n.n(E),j=n(8),T=n.n(j),x={en:n(9),es:n(10)},O=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},A=function(t){return x[t]},L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O(),n=A(e),r="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(e,"' has not been defined.")):r=t.split(".").reduce((function(t,e){return t[e]}),n),r};n(13);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=N(t);if(e){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(i,M.Control);var e,n,r,o=D(i);function i(t,e,n,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(p)&&M.exception(L("exception.impl"));var u=new p;return(a=o.call(this,u,"QueryDatabase")).filtered=!1,a.bboxfilter=!1,a.collapsed=t,a.position=e,a.connection=n,a.styles=r,a.token=a.getTokenByConnection(),a.atributos=a.connection?a.getArrayFormated(a.connection.attributes):[],a.filters=a.connection?a.getArrayFormated(a.connection.filters):[],a.databaseLayer=new M.layer.Vector({extract:!0,name:"databaseLayer",source:a.getImpl().newVectorSource(!1)}),a.paginaActual=1,a.moveEvents=[],a.elementos=[],a.cluster=!1,a}return e=i,(n=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise((function(n,r){e.createInitialView(t),e.map.addLayers(e.databaseLayer),n(e.html)}))}},{key:"createInitialTemplate",value:function(){var t=M.template.compileSync(h.a,{vars:{translations:{attribute_table:L("attribute_table"),clean_filters:L("clean_filters"),export:L("export")}}});t.querySelector("#m-querydatabase-options-container").appendChild(this.initialView),this.html=t}},{key:"launchComun",value:function(t){this.html.querySelector("#m-querydatabase-table").innerHTML="",this.html.querySelector("#m-querydatabase-options-information-container").innerHTML="",this.html.querySelector("#m-querydatabase-options-information-container").appendChild(t)}},{key:"launchDatabasesWindow",value:function(t){var e=this;this.launchComun(t),document.querySelector("#databases").addEventListener("click",(function(t){"showtables"===t.target.getAttribute("class")&&(e.database=t.target.getAttribute("id"),e.paginaActual=1,e.getTablasDisponibles())}))}},{key:"launchInicial",value:function(){this.connection.table?(this.tabla=this.connection.table,this.connection.schema?this.schema=this.connection.schema:this.schema="public",this.removeMapMoveEvents(),this.drawTable(null),this.createFilterView(),this.addMapMoveEvent(this.filtrarDatos.bind(this))):this.getTablasDisponibles()}},{key:"launchTablesWindow",value:function(t){var e=this;this.launchComun(t),this.removeMapMoveEvents(),document.querySelector("#tables").addEventListener("click",(function(t){if("filter"===t.target.getAttribute("class")){var n=t.target.parentNode.parentNode.getAttribute("id").split("&");e.schema=n[0],e.tabla=n[1],e.paginaActual=1,e.getColumnasTablas()}else if("drawtable"===t.target.getAttribute("class")){var r=t.target.parentNode.parentNode.getAttribute("id").split("&");e.schema=r[0],e.tabla=r[1],e.drawTable(null),e.createFilterView(),e.addMapMoveEvent(e.filtrarDatos.bind(e))}})),this.addAtrasEvent(this.getBasesDatosDisponibles.bind(this))}},{key:"launchAttributesWindow",value:function(t){this.launchComun(t),this.addAtrasEvent(this.getTablasDisponibles.bind(this))}},{key:"launchDataTable",value:function(t){this.launchComun(t),this.addAtrasEvent(this.getTablasDisponibles.bind(this))}},{key:"addAtrasEvent",value:function(t){document.querySelector("#atras").addEventListener("click",t)}},{key:"addPaginationEvent",value:function(t){var e=this;document.querySelector("#m-paginacion").addEventListener("click",(function(n){if(n.target.getAttribute("class").includes("m-grid-item")){if("primero"===n.target.getAttribute("id"))e.paginaActual=1;else if("anterior"===n.target.getAttribute("id")&&e.paginaActual-1>0)e.paginaActual--;else if("siguiente"===n.target.getAttribute("id")&&e.paginaActual+1>=e.paginasTotales)e.paginaActual++;else if("ultimo"===n.target.getAttribute("id"))e.paginaActual=e.paginasTotales;else{if(!n.target.getAttribute("class").includes("pag-disponible"))return;e.paginaActual=Number.parseInt(n.target.getAttribute("id"))}t()}}))}},{key:"createInitialView",value:function(t){this.initialView=M.template.compileSync(m.a,{}),this.createInitialTemplate(),this.connection&&this.connection.host&&this.connection.port&&this.connection.name&&this.connection.user&&this.connection.password?this.launchInicial():this.getBasesDatosDisponibles()}},{key:"getBasesDatosDisponibles",value:function(){var t=this,e="".concat(M.config.MAPEA_URL,"/api/database");M.remote.get(e).then((function(e){var n=JSON.parse(e.text),r=M.template.compileSync(k.a,{vars:{databases:n}});t.launchDatabasesWindow(r)}))}},{key:"getTablasDisponibles",value:function(){var t=this,e="".concat(M.config.MAPEA_URL,"/api/database/");e=e.concat(this.token?this.token:this.database).concat("/tables?size=0"),this.token&&(e=e.concat("&token=true")),M.remote.get(e).then((function(e){var n=JSON.parse(e.text).results,r=M.template.compileSync(_.a,{vars:{tables:n}});t.launchTablesWindow(r)}))}},{key:"getColumnasTablas",value:function(){var t=this,e="".concat(M.config.MAPEA_URL,"/api/database/");e=e.concat(this.token?this.token:this.database).concat("/attributes/".concat(this.tabla,"?schema=").concat(this.schema,"&size=0")),this.token&&(e=e.concat("&token=true")),M.remote.get(e).then((function(e){var n=JSON.parse(e.text).results,r=M.template.compileSync(T.a,{vars:{attributes:n}});t.launchAttributesWindow(r)}))}},{key:"getDataTable",value:function(){var t=this,e="".concat(M.config.MAPEA_URL,"/api/database/");e=e.concat(this.token?this.token:this.database).concat("/".concat(this.tabla,"/filtered?schema=").concat(this.schema,"&size=0")),this.token&&(e=e.concat("&token=true")),M.remote.get(e).then((function(e){var n=JSON.parse(e.text).results,r=M.template.compileSync(v.a,{vars:{rows:n}});t.launchDataTable(r)}))}},{key:"drawTable",value:function(t){var e=this;this.cluster=!1;var n=this.buildGeomFromBbox(),r="".concat(M.config.MAPEA_URL,"/api/database/");r=r.concat(this.token?this.token:this.database).concat("/".concat(this.tabla,"/filtered?schema=").concat(this.schema)),this.token&&(r=r.concat("&token=true")),r=r.concat("&bbox=".concat(n));var o=this.map.getZoom();r=r.concat("&zoom=".concat(o)),t&&(r=r.concat(t)),r=r.concat("&busquedaGeneral=etiqueta;tipo@mont*a"),M.remote.get(r).then((function(t){var n=JSON.parse(t.text);n&&n.results&&(e.elementos=n.results,-999===n.numPagina&&(e.cluster=!0),e.drawElements(),e.createDataView())}))}},{key:"createDataView",value:function(){if(this.html.querySelector("#m-querydatabase-table-container").innerHTML="",!this.cluster){var t=this.getAttributes(),e=this.getElementsWithAttributes(),n=M.template.compileSync(v.a,{vars:{elementos:e,atributos:t}});n.addEventListener("click",this.interaccionTabla.bind(this)),this.html.querySelector("#m-querydatabase-table-container").appendChild(n)}}},{key:"createFilterView",value:function(){var t=this.connection&&this.connection.table&&this.connection.table===this.tabla?this.filters:[],e=M.template.compileSync(w.a,{vars:{filters:t}});this.launchComun(e);var n=e.querySelector("#filtrar-elementos");n&&n.addEventListener("click",this.filtrarDatos.bind(this)),e.querySelector("#atras").addEventListener("click",this.getTablasDisponibles.bind(this)),this.createDataView()}},{key:"filtrarDatos",value:function(){for(var t="",e=document.querySelectorAll(".filter-input"),n=0;n<e.length;n++){var r=e[n].getAttribute("id"),o=e[n].value;o&&r&&(o=escape(o),t=t.concat("&".concat(r,"=").concat(o)))}this.drawTable(t)}},{key:"drawElements",value:function(){for(var t=[],e=0;e<this.elementos.length;e++)if(this.elementos[e].geometry){var n=this.getFeatureFromElement(this.elementos[e]);t.push(n),this.elementos[e].featureId=n.getId()}this.databaseLayer.removeFeatures(this.databaseLayer.getFeatures()),this.databaseLayer.setStyle(null),t.length>0&&this.selectStyleLayer(t[0].getGeometry().type),this.databaseLayer.addFeatures(t)}},{key:"getFeatureFromElement",value:function(t){var e=(new ol.format.WKT).readGeometryFromText(t.geometry).transform("EPSG:".concat(t.srid),this.map_.getProjection().code),n=new M.Feature,r={type:e.getType(),coordinates:e.getCoordinates()};return n.setGeometry(r),delete t.geometry,delete t.srid,n.setAttributes(t),this.cluster&&n.setStyle(this.getClusterStyle(t.elementos_cluster)),n}},{key:"selectStyleLayer",value:function(t){var e=this.getStyleByGeomType(t);this.databaseLayer.setStyle(e)}},{key:"getStyleByGeomType",value:function(t){var e=null;return t&&this.styles&&this.styles.default&&(t.includes("Point")&&this.styles.default.point?e=this.styles.default.point:t.includes("LineString")&&this.styles.default.line?e=this.styles.default.line:t.includes("Polygon")&&this.styles.default.polygon&&(e=this.styles.default.polygon)),e}},{key:"getClusterStyle",value:function(t){var e=this.getStyleByGeomType("Polygon").clone();return e||(e=new M.style.Polygon({fill:{color:"blue",opacity:.5},stroke:{color:blue}})),e.getOptions().label={text:t,align:M.style.align.CENTER,baseline:M.style.baseline.MIDDLE},e}},{key:"getClusterStyle2",value:function(t){var e=this.getStyleByGeomType("Point").clone();return e||(e=new M.style.Point({fill:{color:"blue",opacity:.5},stroke:{color:blue}})),e.getOptions().label={text:t,align:M.style.align.CENTER,baseline:M.style.baseline.MIDDLE},e.getOptions().icon={form:M.style.form.MARKER,fontsize:.5,color:"red",fill:"red"},e}},{key:"isNotAdded",value:function(t,e){return!I(e.children).some((function(e){return e.innerHTML===t}))}},{key:"equals",value:function(t){return t instanceof i}},{key:"addAbrePanelEvent",value:function(){var t=this,e=document.querySelector(".m-panel.m-querydatabase.collapsed .m-panel-btn.icon-tabla");null!==e&&e.addEventListener("click",(function(){var e=t.map_.getContainer().parentElement.parentElement;e.style.width="calc(100% - 530px)",e.style.position="fixed","TL"===t.position?e.style.left="530px":e.style.right="530px",t.map_.refresh(),t.addCierraPanelEvent()}))}},{key:"addCierraPanelEvent",value:function(){var t=this,e=document.querySelector(".m-panel.m-querydatabase.opened .m-panel-btn");null!==e&&e.addEventListener("click",(function(){var e=t.map_.getContainer().parentElement.parentElement;e.style.width="100%",e.style.position="","TL"===t.position_?e.style.left="unset":e.style.right="unset",t.map_.refresh(),t.addAbrePanelEvent()}))}},{key:"initPanelAttributes",value:function(){if(this.collapsed)this.addAbrePanelEvent();else{this.addCierraPanelEvent();var t=this.map_.getContainer().parentElement.parentElement;t.style.width="calc(100% - 530px)",t.style.position="fixed","TL"===this.position?t.style.left="530px":t.style.right="530px",this.map_.refresh()}}},{key:"buildGeomFromBbox",value:function(){var t=this.map.getBbox(),e=new M.Feature,n=[];n.push([t.x.min,t.y.min]),n.push([t.x.max,t.y.min]),n.push([t.x.max,t.y.max]),n.push([t.x.min,t.y.max]),n.push([t.x.min,t.y.min]);var r={type:"Polygon",coordinates:[n]};return e.setGeometry(r),(new M.format.WKT).write(e).replaceAll(" ","$")+"srid"+this.map.getProjection().code.slice(5)}},{key:"addMapMoveEvent",value:function(t){this.map.getMapImpl().on("moveend",t),this.moveEvents.push(t)}},{key:"removeMapMoveEvents",value:function(){for(var t=0;t<this.moveEvents.length;t++)this.map.getMapImpl().un("moveend",this.moveEvents[t]);this.moveEvents=[]}},{key:"getTokenByConnection",value:function(){if(this.connection&&this.connection.host&&this.connection.port&&this.connection.name&&this.connection.user&&this.connection.password){var t="host=".concat(this.connection.host,"&port=").concat(this.connection.port,"&name=").concat(this.connection.name,"&user=").concat(this.connection.user,"&password=").concat(this.connection.password);return btoa(t)}return""}},{key:"getArrayFormated",value:function(t){var e=[];if(t&&Array.isArray(t))for(var n=0;n<t.length;n++){var r={key:n,value:t[n]};e.push(r)}return e}},{key:"getElementsWithAttributes",value:function(){for(var t=[],e=0;e<this.elementos.length;e++){var n=[];if(this.connection&&this.connection.table&&this.connection.table===this.tabla&&this.atributos&&this.atributos.length>0)for(var r=0;r<this.atributos.length;r++)n.push(this.elementos[e][this.atributos[r].value]);else n=Object.values(this.elementos[e]).filter((function(t){if(!t.includes("mapea_feature"))return t}));t.push({featureId:this.elementos[e].featureId,datos:n})}return t}},{key:"getAttributes",value:function(){var t=[];return this.connection&&this.connection.table&&this.connection.table===this.tabla&&this.atributos&&this.atributos.length>0?t=this.atributos:this.elementos&&this.elementos.length>0&&(t=this.getArrayFormated(Object.keys(this.elementos[0]).filter((function(t){if("featureId"!==t)return t})))),t}},{key:"interaccionTabla",value:function(t){"td"===t.target.localName?this.resaltarElemento(t.target.parentNode.id):"tr"===t.target.localName&&this.resaltarElemento(t.target.id)}},{key:"resaltarElemento",value:function(t){var e=this.databaseLayer.getFeatureById(t);this.cambiarEstiloFeature(e)}},{key:"cambiarEstiloFeature",value:function(t){this.feature&&this.feature.setStyle(null);var e=null;if(this.styles&&this.styles.select){var n=t.getGeometry().type;n.includes("Point")&&this.styles.select.point?e=this.styles.select.point:n.includes("LineString")&&this.styles.select.line?e=this.styles.select.line:n.includes("Polygon")&&this.styles.select.polygon&&(e=this.styles.select.polygon)}t.setStyle(e),this.feature=t}}])&&q(e.prototype,n),r&&q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}();n(17);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Q(t);if(e){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(i,M.Plugin);var e,n,r,o=W(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).map_=null,e.controls_=[],e.position_=t.position||"TL",e.collapsed_=t.collapsed,void 0===e.collapsed_&&(e.collapsed_=!0),e.collapsible_=t.collapsible,void 0===e.collapsible_&&(e.collapsible_=!0),e.connection_=t.connection,e.styles_=t.styles,e}return e=i,(n=[{key:"addTo",value:function(t){this.map_=t,this.panel_=new M.ui.Panel("panelQueryDatabase",{className:"m-querydatabase",collapsed:this.collapsed_,collapsible:this.collapsible_,position:M.ui.position[this.position_],collapsedButtonClass:"icon-tabla",tooltip:L("tooltip")}),this.control_=new R(this.collapsed_,this.position_,this.connection_,this.styles_),this.controls_.push(this.control_),this.panel_.addControls(this.controls_),t.addPanels(this.panel_),this.control_.initPanelAttributes()}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_);var t=[null,null,null,null];this.map_=t[0],this.control_=t[1],this.controls_=t[2],this.panel_=t[3]}},{key:"name",get:function(){return"querydatabase"}}])&&G(e.prototype,n),r&&G(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.QueryDatabase=J,window.M.control.QueryDatabaseControl=R,window.M.impl.control.QueryDatabaseControl=p}]);
//# sourceMappingURL=querydatabase.ol.min.js.map