!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t){t.exports=JSON.parse('{"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}')},function(t){t.exports=JSON.parse('{"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}')},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-selectiondraw">\r\n    <button id="point" class="g-plugin-selectordraw-pin-seleccionado" title="Buscar punto"></button>\r\n    <button id="polygon" class="g-plugin-selectordraw-poligono" title="Buscar polígono"></button>\r\n    <button id="clear" class="g-plugin-selectordraw-papelera" title="Eliminar búsqueda"></button>\r\n</div>'},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,c=void 0,c=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===r(c)?c:String(c)),o)}var i,c}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),radius:6})}),p=new M.impl.format.GeoJSON,y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(u,M.impl.Control);var e,n,r,c=a(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this)).facadeControl=null,e.destProj=t,e}return e=u,(n=[{key:"addTo",value:function(t,e){i(f(u.prototype),"addTo",this).call(this,t,e),this.map=t,this.olMap=t.getMapImpl()}},{key:"activate",value:function(t,e){var n=this;e.classList.add("activated");var r=this.map.getProjection().code,o=this.map.getLayers().find((function(t){return"__draw__"===t.name}));if(null!=o){var i=o.getImpl().getOL3Layer();if(i.setStyle(s),null!=i){var c=i.getSource();this.interaction_=new ol.interaction.Draw({source:c,type:t}),this.interaction_.on("drawend",(function(t){var e=t.feature.clone(),o=ol.sphere.getArea(e.getGeometry());e.getGeometry().transform(r,n.destProj);var i=p.writeFeatureObject(e);i.properties={area:{km:o/Math.pow(10,6),m:o}},n.facadeControl.fire("finished:draw",[i])})),this.olMap.addInteraction(this.interaction_)}}}},{key:"deactivate",value:function(t){t.forEach((function(t){return t.classList.remove("activated")})),this.olMap.removeInteraction(this.interaction_)}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(),d=n(2),b=n.n(d),v=n(0),m=n(1),w={en:v,es:m},g=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},h=function(t){return"es"===t||"en"===t?w[t]:M.language.getTranslation(t).selectiondraw},O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=h(e),r="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(e,"' has not been defined.")):r=t.split(".").reduce((function(t,e){return t[e]}),n),r};function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===j(i)?i:String(i)),r)}var o,i}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T(t);if(e){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(i,M.Control);var e,n,r,o=S(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(y)&&M.exception(O("exception_selectiondrawcontrol"));var n=new y(t.projection);return e=o.call(this,n,"SelectionDraw"),n.facadeControl=k(e),e}return e=i,(n=[{key:"createView",value:function(t){var e=this;return new Promise((function(n){var r=M.template.compileSync(b.a),o=r.querySelector("button#polygon"),i=r.querySelector("button#point"),c=r.querySelector("button#clear"),l=t.getLayers().find((function(t){return"__draw__"===t.name}));c.addEventListener("click",(function(){l.clear()})),i.addEventListener("click",(function(){"Point"===e.activeGeometry?e.deactivate([i,o]):(e.deactivate([i,o]),e.activate("Point",i))})),o.addEventListener("click",(function(){"Polygon"===e.activeGeometry?e.deactivate([i,o]):(e.deactivate([i,o]),e.activate("Polygon",o))})),document.onkeydown=function(t){var e=window.event?event:t;if(90===e.keyCode&&e.ctrlKey){var n=l.getImpl().getOL3Layer().getSource().getFeatures().length;l.getImpl().getOL3Layer().getSource().removeFeature(l.getImpl().getOL3Layer().getSource().getFeatures()[n-1])}},n(r)}))}},{key:"activate",value:function(t,e){this.activeGeometry=t,this.getImpl().activate(t,e)}},{key:"deactivate",value:function(t){this.activeGeometry="",this.getImpl().deactivate(t)}},{key:"equals",value:function(t){return t instanceof i}}])&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}();function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return(e=B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===C(e)?e:String(e)}function G(t,e){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(i,M.Plugin);var e,n,r,o=q(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I(this,i),t=o.call(this);var n=x({collapsed:!1,collapsible:!0,position:"TL",projection:"EPSG:3857"},e);return t.map_=null,t.controls_=[],t.collapsed=n.collapsed||!1,t.collapsible=n.collapsible||!0,t.position=n.position||"TL",t.control_=new R(n),t.name=i.NAME,t}return e=i,r=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?v:m:M.language.getTranslation(t).selectiondraw}}],(n=[{key:"addTo",value:function(t){var e=this;this.map_=t,this.panel_=new M.ui.Panel("panel_selection_raw",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position],collapsedButtonClass:"g-plugin-selectordraw-editar",className:"m-selectiondraw",tooltip:O("tooltip")}),this.panel_.addControls(this.control_),t.addPanels(this.panel_),this.control_.on("finished:draw",(function(t){e.fire("finished:draw",[t])}))}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed,"*").concat(this.collapsible)}}])&&N(e.prototype,n),r&&N(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}();J.NAME="selectiondraw",window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.SelectionDraw=J,window.M.control.SelectionDrawControl=R,window.M.impl.control.SelectionDrawControl=y}]);
//# sourceMappingURL=selectiondraw.ol.min.js.map