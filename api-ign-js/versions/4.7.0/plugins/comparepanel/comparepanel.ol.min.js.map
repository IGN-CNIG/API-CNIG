{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/comparepanel.html","webpack:///./src/templates/cpmirrorpanel.html","webpack:///./src/templates/lyrdropdown.html","webpack:///./src/templates/cptimeline.html","webpack:///./src/templates/cplyrcompare.html","webpack:///./src/templates/cptransparency.html","webpack:///./src/impl/ol/js/comparepanelcontrol.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/impl/ol/js/cpmirrorpanel.js","webpack:///./src/impl/ol/js/lyrdropdowncontrol.js","webpack:///./src/facade/js/lyrdropdowncontrol.js","webpack:///./src/facade/js/lyrdropdown.js","webpack:///./src/facade/js/cpmirrorpanelcontrol.js","webpack:///./src/facade/js/cpmirrorpanel.js","webpack:///./src/impl/ol/js/cptimelinecontrol.js","webpack:///./src/facade/js/cptimelinecontrol.js","webpack:///./src/facade/js/cptimeline.js","webpack:///./src/impl/ol/js/cplyrcompareinteraction.js","webpack:///./src/impl/ol/js/cplyrcomparecontrol.js","webpack:///./src/facade/js/cplyrcomparecontrol.js","webpack:///./src/facade/js/cplyrcompare.js","webpack:///./src/impl/ol/js/cptransparentInteraction.js","webpack:///./src/impl/ol/js/cptransparencycontrol.js","webpack:///./src/facade/js/cptransparencycontrol.js","webpack:///./src/facade/js/cptransparency.js","webpack:///./src/facade/js/comparepanelcontrol.js","webpack:///./src/facade/js/comparepanel.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ComparepanelControl","_M$impl$Control","_inherits","M","impl","Control","_super","_createSuper","_classCallCheck","apply","arguments","map","html","this","olMap","getMapImpl","_get","_getPrototypeOf","translations","en","es","getLang","res","language","getTranslation","lang","comparepanel","getValue","keyPath","length","undefined","translation","utils","isNullOrEmpty","console","warn","concat","split","reduce","prev","current","CompareMirrorpanel","_this","getInteractions","forEach","interaction","ol","DoubleClickZoom","dblClickInteraction_","LyrdropdownControl","lyrA","setVisible","layer","_M$Control","values","isUndefined","LyrdropdownImplControl","exception","pluginOnLeft","layers","collapsible","collapsed","layerSelected","lyrsMirrorMinZindex","template","_this2","on","evt","ADDED_LAYER","type","Promise","success","fail","transformToLayers","getLayers","some","removeLayers","capas","legend","options","jsonp","vars","tooltip","nolayertext","compileSync","dialog","error","activate","querySelector","addEventListener","layerSel","filter","target","addLayers","removeEffects","setZIndex","getImpl","setLayer","disabled","names","log","_this3","transform","newLayer","layerByObject","includes","isValidLayer","indexOf","urlLayer","toUpperCase","WMS","url","useCapabilities","WMTS","matrixSet","transparent","displayInLayerSwitcher","queryable","visibility","format","layerByName","getOL3Layer","setTimeout","load","facadeLayer_","remove","control","Lyrdropdown","_M$Plugin","Plugin","name_","map_","controls_","className","positions","position","Array","isArray","tooltip_","metadata_","api","metadata","control_","push","panel_","ui","Panel","collapsedButtonClass","addControls","addPanels","removeControls","_ref","lyrList","optionLyrs","iOpt","join","deactivate","plugin","visible","XYZ","projection","maxZoom","MirrorpanelImplControl","modeViz","showCursors","mapL","A","B","C","D","lyrCursor","featureLyrCursor","oldClass","reverseLayout","enabledPlugins","backImgLayersConfig","styleCursor","style","Point","icon","form","CIRCLE","fontsize","radius","rotation","rotate","offset","color","fill","gradientcolor","opacity","defaultBaseLyrs","mirrorLayers","lyDropControlA","lyDropControlB","lyDropControlC","lyDropControlD","createMapContainers","string","parseToHtml","templateVars","htmlText","Handlebars","compile","templateFn","stringToHtml","zindex_","addLayerCursor","templateOptions","titleMirrorpanel","modViz0","modViz1","modViz2","modViz3","modViz4","modViz5","modViz6","modViz7","modViz8","modViz9","querySelectorAll","button","manageVisionPanelByCSSGrid","bigContainer","document","createElement","id","classList","add","mapjsA","getElementById","toString","parentElement","insertBefore","appendChild","mapjsB","mapjsC","mapjsD","change","config","MOBILE_WIDTH","pluginsControls","entries","_ref2","_slicedToArray","e","_toConsumableArray","getControls","getPlugins","changeStyleResponsive","oldModeViz","display","createMapObjects","toDelete","removePlugins","addPlugin","refresh","changeViewPluginsGrid","mapLyr","_this4","pluginFullTOC4map","pluginBackImgLayer4map","pluginVector","container","center","getCenter","getProjection","code","units","zoom","getZoom","setView","getView","listaCtrls","listaPlugs","itemCtrl","itemPlug","FullTOC","http","https","precharged","Vectors","BackImgLayer","layerId","layerVisibility","columnsNumber","layerOpts","lyDropControl","_this5","Vector","Feature","properties","geometry","coordinates","addFeatures","setStyle","event","keys","k","setGeometry","coordinate","setDisabledLyrs","lienzo","Mirrorpanel","enabledKeyFunctions","values_","MirrorpanelControl","zEvent","ctrlKey","shiftKey","keyStr","altKey","metaKey","removeEventListener","removeMaps","destroyMapsContainer","backImgLayersParams","manageLyrAvailable","TimelineControl","TimelineImplControl","running","animationFrame","animation","speed","intervals","interval","copy","getMapLayer","iv","number","tag","service","titleTimeline","play","parseInt","dataset","append","setProperty","slider","setAttribute","changeSlider","clearTimeout","playTimeline","elem","left","min","max","step","parseFloat","innerHTML","layerSearch","indexLyr","this_","initialLyr","next","end","clearInterval","_this6","zIndex_","Timeline","isString","JSON","parse","replace","removeTimelineLayers","setDefaultLayer","LyrcompareInteraction","_ol$interaction$Point","Pointer","layers_","swipeClicked","_assertThisInitialized","handleDownEvent","setPosition","handleUpEvent","handleMoveEvent","optionsE","pos","opacityVal","OLVersion","layerA","addLayerA","layerB","lyrB","addLayerB","lyrC","lyrD","layerC","addLayerC","layerD","addLayerD","getMap","prerender","Observable","unByKey","postrender","precompose","postcompose","renderSync","setMap","createSwipeControl","precomposeA_","postcomposeA_","precomposeB_","postcomposeB_","precomposeC_","postcomposeC_","precomposeD_","postcomposeD_","setOpacity","staticDivision","updatePosition","comparisonMode","splice","pixel","pointerEvent","buttons","lienzoMapa","getSize","moveSwipeControl","swipeControl","offsetWidth","top","offsetHeight","tl","tr","br","bl","ctx","context","mapSize","frameState","pixelRatio","widthClip","heightClip","save","beginPath","render","getRenderPixel","moveTo","lineTo","closePath","clip","restore","swipeIcon","b","Lyrcomparecontrol","transparentInteraction_","addInteraction","setComparisonMode","setStaticDivision","setVisibilityLayersCD","addLayer","removeInteraction","removeLayer","unique","a","LyrCompareControl","LyrcompareImplControl","layerSelectedA","layerSelectedB","layerSelectedC","layerSelectedD","defaultLyrA","defaultLyrB","defaultLyrC","defaultLyrD","isLoad","allLayerLoad","setFunctionsAndCompile","idInterval","setInterval","tooltip_vcurtain","tooltip_hcurtain","tooltip_multicurtain","tooltip_deactivatecurtain","static","dynamic","mixed","opacity_tooltip","static_tooltip","dynamic_tooltip","mixed_tooltip","lyrLeftSelect_tooltip","lyrRightSelect_tooltip","setEventsAndValues","updateControls","deactivateCurtain","activateCurtain","Number","checked","item","lstLayers","checkLayersAreDifferent","info","removeEffectsComparison","effectSelectedCurtain","lyerA","lyerB","lyerC","lyerD","compLyers","Set","activeDefault","_this7","selectedIndex","removeEffectsCurtain","updateLyrsAvailables","dropDownLyrLetter","dropDownContainer","removeActivate","activateByMode","swapControl","_this8","layerByUrl","LyrCompare","error_","interface","removeCurtainLayers","getLayersNames","TransparentInteraction","freeze","freezeInPosition","precompose_","postcompose_","arc","Math","PI","lineWidth","strokeStyle","stroke","TransparencyControl","freezePosition","setRadius","setFreeze","toogleFreeze","TransparencyImplControl","freezeSpyEye","transparency","unfreeze","activate_spyeye","deactivate_spyeye","effectSelected","Transparency","isNaN","separatorApiJson","separator","lyrAvailable","removeTransparencyLayers","ComparepanelImplControl","baseLayers","layersPlugins","defaultComparisonMode","defaultComparisonViz","previousComparisonMode","actualComparisonMode","urlCover","params","mirrorpanelParams","timelineParams","lyrcompareParams","transparencyParams","allLayersName","lyrDef","lyrAttrib","mirrorpanel","timeline","lyrcompare","panels","plugins","lyrCoverture","tooltipLyr","tooltipMirrorpanel","tooltipTimeline","tooltipTransparency","addComparators","index","_element","element","_className","addButtonEvents","setComparatorsDefaultStyle","loadCoverPNOALyr","onMoveEnd","getCobertura","deactivateAndActivateMirrorPanel","deactivateAndActivateOtherModes","lyr","getSource","key_","toggle","contains","estiloPoly","Polygon","optionsLayer","GeoJSON","callback","pixelCentral","getPixelFromCoordinate","forEachFeatureAtPixel","feature","_this9","Comparepanel","COMP_PLUGIN_NAMES","vertical","defaultCompareModes","defaultCompareMode","defaultCompareViz","layerName_","layerName","layerCobertura_","layerCobertura","urlCoberturas_","urlcoberturas","stringify","window","M$plugin$Comparepanel","M$control$ComparepanelControl","M$plugin$LyrCompare","M$control$LyrCompareControl","M$plugin$Mirrorpanel","M$control$CompareMirrorpanel","M$plugin$Timeline","M$control$TimelineControl","M$plugin$Transparency","M$control$TransparencyControl","M$plugin$Lyrdropdown","M$control$LyrdropdownControl","M$impl$control$ComparepanelControl","M$impl$control$Lyrcomparecontrol","M$impl$control$LyrcompareInteraction","M$impl$control$CompareMirrorpanel","M$impl$control$TimelineControl","M$impl$control$TransparencyControl","M$impl$control$TransparentInteraction","M$impl$control$LyrdropdownControl"],"mappings":"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","file":"comparepanel.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-comparepanel-container\\\">\\n    <div id='m-cp-mirrorpanel'>\\n        <button id='m-cp-mirrorpanel-btn' class=\\\"cp-button cp-icon\\\" title=\\\"{{translations.tooltipMirrorpanel}}\\\"></button>\\n    </div>\\n    <div id='m-cp-lyrcompare'>\\n        <button id='m-cp-lyrcompare-btn' class=\\\"cp-button cp-comparador-capas\\\" title=\\\"{{translations.tooltipLyr}}\\\"></button>\\n    </div>\\n    <div id='m-cp-timeline'>\\n        <button id='m-cp-timeline-btn' class=\\\"cp-button cp-gestion-reloj2\\\" title=\\\"{{translations.tooltipTimeline}}\\\" style=\\\"display:none;\\\"></button>\\n    </div>\\n    <div id='m-cp-transparency'>\\n        <button id='m-cp-transparency-btn' class=\\\"cp-button cp-transparency-icon\\\" title=\\\"{{translations.tooltipTransparency}}\\\"></button>\\n    </div>\\n    <!--\\n    <div id='m-cp-transparency'>\\n        <button id='m-cp-transparency-btn' class=\\\"cp-button cp-transparency-icon\\\" title=\\\"{{translations.tooltipTransparency}}\\\"></button>\\n    </div>\\n    -->\\n    <!--<div id='m-cp-testing'>-->\\n        <!--<button id='m-cp-testing-btn' class=\\\"cp-button  cp-gestion-testing\\\" title=\\\"{{translations.tooltipTransparency}}\\\" ></button>-->\\n    <!--</div>-->\\n\\n\\n   \\n\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-mirrorpanel-container\\\">\\n  <div class=\\\"div-m-mirrorpanel-panel\\\">\\n    <div class=\\\"m-mirrorpanel-effect-buttoms\\\">\\n      <button id=\\\"set-mirror-0\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz0}}\\\"><i class=\\\"cp-modeviz0\\\"></i></button>\\n      <button id=\\\"set-mirror-1\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz1}}\\\"><i class=\\\"cp-modeviz1\\\"></i></button>\\n      <button id=\\\"set-mirror-2\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz2}}\\\"><i class=\\\"cp-modeviz2\\\"></i></button>\\n      <button id=\\\"set-mirror-3\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz3}}\\\"><i class=\\\"cp-modeviz3\\\"></i></button>\\n      <button id=\\\"set-mirror-4\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz4}}\\\"><i class=\\\"cp-modeviz4\\\"></i></button>\\n      <button id=\\\"set-mirror-5\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz5}}\\\"><i class=\\\"cp-modeviz5\\\"></i></button>\\n      <button id=\\\"set-mirror-6\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz6}}\\\"><i class=\\\"cp-modeviz6\\\"></i></button>\\n      <button id=\\\"set-mirror-7\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz7}}\\\"><i class=\\\"cp-modeviz7\\\"></i></button>\\n      <button id=\\\"set-mirror-8\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz8}}\\\"><i class=\\\"cp-modeviz8\\\"></i></button>\\n      <button id=\\\"set-mirror-9\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz9}}\\\"><i class=\\\"cp-modeviz9\\\"></i></button>\\n    </div>\\n    \\n  </div>\\n\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-lyrdropdown\\\">\\n  <div class=\\\"m-lyrdropdown-select\\\" id=\\\"m-lyrcompare-lyrB-cont\\\">\\n    <select id=\\\"m-lyrdropdown-selector\\\">\\n        <option value='None'>{{translations.nolayertext}}</option>\\n        {{#each options}}\\n        <option value='{{this.name}}'>{{this.legend}}</option>\\n        {{/each}}        \\n    </select>\\n    <div class=\\\"m-lyrdropdown-select_arrow\\\">\\n    </div>\\n  </div>\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-timeline-container\\\">\\n    <div class=\\\"div-m-timeline-panel\\\">\\n        <div class=\\\"div-m-timeline-slider\\\">\\n            <input type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"0\\\" step=\\\"any\\\" id=\\\"input-slider\\\"></input>\\n            <div class='slider-tags'></div>\\n        </div>\\n        <div class=\\\"m-timeline-names\\\">\\n            \\n        </div>\\n        <div class=\\\"m-timeline-button\\\">\\n            <button id=\\\"m-timeline-play\\\" class=\\\"cp-control-siguiente\\\" title=\\\"Start / Stop\\\"></button>\\n        </div>\\n    </div>\\n</div>\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-lyrcompare-container\\\">\\n    <div class=\\\"div-m-lyrcompare-panel\\\">\\n        <div class=\\\"m-lyrcompare-effect-buttoms\\\">\\n            <button id=\\\"m-lyrcompare-vcurtain\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_vcurtain}}\\\"><i class=\\\"cp-columns\\\"></i></button>\\n            <button id=\\\"m-lyrcompare-hcurtain\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_hcurtain}}\\\"><i class=\\\"cp-columns-rotate\\\"></i></button>\\n            <button id=\\\"m-lyrcompare-multicurtain\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_multicurtain}}\\\"><i class=\\\"cp-th-large\\\"></i></button>\\n            <button id=\\\"m-lyrcompare-deactivate\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_deactivatecurtain}}\\\"><i class=\\\"cp-deactivateCurtain\\\"></i></button>\\n        </div>\\n        <div class=\\\"div-m-lyrcompare-transparent-opacity\\\">\\n            <label for=\\\"input-transparent-opacity\\\" title=\\\"{{translations.opacity_tooltip}}\\\">{{translations.opacity}}: </label>\\n            <input type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"100\\\" id=\\\"input-transparent-opacity\\\" title=\\\"{{translations.opacity_tooltip}}\\\"></input>\\n        </div>\\n        <div class=\\\"div-m-lyrcompare-transparent-static\\\">\\n            <input type=\\\"radio\\\" id=\\\"div-m-lyrcompare-transparent-dynamic\\\" name=\\\"staticDivision\\\" value=\\\"0\\\"><label for=\\\"div-m-lyrcompare-transparent-dynamic\\\" title=\\\"{{translations.dynamic_tooltip}}\\\">{{translations.dynamic}}</label>\\n            <input type=\\\"radio\\\" id=\\\"div-m-lyrcompare-transparent-static\\\" name=\\\"staticDivision\\\" value=\\\"1\\\"><label for=\\\"div-m-lyrcompare-transparent-static\\\" title=\\\"{{translations.static_tooltip}}\\\">{{translations.static}}</label>\\n            <input type=\\\"radio\\\" id=\\\"div-m-lyrcompare-transparent-mixed\\\" name=\\\"staticDivision\\\" value=\\\"2\\\"><label for=\\\"div-m-lyrcompare-transparent-mixed\\\" title=\\\"{{translations.mixed_tooltip}}\\\">{{translations.mixed}}</label>\\n        </div>\\n\\n        {{#if options}}\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrA-cont\\\">\\n                <hr/>\\n                <label id=\\\"m-lyrcompare-lyrA-lbl\\\" for=\\\"m-lyrcompare-lyrA\\\" title=\\\"{{translations.lyrLeftSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrA\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\"></div>\\n            </div>\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrB-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrB-lbl\\\" for=\\\"m-lyrcompare-lyrB\\\" title=\\\"{{translations.lyrRightSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrB\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\">\\n                </div>\\n            </div>\\n            <!--Multi Curtain-->\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrC-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrC-lbl\\\" for=\\\"m-lyrcompare-lyrC\\\" title=\\\"{{translations.lyrLeftSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrC\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\"></div>\\n            </div>\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrD-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrD-lbl\\\" for=\\\"m-lyrcompare-lyrD\\\" title=\\\"{{translations.lyrRightSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrD\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\">\\n                </div>\\n            </div>\\n        {{/if}}\\n    </div>\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-transparency-container\\\">\\n    <div class=\\\"div-m-transparency-panel\\\">\\n        <button id=\\\"m-transparency-active\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.activate_spyeye}}\\\"><i class=\\\"cp-transparency-icon\\\"></i></button>\\n        <button id=\\\"m-transparency-deactivate\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.deactivate_spyeye}}\\\" disabled><i class=\\\"cp-deactivateCurtain\\\"></i></button>\\n        <button id=\\\"m-transparency-lock\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.freeze}}\\\"><i class=\\\"cp-lock-icon\\\"></i></button>\\n        <button id=\\\"m-transparency-unlock\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.unfreeze}}\\\" style=\\\"margin-left:-36px;\\\"><i class=\\\"cp-unlock-icon\\\"></i></button>\\n\\n        <div class=\\\"div-m-transparency-transparent-radius\\\">\\n            <p>{{translations.radius}}:</p>\\n            <input type=\\\"range\\\" min=\\\"30\\\" max=\\\"200\\\" value=\\\"100\\\" id=\\\"input-transparent-radius\\\"></input>\\n        </div>\\n        {{#if options}}\\n            <div class=\\\"m-transparency-select\\\">\\n                <p>{{translations.layers}}: </p>\\n                <select id=\\\"m-transparency-lyr\\\" disabled>\\n                    {{#each options}}\\n                        <option value=\\\"{{name}}\\\">{{legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-transparency-select_arrow\\\">\\n                </div>\\n            </div>\\n        {{/if}}\\n    </div>\\n</div>\\n\";","/**\n * @module M/impl/control/ComparepanelControl\n */\n\nexport default class ComparepanelControl extends M.impl.Control {\n   \n  \n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n\n\n}\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\n export const getTranslation = (lang) => {\n  if (lang === 'es' || lang === 'en') {\n    return translations[lang];\n  }\n  return M.language.getTranslation(lang).comparepanel;\n};\n\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\n * @module M/impl/control/CompareMirrorpanel\n */\nexport default class CompareMirrorpanel extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // obtengo la interaccin por defecto del dblclick para manejarla\n    const olMap = map.getMapImpl();\n    olMap.getInteractions().forEach((interaction) => {\n      if (interaction instanceof ol.interaction.DoubleClickZoom) {\n        this.dblClickInteraction_ = interaction;\n      }\n    });\n\n    super.addTo(map, html);\n  }\n}\n","/**\n * @module M/impl/control/LyrdropdownControl\n */\n\n// import LayerdropInteraction from 'impl/LayerdropInteraction';\n\nexport default class LyrdropdownControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n\n\n  addTo(map, html) {\n    // obtengo la interaccin por defecto del dblclick para manejarla\n    /*const olMap = map.getMapImpl();\n    olMap.getInteractions().forEach((interaction) => {\n      if (interaction instanceof ol.interaction.DoubleClickZoom) {\n        this.dblClickInteraction_ = interaction;\n      }\n    });*/\n\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    // super addTo - don't delete\n    super.addTo(map, html);\n  }\n\n\n  /**\n   * Effects on the layer\n   *\n   * @public\n   * @function\n   * @param { M.Layer } layer layer to which to assign an effect\n   * @api stable\n   */\n  setLayer(lyrA) {\n    lyrA.setVisible(true);\n    //lyrA.setZIndex(4500);\n\n    //this.olMap.addLayer(lyrA); //e2m: Important control number interactions this.olMap.interactions.array_\n    //const olMap = map.getMapImpl();\n\n    //e2m:Recorrer las interacciones cargadas\n    /*this.olMap.getInteractions().forEach((interaction) => {\n      console.log(interaction);\n    });\n    console.log('Nmero de interacciones:' + this.olMap.interactions.array_.length);*/\n\n    /*\n    this.layerdropInteraction_ = new LayerdropInteraction({\n      lyrA,\n    });\n\n    this.olMap.addInteraction(this.layerdropInteraction_);\n    */\n  }\n\n  /**\n   * Set layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer layer to assign effect\n   * @api stable\n   */\n  addLayer(layer) {\n    //this.layerdropInteraction_.addLayer(layer.getImpl().getOL3Layer());\n  }\n\n/**\n   * Remove effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    // this.olMap.removeInteraction(this.layerdropInteraction_);\n  }\n\n\n  /**\n   * Remove layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer to remove\n   * @api stable\n   */\n  removeLayer(layer) {\n    // this.layerdropInteraction_.removeLayer(layer.getImpl().getOL3Layer());\n  }\n\n\n}\n","/**\n * @module M/control/LyrdropdownControl\n */\n\nimport LyrdropdownImplControl from 'impl/lyrdropdowncontrol';\nimport template from 'templates/lyrdropdown';\nimport { getValue } from './i18n/language'; //e2m: Multilanguage support. Alias -> getValue is too generic\n\nexport default class LyrdropdownControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(LyrdropdownImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new LyrdropdownImplControl();\n    super(impl, 'Lyrdropdown');\n\n    //Getting Plugin Parameters\n\n    /**\n     * Position plugin\n     * @public\n     * @type {String}\n     */\n    this.pluginOnLeft = values.pluginOnLeft;\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.layers = values.layers;\n\n    /**\n     * Collapsible\n     * @public\n     * @public {boolean}\n     */\n    this.collapsible = values.collapsible;\n\n    /**\n     * Collapsed\n     * @public\n     * @public {boolean}\n     */\n    this.collapsed = values.collapsed;\n\n    /**\n     * layerSelected\n     * @public\n     * @type { M.layer }\n     */\n    this.layerSelected = null;\n\n    /**\n     * Nivel mnimo en el que empiezan a cargarse las capas\n     * @public\n     * @type { integer }\n     */\n     this.lyrsMirrorMinZindex = values.lyrsMirrorMinZindex;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    this.map = map;\n\n    // Se hace esto para poder aadir ol3Layers a la instancia\n    // this.layers. Ol3Layers tiene valor cuando se aade al mapa\n    this.map.on(M.evt.ADDED_LAYER, (evt) => {\n      evt.forEach((l) => {\n       if (l.type === 'WMS' || l.type === 'WMTS') {\n        this.layers = this.layers.map((layers) => {\n          return (layers.name !== l.name) ? layers : l;\n        })\n      }\n      })\n    });\n\n    return new Promise((success, fail) => {\n      this.layers = this.transformToLayers(this.layers);\n      this.layers.forEach((l) => {\n       if (this.map.getLayers().some((layer) => layer.name === l.name)) this.map.removeLayers(l);\n      })\n      let capas = this.layers.map((layer) => {\n        return layer instanceof Object ? {  name: layer.name, legend: layer.legend } : { name: layer, legend: layer };\n      });\n      let options = '';\n      if (capas.length > 1) {\n        options = {\n          jsonp: true,\n          vars: {\n            options: capas,\n            translations: {\n              tooltip: getValue('tooltip'),\n              nolayertext: getValue('nolayertext'),\n            } ,\n          },\n        };\n      }\n\n      this.template = M.template.compileSync(template, options);\n      //Si no hay capas a las que aplicar la transparencia, el plugin no funciona e informa\n      if (this.layers.length === 0) {\n        M.dialog.error(getValue('no_layers_plugin'));\n      } else {\n        //M.dialog.info(getValue('title'));\n        this.activate();\n      }\n\n      //Events on template component\n      this.template.querySelector('#m-lyrdropdown-selector').addEventListener('change', (evt) => {\n        const layerSel = this.layers.filter((layer) => {\n          if(layer.name === evt.target.value) {\n            this.map.addLayers(layer);\n            return layer;\n          }\n        });\n        // Get selected layer from layer array\n        this.layerSelected.setVisible(false);\n        this.removeEffects();\n        if (layerSel.length === 0){\n          /**\n           * Se ha seleccionado la opcin de eliminar capa\n           */\n          //this.getImpl().removeLayer(layer.getImpl().getOL3Layer());\n          return; // No layer option is selected\n        }\n\n        this.layerSelected = layerSel[0];\n        this.layerSelected.setZIndex(this.lyrsMirrorMinZindex);\n        this.getImpl().setLayer(this.layerSelected);\n      });\n\n      // Aadir cdigo dependiente del DOM\n      success(this.template);\n    });\n  }\n\n  /**\n   * This function is called on the control activation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activate() {\n   if (this.layerSelected === null) this.layerSelected = this.layers[0];\n   let names = this.layers.map((layer) => {\n     return layer instanceof Object ? { name: layer.name } : { name: layer };\n   });\n\n   if (names.length >= 1) {\n     this.template.querySelector('#m-lyrdropdown-selector').disabled = false;\n   }\n  }\n\n  /**\n   * This function is called on the control deactivation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivate() {\n\n    if (this.layerSelected === null) this.layerSelected = this.layers[0];\n    let names = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name } : { name: layer };\n    });\n\n    try {\n      this.removeEffects();\n      this.layerSelected.setVisible(false);\n      if (names.length >= 1) {\n        this.template.querySelector('#m-lyrdropdown-selector').disabled = true;\n      }\n    } catch (error) {\n          /* eslint-disable */\n          console.log(error);\n          /* eslint-enable */\n    }\n\n  }\n\n  /**\n   * This function gets activation button\n   *\n   * @public\n   * @function\n   * @param {HTML} html of control\n   * @api stable\n   */\n  getActivationButton(html) {\n    return html.querySelector('.m-lyrdropdown button');\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    this.getImpl().removeEffects();\n  }\n\n  /**\n   * Transform StringLayers to Mapea M.Layer\n   *\n   * WMTS*http://www.ign.es/wmts/pnoa-ma?*OI.OrthoimageCoverage*EPSG:25830*PNOA\n   * WMS*IGN*http://www.ign.es/wms-inspire/ign-base*IGNBaseTodo\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n /**\n   * Transform StringLayers to Mapea M.Layer\n   * Entra tantas veces como mapas lienzo activos haya.\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n  transformToLayers(layers) {\n\n    const transform = layers.map((layer) => {\n      let newLayer = null;\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          if (urlLayer[0].toUpperCase() === 'WMS') {\n            newLayer = new M.layer.WMS({\n              url: urlLayer[2],\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              useCapabilities: urlLayer[4] === 'true' || false\n            });\n\n            if (this.map.getLayers().filter(l => newLayer.name.includes(l.name)).length > 0) {\n              newLayer = this.map.getLayers().filter(l => newLayer.name.includes(l.name))[0];\n              newLayer.legend = urlLayer[1] || newLayer.name;\n            } else {\n              // this.map.addLayers(newLayer);\n            }\n          } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n\n            /*newLayer = new M.layer.WMTS({\n              url: urlLayer[2] + '?',\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              matrixSet: urlLayer[4],\n              transparent: true,              // Es una capa Overlay -> zIndex > 0\n              displayInLayerSwitcher: false,  // No aparece en el TOC\n              queryable: false,               // No GetFeatureInfo\n              visibility: false,              // Visible a false por defecto\n              format: urlLayer[5],\n            }), this.map.addWMTS(newLayer);*/\n\n            newLayer = new M.layer.WMTS({\n              url: urlLayer[2],\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              matrixSet: urlLayer[4],\n              transparent: true,              // Es una capa Overlay -> zIndex > 0\n              displayInLayerSwitcher: false,  // No aparece en el TOC\n              queryable: false,               // No GetFeatureInfo\n              visibility: false,              // Visible a false por defecto\n              format: urlLayer[5],\n              useCapabilities: urlLayer[6] === 'true' || false\n            });\n            // this.map.addWMTS(newLayer);\n            //this.map.addLayers(newLayer);\n          }\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n          newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n        newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n      }\n\n      if (newLayer !== null) {\n        if (newLayer.getImpl().getOL3Layer() === null) {\n          setTimeout(() => {\n            if (newLayer.type === 'WMS' || newLayer.type === 'WMTS') {\n              newLayer.load = true;\n            } else if (newLayer.type === 'WMTS') {\n              newLayer.facadeLayer_.load = true;\n            }\n          }, 1000);\n        } else {\n          newLayer.load = true;\n        }\n\n        newLayer.displayInLayerSwitcher = false;\n        newLayer.setVisible(false);\n        newLayer.setZIndex(this.lyrsMirrorMinZindex);/* Establezco un zIndex a partir del cual se cargan las capas*/\n        return newLayer;\n      } else {\n        this.layers.remove(layer);\n      }\n    }, this);\n\n    return (transform[0] === undefined) ? [] : transform;\n  }\n\n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return {Boolean}\n   */\n  isValidLayer(layer) {\n    return layer.type === 'WMTS' || layer.type === 'WMS';\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   */\n  equals(control) {\n    return control instanceof LyrdropdownControl;\n  }\n}\n","/**\n * @module M/plugin/Lyrdropdown\n */\n\nimport 'assets/css/lyrdropdown';\nimport LyrdropdownControl from './lyrdropdowncontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';   //e2m: Multilanguage support\n\nexport default class Lyrdropdown extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'lyrdropdown';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-lyrdropdown';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * Posible values: TR | TL | BL | BR\n     * @type {String}\n     */\n    const positions = ['TR', 'TL', 'BL', 'BR'];\n    this.position = positions.includes(options.position) ? options.position : 'TR';\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = options.collapsed;\n    if (this.collapsed === undefined) this.collapsed = true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible;\n    if (this.collapsible === undefined) this.collapsible = true;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    this.layers = [];\n    if (options.layers === undefined) {\n      M.dialog.error('No se ha especificado una capa vlida sobre la que aplicar el efecto');\n    } else {\n      if (Array.isArray(options.layers)) {\n        this.layers = options.layers;\n      } else {\n        this.layers = options.layers.split(',');\n      }\n    }\n\n    /**\n     * Nivel mnimo en el que empiezan a cargarse las capas\n     * Value: number in range 10 - 1000\n     * @type {number}\n     * @public\n     */    \n    this.lyrsMirrorMinZindex = options.lyrsMirrorMinZindex;\n    if (this.lyrsMirrorMinZindex === undefined) this.lyrsMirrorMinZindex = 100;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    const pluginOnLeft = !!(['TL', 'BL'].includes(this.position));\n    this.control_ = new LyrdropdownControl({\n      pluginOnLeft,\n      collapsible:  this.collapsible,\n      collapsed:  this.collapsed,\n      layers: this.layers,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n    });\n\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    // panel para agregar control - no obligatorio\n    this.panel_ = new M.ui.Panel('panelLyrdropdown', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position], //M.ui.position.TR\n      collapsedButtonClass: 'g-cartografia-flecha-izquierda',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.collapsible,this.collapsed,this.layers] = [null, null, null, null, null, null];\n  }\n\n\n  setDisabledLyrs(lyrList){\n    \n    if (this.control_ === undefined){\n      return;\n    }\n    if (this.control_.template === null){\n      return;\n    }\n    try {\n      let optionLyrs = null;\n      optionLyrs = this.control_.template.querySelector('#m-lyrdropdown-selector');\n      optionLyrs.options[2].disabled=true;\n      for (let  iOpt =1; iOpt < optionLyrs.options.length; iOpt++) {\n        optionLyrs.options[iOpt].disabled = !lyrList.includes(optionLyrs.options[iOpt].value)\n      }\n    } catch (error) {\n          /* eslint-disable */\n          console.log(error);\n          /* eslint-enable */\n    }\n  \n   \n   }\n\n\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  getMetadata(){\n    return this.metadata_;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.position}*${this.collapsible}*${this.collapsed}*${this.layers.join(',')}`;\n  }\n\n    /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This\n   function compare\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Lyrdropdown;\n  }\n\n}\n","/**\n * @module M/control/CompareMirrorpanel\n */\nimport MirrorpanelImplControl from 'impl/cpmirrorpanel';\nimport template from 'templates/cpmirrorpanel';\nimport { getValue } from './i18n/language';\nimport Lyrdropdown from './lyrdropdown';  //e2m: reference LayerDropDown control\n\nconst objWMTSsiose = new M.layer.WMTS({\n  url: \"https://servicios.idee.es/wmts/ocupacion-suelo\",\n  name: \"LC.LandCoverSurfaces\",\n  matrixSet: \"GoogleMapsCompatible\",\n  legend: \"CORINE / SIOSE\",\n  transparent: false,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: true,\n  format: 'image/png',\n});\n\nconst objWMTSMTN501Edi = new M.layer.WMTS({\n  url: 'https://www.ign.es/wmts/primera-edicion-mtn?',\n  name: 'mtn50-edicion1',\n  legend: 'MTN50 1Edi',\n  matrixSet: 'GoogleMapsCompatible',\n  transparent: false,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: true,\n  format: 'image/jpeg',\n});\n\nconst objWMTSMapa = new M.layer.WMTS({\n  url: 'https://www.ign.es/wmts/mapa-raster',\n  name: 'MTN',\n  matrixSet: 'GoogleMapsCompatible',\n  legend: 'Mapa MTN',\n  transparent: false,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: true,\n  format: 'image/jpeg',\n});\n\nconst objWMTSLidar = new M.layer.WMTS({\n  url: 'https://wmts-mapa-lidar.idee.es/lidar',\n  name: 'EL.GridCoverageDSM',\n  matrixSet: 'GoogleMapsCompatible',\n  legend: 'Modelo Digital de Superficies LiDAR',\n  transparent: true,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: false,\n  format: 'image/png',\n});\n\nconst objTMSIGNBase = new M.layer.XYZ({\n  url: 'https://tms-ign-base.idee.es/1.0.0/IGNBaseTodo/{z}/{x}/{-y}.jpeg',\n  projection: 'EPSG:3857',\n  transparent: false,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: true,\n  maxZoom: 19,\n});\n\nconst objTMSPNOA = new M.layer.XYZ({\n  url: 'https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg',\n  projection: 'EPSG:3857',\n  transparent: false,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: true,\n  maxZoom: 19,\n});\n\nconst objTMSIGNBaseSoloTextos = new M.layer.XYZ({\n  url: 'https://tms-ign-base.idee.es/1.0.0/IGNBaseOrto/{z}/{x}/{-y}.png',\n  projection: 'EPSG:3857',\n  transparent: false,\n  displayInLayerSwitcher: false,\n  queryable: false,\n  visible: true,\n  maxZoom: 19,\n});\n\nconst BASE_LAYERS_CONFIG = {\n  position: 'TR',\n  collapsible: true,\n  collapsed: true,\n  layerId: 0,\n  layerVisibility: true,\n  columnsNumber: 4,\n  layerOpts: [\n    {\n      id: 'MAPAMTN',\n      preview: 'https://i.ibb.co/cL76yjr/raster.png',\n      title: 'Mapa MTN',\n      layers: [objWMTSMapa],\n    },\n    {\n      id: 'mapa',\n      preview: 'https://i.ibb.co/DfPrChV/mapa.png',\n      title: 'Callejero',\n      layers: [objTMSIGNBase],\n    },\n    {\n      id: 'imagen',\n      preview: 'https://i.ibb.co/SKn17Yn/image.png',\n      title: 'Imagen',\n      layers: [objTMSPNOA],\n    },\n    {\n      id: 'hibrido',\n      title: 'Hbrido',\n      preview: 'https://i.ibb.co/N6jfqwz/hibrido.png',\n      layers: [objTMSPNOA,objTMSIGNBaseSoloTextos],\n    },\n    {\n      id: 'lidar',\n      preview: 'https://componentes.ign.es/api-core/plugins/backimglayer/images/svqlidar.png',\n      title: 'LiDAR',\n      layers: [objWMTSLidar],\n    },\n    {\n      id: 'lidar-hibrido',\n      title: 'LiDAR hbrido',\n      preview: 'https://i.ibb.co/TYZcmkz/lidar.png',\n      layers: [objWMTSLidar,objTMSIGNBaseSoloTextos],\n    },\n    {\n      id: 'SIOSE',\n      preview: 'https://i.ibb.co/g34dLwz/siose.jpg',\n      title: 'SIOSE',\n      layers: [objWMTSsiose],\n    },\n    {\n      id: 'MTN501Edi',\n      preview: 'https://i.ibb.co/gPNp5g7/mtn501-Edi.jpg',\n      title: 'MTN50 1Edi',\n      layers: [objWMTSMTN501Edi],\n    },\n  ]\n};\nexport default class CompareMirrorpanel extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(MirrorpanelImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new MirrorpanelImplControl();\n    super(impl, 'Mirrorpanel');\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n\n    /**\n     * Visual mode\n     * @private\n     * @type {Number}\n     */\n    this.modeViz = values.modeViz;\n\n    /**\n     * Mirror maps with plugins\n     * @private\n     * @type {boolean}\n     */\n    this.showCursors = values.showCursors;\n\n    /**\n     * Defining mirror maps variables\n     */\n    this.mapL = { A: null, B: null, C: null, D: null }\n    this.lyrCursor = { A: null, B: null, C: null, D: null }\n    this.featureLyrCursor = { A: null, B: null, C: null, D: null }\n    this.oldClass = '';\n    this.reverseLayout = values.reverseLayout;\n    this.enabledPlugins = values.enabledPlugins;\n    this.backImgLayersConfig = values.backImgLayersConfig;\n    this.target = values.target;\n\n    /**\n     * Defining cursor style\n     */\n    this.styleCursor = new M.style.Point({\n      icon: {\n        form: M.style.form.CIRCLE,\n        fontsize: 0.5,\n        radius: 5,\n        rotation: 0,\n        rotate: false,\n        offset: [0, 0],\n        color: 'black',\n        fill: 'red',\n        gradientcolor: '#088A85',\n        opacity: 0.8,\n      },\n    });\n\n    /**\n     * Default layers for mirror maps\n     * @public\n     * @public {Array}\n     */\n    this.defaultBaseLyrs = values.defaultBaseLyrs;\n\n    /**\n     * Nivel mnimo en el que empiezan a cargarse las capas\n     * @public\n     * @type { integer }\n     */\n     this.lyrsMirrorMinZindex = values.lyrsMirrorMinZindex\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.mirrorLayers = values.mirrorLayers;\n\n    /**\n     * Define the control for managing layers\n     *\n     */\n\n    this.lyDropControlA = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false, // El botn para desplegar/replegar el plugin no aparece (false) o s aparece(true)\n      collapsed: true,    // El panel del plugin se muestra desplegado (false) o replegado (true)\n      layers: this.defaultBaseLyrs,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n    });\n\n\n    this.lyDropControlB = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false,\n      collapsed: true,\n      layers: this.defaultBaseLyrs,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n    });\n\n\n    this.lyDropControlC = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false,\n      collapsed: true,\n      layers: this.defaultBaseLyrs,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n    });\n\n    this.lyDropControlD = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false,\n      collapsed: true,\n      layers: this.defaultBaseLyrs,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n    });\n\n    this.createMapContainers();\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    if (!M.template.compileSync) {\n      M.template.compileSync = (string, options) => {\n        let templateCompiled;\n        let templateVars = {};\n        let parseToHtml;\n        if (!M.utils.isUndefined(options)) {\n          templateVars = M.utils.extends(templateVars, options.vars);\n          parseToHtml = options.parseToHtml;\n        }\n\n        const templateFn = Handlebars.compile(string);\n        const htmlText = templateFn(templateVars);\n        if (parseToHtml !== false) {\n          templateCompiled = M.utils.stringToHtml(htmlText);\n        } else {\n          templateCompiled = htmlText;\n        }\n\n        return templateCompiled;\n      };\n    }\n\n    this.mapL['A'] = map;\n    if (this.mirrorLayers.length > 0) {\n      this.mapL['A'].addLayers(this.mirrorLayers);\n      this.mapL['A'].getLayers().forEach((l) => {\n        if (l.zindex_ !== 0) { l.setVisible(false); }\n      });\n\n      this.mapL['A'].addLayers(this.defaultBaseLyrs[0]);\n    }\n\n    if (this.showCursors) {\n      this.addLayerCursor('A');\n    }\n\n    return new Promise((success, fail) => {\n      let templateOptions = '';\n      templateOptions = {\n        jsonp: true,\n        vars: {\n          translations: {\n            titleMirrorpanel: getValue('titleMirrorpanel'),\n            modViz0: getValue('modViz0'),\n            modViz1: getValue('modViz1'),\n            modViz2: getValue('modViz2'),\n            modViz3: getValue('modViz3'),\n            modViz4: getValue('modViz4'),\n            modViz5: getValue('modViz5'),\n            modViz6: getValue('modViz6'),\n            modViz7: getValue('modViz7'),\n            modViz8: getValue('modViz8'),\n            modViz9: getValue('modViz9'),\n          },\n        },\n      };\n\n      this.template = M.template.compileSync(template, templateOptions);\n\n      // Button's click events\n      this.template.querySelectorAll('button[id^=\"set-mirror-\"]').forEach((button, modeViz) => {\n        button.addEventListener('click', evt => {\n          this.manageVisionPanelByCSSGrid(modeViz);\n        })\n      });\n\n      success(this.template);\n      // Apply default vision\n      this.manageVisionPanelByCSSGrid(this.modeViz);\n    });\n  }\n\n  /**\n   * This function is called on the control activation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activate() {\n    super.activate();\n  }\n\n  /**\n   * This function is called on the control deactivation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivate() {\n    this.manageVisionPanelByCSSGrid(0);\n  }\n\n  /**\n   * Initial configurations for applying CSS grid.\n   *\n   */\n  createMapContainers() {\n    const bigContainer = document.createElement('div');\n    bigContainer.id = 'lienzo';\n    bigContainer.classList.add('mirrorpanel-grid');\n    const mapjsA = document.getElementById(this.target);\n    this.oldClass = mapjsA.classList.toString();\n    mapjsA.parentElement.insertBefore(bigContainer, mapjsA);\n    mapjsA.classList.add('mirror1');\n    bigContainer.appendChild(mapjsA);\n\n    const mapjsB = document.createElement('div');\n    mapjsB.id = 'mapjsB';\n    mapjsB.classList.add('mirror2');\n    bigContainer.appendChild(mapjsB);\n\n    const mapjsC = document.createElement('div');\n    mapjsC.id = 'mapjsC';\n    mapjsC.classList.add('mirror3');\n    bigContainer.appendChild(mapjsC);\n\n    const mapjsD = document.createElement('div');\n    mapjsD.id = 'mapjsD';\n    mapjsD.classList.add('mirror4');\n    bigContainer.appendChild(mapjsD);\n  }\n\n  changeViewPluginsGrid(change){\n      M.config.MOBILE_WIDTH =  (change) ? '2000' : '768';\n      let pluginsControls = [];\n      Object.entries(this.mapL).forEach(([_, e]) => {\n        pluginsControls = (e) ? [...pluginsControls, ...e.getControls(), ...e.getPlugins()]\n        : pluginsControls;\n      })\n      pluginsControls.forEach(e => (e.changeStyleResponsive) ? e.changeStyleResponsive(change) : null);\n  }\n\n\n  /**\n   * This function shows/hides panel for differents viz options.\n   * The mirror maps are launched from here\n   *\n   */\n  manageVisionPanelByCSSGrid(modeViz) {\n    let oldModeViz = this.modeViz;\n    let map0 = document.getElementById(this.target);\n    map0.style.display = 'none';\n    document.getElementById('mapjsB').style.display = 'none';\n    document.getElementById('mapjsC').style.display = 'none';\n    document.getElementById('mapjsD').style.display = 'none';\n    document.getElementById('lienzo').classList.remove('reverseMirror');\n    this.template.querySelector('#set-mirror-' + oldModeViz).classList.remove('buttom-pressed');\n    for (let i = 0; i < 10; i++) {\n      document.getElementById('lienzo').classList.remove('modeViz' + i);\n    }\n\n    document.getElementById('lienzo').classList.add('modeViz' + modeViz);\n    if (this.reverseLayout) document.getElementById('lienzo').classList.add('reverseMirror');\n    //Create map objects by modeviz\n    if ([1, 2].includes(modeViz)) {\n      if (this.mapL['B'] === null) {\n        this.createMapObjects('B');//Create MapB\n      }\n    }\n\n    if ([3, 7, 8, 9].includes(modeViz)) {\n      if (this.mapL['B'] === null) {\n        this.createMapObjects('B');//Create MapB\n      }\n\n      if (this.mapL['C'] === null) {\n        this.createMapObjects('C');//Create MapC\n      }\n    }\n\n    if ([4, 5, 6].includes(modeViz)) {\n      if (this.mapL['B'] === null) {\n        this.createMapObjects('B');//Create MapB\n      }\n\n      if (this.mapL['C'] === null) {\n        this.createMapObjects('C');//Create MapC\n      }\n\n      if (this.mapL['D'] === null) {\n        this.createMapObjects('D');//Create MapD\n      }\n    }\n\n    if (modeViz === 0) {\n      const toDelete = this.map_.getPlugins().filter((p) => {\n        return p.name === 'lyrdropdown';\n      });\n\n      if (toDelete.length > 0) {\n        this.lyDropControlA.deactivate(); /** Se quedaba enganchada la ltima capa. Ahora parece que va al introducir esta lnea */\n        this.map_.removePlugins(toDelete);\n      }\n\n\n    } else {\n      //Aado aqu el DropDownLayer del mapa principal\n      this.lyDropControlA = new Lyrdropdown({\n        position: 'TL',\n        collapsible: false,\n        collapsed: true,\n        layers: this.defaultBaseLyrs,\n        lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n      });\n\n      this.mapL['A'].addPlugin(this.lyDropControlA);\n    }\n\n    this.modeViz = modeViz;\n    this.template.querySelector('#set-mirror-' + modeViz).classList.add('buttom-pressed');\n    this.map_.refresh();\n    if (this.mapL['B'] !== null) { this.mapL['B'].refresh(); }\n    if (this.mapL['C'] !== null) { this.mapL['C'].refresh(); }\n    if (this.mapL['D'] !== null) { this.mapL['D'].refresh(); }\n\n    // e2m: esta manera de cerrar el panel provocaba que se lanzara el evento deactivateAndActivateMirrorPanel\n    //document.querySelector('#m-cp-mirrorpanel > button').click();\n    // e2m: de esta manera se oculta el panel y no se lanza el evento, pero es un poco raro\n    document.querySelector('#m-cp-mirrorpanel-btn').classList.remove('active');\n    document.querySelector('.m-panel-controls .cp-mirrorpanel').classList.remove('hide-panel');\n\n    setTimeout(() => {\n      this.changeViewPluginsGrid([3,4,7].includes(modeViz));\n    }, 500);\n  }\n\n  /**\n   * Create mirror map object synchro with the main map\n   */\n  createMapObjects(mapLyr) {\n    let pluginFullTOC4map = null;\n    let pluginBackImgLayer4map = null;\n    let pluginVector = null;\n\n    this.mapL[mapLyr] = M.map({\n      container: 'mapjs' + mapLyr,\n      center: this.map_.getCenter(),\n      projection: this.map_.getProjection().code + '*' + this.map_.getProjection().units,\n      zoom: this.map_.getZoom(),\n    });\n\n    this.mapL[mapLyr].getMapImpl().setView(this.map_.getMapImpl().getView());\n\n    if (this.enabledPlugins) {\n      const listaCtrls = this.map_.getControls();\n      const listaPlugs = this.map_.getPlugins();\n\n      listaCtrls.forEach((itemCtrl) => {\n        if (itemCtrl.name === 'backgroundlayers'){\n          this.mapL[mapLyr].addControls(['backgroundlayers']);\n        }\n\n      });\n\n      listaPlugs.forEach((itemPlug) => {\n        if (itemPlug.metadata_) {\n          //FullTOC\n          if (itemPlug.metadata_.name === \"FullTOC\") {\n            pluginFullTOC4map = new M.plugin.FullTOC({\n              position: itemPlug.position,\n              collapsed: itemPlug.collapsed,\n              collapsible: itemPlug.collapsible,\n              http: itemPlug.http,\n              https: itemPlug.https,\n              precharged: itemPlug.precharged\n            });\n          }\n          //Vector\n          if (itemPlug.metadata_.name === \"Vectors\") {\n            pluginVector = new M.plugin.Vectors({\n              position: itemPlug.position,\n              collapsed: itemPlug.collapsed,\n              collapsible: itemPlug.collapsible,\n            });\n          }\n          if (itemPlug.metadata_.name === \"backimglayer\") {\n\n            /**\n             * Nota de Jess: OJO!!\n             * El problema del backimglayer vena porque se usaban los mismos objetos capa en ambos mapas y eso provocaba los errores.\n             * Se ha sacado una versin especfica para el comparador_pnoa con esa definicin de capas fija.\n             * Las siguientes lneas se han comentado para subir al plugin.\n             *\n             * ToDO:\n             * Lo ideal sera que se le pasara por parmetro como antiguamente, pero como era una cosa urgente he optado por eso por ahora.\n             * En el iberpixcompare como todava se usaba la configuracin antigua en la que se le metan las capas por parmetro no daba ese error.\n             * Para un futuro lo ideal sera eso, meterlas por parmetro. No le borres nada por si hay que volver a compilar versin con algn cambio.\n             *\n             *\n             */\n            // Para el Comparador PNOA descomentar las dos siguientes lneas y comentar la tercera y comentar la definicin posterior\n            //BASE_LAYERS_CONFIG.layerId = mapLyr === 'A' ? 0 : mapLyr === 'B' ? 1 : mapLyr == 'C' ? 2 : 3,\n            //pluginBackImgLayer4map = new M.plugin.BackImgLayer(BASE_LAYERS_CONFIG);\n\n            pluginBackImgLayer4map = new M.plugin.BackImgLayer({\n              layerId: mapLyr === 'A' ? 0 : mapLyr === 'B' ? 1 : mapLyr == 'C' ? 2 : 3,\n              layerVisibility:  itemPlug.layerVisibility,\n              columnsNumber: itemPlug.columnsNumber,\n              layerOpts: itemPlug.layerOpts\n            });\n          }\n\n        }\n      });\n    }\n\n\n    if (this.lyDropControl !== null){\n      if (mapLyr === 'B'){\n        this.mapL[mapLyr].addPlugin(this.lyDropControlB);\n      }\n\n      if (mapLyr === 'C'){\n        this.mapL[mapLyr].addPlugin(this.lyDropControlC);\n      }\n\n      if (mapLyr === 'D'){\n        this.mapL[mapLyr].addPlugin(this.lyDropControlD);\n      }\n    }\n\n    // Aadimos plugins secundarios\n    if (pluginFullTOC4map !== null) {\n      this.mapL[mapLyr].addPlugin(pluginFullTOC4map);\n    }\n\n    if (pluginVector !== null) {\n      this.mapL[mapLyr].addPlugin(pluginVector);\n    }\n\n    if (pluginBackImgLayer4map !== null) {\n      this.mapL[mapLyr].addPlugin(pluginBackImgLayer4map);\n    }\n\n\n    if (this.showCursors) { this.addLayerCursor(mapLyr); }\n    this.mapL[mapLyr].refresh();\n  }\n\n  /**\n   * Adding a layer for cursor on Map\n   */\n  addLayerCursor(mapLyr) {\n    // Cursor Layer\n    this.lyrCursor[mapLyr] = new M.layer.Vector({\n      name: 'Coordenadas centro ' + mapLyr,\n    }, { displayInLayerSwitcher: false });\n\n    this.featureLyrCursor[mapLyr] = new M.Feature('Center' + mapLyr, {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: this.mapL[mapLyr].getCenter(),\n      },\n    });\n\n    this.lyrCursor[mapLyr].addFeatures([this.featureLyrCursor[mapLyr]]);\n    this.lyrCursor[mapLyr].setStyle(this.styleCursor);\n    this.lyrCursor[mapLyr].setZIndex(5000);\n    this.mapL[mapLyr].addLayers(this.lyrCursor[mapLyr]);\n    this.mapL[mapLyr].getMapImpl().on('pointermove', (event) => {\n      this.lyrCursor[mapLyr].setVisible(false);\n      Object.keys(this.featureLyrCursor).forEach(k => {\n        if (k != mapLyr) {\n          if (this.featureLyrCursor[k] !== null) {\n            this.lyrCursor[k].setVisible(true);\n            this.featureLyrCursor[k].setGeometry({\n              type: 'Point',\n              coordinates: event.coordinate,\n            });\n          }\n        }\n      });\n    });\n  }\n\n\n\n  manageLyrAvailable(lyrList){\n\n    if (this.lyDropControlA.control_!== null){\n      this.lyDropControlA.setDisabledLyrs(lyrList);\n    }\n    if (this.lyDropControlB.control_!== null){\n      this.lyDropControlB.setDisabledLyrs(lyrList);\n    }\n    if (this.lyDropControlC.control_!== null){\n      this.lyDropControlC.setDisabledLyrs(lyrList);\n    }\n    if (this.lyDropControlD.control_!== null){\n      this.lyDropControlD.setDisabledLyrs(lyrList);\n    }\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeMaps() {\n    this.mapL['B'] = null;\n    this.mapL['C'] = null;\n    this.mapL['D'] = null;\n  }\n\n  destroyMapsContainer() {\n    this.manageVisionPanelByCSSGrid(0);\n    // Remove mirrors containers\n    document.getElementById('mapjsB').remove();\n    document.getElementById('mapjsC').remove();\n    document.getElementById('mapjsD').remove();\n    // Take the main map out of the container\n    const lienzo = document.getElementById('lienzo');\n    const mapjsA = document.querySelector('.mirror1');\n    lienzo.parentElement.insertBefore(mapjsA, lienzo);\n    mapjsA.style.display = 'block';\n    mapjsA.classList.remove('mirror1');\n    mapjsA.classList = this.oldClass;\n    // Load the main container\n    document.getElementById('lienzo').remove();\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   */\n  equals(control) {\n    return control instanceof CompareMirrorpanel;\n  }\n}\n","/**\n * @module M/plugin/Mirrorpanel\n */\n\nimport 'assets/css/cpmirrorpanel';\nimport MirrorpanelControl from './cpmirrorpanelcontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';   //e2m: Multilanguage support\n\nexport default class Mirrorpanel extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = \"mirrorpanel\";\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = \"m-plugin-mirrorpanel\";\n\n    /**\n     * Position of the Plugin\n     * @public\n     * @type {String}\n     */\n    this.position = options.position;\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = true;\n\n    /**\n     * Modo de visualizacin\n     * Value: number in range 0 - 9\n     * @type {number}\n     * @public\n     */\n    this.modeViz = options.modeViz;\n    if (this.modeViz === undefined) this.modeViz = 0;\n\n    /**\n     * Opcin de situar el mapa principal siempre a la derecha\n     * False: se sita a la izquierda. True: se sita a la derecha\n     * @type {boolean}\n     * @public\n     */\n    this.reverseLayout = options.reverseLayout;\n    if (this.reverseLayout === undefined) this.reverseLayout = false;\n\n    /**\n     * Opcin de situar el mapa principal siempre a la derecha\n     * False: se sita a la izquierda. True: se sita a la derecha\n     * @type {boolean}\n     * @public\n     */\n    this.enabledPlugins = options.enabledPlugins;\n    if (this.enabledPlugins === undefined) this.enabledPlugins = false;\n\n    /**\n     * Enabled key functions\n     * @type {boolean}\n     * @public\n     */\n    this.enabledKeyFunctions = options.enabledKeyFunctions;\n    if (this.enabledKeyFunctions === undefined) this.enabledKeyFunctions = true;\n\n    /**\n     * Enabled synchro cursors\n     * @type {boolean}\n     * @public\n     */\n    this.showCursors = options.showCursors;\n    if (this.showCursors === undefined) this.showCursors = true;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    this.mirrorLayers = [];\n    if (options.mirrorLayers !== undefined) {\n      if (Array.isArray(options.mirrorLayers)) {\n        this.mirrorLayers = options.mirrorLayers;\n      } else {\n        this.mirrorLayers = options.mirrorLayers.split(\",\");\n      }\n    }\n\n    /**\n     * Nivel mnimo en el que empiezan a cargarse las capas\n     * Value: number in range 10 - 1000\n     * @type {number}\n     * @public\n     */\n    this.lyrsMirrorMinZindex = options.lyrsMirrorMinZindex;\n    if (this.lyrsMirrorMinZindex === undefined) this.lyrsMirrorMinZindex = 100;\n\n    /**\n     * Layer base for the three mirror maps\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    this.defaultBaseLyrs = [];\n    if (options.defaultBaseLyrs !== undefined) {\n      if (Array.isArray(options.defaultBaseLyrs)) {\n        this.defaultBaseLyrs = options.defaultBaseLyrs;\n      } else {\n        this.defaultBaseLyrs = options.defaultBaseLyrs.split(\",\");\n      }\n    }\n\n    this.backImgLayersConfig = options.backImgLayersConfig;\n\n    /**\n     * Show interface\n     *@public\n     *@type{boolean}\n     */\n    this.interface = options.interface === undefined ? true : options.interface;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue(\"tooltip\");\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n\n    const pluginOnLeft = !!(['TL', 'BL'].includes(this.position));\n    const values = {\n      pluginOnLeft,\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      modeViz: this.modeViz,\n      reverseLayout: this.reverseLayout,\n      enabledPlugins: this.enabledPlugins,\n      showCursors: this.showCursors,\n      mirrorLayers: this.mirrorLayers,\n      defaultBaseLyrs: this.defaultBaseLyrs,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n      backImgLayersConfig: this.backImgLayersConfig,\n      target: map.getMapImpl().values_.target,\n    };\n\n    this.control_ = new MirrorpanelControl(values);\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelMirrorpanel', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position],\n      modeViz: this.modeViz,\n      showCursors: this.showCursors,\n      className: this.interface ? 'm-plugin-panelMirrorpanel' : 'm-plugin-panelMirrorpanel hidden',\n      collapsedButtonClass: 'mirrorpanel-icon',\n      tooltip: this.tooltip_,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n\n    // Keybindings for Ctrl + Shift + (F1-F8) / ESC\n    document.addEventListener('keydown', (zEvent) => {\n      if (!this.enabledKeyFunctions) {\n        return;\n      }\n\n      for (let i = 0; i < 10; i++) {\n        if (zEvent.ctrlKey && zEvent.shiftKey && zEvent.key === 'F' + (i + 1)) {  // case sensitive\n          this.control_.manageVisionPanelByCSSGrid(i);\n        }\n      }\n\n      const keyStr = ['Control', 'Shift', 'Alt', 'Meta'].includes(zEvent.key) ? '' : zEvent.key;\n      const combinedKeys = (zEvent.ctrlKey ? 'Control ' : '') +\n        (zEvent.shiftKey ? 'Shift ' : '') +\n        (zEvent.altKey ? 'Alt ' : '') +\n        (zEvent.metaKey ? 'Meta ' : '') + keyStr;\n      if (combinedKeys === 'Escape') {\n        this.control_.manageVisionPanelByCSSGrid(0);\n      }\n    });\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    document.removeEventListener('keydown', (zEvent) => { });\n    this.control_.removeMaps();\n    this.control_.destroyMapsContainer();\n    this.map_.removeControls([this.control_]);\n    [\n      this.control_, \n      this.panel_, \n      this.map_, \n      this.collapsible, \n      this.collapsed, \n      this.modeViz, \n      this.enabledPlugins, \n      this.enabledKeyFunctions, \n      this.showCursors, \n      this.mirrorLayers, \n      this.defaultBaseLyrs, \n      this.backImgLayersParams, \n      this.interface] =  [null, null, null, null, null, null, null, null, null, null,null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n  manageLyrAvailable(lyrList){\n    this.control_.manageLyrAvailable(lyrList);\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n}\n","/**\n * @module M/impl/control/TimelineControl\n */\n\nexport default class TimelineControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n}\n","/**\n * @module M/control/TimelineControl\n */\n\nimport TimelineImplControl from 'impl/cptimelinecontrol';\nimport template from 'templates/cptimeline';\nimport { getValue } from './i18n/language';\n\nexport default class TimelineControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(options) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(TimelineImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new TimelineImplControl();\n    super(impl, 'Timeline');\n    this.running = false;\n    this.animationFrame = 0;\n    this.animation = options.animation;\n    this.speed = options.speed;\n    this.intervals = options.intervals;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n\n    this.map = map;\n    return new Promise((success, fail) => {\n      let intervals = [];\n      this.intervals.forEach((interval, k) => {\n        const layer = this.transformToLayers(interval[2]);\n        const copy = this.getMapLayer(layer);\n        if (copy !== undefined) {\n          this.map.removeLayers(copy);\n        }\n\n        // this.map.addLayers(layer);\n\n        let iv = {\n          number: k,\n          name: interval[0],\n          tag: interval[1],\n          service: layer\n        };\n        intervals.push(iv);\n      });\n\n      this.intervals = intervals;\n      this.template = M.template.compileSync(template, {\n        vars: {\n          translations: {\n            titleTimeline: getValue('titleTimeline'),\n            play: getValue('play'),\n          },\n        },\n      });\n\n      this.intervals.forEach((interval, k) => {\n        let tag = document.createElement('div');\n        if (k != 0 && k != this.intervals.length - 1 && k != parseInt(this.intervals.length / 2)) {\n          tag.dataset.tag = '';\n        } else {\n          tag.dataset.tag = interval.tag;\n        }\n\n        this.template.querySelector('.slider-tags').append(tag);\n      });\n\n      this.template.querySelector('.div-m-timeline-panel').style.setProperty('--num', this.intervals.length);\n      const slider = this.template.querySelector('#input-slider');\n      slider.setAttribute('max', intervals.length - 1);\n      slider.addEventListener('input', (e) => this.changeSlider(slider));\n      slider.addEventListener('change', (e) => {\n        document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n        document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n        clearTimeout(this.running);\n        this.running = false;\n      });\n      const play = this.template.querySelector('#m-timeline-play');\n      play.addEventListener('click', (e) => {\n        //e.target.classList.remove('cp-control-siguiente');\n        //e.target.classList.add('cp-control-pausa');\n        this.running = !this.running;\n        if (this.running){\n          this.playTimeline(this.running);\n        }\n      });\n      success(this.template);\n\n    });\n  }\n\n\n  /**\n   * Transform StringLayers to Mapea M.Layer\n   *\n   * WMTS*http://www.ign.es/wmts/pnoa-ma?*OI.OrthoimageCoverage*EPSG:25830*PNOA\n   * WMS*IGN*http://www.ign.es/wms-inspire/ign-base*IGNBaseTodo\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n  transformToLayers(layer) {\n    let newLayer = null;\n    if (!(layer instanceof Object)) {\n      if (layer.indexOf('*') >= 0) {\n        const urlLayer = layer.split('*');\n        if (urlLayer[0].toUpperCase() === 'WMS') {\n          newLayer = new M.layer.WMS({\n            url: urlLayer[2],\n            name: urlLayer[3]\n          });\n        } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n          newLayer = new M.layer.WMTS({\n            url: urlLayer[2],\n            name: urlLayer[3],\n            legend: urlLayer[1],\n            matrixSet: urlLayer[4],\n            format: urlLayer[5],\n          });\n        }\n      } else {\n        const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n        newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n      }\n    } else if (layer instanceof Object) {\n      const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n      newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n    }\n\n    if (newLayer !== null) {\n      newLayer.displayInLayerSwitcher = false;\n      newLayer.setVisible(false);\n      return newLayer\n    } else {\n      this.map.removeLayers(layer);\n    }\n  }\n\n  \n\n  /** This function change layers and show layer name when slider moves\n   *\n   * @public\n   * @function\n   * @api stable\n   * @return\n   */\n  changeSlider(elem) {\n    \n    document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n    const left = (((elem.value - elem.min) / (elem.max - elem.min)) * ((256 - 5) - 5)) + 5;\n    document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 'px');\n    if(this.animation || this.intervals[0].name !== ''){\n      document.querySelector('.m-timeline-names').style.display = 'block';\n    }\n    if (this.animation) {\n      document.querySelector('.m-timeline-button').style.display = 'block';\n    }\n\n    let step = parseFloat(elem.value);\n    this.intervals.forEach((interval) => {\n      this.getMapLayer(interval.service).setVisible(false);\n      document.querySelector('.m-timeline-names').innerHTML = '';\n    });\n    if (step % 1 === 0) {\n      document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 20 + 'px');\n      this.getMapLayer(this.intervals[step].service).setVisible(true);\n      document.querySelector('.m-timeline-names').innerHTML = this.intervals[step].name;\n      document.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this.intervals[step].tag + '\"')\n      if (this.intervals[step].tag !== '') {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '1');\n      } else {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n      }\n    } else {\n      this.getMapLayer(this.intervals[parseInt(step)].service).setVisible(true);\n      this.getMapLayer(this.intervals[parseInt(step) + 1].service).setVisible(true);\n      if (this.intervals[parseInt(step)].tag !== '' && this.intervals[parseInt(step) + 1].tag !== '') {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 'px');\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '1');\n        document.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this.intervals[parseInt(step)].tag + ' - ' + this.intervals[parseInt(step) + 1].tag + '\"');\n        document.querySelector('.m-timeline-names').innerHTML = this.intervals[parseInt(step)].name + ' y ' + this.intervals[parseInt(step) + 1].name;\n      } else if (this.intervals[parseInt(step)].tag === '' && this.intervals[parseInt(step) + 1].tag === '') {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n      } else {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 20 + 'px');\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '10');\n        document.querySelector('.m-timeline-names').innerHTML = this.intervals[parseInt(step)].name + this.intervals[parseInt(step) + 1].name;\n        document.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this.intervals[parseInt(step)].tag + this.intervals[parseInt(step) + 1].tag + '\"');\n      }\n    }\n\n  }\n\n  /** This function search a layer in the map\n   *\n   * @public\n   * @function\n   * @api stable\n   * @return\n   */\n  getMapLayer(layerSearch) {\n    return this.map.getLayers().filter(layer => layer.getImpl().legend === layerSearch.getImpl().legend)[0];\n  }\n\n  /** This function set default layer shown when plugin is activated\n   * \n   * @param {integer} indexLyr /** Index layer in intervals array\n   * @returns \n   */\n  setDefaultLayer(indexLyr) {\n\n    const this_ = this;\n    const html = this_.template;\n    const slider = html.querySelector('#input-slider');\n    const initialLyr = indexLyr<this_.intervals.length ? indexLyr:0;\n\n    slider.value = initialLyr;\n    html.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n    const left = (((slider.value - slider.min) / (slider.max - slider.min)) * ((256 - 5) - 5)) + 5;\n    html.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 'px');\n    if(this_.animation || this_.intervals[0].name !== ''){\n      html.querySelector('.m-timeline-names').style.display = 'block';\n    }\n    if (this_.animation) {\n      html.querySelector('.m-timeline-button').style.display = 'block';\n    }\n\n    let step = parseFloat(slider.value);\n    this_.intervals.forEach((interval) => {\n      this_.getMapLayer(interval.service).setVisible(false);\n      html.querySelector('.m-timeline-names').innerHTML = '';\n    });\n\n    html.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 20 + 'px');\n    this_.getMapLayer(this_.intervals[step].service).setVisible(true);\n    html.querySelector('.m-timeline-names').innerHTML = this_.intervals[step].name;\n    html.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this_.intervals[step].tag + '\"')\n    if (this_.intervals[step].tag !== '') {\n      html.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '1');\n    } else {\n      html.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n    }\n\n\n  }\n\n  /** This function make the play animation\n   *\n   * @public\n   * @function\n   * @api stable\n   * @return\n   */\n  playTimeline(next) {\n\n    const start = 0;\n    const end = this.intervals.length - 1;\n    const slider = document.querySelector('#input-slider');\n    let step = parseInt(slider.value);\n    if (this.running) {\n      document.querySelector('.m-timeline-button button').classList.remove('cp-control-siguiente');\n      document.querySelector('.m-timeline-button button').classList.add('cp-control-pausa');\n\n    }else{\n      document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n      document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n      clearTimeout(this.running);\n    }\n\n    if (!next) {\n      if (step > start && step < end && this.running) {\n        this.running = false;\n        return;\n      }\n      if (step > end) {\n        step = start;\n      }\n    }\n\n    if (step >= end) {\n      slider.value = 0;\n      this.changeSlider(slider);\n      document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n      document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n      this.running = false;\n      return;\n    }\n\n    if (step < start) {\n      step = start;\n    }\n\n    if (!this.running){\n      return;\n    }\n    slider.value = parseFloat(slider.value) + 1;\n    this.changeSlider(slider);\n    this.animationFrame = setTimeout((e) => this.playTimeline(true), this.speed * 1000);\n  }\n\n  /**\n   * This function remove the timeline layers\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeTimelineLayers() {\n    clearInterval(this.running);\n    this.intervals.forEach((interval) => {\n      this.map.removeLayers(this.getMapLayer(interval.service));\n    })\n  }\n\n  /**\n   * Activate plugin Timeline\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    clearInterval(this.running);\n    this.running = false;\n    document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n    document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    try {\n      clearInterval(this.running);\n      this.running = false;\n      this.intervals.forEach((interval) => {\n        if (interval.service.zIndex_ !== undefined){\n          this.getMapLayer(interval.service).setVisible(false);\n        }\n      });\n    } catch (error) {\n      /* eslint-disable */\n      console.error(`e2m (1): ${error}`);\n      /* eslint-enable */\n    }\n\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof TimelineControl;\n  }\n}\n","/**\n * @module M/plugin/Timeline\n */\nimport 'assets/css/cptimeline';\nimport TimelineControl from './cptimelinecontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class Timeline extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'timeline';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-timeline';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * @type {String}\n     */\n    this.position = options.position;\n\n    /**\n     * Intervals\n     * @public\n     * Value: Array with each interval attributes [name, tag, service]\n     * @type {String}\n     */\n    if (options !== undefined) {\n      if (M.utils.isString(options.intervals)) {\n        this.intervals = JSON.parse(options.intervals.replace(/!!/g, '[').replace(//g, ']'));\n      } else if (M.utils.isArray(options.intervals)) {\n        this.intervals = options.intervals;\n      } else {\n        M.dialog.error(getValue('intervals_error'));\n      }\n    }\n\n    /**\n     * Animation of the timeline\n     * @public\n     * Value: true / false\n     * @type {boolean}\n     */\n    this.animation = options.animation;\n    if (this.animation === undefined) this.animation = true;\n\n    /**\n     * Speed of animation\n     * @public\n     * Value: 1 - 100\n     * @type {number}\n     */\n    this.speed = parseFloat(options.speed) || 1;\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    this.control_ = new TimelineControl({\n      intervals: this.intervals,\n      animation: this.animation,\n      speed: this.speed,\n    });\n\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelTimeline', {\n      collapsible: true,\n      position: M.ui.position[this.position],\n      className: this.className,\n      collapsedButtonClass: 'timeline-gestion-reloj2',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n    \n  }\n\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.control_.removeTimelineLayers();\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.layers, this.radius] = [null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * This function set default layer shown when plugin is activated\n   *\n   * @function\n   * @public\n   * @api\n   */\n   setDefaultLayer(indexLyr) {\n    this.control_.setDefaultLayer(indexLyr);\n  }\n\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This\n   function compare\n   if pluging recieved by param is instance of M.plugin.Timeline\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Timeline;\n  }\n}\n","/**\n * @module M/impl/control/LyrcompareInteraction\n\n */\nexport default class LyrcompareInteraction extends ol.interaction.Pointer {\n  /**\n   * @classdesc\n   * Main constructor of the LyrcompareInteraction.\n   *\n   * @constructor\n   * @extends {ol.interaction.Pointer}\n   * @api stable\n   */\n  constructor(options) {\n    super(options);\n    this.layers_ = [];\n    this.swipeClicked = false;\n    ol.interaction.Pointer.call(this, {\n      handleDownEvent: this.setPosition,\n      handleUpEvent: () => this.swipeClicked = false,\n      handleMoveEvent: this.setPosition,\n    });\n\n    // Default options\n    const optionsE = options || {};\n\n    this.pos = false;\n    this.opacityVal = (optionsE.opacityVal || 100);\n    this.OLVersion = \"OL6\";\n\n    const layerA = [optionsE.lyrA].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n    this.addLayerA(layerA);\n\n    const layerB = [optionsE.lyrB].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n    this.addLayerB(layerB);\n\n    if (optionsE.lyrC !== undefined && optionsE.lyrD !== undefined) {\n      const layerC = [optionsE.lyrC].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n      this.addLayerC(layerC);\n\n      const layerD = [optionsE.lyrD].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n      this.addLayerD(layerD);\n    }\n\n    \n\n  }\n\n  /** Set the map > start postcompose\n   */\n  setMap(map) {\n\n    \n    if (this.getMap()) {\n      // e2m: Por aqu pasamos al desactivar el control\n      for (let i = 0; i < this.layers_.length; i += 1) {\n        if (this.OLVersion === \"OL6\"){\n          if (this.layers_[i].prerender) ol.Observable.unByKey(this.layers_[i].prerender);\n          if (this.layers_[i].postrender) ol.Observable.unByKey(this.layers_[i].postrender);\n          this.layers_[i].prerender = this.layers_[i].postrender = null;\n        }else{\n          if (this.layers_[i].precompose) ol.Observable.unByKey(this.layers_[i].precompose);\n          if (this.layers_[i].postcompose) ol.Observable.unByKey(this.layers_[i].postcompose);\n          this.layers_[i].precompose = this.layers_[i].postcompose = null;\n        }\n      }\n      this.getMap().renderSync();\n    }\n    \n    ol.interaction.Pointer.prototype.setMap.call(this, map);\n    if (map) {\n      this.createSwipeControl();\n      if (this.OLVersion === \"OL6\"){\n        if (this.layers_[0] !== undefined) {\n          this.layers_[0].prerender = this.layers_[0].on('prerender', this.precomposeA_.bind(this));\n          this.layers_[0].postrender = this.layers_[0].on('postrender', this.postcomposeA_.bind(this));\n        }\n        if (this.layers_[1] !== undefined) {\n          this.layers_[1].prerender = this.layers_[1].on('prerender', this.precomposeB_.bind(this));\n          this.layers_[1].postrender = this.layers_[1].on('postrender', this.postcomposeB_.bind(this));\n        }\n        if (this.layers_[2] !== undefined) {\n          this.layers_[2].prerender = this.layers_[2].on('prerender', this.precomposeC_.bind(this));\n          this.layers_[2].postrender = this.layers_[2].on('postrender', this.postcomposeC_.bind(this));\n        }\n        if (this.layers_[3] !== undefined) {\n          this.layers_[3].prerender = this.layers_[3].on('prerender', this.precomposeD_.bind(this));\n          this.layers_[3].postrender = this.layers_[3].on('postrender', this.postcomposeD_.bind(this));\n        }\n      }else{\n        this.layers_[0].precompose = this.layers_[0].on('precompose', this.precomposeA_.bind(this));\n        this.layers_[0].postcompose = this.layers_[0].on('postcompose', this.postcomposeA_.bind(this));\n        this.layers_[1].precompose = this.layers_[1].on('precompose', this.precomposeB_.bind(this));\n        this.layers_[1].postcompose = this.layers_[1].on('postcompose', this.postcomposeB_.bind(this));\n        if (this.layers_[2] !== undefined && this.layers_[3] !== undefined) {\n          this.layers_[2].precompose = this.layers_[2].on('precompose', this.precomposeC_.bind(this));\n          this.layers_[2].postcompose = this.layers_[2].on('postcompose', this.postcomposeC_.bind(this));\n          this.layers_[3].precompose = this.layers_[3].on('precompose', this.precomposeD_.bind(this));\n          this.layers_[3].postcompose = this.layers_[3].on('postcompose', this.postcomposeD_.bind(this));\n        }\n      }\n\n      map.renderSync();\n    }\n  }\n\n  /**\n   * Set opacity level\n   *\n   * @param {integer} opacityVal\n   */\n  setOpacity(opacityVal) {\n    this.opacityVal = opacityVal;\n    if (this.getMap()) {\n      for (let i = 0; i < this.layers_.length; i += 1) {\n        if (this.layers_[i] !== undefined) {\n          this.layers_[i].setOpacity(this.opacityVal / 100);\n        }\n      }\n    }\n  }\n\n  /**\n   * Set param staticDivision\n   *\n   * @param {integer} staticDivision\n   */\n  setStaticDivision(staticDivision) {\n    this.staticDivision = staticDivision;\n    this.updatePosition();\n  }\n\n  /**\n   * Set param comparisonMode\n   *\n   * @param {integer} comparisonMode\n   */\n  setComparisonMode(comparisonMode) {\n    this.comparisonMode = comparisonMode;\n    this.updatePosition();\n  }\n\n  /**\n   * Set Visibility on layers C & D\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  setVisibilityLayersCD() {\n    if ((this.layers_[2] !== undefined && this.layers_[3] !== undefined) && (this.comparisonMode === 1 || this.comparisonMode === 2)) {\n      this.layers_[2].setVisible(false);\n      this.layers_[3].setVisible(false);\n    } else if (this.layers_[2] !== undefined && this.layers_[3] !== undefined) {\n      this.layers_[2].setVisible(true);\n      this.layers_[3].setVisible(true);\n    }\n  }\n\n  /**\n   * Add Layer A to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerA(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeA_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeA_.bind(this));\n      this.getMap().renderSync();\n    }\n\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   * Add Layer B to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerB(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeB_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeB_.bind(this));\n      this.getMap().renderSync();\n    }\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   * Add Layer C to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerC(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeC_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeC_.bind(this));\n      this.getMap().renderSync();\n    }\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   * Add Layer D to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerD(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeD_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeD_.bind(this));\n      this.getMap().renderSync();\n    }\n\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   *  Remove a layer to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  removeLayer(layers) {\n    if (!(layers instanceof Array)) {\n      layers = [layers];\n    }\n\n    for (let i = 0; i < layers.length; i += 1) {\n      let k;\n      for (k = 0; k < this.layers_.length; k += 1) {\n        if (this.layers_[k] === layers[i]) {\n          break;\n        }\n      }\n\n      if (k !== this.layers_.length && this.getMap()) {\n        if (this.layers_[k].prerender) ol.Observable.unByKey(this.layers_[k].prerender);\n        if (this.layers_[k].postrender) ol.Observable.unByKey(this.layers_[k].postrender);\n        this.layers_.splice(k, 1);\n        this.getMap().renderSync();\n      }\n    }\n  }\n\n  /**\n   *  Set position of the clip\n   *\n   * @param {ol.Pixel|ol.MapBrowserEvent}\n   */\n  setPosition(e) {\n    if ((this.staticDivision === 2 && this.swipeClicked) || this.staticDivision !== 2) {\n      if (e.pixel) {\n        this.pos = e.pixel;\n      } else if (e && e instanceof Array) {\n        this.pos = e;\n      } else {\n        e = [-10000000, -10000000];\n      }\n\n      if (this.staticDivision === 2 && e.pointerEvent.buttons !== 1) {\n        const lienzoMapa = this.map_.getSize();\n        this.pos = [lienzoMapa[0] / 2, lienzoMapa[1] / 2];\n        this.swipeClicked = false;\n      }\n\n      if (this.getMap()) this.getMap().renderSync();\n      this.moveSwipeControl();\n    }\n  }\n\n  /**\n   *  Update position of the clip\n   *\n   */\n  updatePosition() {\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl) {\n      if (this.comparisonMode === 1) {\n        swipeControl.classList = 'lyrcompare-swipe-control vertical' + (this.staticDivision === 1 ? ' static' : ' dynamic');\n      } else if (this.comparisonMode === 2) {\n        swipeControl.classList = 'lyrcompare-swipe-control horizontal' + (this.staticDivision === 1 ? ' static' : ' dynamic');\n      } else if (this.comparisonMode === 3) {\n        swipeControl.classList = 'lyrcompare-swipe-control vertical horizontal' + (this.staticDivision === 1 ? ' static' : ' dynamic');\n      }\n    }\n\n    if (this.getMap()) {\n      const lienzoMapa = this.map_.getSize();\n      swipeControl.style.left = (lienzoMapa[0] / 2) - (swipeControl.offsetWidth / 2) + 'px';\n      swipeControl.style.top = (lienzoMapa[1] / 2) - (swipeControl.offsetHeight / 2) + 'px';\n      this.pos = [lienzoMapa[0] / 2, lienzoMapa[1] / 2];\n      this.swipeClicked = false;\n      this.getMap().renderSync();\n    }\n  }\n\n  /* @private\n     */\n  precomposeA_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const mapSize = this.map_.getSize();\n    const widthClip = this.pos[0];\n    const heightClip = this.pos[1];\n    const margenClip = 0; //Stroke size in pixels.\n    let tl;\n    let tr;\n    let br;\n    let bl;\n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 1) {\n        tl =  ol.render.getRenderPixel(e, [0, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0]/2, 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0]/2, mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]]);\n      } else if (this.comparisonMode === 2) {\n        tl =  ol.render.getRenderPixel(e, [0, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]/2]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]/2]);\n      } else if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [0, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0]/2, 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0]/2, mapSize[1]/2]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]/2]);\n      }\n    } else {\n      if (this.comparisonMode === 1) {\n        tl =  ol.render.getRenderPixel(e, [0, 0]);\n        tr =  ol.render.getRenderPixel(e, [widthClip, 0]);\n        br =  ol.render.getRenderPixel(e, [widthClip, mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]]);\n      } else if (this.comparisonMode === 2) {\n        tl =  ol.render.getRenderPixel(e, [0, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], heightClip]);\n        bl =  ol.render.getRenderPixel(e, [0, heightClip]);\n      } else if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [0, 0]);\n        tr =  ol.render.getRenderPixel(e, [widthClip, 0]);\n        br =  ol.render.getRenderPixel(e, [widthClip, heightClip]);\n        bl =  ol.render.getRenderPixel(e, [0, heightClip]);\n      }\n    }\n    if (tl!==undefined){\n      ctx.moveTo(tl[0], tl[1]);\n      ctx.lineTo(bl[0], bl[1]);\n      ctx.lineTo(br[0], br[1]);\n      ctx.lineTo(tr[0], tr[1]);\n      ctx.closePath();   \n    }\n    /**\n     *\n     * e2m: con esto podemos pintar una lnea de color para contornear la capa. Pero no queda bien\n     *\n     */\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeA_(e) {\n    e.context.restore();\n  }\n\n  /* @private\n   */\n  precomposeB_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    const mapSize = lienzoMapa;\n    const widthClip = this.pos[0];\n    const heightClip = this.pos[1];\n    const margenClip = 0; //Stroke size in pixels.\n    let tl;\n    let tr;\n    let br;\n    let bl;    \n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 1) {\n        tl =  ol.render.getRenderPixel(e, [mapSize[0]/2, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [mapSize[0]/2, mapSize[1]]);    \n      } else if (this.comparisonMode === 2) {\n        tl =  ol.render.getRenderPixel(e, [0,mapSize[1]/2]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]/2]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]]);        \n      } else if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [mapSize[0]/2, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]/2]);\n        bl =  ol.render.getRenderPixel(e, [mapSize[0]/2, mapSize[1]/2]);\n      }\n    } else {\n      if (this.comparisonMode === 1) {\n        //ctx.rect(this.pos[0], 0, lienzoMapa[0] - this.pos[0], lienzoMapa[1]); //e2m: Right dynamic\n        tl =  ol.render.getRenderPixel(e, [widthClip, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [widthClip, mapSize[1]]);\n      } else if (this.comparisonMode === 2) {\n        //ctx.rect(0, this.pos[1], ctx.canvas.width, ctx.canvas.height - this.pos[1]); //e2m: Down dynamic\n        tl =  ol.render.getRenderPixel(e, [0,heightClip]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], heightClip]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]]);\n      } else if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [widthClip, 0]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], 0]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], heightClip]);\n        bl =  ol.render.getRenderPixel(e, [widthClip, heightClip]);\n      }\n   }\n   if (tl!==undefined){\n    ctx.moveTo(tl[0], tl[1]);\n    ctx.lineTo(bl[0], bl[1]);\n    ctx.lineTo(br[0], br[1]);\n    ctx.lineTo(tr[0], tr[1]);\n    ctx.closePath();   \n  }   \n\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeB_(e) {\n    e.context.restore();\n  }\n\n  precomposeC_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    const mapSize = lienzoMapa;\n    const widthClip = this.pos[0];\n    const heightClip = this.pos[1];\n    const margenClip = 0; //Stroke size in pixels.\n    let tl;\n    let tr;\n    let br;\n    let bl;        \n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [0,mapSize[1]/2]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0]/2, mapSize[1]/2]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0]/2, mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]]); \n      }\n    } else {\n      if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [0,heightClip]);\n        tr =  ol.render.getRenderPixel(e, [widthClip, heightClip]);\n        br =  ol.render.getRenderPixel(e, [widthClip, mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [0, mapSize[1]]);\n      }\n    }\n    if (tl!==undefined){\n      ctx.moveTo(tl[0], tl[1]);\n      ctx.lineTo(bl[0], bl[1]);\n      ctx.lineTo(br[0], br[1]);\n      ctx.lineTo(tr[0], tr[1]);\n      ctx.closePath();   \n    }   \n\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeC_(e) {\n    e.context.restore();\n  }\n\n  precomposeD_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    const mapSize = lienzoMapa;\n    const widthClip = this.pos[0];\n    const heightClip = this.pos[1];\n    const margenClip = 0; //Stroke size in pixels.\n    let tl;\n    let tr;\n    let br;\n    let bl; \n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [mapSize[0]/2,mapSize[1]/2]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]/2]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [mapSize[0]/2,mapSize[1]]);\n      }\n    } else {\n      if (this.comparisonMode === 3) {\n        tl =  ol.render.getRenderPixel(e, [widthClip,heightClip]);\n        tr =  ol.render.getRenderPixel(e, [mapSize[0], heightClip]);\n        br =  ol.render.getRenderPixel(e, [mapSize[0], mapSize[1]]);\n        bl =  ol.render.getRenderPixel(e, [widthClip,mapSize[1]]);\n      }\n    }\n    if (tl!==undefined){\n      ctx.moveTo(tl[0], tl[1]);\n      ctx.lineTo(bl[0], bl[1]);\n      ctx.lineTo(br[0], br[1]);\n      ctx.lineTo(tr[0], tr[1]);\n      ctx.closePath();   \n    }   \n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeD_(e) {\n    e.context.restore();\n  }\n  /**\n   * Create the swipe indicator\n   *\n   */\n  createSwipeControl() {\n    let swipeControl;\n    let swipeIcon;\n    if (document.querySelector('.lyrcompare-swipe-control') === null) {\n      swipeControl = document.createElement('div');\n      swipeControl.classList.add('lyrcompare-swipe-control');\n      swipeIcon = document.createElement('div');\n      swipeIcon.classList.add('control-icon');\n      swipeControl.append(swipeIcon);\n      document.querySelector('.ol-overlaycontainer-stopevent').append(swipeControl);\n    } else {\n      swipeControl = document.querySelector('.lyrcompare-swipe-control');\n      swipeIcon = document.querySelector('.lyrcompare-swipe-control .control-icon');\n    }\n\n    swipeControl.addEventListener('mousedown', () => this.swipeClicked = true);\n    swipeControl.addEventListener('mouseup', () => this.swipeClicked = false);\n    swipeControl.addEventListener('touchstart', () => this.swipeClicked = true);\n    swipeControl.addEventListener('touchend', () => this.swipeClicked = false);\n    this.updatePosition();\n  }\n\n  /**\n  * Move the swipe indicator\n  *\n  */\n  moveSwipeControl() {\n    const lienzoMapa = this.map_.getSize();\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl && this.getMap()) {\n      if (this.staticDivision === 0 || this.staticDivision === 2) {\n        if (this.comparisonMode === 1) {\n          swipeControl.style.top = (lienzoMapa[1] / 2) - (swipeControl.offsetHeight / 2) + 'px';\n          swipeControl.style.left = (this.pos[0]) - (swipeControl.offsetWidth / 2) + 'px';\n        } else if (this.comparisonMode === 2) {\n          swipeControl.style.left = (lienzoMapa[0] / 2) - (swipeControl.offsetWidth / 2) + 'px';\n          swipeControl.style.top = (this.pos[1]) - (swipeControl.offsetHeight / 2) + 'px';\n        } else if (this.comparisonMode === 3) {\n          swipeControl.style.left = (this.pos[0]) - (swipeControl.offsetWidth / 2) + 'px';\n          swipeControl.style.top = (this.pos[1]) - (swipeControl.offsetHeight / 2) + 'px';\n        }\n      } else {\n        swipeControl.style.left = (lienzoMapa[0] / 2) - (swipeControl.offsetWidth / 2) + 'px';\n        swipeControl.style.top = (lienzoMapa[1] / 2) - (swipeControl.offsetHeight / 2) + 'px';\n      }\n    }\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(b) {\n    super.setActive(b);\n  }\n}\n","/**\n * @module M/impl/control/Lyrcomparecontrol\n */\nimport LyrcompareInteraction from 'impl/cplyrcompareinteraction';\n\n\nexport default class Lyrcomparecontrol extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // super addTo - don't delete\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n\n  /**\n   * Effects on the layer\n   *\n   * @public\n   * @function\n   * @param { M.Layer } layer layer to which to assign an effect\n   * @param { Number } opacityVal nivel de opacidad\n   * @api stable\n   */\n  effectSelectedCurtain(lyrA, lyrB, lyrC, lyrD, opacityVal, staticDivision, comparisonMode) {\n    \n    lyrA.setVisible(true);\n    lyrB.setVisible(true);\n    this.transparentInteraction_ = new LyrcompareInteraction({\n      opacityVal,\n      lyrA,\n      lyrB,\n      lyrC,\n      lyrD\n    });\n    \n    this.olMap.addInteraction(this.transparentInteraction_);\n    this.setOpacity(opacityVal);\n    this.setComparisonMode(comparisonMode);\n    this.setStaticDivision(staticDivision);\n  }\n\n  /**\n   * Layer visibility\n   *\n   * @public\n   * @function\n   * @param { Number } opacityVal opacidad de las capas\n   * @api stable\n   */\n  setVisibilityLayersCD() {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setVisibilityLayersCD();\n  }\n\n  /**\n   * Layers opacity\n   *\n   * @public\n   * @function\n   * @param { Number } opacityVal opacidad de las capas\n   * @api stable\n   */\n  setOpacity(opacityVal) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setOpacity(opacityVal);\n  }\n\n  /**\n     * Layers comparison mode\n     *\n     * @public\n     * @function\n     * @param { Number } comparisonMode opacidad de las capas\n     * @api stable\n     */\n  setComparisonMode(comparisonMode) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setComparisonMode(comparisonMode);\n    this.setVisibilityLayersCD();\n  }\n\n  /**\n   * Set staticDivision\n   *\n   * @public\n   * @function\n   * @param { Number } staticDivision establece el tipo de divisin\n   * @api stable\n   */\n\n  setStaticDivision(staticDivision) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setStaticDivision(staticDivision);\n  }\n\n  /**\n   * Set layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer layer to assign effect\n   * @api stable\n   */\n  addLayer(layer) {\n    this.transparentInteraction_.addLayer(layer.getImpl().getOL3Layer());\n  }\n\n  /**\n   * Remove effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffectsCurtain() {\n    this.olMap.removeInteraction(this.transparentInteraction_);\n  }\n\n  /**\n   * Remove layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer to remove\n   * @api stable\n   */\n  removeLayer(layer) {\n    this.transparentInteraction_.removeLayer(layer.getImpl().getOL3Layer());\n  }\n}\n","/**\n * @module M/control/LyrCompareControl\n */\n\nimport LyrcompareImplControl from 'impl/cplyrcomparecontrol';\nimport template from 'templates/cplyrcompare';\nimport { getValue } from './i18n/language';\n\nArray.prototype.unique = (a) => {\n  return () => {\n    return this.filter(a)\n  };\n}; ((a, b, c) => {\n  return c.indexOf(a, b + 1) < 0\n});\n\nexport default class LyrCompareControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(LyrcompareImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new LyrcompareImplControl();\n    super(impl, 'LyrCompare');\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.layers = values.layers;\n\n    /**\n     * Nivel de opacidad\n     * @private\n     * @type {Number}\n     */\n    this.opacityVal = values.opacityVal;\n\n    /**\n     * Layer selected A\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedA = null;\n\n    /**\n     * Layer selected B\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedB = null;\n\n    /**\n     * Layer selected C\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedC = null;\n\n    /**\n     * Layer selected D\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedD = null;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n\n    /**\n     * Static Division selected\n     * @private\n     * @type {Number}\n     */\n    this.staticDivision = values.staticDivision;\n\n    /**\n     * Opacity Value\n     * @private\n     * @type {Number}\n     */\n    this.opacityVal = values.opacityVal;\n\n    /**\n     * Comparison mode\n     * @private\n     * @type {Number}\n     */\n    this.comparisonMode = values.comparisonMode; // 0: desactivado, 1: vertical, 2: horizontal, 3: multivista\n\n    /**\n     * Layer A default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrA = values.defaultLyrA;\n\n    /**\n     * Layer B default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrB = values.defaultLyrB;\n\n    /**\n     * Layer C default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrC = values.defaultLyrC;\n\n    /**\n     * Layer D default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrD = values.defaultLyrD;\n\n    /** Show interface\n     *@public\n     *@type{boolean}\n     */\n    this.interface = values.interface;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n\n    this.map = map;\n\n    // Se hace esto para poder aadir ol3Layers a la instancia\n    // this.layers. Ol3Layers tiene valor cuando se aade al mapa\n    this.map.on(M.evt.ADDED_LAYER, (evt) => {\n      evt.forEach((l) => {\n       if (l.type === 'WMS' || l.type === 'WMTS') {\n        this.layers = this.layers.map((layers) => {\n          return (layers.name !== l.name) ? layers : l;\n        })\n      }\n      })\n    });\n\n    return new Promise((success, fail) => {\n      if (this.layers.length >= 2) {\n        if (this.comparisonMode === 3 && this.layers.length < 4) {\n          M.dialog.error(getValue('no_layers_plugin'), 'lyrcompare');\n          this.comparisonMode = 0;\n        }\n\n        let isLoad = this.allLayerLoad();\n        if (isLoad) {\n          this.setFunctionsAndCompile(success);\n        } else {\n          const idInterval = setInterval(() => {\n            isLoad = this.allLayerLoad();\n            if (isLoad) {\n              clearInterval(idInterval);\n              this.setFunctionsAndCompile(success);\n            }\n          }, 200);\n        }\n      } else {\n        M.dialog.error(getValue('no_layers_plugin'), 'lyrcompare');\n      }\n    });\n  }\n\n  /**\n   * This function set plugin behavior and compile template\n   *\n   * @public\n   * @function\n   * @param { function } success to promise\n   * @api stable\n   */\n  setFunctionsAndCompile(success) {\n    let layers = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name, legend: layer.legend} : { name: layer, legend: layer };\n    });\n\n    const options = {\n      jsonp: true,\n      vars: {\n        options: layers,\n        comparisonMode: this.comparisonMode,\n        translations: {\n          tooltip_vcurtain: getValue('tooltip_vcurtain'),\n          tooltip_hcurtain: getValue('tooltip_hcurtain'),\n          tooltip_multicurtain: getValue('tooltip_multicurtain'),\n          tooltip_deactivatecurtain: getValue('tooltip_deactivatecurtain'),\n          opacity: getValue('opacity'),\n          static: getValue('static'),\n          dynamic: getValue('dynamic'),\n          mixed: getValue('mixed'),\n          layer: getValue('layer'),\n          opacity_tooltip: getValue('opacity_tooltip'),\n          static_tooltip: getValue('static_tooltip'),\n          dynamic_tooltip: getValue('dynamic_tooltip'),\n          mixed_tooltip: getValue('mixed_tooltip'),\n          lyrLeftSelect_tooltip: getValue('lyrLeftSelect_tooltip'),\n          lyrRightSelect_tooltip: getValue('lyrRightSelect_tooltip')\n        }\n      }\n    }\n\n    //template with default options\n    this.template = M.template.compileSync(template, options);\n    this.setEventsAndValues();\n    this.updateControls();\n\n    if (this.layers.length === 0) {\n      M.dialog.error(getValue('no_layers_plugin'));\n    } else {\n      //e2m: Toogle activate/desactivate vcurtain, hcurtain, multicurtain ---> comparisonMode = 1, 2, 3\n      this.template.querySelectorAll('button[id^=\"m-lyrcompare-\"]').forEach((button, i) => {\n        if (button.id===\"m-lyrcompare-deactivate\"){\n          button.addEventListener('click', evt => {\n            if(document.querySelector('#m-lyrdropdown-selector')) document.querySelector('#m-lyrdropdown-selector').style.display = 'block';\n            \n            // e2m: permitimos que se activen de nuevo los comparadores de Spy Eye al desactivar las cortinas\n            document.querySelector('#m-transparency-active').disabled = false;\n            document.querySelector('#m-transparency-deactivate').disabled = false;\n\n            this.comparisonMode = 0;\n            this.deactivateCurtain();\n            return;\n          })\n        } else{\n          button.addEventListener('click', evt => {\n            if (this.comparisonMode === 0) {\n                if(document.querySelector('#m-lyrdropdown-selector')) {\n                  document.querySelector('#m-lyrdropdown-selector').value=\"none\";\n                  document.querySelector('#m-lyrdropdown-selector').style.display = 'none';\n                }\n\n              // e2m: evitamos que se activen los comparadores de Spy Eye mientras las cortinas estn activas\n              document.querySelector('#m-transparency-active').disabled = true;\n              document.querySelector('#m-transparency-deactivate').disabled = true;\n\n              this.comparisonMode = i + 1;\n              this.activateCurtain();\n              return;\n            } else if (this.comparisonMode === i + 1) {\n              this.comparisonMode = 0;\n              this.deactivateCurtain();\n              return;\n            } else {\n              //Cambiamos de modo de visualizacin sin apagar/encender la interaccin\n              this.comparisonMode = i + 1;\n              this.updateControls();\n              this.getImpl().setComparisonMode(this.comparisonMode);\n            }\n          })\n        }\n      });\n    }\n    return success(this.template);\n  }\n\n  /**\n   * This function set events and values to template\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  setEventsAndValues() {\n    //opacity control\n    this.template.querySelector('#input-transparent-opacity').value = this.opacityVal;\n    this.template.querySelector('#input-transparent-opacity').addEventListener('input', (evt) => {\n      this.opacityVal = Number(evt.target.value);\n      this.getImpl().setOpacity(this.opacityVal);\n    });\n\n    //division selector\n    if (this.staticDivision === 1) {\n      this.template.querySelector('#div-m-lyrcompare-transparent-static').checked = true;\n    } else if (this.staticDivision === 0) {\n      this.template.querySelector('#div-m-lyrcompare-transparent-dynamic').checked = true;\n    } else {\n      this.template.querySelector('#div-m-lyrcompare-transparent-mixed').checked = true;\n    }\n\n    this.template.querySelector('#div-m-lyrcompare-transparent-dynamic').addEventListener('change', (evt) => {\n      this.staticDivision = Number(evt.target.value);\n      this.getImpl().setStaticDivision(this.staticDivision);\n    });\n\n    this.template.querySelector('#div-m-lyrcompare-transparent-static').addEventListener('change', (evt) => {\n      this.staticDivision = Number(evt.target.value);\n      this.getImpl().setStaticDivision(this.staticDivision);\n    });\n\n    this.template.querySelector('#div-m-lyrcompare-transparent-mixed').addEventListener('change', (evt) => {\n      this.staticDivision = Number(evt.target.value);\n      this.getImpl().setStaticDivision(this.staticDivision);\n    });\n\n    this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').forEach(item => {\n      item.addEventListener('change', evt => {\n        const layer = this.layers.filter((layer) => {\n          if(layer.name === evt.target.value) {\n            this.map.addLayers(layer);\n            return layer;\n          }\n        });\n\n        let lstLayers = [];\n        if (item.id === 'm-lyrcompare-lyrA') {\n          lstLayers = [layer[0].name, this.layerSelectedB.name, this.layerSelectedC.name, this.layerSelectedD.name];\n        } else if (item.id === 'm-lyrcompare-lyrB') {\n          lstLayers = [this.layerSelectedA.name, layer[0].name, this.layerSelectedC.name, this.layerSelectedD.name];\n        } else if (item.id === 'm-lyrcompare-lyrC') {\n          lstLayers = [this.layerSelectedA.name, this.layerSelectedB.name, layer[0].name, this.layerSelectedD.name];\n        } else if (item.id === 'm-lyrcompare-lyrD') {\n          lstLayers = [this.layerSelectedA.name, this.layerSelectedB.name, this.layerSelectedC.name, layer[0].name];\n        }\n\n        //e2m: de esta forma pasamos los parmetros en forma de array\n        if (this.checkLayersAreDifferent(...lstLayers) === false) {\n          M.dialog.info(getValue('advice_sameLayer'));\n          if (item.id === 'm-lyrcompare-lyrA') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedA.name\n          } else if (item.id === 'm-lyrcompare-lyrB') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedB.name\n          } else if (item.id === 'm-lyrcompare-lyrC') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedC.name\n          } else if (item.id === 'm-lyrcompare-lyrD') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedD.name\n          }\n\n          return false;\n        }\n\n        if (item.id === 'm-lyrcompare-lyrA') {\n          if (layer[0].name === this.layerSelectedC.name) {\n            this.layerSelectedC.setVisible(false);\n            this.layerSelectedC = this.layerSelectedA;\n            this.template.querySelector('#m-lyrcompare-lyrC').value = this.layerSelectedA.name\n          }\n\n          if (layer[0].name === this.layerSelectedD.name) {\n            this.layerSelectedD.setVisible(false);\n            this.layerSelectedD = this.layerSelectedA;\n            this.template.querySelector('#m-lyrcompare-lyrD').value = this.layerSelectedA.name\n          }\n        } else if (item.id === 'm-lyrcompare-lyrB') {\n          if (layer[0].name === this.layerSelectedC.name) {\n            this.layerSelectedC.setVisible(false);\n            this.layerSelectedC = this.layerSelectedB;\n            this.template.querySelector('#m-lyrcompare-lyrC').value = this.layerSelectedB.name\n          }\n\n          if (layer[0].name === this.layerSelectedD.name) {\n            this.layerSelectedD.setVisible(false);\n            this.layerSelectedD = this.layerSelectedB;\n            this.template.querySelector('#m-lyrcompare-lyrD').value = this.layerSelectedB.name\n          }\n        }\n\n        if (item.id === 'm-lyrcompare-lyrA') {\n          this.layerSelectedA.setVisible(false);\n          this.layerSelectedA = layer[0];\n        } else if (item.id === 'm-lyrcompare-lyrB') {\n          this.layerSelectedB.setVisible(false);\n          this.layerSelectedB = layer[0];\n        } else if (item.id === 'm-lyrcompare-lyrC') {\n          this.layerSelectedC.setVisible(false);\n          this.layerSelectedC = layer[0];\n        } else if (item.id === 'm-lyrcompare-lyrD') {\n          this.layerSelectedD.setVisible(false);\n          this.layerSelectedD = layer[0];\n        }\n\n        setTimeout(() => {\n          this.removeEffectsComparison();\n          this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);  \n          this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);\n          this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);  \n          this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);\n          this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);  \n        }, 1000);\n       });\n    });\n  }\n\n  /**\n   * This function checks selected layers are diferent\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param { string } lyerA layer 1\n   * @param { string } lyerB layer 2\n   * @param { string } lyerC layer 3\n   * @param { string } lyerD layer 4\n\n   * @return {Boolean}\n   */\n  checkLayersAreDifferent(lyerA, lyerB, lyerC, lyerD) {\n    let res = true;\n    if ((this.comparisonMode === 1) || (this.comparisonMode === 2)) {\n      res = lyerA !== lyerB;\n    } else {\n      let compLyers = [lyerA, lyerB, lyerC, lyerD];\n      const noDups = [... new Set(compLyers)];\n      res = noDups.length === compLyers.length;\n      //res = compLyers.length !== compLyers.unique().length; // No entiendo por qu esto funcionaba antes y ahora no\n    }\n\n    return res;\n  }\n\n  /**\n   * Activate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activateCurtain() {\n    this.activeDefault();\n    setTimeout(() => {\n      this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);\n      this.updateControls();\n    }, 1000);\n   \n  }\n\n  /**\n   * Activate default values\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activeDefault() {\n    if (this.layerSelectedA === null) {\n      this.layerSelectedA = this.layers[this.defaultLyrA];\n      this.template.querySelector('#m-lyrcompare-lyrA').selectedIndex = this.defaultLyrA;\n      if(this.map.getLayers().some((l) => l.name === this.layerSelectedA.name));\n      this.map.addLayers(this.layerSelectedA);\n    }\n\n    if (this.layerSelectedB === null) {\n      this.layerSelectedB = this.layers[this.defaultLyrB];\n      this.template.querySelector('#m-lyrcompare-lyrB').selectedIndex = this.defaultLyrB;\n      if(this.map.getLayers().some((l) => l.name === this.layerSelectedB.name));\n      this.map.addLayers(this.layerSelectedB);\n    }\n\n    if (this.layerSelectedC === null) {\n      this.layerSelectedC = this.layers[this.defaultLyrC];\n      this.template.querySelector('#m-lyrcompare-lyrC').selectedIndex = this.defaultLyrC;\n      if(this.map.getLayers().some((l) => l.name === this.layerSelectedC.name));\n      this.map.addLayers(this.layerSelectedC);\n    }\n\n    if (this.layerSelectedD === null) {\n      this.layerSelectedD = this.layers[this.defaultLyrD];\n      this.template.querySelector('#m-lyrcompare-lyrD').selectedIndex = this.defaultLyrD;\n      if(this.map.getLayers().some((l) => l.name === this.layerSelectedD.name));\n      this.map.addLayers(this.layerSelectedD);\n    }\n  }\n\n  /**\n   * Deactivate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivateCurtain() {\n\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl) {\n      swipeControl.classList.display = 'none !important';\n    }\n\n    this.comparisonMode = 0;\n    if (this.layerSelectedA !== null && this.layerSelectedB !== null) {\n      this.layerSelectedA.setVisible(false);\n      this.layerSelectedB.setVisible(false);\n    }\n\n    if (this.layerSelectedC !== null && this.layerSelectedD !== null && this.layerSelectedC !== undefined && this.layerSelectedD !== undefined) {\n      this.layerSelectedC.setVisible(false);\n      this.layerSelectedD.setVisible(false);\n    }\n\n    this.removeEffectsComparison();\n    this.updateControls();\n\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffectsComparison() {\n    this.getImpl().removeEffectsCurtain();\n  }\n\n\n  manageLyrAvailable(lyrList){\n\n    if (this.template === null){\n      return;\n    }\n    this.updateLyrsAvailables(lyrList,\"A\");\n    this.updateLyrsAvailables(lyrList,\"B\");\n    this.updateLyrsAvailables(lyrList,\"C\");\n    this.updateLyrsAvailables(lyrList,\"D\");\n\n  }\n\n  updateLyrsAvailables(lyrList,dropDownLyrLetter) {\n    try {\n      let dropDownContainer = null;\n      dropDownContainer = this.template.querySelector('#m-lyrcompare-lyr' + dropDownLyrLetter);\n      for (let  iOpt =1; iOpt < dropDownContainer.options.length; iOpt++) {\n        dropDownContainer.options[iOpt].disabled = !lyrList.includes(dropDownContainer.options[iOpt].value);\n      }\n    } catch (error) {\n          /* eslint-disable */\n          console.log(error);\n          /* eslint-enable */\n    }\n  }\n\n\n  /**\n   * This procedure updates texts in controls\n   *\n   */\n  updateControls() {\n    this.removeActivate();\n    this.activateByMode();\n    const swapControl = document.querySelector('.lyrcompare-swipe-control');\n    if (this.comparisonMode === 0) {\n      this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').forEach(item => {\n        item.disabled = true;\n      });\n\n      this.template.querySelector('input').disabled = true; //Deshabilita el range del radio\n      this.template.querySelector('#div-m-lyrcompare-transparent-dynamic').disabled = true; // Deshabilita options de tipo de control de cortina\n      this.template.querySelector('#div-m-lyrcompare-transparent-static').disabled = true; // Deshabilita options de tipo de control de cortina\n      this.template.querySelector('#div-m-lyrcompare-transparent-mixed').disabled = true; // Deshabilita options de tipo de control de cortina\n      return;\n    } else if (this.comparisonMode === 1) {\n      if (swapControl) swapControl.style.opacity = '1';\n      this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList.add('cp-columns-2');\n      this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList.add('cp-columns-1');\n      this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrA').disabled = false;\n      this.template.querySelector('#m-lyrcompare-lyrB').disabled = false;\n    } else if (this.comparisonMode === 2) {\n      if (swapControl) swapControl.style.opacity = '1';\n      this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList.add('cp-columns-4');\n      this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList.add('cp-columns-3');\n      this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrA').disabled = false;\n      this.template.querySelector('#m-lyrcompare-lyrB').disabled = false;\n    } else if (this.comparisonMode === 3) {\n      if (swapControl) swapControl.style.opacity = '1';\n      this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').forEach(item => {\n        item.disabled = false;\n      });\n\n      this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList.add('cp-th-large-1');\n      this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList.add('cp-th-large-2');\n      this.template.querySelector('#m-lyrcompare-lyrC-lbl').classList.add('cp-th-large-3');\n      this.template.querySelector('#m-lyrcompare-lyrD-lbl').classList.add('cp-th-large-4');\n      this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrC-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrD-cont').style.display = 'block';\n    }\n\n    this.template.querySelector('input').disabled = false; //Habilita el range del radio\n    this.template.querySelector('#div-m-lyrcompare-transparent-dynamic').disabled = false; // Habilita options de tipo de control de cortina\n    this.template.querySelector('#div-m-lyrcompare-transparent-static').disabled = false; // Habilita options de tipo de control de cortina\n    this.template.querySelector('#div-m-lyrcompare-transparent-mixed').disabled = false; // Habilita options de tipo de control de cortina\n\n  }\n\n  activateByMode() {\n    if (this.comparisonMode === 1) {\n      this.template.querySelector('#m-lyrcompare-vcurtain').classList.add('buttom-pressed-vcurtain'); //VCurtain pulsado\n    } else if (this.comparisonMode === 2) {\n      this.template.querySelector('#m-lyrcompare-hcurtain').classList.add('buttom-pressed-hcurtain'); //HCurtain pulsado\n    } else if (this.comparisonMode === 3) {\n      this.template.querySelector('#m-lyrcompare-multicurtain').classList.add('buttom-pressed-multicurtain'); //MultiCurtain pulsado\n    }\n  }\n\n\n  removeActivate() {\n    this.template.querySelector('#m-lyrcompare-vcurtain').classList.remove('buttom-pressed-vcurtain');\n    this.template.querySelector('#m-lyrcompare-hcurtain').classList.remove('buttom-pressed-hcurtain');\n    this.template.querySelector('#m-lyrcompare-multicurtain').classList.remove('buttom-pressed-multicurtain');\n    this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').disabled = true;\n    this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrC-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrD-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList = '';\n    this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList = '';\n    const swapControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swapControl) {\n      swapControl.style.opacity = '0';\n    }\n  }\n\n  /**\n   * This function remove the Curtain layers\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeCurtainLayers(layers) {\n    layers.forEach(layer => {\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          let name = urlLayer[3]\n          const layerByUrl = this.map.getLayers().filter(l => name.includes(l.name))[this.map.getLayers().filter(l => name.includes(l.name)).length - 1];\n          this.map.removeLayers(layerByUrl);\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[this.map.getLayers().filter(l => layer.includes(l.name)).length - 1];\n          this.map.removeLayers(layerByName);\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[this.map.getLayers().filter(l => layer.name.includes(l.name)).length - 1];\n        this.map.removeLayers(layerByObject);\n      }\n    });\n  }\n\n  allLayerLoad() {\n    let res = true;\n    if (this.layers[0].load === undefined || this.layers[1].load === undefined &&\n      (this.layers[2] !== undefined && this.layers[3] !== undefined && (this.layers[2].load === undefined || this.layers[3].load === undefined))) {\n      res = false;\n    }\n\n    return res;\n  }\n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return {Boolean}\n   */\n  isValidLayer(layer) {\n    return layer.type === 'WMTS' || layer.type === 'WMS';\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof LyrCompareControl;\n  }\n\n  getLayersNames() {\n    return this.layers.map(l => l.name);\n  }\n\n\n}\n","/**\n * @module M/plugin/LyrCompare\n */\nimport 'assets/css/cplyrcompare';\nimport LyrCompareControl from './cplyrcomparecontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class LyrCompare extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} options plugin configuration options\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'lyrcompare';\n\n    /** Error control\n     *@private\n     *@type{boolean}\n     */\n    this.error_ = false;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with commas\n     * @type {Array<String>}\n     */\n    this.layers = [];\n    if (options.layers === undefined || options.layers.length < 2) {\n      M.dialog.error(getValue('no_layers_plugin'), 'lyrcompare');\n      this.error_ = true;\n    } else {\n      if (Array.isArray(options.layers)) {\n        this.layers = options.layers;\n      } else {\n        this.layers = options.layers.split(',');\n      }\n    }\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    if (this.error_ === false) {\n\n      /**\n       * Position of the Plugin\n       * @public\n       * @type {String}\n       */\n      this.position = options.position;\n\n      /**\n       * Collapsed attribute\n       * @public\n       * @type {boolean}\n       */\n      this.collapsed = true;\n\n      /**\n       * Collapsible attribute\n       * @public\n       * @type {boolean}\n       */\n      this.collapsible = true;\n\n      /**\n       * staticDivision\n       * Value: number in range 0 - 1\n       * @type {number}\n       * @public\n       */\n      this.staticDivision = options.staticDivision === undefined ? 1 : parseInt(options.staticDivision);\n\n      /**\n       * Opacity\n       * Value: number in range 0 - 100\n       * @type {number}\n       * @public\n       */\n      if (options.opacityVal === undefined) {\n        this.opacityVal = 100;\n      } else {\n        this.opacityVal = parseInt(options.opacityVal);\n        if (this.opacityVal <= 0) {\n          this.opacityVal = 0;\n        } else if (this.opacityVal >= 100) {\n          this.opacityVal = 100;\n        }\n      }\n\n      /**\n       * Comparison Mode\n       * Value: number in range 0 - 3\n       * @type {number}\n       * @public\n       */\n      if (options.comparisonMode === undefined) {\n        this.comparisonMode = 0;\n      } else {\n        this.comparisonMode = parseInt(options.comparisonMode);\n        if (this.comparisonMode <= 0 || this.comparisonMode > 3) {\n          this.comparisonMode = 0;\n        }\n      }\n\n      /**\n       * Metadata from api.json\n       * @private\n       * @type {Object}\n       */\n      this.metadata_ = api.metadata;\n\n      /**\n       *@private\n       *@type { string }\n       */\n      this.tooltip_ = options.tooltip || getValue('tooltip');\n\n      /** Show interface\n       *@public\n       *@type{boolean}\n       */\n      this.interface = options.interface === undefined ? true : options.interface;\n\n      /**\n       * Default Layer A\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrA === undefined) {\n        this.defaultLyrA = 0;\n      } else {\n        this.defaultLyrA = parseInt(options.defaultLyrA);\n      }\n\n      /**\n       * Default Layer B\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrB === undefined) {\n        this.defaultLyrB = this.defaultLyrA !== 0 ? 0 : 1;\n      } else {\n        this.defaultLyrB = parseInt(options.defaultLyrB);\n      }\n\n      if (this.defaultLyrA === this.defaultLyrB) {\n        M.dialog.error(getValue('repeated_layers'), 'lyrcompare');\n        this.error_ = true;\n      }\n\n      /**\n       * Default Layer C\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrC === undefined) {\n        this.defaultLyrC = 2;\n      } else {\n        this.defaultLyrC = parseInt(options.defaultLyrC);\n      }\n\n      if ((this.defaultLyrA === this.defaultLyrC) || (this.defaultLyrB === this.defaultLyrC)) {\n        M.dialog.error(getValue('repeated_layers'), 'lyrcompare');\n        this.error_ = true;\n      }\n\n      /**\n       * Default Layer D\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrD === undefined) {\n        this.defaultLyrD = 3;\n      } else {\n        this.defaultLyrD = parseInt(options.defaultLyrD);\n      }\n\n      if ((this.defaultLyrA === this.defaultLyrD) || (this.defaultLyrB === this.defaultLyrD) || (this.defaultLyrC === this.defaultLyrD)) {\n        M.dialog.error(getValue('repeated_layers'), 'lyrcompare');\n        this.error_ = true;\n      }\n    }\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    this.map_ = map;\n    const values = {\n      layers: this.layers,\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      staticDivision: this.staticDivision,\n      opacityVal: this.opacityVal,\n      comparisonMode: this.comparisonMode,\n      defaultLyrA: this.defaultLyrA,\n      defaultLyrB: this.defaultLyrB,\n      defaultLyrC: this.defaultLyrC,\n      defaultLyrD: this.defaultLyrD,\n      interface: this.interface,\n    };\n\n    this.control_ = new LyrCompareControl(values);\n    this.controls_.push(this.control_);\n    if (this.error_) {\n      const plugin = map.getPlugins('lyrcompare');\n      if (plugin.length !== 0) map.removePlugins(map.getPlugins('lyrcompare'))\n    } else {\n      if (this.interface) {\n        this.panel_ = new M.ui.Panel('panelLyrcompare', {\n          collapsible: this.collapsible,\n          collapsed: this.collapsed,\n          position: M.ui.position[this.position],\n          className: 'm-plugin-lyrcompare',\n          collapsedButtonClass: 'cp-icon',\n          tooltip: this.tooltip_,\n        });\n      } else {\n        this.panel_ = new M.ui.Panel('panelLyrcompare', {\n          collapsible: false,\n          collapsed: true,\n          position: M.ui.position[this.position],\n          className: 'm-plugin-lyrcompare-hidden',\n        });\n      }\n\n      this.panel_.addControls(this.controls_);\n      map.addPanels(this.panel_);\n    }\n  }\n\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.deactivate();\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl) {\n      swipeControl.remove();\n    }\n\n    this.map_.removeControls([this.control_]);\n    this.control_.removeCurtainLayers(this.control_.getLayersNames());\n    [this.name_, this.error_, this.layers, this.controls_, this.map_, this.position, this.collapsed, this.collapsible,\n      this.staticDivision, this.opacityVal, this.comparisonMode, this.metadata_, this.tooltip_, this.interface, this.defaultLyrA,\n      this.defaultLyrB, this.defaultLyrC, this.defaultLyrD\n    ] = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  manageLyrAvailable(lyrList){\n    this.control_.manageLyrAvailable(lyrList);\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activateCurtain();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivateCurtain();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   * @return {Boolean}\n   */\n   isActive() {\n\n    return this.control_.comparisonMode===0 ? false : true;\n\n  }\n\n\n\n  /**\n   * This\n   function compare\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof LyrCompare;\n  }\n}\n","/**\n * @module M/impl/control/TransparentInteraction\n\n */\nexport default class TransparentInteraction extends ol.interaction.Pointer {\n  /**\n   * @classdesc\n   * Main constructor of the TransparentInteraction.\n   *\n   * @constructor\n   * @extends {ol.interaction.Pointer}\n   * @api stable\n   */\n  constructor(options) {\n    super(options);\n    this.layers_ = [];\n    ol.interaction.Pointer.call(this, {\n      handleDownEvent: this.setPosition,\n      handleMoveEvent: this.setPosition,\n    });\n\n    // Default options\n    const optionsE = options || {};\n\n    this.freeze = optionsE.freeze;\n    this.pos = optionsE.freezeInPosition;\n    this.radius = (optionsE.radius || 100);\n    this.OLVersion = \"OL6\";\n\n    const layer = [optionsE.layers].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n    this.addLayer(layer);\n\n  }\n\n  /** Set the map > start postcompose\n   */\n  setMap(map) {\n    let i;\n\n    if (this.getMap()) {\n      // e2m: Por aqu pasamos al desactivar el control\n      for (i = 0; i < this.layers_.length; i += 1) {\n        if (this.OLVersion === \"OL6\"){\n          if (this.layers_[i].prerender) ol.Observable.unByKey(this.layers_[i].prerender);\n          if (this.layers_[i].postrender) ol.Observable.unByKey(this.layers_[i].postrender);\n          this.layers_[i].prerender = this.layers_[i].postcompose = null;\n        }else{\n          if (this.layers_[i].precompose) ol.Observable.unByKey(this.layers_[i].precompose);\n          if (this.layers_[i].postcompose) ol.Observable.unByKey(this.layers_[i].postcompose);\n          this.layers_[i].precompose = this.layers_[i].postcompose = null;\n        }\n      }\n      this.getMap().renderSync();\n    }\n    \n    ol.interaction.Pointer.prototype.setMap.call(this, map);\n    if (map) {\n      for (i = 0; i < this.layers_.length; i += 1) {\n        if (this.OLVersion === \"OL6\"){\n          this.layers_[i].prerender = this.layers_[i].on('prerender', this.precompose_.bind(this));\n          this.layers_[i].postrender = this.layers_[i].on('postrender', this.postcompose_.bind(this));\n        }else{\n        this.layers_[i].precompose = this.layers_[i].on('precompose', this.precompose_.bind(this));\n        this.layers_[i].postcompose = this.layers_[i].on('postcompose', this.postcompose_.bind(this));\n        }\n      }\n\n      map.renderSync();\n    }\n  }\n\n  /** Set clip radius\n   * @param {integer} radius\n   */\n  setRadius(radius) {\n    this.radius = radius;\n    if (this.getMap()) this.getMap().renderSync();\n  }\n\n  /** Set clip radius\n  * @param {integer} radius\n  */\n  setFreeze(value) {\n    this.freeze = value;\n    if (this.getMap()) this.getMap().renderSync();\n  }\n\n  /** Set Freeze\n   * @param {boolean} state\n   */\n  toogleFreeze() {\n    this.freeze = !this.freeze;\n    if (this.getMap()) this.getMap().renderSync();\n  }\n\n  /** Add a layer to clip\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayer(layers) {\n\n    /* eslint-disable */\n    if (!(layers instanceof Array)) layers = [layers];\n    /* eslint-enable */\n    for (let i = 0; i < layers.length; i += 1) {\n       //e2m: deprecated. Esto no se usa ? \n      const l = { layer: layers[i] };\n      if (this.getMap()) {\n        l.prerender = layers[i].on('prerender', this.precompose_.bind(this));\n        l.postrender = layers[i].on('postrender', this.postcompose_.bind(this));\n        this.getMap().renderSync();\n      }\n      \n      this.layers_.push(layers[i]);\n    }\n  }\n\n  /** Remove a layer to clip\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  removeLayer(layers) {\n    /* eslint-disable */\n    if (!(layers instanceof Array)) layers = [layers];\n    /* eslint-enable */\n    for (let i = 0; i < layers.length; i += 1) {\n      let k;\n      for (k = 0; k < this.layers_.length; k += 1) {\n        if (this.layers_[k] === layers[i]) {\n          break;\n        }\n      }\n\n      if (k !== this.layers_.length && this.getMap()) {\n        if (this.layers_[k].precompose) ol.Observable.unByKey(this.layers_[k].precompose);\n        if (this.layers_[k].postcompose) ol.Observable.unByKey(this.layers_[k].postcompose);\n        this.layers_.splice(k, 1);\n        this.getMap().renderSync();\n      }\n    }\n  }\n\n  /** Set position of the clip\n   * @param {ol.Pixel|ol.MapBrowserEvent}\n   */\n  setPosition(e) {\n\n    if (e.pixel) {\n      if (this.freeze===false){\n        this.pos = e.pixel;\n      } \n    } else if (e && e instanceof Array) {\n      this.pos = e;\n    } else {\n      /* eslint-disable */\n      e = [-10000000, -10000000];\n      /* eslint-enable */\n    }\n    if (this.getMap()) this.getMap().renderSync();\n  }\n\n  /* @private\n   */\n  precompose_(e) {\n    const ctx = e.context;\n    //const ratio = e.frameState.pixelRatio;\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(this.pos[0], this.pos[1], this.radius, 0, 2 * Math.PI);\n\n    ctx.lineWidth = 3;\n    if (this.freeze){\n      ctx.strokeStyle = 'rgba(255,0,0,0.7)';\n    } else {\n      ctx.strokeStyle = 'rgba(0,0,0,0.5)';\n    }\n    ctx.stroke();\n    ctx.clip();\n\n    //ctx.save();\n    //ctx.beginPath();\n      // only show a circle around the mouse\n      //const pointerPos = ol.render.getRenderPixel(e, [this.pos[0]],this.pos[1]);\n      /*const offset = getRenderPixel(e, [\n        mousePosition[0] + this.radius,\n        mousePosition[1],\n      ]);    \n      const canvasRadius = Math.sqrt(\n        Math.pow(offset[0] - pixel[0], 2) + Math.pow(offset[1] - pixel[1], 2)\n      );*/\n      //ctx.arc(pixel[0], pixel[1], canvasRadius, 0, 2 * Math.PI);\n      //ctx.lineWidth = (5 * canvasRadius) / radius;\n      //ctx.strokeStyle = 'rgba(0,0,0,0.5)';\n\n    //ctx.clip();\n      //console.log(pointerPos);\n\n\n\n\n//Rectangle\n//var ctx = event.context;\n//var pixelRatio = event.frameState.pixelRatio;\n//ctx.save();\n//ctx.beginPath();\n//var x = ctx.canvas.width / 2 - 100;\n//var y = ctx.canvas.height / 2 - 100;\n//ctx.rect(x, y, 100, 100);\n//ctx.clip();\n\n// Heart\n\n  // const ctx = event.context;\n  // // calculate the pixel ratio and rotation of the canvas\n  // const matrix = event.inversePixelTransform;\n  // const canvasPixelRatio = Math.sqrt(\n  //   matrix[0] * matrix[0] + matrix[1] * matrix[1]\n  // );\n  // const canvasRotation = -Math.atan2(matrix[1], matrix[0]);\n  // ctx.save();\n  // // center the canvas and remove rotation to position clipping\n  // ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\n  // ctx.rotate(-canvasRotation);\n\n  // ctx.scale(3 * canvasPixelRatio, 3 * canvasPixelRatio);\n  // ctx.translate(-75, -80);\n  // ctx.beginPath();\n  // ctx.moveTo(75, 40);\n  // ctx.bezierCurveTo(75, 37, 70, 25, 50, 25);\n  // ctx.bezierCurveTo(20, 25, 20, 62.5, 20, 62.5);\n  // ctx.bezierCurveTo(20, 80, 40, 102, 75, 120);\n  // ctx.bezierCurveTo(110, 102, 130, 80, 130, 62.5);\n  // ctx.bezierCurveTo(130, 62.5, 130, 25, 100, 25);\n  // ctx.bezierCurveTo(85, 25, 75, 37, 75, 40);\n  // ctx.clip();\n  // ctx.translate(75, 80);\n  // ctx.scale(1 / 3 / canvasPixelRatio, 1 / 3 / canvasPixelRatio);\n\n  // // reapply canvas rotation and position\n  // ctx.rotate(canvasRotation);\n  // ctx.translate(-ctx.canvas.width / 2, -ctx.canvas.height / 2);\n\n  }\n\n  /* @private\n   */\n  postcompose_(e) {\n    e.context.restore();\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(b) {\n    super.setActive(b);\n  }\n}\n","/* eslint-disable no-console */\n/**\n * @module M/impl/control/TransparencyControl\n */\nimport TransparentInteraction from 'impl/cptransparentInteraction';\n\n\nexport default class TransparencyControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // super addTo - don't delete\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    this.freezePosition = false;\n    super.addTo(map, html);\n  }\n\n  /**\n   * Effects on the layer\n   *\n   * @public\n   * @function\n   * @param { M.Layer } layer layer to which to assign an effect\n   * @param { Number } radius radius to assign\n   * @api stable\n   */\n  effectSelected(layers, radius, freeze) {\n\n    layers.setVisible(true);\n    layers.setZIndex(5000);\n    this.transparentInteraction_ = new TransparentInteraction({\n      radius,\n      freeze,\n      freezeInPosition: this.freezePosition,\n      layers,\n    });\n    this.olMap.addInteraction(this.transparentInteraction_);\n    return;\n\n  }\n\n  /**\n   * Set radius\n   *\n   * @public\n   * @function\n   * @param { Number } radius radius to assign\n   * @api stable\n   */\n  setRadius(radius) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setRadius(radius);\n  }\n\n  /**\n   * Set freexe\n   *\n   * @public\n   * @function\n   * @param { boolean } value value to assign\n   * @api stable\n   */\n     setFreeze(value) {\n      this.freezePosition = this.transparentInteraction_.pos;\n      if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setFreeze(value);\n    }\n\n  /**\n   * Toogle Freeze mode\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n   toogleFreeze() {\n    this.freezePosition = this.transparentInteraction_.pos;     \n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.toogleFreeze();\n  }\n\n  /**\n   * Set layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer layer to assign effect\n   * @api stable\n   */\n  addLayer(layer) {\n    this.transparentInteraction_.addLayer(layer);\n  }\n\n  /**\n   * Remove effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    this.olMap.removeInteraction(this.transparentInteraction_);\n  }\n\n  /**\n   * Remove layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer to remove\n   * @api stable\n   */\n  removeLayer(layer) {\n    this.transparentInteraction_.removeLayer(layer.getImpl().getOL3Layer());\n  }\n}\n","/**\n * @module M/control/TransparencyControl\n */\n\nimport TransparencyImplControl from 'impl/cptransparencycontrol';\nimport template from 'templates/cptransparency';\nimport { getValue } from './i18n/language';\n\nexport default class TransparencyControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(TransparencyImplControl)) {\n      M.exception(getValue(\"exception\"));\n    }\n\n    // 2. implementation of this control\n    const impl = new TransparencyImplControl();\n    super(impl, \"Transparency\");\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.layers = values.layers;\n    /**\n     * Radius selected\n     * @private\n     * @type {Number}\n     */\n    this.radius = values.radius;\n    /**\n     * Layer selected\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelected = null;\n\n    /**\n     * Layer selected\n     * @public\n     * @type {M.layer}\n     */\n    this.freeze = false;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n\n    /**\n     * Set fixed SpyEye\n     * @private\n     * @type {boolean}\n     */\n    this.freezeSpyEye = false;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    this.map = map;\n    return new Promise((success, fail) => {\n      let names = this.layers.map((layer) => {\n        return layer instanceof Object\n          ? { name: layer.name, legend: layer.legend }\n          : { name: layer, legend: layer };\n      });\n\n      let options = {\n        jsonp: true,\n        vars: {\n          translations: {\n            transparency: getValue(\"transparency\"),\n            radius: getValue(\"radius\"),\n            layers: getValue(\"layers\"),\n            freeze: getValue(\"freeze\"),\n            unfreeze: getValue(\"unfreeze\"),\n            activate_spyeye: getValue(\"activate_spyeye\"),\n            deactivate_spyeye: getValue(\"deactivate_spyeye\"),\n          },\n        },\n      };\n\n      if (names.length >= 1) {\n        options.vars.options = names;\n      }\n\n      this.template = M.template.compileSync(template, options);\n\n      // Radius\n      this.template.querySelector(\"#input-transparent-radius\").value =\n        this.radius;\n      this.template\n        .querySelector(\"#input-transparent-radius\")\n        .addEventListener(\"change\", (evt) => {\n          this.radius = Number(evt.target.value);\n          this.getImpl().setRadius(this.radius);\n        });\n\n      this.template\n        .querySelector(\"#m-transparency-active\")\n        .addEventListener(\"click\", (evt) => {\n          // e2m: evitamos que el mapa principal, sobre el que se activa SpyEye pueda poner sobre l capas\n          if(document.querySelector(\"#m-lyrdropdown-selector\")){\n            document.querySelector(\"#m-lyrdropdown-selector\").value = \"none\";\n            document.querySelector(\"#m-lyrdropdown-selector\").style.display =\n              \"none\";\n          }\n\n          // e2m: cuando activamos SpyEye, evitamos que se activen los comparadores de cortina\n          document.querySelector(\"#m-lyrcompare-vcurtain\").disabled = true;\n          document.querySelector(\"#m-lyrcompare-hcurtain\").disabled = true;\n          document.querySelector(\"#m-lyrcompare-multicurtain\").disabled = true;\n          document.querySelector(\"#m-lyrcompare-deactivate\").disabled = true;\n\n          this.template.querySelector(\"#m-transparency-lock\").style.visibility =\n            \"visible\";\n          this.template.querySelector(\n            \"#m-transparency-unlock\"\n          ).style.visibility = \"hidden\";\n          this.activate();\n        });\n      this.template\n        .querySelector(\"#m-transparency-deactivate\")\n        .addEventListener(\"click\", (evt) => {\n          // e2m: volvemos a permitir que el mapa principal pueda poner sobre l capas\n          if(document.querySelector(\"#m-lyrdropdown-selector\"))document.querySelector(\"#m-lyrdropdown-selector\").style.display = \"block\";\n\n          // e2m: cuando desactivamos SpyEye, permitimos que se activen los comparadores de cortina de nuevo\n          document.querySelector(\"#m-lyrcompare-vcurtain\").disabled = false;\n          document.querySelector(\"#m-lyrcompare-hcurtain\").disabled = false;\n          document.querySelector(\"#m-lyrcompare-multicurtain\").disabled = false;\n          document.querySelector(\"#m-lyrcompare-deactivate\").disabled = false;\n\n          this.template.querySelector(\"#m-transparency-lock\").style.visibility =\n            \"hidden\";\n          this.template.querySelector(\n            \"#m-transparency-unlock\"\n          ).style.visibility = \"hidden\";\n\n          this.deactivate();\n        });\n      this.template\n        .querySelector(\"#m-transparency-lock\")\n        .addEventListener(\"click\", (evt) => {\n          M.dialog.info(\n            \"Mueva el cursor a la zona deseada y pulse Ctrl+Shift+Enter para congelar\"\n          );\n        });\n      this.template\n        .querySelector(\"#m-transparency-unlock\")\n        .addEventListener(\"click\", (evt) => {\n          this.freeze = !this.freeze;\n          this.getImpl().setFreeze(this.freeze);\n          this.template.querySelector(\"#m-transparency-lock\").style.visibility =\n            \"visible\";\n          this.template.querySelector(\n            \"#m-transparency-unlock\"\n          ).style.visibility = \"hidden\";\n        });\n\n      if (this.layers.length === 0 || this.layers === \"\") {\n        M.dialog.error(getValue(\"errorLayer\"));\n      } else {\n        if (options !== \"\") {\n          this.template.querySelector(\"#m-transparency-lock\").style.visibility =\n            \"hidden\";\n          this.template.querySelector(\n            \"#m-transparency-unlock\"\n          ).style.visibility = \"hidden\";\n          this.template.querySelector(\"select\").disabled = true;\n          this.template.querySelector(\"input\").disabled = true;\n          this.template\n            .querySelector(\"select\")\n            .addEventListener(\"change\", (evt) => {\n              this.layerSelected.setVisible(false);\n              this.removeEffects();\n              const layer = this.layers.filter((layer) => {\n               if(layer.name === evt.target.value) {\n                this.map.addLayers(layer);\n                return layer;\n                }\n              });\n\n              this.layerSelected = layer[0];\n              setTimeout(() => {\n                this.getImpl().effectSelected(\n                  this.layerSelected,\n                  this.radius,\n                  this.freeze\n                );\n              }, 1000);\n            });\n        }\n      }\n\n      success(this.template);\n    });\n  }\n\n  setDefaultLayer() {\n    /* eslint-disable */\n    console.log(\"Activacin remota\");\n    /* eslint-enable */\n  }\n\n  manageLyrAvailable(lyrList) {\n    if (this.template === null) {\n      return;\n    }\n\n    try {\n      let dropDownContainer = null;\n      dropDownContainer = this.template.querySelector(\"#m-transparency-lyr\");\n      for (let iOpt = 1; iOpt < dropDownContainer.options.length; iOpt++) {\n        dropDownContainer.options[iOpt].disabled = !lyrList.includes(\n          dropDownContainer.options[iOpt].value\n        );\n      }\n    } catch (error) {\n      /* eslint-disable */\n      console.log(error);\n      /* eslint-enable */\n    }\n  }\n\n  /**\n   * Activate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activate() {\n    this.map.getLayers().forEach((l) => {\n      if (this.layers.some((layer) => layer.name === l.name)) this.map.removeLayers(l);\n     })\n\n    if (this.layerSelected === null) {\n      this.layerSelected = this.layers[0];\n      this.map.addLayers(this.layerSelected);\n    } \n\n    let names = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name } : { name: layer };\n    });\n\n    if (names.length >= 1) {\n      this.template.querySelector(\"select\").disabled = false;\n      this.template.querySelector(\"input\").disabled = false;\n      this.template.querySelector(\"#m-transparency-lock\").style.visibility =\n        \"visible\";\n      this.template.querySelector(\"#m-transparency-unlock\").style.visibility =\n        \"hidden\";\n      this.template.querySelector(\"#m-transparency-active\").disabled = true;\n      this.template.querySelector(\n        \"#m-transparency-deactivate\"\n      ).disabled = false;\n    }\n\n    setTimeout(() => {\n      this.getImpl().effectSelected(this.layerSelected, this.radius, this.freeze);\n    }, 1000);    \n  }\n\n  /**\n   * Deactivate SpyEye\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivate() {\n    if (this.layerSelected === null) this.layerSelected = this.layers[0];\n    let names = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name } : { name: layer };\n    });\n    this.removeEffects();\n    // this.layerSelected.setVisible(false);\n    this.map.removeLayers(this.layerSelected);\n    if (names.length >= 1) {\n      this.template.querySelector(\"select\").disabled = true;\n      this.template.querySelector(\"input\").disabled = true;\n      this.template.querySelector(\"#m-transparency-active\").disabled = false;\n      this.template.querySelector(\"#m-transparency-deactivate\").disabled = true;\n    }\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    this.getImpl().removeEffects();\n  }\n\n  /**\n   * This function remove the transparency layers\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeTransparencyLayers(layers) {\n    layers.forEach((layer) => {\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf(\"*\") >= 0) {\n          const urlLayer = layer.split(\"*\");\n          let name = urlLayer[3];\n          const layerByUrl = this.map\n            .getLayers()\n            .filter((l) => name.includes(l.name))[0];\n          this.map.removeLayers(layerByUrl);\n        } else {\n          const layerByName = this.map\n            .getLayers()\n            .filter((l) => layer.includes(l.name))[0];\n          this.map.removeLayers(layerByName);\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map\n          .getLayers()\n          .filter((l) => layer.name.includes(l.name))[0];\n        this.map.removeLayers(layerByObject);\n      }\n    });\n  }\n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return {Boolean}\n   */\n  isValidLayer(layer) {\n    return layer.type === \"WMTS\" || layer.type === \"WMS\";\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof TransparencyControl;\n  }\n\n  getLayersNames() {\n    return this.layers.map((l) => l.name);\n  }\n}\n","/**\n * @module M/plugin/Transparency\n */\nimport 'assets/css/cptransparency';\nimport TransparencyControl from './cptransparencycontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class Transparency extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'transparency';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-transparency';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * Posible values: TR | TL | BL | BR\n     * @type {String}\n     */\n    this.position = options.position;\n\n    /**\n     * Enabled key functions\n     * @type {boolean}\n     * @public\n     */\n     this.enabledKeyFunctions = options.enabledKeyFunctions;\n     if (this.enabledKeyFunctions === undefined) this.enabledKeyFunctions = true;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    if (options.layers === undefined || options.layers === '') {\n      M.dialog.error(getValue('errorLayer'));\n      this.layers = [];\n    } else {\n      if (Array.isArray(options.layers)) {\n        this.layers = options.layers;\n      } else {\n        this.layers = options.layers.split(',');\n      }\n    }\n\n    /**\n     * Transparent effect radius\n     * Value: number in range 30 - 200\n     * @type {number}\n     * @public\n     */\n\n    if (!isNaN(parseInt(options.radius))) {\n      if (options.radius >= 30 && options.radius <= 200) {\n        this.radius = parseInt(options.radius);\n      } else if (options.radius > 200) {\n        this.radius = 200;\n      } else if (options.radius < 30) {\n        this.radius = 30;\n      }\n    } else {\n      this.radius = 100; // Default value\n    }\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    this.separatorApiJson = api.url.separator;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = options.collapsed || true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible || true;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    const values = {\n      layers: this.layers,\n      radius: this.radius,\n    };\n\n    this.control_ = new TransparencyControl(values);\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelTransparency', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position],\n      className: this.className,\n      collapsedButtonClass: 'icon-gps4',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n\n\n    document.addEventListener('keydown', (zEvent) => {\n      if (!this.enabledKeyFunctions) {\n        return;\n      }\n      if (zEvent.ctrlKey && zEvent.shiftKey && zEvent.key === 'ArrowUp') {  // case sensitive\n        if (this.control_.radius>=200) return;\n        this.control_.radius += 20;\n        this.control_.getImpl().setRadius(this.control_.radius);\n        this.control_.template.querySelector('#input-transparent-radius').value=this.control_.radius;\n      }\n      if (zEvent.ctrlKey && zEvent.shiftKey && zEvent.key === 'ArrowDown') {  // case sensitive\n        if (this.control_.radius<=32) return;\n        this.control_.radius -= 20;\n        this.control_.getImpl().setRadius(this.control_.radius);\n        this.control_.template.querySelector('#input-transparent-radius').value=this.control_.radius;\n      }\n      if (zEvent.ctrlKey && zEvent.shiftKey && zEvent.key === 'Enter') {\n        this.control_.freeze= !this.control_.freeze;\n        this.control_.getImpl().setFreeze(this.control_.freeze);\n        if (this.control_.freeze){\n          this.control_.template.querySelector('#m-transparency-lock').style.visibility = 'hidden';\n          this.control_.template.querySelector('#m-transparency-unlock').style.visibility = 'visible';\n        }else{  \n          this.control_.template.querySelector('#m-transparency-lock').style.visibility = 'visible';\n          this.control_.template.querySelector('#m-transparency-unlock').style.visibility = 'hidden';\n        }\n      }\n\n    });\n\n  }\n\n\n\n  manageLyrAvailable(lyrAvailable){\n\n    this.control_.manageLyrAvailable(lyrAvailable);\n\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.control_.removeEffects();\n    this.control_.removeTransparencyLayers(this.control_.getLayersNames());\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.layers, this.radius] = [null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  setDefaultLayer(){\n    this.control_.setDefaultLayer();\n  }\n\n\n\n  /**\n   * Activate plugin SpyEye\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin SpyEye\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This\n   function compare\n   if pluging recieved by param is instance of M.plugin.Transparency\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Transparency;\n  }\n}\n","/**\n * @module M/control/ComparepanelControl\n */\n\nimport ComparepanelImplControl from 'impl/comparepanelcontrol';\nimport template from 'templates/comparepanel';\nimport { getValue } from './i18n/language';\nimport Mirrorpanel from './cpmirrorpanel';\nimport Timeline from './cptimeline';\nimport LyrCompare from './cplyrcompare';\nimport Transparency from './cptransparency';\n\nexport default class ComparepanelControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(options) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(ComparepanelImplControl)) {\n      M.exception(getValue('exception'));\n    }\n    // 2. implementation of this control\n    const impl = new ComparepanelImplControl();\n    super(impl, 'Comparepanel');\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n    this.baseLayers = options.baseLayers;\n    this.position = options.position;\n    this.layers = [];\n    this.layersPlugins = [];\n    this.defaultComparisonMode = options.defaultComparisonMode;\n    this.defaultComparisonViz = options.defaultComparisonViz;\n    this.previousComparisonMode = \"\";\n    this.actualComparisonMode = \"\";\n    this.urlCover =  options.urlCover;\n    this.lyrsMirrorMinZindex= options.lyrsMirrorMinZindex;\n\n    this.baseLayers.forEach(e => this.layers.push(e[2]));\n    this.params = [options.mirrorpanelParams, options.timelineParams, options.lyrcompareParams, options.transparencyParams];\n    this.params.forEach(p => {\n      p.position = this.position;\n    });\n\n\n    this.layersPlugins = this.transformToLayers(this.layers, options.map);\n\n    options.mirrorpanelParams.defaultBaseLyrs = this.layers;\n    options.mirrorpanelParams.lyrsMirrorMinZindex = this.lyrsMirrorMinZindex;\n    options.timelineParams.intervals = this.baseLayers;         //e2m: TimeLine needs this.baseLayers with the time param\n    options.lyrcompareParams.layers = this.layersPlugins;\n    options.transparencyParams.layers = this.layersPlugins;\n\n\n    // e2m: extraemos de las definiciones de capa los nombres de todas las capas\n    this.allLayersName = this.layers.map((lyrDef) => {\n      if (lyrDef.indexOf('*') >= 0) {\n        const lyrAttrib = lyrDef.split('*');\n        if (lyrAttrib[0].toUpperCase() === 'WMS') {\n          return lyrAttrib[3];\n        } else if (lyrAttrib[0].toUpperCase() === 'WMTS') {\n          return lyrAttrib[3];\n        }\n      }\n    });\n\n    this.mirrorpanel = new Mirrorpanel(options.mirrorpanelParams);\n    this.timeline = new Timeline(options.timelineParams);\n    \n    this.lyrcompare = new LyrCompare(options.lyrcompareParams);\n    this.transparency = new Transparency(options.transparencyParams);\n    this.panels = [];\n    this.plugins = [this.mirrorpanel, this.timeline, this.lyrcompare, this.transparency];\n    \n    this.map = null;\n    this.lyrCoverture = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    // eslint-disable-next-line\n    console.warn(getValue('comparepanel_obsolete'));\n    this.map = map;\n    return new Promise((success, fail) => {\n      let options = {\n        jsonp: true,\n        vars: {\n          translations: {\n            tooltipLyr: getValue('tooltipLyr'),\n            tooltipMirrorpanel: getValue('tooltipMirrorpanel'),\n            tooltipTimeline: getValue('tooltipTimeline'),\n            tooltipTransparency: getValue('tooltipTransparency'),\n          }\n        }\n      };\n\n      this.template = M.template.compileSync(template, options);\n      success(this.template);\n      this.addComparators(map);\n\n    });\n  }\n\n  addComparators(map) {\n    \n    this.plugins.forEach((p, index) => {\n      map.addPlugin(p);\n      this.panels.push(p.panel_._element);\n      let element = document.querySelector('.' + p.panel_._className + ' .m-panel-controls');\n      element.classList.add('cp-' + p.name);\n      document.querySelector('.' + p.panel_._className).remove();\n      this.template.querySelector('#m-cp-' + p.name).append(element);\n      if (index === this.plugins.length - 1) {\n        this.addButtonEvents();\n      }\n    });\n    this.setComparatorsDefaultStyle();\n\n    if (this.urlCover!==''){\n      this.loadCoverPNOALyr();\n    }\n\n\n    this.onMoveEnd((evt) => {\n      \n      if (this.urlCover===''){\n        // e2m: si no hay filtro de comerturas, se pueden elegir todas las capas\n        this.mirrorpanel.manageLyrAvailable(this.allLayersName);\n        this.lyrcompare.manageLyrAvailable(this.allLayersName);\n        this.transparency.manageLyrAvailable(this.allLayersName);\n      } else {\n        // e2m: si tenemos filtro de coberturas, se evalan las capas visibles\n        this.getCobertura(evt);\n      }\n    });\n\n  }\n\n  addButtonEvents() {\n    this.plugins.forEach(p => {\n      if (p.name==='mirrorpanel'){\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').addEventListener('click', (e) => {\n          this.deactivateAndActivateMirrorPanel(p);\n        }); \n\n      } else if (p.name==='lyrcompare'){\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').addEventListener('click', (e) => {\n          this.deactivateAndActivateOtherModes(p);\n        });        \n      } else {\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').addEventListener('click', (e) => {\n          this.deactivateAndActivateOtherModes(p);\n        });\n      }\n    });\n\n    // e2m: eventos del botn de texto\n    this.template.querySelector('#m-cp-testing-btn').addEventListener('click', (e) => {\n      this.map.getMapImpl().getLayers().forEach(lyr=>{\n        /* eslint-disable */\n        console.log(lyr.getSource().key_);\n        /* eslint-enable */\n      })\n    });\n\n  }\n\n  setComparatorsDefaultStyle(){\n\n    if ((this.defaultComparisonMode==='mirrorpanel') && (this.defaultComparisonViz===0)) {\n      /* eslint-disable */\n      console.log(\"Modo defecto\");\n      /* eslint-enable */\n    }else{\n      //this.template.querySelector('#m-cp-' + this.defaultComparisonMode + ' .cp-' + this.defaultComparisonMode).classList.toggle('hide-panel');  // Muestro panel\n      //this.template.querySelector('#m-cp-' + this.defaultComparisonMode + ' .cp-button').classList.toggle('active');                             // Aado scolor botn CamparePanel\n    }\n\n    this.plugins.forEach(p => {\n      if (p.name === this.defaultComparisonMode){\n        if (p.name==='transparency') {\n          p.setDefaultLayer();\n        }\n        if (p.name==='timeline') {\n          p.setDefaultLayer(this.defaultComparisonViz);\n        }        \n      }\n    });\n\n    this.actualComparisonMode = this.defaultComparisonMode // mirror - curtain - timeline - spyeye\n\n  }\n\n  deactivateAndActivateMirrorPanel(plugin) {\n\n    this.template.querySelector('#m-cp-mirrorpanel .cp-mirrorpanel').classList.toggle('hide-panel');  // Oculto panel\n    this.template.querySelector('#m-cp-mirrorpanel .cp-button').classList.toggle('active');         // Elimino sonbra botn\n\n    this.plugins.forEach(p => {\n      if (p.name !== 'mirrorpanel') {\n          this.template.querySelector(`#m-cp-${p.name} .cp-${p.name}`).classList.remove('hide-panel');  // Oculto panel\n          this.template.querySelector(`#m-cp-${p.name} .cp-button`).classList.remove('active');           // Elimino sombra botn\n        }\n        // if (p.name==='lyrcompare'){\n        //   if (p.isActive()===true){\n        //     p.deactivate();\n        //   }\n        // }\n    });\n    /** Aqu no debera hacer nada */\n    if (plugin.name==='mirrorpanel') {\n      this.actualComparisonMode = plugin.name;\n      return;\n    }\n  }\n\n  deactivateAndActivateOtherModes(plugin) {\n    this.actualComparisonMode = plugin.name;\n    if (plugin.name === 'mirrorpanel') return;\n    \n    this.plugins.forEach(p => {\n      if (p.name !== plugin.name) {\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-' + p.name).classList.remove('hide-panel');\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').classList.remove('active');\n      }\n    });\n    this.template.querySelector('#m-cp-' + plugin.name + ' .cp-button').classList.toggle('active');\n    this.template.querySelector('#m-cp-' + plugin.name + ' .cp-' + plugin.name).classList.toggle('hide-panel');\n  }\n\n\n  deactivateAndActivateOtherModesDeprecated(plugin) {\n    this.actualComparisonMode = plugin.name;\n    if (plugin.name === 'mirrorpanel') return;\n    \n    // this.plugins.forEach(p => {\n    //   if (p.name === 'mirrorpanel'){\n    //     return;\n    //   }\n    //   if (p.name === 'lyrcompare'){\n    //     return;\n    //   }      \n    //   if (p.name !== plugin.name) {\n    //     this.template.querySelector('#m-cp-' + p.name + ' .cp-' + p.name).classList.remove('hide-panel');\n    //     this.template.querySelector('#m-cp-' + p.name + ' .cp-button').classList.remove('active');\n    //     p.deactivate();\n    //   } else if (plugin.name !== 'mirrorpanel') {\n    //     p.deactivate();\n    //   }\n    // });\n    this.template.querySelector('#m-cp-' + plugin.name + ' .cp-button').classList.toggle('active');\n    // if (this.template.querySelector('#m-cp-' + plugin.name + ' .cp-button').classList.contains('active') && plugin.name === 'transparency') {\n    //   console.log(\"3\");\n    //   plugin.activate();\n    // }\n    if (this.template.querySelector('#m-cp-' + plugin.name + ' .cp-button').classList.contains('active') && plugin.name === 'timeline') {\n      plugin.activate();\n    }    \n    this.template.querySelector('#m-cp-' + plugin.name + ' .cp-' + plugin.name).classList.toggle('hide-panel');\n    this.template.querySelector('#m-cp-mirrorpanel .cp-mirrorpanel').classList.remove('hide-panel');  // Oculto panel\n    this.template.querySelector('#m-cp-mirrorpanel .cp-button').classList.remove('active');           // Elimino sombra botn\n    \n  }\n\n   /**\n   * Transform StringLayers to Mapea M.Layer\n   * Entra tantas veces como mapas lienzo activos haya.\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n    transformToLayers(layers, map) {\n\n      const transform = layers.map((layer) => {\n        let newLayer = null;\n        if (!(layer instanceof Object)) {\n          if (layer.indexOf('*') >= 0) {\n            const urlLayer = layer.split('*');\n            if (urlLayer[0].toUpperCase() === 'WMS') {\n              newLayer = new M.layer.WMS({\n                url: urlLayer[2],\n                name: urlLayer[3],\n                legend: urlLayer[1],\n                useCapabilities: urlLayer[4] === 'true' || false\n              });\n  \n              if (map.getLayers().filter(l => newLayer.name.includes(l.name)).length > 0) {\n                newLayer = map.getLayers().filter(l => newLayer.name.includes(l.name))[0];\n                newLayer.legend = urlLayer[1] || newLayer.name;\n              } else {\n                // this.map.addLayers(newLayer);\n              }\n            } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n  \n              /*newLayer = new M.layer.WMTS({\n                url: urlLayer[2] + '?',\n                name: urlLayer[3],\n                legend: urlLayer[1],\n                matrixSet: urlLayer[4],\n                transparent: true,              // Es una capa Overlay -> zIndex > 0\n                displayInLayerSwitcher: false,  // No aparece en el TOC\n                queryable: false,               // No GetFeatureInfo\n                visibility: false,              // Visible a false por defecto\n                format: urlLayer[5],\n              }), this.map.addWMTS(newLayer);*/\n  \n              newLayer = new M.layer.WMTS({\n                url: urlLayer[2],\n                name: urlLayer[3],\n                legend: urlLayer[1],\n                matrixSet: urlLayer[4],\n                transparent: true,              // Es una capa Overlay -> zIndex > 0\n                displayInLayerSwitcher: false,  // No aparece en el TOC\n                queryable: false,               // No GetFeatureInfo\n                visibility: false,              // Visible a false por defecto\n                format: urlLayer[5],\n                useCapabilities: urlLayer[6] === 'true' || false\n              });\n              // this.map.addWMTS(newLayer);\n              //this.map.addLayers(newLayer);\n            }\n          } else {\n            const layerByName = map.getLayers().filter(l => layer.includes(l.name))[0];\n            newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n          }\n        } else if (layer instanceof Object) {\n          const layerByObject = map.getLayers().filter(l => layer.name.includes(l.name))[0];\n          newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n        }\n  \n        if (newLayer !== null) {\n          if (newLayer.getImpl().getOL3Layer() === null) {\n            setTimeout(() => {\n              if (newLayer.type === 'WMS' || newLayer.type === 'WMTS') {\n                newLayer.load = true;\n              } else if (newLayer.type === 'WMTS') {\n                newLayer.facadeLayer_.load = true;\n              }\n            }, 1000);\n          } else {\n            newLayer.load = true;\n          }\n  \n          newLayer.displayInLayerSwitcher = false;\n          newLayer.setVisible(false);\n          newLayer.setZIndex(this.lyrsMirrorMinZindex);/* Establezco un zIndex a partir del cual se cargan las capas*/\n          return newLayer;\n        } else {\n          this.layers.remove(layer);\n        }\n      }, this);\n  \n      return (transform[0] === undefined) ? [] : transform;\n    }\n\n  /**\n       * @public\n       * @function\n       */\n  loadCoverPNOALyr() {\n    let estiloPoly = new M.style.Polygon({\n      fill: {\n        color: 'green',\n        opacity: 0.0,\n      },\n      /*stroke: {\n        color: '#FF0000',\n        width: 0,\n      }*/\n    });// Estilo no visible\n\n    const optionsLayer = {\n      name: 'coverpnoa',\n      url: this.urlCover,\n    };\n    this.lyrCoverture = new M.layer.GeoJSON(optionsLayer, { displayInLayerSwitcher: false });\n\n    // this.map.addLayers(this.lyrCoverture);\n    this.lyrCoverture.displayInLayerSwitcher = false;\n    this.lyrCoverture.setVisible(true);\n    this.lyrCoverture.setStyle(estiloPoly);\n\n  }\n\n\n  onMoveEnd(callback) {\n    const olMap = this.map.getMapImpl();\n    olMap.on('moveend', e => callback(e));\n  }\n\n\n  getCobertura(evt) {\n    const olMap = this.map.getMapImpl();\n    let pixelCentral = olMap.getPixelFromCoordinate(olMap.getView().getCenter());\n    let lyrAvailable = [];\n    olMap.forEachFeatureAtPixel(pixelCentral, function (feature, layer) {\n      if (feature.get('layerkey') !== undefined) {\n        lyrAvailable.push(feature.get('layerkey'));\n      }\n    });\n\n    this.mirrorpanel.manageLyrAvailable(lyrAvailable);\n    this.lyrcompare.manageLyrAvailable(lyrAvailable);\n    this.transparency.manageLyrAvailable(lyrAvailable);\n\n  }\n\n\n\n\n\n  deactivate() {\n    this.plugins.forEach((p, k) => {\n      p.deactivate();\n      document.querySelector('.m-plugin-comparepanel').parentElement.append(this.panels[k]);\n    });\n\n    this.map.removePlugins(this.plugins);\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof ComparepanelControl;\n  }\n}\n","/**\n * @module M/plugin/Comparepanel\n */\n\nimport 'assets/css/comparepanel';\nimport ComparepanelControl from './comparepanelcontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nimport es from './i18n/es';\nimport en from './i18n/en';\n\nexport default class Comparepanel extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'comparepanel';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-comparepanel';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * Posible values: TR | TL | BL | BR\n     * @type {String}\n     */\n    const positions = ['TR', 'TL', 'BL', 'BR'];\n\n    this.COMP_PLUGIN_NAMES = {\n      'none': 'default',\n      'mirror': 'mirrorpanel',\n      'curtain': 'lyrcompare',\n      'timeline': 'timeline',\n      'spyeye': 'transparency',\n    }\n\n    this.position = positions.includes(options.position) ? options.position : 'TR';\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = options.collapsed;\n    if (this.collapsed === undefined) this.collapsed = true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible;\n    if (this.collapsible === undefined) this.collapsible = true;\n\n    /**\n     * Vertical attribute\n     * @public\n     * Changes the plugin's orientation\n     * @type {boolean}\n     */\n    this.vertical = options.vertical;\n    if (this.vertical === undefined) this.vertical = true;\n\n    /**\n     * Base Layers\n     * @public\n     * Value: Array of layers with the layout [{name, tag, service},{...}]\n     * @type {Array}\n     */\n    if (options !== undefined) {\n      if (M.utils.isString(options.baseLayers)) {\n        this.baseLayers = JSON.parse(options.baseLayers.replace(/!!/g, '[').replace(//g, ']'));\n      } else if (M.utils.isArray(options.baseLayers)) {\n        this.baseLayers = options.baseLayers;\n      } else {\n        M.dialog.error(getValue('baseLayers_error'));\n      }\n    }\n\n    /**\n     * defaultCompareMode of the Plugin\n     * @public\n     * Posible values: mirror | curtain | spyeye | timeline\n     * @type {String}\n     */\n     const defaultCompareModes = ['mirror', 'curtain', 'spyeye', 'timeline', 'none'];\n     this.defaultCompareMode = defaultCompareModes.includes(options.defaultCompareMode) ? options.defaultCompareMode : 'mirror';\n\n    /**\n     * defaultCompareViz\n     * @public\n     * Value: Object with the rest of mirrorpanel's parameters\n     * @type {Object}\n     */\n    this.defaultCompareViz = options.defaultCompareViz || 0;\n\n\n    /**\n     * The name of the vector layer hat contains the attribution information.\n     *\n     * @private\n     * @type {string}\n     */\n     this.layerName_ = options.layerName || 'attributions';\n\n     /**\n      * Layer with attributions\n      *\n      * @private\n      * @type {M.layer.GeoJSON | M.layer.KML}\n      */\n     this.layerCobertura_ = options.layerCobertura;\n\n\n\n    /**\n     * Parameter of the features of the layer that contains the information of the URL.\n     * @private\n     * @type {URLLike}\n     */\n    this.urlCoberturas_ = options.urlcoberturas || '';\n\n    /**\n     * Nivel mnimo en el que empiezan a cargarse las capas\n     * Value: number in range 10 - 1000\n     * @type {number}\n     * @public\n     */\n     this.lyrsMirrorMinZindex = options.lyrsMirrorMinZindex;\n     if (this.lyrsMirrorMinZindex === undefined) this.lyrsMirrorMinZindex = 100;\n\n    /**\n     * mirrorpanelParams\n     * @public\n     * Value: Object with the rest of mirrorpanel's parameters\n     * @type {Object}\n     */\n    this.mirrorpanelParams = options.mirrorpanelParams || {};\n\n    /**\n     * timelineParams\n     * @public\n     * Value: Object with the rest of timeline's parameters\n     * @type {Object}\n     */\n    this.timelineParams = options.timelineParams || {};\n\n    /**\n     * lyrcompareParams\n     * @public\n     * Value: Object with the rest of lyrcompare's parameters\n     * @type {Object}\n     */\n    this.lyrcompareParams = options.lyrcompareParams || {};\n\n\n    /**\n     * transparencyParams\n     * @public\n     * Value: Object with the rest of transparency's parameters\n     * @type {Object}\n     */\n    this.transparencyParams = options.transparencyParams || {};\n\n    /**\n     * backImgLayersConfig\n     * @public\n     * Value: Object with configuration of BackImgLayers plugin\n     * @type {Object}\n     */\n     this.backImgLayersConfig = options.backImgLayersConfig || {};\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n  }\n  \n  /**\n   * Return plugin language\n   *\n   * @public\n   * @function\n   * @param {string} lang type language\n   * @api stable\n   */\n  static getJSONTranslations(lang) {\n    if (lang === 'en' || lang === 'es') {\n      return (lang === 'en') ? en : es;\n    }\n    return M.language.getTranslation(lang).comparepanel;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n\n    // e2m: ponemos el arraque del visualizador mirror a cero por defecto\n    this.mirrorpanelParams.modeViz = this.mirrorpanelParams.modeViz || {};\n    this.mirrorpanelParams.modeViz = (this.defaultCompareMode === 'mirror' ? this.defaultCompareViz : 0);\n\n    if (this.defaultCompareMode==='none'){\n      this.defaultCompareMode = 'mirror';\n      this.defaultCompareViz = 0;\n    }\n\n\n    // e2m: ponemos el arraqnue del visualizador mirror a cero por defecto\n    this.lyrcompareParams.comparisonMode = this.lyrcompareParams.comparisonMode || {};\n    this.lyrcompareParams.comparisonMode = (this.defaultCompareMode === 'curtain' ? this.defaultCompareViz : 0);\n    this.control_ = new ComparepanelControl({\n      baseLayers: this.baseLayers,\n      mirrorpanelParams: this.mirrorpanelParams,\n      timelineParams: this.timelineParams,\n      lyrcompareParams: this.lyrcompareParams,\n      transparencyParams: this.transparencyParams,\n      defaultComparisonMode: this.COMP_PLUGIN_NAMES[this.defaultCompareMode],\n      defaultComparisonViz: this.defaultCompareViz,\n      position: this.position,\n      urlCover: this.urlCoberturas_,\n      lyrsMirrorMinZindex: this.lyrsMirrorMinZindex,\n      map\n    });\n\n    this.controls_.push(this.control_);\n    this.map_ = map;\n\n    this.panel_ = new M.ui.Panel('panelComparepanel', {\n      position: M.ui.position[this.position],\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      className: this.className,\n      collapsedButtonClass: 'cp-icon-comparepanel',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n    this.panel_._element.classList.add(this.vertical ? 'orientation-vertical' : 'orientation-horizontal');\n\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.control_.deactivate();\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.baseLayers, this.vertical, this.mirrorpanelParams, this.lyrcompareParams, this.timelineParams, this.transparencyParams] = [null, null, null, null, null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    const baseLayers = JSON.stringify(this.baseLayers).replace(/\\[/g, '!!').replace(/\\]/g, '');\n    return `${this.name}=${this.position}*!${this.vertical}*!${baseLayers}`;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This function compare if pluging recieved\n   * by param is instance of M.plugin.Comparepanel\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Comparepanel;\n  }\n}\n","import M$plugin$Comparepanel from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/comparepanel';\nimport M$control$ComparepanelControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/comparepanelcontrol';\nimport M$plugin$LyrCompare from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cplyrcompare';\nimport M$control$LyrCompareControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cplyrcomparecontrol';\nimport M$plugin$Mirrorpanel from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cpmirrorpanel';\nimport M$control$CompareMirrorpanel from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cpmirrorpanelcontrol';\nimport M$plugin$Timeline from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cptimeline';\nimport M$control$TimelineControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cptimelinecontrol';\nimport M$plugin$Transparency from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cptransparency';\nimport M$control$TransparencyControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/cptransparencycontrol';\nimport M$plugin$Lyrdropdown from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/lyrdropdown';\nimport M$control$LyrdropdownControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/facade/js/lyrdropdowncontrol';\nimport M$impl$control$ComparepanelControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/comparepanelcontrol';\nimport M$impl$control$Lyrcomparecontrol from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cplyrcomparecontrol';\nimport M$impl$control$LyrcompareInteraction from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cplyrcompareinteraction';\nimport M$impl$control$CompareMirrorpanel from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cpmirrorpanel';\nimport M$impl$control$TimelineControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cptimelinecontrol';\nimport M$impl$control$TransparencyControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cptransparencycontrol';\nimport M$impl$control$TransparentInteraction from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cptransparentInteraction';\nimport M$impl$control$LyrdropdownControl from '/home/carmenmarquez/Escritorio/nuevaEntrega/API-CNIG/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/lyrdropdowncontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.Comparepanel = M$plugin$Comparepanel;\nwindow.M.control.ComparepanelControl = M$control$ComparepanelControl;\nwindow.M.plugin.LyrCompare = M$plugin$LyrCompare;\nwindow.M.control.LyrCompareControl = M$control$LyrCompareControl;\nwindow.M.plugin.Mirrorpanel = M$plugin$Mirrorpanel;\nwindow.M.control.CompareMirrorpanel = M$control$CompareMirrorpanel;\nwindow.M.plugin.Timeline = M$plugin$Timeline;\nwindow.M.control.TimelineControl = M$control$TimelineControl;\nwindow.M.plugin.Transparency = M$plugin$Transparency;\nwindow.M.control.TransparencyControl = M$control$TransparencyControl;\nwindow.M.plugin.Lyrdropdown = M$plugin$Lyrdropdown;\nwindow.M.control.LyrdropdownControl = M$control$LyrdropdownControl;\nwindow.M.impl.control.ComparepanelControl = M$impl$control$ComparepanelControl;\nwindow.M.impl.control.Lyrcomparecontrol = M$impl$control$Lyrcomparecontrol;\nwindow.M.impl.control.LyrcompareInteraction = M$impl$control$LyrcompareInteraction;\nwindow.M.impl.control.CompareMirrorpanel = M$impl$control$CompareMirrorpanel;\nwindow.M.impl.control.TimelineControl = M$impl$control$TimelineControl;\nwindow.M.impl.control.TransparencyControl = M$impl$control$TransparencyControl;\nwindow.M.impl.control.TransparentInteraction = M$impl$control$TransparentInteraction;\nwindow.M.impl.control.LyrdropdownControl = M$impl$control$LyrdropdownControl;\n"],"sourceRoot":""}