{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/comparepanel.html","webpack:///./src/templates/cpmirrorpanel.html","webpack:///./src/templates/lyrdropdown.html","webpack:///./src/templates/cptimeline.html","webpack:///./src/templates/cplyrcompare.html","webpack:///./src/templates/cptransparency.html","webpack:///./src/impl/ol/js/comparepanelcontrol.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/impl/ol/js/cpmirrorpanel.js","webpack:///./src/impl/ol/js/lyrdropdowncontrol.js","webpack:///./src/facade/js/lyrdropdowncontrol.js","webpack:///./src/facade/js/lyrdropdown.js","webpack:///./src/facade/js/cpmirrorpanelcontrol.js","webpack:///./src/facade/js/cpmirrorpanel.js","webpack:///./src/impl/ol/js/cptimelinecontrol.js","webpack:///./src/facade/js/cptimelinecontrol.js","webpack:///./src/facade/js/cptimeline.js","webpack:///./src/impl/ol/js/cplyrcompareinteraction.js","webpack:///./src/impl/ol/js/cplyrcomparecontrol.js","webpack:///./src/facade/js/cplyrcomparecontrol.js","webpack:///./src/facade/js/cplyrcompare.js","webpack:///./src/impl/ol/js/cptransparentInteraction.js","webpack:///./src/impl/ol/js/cptransparencycontrol.js","webpack:///./src/facade/js/cptransparencycontrol.js","webpack:///./src/facade/js/cptransparency.js","webpack:///./src/facade/js/comparepanelcontrol.js","webpack:///./src/facade/js/comparepanel.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ComparepanelControl","M","impl","Control","map","html","this","olMap","getMapImpl","translations","en","es","getLang","res","language","getTranslation","lang","getValue","keyPath","translation","utils","isNullOrEmpty","console","warn","split","reduce","prev","current","CompareMirrorpanel","getInteractions","forEach","interaction","ol","DoubleClickZoom","dblClickInteraction_","LyrdropdownControl","lyrA","setVisible","layer","values","isUndefined","LyrdropdownImplControl","exception","pluginOnLeft","layers","collapsible","collapsed","layerSelected","template","Promise","success","fail","transformToLayers","capas","legend","options","length","jsonp","vars","tooltip","nolayertext","Handlebars","registerHelper","v1","v2","fn","inverse","compileSync","dialog","error","activate","querySelector","addEventListener","evt","log","target","layerSel","getLayers","filter","removeEffects","getImpl","setLayer","disabled","names","transform","newLayer","layerByObject","includes","isValidLayer","indexOf","urlLayer","toUpperCase","WMS","url","addLayers","WMTS","matrixSet","transparent","displayInLayerSwitcher","queryable","visibility","format","addWMTS","layerByName","getOL3Layer","setTimeout","type","load","facadeLayer_","remove","undefined","control","Lyrdropdown","Plugin","name_","map_","controls_","className","positions","position","Array","isArray","tooltip_","metadata_","api","metadata","control_","push","panel_","ui","Panel","collapsedButtonClass","addControls","addPanels","removeControls","join","deactivate","plugin","MirrorpanelImplControl","modeViz","showCursors","mapL","A","B","C","D","lyrCursor","featureLyrCursor","oldClass","reverseLayout","enabledPlugins","backImgLayersConfig","styleCursor","style","Point","icon","form","CIRCLE","fontsize","radius","rotation","rotate","offset","color","fill","gradientcolor","opacity","defaultBaseLyrs","mirrorLayers","lyDropControlA","lyDropControlB","lyDropControlC","lyDropControlD","createMapContainers","string","parseToHtml","templateVars","htmlText","compile","templateFn","stringToHtml","zindex_","addLayerCursor","templateOptions","titleMirrorpanel","modViz0","modViz1","modViz2","modViz3","modViz4","modViz5","modViz6","modViz7","modViz8","modViz9","querySelectorAll","button","manageVisionPanelByCSSGrid","bigContainer","document","createElement","id","classList","add","mapjsA","getElementById","toString","parentElement","insertBefore","appendChild","mapjsB","mapjsC","mapjsD","oldModeViz","display","createMapObjects","toDelete","getPlugins","removePlugins","addPlugin","refresh","click","mapLyr","pluginFullTOC4map","pluginBackImgLayer4map","pluginVector","container","center","getCenter","projection","getProjection","code","units","zoom","getZoom","setView","getView","listaCtrls","getControls","listaPlugs","itemCtrl","itemPlug","FullTOC","http","https","precharged","Vectors","BackImgLayer","layerId","layerVisibility","columnsNumber","layerOpts","lyDropControl","Vector","Feature","properties","geometry","coordinates","addFeatures","setStyle","setZIndex","on","event","keys","k","setGeometry","coordinate","lienzo","Mirrorpanel","enabledKeyFunctions","MirrorpanelControl","zEvent","ctrlKey","shiftKey","keyStr","altKey","metaKey","removeEventListener","removeMaps","destroyMapsContainer","backImgLayersParams","TimelineControl","TimelineImplControl","running","animationFrame","animation","speed","intervals","interval","copy","getMapLayer","removeLayers","iv","number","tag","service","titleTimeline","play","parseInt","dataset","append","setProperty","slider","setAttribute","e","changeSlider","clearTimeout","playTimeline","elem","left","min","max","step","parseFloat","innerHTML","layerSearch","indexLyr","this_","initialLyr","next","end","clearInterval","Timeline","isString","JSON","parse","replace","removeTimelineLayers","setDefaultLayer","LyrcompareInteraction","Pointer","layers_","swipeClicked","handleDownEvent","setPosition","handleUpEvent","handleMoveEvent","optionsE","pos","opacityVal","OLVersion","layerA","addLayerA","layerB","lyrB","addLayerB","lyrC","lyrD","layerC","addLayerC","layerD","addLayerD","getMap","prerender","Observable","unByKey","postrender","precompose","postcompose","renderSync","setMap","createSwipeControl","precomposeA_","postcomposeA_","precomposeB_","postcomposeB_","precomposeC_","postcomposeC_","precomposeD_","postcomposeD_","setOpacity","staticDivision","updatePosition","comparisonMode","splice","pixel","pointerEvent","buttons","lienzoMapa","getSize","moveSwipeControl","swipeControl","offsetWidth","top","offsetHeight","ctx","context","ratio","frameState","pixelRatio","save","beginPath","rect","canvas","width","clip","restore","height","swipeIcon","b","Lyrcomparecontrol","transparentInteraction_","addInteraction","setComparisonMode","setStaticDivision","setVisibilityLayersCD","addLayer","removeInteraction","removeLayer","unique","a","LyrCompareControl","LyrcompareImplControl","layerSelectedA","layerSelectedB","layerSelectedC","layerSelectedD","defaultLyrA","defaultLyrB","defaultLyrC","defaultLyrD","isLoad","allLayerLoad","setFunctionsAndCompile","idInterval","setInterval","tooltip_vcurtain","tooltip_hcurtain","tooltip_multicurtain","static","dynamic","mixed","opacity_tooltip","static_tooltip","dynamic_tooltip","mixed_tooltip","lyrLeftSelect_tooltip","lyrRightSelect_tooltip","setEventsAndValues","updateControls","activateCurtain","deactivateCurtain","Number","checked","item","lstLayers","checkLayersAreDifferent","info","removeEffectsComparison","effectSelectedCurtain","lyerA","lyerB","lyerC","lyerD","compLyers","Set","activeDefault","selectedIndex","removeEffectsCurtain","removeActivate","activateByMode","swapControl","layerByUrl","LyrCompare","error_","interface","removeCurtainLayers","getLayersNames","TransparentInteraction","precompose_","postcompose_","arc","Math","PI","lineWidth","strokeStyle","stroke","TransparencyControl","setRadius","TransparencyImplControl","transparency","effectSelected","Transparency","isNaN","separatorApiJson","separator","removeTransparencyLayers","ComparepanelImplControl","baseLayers","defaultComparisonMode","defaultComparisonViz","previousComparisonMode","actualComparisonMode","params","mirrorpanelParams","timelineParams","lyrcompareParams","transparencyParams","mirrorpanel","timeline","lyrcompare","panels","plugins","tooltipLyr","tooltipMirrorpanel","tooltipTimeline","tooltipTransparency","addComparators","getBaseLayers","index","_element","element","_className","addButtonEvents","setComparatorsDefaultStyle","deactivateAndActivateMirrorPanel","deactivateAndActivateOtherModes","toggle","contains","Comparepanel","COMP_PLUGIN_NAMES","vertical","defaultCompareModes","defaultCompareMode","defaultCompareViz","stringify","window","M$plugin$Comparepanel","M$control$ComparepanelControl","M$plugin$LyrCompare","M$control$LyrCompareControl","M$plugin$Mirrorpanel","M$control$CompareMirrorpanel","M$plugin$Timeline","M$control$TimelineControl","M$plugin$Transparency","M$control$TransparencyControl","M$plugin$Lyrdropdown","M$control$LyrdropdownControl","M$impl$control$ComparepanelControl","M$impl$control$Lyrcomparecontrol","M$impl$control$LyrcompareInteraction","M$impl$control$CompareMirrorpanel","M$impl$control$TimelineControl","M$impl$control$TransparencyControl","M$impl$control$TransparentInteraction","M$impl$control$LyrdropdownControl"],"mappings":"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","file":"comparepanel.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-comparepanel-container\\\">\\n    <div id='m-cp-mirrorpanel'>\\n        <button id='m-cp-mirrorpanel-btn' class=\\\"cp-button cp-icon\\\" title=\\\"{{translations.tooltipMirrorpanel}}\\\"></button>\\n    </div>\\n    <div id='m-cp-lyrcompare'>\\n        <button id='m-cp-lyrcompare-btn' class=\\\"cp-button cp-columns\\\" title=\\\"{{translations.tooltipLyr}}\\\"></button>\\n    </div>\\n    <div id='m-cp-timeline'>\\n        <button id='m-cp-timeline-btn' class=\\\"cp-button cp-gestion-reloj2\\\" title=\\\"{{translations.tooltipTimeline}}\\\"></button>\\n    </div>\\n    <div id='m-cp-transparency'>\\n        <button id='m-cp-transparency-btn' class=\\\"cp-button cp-transparency-icon\\\" title=\\\"{{translations.tooltipTransparency}}\\\"></button>\\n    </div>\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-mirrorpanel-container\\\">\\n  <div class=\\\"div-m-mirrorpanel-panel\\\">\\n    <div class=\\\"m-mirrorpanel-effect-buttoms\\\">\\n      <button id=\\\"set-mirror-0\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz0}}\\\"><i class=\\\"cp-modeviz0\\\"></i></button>\\n      <button id=\\\"set-mirror-1\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz1}}\\\"><i class=\\\"cp-modeviz1\\\"></i></button>\\n      <button id=\\\"set-mirror-2\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz2}}\\\"><i class=\\\"cp-modeviz2\\\"></i></button>\\n      <button id=\\\"set-mirror-3\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz3}}\\\"><i class=\\\"cp-modeviz3\\\"></i></button>\\n      <button id=\\\"set-mirror-4\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz4}}\\\"><i class=\\\"cp-modeviz4\\\"></i></button>\\n      <button id=\\\"set-mirror-5\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz5}}\\\"><i class=\\\"cp-modeviz5\\\"></i></button>\\n      <button id=\\\"set-mirror-6\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz6}}\\\"><i class=\\\"cp-modeviz6\\\"></i></button>\\n      <button id=\\\"set-mirror-7\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz7}}\\\"><i class=\\\"cp-modeviz7\\\"></i></button>\\n      <button id=\\\"set-mirror-8\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz8}}\\\"><i class=\\\"cp-modeviz8\\\"></i></button>\\n      <button id=\\\"set-mirror-9\\\" class=\\\"big-button\\\" title=\\\"{{translations.modViz9}}\\\"><i class=\\\"cp-modeviz9\\\"></i></button>\\n    </div>\\n    \\n  </div>\\n\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-lyrdropdown\\\">\\n  <div class=\\\"m-lyrdropdown-select\\\" id=\\\"m-lyrcompare-lyrB-cont\\\">\\n    <select id=\\\"m-lyrdropdown-selector\\\">\\n        <option value='None'>{{translations.nolayertext}}</option>\\n        {{#each options}}\\n        <option value='{{this.name}}'>{{this.legend}}</option>\\n        {{/each}}        \\n    </select>\\n    <div class=\\\"m-lyrdropdown-select_arrow\\\">\\n    </div>\\n  </div>\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-timeline-container\\\">\\n    <div class=\\\"div-m-timeline-panel\\\">\\n        <div class=\\\"div-m-timeline-slider\\\">\\n            <input type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"0\\\" step=\\\"any\\\" id=\\\"input-slider\\\"></input>\\n            <div class='slider-tags'></div>\\n        </div>\\n        <div class=\\\"m-timeline-names\\\">\\n            \\n        </div>\\n        <div class=\\\"m-timeline-button\\\">\\n            <button id=\\\"m-timeline-play\\\" class=\\\"cp-control-siguiente\\\" title=\\\"Start / Stop\\\"></button>\\n        </div>\\n    </div>\\n</div>\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-lyrcompare-container\\\">\\n    <div class=\\\"div-m-lyrcompare-panel\\\">\\n        <div class=\\\"m-lyrcompare-effect-buttoms\\\">\\n            <button id=\\\"m-lyrcompare-vcurtain\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_vcurtain}}\\\"><i class=\\\"cp-columns\\\"></i></button>\\n            <button id=\\\"m-lyrcompare-hcurtain\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_hcurtain}}\\\"><i class=\\\"cp-columns-rotate\\\"></i></button>\\n            <button id=\\\"m-lyrcompare-multicurtain\\\" class=\\\"big-buttom\\\" title=\\\"{{translations.tooltip_multicurtain}}\\\"><i class=\\\"cp-th-large\\\"></i></button>\\n        </div>\\n        <div class=\\\"div-m-lyrcompare-transparent-opacity\\\">\\n            <label for=\\\"input-transparent-opacity\\\" title=\\\"{{translations.opacity_tooltip}}\\\">{{translations.opacity}}: </label>\\n            <input type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" value=\\\"100\\\" id=\\\"input-transparent-opacity\\\" title=\\\"{{translations.opacity_tooltip}}\\\"></input>\\n        </div>\\n        <div class=\\\"div-m-lyrcompare-transparent-static\\\">\\n            <input type=\\\"radio\\\" id=\\\"div-m-lyrcompare-transparent-dynamic\\\" name=\\\"staticDivision\\\" value=\\\"0\\\"><label for=\\\"div-m-lyrcompare-transparent-dynamic\\\" title=\\\"{{translations.dynamic_tooltip}}\\\">{{translations.dynamic}}</label>\\n            <input type=\\\"radio\\\" id=\\\"div-m-lyrcompare-transparent-static\\\" name=\\\"staticDivision\\\" value=\\\"1\\\"><label for=\\\"div-m-lyrcompare-transparent-static\\\" title=\\\"{{translations.static_tooltip}}\\\">{{translations.static}}</label>\\n            <input type=\\\"radio\\\" id=\\\"div-m-lyrcompare-transparent-mixed\\\" name=\\\"staticDivision\\\" value=\\\"2\\\"><label for=\\\"div-m-lyrcompare-transparent-mixed\\\" title=\\\"{{translations.mixed_tooltip}}\\\">{{translations.mixed}}</label>\\n        </div>\\n        <hr />\\n        {{#if options}}\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrA-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrA-lbl\\\" for=\\\"m-lyrcompare-lyrA\\\" title=\\\"{{translations.lyrLeftSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrA\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\"></div>\\n            </div>\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrB-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrB-lbl\\\" for=\\\"m-lyrcompare-lyrB\\\" title=\\\"{{translations.lyrRightSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrB\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\">\\n                </div>\\n            </div>\\n            <!--Multi Curtain-->\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrC-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrC-lbl\\\" for=\\\"m-lyrcompare-lyrC\\\" title=\\\"{{translations.lyrLeftSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrC\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\"></div>\\n            </div>\\n            <div class=\\\"m-lyrcompare-select\\\" id=\\\"m-lyrcompare-lyrD-cont\\\">\\n                <label id=\\\"m-lyrcompare-lyrD-lbl\\\" for=\\\"m-lyrcompare-lyrD\\\" title=\\\"{{translations.lyrRightSelect_tooltip}}\\\"></label>\\n                <select disabled id=\\\"m-lyrcompare-lyrD\\\">\\n                    {{#each options}}\\n                        <option value='{{this.name}}'>{{this.legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-lyrcompare-select_arrow\\\">\\n                </div>\\n            </div>\\n        {{/if}}\\n    </div>\\n</div>\\n\";","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-transparency-container\\\">\\n    <div class=\\\"div-m-transparency-panel\\\">\\n        <div class=\\\"div-m-transparency-transparent-radius\\\">\\n            <p>{{translations.radius}}:</p>\\n            <input type=\\\"range\\\" min=\\\"30\\\" max=\\\"200\\\" value=\\\"100\\\" id=\\\"input-transparent-radius\\\"></input>\\n        </div>\\n        {{#if options}}\\n            <div class=\\\"m-transparency-select\\\">\\n                <p>{{translations.layers}}: </p>\\n                <select disabled>\\n                    {{#each options}}\\n                        <option value=\\\"{{name}}\\\">{{legend}}</option>\\n                    {{/each}}\\n                </select>\\n                <div class=\\\"m-transparency-select_arrow\\\">\\n                </div>\\n            </div>\\n        {{/if}}\\n    </div>\\n</div>\\n\";","/**\n * @module M/impl/control/ComparepanelControl\n */\n\nexport default class ComparepanelControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n}\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  return translations[lang];\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\n * @module M/impl/control/CompareMirrorpanel\n */\nexport default class CompareMirrorpanel extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // obtengo la interacción por defecto del dblclick para manejarla\n    const olMap = map.getMapImpl();\n    olMap.getInteractions().forEach((interaction) => {\n      if (interaction instanceof ol.interaction.DoubleClickZoom) {\n        this.dblClickInteraction_ = interaction;\n      }\n    });\n\n    super.addTo(map, html);\n  }\n}\n","/**\n * @module M/impl/control/LyrdropdownControl\n */\n\n// import LayerdropInteraction from 'impl/LayerdropInteraction';\n\nexport default class LyrdropdownControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n\n\n  addTo(map, html) {\n    // obtengo la interacción por defecto del dblclick para manejarla\n    /*const olMap = map.getMapImpl();\n    olMap.getInteractions().forEach((interaction) => {\n      if (interaction instanceof ol.interaction.DoubleClickZoom) {\n        this.dblClickInteraction_ = interaction;\n      }\n    });*/\n\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    // super addTo - don't delete\n    super.addTo(map, html);\n  }\n\n\n  /**\n   * Effects on the layer\n   *\n   * @public\n   * @function\n   * @param { M.Layer } layer layer to which to assign an effect\n   * @api stable\n   */\n  setLayer(lyrA) {\n    lyrA.setVisible(true);\n    //lyrA.setZIndex(4500);\n\n    //this.olMap.addLayer(lyrA); //e2m: Important control number interactions this.olMap.interactions.array_\n    //const olMap = map.getMapImpl();\n\n    //e2m:Recorrer las interacciones cargadas\n    /*this.olMap.getInteractions().forEach((interaction) => {\n      console.log(interaction);\n    });\n    console.log('Número de interacciones:' + this.olMap.interactions.array_.length);*/\n\n    /*\n    this.layerdropInteraction_ = new LayerdropInteraction({\n      lyrA,\n    });\n\n    this.olMap.addInteraction(this.layerdropInteraction_);\n    */\n  }\n\n  /**\n   * Set layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer layer to assign effect\n   * @api stable\n   */\n  addLayer(layer) {\n    //this.layerdropInteraction_.addLayer(layer.getImpl().getOL3Layer());\n  }\n\n/**\n   * Remove effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    // this.olMap.removeInteraction(this.layerdropInteraction_);\n  }\n\n\n  /**\n   * Remove layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer to remove\n   * @api stable\n   */\n  removeLayer(layer) {\n    // this.layerdropInteraction_.removeLayer(layer.getImpl().getOL3Layer());\n  }\n\n\n}\n","/**\n * @module M/control/LyrdropdownControl\n */\n\nimport LyrdropdownImplControl from 'impl/lyrdropdowncontrol';\nimport template from 'templates/lyrdropdown';\nimport { getValue } from './i18n/language'; //e2m: Multilanguage support. Alias -> getValue is too generic\n\nexport default class LyrdropdownControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(LyrdropdownImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new LyrdropdownImplControl();\n    super(impl, 'Lyrdropdown');\n\n    //Getting Plugin Parameters\n\n    /**\n     * Position plugin\n     * @public\n     * @type {String}\n     */\n    this.pluginOnLeft = values.pluginOnLeft;\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.layers = values.layers;\n\n    /**\n     * Collapsible\n     * @public\n     * @public {boolean}\n     */\n    this.collapsible = values.collapsible;\n\n    /**\n     * Collapsed\n     * @public\n     * @public {boolean}\n     */\n    this.collapsed = values.collapsed;\n\n    /**\n     * layerSelected\n     * @public\n     * @type { M.layer }\n     */\n    this.layerSelected = null;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    this.map = map;\n    return new Promise((success, fail) => {\n      //e2m: Transform stringLyr definition to apicnigLyr\n      this.layers = this.transformToLayers(this.layers);\n      //e2m: getting layers array with name and legend for plugin\n      let capas = this.layers.map((layer) => {\n        return layer instanceof Object ? {  name: layer.name, legend: layer.legend } : { name: layer, legend: layer };\n      });\n      //e2m: adding language dictionary\n      let options = '';\n      if (capas.length > 1) {\n        options = {\n          jsonp: true,\n          vars: {\n            options: capas,\n            translations: {\n              tooltip: getValue('tooltip'),\n              nolayertext: getValue('nolayertext'),\n            } ,\n          },\n        };\n      }\n\n      //e2m: config a helper in Handlebars for embedding conditionals in template\n      Handlebars.registerHelper('ifCond', (v1, v2, options) => {\n        return v1 === v2 ? options.fn(this) : options.inverse(this);\n      });\n\n      this.template = M.template.compileSync(template, options);\n      //Si no hay capas a las que aplicar la transparencia, el plugin no funciona e informa\n      if (this.layers.length === 0) {\n        M.dialog.error(getValue('no_layers_plugin'));\n      } else {\n        //M.dialog.info(getValue('title'));\n        this.activate();\n      }\n\n      //Events on template component\n      this.template.querySelector('#m-lyrdropdown-selector').addEventListener('change', (evt) => {\n        console.log(\"Entro:\" + evt.target.value);\n        const layerSel = this.map.getLayers().filter((layer) => {\n          return layer.name === evt.target.value;\n        });\n        //Get selected layer from layer array\n        console.log(this.layerSelected);\n        this.layerSelected.setVisible(false);\n        this.removeEffects();\n        if (layerSel.length === 0){\n          return;//No layer option is selected\n        }\n\n        this.layerSelected = layerSel[0];\n        this.getImpl().setLayer(this.layerSelected);\n      });\n\n      // Añadir código dependiente del DOM\n      success(this.template);\n    });\n  }\n\n  /**\n   * This function is called on the control activation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activate() {\n   if (this.layerSelected === null) this.layerSelected = this.layers[0];\n   let names = this.layers.map((layer) => {\n     return layer instanceof Object ? { name: layer.name } : { name: layer };\n   });\n\n   if (names.length >= 1) {\n     this.template.querySelector('#m-lyrdropdown-selector').disabled = false;\n   }\n  }\n\n  /**\n   * This function is called on the control deactivation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivate() {\n    console.log('deactivate');\n    if (this.layerSelected === null) this.layerSelected = this.layers[0];\n    let names = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name } : { name: layer };\n    });\n\n    this.removeEffects();\n    this.layerSelected.setVisible(false);\n    if (names.length >= 1) {\n      this.template.querySelector('#m-lyrdropdown-selector').disabled = true;\n    }\n  }\n\n  /**\n   * This function gets activation button\n   *\n   * @public\n   * @function\n   * @param {HTML} html of control\n   * @api stable\n   */\n  getActivationButton(html) {\n    return html.querySelector('.m-lyrdropdown button');\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    console.log('removeEffects');\n    this.getImpl().removeEffects();\n  }\n\n  /**\n   * Transform StringLayers to Mapea M.Layer\n   *\n   * WMTS*http://www.ign.es/wmts/pnoa-ma?*OI.OrthoimageCoverage*EPSG:25830*PNOA\n   * WMS*IGN*http://www.ign.es/wms-inspire/ign-base*IGNBaseTodo\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n /**\n   * Transform StringLayers to Mapea M.Layer\n   * Entra tantas veces como mapas lienzo activos haya.\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n  transformToLayers(layers) {\n\n    const transform = layers.map((layer) => {\n      let newLayer = null;\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          if (urlLayer[0].toUpperCase() === 'WMS') {\n            newLayer = new M.layer.WMS({\n              url: urlLayer[2],\n              name: urlLayer[3],\n              legend: urlLayer[1],\n            });\n\n            if (this.map.getLayers().filter(l => newLayer.name.includes(l.name)).length > 0) {\n              newLayer = this.map.getLayers().filter(l => newLayer.name.includes(l.name))[0];\n              newLayer.legend = urlLayer[1] || newLayer.name;\n            } else {\n              this.map.addLayers(newLayer);\n            }\n          } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n\n            /*newLayer = new M.layer.WMTS({\n              url: urlLayer[2] + '?',\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              matrixSet: urlLayer[4],\n              transparent: true,              // Es una capa Overlay -> zIndex > 0\n              displayInLayerSwitcher: false,  // No aparece en el TOC\n              queryable: false,               // No GetFeatureInfo\n              visibility: false,              // Visible a false por defecto\n              format: urlLayer[5],\n            }), this.map.addWMTS(newLayer);*/\n\n            newLayer = new M.layer.WMTS({\n              url: urlLayer[2],\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              matrixSet: urlLayer[4],\n              transparent: true,              // Es una capa Overlay -> zIndex > 0\n              displayInLayerSwitcher: false,  // No aparece en el TOC\n              queryable: false,               // No GetFeatureInfo\n              visibility: false,              // Visible a false por defecto\n              format: urlLayer[5],\n            });\n            this.map.addWMTS(newLayer);\n            //this.map.addLayers(newLayer);\n          }\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n          newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n        newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n      }\n\n      if (newLayer !== null) {\n        if (newLayer.getImpl().getOL3Layer() === null) {\n          setTimeout(() => {\n            if (newLayer.type === 'WMS' || newLayer.type === 'WMTS') {\n              newLayer.load = true;\n            } else if (newLayer.type === 'WMTS') {\n              newLayer.facadeLayer_.load = true;\n            }\n          }, 1000);\n        } else {\n          newLayer.load = true;\n        }\n\n        newLayer.displayInLayerSwitcher = false;\n        newLayer.setVisible(false);\n        return newLayer;\n      } else {\n        this.layers.remove(layer);\n      }\n    }, this);\n\n    return (transform[0] === undefined) ? [] : transform;\n  }\n \n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return {Boolean}\n   */\n  isValidLayer(layer) {\n    return layer.type === 'WMTS' || layer.type === 'WMS';\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   */\n  equals(control) {\n    return control instanceof LyrdropdownControl;\n  }\n}\n","/**\n * @module M/plugin/Lyrdropdown\n */\n\nimport 'assets/css/lyrdropdown';\nimport LyrdropdownControl from './lyrdropdowncontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';   //e2m: Multilanguage support\n\nexport default class Lyrdropdown extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'lyrdropdown';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-lyrdropdown';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * Posible values: TR | TL | BL | BR\n     * @type {String}\n     */\n    const positions = ['TR', 'TL', 'BL', 'BR'];\n    this.position = positions.includes(options.position) ? options.position : 'TR';\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = options.collapsed;\n    if (this.collapsed === undefined) this.collapsed = true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible;\n    if (this.collapsible === undefined) this.collapsible = true;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    this.layers = [];\n    if (options.layers === undefined) {\n      M.dialog.error('No se ha especificado una capa válida sobre la que aplicar el efecto');\n    } else {\n      if (Array.isArray(options.layers)) {\n        this.layers = options.layers;\n      } else {\n        this.layers = options.layers.split(',');\n      }\n    }\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    const pluginOnLeft = !!(['TL', 'BL'].includes(this.position));\n    this.control_ = new LyrdropdownControl({\n      pluginOnLeft,\n      collapsible:  this.collapsible,\n      collapsed:  this.collapsed,\n      layers: this.layers,\n    });\n\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    // panel para agregar control - no obligatorio\n    this.panel_ = new M.ui.Panel('panelLyrdropdown', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position], //M.ui.position.TR\n      collapsedButtonClass: 'g-cartografia-flecha-izquierda',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.collapsible,this.collapsed,this.layers] = [null, null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  getMetadata(){\n    return this.metadata_;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.position}*${this.collapsible}*${this.collapsed}*${this.layers.join(',')}`;\n  }\n\n    /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This\n   function compare\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Lyrdropdown;\n  }\n\n}\n","/**\n * @module M/control/CompareMirrorpanel\n */\n\nimport MirrorpanelImplControl from 'impl/cpmirrorpanel';\nimport template from 'templates/cpmirrorpanel';\nimport { getValue } from './i18n/language';\nimport Lyrdropdown from './lyrdropdown';  //e2m: reference LayerDropDown control\n\nexport default class CompareMirrorpanel extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(MirrorpanelImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new MirrorpanelImplControl();\n    super(impl, 'Mirrorpanel');\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n\n    /**\n     * Visual mode\n     * @private\n     * @type {Number}\n     */\n    this.modeViz = values.modeViz;\n\n    /**\n     * Mirror maps with plugins\n     * @private\n     * @type {boolean}\n     */\n    this.showCursors = values.showCursors;\n\n    /**\n     * Defining mirror maps variables\n     */\n    this.mapL = { A: null, B: null, C: null, D: null }\n    this.lyrCursor = { A: null, B: null, C: null, D: null }\n    this.featureLyrCursor = { A: null, B: null, C: null, D: null }\n    this.oldClass = '';\n    this.reverseLayout = values.reverseLayout;\n    this.enabledPlugins = values.enabledPlugins;\n    this.backImgLayersConfig = values.backImgLayersConfig;\n    /**\n     * Defining cursor style\n     */\n    this.styleCursor = new M.style.Point({\n      icon: {\n        form: M.style.form.CIRCLE,\n        fontsize: 0.5,\n        radius: 5,\n        rotation: 0,\n        rotate: false,\n        offset: [0, 0],\n        color: 'black',\n        fill: 'red',\n        gradientcolor: '#088A85',\n        opacity: 0.8,\n      },\n    });\n\n    /**\n     * Default layers for mirror maps\n     * @public\n     * @public {Array}\n     */\n    this.defaultBaseLyrs = values.defaultBaseLyrs;\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.mirrorLayers = values.mirrorLayers;\n\n    /**\n     * Define the control for managing layers\n     *\n     */\n    this.lyDropControlA = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false, // El botón para desplegar/replegar el plugin no aparece (false) o sí aparece(true)\n      collapsed: true,    // El panel del plugin se muestra desplegado (false) o replegado (true)\n      layers: this.defaultBaseLyrs,\n    });\n\n    this.lyDropControlB = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false,\n      collapsed: true,\n      layers: this.defaultBaseLyrs,\n    });\n\n    this.lyDropControlC = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false,\n      collapsed: true,\n      layers: this.defaultBaseLyrs,\n    });\n\n    this.lyDropControlD = new Lyrdropdown({\n      position: 'TL',\n      collapsible: false,\n      collapsed: true,\n      layers: this.defaultBaseLyrs,\n    });\n\n    this.createMapContainers();\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    if (!M.template.compileSync) {\n      M.template.compileSync = (string, options) => {\n        let templateCompiled;\n        let templateVars = {};\n        let parseToHtml;\n        if (!M.utils.isUndefined(options)) {\n          templateVars = M.utils.extends(templateVars, options.vars);\n          parseToHtml = options.parseToHtml;\n        }\n\n        const templateFn = Handlebars.compile(string);\n        const htmlText = templateFn(templateVars);\n        if (parseToHtml !== false) {\n          templateCompiled = M.utils.stringToHtml(htmlText);\n        } else {\n          templateCompiled = htmlText;\n        }\n\n        return templateCompiled;\n      };\n    }\n\n    this.mapL['A'] = map;\n    if (this.mirrorLayers.length > 0) {\n      this.mapL['A'].addLayers(this.mirrorLayers);\n      this.mapL['A'].getLayers().forEach((l) => {\n        if (l.zindex_ !== 0) { l.setVisible(false); }\n      });\n\n      this.mapL['A'].addLayers(this.defaultBaseLyrs[0]);\n    }\n\n    if (this.showCursors) {\n      this.addLayerCursor('A');\n    }\n\n    return new Promise((success, fail) => {\n      let templateOptions = '';\n      templateOptions = {\n        jsonp: true,\n        vars: {\n          translations: {\n            titleMirrorpanel: getValue('titleMirrorpanel'),\n            modViz0: getValue('modViz0'),\n            modViz1: getValue('modViz1'),\n            modViz2: getValue('modViz2'),\n            modViz3: getValue('modViz3'),\n            modViz4: getValue('modViz4'),\n            modViz5: getValue('modViz5'),\n            modViz6: getValue('modViz6'),\n            modViz7: getValue('modViz7'),\n            modViz8: getValue('modViz8'),\n            modViz9: getValue('modViz9'),\n          },\n        },\n      };\n\n      this.template = M.template.compileSync(template, templateOptions);\n\n      // Button's click events\n      this.template.querySelectorAll('button[id^=\"set-mirror-\"]').forEach((button, modeViz) => {\n        button.addEventListener('click', evt => {\n          this.manageVisionPanelByCSSGrid(modeViz);\n        })\n      });\n\n      success(this.template);\n      // Apply default vision\n      this.manageVisionPanelByCSSGrid(this.modeViz);\n    });\n  }\n\n  /**\n   * This function is called on the control activation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activate() {\n    super.activate();\n  }\n\n  /**\n   * This function is called on the control deactivation\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivate() {\n    this.manageVisionPanelByCSSGrid(0);\n  }\n\n  /**\n   * Initial configurations for applying CSS grid.\n   *\n   */\n  createMapContainers() {\n    const bigContainer = document.createElement('div');\n    bigContainer.id = 'lienzo';\n    bigContainer.classList.add('mirrorpanel-grid');\n\n    const mapjsA = document.getElementById('mapjs') || document.getElementById('map');\n    this.oldClass = mapjsA.classList.toString();\n    mapjsA.parentElement.insertBefore(bigContainer, mapjsA);\n    mapjsA.classList.add('mirror1');\n    bigContainer.appendChild(mapjsA);\n\n    const mapjsB = document.createElement('div');\n    mapjsB.id = 'mapjsB';\n    mapjsB.classList.add('mirror2');\n    bigContainer.appendChild(mapjsB);\n\n    const mapjsC = document.createElement('div');\n    mapjsC.id = 'mapjsC';\n    mapjsC.classList.add('mirror3');\n    bigContainer.appendChild(mapjsC);\n\n    const mapjsD = document.createElement('div');\n    mapjsD.id = 'mapjsD';\n    mapjsD.classList.add('mirror4');\n    bigContainer.appendChild(mapjsD);\n  }\n\n  /**\n   * This function shows/hides panel for differents viz options.\n   * The mirror maps are launched from here\n   *\n   */\n  manageVisionPanelByCSSGrid(modeViz) {\n    let oldModeViz = this.modeViz;\n    let map0 = document.getElementById('mapjs') || document.getElementById('map');\n    map0.style.display = 'none';\n    document.getElementById('mapjsB').style.display = 'none';\n    document.getElementById('mapjsC').style.display = 'none';\n    document.getElementById('mapjsD').style.display = 'none';\n    document.getElementById('lienzo').classList.remove('reverseMirror');\n    this.template.querySelector('#set-mirror-' + oldModeViz).classList.remove('buttom-pressed');\n    for (let i = 0; i < 10; i++) {\n      document.getElementById('lienzo').classList.remove('modeViz' + i);\n    }\n\n    document.getElementById('lienzo').classList.add('modeViz' + modeViz);\n    if (this.reverseLayout) document.getElementById('lienzo').classList.add('reverseMirror');\n    //Create map objects by modeviz\n    if ([1, 2].includes(modeViz)) {\n      if (this.mapL['B'] === null) {\n        this.createMapObjects('B');//Create MapB\n      }\n    }\n\n    if ([3, 7, 8, 9].includes(modeViz)) {\n      if (this.mapL['B'] === null) {\n        this.createMapObjects('B');//Create MapB\n      }\n\n      if (this.mapL['C'] === null) {\n        this.createMapObjects('C');//Create MapC\n      }\n    }\n\n    if ([4, 5, 6].includes(modeViz)) {\n      if (this.mapL['B'] === null) {\n        this.createMapObjects('B');//Create MapB\n      }\n\n      if (this.mapL['C'] === null) {\n        this.createMapObjects('C');//Create MapC\n      }\n\n      if (this.mapL['D'] === null) {\n        this.createMapObjects('D');//Create MapD\n      }\n    }\n\n    if (modeViz === 0) {\n      const toDelete = this.map_.getPlugins().filter((p) => {\n        return p.name === 'lyrdropdown';\n      });\n\n      if (toDelete.length > 0) {\n        this.map_.removePlugins(toDelete);\n      }\n    } else {\n      //Añado aquí el DropDownLayer del mapa principal\n      this.lyDropControlA = new Lyrdropdown({\n        position: 'TL',\n        collapsible: false,\n        collapsed: true,\n        layers: this.defaultBaseLyrs,\n      });\n\n      this.mapL['A'].addPlugin(this.lyDropControlA);\n    }\n\n    this.modeViz = modeViz;\n    this.template.querySelector('#set-mirror-' + modeViz).classList.add('buttom-pressed');\n    this.map_.refresh();\n    if (this.mapL['B'] !== null) { this.mapL['B'].refresh(); }\n    if (this.mapL['C'] !== null) { this.mapL['C'].refresh(); }\n    if (this.mapL['D'] !== null) { this.mapL['D'].refresh(); }\n    document.querySelector('#m-cp-mirrorpanel > button').click();\n  }\n\n  /**\n   * Create mirror map object synchro with the main map\n   */\n  createMapObjects(mapLyr) {\n    let pluginFullTOC4map = null;\n    let pluginBackImgLayer4map = null;\n    let pluginVector = null;\n\n\n    console.log(this.enabledPlugins);\n    this.mapL[mapLyr] = M.map({\n      container: 'mapjs' + mapLyr,\n      center: this.map_.getCenter(),\n      projection: this.map_.getProjection().code + '*' + this.map_.getProjection().units,\n      zoom: this.map_.getZoom(),\n    });\n\n    this.mapL[mapLyr].getMapImpl().setView(this.map_.getMapImpl().getView());\n\n    if (this.enabledPlugins) {\n      const listaCtrls = this.map_.getControls();\n      const listaPlugs = this.map_.getPlugins();\n      console.log(listaPlugs);\n      console.log(listaCtrls);\n\n      listaCtrls.forEach((itemCtrl) => {\n        if (itemCtrl.name === 'backgroundlayers'){\n          this.mapL[mapLyr].addControls(['backgroundlayers']);\n        }\n\n      });\n\n\n      listaPlugs.forEach((itemPlug) => {\n        if (itemPlug.metadata_) {\n          //FullTOC\n          if (itemPlug.metadata_.name === \"FullTOC\") {\n            pluginFullTOC4map = new M.plugin.FullTOC({\n              position: itemPlug.position,\n              collapsed: itemPlug.collapsed,\n              collapsible: itemPlug.collapsible,\n              http: itemPlug.http,\n              https: itemPlug.https,\n              precharged: itemPlug.precharged\n            });\n          }\n          //Vector\n          if (itemPlug.metadata_.name === \"Vectors\") {\n            pluginVector = new M.plugin.Vectors({\n              position: itemPlug.position,\n              collapsed: itemPlug.collapsed,\n              collapsible: itemPlug.collapsible,              \n            });\n          }\n          if (itemPlug.metadata_.name === \"backimglayer\") {\n            pluginBackImgLayer4map = new M.plugin.BackImgLayer({\n              //layerId: itemPlug.layerId,\n              layerId: mapLyr === 'A' ? 0 : mapLyr === 'B' ? 1 : mapLyr == 'C' ? 2 : 3,\n              layerVisibility:  itemPlug.layerVisibility,\n              columnsNumber: itemPlug.columnsNumber,\n              layerOpts: itemPlug.layerOpts\n            });\n            //pluginBackImgLayer4map = new M.plugin.BackImgLayer(this.backImgLayersConfig);\n          }\n\n        }\n      });\n    }\n\n    if (this.lyDropControl !== null){\n      if (mapLyr === 'B'){\n        this.mapL[mapLyr].addPlugin(this.lyDropControlB);\n      }\n\n      if (mapLyr === 'C'){\n        this.mapL[mapLyr].addPlugin(this.lyDropControlC);\n      }\n\n      if (mapLyr === 'D'){\n        this.mapL[mapLyr].addPlugin(this.lyDropControlD);\n      }\n    }\n\n    // Añadimos plugins secundarios\n    if (pluginFullTOC4map !== null) {\n      this.mapL[mapLyr].addPlugin(pluginFullTOC4map);\n    } \n\n    if (pluginVector !== null) {\n      this.mapL[mapLyr].addPlugin(pluginVector);\n    } \n\n    if (pluginBackImgLayer4map !== null) {\n      this.mapL[mapLyr].addPlugin(pluginBackImgLayer4map);\n    } \n\n\n    if (this.showCursors) { this.addLayerCursor(mapLyr); }\n    this.mapL[mapLyr].refresh();\n  }\n\n  /**\n   * Adding a layer for cursor on Map\n   */\n  addLayerCursor(mapLyr) {\n    // Cursor Layer\n    this.lyrCursor[mapLyr] = new M.layer.Vector({\n      name: 'Coordenadas centro ' + mapLyr,\n    }, { displayInLayerSwitcher: false });\n\n    this.featureLyrCursor[mapLyr] = new M.Feature('Center' + mapLyr, {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: this.mapL[mapLyr].getCenter(),\n      },\n    });\n\n    this.lyrCursor[mapLyr].addFeatures([this.featureLyrCursor[mapLyr]]);\n    this.lyrCursor[mapLyr].setStyle(this.styleCursor);\n    this.lyrCursor[mapLyr].setZIndex(5000);\n    this.mapL[mapLyr].addLayers(this.lyrCursor[mapLyr]);\n    this.mapL[mapLyr].getMapImpl().on('pointermove', (event) => {\n      this.lyrCursor[mapLyr].setVisible(false);\n      Object.keys(this.featureLyrCursor).forEach(k => {\n        if (k != mapLyr) {\n          if (this.featureLyrCursor[k] !== null) {\n            this.lyrCursor[k].setVisible(true);\n            this.featureLyrCursor[k].setGeometry({\n              type: 'Point',\n              coordinates: event.coordinate,\n            });\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeMaps() {\n    this.mapL['B'] = null;\n    this.mapL['C'] = null;\n    this.mapL['D'] = null;\n  }\n\n  destroyMapsContainer() {\n    this.manageVisionPanelByCSSGrid(0);\n    // Remove mirrors containers\n    document.getElementById('mapjsB').remove();\n    document.getElementById('mapjsC').remove();\n    document.getElementById('mapjsD').remove();\n    // Take the main map out of the container\n    const lienzo = document.getElementById('lienzo');\n    const mapjsA = document.querySelector('.mirror1');\n    lienzo.parentElement.insertBefore(mapjsA, lienzo);\n    mapjsA.style.display = 'block';\n    mapjsA.classList.remove('mirror1');\n    mapjsA.classList = this.oldClass;\n    // Load the main container\n    document.getElementById('lienzo').remove();\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   */\n  equals(control) {\n    return control instanceof CompareMirrorpanel;\n  }\n}\n","/**\n * @module M/plugin/Mirrorpanel\n */\n\nimport 'assets/css/cpmirrorpanel';\nimport MirrorpanelControl from './cpmirrorpanelcontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';   //e2m: Multilanguage support\n\nexport default class Mirrorpanel extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'mirrorpanel';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-mirrorpanel';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * @type {String}\n     */\n    this.position = options.position;\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = true;\n\n    /**\n     * Modo de visualización\n     * Value: number in range 0 - 9\n     * @type {number}\n     * @public\n     */\n    this.modeViz = options.modeViz;\n    if (this.modeViz === undefined) this.modeViz = 0;\n\n\n    /**\n     * Opción de situar el mapa principal siempre a la derecha\n     * False: se sitúa a la izquierda. True: se sitúa a la derecha\n     * @type {boolean}\n     * @public\n     */\n    this.reverseLayout = options.reverseLayout;\n    if (this.reverseLayout === undefined) this.reverseLayout = false;\n\n    /**\n     * Opción de situar el mapa principal siempre a la derecha\n     * False: se sitúa a la izquierda. True: se sitúa a la derecha\n     * @type {boolean}\n     * @public\n     */\n     this.enabledPlugins = options.enabledPlugins;\n     if (this.enabledPlugins === undefined) this.enabledPlugins = false;\n\n\n    /**\n     * Enabled key functions\n     * @type {boolean}\n     * @public\n     */\n    this.enabledKeyFunctions = options.enabledKeyFunctions;\n    if (this.enabledKeyFunctions === undefined) this.enabledKeyFunctions = true;\n\n    /**\n     * Enabled synchro cursors\n     * @type {boolean}\n     * @public\n     */\n    this.showCursors = options.showCursors;\n    if (this.showCursors === undefined) this.showCursors = true;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    this.mirrorLayers = [];\n    if (options.mirrorLayers !== undefined) {\n      if (Array.isArray(options.mirrorLayers)) {\n        this.mirrorLayers = options.mirrorLayers;\n      } else {\n        this.mirrorLayers = options.mirrorLayers.split(',');\n      }\n    }\n\n    /**\n     * Layer base for the three mirror maps\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    this.defaultBaseLyrs = [];\n    if (options.defaultBaseLyrs !== undefined) {\n      if (Array.isArray(options.defaultBaseLyrs)) {\n        this.defaultBaseLyrs = options.defaultBaseLyrs;\n      } else {\n        this.defaultBaseLyrs = options.defaultBaseLyrs.split(',');\n      }\n    }\n\n\n    this.backImgLayersConfig = options.backImgLayersConfig;\n\n    /**\n     * Show interface\n     *@public\n     *@type{boolean}\n     */\n    this.interface = options.interface === undefined ? true : options.interface;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n\n   \n    const pluginOnLeft = !!(['TL', 'BL'].includes(this.position));\n    const values = {\n      pluginOnLeft,\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      modeViz: this.modeViz,\n      reverseLayout: this.reverseLayout,\n      enabledPlugins: this.enabledPlugins,\n      showCursors: this.showCursors,\n      mirrorLayers: this.mirrorLayers,\n      defaultBaseLyrs: this.defaultBaseLyrs,\n      backImgLayersConfig: this.backImgLayersConfig,\n    };\n\n    this.control_ = new MirrorpanelControl(values);\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelMirrorpanel', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position],\n      modeViz: this.modeViz,\n      showCursors: this.showCursors,\n      className: this.interface ? 'm-plugin-panelMirrorpanel' : 'm-plugin-panelMirrorpanel hidden',\n      collapsedButtonClass: 'mirrorpanel-icon',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n\n    // Keybindings for Ctrl + Shift + (F1-F8) / ESC\n    document.addEventListener('keydown', (zEvent) => {\n      if (!this.enabledKeyFunctions) {\n        return;\n      }\n\n      for (let i = 0; i < 10; i++) {\n        if (zEvent.ctrlKey && zEvent.shiftKey && zEvent.key === 'F' + (i + 1)) {  // case sensitive\n          this.control_.manageVisionPanelByCSSGrid(i);\n        }\n      }\n\n      const keyStr = ['Control', 'Shift', 'Alt', 'Meta'].includes(zEvent.key) ? '' : zEvent.key;\n      const combinedKeys = (zEvent.ctrlKey ? 'Control ' : '') +\n        (zEvent.shiftKey ? 'Shift ' : '') +\n        (zEvent.altKey ? 'Alt ' : '') +\n        (zEvent.metaKey ? 'Meta ' : '') + keyStr;\n      if (combinedKeys === 'Escape') {\n        this.control_.manageVisionPanelByCSSGrid(0);\n      }\n    });\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    document.removeEventListener('keydown', (zEvent) => { });\n    this.control_.removeMaps();\n    this.control_.destroyMapsContainer();\n    this.map_.removeControls([this.control_]);\n    [\n      this.control_, \n      this.panel_, \n      this.map_, \n      this.collapsible, \n      this.collapsed, \n      this.modeViz, \n      this.enabledPlugins, \n      this.enabledKeyFunctions, \n      this.showCursors, \n      this.mirrorLayers, \n      this.defaultBaseLyrs, \n      this.backImgLayersParams, \n      this.interface] =  [null, null, null, null, null, null, null, null, null, null,null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n}\n","/**\n * @module M/impl/control/TimelineControl\n */\n\nexport default class TimelineControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n}\n","/**\n * @module M/control/TimelineControl\n */\n\nimport TimelineImplControl from 'impl/cptimelinecontrol';\nimport template from 'templates/cptimeline';\nimport { getValue } from './i18n/language';\n\nexport default class TimelineControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(options) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(TimelineImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new TimelineImplControl();\n    super(impl, 'Timeline');\n    this.running = false;\n    this.animationFrame = 0;\n    this.animation = options.animation;\n    this.speed = options.speed;\n    this.intervals = options.intervals;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n\n    this.map = map;\n    return new Promise((success, fail) => {\n      let intervals = [];\n      this.intervals.forEach((interval, k) => {\n        const layer = this.transformToLayers(interval[2]);\n        const copy = this.getMapLayer(layer);\n        if (copy !== undefined) {\n          this.map.removeLayers(copy);\n        }\n\n        this.map.addLayers(layer);\n        let iv = {\n          number: k,\n          name: interval[0],\n          tag: interval[1],\n          service: layer\n        };\n\n        intervals.push(iv);\n        console.log(\"Cargo capa\");\n      });\n\n      this.intervals = intervals;\n      this.template = M.template.compileSync(template, {\n        vars: {\n          translations: {\n            titleTimeline: getValue('titleTimeline'),\n            play: getValue('play'),\n          },\n        },\n      });\n\n      this.intervals.forEach((interval, k) => {\n        let tag = document.createElement('div');\n        if (k != 0 && k != this.intervals.length - 1 && k != parseInt(this.intervals.length / 2)) {\n          tag.dataset.tag = '';\n        } else {\n          tag.dataset.tag = interval.tag;\n        }\n\n        this.template.querySelector('.slider-tags').append(tag);\n      });\n\n      this.template.querySelector('.div-m-timeline-panel').style.setProperty('--num', this.intervals.length);\n      const slider = this.template.querySelector('#input-slider');\n      slider.setAttribute('max', intervals.length - 1);\n      slider.addEventListener('input', (e) => this.changeSlider(slider));\n      slider.addEventListener('change', (e) => {\n        document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n        document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n        clearTimeout(this.running);\n        this.running = false;\n      });\n      const play = this.template.querySelector('#m-timeline-play');\n      play.addEventListener('click', (e) => {\n        //e.target.classList.remove('cp-control-siguiente');\n        //e.target.classList.add('cp-control-pausa');\n        this.running = !this.running;\n        if (this.running){\n          console.log(`ENNNVIIIO -> ${this.running}`);\n          this.playTimeline(this.running);\n        }\n        \n        \n      });\n      success(this.template);\n\n    });\n  }\n\n\n  /**\n   * Transform StringLayers to Mapea M.Layer\n   *\n   * WMTS*http://www.ign.es/wmts/pnoa-ma?*OI.OrthoimageCoverage*EPSG:25830*PNOA\n   * WMS*IGN*http://www.ign.es/wms-inspire/ign-base*IGNBaseTodo\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n  transformToLayers(layer) {\n    let newLayer = null;\n    if (!(layer instanceof Object)) {\n      if (layer.indexOf('*') >= 0) {\n        const urlLayer = layer.split('*');\n        if (urlLayer[0].toUpperCase() === 'WMS') {\n          newLayer = new M.layer.WMS({\n            url: urlLayer[2],\n            name: urlLayer[3]\n          });\n        } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n          newLayer = new M.layer.WMTS({\n            url: urlLayer[2],\n            name: urlLayer[3],\n            legend: urlLayer[1],\n            matrixSet: urlLayer[4],\n            format: urlLayer[5],\n          });\n        }\n      } else {\n        const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n        newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n      }\n    } else if (layer instanceof Object) {\n      const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n      newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n    }\n\n    if (newLayer !== null) {\n      newLayer.displayInLayerSwitcher = false;\n      newLayer.setVisible(false);\n      return newLayer\n    } else {\n      this.map.removeLayers(layer);\n    }\n  }\n\n  \n\n  /** This function change layers and show layer name when slider moves\n   *\n   * @public\n   * @function\n   * @api stable\n   * @return\n   */\n  changeSlider(elem) {\n    \n    document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n    const left = (((elem.value - elem.min) / (elem.max - elem.min)) * ((256 - 5) - 5)) + 5;\n    document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 'px');\n    if(this.animation || this.intervals[0].name !== ''){\n      document.querySelector('.m-timeline-names').style.display = 'block';\n    }\n    if (this.animation) {\n      document.querySelector('.m-timeline-button').style.display = 'block';\n    }\n\n    let step = parseFloat(elem.value);\n    this.intervals.forEach((interval) => {\n      this.getMapLayer(interval.service).setVisible(false);\n      document.querySelector('.m-timeline-names').innerHTML = '';\n    });\n    if (step % 1 === 0) {\n      document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 20 + 'px');\n      this.getMapLayer(this.intervals[step].service).setVisible(true);\n      document.querySelector('.m-timeline-names').innerHTML = this.intervals[step].name;\n      document.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this.intervals[step].tag + '\"')\n      if (this.intervals[step].tag !== '') {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '1');\n      } else {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n      }\n    } else {\n      this.getMapLayer(this.intervals[parseInt(step)].service).setVisible(true);\n      this.getMapLayer(this.intervals[parseInt(step) + 1].service).setVisible(true);\n      if (this.intervals[parseInt(step)].tag !== '' && this.intervals[parseInt(step) + 1].tag !== '') {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 'px');\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '1');\n        document.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this.intervals[parseInt(step)].tag + ' - ' + this.intervals[parseInt(step) + 1].tag + '\"');\n        document.querySelector('.m-timeline-names').innerHTML = this.intervals[parseInt(step)].name + ' y ' + this.intervals[parseInt(step) + 1].name;\n      } else if (this.intervals[parseInt(step)].tag === '' && this.intervals[parseInt(step) + 1].tag === '') {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n      } else {\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 20 + 'px');\n        document.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '10');\n        document.querySelector('.m-timeline-names').innerHTML = this.intervals[parseInt(step)].name + this.intervals[parseInt(step) + 1].name;\n        document.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this.intervals[parseInt(step)].tag + this.intervals[parseInt(step) + 1].tag + '\"');\n      }\n    }\n\n  }\n\n  /** This function search a layer in the map\n   *\n   * @public\n   * @function\n   * @api stable\n   * @return\n   */\n  getMapLayer(layerSearch) {\n    return this.map.getLayers().filter(layer => layer.getImpl().legend === layerSearch.getImpl().legend)[0];\n  }\n\n  /** This function set default layer shown when plugin is activated\n   * \n   * @param {integer} indexLyr /** Index layer in intervals array\n   * @returns \n   */\n  setDefaultLayer(indexLyr) {\n\n    const this_ = this;\n    const html = this_.template;\n    const slider = html.querySelector('#input-slider');\n    const initialLyr = indexLyr<this_.intervals.length ? indexLyr:0;\n\n    slider.value = initialLyr;\n    html.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n    const left = (((slider.value - slider.min) / (slider.max - slider.min)) * ((256 - 5) - 5)) + 5;\n    html.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 'px');\n    if(this_.animation || this_.intervals[0].name !== ''){\n      html.querySelector('.m-timeline-names').style.display = 'block';\n    }\n    if (this_.animation) {\n      html.querySelector('.m-timeline-button').style.display = 'block';\n    }\n\n    let step = parseFloat(slider.value);\n    this_.intervals.forEach((interval) => {\n      this_.getMapLayer(interval.service).setVisible(false);\n      html.querySelector('.m-timeline-names').innerHTML = '';\n    });\n\n    html.querySelector('.div-m-timeline-slider').style.setProperty('--left', left + 20 + 'px');\n    this_.getMapLayer(this_.intervals[step].service).setVisible(true);\n    html.querySelector('.m-timeline-names').innerHTML = this_.intervals[step].name;\n    html.querySelector('.div-m-timeline-panel').style.setProperty('--valor', '\"' + this_.intervals[step].tag + '\"')\n    if (this_.intervals[step].tag !== '') {\n      html.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '1');\n    } else {\n      html.querySelector('.div-m-timeline-slider').style.setProperty('--opacity', '0');\n    }\n\n\n  }\n\n  /** This function make the play animation\n   *\n   * @public\n   * @function\n   * @api stable\n   * @return\n   */\n  playTimeline(next) {\n\n    const start = 0;\n    const end = this.intervals.length - 1;\n    const slider = document.querySelector('#input-slider');\n    let step = parseInt(slider.value);\n    if (this.running) {\n      document.querySelector('.m-timeline-button button').classList.remove('cp-control-siguiente');\n      document.querySelector('.m-timeline-button button').classList.add('cp-control-pausa');\n\n    }else{\n      document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n      document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n      clearTimeout(this.running);\n    }\n\n    if (!next) {\n      if (step > start && step < end && this.running) {\n        this.running = false;\n        return;\n      }\n      if (step > end) {\n        step = start;\n      }\n    }\n\n    if (step >= end) {\n      slider.value = 0;\n      this.changeSlider(slider);\n      document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n      document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n      this.running = false;\n      return;\n    }\n\n    if (step < start) {\n      step = start;\n    }\n\n    if (!this.running){\n      return;\n    }\n    slider.value = parseFloat(slider.value) + 1;\n    this.changeSlider(slider);\n    this.animationFrame = setTimeout((e) => this.playTimeline(true), this.speed * 1000);\n  }\n\n  /**\n   * This function remove the timeline layers\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeTimelineLayers() {\n    clearInterval(this.running);\n    this.intervals.forEach((interval) => {\n      this.map.removeLayers(this.getMapLayer(interval.service));\n    })\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    clearInterval(this.running);\n    this.running = false;\n    document.querySelector('.m-timeline-button button').classList.add('cp-control-siguiente');\n    document.querySelector('.m-timeline-button button').classList.remove('cp-control-pausa');\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    clearInterval(this.running);\n    this.running = false;\n    this.intervals.forEach((interval) => {\n      this.getMapLayer(interval.service).setVisible(false);\n    })\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof TimelineControl;\n  }\n}\n","/**\n * @module M/plugin/Timeline\n */\nimport 'assets/css/cptimeline';\nimport TimelineControl from './cptimelinecontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class Timeline extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'timeline';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-timeline';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * @type {String}\n     */\n    this.position = options.position;\n\n    /**\n     * Intervals\n     * @public\n     * Value: Array with each interval attributes [name, tag, service]\n     * @type {String}\n     */\n    if (options !== undefined) {\n      if (M.utils.isString(options.intervals)) {\n        this.intervals = JSON.parse(options.intervals.replace(/!!/g, '[').replace(/¡¡/g, ']'));\n      } else if (M.utils.isArray(options.intervals)) {\n        this.intervals = options.intervals;\n      } else {\n        M.dialog.error(getValue('intervals_error'));\n      }\n    }\n\n    /**\n     * Animation of the timeline\n     * @public\n     * Value: true / false\n     * @type {boolean}\n     */\n    this.animation = options.animation;\n    if (this.animation === undefined) this.animation = true;\n\n    /**\n     * Speed of animation\n     * @public\n     * Value: 1 - 100\n     * @type {number}\n     */\n    this.speed = parseFloat(options.speed) || 1;\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    this.control_ = new TimelineControl({\n      intervals: this.intervals,\n      animation: this.animation,\n      speed: this.speed,\n    });\n\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelTimeline', {\n      collapsible: true,\n      position: M.ui.position[this.position],\n      className: this.className,\n      collapsedButtonClass: 'timeline-gestion-reloj2',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n    \n  }\n\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.control_.removeTimelineLayers();\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.layers, this.radius] = [null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * This function set default layer shown when plugin is activated\n   *\n   * @function\n   * @public\n   * @api\n   */\n   setDefaultLayer(indexLyr) {\n    this.control_.setDefaultLayer(indexLyr);\n  }\n\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This\n   function compare\n   if pluging recieved by param is instance of M.plugin.Timeline\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Timeline;\n  }\n}\n","/**\n * @module M/impl/control/LyrcompareInteraction\n\n */\nexport default class LyrcompareInteraction extends ol.interaction.Pointer {\n  /**\n   * @classdesc\n   * Main constructor of the LyrcompareInteraction.\n   *\n   * @constructor\n   * @extends {ol.interaction.Pointer}\n   * @api stable\n   */\n  constructor(options) {\n    super(options);\n    this.layers_ = [];\n    this.swipeClicked = false;\n    ol.interaction.Pointer.call(this, {\n      handleDownEvent: this.setPosition,\n      handleUpEvent: () => this.swipeClicked = false,\n      handleMoveEvent: this.setPosition,\n    });\n\n    // Default options\n    const optionsE = options || {};\n\n    this.pos = false;\n    this.opacityVal = (optionsE.opacityVal || 100);\n    this.OLVersion = \"OL6\";\n\n    const layerA = [optionsE.lyrA].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n    this.addLayerA(layerA);\n\n    const layerB = [optionsE.lyrB].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n    this.addLayerB(layerB);\n\n    if (optionsE.lyrC !== undefined && optionsE.lyrD !== undefined) {\n      const layerC = [optionsE.lyrC].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n      this.addLayerC(layerC);\n\n      const layerD = [optionsE.lyrD].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n      this.addLayerD(layerD);\n    }\n\n    \n\n  }\n\n  /** Set the map > start postcompose\n   */\n  setMap(map) {\n\n    \n    if (this.getMap()) {\n      // e2m: Por aquí pasamos al desactivar el control\n      for (let i = 0; i < this.layers_.length; i += 1) {\n        if (this.OLVersion === \"OL6\"){\n          if (this.layers_[i].prerender) ol.Observable.unByKey(this.layers_[i].prerender);\n          if (this.layers_[i].postrender) ol.Observable.unByKey(this.layers_[i].postrender);\n          this.layers_[i].prerender = this.layers_[i].postrender = null;\n        }else{\n          if (this.layers_[i].precompose) ol.Observable.unByKey(this.layers_[i].precompose);\n          if (this.layers_[i].postcompose) ol.Observable.unByKey(this.layers_[i].postcompose);\n          this.layers_[i].precompose = this.layers_[i].postcompose = null;\n        }\n      }\n      this.getMap().renderSync();\n    }\n    \n    ol.interaction.Pointer.prototype.setMap.call(this, map);\n    if (map) {\n      this.createSwipeControl();\n      if (this.OLVersion === \"OL6\"){\n        this.layers_[0].prerender = this.layers_[0].on('prerender', this.precomposeA_.bind(this));\n        this.layers_[0].postrender = this.layers_[0].on('postrender', this.postcomposeA_.bind(this));\n        this.layers_[1].prerender = this.layers_[1].on('prerender', this.precomposeB_.bind(this));\n        this.layers_[1].postrender = this.layers_[1].on('postrender', this.postcomposeB_.bind(this));\n        if (this.layers_[2] !== undefined && this.layers_[3] !== undefined) {\n          this.layers_[2].prerender = this.layers_[2].on('prerender', this.precomposeC_.bind(this));\n          this.layers_[2].postrender = this.layers_[2].on('postrender', this.postcomposeC_.bind(this));\n          this.layers_[3].prerender = this.layers_[3].on('prerender', this.precomposeD_.bind(this));\n          this.layers_[3].postrender = this.layers_[3].on('postrender', this.postcomposeD_.bind(this));\n        }\n      }else{\n        this.layers_[0].precompose = this.layers_[0].on('precompose', this.precomposeA_.bind(this));\n        this.layers_[0].postcompose = this.layers_[0].on('postcompose', this.postcomposeA_.bind(this));\n        this.layers_[1].precompose = this.layers_[1].on('precompose', this.precomposeB_.bind(this));\n        this.layers_[1].postcompose = this.layers_[1].on('postcompose', this.postcomposeB_.bind(this));\n        if (this.layers_[2] !== undefined && this.layers_[3] !== undefined) {\n          this.layers_[2].precompose = this.layers_[2].on('precompose', this.precomposeC_.bind(this));\n          this.layers_[2].postcompose = this.layers_[2].on('postcompose', this.postcomposeC_.bind(this));\n          this.layers_[3].precompose = this.layers_[3].on('precompose', this.precomposeD_.bind(this));\n          this.layers_[3].postcompose = this.layers_[3].on('postcompose', this.postcomposeD_.bind(this));\n        }\n      }\n\n      map.renderSync();\n    }\n  }\n\n  /**\n   * Set opacity level\n   *\n   * @param {integer} opacityVal\n   */\n  setOpacity(opacityVal) {\n    this.opacityVal = opacityVal;\n    if (this.getMap()) {\n      for (let i = 0; i < this.layers_.length; i += 1) {\n        this.layers_[i].setOpacity(this.opacityVal / 100);\n      }\n    }\n  }\n\n  /**\n   * Set param staticDivision\n   *\n   * @param {integer} staticDivision\n   */\n  setStaticDivision(staticDivision) {\n    this.staticDivision = staticDivision;\n    this.updatePosition();\n  }\n\n  /**\n   * Set param comparisonMode\n   *\n   * @param {integer} comparisonMode\n   */\n  setComparisonMode(comparisonMode) {\n    this.comparisonMode = comparisonMode;\n    this.updatePosition();\n  }\n\n  /**\n   * Set Visibility on layers C & D\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  setVisibilityLayersCD() {\n    if ((this.layers_[2] !== undefined && this.layers_[3] !== undefined) && (this.comparisonMode === 1 || this.comparisonMode === 2)) {\n      this.layers_[2].setVisible(false);\n      this.layers_[3].setVisible(false);\n    } else if (this.layers_[2] !== undefined && this.layers_[3] !== undefined) {\n      this.layers_[2].setVisible(true);\n      this.layers_[3].setVisible(true);\n    }\n  }\n\n  /**\n   * Add Layer A to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerA(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeA_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeA_.bind(this));\n      this.getMap().renderSync();\n    }\n\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   * Add Layer B to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerB(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeB_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeB_.bind(this));\n      this.getMap().renderSync();\n    }\n\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   * Add Layer C to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerC(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeC_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeC_.bind(this));\n      this.getMap().renderSync();\n    }\n\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   * Add Layer C to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayerD(layers) {\n    if (!(layers instanceof Array)) layers = [layers];\n    const l = { layer: layers[0] };\n    if (this.getMap()) {\n      l.prerender = layers[0].on('prerender', this.precomposeD_.bind(this));\n      l.postrender = layers[0].on('postrender', this.postcomposeD_.bind(this));\n      this.getMap().renderSync();\n    }\n\n    this.layers_.push(layers[0]);\n  }\n\n  /**\n   *  Remove a layer to clip\n   *\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  removeLayer(layers) {\n    if (!(layers instanceof Array)) {\n      layers = [layers];\n    }\n\n    for (let i = 0; i < layers.length; i += 1) {\n      let k;\n      for (k = 0; k < this.layers_.length; k += 1) {\n        if (this.layers_[k] === layers[i]) {\n          break;\n        }\n      }\n\n      if (k !== this.layers_.length && this.getMap()) {\n        if (this.layers_[k].prerender) ol.Observable.unByKey(this.layers_[k].prerender);\n        if (this.layers_[k].postrender) ol.Observable.unByKey(this.layers_[k].postrender);\n        this.layers_.splice(k, 1);\n        this.getMap().renderSync();\n      }\n    }\n  }\n\n  /**\n   *  Set position of the clip\n   *\n   * @param {ol.Pixel|ol.MapBrowserEvent}\n   */\n  setPosition(e) {\n    if ((this.staticDivision === 2 && this.swipeClicked) || this.staticDivision !== 2) {\n      if (e.pixel) {\n        this.pos = e.pixel;\n      } else if (e && e instanceof Array) {\n        this.pos = e;\n      } else {\n        e = [-10000000, -10000000];\n      }\n\n      if (this.staticDivision === 2 && e.pointerEvent.buttons !== 1) {\n        const lienzoMapa = this.map_.getSize();\n        this.pos = [lienzoMapa[0] / 2, lienzoMapa[1] / 2];\n        this.swipeClicked = false;\n      }\n\n      if (this.getMap()) this.getMap().renderSync();\n      this.moveSwipeControl();\n    }\n  }\n\n  /**\n   *  Update position of the clip\n   *\n   */\n  updatePosition() {\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl) {\n      if (this.comparisonMode === 1) {\n        swipeControl.classList = 'lyrcompare-swipe-control vertical' + (this.staticDivision === 1 ? ' static' : ' dynamic');\n      } else if (this.comparisonMode === 2) {\n        swipeControl.classList = 'lyrcompare-swipe-control horizontal' + (this.staticDivision === 1 ? ' static' : ' dynamic');\n      } else if (this.comparisonMode === 3) {\n        swipeControl.classList = 'lyrcompare-swipe-control vertical horizontal' + (this.staticDivision === 1 ? ' static' : ' dynamic');\n      }\n    }\n\n    if (this.getMap()) {\n      const lienzoMapa = this.map_.getSize();\n      swipeControl.style.left = (lienzoMapa[0] / 2) - (swipeControl.offsetWidth / 2) + 'px';\n      swipeControl.style.top = (lienzoMapa[1] / 2) - (swipeControl.offsetHeight / 2) + 'px';\n      this.pos = [lienzoMapa[0] / 2, lienzoMapa[1] / 2];\n      this.swipeClicked = false;\n      this.getMap().renderSync();\n    }\n  }\n\n  /* @private\n     */\n  precomposeA_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    let margenClip = 0; //Stroke size in pixels.\n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 1) {\n        ctx.rect(0, 0, lienzoMapa[0] / 2 * ratio - margenClip * ratio, lienzoMapa[1]); //e2m: left fixed\n      } else if (this.comparisonMode === 2) {\n        ctx.rect(0, 0, lienzoMapa[0], lienzoMapa[1] * ratio / 2 - margenClip * ratio);//e2m: up fixed\n      } else if (this.comparisonMode === 3) {\n        ctx.rect(0, 0, lienzoMapa[0] / 2 * ratio - margenClip * ratio, lienzoMapa[1] / 2);//e2m: up&left fixed\n      }\n    } else {\n      if (this.comparisonMode === 1) {\n        ctx.rect(0, 0, this.pos[0] - margenClip * ratio, lienzoMapa[1]); //e2m: left dynamic\n      } else if (this.comparisonMode === 2) {\n        ctx.rect(0, 0, ctx.canvas.width, this.pos[1] * ratio - margenClip * ratio);  //e2m: up dynamic\n      } else if (this.comparisonMode === 3) {\n        ctx.rect(0, 0, this.pos[0] - margenClip * ratio, this.pos[1] - margenClip * ratio);  //e2m: up&left dynamic\n      }\n    }\n\n    /**\n     *\n     * e2m: con esto podemos pintar una línea de color para contornear la capa. Pero no queda bien\n     *\n     */\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeA_(e) {\n    e.context.restore();\n  }\n\n  /* @private\n   */\n  precomposeB_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    let margenClip = 0; //Stroke size in pixels.\n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 1) {\n        ctx.rect(lienzoMapa[0] * ratio / 2 + margenClip * ratio, 0, ctx.canvas.width - lienzoMapa[0] * ratio / 2, lienzoMapa[1]); //e2m: Right fixed\n      } else if (this.comparisonMode === 2) {\n        ctx.rect(0, lienzoMapa[1] * ratio / 2 + margenClip * ratio, ctx.canvas.width, ctx.canvas.height - lienzoMapa[1] * ratio / 2); //e2m: Down fixed\n      } else if (this.comparisonMode === 3) {\n        ctx.rect(lienzoMapa[0] * ratio / 2, 0, ctx.canvas.width - lienzoMapa[0] * ratio / 2, lienzoMapa[1] / 2); //e2m: up&right fixed\n      }\n    } else {\n      if (this.comparisonMode === 1) {\n        ctx.rect(this.pos[0], 0, lienzoMapa[0] - this.pos[0], lienzoMapa[1]); //e2m: Right dynamic\n      } else if (this.comparisonMode === 2) {\n        ctx.rect(0, this.pos[1], ctx.canvas.width, ctx.canvas.height - this.pos[1]); //e2m: Down dynamic\n      } else if (this.comparisonMode === 3) {\n        //ctx.rect(this.pos[0], 0, lienzoMapa[0] - this.pos[0], lienzoMapa[1]); //e2m: split screen three. maybe\n        ctx.rect(this.pos[0], 0, lienzoMapa[0] - this.pos[0], this.pos[1]); //e2m: up&right dynamic\n      }\n    }\n\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeB_(e) {\n    e.context.restore();\n  }\n\n  precomposeC_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    let margenClip = 0; //Stroke size in pixels.\n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 3) {\n        ctx.rect(0, lienzoMapa[1] * ratio / 2, lienzoMapa[0] / 2 * ratio - margenClip * ratio, lienzoMapa[1]);  //e2m: down&left fixed\n      }\n    } else {\n      if (this.comparisonMode === 3) {\n        ctx.rect(0, this.pos[1] * ratio, this.pos[0] * ratio - margenClip * ratio, (lienzoMapa[1] - this.pos[1]) * ratio - margenClip * ratio);  //e2m: down&left dynamic\n      }\n    }\n\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeC_(e) {\n    e.context.restore();\n  }\n\n  precomposeD_(e) {\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    const lienzoMapa = this.map_.getSize();\n    let margenClip = 0; //Stroke size in pixels.\n    //e2m: Canvas size --> lienzoMapa\n    //e2m: Mouse coordinates --> this.pos\n    ctx.save();\n    ctx.beginPath();\n    if (this.staticDivision === 1) {\n      if (this.comparisonMode === 3) {\n        ctx.rect(lienzoMapa[0] * ratio / 2, lienzoMapa[1] * ratio / 2, ctx.canvas.width * ratio / 2 - margenClip * ratio, ctx.canvas.height * ratio / 2 - margenClip * ratio); //e2m: down&right fixed\n      }\n    } else {\n      if (this.comparisonMode === 3) {\n        ctx.rect(this.pos[0] * ratio, this.pos[1] * ratio, (ctx.canvas.width - this.pos[0]) * ratio - margenClip * ratio, (ctx.canvas.height - this.pos[1]) * ratio - margenClip * ratio); //e2m: down&right dynamic\n      }\n    }\n\n    if (margenClip > 0) {\n      ctx.lineWidth = 2 * margenClip * ratio;\n      ctx.strokeStyle = 'rgba(0, 102, 204, 0.9)';\n      ctx.stroke();\n    }\n\n    ctx.clip();\n  }\n\n  /* @private\n   */\n  postcomposeD_(e) {\n    e.context.restore();\n  }\n  /**\n   * Create the swipe indicator\n   *\n   */\n  createSwipeControl() {\n    let swipeControl;\n    let swipeIcon;\n    if (document.querySelector('.lyrcompare-swipe-control') === null) {\n      swipeControl = document.createElement('div');\n      swipeControl.classList.add('lyrcompare-swipe-control');\n      swipeIcon = document.createElement('div');\n      swipeIcon.classList.add('control-icon');\n      swipeControl.append(swipeIcon);\n      document.querySelector('.ol-overlaycontainer-stopevent').append(swipeControl);\n    } else {\n      swipeControl = document.querySelector('.lyrcompare-swipe-control');\n      swipeIcon = document.querySelector('.lyrcompare-swipe-control .control-icon');\n    }\n\n    swipeControl.addEventListener('mousedown', () => this.swipeClicked = true);\n    swipeControl.addEventListener('mouseup', () => this.swipeClicked = false);\n    swipeControl.addEventListener('touchstart', () => this.swipeClicked = true);\n    swipeControl.addEventListener('touchend', () => this.swipeClicked = false);\n    this.updatePosition();\n  }\n\n  /**\n  * Move the swipe indicator\n  *\n  */\n  moveSwipeControl() {\n    const lienzoMapa = this.map_.getSize();\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl && this.getMap()) {\n      if (this.staticDivision === 0 || this.staticDivision === 2) {\n        if (this.comparisonMode === 1) {\n          swipeControl.style.top = (lienzoMapa[1] / 2) - (swipeControl.offsetHeight / 2) + 'px';\n          swipeControl.style.left = (this.pos[0]) - (swipeControl.offsetWidth / 2) + 'px';\n        } else if (this.comparisonMode === 2) {\n          swipeControl.style.left = (lienzoMapa[0] / 2) - (swipeControl.offsetWidth / 2) + 'px';\n          swipeControl.style.top = (this.pos[1]) - (swipeControl.offsetHeight / 2) + 'px';\n        } else if (this.comparisonMode === 3) {\n          swipeControl.style.left = (this.pos[0]) - (swipeControl.offsetWidth / 2) + 'px';\n          swipeControl.style.top = (this.pos[1]) - (swipeControl.offsetHeight / 2) + 'px';\n        }\n      } else {\n        swipeControl.style.left = (lienzoMapa[0] / 2) - (swipeControl.offsetWidth / 2) + 'px';\n        swipeControl.style.top = (lienzoMapa[1] / 2) - (swipeControl.offsetHeight / 2) + 'px';\n      }\n    }\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(b) {\n    super.setActive(b);\n  }\n}\n","/**\n * @module M/impl/control/Lyrcomparecontrol\n */\nimport LyrcompareInteraction from 'impl/cplyrcompareinteraction';\n\n\nexport default class Lyrcomparecontrol extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // super addTo - don't delete\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n\n  /**\n   * Effects on the layer\n   *\n   * @public\n   * @function\n   * @param { M.Layer } layer layer to which to assign an effect\n   * @param { Number } opacityVal nivel de opacidad\n   * @api stable\n   */\n  effectSelectedCurtain(lyrA, lyrB, lyrC, lyrD, opacityVal, staticDivision, comparisonMode) {\n    lyrA.setVisible(true);\n    lyrB.setVisible(true);\n    this.transparentInteraction_ = new LyrcompareInteraction({\n      opacityVal,\n      lyrA,\n      lyrB,\n      lyrC,\n      lyrD\n    });\n    \n    this.olMap.addInteraction(this.transparentInteraction_);\n    this.setOpacity(opacityVal);\n    this.setComparisonMode(comparisonMode);\n    this.setStaticDivision(staticDivision);\n  }\n\n  /**\n   * Layer visibility\n   *\n   * @public\n   * @function\n   * @param { Number } opacityVal opacidad de las capas\n   * @api stable\n   */\n  setVisibilityLayersCD() {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setVisibilityLayersCD();\n  }\n\n  /**\n   * Layers opacity\n   *\n   * @public\n   * @function\n   * @param { Number } opacityVal opacidad de las capas\n   * @api stable\n   */\n  setOpacity(opacityVal) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setOpacity(opacityVal);\n  }\n\n  /**\n     * Layers comparison mode\n     *\n     * @public\n     * @function\n     * @param { Number } comparisonMode opacidad de las capas\n     * @api stable\n     */\n  setComparisonMode(comparisonMode) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setComparisonMode(comparisonMode);\n    this.setVisibilityLayersCD();\n  }\n\n  /**\n   * Set staticDivision\n   *\n   * @public\n   * @function\n   * @param { Number } staticDivision establece el tipo de división\n   * @api stable\n   */\n\n  setStaticDivision(staticDivision) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setStaticDivision(staticDivision);\n  }\n\n  /**\n   * Set layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer layer to assign effect\n   * @api stable\n   */\n  addLayer(layer) {\n    this.transparentInteraction_.addLayer(layer.getImpl().getOL3Layer());\n  }\n\n  /**\n   * Remove effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffectsCurtain() {\n    this.olMap.removeInteraction(this.transparentInteraction_);\n  }\n\n  /**\n   * Remove layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer to remove\n   * @api stable\n   */\n  removeLayer(layer) {\n    this.transparentInteraction_.removeLayer(layer.getImpl().getOL3Layer());\n  }\n}\n","/**\n * @module M/control/LyrCompareControl\n */\n\nimport LyrcompareImplControl from 'impl/cplyrcomparecontrol';\nimport template from 'templates/cplyrcompare';\nimport { getValue } from './i18n/language';\n\nArray.prototype.unique = (a) => {\n  return () => {\n    return this.filter(a)\n  };\n}; ((a, b, c) => {\n  return c.indexOf(a, b + 1) < 0\n});\n\nexport default class LyrCompareControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(LyrcompareImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new LyrcompareImplControl();\n    super(impl, 'LyrCompare');\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.layers = values.layers;\n\n    /**\n     * Nivel de opacidad\n     * @private\n     * @type {Number}\n     */\n    this.opacityVal = values.opacityVal;\n\n    /**\n     * Layer selected A\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedA = null;\n\n    /**\n     * Layer selected B\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedB = null;\n\n    /**\n     * Layer selected C\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedC = null;\n\n    /**\n     * Layer selected D\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelectedD = null;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n\n    /**\n     * Static Division selected\n     * @private\n     * @type {Number}\n     */\n    this.staticDivision = values.staticDivision;\n\n    /**\n     * Opacity Value\n     * @private\n     * @type {Number}\n     */\n    this.opacityVal = values.opacityVal;\n\n    /**\n     * Comparison mode\n     * @private\n     * @type {Number}\n     */\n    this.comparisonMode = values.comparisonMode;\n\n    /**\n     * Layer A default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrA = values.defaultLyrA;\n\n    /**\n     * Layer B default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrB = values.defaultLyrB;\n\n    /**\n     * Layer C default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrC = values.defaultLyrC;\n\n    /**\n     * Layer D default\n     * @private\n     * @type {Number}\n     */\n    this.defaultLyrD = values.defaultLyrD;\n\n    /** Show interface\n     *@public\n     *@type{boolean}\n     */\n    this.interface = values.interface;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n\n    this.map = map;\n    return new Promise((success, fail) => {\n      this.layers = this.transformToLayers(this.layers);\n      if (this.layers.length >= 2) {\n        if (this.comparisonMode === 3 && this.layers.length < 4) {\n          M.dialog.error(getValue('no_layers_plugin'), 'lyrcompare');\n          this.comparisonMode = 0;\n        }\n\n        let isLoad = this.allLayerLoad();\n        if (isLoad) {\n          this.setFunctionsAndCompile(success);\n        } else {\n          const idInterval = setInterval(() => {\n            isLoad = this.allLayerLoad();\n            if (isLoad) {\n              clearInterval(idInterval);\n              this.setFunctionsAndCompile(success);\n            }\n          }, 200);\n        }\n      } else {\n        M.dialog.error(getValue('no_layers_plugin'), 'lyrcompare');\n      }\n    });\n  }\n\n  /**\n   * This function set plugin behavior and compile template\n   *\n   * @public\n   * @function\n   * @param { function } success to promise\n   * @api stable\n   */\n  setFunctionsAndCompile(success) {\n    let layers = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name, legend: layer.legend} : { name: layer, legend: layer };\n    });\n\n    const options = {\n      jsonp: true,\n      vars: {\n        options: layers,\n        comparisonMode: this.comparisonMode,\n        translations: {\n          tooltip_vcurtain: getValue('tooltip_vcurtain'),\n          tooltip_hcurtain: getValue('tooltip_hcurtain'),\n          tooltip_multicurtain: getValue('tooltip_multicurtain'),\n          opacity: getValue('opacity'),\n          static: getValue('static'),\n          dynamic: getValue('dynamic'),\n          mixed: getValue('mixed'),\n          layer: getValue('layer'),\n          opacity_tooltip: getValue('opacity_tooltip'),\n          static_tooltip: getValue('static_tooltip'),\n          dynamic_tooltip: getValue('dynamic_tooltip'),\n          mixed_tooltip: getValue('mixed_tooltip'),\n          lyrLeftSelect_tooltip: getValue('lyrLeftSelect_tooltip'),\n          lyrRightSelect_tooltip: getValue('lyrRightSelect_tooltip')\n        }\n      }\n    }\n\n    //config a helper in Handlebars for embedding conditionals in template\n    Handlebars.registerHelper('ifCond', (v1, v2, options) => {\n      return v1 === v2 ? options.fn(this) : options.inverse(this);\n    });\n\n    //template with default options\n    this.template = M.template.compileSync(template, options);\n    this.setEventsAndValues();\n    this.updateControls();\n\n    if (this.layers.length === 0) {\n      M.dialog.error(getValue('no_layers_plugin'));\n    } else {\n      //e2m: Toogle activate/desactivate vcurtain, hcurtain, multicurtain ---> comparisonMode = 1, 2, 3\n      this.template.querySelectorAll('button[id^=\"m-lyrcompare-\"]').forEach((button, i) => {\n        button.addEventListener('click', evt => {\n          if (this.comparisonMode === 0) {\n            this.comparisonMode = i + 1;\n            this.activateCurtain();\n            return;\n          } else if (this.comparisonMode === i + 1) {\n            this.comparisonMode = 0;\n            this.deactivateCurtain();\n            return;\n          } else {\n            //Cambiamos de modo de visualización sin apagar/encender la interacción\n            this.comparisonMode = i + 1;\n            this.updateControls();\n            this.getImpl().setComparisonMode(this.comparisonMode);\n          }\n        })\n      });\n    }\n\n    return success(this.template);\n  }\n\n  /**\n   * This function set events and values to template\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  setEventsAndValues() {\n    //opacity control\n    this.template.querySelector('#input-transparent-opacity').value = this.opacityVal;\n    this.template.querySelector('#input-transparent-opacity').addEventListener('input', (evt) => {\n      this.opacityVal = Number(evt.target.value);\n      this.getImpl().setOpacity(this.opacityVal);\n    });\n\n    //division selector\n    if (this.staticDivision === 1) {\n      this.template.querySelector('#div-m-lyrcompare-transparent-static').checked = true;\n    } else if (this.staticDivision === 0) {\n      this.template.querySelector('#div-m-lyrcompare-transparent-dynamic').checked = true;\n    } else {\n      this.template.querySelector('#div-m-lyrcompare-transparent-mixed').checked = true;\n    }\n\n    this.template.querySelector('#div-m-lyrcompare-transparent-dynamic').addEventListener('change', (evt) => {\n      this.staticDivision = Number(evt.target.value);\n      this.getImpl().setStaticDivision(this.staticDivision);\n    });\n\n    this.template.querySelector('#div-m-lyrcompare-transparent-static').addEventListener('change', (evt) => {\n      this.staticDivision = Number(evt.target.value);\n      this.getImpl().setStaticDivision(this.staticDivision);\n    });\n\n    this.template.querySelector('#div-m-lyrcompare-transparent-mixed').addEventListener('change', (evt) => {\n      this.staticDivision = Number(evt.target.value);\n      this.getImpl().setStaticDivision(this.staticDivision);\n    });\n\n    this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').forEach(item => {\n      item.addEventListener('change', evt => {\n        const layer = this.layers.filter((layer) => {\n          return layer.name === evt.target.value\n        });\n\n        let lstLayers = [];\n        if (item.id === 'm-lyrcompare-lyrA') {\n          lstLayers = [layer[0].name, this.layerSelectedB.name, this.layerSelectedC.name, this.layerSelectedD.name];\n        } else if (item.id === 'm-lyrcompare-lyrB') {\n          lstLayers = [this.layerSelectedA.name, layer[0].name, this.layerSelectedC.name, this.layerSelectedD.name];\n        } else if (item.id === 'm-lyrcompare-lyrC') {\n          lstLayers = [this.layerSelectedA.name, this.layerSelectedB.name, layer[0].name, this.layerSelectedD.name];\n        } else if (item.id === 'm-lyrcompare-lyrD') {\n          lstLayers = [this.layerSelectedA.name, this.layerSelectedB.name, this.layerSelectedC.name, layer[0].name];\n        }\n\n        //e2m: de esta forma pasamos los parámetros en forma de array\n        if (this.checkLayersAreDifferent(...lstLayers) === false) {\n          M.dialog.info(getValue('advice_sameLayer'));\n          if (item.id === 'm-lyrcompare-lyrA') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedA.name\n          } else if (item.id === 'm-lyrcompare-lyrB') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedB.name\n          } else if (item.id === 'm-lyrcompare-lyrC') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedC.name\n          } else if (item.id === 'm-lyrcompare-lyrD') {\n            this.template.querySelector('#' + item.id).value = this.layerSelectedD.name\n          }\n\n          return false;\n        }\n\n        if (item.id === 'm-lyrcompare-lyrA') {\n          if (layer[0].name === this.layerSelectedC.name) {\n            this.layerSelectedC.setVisible(false);\n            this.layerSelectedC = this.layerSelectedA;\n            this.template.querySelector('#m-lyrcompare-lyrC').value = this.layerSelectedA.name\n          }\n\n          if (layer[0].name === this.layerSelectedD.name) {\n            this.layerSelectedD.setVisible(false);\n            this.layerSelectedD = this.layerSelectedA;\n            this.template.querySelector('#m-lyrcompare-lyrD').value = this.layerSelectedA.name\n          }\n        } else if (item.id === 'm-lyrcompare-lyrB') {\n          if (layer[0].name === this.layerSelectedC.name) {\n            this.layerSelectedC.setVisible(false);\n            this.layerSelectedC = this.layerSelectedB;\n            this.template.querySelector('#m-lyrcompare-lyrC').value = this.layerSelectedB.name\n          }\n\n          if (layer[0].name === this.layerSelectedD.name) {\n            this.layerSelectedD.setVisible(false);\n            this.layerSelectedD = this.layerSelectedB;\n            this.template.querySelector('#m-lyrcompare-lyrD').value = this.layerSelectedB.name\n          }\n        }\n\n        if (item.id === 'm-lyrcompare-lyrA') {\n          this.layerSelectedA.setVisible(false);\n          this.layerSelectedA = layer[0];\n        } else if (item.id === 'm-lyrcompare-lyrB') {\n          this.layerSelectedB.setVisible(false);\n          this.layerSelectedB = layer[0];\n        } else if (item.id === 'm-lyrcompare-lyrC') {\n          this.layerSelectedC.setVisible(false);\n          this.layerSelectedC = layer[0];\n        } else if (item.id === 'm-lyrcompare-lyrD') {\n          this.layerSelectedD.setVisible(false);\n          this.layerSelectedD = layer[0];\n        }\n\n        this.removeEffectsComparison();\n        this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);\n      });\n    });\n  }\n\n  /**\n   * This function checks selected layers are diferent\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param { string } lyerA layer 1\n   * @param { string } lyerB layer 2\n   * @param { string } lyerC layer 3\n   * @param { string } lyerD layer 4\n\n   * @return {Boolean}\n   */\n  checkLayersAreDifferent(lyerA, lyerB, lyerC, lyerD) {\n    let res = true;\n    if ((this.comparisonMode === 1) || (this.comparisonMode === 2)) {\n      res = lyerA !== lyerB;\n    } else {\n      let compLyers = [lyerA, lyerB, lyerC, lyerD];\n      const noDups = [... new Set(compLyers)];\n      res = noDups.length === compLyers.length;\n      //res = compLyers.length !== compLyers.unique().length; // No entiendo por qué esto funcionaba antes y ahora no\n    }\n\n    return res;\n  }\n\n  /**\n   * Activate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activateCurtain() {\n    this.activeDefault();\n    this.getImpl().effectSelectedCurtain(this.layerSelectedA, this.layerSelectedB, this.layerSelectedC, this.layerSelectedD, this.opacityVal, this.staticDivision, this.comparisonMode);\n    this.updateControls();\n  }\n\n  /**\n   * Activate default values\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activeDefault() {\n    if (this.layerSelectedA === null) {\n      this.layerSelectedA = this.layers[this.defaultLyrA];\n      this.template.querySelector('#m-lyrcompare-lyrA').selectedIndex = this.defaultLyrA;\n    }\n\n    if (this.layerSelectedB === null) {\n      this.layerSelectedB = this.layers[this.defaultLyrB];\n      this.template.querySelector('#m-lyrcompare-lyrB').selectedIndex = this.defaultLyrB;\n    }\n\n    if (this.layerSelectedC === null) {\n      this.layerSelectedC = this.layers[this.defaultLyrC];\n      this.template.querySelector('#m-lyrcompare-lyrC').selectedIndex = this.defaultLyrC;\n    }\n\n    if (this.layerSelectedD === null) {\n      this.layerSelectedD = this.layers[this.defaultLyrD];\n      this.template.querySelector('#m-lyrcompare-lyrD').selectedIndex = this.defaultLyrD;\n    }\n  }\n\n  /**\n   * Deactivate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivateCurtain() {\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl) {\n      swipeControl.classList.display = 'none !important';\n    }\n\n    this.comparisonMode = 0;\n    if (this.layerSelectedA !== null && this.layerSelectedB !== null) {\n      this.layerSelectedA.setVisible(false);\n      this.layerSelectedB.setVisible(false);\n    }\n\n    if (this.layerSelectedC !== null && this.layerSelectedD !== null && this.layerSelectedC !== undefined && this.layerSelectedD !== undefined) {\n      this.layerSelectedC.setVisible(false);\n      this.layerSelectedD.setVisible(false);\n    }\n\n    this.removeEffectsComparison();\n    this.updateControls();\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffectsComparison() {\n    this.getImpl().removeEffectsCurtain();\n  }\n\n  /**\n   * This procedure updates texts in controls\n   *\n   */\n  updateControls() {\n    this.removeActivate();\n    this.activateByMode();\n    const swapControl = document.querySelector('.lyrcompare-swipe-control');\n    if (this.comparisonMode === 0) {\n      this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').forEach(item => {\n        item.disabled = true;\n      });\n\n      this.template.querySelector('input').disabled = true; //Deshabilita el range del radio\n      return;\n    } else if (this.comparisonMode === 1) {\n      if (swapControl) swapControl.style.opacity = '1';\n      this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList.add('cp-columns-2');\n      this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList.add('cp-columns-1');\n      this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrA').disabled = false;\n      this.template.querySelector('#m-lyrcompare-lyrB').disabled = false;\n    } else if (this.comparisonMode === 2) {\n      if (swapControl) swapControl.style.opacity = '1';\n      this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList.add('cp-columns-4');\n      this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList.add('cp-columns-3');\n      this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrA').disabled = false;\n      this.template.querySelector('#m-lyrcompare-lyrB').disabled = false;\n    } else if (this.comparisonMode === 3) {\n      if (swapControl) swapControl.style.opacity = '1';\n      this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').forEach(item => {\n        item.disabled = false;\n      });\n\n      this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList.add('cp-th-large-1');\n      this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList.add('cp-th-large-2');\n      this.template.querySelector('#m-lyrcompare-lyrC-lbl').classList.add('cp-th-large-3');\n      this.template.querySelector('#m-lyrcompare-lyrD-lbl').classList.add('cp-th-large-4');\n      this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrC-cont').style.display = 'block';\n      this.template.querySelector('#m-lyrcompare-lyrD-cont').style.display = 'block';\n    }\n\n    this.template.querySelector('input').disabled = false; //Habilita el range del radio\n  }\n\n  activateByMode() {\n    if (this.comparisonMode === 1) {\n      this.template.querySelector('#m-lyrcompare-vcurtain').classList.add('buttom-pressed-vcurtain'); //VCurtain pulsado\n    } else if (this.comparisonMode === 2) {\n      this.template.querySelector('#m-lyrcompare-hcurtain').classList.add('buttom-pressed-hcurtain'); //HCurtain pulsado\n    } else if (this.comparisonMode === 3) {\n      this.template.querySelector('#m-lyrcompare-multicurtain').classList.add('buttom-pressed-multicurtain'); //MultiCurtain pulsado\n    }\n  }\n\n\n  removeActivate() {\n    this.template.querySelector('#m-lyrcompare-vcurtain').classList.remove('buttom-pressed-vcurtain');\n    this.template.querySelector('#m-lyrcompare-hcurtain').classList.remove('buttom-pressed-hcurtain');\n    this.template.querySelector('#m-lyrcompare-multicurtain').classList.remove('buttom-pressed-multicurtain');\n    this.template.querySelectorAll('select[id^=\"m-lyrcompare-\"]').disabled = true;\n    this.template.querySelector('#m-lyrcompare-lyrA-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrB-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrC-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrD-cont').style.display = 'none';\n    this.template.querySelector('#m-lyrcompare-lyrA-lbl').classList = '';\n    this.template.querySelector('#m-lyrcompare-lyrB-lbl').classList = '';\n    const swapControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swapControl) {\n      swapControl.style.opacity = '0';\n    }\n  }\n\n  /**\n   * This function remove the Curtain layers\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeCurtainLayers(layers) {\n    layers.forEach(layer => {\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          let name = urlLayer[3]\n          const layerByUrl = this.map.getLayers().filter(l => name.includes(l.name))[this.map.getLayers().filter(l => name.includes(l.name)).length - 1];\n          this.map.removeLayers(layerByUrl);\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[this.map.getLayers().filter(l => layer.includes(l.name)).length - 1];\n          this.map.removeLayers(layerByName);\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[this.map.getLayers().filter(l => layer.name.includes(l.name)).length - 1];\n        this.map.removeLayers(layerByObject);\n      }\n    });\n  }\n\n  allLayerLoad() {\n    let res = true;\n    if (this.layers[0].load === undefined || this.layers[1].load === undefined &&\n      (this.layers[2] !== undefined && this.layers[3] !== undefined && (this.layers[2].load === undefined || this.layers[3].load === undefined))) {\n      res = false;\n    }\n\n    return res;\n  }\n\n\n  /**\n   * \n   * @param {*} layers\n   * Transform StringLayers o Template Literals to Mapea M.LayerFormato \n   * \n   * WMTS*MDT Relieve*https://servicios.idee.es/wmts/mdt*Relieve*GoogleMapsCompatible*image/jpeg\n   * Tipo de Servicio (WMS/WMTS)\n   * Nombre del servicio para la leyenda (acepta espacios y tildes)\n   * URL del servicio, con protocolo. Omitir la ? final.\n   * Identificador de capa del Capabilities del servicio\n   * Tilematrix\n   * Formato de imagen\n   * \n   * Ejemplo: WMTS*MDT Relieve*https://servicios.idee.es/wmts/mdt*Relieve*GoogleMapsCompatible*image/jpeg\n   * \n   * El resto de parámetros los define la función\n   * Las capas cargadas tienen asignados zIndex pequeños\n   *  \n   * @returns \n   */\n  transformToLayers(layers) {\n    console.log(\"transformToLayers Curtain\");\n    const transform = layers.map((layer) => {\n      let newLayer = null;\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          // console.log(urlLayer);\n          if (urlLayer[0].toUpperCase() === 'WMS') {\n            newLayer = new M.layer.WMS({\n              url: urlLayer[2],\n              name: urlLayer[3],\n              legend: urlLayer[1],\n            });\n\n            if (this.map.getLayers().filter(l => newLayer.name.includes(l.name)).length > 0) {\n              newLayer = this.map.getLayers().filter(l => newLayer.name.includes(l.name))[0];\n              newLayer.legend = urlLayer[1] || newLayer.name;\n            } else {\n              this.map.addLayers(newLayer);\n            }\n            // console.log(newLayer);\n          } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n\n            newLayer = new M.layer.WMTS({\n              url: urlLayer[2] + '?',\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              matrixSet: urlLayer[4],\n              transparent: true,              // Es una capa Overlay -> zIndex > 0\n              displayInLayerSwitcher: false,  // No aparece en el TOC\n              queryable: false,               // No GetFeatureInfo\n              visibility: false,              // Visible a false por defecto\n              format: urlLayer[5],\n            }), this.map.addWMTS(newLayer);\n            // console.log(newLayer);\n          }\n\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n          newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n        newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n      }\n\n      if (newLayer !== null) {\n        if (newLayer.getImpl().getOL3Layer() === null) {\n          setTimeout(() => {\n            console.log(`Cargado ${newLayer.type}`);\n            if (newLayer.type === 'WMS' || newLayer.type === 'WMTS') {\n              newLayer.load = true;\n\n            } else if (newLayer.type === 'WMTS') {\n              newLayer.facadeLayer_.load = true;\n\n            }\n          }, 1000);\n        } else {\n          newLayer.load = true;\n        }\n\n        newLayer.displayInLayerSwitcher = false;\n        newLayer.setVisible(false);\n        console.log(newLayer);\n        return newLayer;\n      } else {\n        this.layers.remove(layer);\n      }\n    }, this);\n\n    return (transform[0] === undefined) ? [] : transform;\n  }\n\n\n\n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return {Boolean}\n   */\n  isValidLayer(layer) {\n    return layer.type === 'WMTS' || layer.type === 'WMS';\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof LyrCompareControl;\n  }\n\n  getLayersNames() {\n    return this.layers.map(l => l.name);\n  }\n\n\n}\n","/**\n * @module M/plugin/LyrCompare\n */\nimport 'assets/css/cplyrcompare';\nimport LyrCompareControl from './cplyrcomparecontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class LyrCompare extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} options plugin configuration options\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'lyrcompare';\n\n    /** Error control\n     *@private\n     *@type{boolean}\n     */\n    this.error_ = false;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with commas\n     * @type {Array<String>}\n     */\n    this.layers = [];\n    if (options.layers === undefined || options.layers.length < 2) {\n      M.dialog.error(getValue('no_layers_plugin'), 'lyrcompare');\n      this.error_ = true;\n    } else {\n      if (Array.isArray(options.layers)) {\n        this.layers = options.layers;\n      } else {\n        this.layers = options.layers.split(',');\n      }\n    }\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    if (this.error_ === false) {\n\n      /**\n       * Position of the Plugin\n       * @public\n       * @type {String}\n       */\n      this.position = options.position;\n\n      /**\n       * Collapsed attribute\n       * @public\n       * @type {boolean}\n       */\n      this.collapsed = true;\n\n      /**\n       * Collapsible attribute\n       * @public\n       * @type {boolean}\n       */\n      this.collapsible = true;\n\n      /**\n       * staticDivision\n       * Value: number in range 0 - 1\n       * @type {number}\n       * @public\n       */\n      this.staticDivision = options.staticDivision === undefined ? 1 : parseInt(options.staticDivision);\n\n      /**\n       * Opacity\n       * Value: number in range 0 - 100\n       * @type {number}\n       * @public\n       */\n      if (options.opacityVal === undefined) {\n        this.opacityVal = 100;\n      } else {\n        this.opacityVal = parseInt(options.opacityVal);\n        if (this.opacityVal <= 0) {\n          this.opacityVal = 0;\n        } else if (this.opacityVal >= 100) {\n          this.opacityVal = 100;\n        }\n      }\n\n      /**\n       * Comparison Mode\n       * Value: number in range 0 - 3\n       * @type {number}\n       * @public\n       */\n      if (options.comparisonMode === undefined) {\n        this.comparisonMode = 0;\n      } else {\n        this.comparisonMode = parseInt(options.comparisonMode);\n        if (this.comparisonMode <= 0 || this.comparisonMode > 3) {\n          this.comparisonMode = 0;\n        }\n      }\n\n      /**\n       * Metadata from api.json\n       * @private\n       * @type {Object}\n       */\n      this.metadata_ = api.metadata;\n\n      /**\n       *@private\n       *@type { string }\n       */\n      this.tooltip_ = options.tooltip || getValue('tooltip');\n\n      /** Show interface\n       *@public\n       *@type{boolean}\n       */\n      this.interface = options.interface === undefined ? true : options.interface;\n\n      /**\n       * Default Layer A\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrA === undefined) {\n        this.defaultLyrA = 0;\n      } else {\n        this.defaultLyrA = parseInt(options.defaultLyrA);\n      }\n\n      /**\n       * Default Layer B\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrB === undefined) {\n        this.defaultLyrB = this.defaultLyrA !== 0 ? 0 : 1;\n      } else {\n        this.defaultLyrB = parseInt(options.defaultLyrB);\n      }\n\n      if (this.defaultLyrA === this.defaultLyrB) {\n        M.dialog.error(getValue('repeated_layers'), 'lyrcompare');\n        this.error_ = true;\n      }\n\n      /**\n       * Default Layer C\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrC === undefined) {\n        this.defaultLyrC = 2;\n      } else {\n        this.defaultLyrC = parseInt(options.defaultLyrC);\n      }\n\n      if ((this.defaultLyrA === this.defaultLyrC) || (this.defaultLyrB === this.defaultLyrC)) {\n        M.dialog.error(getValue('repeated_layers'), 'lyrcompare');\n        this.error_ = true;\n      }\n\n      /**\n       * Default Layer D\n       * @type {number}\n       * @public\n       */\n      if (options.defaultLyrD === undefined) {\n        this.defaultLyrD = 3;\n      } else {\n        this.defaultLyrD = parseInt(options.defaultLyrD);\n      }\n\n      if ((this.defaultLyrA === this.defaultLyrD) || (this.defaultLyrB === this.defaultLyrD) || (this.defaultLyrC === this.defaultLyrD)) {\n        M.dialog.error(getValue('repeated_layers'), 'lyrcompare');\n        this.error_ = true;\n      }\n    }\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    this.map_ = map;\n    const values = {\n      layers: this.layers,\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      staticDivision: this.staticDivision,\n      opacityVal: this.opacityVal,\n      comparisonMode: this.comparisonMode,\n      defaultLyrA: this.defaultLyrA,\n      defaultLyrB: this.defaultLyrB,\n      defaultLyrC: this.defaultLyrC,\n      defaultLyrD: this.defaultLyrD,\n      interface: this.interface,\n    };\n\n    this.control_ = new LyrCompareControl(values);\n    this.controls_.push(this.control_);\n    if (this.error_) {\n      const plugin = map.getPlugins('lyrcompare');\n      if (plugin.length !== 0) map.removePlugins(map.getPlugins('lyrcompare'))\n    } else {\n      if (this.interface) {\n        this.panel_ = new M.ui.Panel('panelLyrcompare', {\n          collapsible: this.collapsible,\n          collapsed: this.collapsed,\n          position: M.ui.position[this.position],\n          className: 'm-plugin-lyrcompare',\n          collapsedButtonClass: 'cp-icon',\n          tooltip: this.tooltip_,\n        });\n      } else {\n        this.panel_ = new M.ui.Panel('panelLyrcompare', {\n          collapsible: false,\n          collapsed: true,\n          position: M.ui.position[this.position],\n          className: 'm-plugin-lyrcompare-hidden',\n        });\n      }\n\n      this.panel_.addControls(this.controls_);\n      map.addPanels(this.panel_);\n    }\n  }\n\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.deactivate();\n    const swipeControl = document.querySelector('.lyrcompare-swipe-control');\n    if (swipeControl) {\n      swipeControl.remove();\n    }\n\n    this.map_.removeControls([this.control_]);\n    this.control_.removeCurtainLayers(this.control_.getLayersNames());\n    [this.name_, this.error_, this.layers, this.controls_, this.map_, this.position, this.collapsed, this.collapsible,\n      this.staticDivision, this.opacityVal, this.comparisonMode, this.metadata_, this.tooltip_, this.interface, this.defaultLyrA,\n      this.defaultLyrB, this.defaultLyrC, this.defaultLyrD\n    ] = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activateCurtain();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivateCurtain();\n  }\n\n  /**\n   * This\n   function compare\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof LyrCompare;\n  }\n}\n","/**\n * @module M/impl/control/TransparentInteraction\n\n */\nexport default class TransparentInteraction extends ol.interaction.Pointer {\n  /**\n   * @classdesc\n   * Main constructor of the TransparentInteraction.\n   *\n   * @constructor\n   * @extends {ol.interaction.Pointer}\n   * @api stable\n   */\n  constructor(options) {\n    super(options);\n    this.layers_ = [];\n    ol.interaction.Pointer.call(this, {\n      handleDownEvent: this.setPosition,\n      handleMoveEvent: this.setPosition,\n    });\n\n    // Default options\n    const optionsE = options || {};\n\n    this.pos = false;\n    this.radius = (optionsE.radius || 100);\n    this.OLVersion = \"OL6\";\n\n    console.log(optionsE);\n    const layer = [optionsE.layers].map(layer => layer.getImpl().getOL3Layer()).filter(layer => layer != null);\n    this.addLayer(layer);\n\n\n    /*if (optionsE.layers) {\n      optionsE.layers = [optionsE.layers];\n      console.log(layer);\n      const layer = optionsE.layers.map(layer => layer.getImpl().getOL3Layer())\n        .filter(layer => layer != null);\n      this.addLayer(layer);\n    }*/\n  }\n\n  /** Set the map > start postcompose\n   */\n  setMap(map) {\n    let i;\n\n    \n    console.log(this.getMap());\n    if (this.getMap()) {\n      // e2m: Por aquí pasamos al desactivar el control\n      for (i = 0; i < this.layers_.length; i += 1) {\n        if (this.OLVersion === \"OL6\"){\n          if (this.layers_[i].prerender) ol.Observable.unByKey(this.layers_[i].prerender);\n          if (this.layers_[i].postrender) ol.Observable.unByKey(this.layers_[i].postrender);\n          this.layers_[i].prerender = this.layers_[i].postcompose = null;\n        }else{\n          if (this.layers_[i].precompose) ol.Observable.unByKey(this.layers_[i].precompose);\n          if (this.layers_[i].postcompose) ol.Observable.unByKey(this.layers_[i].postcompose);\n          this.layers_[i].precompose = this.layers_[i].postcompose = null;\n        }\n      }\n      this.getMap().renderSync();\n    }\n    \n    ol.interaction.Pointer.prototype.setMap.call(this, map);\n    if (map) {\n      for (i = 0; i < this.layers_.length; i += 1) {\n        if (this.OLVersion === \"OL6\"){\n          this.layers_[i].prerender = this.layers_[i].on('prerender', this.precompose_.bind(this));\n          this.layers_[i].postrender = this.layers_[i].on('postrender', this.postcompose_.bind(this));\n        }else{\n        this.layers_[i].precompose = this.layers_[i].on('precompose', this.precompose_.bind(this));\n        this.layers_[i].postcompose = this.layers_[i].on('postcompose', this.postcompose_.bind(this));\n        }\n      }\n\n      map.renderSync();\n    }\n  }\n\n  /** Set clip radius\n   * @param {integer} radius\n   */\n  setRadius(radius) {\n    this.radius = radius;\n    if (this.getMap()) this.getMap().renderSync();\n  }\n\n  /** Add a layer to clip\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  addLayer(layers) {\n\n    /* eslint-disable */\n    if (!(layers instanceof Array)) layers = [layers];\n    /* eslint-enable */\n    console.log(layers);\n    for (let i = 0; i < layers.length; i += 1) {\n      \n       //e2m: deprecated. Esto no se usa ¿? \n      const l = { layer: layers[i] };\n      if (this.getMap()) {\n        l.prerender = layers[i].on('prerender', this.precompose_.bind(this));\n        l.postrender = layers[i].on('postrender', this.postcompose_.bind(this));\n        this.getMap().renderSync();\n      }\n      \n      this.layers_.push(layers[i]);\n    }\n  }\n\n  /** Remove a layer to clip\n   * @param {ol.layer|Array<ol.layer>} layer to clip\n   */\n  removeLayer(layers) {\n    /* eslint-disable */\n    if (!(layers instanceof Array)) layers = [layers];\n    /* eslint-enable */\n    for (let i = 0; i < layers.length; i += 1) {\n      let k;\n      for (k = 0; k < this.layers_.length; k += 1) {\n        if (this.layers_[k] === layers[i]) {\n          break;\n        }\n      }\n\n      if (k !== this.layers_.length && this.getMap()) {\n        if (this.layers_[k].precompose) ol.Observable.unByKey(this.layers_[k].precompose);\n        if (this.layers_[k].postcompose) ol.Observable.unByKey(this.layers_[k].postcompose);\n        this.layers_.splice(k, 1);\n        this.getMap().renderSync();\n      }\n    }\n  }\n\n  /** Set position of the clip\n   * @param {ol.Pixel|ol.MapBrowserEvent}\n   */\n  setPosition(e) {\n    if (e.pixel) {\n      this.pos = e.pixel;\n    } else if (e && e instanceof Array) {\n      this.pos = e;\n    } else {\n      /* eslint-disable */\n      e = [-10000000, -10000000];\n      /* eslint-enable */\n    }\n\n    if (this.getMap()) this.getMap().renderSync();\n  }\n\n  /* @private\n   */\n\n  // e2m: deprecated\n/*\n  precompose_(e) {\n    console.log(\"precompose_\");\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(this.pos[0] * ratio, this.pos[1] * ratio, this.radius * ratio, 0, 2 * Math.PI);\n    ctx.clip();\n  }\n*/\n  /* @private\n   */\n  // e2m: deprecated\n/*\n  postcompose_(e) {\n    //console.log(\"postcompose_\");\n    e.context.restore();\n  }\n*/\n  /* @private\n */\n  precompose_(e) {\n    //console.log(\"precompose_\");\n    const ctx = e.context;\n    const ratio = e.frameState.pixelRatio;\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(this.pos[0] * ratio, this.pos[1] * ratio, this.radius * ratio, 0, 2 * Math.PI);\n    ctx.lineWidth = (5 * this.radius * ratio) / this.radius;\n    ctx.strokeStyle = 'rgba(0,0,0,0.5)';\n    ctx.stroke();\n    ctx.clip();\n\n  }\n\n  /* @private\n   */\n  postcompose_(e) {\n    //console.log(\"postcompose_\");\n    e.context.restore();\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(b) {\n    super.setActive(b);\n  }\n}\n","/* eslint-disable no-console */\n/**\n * @module M/impl/control/TransparencyControl\n */\nimport TransparentInteraction from 'impl/cptransparentInteraction';\n\n\nexport default class TransparencyControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    // super addTo - don't delete\n    this.map = map;\n    this.olMap = map.getMapImpl();\n    super.addTo(map, html);\n  }\n\n  /**\n   * Effects on the layer\n   *\n   * @public\n   * @function\n   * @param { M.Layer } layer layer to which to assign an effect\n   * @param { Number } radius radius to assign\n   * @api stable\n   */\n  effectSelected(layers, radius) {\n\n    layers.setVisible(true);\n    //layers.setZIndex(90000);\n    //const olVersion = olIndex.VERSION\n    console.log(this.olMap);\n    console.log(M);\n    this.transparentInteraction_ = new TransparentInteraction({\n      radius,\n      layers,\n    });\n    this.olMap.addInteraction(this.transparentInteraction_);\n    return;\n\n  }\n\n  /**\n   * Set radius\n   *\n   * @public\n   * @function\n   * @param { Number } radius radius to assign\n   * @api stable\n   */\n  setRadius(radius) {\n    if (this.transparentInteraction_ !== undefined) this.transparentInteraction_.setRadius(radius);\n  }\n\n  /**\n   * Set layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer layer to assign effect\n   * @api stable\n   */\n  addLayer(layer) {\n\n    //this.transparentInteraction_.addLayer(layer.getImpl().getOL3Layer());\n    console.log(layer)\n    this.transparentInteraction_.addLayer(layer);\n\n  }\n\n  /**\n   * Remove effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    this.olMap.removeInteraction(this.transparentInteraction_);\n  }\n\n  /**\n   * Remove layer\n   *\n   * @public\n   * @function\n   * @param { M.layer } layer to remove\n   * @api stable\n   */\n  removeLayer(layer) {\n    this.transparentInteraction_.removeLayer(layer.getImpl().getOL3Layer());\n  }\n}\n","/**\n * @module M/control/TransparencyControl\n */\n\nimport TransparencyImplControl from 'impl/cptransparencycontrol';\nimport template from 'templates/cptransparency';\nimport { getValue } from './i18n/language';\n\nexport default class TransparencyControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(values) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(TransparencyImplControl)) {\n      M.exception(getValue('exception'));\n    }\n\n    // 2. implementation of this control\n    const impl = new TransparencyImplControl();\n    super(impl, 'Transparency');\n\n    /**\n     * All layers\n     * @public\n     * @public {Array}\n     */\n    this.layers = values.layers;\n    /**\n     * Radius selected\n     * @private\n     * @type {Number}\n     */\n    this.radius = values.radius;\n    /**\n     * Layer selected\n     * @public\n     * @type {M.layer}\n     */\n    this.layerSelected = null;\n\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n\n    this.map = map;\n    return new Promise((success, fail) => {\n      this.layers = this.transformToLayers(this.layers);\n      \n      let names = this.layers.map((layer) => {\n        return layer instanceof Object ? { name: layer.name, legend: layer.legend } : { name: layer, legend: layer };\n      });\n\n      let options = {\n        jsonp: true,\n        vars: {\n          translations: {\n            transparency: getValue('transparency'),\n            radius: getValue('radius'),\n            layers: getValue('layers'),\n          },\n        },\n      };\n\n      if (names.length >= 1) {\n        options.vars.options = names;\n      }\n\n      this.template = M.template.compileSync(template, options);\n\n      // Radius\n      this.template.querySelector('#input-transparent-radius').value = this.radius;\n      this.template.querySelector('#input-transparent-radius').addEventListener('change', (evt) => {\n        this.radius = Number(evt.target.value);\n        this.getImpl().setRadius(this.radius);\n      });\n\n      if (this.layers.length === 0 || this.layers === '') {\n        M.dialog.error(getValue('errorLayer'));\n      } else {\n        if (options !== '') {\n          this.template.querySelector('select').disabled = true;\n          this.template.querySelector('input').disabled = true;\n          this.template.querySelector('select').addEventListener('change', (evt) => {\n            \n            this.layerSelected.setVisible(false);\n            this.removeEffects();\n            const layer = this.layers.filter((layer) => {\n              return layer.name === evt.target.value;\n            });\n\n            this.layerSelected = layer[0];\n            this.getImpl().effectSelected(this.layerSelected, this.radius);\n          });\n        }\n      }\n\n      success(this.template);\n    });\n  }\n\n  setDefaultLayer(){\n    console.log(\"Activación remota\");\n    //this.template.querySelector('select').disabled = false;\n    //this.template.querySelector('input').disabled = false;\n    //this.getImpl().effectSelected(this.layerSelected, this.radius);\n\n  }\n\n\n  /**\n   * Activate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  activate() {\n    \n    if (this.layerSelected === null) this.layerSelected = this.layers[0];\n    let names = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name } : { name: layer };\n    });\n    \n\n    if (names.length >= 1) {\n      this.template.querySelector('select').disabled = false;\n      this.template.querySelector('input').disabled = false;\n    }\n\n    this.getImpl().effectSelected(this.layerSelected, this.radius);\n\n  }\n\n  /**\n   * Deactivate Select/Input\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  deactivate() {\n    if (this.layerSelected === null) this.layerSelected = this.layers[0];\n    let names = this.layers.map((layer) => {\n      return layer instanceof Object ? { name: layer.name } : { name: layer };\n    });\n\n    this.removeEffects();\n    this.layerSelected.setVisible(false);\n    if (names.length >= 1) {\n      this.template.querySelector('select').disabled = true;\n      this.template.querySelector('input').disabled = true;\n    }\n  }\n\n  /**\n   * This function is called to remove the effects\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeEffects() {\n    this.getImpl().removeEffects();\n  }\n\n  /**\n   * This function remove the transparency layers\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  removeTransparencyLayers(layers) {\n    layers.forEach(layer => {\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          let name = urlLayer[3]\n          const layerByUrl = this.map.getLayers().filter(l => name.includes(l.name))[0];\n          this.map.removeLayers(layerByUrl);\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n          this.map.removeLayers(layerByName);\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n        this.map.removeLayers(layerByObject);\n      }\n    });\n  }\n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return\n   */\n   transformToLayers(layers) {\n\n    const transform = layers.map((layer) => {\n      let newLayer = null;\n      if (!(layer instanceof Object)) {\n        if (layer.indexOf('*') >= 0) {\n          const urlLayer = layer.split('*');\n          // console.log(urlLayer);\n          if (urlLayer[0].toUpperCase() === 'WMS') {\n            newLayer = new M.layer.WMS({\n              url: urlLayer[2],\n              name: urlLayer[3],\n              legend: urlLayer[1],\n            });\n\n          } else if (urlLayer[0].toUpperCase() === 'WMTS') {\n\n            newLayer = new M.layer.WMTS({\n              url: urlLayer[2] + '?',\n              name: urlLayer[3],\n              legend: urlLayer[1],\n              matrixSet: urlLayer[4],\n              transparent: true,              // Es una capa Overlay -> zIndex > 0\n              displayInLayerSwitcher: false,  // No aparece en el TOC\n              queryable: false,               // No GetFeatureInfo\n              visibility: false,              // Visible a false por defecto\n              format: urlLayer[5],\n            }), this.map.addWMTS(newLayer);\n\n          }\n\n          if (this.map.getLayers().filter(l => newLayer.name.includes(l.name)).length > 0) {\n            newLayer = this.map.getLayers().filter(l => newLayer.name.includes(l.name))[0];\n            newLayer.legend = urlLayer[1] || newLayer.name;\n          } else {\n            this.map.addLayers(newLayer);\n          }\n\n\n        } else {\n          const layerByName = this.map.getLayers().filter(l => layer.includes(l.name))[0];\n          newLayer = this.isValidLayer(layerByName) ? layerByName : null;\n        }\n      } else if (layer instanceof Object) {\n        const layerByObject = this.map.getLayers().filter(l => layer.name.includes(l.name))[0];\n        newLayer = this.isValidLayer(layerByObject) ? layerByObject : null;\n      }\n\n      if (newLayer !== null) {\n        if (newLayer.getImpl().getOL3Layer() === null) {\n          setTimeout(() => {\n            if (newLayer.type === 'WMS' || newLayer.type === 'WMTS') {\n              newLayer.load = true;\n            }\n          }, 1000);\n        } else {\n          newLayer.load = true;\n        }\n\n        newLayer.displayInLayerSwitcher = false;\n        newLayer.setVisible(false);\n        return newLayer;\n      } else {\n        this.layers.remove(layer);\n      }\n    }, this);\n\n    return (transform[0] === undefined) ? [] : transform;\n  }\n\n   \n\n  /**\n   * This function transform string to M.Layer\n   *\n   * @public\n   * @function\n   * @api stable\n   * @param {string}\n   * @return {Boolean}\n   */\n  isValidLayer(layer) {\n    return layer.type === 'WMTS' || layer.type === 'WMS';\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof TransparencyControl;\n  }\n\n  getLayersNames() {\n    return this.layers.map(l => l.name);\n  }\n}\n","/**\n * @module M/plugin/Transparency\n */\nimport 'assets/css/cptransparency';\nimport TransparencyControl from './cptransparencycontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class Transparency extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'transparency';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-transparency';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * Posible values: TR | TL | BL | BR\n     * @type {String}\n     */\n    this.position = options.position;\n\n    /**\n     * Layer names that will have effects\n     * @public\n     * Value: the names separated with coma\n     * @type {string}\n     */\n    if (options.layers === undefined || options.layers === '') {\n      M.dialog.error(getValue('errorLayer'));\n      this.layers = [];\n    } else {\n      if (Array.isArray(options.layers)) {\n        this.layers = options.layers;\n      } else {\n        this.layers = options.layers.split(',');\n      }\n    }\n\n    /**\n     * Transparent effect radius\n     * Value: number in range 30 - 200\n     * @type {number}\n     * @public\n     */\n\n    if (!isNaN(parseInt(options.radius))) {\n      if (options.radius >= 30 && options.radius <= 200) {\n        this.radius = parseInt(options.radius);\n      } else if (options.radius > 200) {\n        this.radius = 200;\n      } else if (options.radius < 30) {\n        this.radius = 30;\n      }\n    } else {\n      this.radius = 100; // Default value\n    }\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    this.separatorApiJson = api.url.separator;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = options.collapsed || true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible || true;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n    const values = {\n      layers: this.layers,\n      radius: this.radius,\n    };\n\n    this.control_ = new TransparencyControl(values);\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelTransparency', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position],\n      className: this.className,\n      collapsedButtonClass: 'icon-gps4',\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.control_.removeEffects();\n    this.control_.removeTransparencyLayers(this.control_.getLayersNames());\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.layers, this.radius] = [null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  setDefaultLayer(){\n    this.control_.setDefaultLayer();\n  }\n\n\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This\n   function compare\n   if pluging recieved by param is instance of M.plugin.Transparency\n   *\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Transparency;\n  }\n}\n","/**\n * @module M/control/ComparepanelControl\n */\n\nimport ComparepanelImplControl from 'impl/comparepanelcontrol';\nimport template from 'templates/comparepanel';\nimport { getValue } from './i18n/language';\nimport Mirrorpanel from './cpmirrorpanel';\nimport Timeline from './cptimeline';\nimport LyrCompare from './cplyrcompare';\nimport Transparency from './cptransparency';\n\nexport default class ComparepanelControl extends M.Control {\n  /**\n   * @classdesc\n   * Main constructor of the class. Creates a PluginControl\n   * control\n   *\n   * @constructor\n   * @extends {M.Control}\n   * @api stable\n   */\n  constructor(options) {\n    // 1. checks if the implementation can create PluginControl\n    if (M.utils.isUndefined(ComparepanelImplControl)) {\n      M.exception(getValue('exception'));\n    }\n    // 2. implementation of this control\n    const impl = new ComparepanelImplControl();\n    super(impl, 'Comparepanel');\n    /**\n     * Template\n     * @public\n     * @type { HTMLElement }\n     */\n    this.template = null;\n    this.baseLayers = options.baseLayers;\n    this.position = options.position;\n    this.layers = [];\n    this.defaultComparisonMode = options.defaultComparisonMode;\n    this.defaultComparisonViz = options.defaultComparisonViz;\n    this.previousComparisonMode = \"\";\n    this.actualComparisonMode = \"\";\n\n    this.baseLayers.forEach(e => this.layers.push(e[2]));\n    this.params = [options.mirrorpanelParams, options.timelineParams, options.lyrcompareParams, options.transparencyParams];\n    this.params.forEach(p => {\n      p.position = this.position;\n    });\n\n    options.mirrorpanelParams.defaultBaseLyrs = this.layers;\n    options.timelineParams.intervals = this.baseLayers;         //e2m: TimeLine needs this.baseLayers with the time param\n    options.lyrcompareParams.layers = this.layers;\n    options.transparencyParams.layers = this.layers;\n    this.mirrorpanel = new Mirrorpanel(options.mirrorpanelParams);\n    this.timeline = new Timeline(options.timelineParams);\n    \n    this.lyrcompare = new LyrCompare(options.lyrcompareParams);\n    this.transparency = new Transparency(options.transparencyParams);\n    this.panels = [];\n    this.plugins = [this.mirrorpanel, this.timeline, this.lyrcompare, this.transparency];\n    \n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api stable\n   */\n  createView(map) {\n    this.map = map;\n    return new Promise((success, fail) => {\n      let options = {\n        jsonp: true,\n        vars: {\n          translations: {\n            tooltipLyr: getValue('tooltipLyr'),\n            tooltipMirrorpanel: getValue('tooltipMirrorpanel'),\n            tooltipTimeline: getValue('tooltipTimeline'),\n            tooltipTransparency: getValue('tooltipTransparency'),\n          }\n        }\n      };\n\n      this.template = M.template.compileSync(template, options);\n      success(this.template);\n\n      this.addComparators(map);\n      console.log(this.map.getBaseLayers());\n      console.log(this.map.getLayers());\n    });\n  }\n\n  addComparators(map) {\n    this.plugins.forEach((p, index) => {\n      map.addPlugin(p);\n      this.panels.push(p.panel_._element);\n      let element = document.querySelector('.' + p.panel_._className + ' .m-panel-controls');\n      element.classList.add('cp-' + p.name);\n      document.querySelector('.' + p.panel_._className).remove();\n      this.template.querySelector('#m-cp-' + p.name).append(element);\n      if (index === this.plugins.length - 1) {\n        this.addButtonEvents();\n      }\n    });\n    this.setComparatorsDefaultStyle();\n  }\n\n  addButtonEvents() {\n    this.plugins.forEach(p => {\n      //this.template.querySelector('#m-cp-' + p.name + ' .cp-button').addEventListener('click', (e) => {\n      if (p.name==='mirrorpanel'){\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').addEventListener('click', (e) => {\n          this.deactivateAndActivateMirrorPanel(p);\n        });        \n        \n      }else{\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').addEventListener('click', (e) => {\n          this.deactivateAndActivateOtherModes(p);\n        });\n      }\n    });\n  }\n\n  setComparatorsDefaultStyle(){\n    console.log(`defaultComparisonMode: ${this.defaultComparisonMode}`);\n    console.log(`defaultComparisonViz: ${this.defaultComparisonViz}`);\n\n    if ((this.defaultComparisonMode==='mirrorpanel') && (this.defaultComparisonViz===0)) {\n      console.log(\"Modo defecto\");\n    }else{\n      this.template.querySelector('#m-cp-' + this.defaultComparisonMode + ' .cp-' + this.defaultComparisonMode).classList.toggle('hide-panel');  // Muestro panel\n      this.template.querySelector('#m-cp-' + this.defaultComparisonMode + ' .cp-button').classList.toggle('active');                             // Añado scolor botón CamparePanel\n    }\n\n    this.plugins.forEach(p => {\n      if (p.name === this.defaultComparisonMode){\n        if (p.name==='transparency') {\n          p.setDefaultLayer();\n        }\n        if (p.name==='timeline') {\n          p.setDefaultLayer(this.defaultComparisonViz);\n        }        \n      }\n    });\n\n    if (this.defaultComparisonMode==='mirrorpanel') {\n      console.log(\"Entro\");\n      // this.template.querySelector('#m-cp-mirrorpanel .cp-mirrorpanel').classList.toggle('hide-panel');  // Oculto panel\n      // this.template.querySelector('#m-cp-mirrorpanel .cp-button').classList.toggle('active');         // Elimino sonbra botón\n    }\n\n  }\n\n  deactivateAndActivateMirrorPanel(plugin) {\n    console.log(\"deactivateAndActivateMirrorPanel\");\n    this.actualComparisonMode = plugin.name;\n    this.template.querySelector('#m-cp-mirrorpanel .cp-mirrorpanel').classList.toggle('hide-panel');  // Oculto panel\n    this.template.querySelector('#m-cp-mirrorpanel .cp-button').classList.toggle('active');         // Elimino sonbra botón\n    this.plugins.forEach(p => {\n      console.log(p);\n      if (p.name !== 'mirrorpanel') {\n        console.log('PAso');\n        p.deactivate();\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-' + p.name).classList.remove('hide-panel');  // Oculto panel\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').classList.remove('active');           // Elimino sonbra botón\n        }\n    });\n\n  }\n\n  deactivateAndActivateOtherModes(plugin) {\n\n    this.actualComparisonMode = plugin.name;\n    if (plugin.name === 'mirrorpanel') return;\n    this.plugins.forEach(p => {\n      if (p.name !== plugin.name) {\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-' + p.name).classList.remove('hide-panel');\n        this.template.querySelector('#m-cp-' + p.name + ' .cp-button').classList.remove('active');\n        p.deactivate();\n      } else if (plugin.name !== 'mirrorpanel') {\n        p.deactivate();\n      }\n    });\n\n    this.template.querySelector('#m-cp-' + plugin.name + ' .cp-button').classList.toggle('active');\n    if (this.template.querySelector('#m-cp-' + plugin.name + ' .cp-button').classList.contains('active') && plugin.name === 'transparency') {\n      plugin.activate();\n    }\n    this.template.querySelector('#m-cp-' + plugin.name + ' .cp-' + plugin.name).classList.toggle('hide-panel');\n    this.template.querySelector('#m-cp-mirrorpanel .cp-mirrorpanel').classList.remove('hide-panel');  // Oculto panel\n    this.template.querySelector('#m-cp-mirrorpanel .cp-button').classList.remove('active');           // Elimino sonbra botón\n    \n  }\n\n  deactivate() {\n    this.plugins.forEach((p, k) => {\n      p.deactivate();\n      document.querySelector('.m-plugin-comparepanel').parentElement.append(this.panels[k]);\n    });\n\n    this.map.removePlugins(this.plugins);\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api stable\n   * @return {Boolean}\n   */\n  equals(control) {\n    return control instanceof ComparepanelControl;\n  }\n}\n","/**\n * @module M/plugin/Comparepanel\n */\n\nimport 'assets/css/comparepanel';\nimport ComparepanelControl from './comparepanelcontrol';\nimport api from '../../api';\nimport { getValue } from './i18n/language';\n\nexport default class Comparepanel extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api stable\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Name plugin\n     * @private\n     * @type {String}\n     */\n    this.name_ = 'comparepanel';\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Class name of the html view Plugin\n     * @public\n     * @type {string}\n     */\n    this.className = 'm-plugin-comparepanel';\n\n    /**\n     * Position of the Plugin\n     * @public\n     * Posible values: TR | TL | BL | BR\n     * @type {String}\n     */\n    const positions = ['TR', 'TL', 'BL', 'BR'];\n\n    this.COMP_PLUGIN_NAMES = {\n      'none': 'default',\n      'mirror': 'mirrorpanel',\n      'curtain': 'lyrcompare',\n      'timeline': 'timeline',\n      'spyeye': 'transparency',\n    }\n\n    this.position = positions.includes(options.position) ? options.position : 'TR';\n\n    /**\n     * Collapsed attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsed = options.collapsed;\n    if (this.collapsed === undefined) this.collapsed = true;\n\n    /**\n     * Collapsible attribute\n     * @public\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible;\n    if (this.collapsible === undefined) this.collapsible = true;\n\n    /**\n     * Vertical attribute\n     * @public\n     * Changes the plugin's orientation\n     * @type {boolean}\n     */\n    this.vertical = options.vertical;\n    if (this.vertical === undefined) this.vertical = true;\n\n    /**\n     * Base Layers\n     * @public\n     * Value: Array of layers with the layout [{name, tag, service},{...}]\n     * @type {Array}\n     */\n    if (options !== undefined) {\n      if (M.utils.isString(options.baseLayers)) {\n        this.baseLayers = JSON.parse(options.baseLayers.replace(/!!/g, '[').replace(/¡¡/g, ']'));\n      } else if (M.utils.isArray(options.baseLayers)) {\n        this.baseLayers = options.baseLayers;\n      } else {\n        M.dialog.error(getValue('baseLayers_error'));\n      }\n    }\n\n    /**\n     * defaultCompareMode of the Plugin\n     * @public\n     * Posible values: mirror | curtain | spyeye | timeline\n     * @type {String}\n     */\n     const defaultCompareModes = ['mirror', 'curtain', 'spyeye', 'timeline'];\n     this.defaultCompareMode = defaultCompareModes.includes(options.defaultCompareMode) ? options.defaultCompareMode : 'mirror';\n\n    /**\n     * defaultCompareViz\n     * @public\n     * Value: Object with the rest of mirrorpanel's parameters\n     * @type {Object}\n     */\n    this.defaultCompareViz = options.defaultCompareViz || 0;\n\n\n\n    /**\n     * mirrorpanelParams\n     * @public\n     * Value: Object with the rest of mirrorpanel's parameters\n     * @type {Object}\n     */\n    this.mirrorpanelParams = options.mirrorpanelParams || {};\n\n    /**\n     * timelineParams\n     * @public\n     * Value: Object with the rest of timeline's parameters\n     * @type {Object}\n     */\n    this.timelineParams = options.timelineParams || {};\n\n    /**\n     * lyrcompareParams\n     * @public\n     * Value: Object with the rest of lyrcompare's parameters\n     * @type {Object}\n     */\n    this.lyrcompareParams = options.lyrcompareParams || {};\n\n\n    /**\n     * transparencyParams\n     * @public\n     * Value: Object with the rest of transparency's parameters\n     * @type {Object}\n     */\n    this.transparencyParams = options.transparencyParams || {};\n\n    /**\n     * backImgLayersConfig\n     * @public\n     * Value: Object with configuration of BackImgLayers plugin\n     * @type {Object}\n     */\n     this.backImgLayersConfig = options.backImgLayersConfig || {};\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    /**\n     *@private\n     *@type { string }\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api stable\n   */\n  addTo(map) {\n\n    // e2m: ponemos el arraque del visualizador mirror a cero por defecto\n    this.mirrorpanelParams.modeViz = this.mirrorpanelParams.modeViz || {};\n    this.mirrorpanelParams.modeViz = (this.defaultCompareMode==='mirror'? this.defaultCompareViz : 0);\n\n    // e2m: ponemos el arraqnue del visualizador mirror a cero por defecto\n    this.lyrcompareParams.comparisonMode = this.lyrcompareParams.comparisonMode || {};\n    this.lyrcompareParams.comparisonMode = (this.defaultCompareMode==='curtain'? this.defaultCompareViz : 0);\n\n    console.log(this.defaultCompareMode);\n\n    /**COMP_PLUGIN_NAMES[this.defaultCompareMode]\n     * \n     */\n    \n     //console.log(`defaultComparisonMode: ${this.COMP_PLUGIN_NAMES[this.defaultCompareMode]}`);\n     //console.log(`defaultComparisonViz: ${this.defaultCompareViz}`);\n\n    console.log(this.mirrorpanelParams);\n\n\n    this.control_ = new ComparepanelControl({\n      baseLayers: this.baseLayers,\n      mirrorpanelParams: this.mirrorpanelParams,\n      timelineParams: this.timelineParams,\n      lyrcompareParams: this.lyrcompareParams,\n      transparencyParams: this.transparencyParams,\n      defaultComparisonMode: this.COMP_PLUGIN_NAMES[this.defaultCompareMode],\n      defaultComparisonViz: this.defaultCompareViz,\n      position: this.position,\n    });\n\n    this.controls_.push(this.control_);\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelComparepanel', {\n      collapsible: this.collapsible,\n      collapsed: this.collapsed,\n      position: M.ui.position[this.position],\n      className: this.className,\n      collapsedButtonClass: 'cp-icon-comparepanel',//cp-icon\n      tooltip: this.tooltip_,\n    });\n\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n    this.panel_._element.classList.add(this.vertical ? 'orientation-vertical' : 'orientation-horizontal');\n  }\n\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  destroy() {\n    this.control_.deactivate();\n    this.map_.removeControls([this.control_]);\n    [this.control_, this.panel_, this.map_, this.baseLayers, this.vertical, this.mirrorpanelParams, this.lyrcompareParams, this.timelineParams, this.transparencyParams] = [null, null, null, null, null, null, null, null, null];\n  }\n\n  /**\n   * This function gets name plugin\n   * @getter\n   * @public\n   * @returns {string}\n   * @api stable\n   */\n  get name() {\n    return this.name_;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @getter\n   * @api stable\n   * @return {Object}\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    const baseLayers = JSON.stringify(this.baseLayers).replace(/\\[/g, '!!').replace(/\\]/g, '¡¡');\n    return `${this.name}=${this.position}*!${this.vertical}*!${baseLayers}`;\n  }\n\n  /**\n   * Activate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  activate() {\n    this.control_.activate();\n  }\n\n  /**\n   * Desactivate plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  deactivate() {\n    this.control_.deactivate();\n  }\n\n  /**\n   * This function compare if pluging recieved\n   * by param is instance of M.plugin.Comparepanel\n   * @public\n   * @function\n   * @param {M.plugin} plugin to compare\n   * @api stable\n   */\n  equals(plugin) {\n    return plugin instanceof Comparepanel;\n  }\n}\n","import M$plugin$Comparepanel from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/comparepanel';\nimport M$control$ComparepanelControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/comparepanelcontrol';\nimport M$plugin$LyrCompare from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cplyrcompare';\nimport M$control$LyrCompareControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cplyrcomparecontrol';\nimport M$plugin$Mirrorpanel from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cpmirrorpanel';\nimport M$control$CompareMirrorpanel from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cpmirrorpanelcontrol';\nimport M$plugin$Timeline from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cptimeline';\nimport M$control$TimelineControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cptimelinecontrol';\nimport M$plugin$Transparency from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cptransparency';\nimport M$control$TransparencyControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/cptransparencycontrol';\nimport M$plugin$Lyrdropdown from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/lyrdropdown';\nimport M$control$LyrdropdownControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/facade/js/lyrdropdowncontrol';\nimport M$impl$control$ComparepanelControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/comparepanelcontrol';\nimport M$impl$control$Lyrcomparecontrol from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cplyrcomparecontrol';\nimport M$impl$control$LyrcompareInteraction from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cplyrcompareinteraction';\nimport M$impl$control$CompareMirrorpanel from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cpmirrorpanel';\nimport M$impl$control$TimelineControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cptimelinecontrol';\nimport M$impl$control$TransparencyControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cptransparencycontrol';\nimport M$impl$control$TransparentInteraction from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/cptransparentInteraction';\nimport M$impl$control$LyrdropdownControl from '/home/jesusdiaz/Workspace/Git/mapea-lite/api-ign-js/src/plugins/comparepanel/src/impl/ol/js/lyrdropdowncontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.Comparepanel = M$plugin$Comparepanel;\nwindow.M.control.ComparepanelControl = M$control$ComparepanelControl;\nwindow.M.plugin.LyrCompare = M$plugin$LyrCompare;\nwindow.M.control.LyrCompareControl = M$control$LyrCompareControl;\nwindow.M.plugin.Mirrorpanel = M$plugin$Mirrorpanel;\nwindow.M.control.CompareMirrorpanel = M$control$CompareMirrorpanel;\nwindow.M.plugin.Timeline = M$plugin$Timeline;\nwindow.M.control.TimelineControl = M$control$TimelineControl;\nwindow.M.plugin.Transparency = M$plugin$Transparency;\nwindow.M.control.TransparencyControl = M$control$TransparencyControl;\nwindow.M.plugin.Lyrdropdown = M$plugin$Lyrdropdown;\nwindow.M.control.LyrdropdownControl = M$control$LyrdropdownControl;\nwindow.M.impl.control.ComparepanelControl = M$impl$control$ComparepanelControl;\nwindow.M.impl.control.Lyrcomparecontrol = M$impl$control$Lyrcomparecontrol;\nwindow.M.impl.control.LyrcompareInteraction = M$impl$control$LyrcompareInteraction;\nwindow.M.impl.control.CompareMirrorpanel = M$impl$control$CompareMirrorpanel;\nwindow.M.impl.control.TimelineControl = M$impl$control$TimelineControl;\nwindow.M.impl.control.TransparencyControl = M$impl$control$TransparencyControl;\nwindow.M.impl.control.TransparentInteraction = M$impl$control$TransparentInteraction;\nwindow.M.impl.control.LyrdropdownControl = M$impl$control$LyrdropdownControl;\n"],"sourceRoot":""}