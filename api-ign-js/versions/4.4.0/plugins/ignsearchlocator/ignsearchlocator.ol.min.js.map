{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/ignsearchlocator.html","webpack:///./src/templates/results.html","webpack:///./src/templates/xylocator.html","webpack:///./src/templates/parcela.html","webpack:///./src/templates/recent-results.html","webpack:///./src/facade/js/constants.js","webpack:///./src/impl/ol/js/ignsearchlocatorcontrol.js","webpack:///./src/facade/js/ignsearchlocatorcontrol.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/facade/js/ignsearchlocator.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","geographicNameType","typingTimer","IGNSearchLocatorControl","_M$impl$Control","_inherits","M","impl","Control","_super","_createSuper","_classCallCheck","apply","arguments","map","html","this","_get","_getPrototypeOf","scale","wmts3857scales","newScale","reduce","prev","curr","Math","abs","newResolution","indexOf","facadeMap_","getMapImpl","getView","setResolution","origin","coordinates","originProj","ol","proj","destProj","getProjection","code","coordinatesTransform","transform","normalizeNumber","source","destiny","getTransform","transformFunc","wkt","propertiesString","feature","format","WKT","readFeature","dataProjection","featureProjection","properties","JSON","parse","geom","setId","concat","Date","getTime","setProperties","wrapComplexFeature","featureGeom","getGeometry","getType","type","POLYGON","MULTI_POLYGON","centroid","getInteriorPoint","getInteriorPoints","geometryCollection","GeometryCollection","setGeometry","calculated","res","parseFloat","toFixed","translations","en","es","getLang","language","getTranslation","lang","ignsearchlocator","getValue","keyPath","length","undefined","translation","utils","isNullOrEmpty","console","warn","split","current","_M$Control","servicesToSearch","_this","CMC_url","DNPPP_url","CPMRC_url","catastroWMS","maxResults","noProcess","countryCode","urlCandidates","urlFind","urlReverse","urlPrefix","urlAssistant","urlDispatcher","resultVisibility","reverse","locationID","requestStreet","geocoderCoords","zoom","searchPosition","position","pointStyle","nomenclatorSearchType","helpUrl","cadastre","searchCoordinatesXYZ","order","isUndefined","IGNSearchLocatorImplControl","exception","ConsultaMunicipioCodigos_","DNPPP_url_","CPMRC_url_","selectProvincias","selectMunicipios","inputPoligono","inputParcela","inputRefCatastral","resultVisibility_","reverseActivated","urlParse","isXYLocatorActive","parcela_prov","parcela_mun","parcela_pol","parcela_parc","xytype","xydata","xylon","xylat","xylathh","xylatmm","xylatss","xylonhh","xylonmm","xylonss","xyutmx","xyutmy","provincecode","municipalityvalue","inputRC_","_this2","destroyMapLayers","Promise","success","template","compileSync","vars","direccion","obtener","buscparcela","busccoord","borrarresult","tooltip_input","accessibilityTab","resultsBox","querySelector","searchInput","addEventListener","clearResultsAndGeometry","style","display","openParcela","openXYLocator","e","createTimeout","document","getElementById","backgroundColor","clearResults","activationManager","openRecentsResults","clearTimeout","activateDeactivateReverse","clickReverseEvent","on","evt","CLICK","showReversePopUp","changePlaceholder","ADDED_TO_MAP","point","Point","radius","icon","form","class","rotation","rotate","offset","color","opacity","simple","Polygon","fill","drawNomenclatorResult","proxy","remote","then","geoJsonData","text","substring","removeLayers","clickedElementLayer","olFeature","getImpl","readFromWKT","lat","lng","layer","GeoJSON","features","displayInLayerSwitcher","createGeometryStyles","addLayers","setStyle","stroke","width","setZIndex","setTimeout","getOL3Layer","getSource","addFeature","zoomInLocation","fullAddress","createFullAddress","perfectResult","state","showSearchPopUp","fake","err","reprojCoords","reproject","coord","_this3","recents","window","localStorage","getItem","compiledResult","recentresults","places","querySelectorAll","forEach","listElement","goToLocation","appendChild","getLayers","removePopup","removeEventListener","checkEscKey","getElementsByTagName","cursor","invokeEscKey","concatUrlPaths","config","THEME_URL","dispatchEvent","KeyboardEvent","keyCode","which","shiftKey","ctrlKey","metaKey","error","_this4","etrs89pointCoordinates","reprojectReverse","params","urlToGet","mapCoordinates","dataCoordinates","returnData","showPopUp","_this5","searchInputValue","control","_this6","firstResult","target","replace","searchValue","innerHTML","classList","add","fontSize","nomenclatorCandidates","geocoderCandidates","nomenclatorFinished","candidatesFinished","getNomenclatorData","showCandidatesResults","getCandidatesData","_this7","allCandidates","j","push","remove","parragraph","createElement","infoMsg","createTextNode","results","elementList","item","click","_this8","urlSinJSON","json","popup","jsonResult","via","tip_via","address","portal","portalNumber","muni","province","toUpperCase","locationId","_this9","zoomIn","requestPlace","addParameters","request","query","sourcename","outputformat","latLngString","location","resultTitle","title","latLngArray","latitude","longitude","newGeojson","geometry","inputValue","resultsArray","_this10","newInputVal","encodeURIComponent","resolve","_this11","thisElement","splice","elem","cps","elementsData","_this12","id","element","getAttribute","includes","parenthesisIndex","_this13","isRecentElement","currentElement","candidates","selectedObject","findClickedItem","getFindData","drawGeocoderResult","service","coords","_this14","resultsList","Vector","calculateMaxExtent","extent","setBbox","setZoom","fire","getExtent","elementClicked","filter","setRecents","found","checkDuplicateRecent","shift","setItem","stringify","setOfCoordinates","coordinatesLayer","getPopup","preventDefault","element_","trim","inputRC","dialog","info","substr","searchUrl","Provincia","Municipio","SRS","RC","search_","showResults_","body","buildUrl_","_this15","srs","Coordenada_X","Coordenada_Y","showInfoFromURL_","un","jsonp","response","_this16","infos","formatedInfo","formatInfo_","tab","POPUP_TITLE","content","join","Popup","addTab","addPopup","getCoordinate","hasExternalContent","getTabs","removeTab","ldtNode","valuePopup","codProv","codMun","link","rootElement","DOMParser","parseFromString","childNodes","nodeValue","coordNode","pcNode","pc1Node","pc2Node","beautifyAttribute","toLowerCase","processor","_this17","acceptOVCSW","xml","result","resultsTemplateVars","_this18","parseRCResultsForTemplate_","resultTemplate","drawGeocoderResultRC","append","docs","parseCPMRCResults","rcResults_","unshift","total","partial","notResutls","attri","xcen","ycen","locator_","attributes","showSearchPopUpRC","y","xFloat","yFloat","setCenter","_this19","compiledXYLocator","parcela","titleparcela","municipality","selectmuni","selectprov","estate","plot","titlerefCatastral","refCastatro","search","consultReference","notaRef","accessibility","town","onProvinciaSelect","onParamsSearch","onRCSearch","onRCConsult","_this20","CodigoProvincia","CodigoMunicipio","CodigoMunicipioINE","Poligono","Parcela","parseParamsResultsForTemplate_","rcNode","_this21","lrcdnpNode","pc1Value","pc2Value","docsRC","xmlResults","geoNode","xcenNode","ycenNode","srsNode","rcId","errorCtlNode","cuerr","errorDescTxt","SEARCHING_CLASS","idprov","munici","_this22","provinceCode","clearMunicipiosSelect","CodigoMunicipioIne","loadMunicipiosSelect","muniNodes","select","option","locat","firstChild","removeChild","_this23","xylocator","hasHelp","isUrl","locate","negative","east","west","north","south","geographic","zone","dms","dd","selectTarget","options","selectedIndex","setAttribute","manageInputs_","calculate_","clickedGeometry","drawingDiv","parentNode","selectedOption","x","xString","yString","hhLon","mmLon","ssLon","dirLon","hhLat","mmLat","ssLat","dirLat","checkDegreeValue_","ex","reprojectXY","num","Number","isNaN","center","Feature","addFeatures","flag","placeholder","src","anchor","exactResult","exitState","destinyProj","destinySource","newCoordinates","newCoords","mapcoords","featureCoordinates","hasOffset","featureTabOpts","myPopUp","panMapIfOutOfView","setOffset","setScale","_this24","el","IGNSearchLocator","_M$Plugin","Plugin","map_","controls_","IGNSEARCH_TYPES_CONFIGURATION","isCollapsed","collapsible","tooltip_","tooltip","reverse_","locationID_","requestStreet_","isString","geocoderCoords_","metadata_","api","metadata","zoom_","parseInt","data","panel_","ui","Panel","collapsed","className","collapsedButtonClass","addControls","addPanels","setResultVisibility","plugin","removeControls","_ref","M$plugin$IGNSearchLocator","M$control$IGNSearchLocatorControl","M$impl$control$IGNSearchLocatorControl"],"mappings":"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","file":"ignsearchlocator.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = \"<div id=\\\"div-contenedor\\\" tabindex=\\\"0\\\" class=\\\"m-control m-container m-ignsearchlocator\\\" title=\\\"IGN search locator\\\">\\n    <div class=\\\"search-panel\\\">\\n        <input type=\\\"text\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-search-input\\\" class=\\\"m-input-search\\\" autocomplete=\\\"new-password\\\" title=\\\"{{translations.tooltip_input}}\\\" placeholder=\\\"{{translations.direccion}}\\\" />\\n        <button type=\\\"button\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-locate-button\\\" title=\\\"{{translations.obtener}}\\\">\\n            <span class=\\\"icon-locate\\\" />\\n        </button>\\n        <button type=\\\"button\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-parcela-button\\\" class=\\\"m-button-limpiar2\\\" title=\\\"{{translations.buscparcela}}\\\">\\n            <span class=\\\"icon-catastro\\\" />\\n        </button>\\n        <button type=\\\"button\\\"  tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-xylocator-button\\\" class=\\\"m-button-limpiar\\\" title=\\\"{{translations.busccoord}}\\\">\\n            <span class=\\\"icon-coordinates\\\" />\\n        </button>\\n        <button type=\\\"button\\\" tabindex=\\\"0\\\" id=\\\"m-ignsearchlocator-clear-button\\\" class=\\\"m-button-limpiar\\\" title=\\\"{{translations.borrarresult}}\\\">\\n            <span class=\\\"icon-remove\\\" />\\n        </button>\\n    </div>\\n    <div id=\\\"m-ignsearchlocator-results\\\">\\n        <!-- Here goes the list of search results -->\\n    </div>\\n</div>\\n\";","module.exports = \"<ul id=\\\"m-ignsearchlocator-results-list\\\">\\n    {{#each places}}\\n        {{#if this.address}}\\n            {{#printType this.type this.address this.id this.municipality this.cps}}\\n            {{/printType}}\\n        {{else}}\\n            {{#printType this.type this.title this.id this.municipality this.cps}}\\n            {{/printType}}\\n        {{/if}}\\n    {{/each}}\\n</ul>\\n\";","module.exports = \"<div class=\\\"m-xylocator-container\\\">\\n    <div class=\\\"m-xylocator-panel panel-codigo\\\">\\n        <div role=\\\"heading\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.title}}\\\" class=\\\"title\\\">{{translations.title}}</div>\\n        <div class=\\\"m-xylocator-datas\\\">\\n            <div id=\\\"m-xylocator-coordinatesSystemXYLocator\\\">\\n                <br>\\n                <b role=\\\"text\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.srs}}\\\"><span>{{translations.srs}}:</span></b>\\n                <select role=\\\"select\\\" tabindex=\\\"0\\\" aria-label=\\\"{{accessibility.srs}}\\\" name=\\\"srs\\\" id=\\\"m-xylocator-srs\\\" class=\\\"dropdown\\\">\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"d\\\" value=\\\"EPSG:4258d\\\" option=\\\"selected\\\">ETRS89 {{translations.geographic}} (4258) {{translations.dd}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"d\\\" value=\\\"EPSG:4326d\\\">WGS84 {{translations.geographic}} (4326) {{translations.dd}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"dms\\\" value=\\\"EPSG:4258dms\\\" option=\\\"selected\\\">ETRS89 {{translations.geographic}} (4258) {{translations.dms}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"dms\\\" value=\\\"EPSG:4326dms\\\">WGS84 {{translations.geographic}} (4326) {{translations.dms}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:3857\\\">WGS84 Pseudo Mercator (3857)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25831\\\">ETRS89 UTM {{translations.zone}} 31N (25831)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25830\\\">ETRS89 UTM {{translations.zone}} 30N (25830)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25829\\\">ETRS89 UTM {{translations.zone}} 29N (25829)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:4083\\\">REGCAN95 / UTM {{translations.zone}} 28N (4083)</option>\\n                </select>\\n                {{#if hasHelp}}\\n                  <div class=\\\"m-xylocator-help-button\\\" title=\\\"EPSG\\\">\\n                    <a href=\\\"{{helpUrl}}\\\" target=\\\"_blank\\\"><i class=\\\"icon-help\\\"></i></a>\\n                  </div>\\n                {{/if}}\\n            </div>\\n            <div id=\\\"m-xylocator-utm\\\" style=\\\"display:none;\\\">\\n                <b>\\n                    <p role=\\\"text\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: 0px !important;\\\">X:</p>\\n                </b>\\n                <input tabindex=\\\"0\\\" type=\\\"text\\\" name=\\\"UTM-X\\\" id=\\\"UTM-X\\\" value=\\\"439770,29\\\" style=\\\"color:black\\\">\\n                <b>\\n                    <p role=\\\"text\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: 0px !important; margin-left: 15px;\\\">Y:</p>\\n                </b>\\n                <input tabindex=\\\"0\\\" type=\\\"text\\\" name=\\\"UTM-Y\\\" id=\\\"UTM-Y\\\" value=\\\"4477526,14\\\" style=\\\"color:black\\\">\\n            </div>\\n            <div id=\\\"m-xylocator-dms\\\" style=\\\"display:none;\\\">\\n                <b>\\n                    <p tabindex=\\\"0\\\" role=\\\"text\\\" aria-label=\\\"{{translations.longitude}}\\\">{{translations.longitude}}:</p>\\n                </b>\\n                <div style=\\\"margin-bottom: -1.5rem;\\\">\\n                    <div>\\n                        <input tabindex=\\\"0\\\" type=\\\"number\\\" name=\\\"LONHH\\\" id=\\\"LONHH\\\" value=\\\"3\\\" min=\\\"0\\\" max=\\\"180\\\" style=\\\"color:black\\\"><span></span>\\n                    </div>\\n                    <div>\\n                        <input tabindex=\\\"0\\\" type=\\\"number\\\" name=\\\"LONMM\\\" id=\\\"LONMM\\\" value=\\\"42\\\" min=\\\"0\\\" max=\\\"59\\\" style=\\\"color:black\\\"><span>'</span>\\n                    </div>\\n                    <div>\\n                        <input tabindex=\\\"0\\\" type=\\\"number\\\" name=\\\"LONSS\\\" id=\\\"LONSS\\\" value=\\\"36\\\" min=\\\"0\\\" max=\\\"59.9999\\\" style=\\\"color:black\\\"><span>''</span>\\n                    </div>\\n                    <div class=\\\"m-xylocator-dms-radio\\\">\\n                        <table>\\n                            <tbody>\\n                                <tr>\\n                                    <td><input tabindex=\\\"0\\\" aria-label=\\\"{{translations.east}}\\\" type=\\\"radio\\\" name=\\\"LONDIR\\\" style=\\\"color:black\\\" value=\\\"east\\\"></td>\\n                                    <td role=\\\"text\\\" tabindex=\\\"0\\\">{{translations.east}}</td>\\n                                </tr>\\n                                <tr>\\n                                    <td><input tabindex=\\\"0\\\" aria-label=\\\"{{translations.east}}\\\" type=\\\"radio\\\" name=\\\"LONDIR\\\" style=\\\"color:black\\\" value=\\\"west\\\" checked></td>\\n                                    <td role=\\\"text\\\" tabindex=\\\"0\\\">{{translations.west}}</td>\\n                                </tr>\\n                                </tbdoy>\\n                        </table>\\n                    </div>\\n                </div>\\n                <b>\\n                    <p tabindex=\\\"0\\\" role=\\\"text\\\">{{translations.latitude}}:</p>\\n                </b>\\n                <div style=\\\"margin-bottom: -0.8rem;\\\">\\n                    <div>\\n                        <input tabindex=\\\"0\\\" type=\\\"number\\\" name=\\\"LATHH\\\" id=\\\"LATHH\\\" value=\\\"40\\\" min=\\\"0\\\" max=\\\"180\\\" style=\\\"color:black\\\"><span></span>\\n                    </div>\\n                    <div>\\n                        <input tabindex=\\\"0\\\" type=\\\"number\\\" name=\\\"LATMM\\\" id=\\\"LATMM\\\" value=\\\"26\\\" min=\\\"0\\\" max=\\\"59\\\" style=\\\"color:black\\\"><span>'</span>\\n                    </div>\\n                    <div>\\n                        <input tabindex=\\\"0\\\" type=\\\"number\\\" name=\\\"LATSS\\\" id=\\\"LATSS\\\" value=\\\"46\\\" min=\\\"0\\\" max=\\\"59.9999\\\" style=\\\"color:black\\\"><span>''</span>\\n                    </div>\\n                    <div class=\\\"m-xylocator-dms-radio\\\">\\n                        <table>\\n                            <tbody>\\n                                <tr>\\n                                    <td><input tabindex=\\\"0\\\" type=\\\"radio\\\" name=\\\"LATDIR\\\" style=\\\"color:black\\\" value=\\\"north\\\" checked></td>\\n                                    <td tabindex=\\\"0\\\" role=\\\"text\\\">{{translations.north}}</td>\\n                                </tr>\\n                                <tr>\\n                                    <td><input tabindex=\\\"0\\\" type=\\\"radio\\\" name=\\\"LATDIR\\\" style=\\\"color:black\\\" value=\\\"south\\\"></td>\\n                                    <td tabindex=\\\"0\\\" role=\\\"text\\\">{{translations.south}}</td>\\n                                </tr>\\n                                </tbdoy>\\n                        </table>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"m-xylocator-lonlat\\\" id=\\\"m-xylocator-latlon\\\">\\n                <b>\\n                    <p class=\\\"parcela--input\\\" tabindex=\\\"0\\\" style=\\\"width: 0px !important;\\\">{{translations.longitude}}:</p>\\n                </b>\\n                <input type=\\\"text\\\" tabindex=\\\"0\\\" title=\\\"{{translations.negative}}\\\" name=\\\"LON\\\" id=\\\"LON\\\" value=\\\"-3,71024\\\" style=\\\"color:black\\\">\\n                <b>\\n                    <p class=\\\"parcela--input\\\" style=\\\"width: 0px !important;\\\">{{translations.latitude}}:</p>\\n                </b>\\n                <input type=\\\"text\\\" tabindex=\\\"0\\\" title=\\\"{{translations.negative}}\\\" name=\\\"LAT\\\" id=\\\"LAT\\\" value=\\\"40,44620\\\" style=\\\"color:black\\\"></br>\\n                <i>\\n                    <p id=\\\"m-informa\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: 0px !important; display: contents; font-size: 13px; font-family: auto;\\\">{{translations.negative}}</p>\\n                </i>\\n            </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n            <button type=\\\"button\\\" aria-label=\\\"{{translations.locate}}\\\" class=\\\"represent\\\" id=\\\"m-xylocator-loc\\\">\\n                <i class=\\\"icon-coordinates\\\"></i> {{translations.locate}}\\n            </button>\\n        </div>\\n    </div>\\n</div>\\n\";","module.exports = \"<div class=\\\"m-xylocator-container\\\">\\n    <div class=\\\"m-xylocator-panel panel-codigo\\\">\\n        <div role=\\\"heading\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.titleparcela}}\\\" class=\\\"title\\\">{{translations.titleparcela}}</div>\\n        <div tabindex=\\\"0\\\" aria-label=\\\"{{translations.plot}}\\\" class=\\\"m-search-tabs\\\">\\n            <input type=\\\"radio\\\" name=\\\"tabset\\\" id=\\\"tab-search-parcela\\\" aria-controls=\\\"m-search-tab-parcela\\\" checked>\\n            <label for=\\\"tab-search-parcela\\\">Buscar parcela</label>\\n            <input type=\\\"radio\\\" name=\\\"tabset\\\" id=\\\"tab-search-catastro\\\" aria-controls=\\\"m-search-tab-catastro\\\">\\n            <label for=\\\"tab-search-catastro\\\">Buscar Catastro</label>\\n            <div class=\\\"m-search-tab-content\\\">\\n                <section id=\\\"m-search-tab-parcela\\\" class=\\\"m-search-tab-panels\\\">\\n                    <div class=\\\"m-xylocator-datas\\\">\\n                        <div id=\\\"m-searchParams-container\\\">\\n                            <div id=\\\"m-xylocator-coordinatesSystemParcela\\\">\\n                                <b>\\n                                    <p tabindex=\\\"0\\\" role=\\\"text\\\" id=\\\"m-provin\\\" class=\\\"parcela--input\\\">{{translations.province}}:</p>\\n                                </b>\\n                                <select role=\\\"select\\\" tabindex=\\\"0\\\" aria-label=\\\"{{accessibility.province}}\\\" id=\\\"m-searchParamsProvincia-select\\\" name=\\\"srs\\\" class=\\\"dropdown\\\">\\n                                    <option value=\\\"0\\\">{{translations.selectprov}}</option>\\n                                    <option value=\\\"02\\\">ALBACETE</option>\\n                                    <option value=\\\"03\\\">ALICANTE/ALACANT</option>\\n                                    <option value=\\\"04\\\">ALMERA</option>\\n                                    <option value=\\\"01\\\">ARABA/LAVA</option>\\n                                    <option value=\\\"33\\\">ASTURIAS</option>\\n                                    <option value=\\\"05\\\">VILA</option>\\n                                    <option value=\\\"06\\\">BADAJOZ</option>\\n                                    <option value=\\\"07\\\">BALEARS, ILLES</option>\\n                                    <option value=\\\"08\\\">BARCELONA</option>\\n                                    <option value=\\\"48\\\">BIZKAIA</option>\\n                                    <option value=\\\"09\\\">BURGOS</option>\\n                                    <option value=\\\"10\\\">CCERES</option>\\n                                    <option value=\\\"11\\\">CDIZ</option>\\n                                    <option value=\\\"39\\\">CANTABRIA</option>\\n                                    <option value=\\\"12\\\">CASTELLN/CASTELL</option>\\n                                    <option value=\\\"13\\\">CIUDAD REAL</option>\\n                                    <option value=\\\"14\\\">CRDOBA</option>\\n                                    <option value=\\\"15\\\">CORUA, A</option>\\n                                    <option value=\\\"16\\\">CUENCA</option>\\n                                    <option value=\\\"20\\\">GIPUZKOA</option>\\n                                    <option value=\\\"17\\\">GIRONA</option>\\n                                    <option value=\\\"18\\\">GRANADA</option>\\n                                    <option value=\\\"19\\\">GUADALAJARA</option>\\n                                    <option value=\\\"21\\\">HUELVA</option>\\n                                    <option value=\\\"22\\\">HUESCA</option>\\n                                    <option value=\\\"23\\\">JAN</option>\\n                                    <option value=\\\"24\\\">LEN</option>\\n                                    <option value=\\\"25\\\">LLEIDA</option>\\n                                    <option value=\\\"27\\\">LUGO</option>\\n                                    <option value=\\\"28\\\">MADRID</option>\\n                                    <option value=\\\"29\\\">MLAGA</option>\\n                                    <option value=\\\"30\\\">MURCIA</option>\\n                                    <option value=\\\"31\\\">NAVARRA</option>\\n                                    <option value=\\\"32\\\">OURENSE</option>\\n                                    <option value=\\\"34\\\">PALENCIA</option>\\n                                    <option value=\\\"35\\\">PALMAS, LAS</option>\\n                                    <option value=\\\"36\\\">PONTEVEDRA</option>\\n                                    <option value=\\\"26\\\">RIOJA, LA</option>\\n                                    <option value=\\\"37\\\">SALAMANCA</option>\\n                                    <option value=\\\"38\\\">SANTA CRUZ DE TENERIFE</option>\\n                                    <option value=\\\"40\\\">SEGOVIA</option>\\n                                    <option value=\\\"41\\\">SEVILLA</option>\\n                                    <option value=\\\"42\\\">SORIA</option>\\n                                    <option value=\\\"43\\\">TARRAGONA</option>\\n                                    <option value=\\\"44\\\">TERUEL</option>\\n                                    <option value=\\\"45\\\">TOLEDO</option>\\n                                    <option value=\\\"46\\\">VALENCIA/VALNCIA</option>\\n                                    <option value=\\\"47\\\">VALLADOLID</option>\\n                                    <option value=\\\"49\\\">ZAMORA</option>\\n                                    <option value=\\\"50\\\">ZARAGOZA</option>\\n                                    <option value=\\\"51\\\">CEUTA</option>\\n                                    <option value=\\\"52\\\">MELILLA</option>\\n                                </select>\\n                            </div>\\n                            <div id=\\\"m-xylocator-coordinatesSystemParcela\\\">\\n                                <b>\\n                                    <p id=\\\"m-munici\\\" tabindex=\\\"0\\\" role=\\\"text\\\" class=\\\"parcela--input\\\">{{translations.municipality}}:</p>\\n                                </b>\\n                                <select id=\\\"m-searchParamsMunicipio-select\\\" name=\\\"Municipios\\\" class=\\\"dropdown\\\">\\n                                    <option value=\\\"0\\\">{{translations.selectmuni}}</option>\\n                                </select>\\n                            </div>\\n\\n                            <div id=\\\"m-xylocator-dms\\\">\\n                                <b>\\n                                    <p type=\\\"text\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: 60px\\\">{{translations.estate}}:</p>\\n                                </b>\\n                                <input type=\\\"text\\\" tabindex=\\\"0\\\" id=\\\"m-searchParamsPoligono-input\\\" style=\\\"color:black\\\">\\n                                <b>\\n                                    <p type=\\\"text\\\" tabindex=\\\"0\\\" class=\\\"parcela--input\\\" style=\\\"width: auto\\\">{{translations.plot}}:</p>\\n                                </b>\\n                                <input type=\\\"text\\\" tabindex=\\\"0\\\" id=\\\"m-searchParamsParcela-input\\\" style=\\\"color:black\\\">\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"button\\\">\\n                        <button type=\\\"button\\\" aria-label=\\\"{{translations.search}}\\\" tabindex=\\\"0\\\" class=\\\"represent\\\" id=\\\"m-searchParams-button\\\" style=\\\"margin-right:10px\\\">\\n                            <i class=\\\"icon-position\\\"></i> {{translations.search}}\\n                        </button>\\n                    </div>\\n                </section>\\n                <section id=\\\"m-search-tab-catastro\\\" class=\\\"m-search-tab-panels\\\">\\n                    <div class=\\\"m-xylocator-datas\\\">\\n                        <div id=\\\"m-searchParams-container\\\">\\n                            <div id=\\\"m-xylocator-coordinatesSystemRefCatastral\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.refCastatro}}\\\">\\n                                <b>\\n                                    <p tabindex=\\\"0\\\" role=\\\"text\\\" class=\\\"refCastastrl--input\\\">{{translations.refCastatro}}:</p>\\n                                </b>\\n                                <input type=\\\"text\\\" tabindex=\\\"0\\\" aria-label=\\\"{{accessibility.cadastre}}\\\" id=\\\"m-refCatastral-input\\\" style=\\\"color:black; width: 97% !important;\\\"\\n                                    maxlength=\\\"20\\\">\\n\\n                                <i>\\n                                    <p tabindex=\\\"0\\\" role=\\\"text\\\" aria-label=\\\"{{translations.notaRef}}\\\" id=\\\"m-informa\\\" class=\\\"parcela--input\\\"\\n                                        style=\\\"width: 0px !important; display: contents; font-size: 13px; font-family: auto;\\\">\\n                                        {{translations.notaRef}}</p>\\n                                </i>\\n                            </div>\\n\\n                        </div>\\n                    </div>\\n\\n                    <div class=\\\"button\\\">\\n                        <button type=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.search}}\\\" class=\\\"represent\\\" id=\\\"m-refCatastral-button\\\" style=\\\"margin-left: 5px\\\">\\n                            <i class=\\\"icon-catastro\\\"></i> {{translations.search}}\\n                        </button>\\n\\n                        <button type=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"{{translations.consultReference}}\\\" class=\\\"represent\\\" id=\\\"m-consulRef-button\\\" style=\\\"margin-left: 5px\\\">\\n                            <i class=\\\"icon-info\\\"></i> {{translations.consultReference}}\\n                        </button>\\n                    </div>\\n                </section>\\n            </div>\\n        </div>\\n\\n    </div>\\n</div>\\n\";","module.exports = \"<ul id=\\\"m-ignsearchlocator-recent-results-list\\\">\\r\\n    {{#each places}}\\r\\n    {{#if this.address}}\\r\\n        {{#printType this.type this.address this.id this.municipality this.cps}}\\r\\n        {{/printType}}\\r\\n    {{else}}\\r\\n        {{#printType this.type this.title this.id this.municipality this.cps}}\\r\\n        {{/printType}}\\r\\n    {{/if}}\\r\\n    {{/each}}\\r\\n</ul>\";","const geographicNameType = [\n  'Estado',\n  // 'Comunidad autnoma',\n  // 'Ciudad con estatuto de autonoma',\n  // 'Provincia',\n  // 'Municipio',\n  // 'EATIM',\n  'Isla administrativa',\n  'Comarca administrativa',\n  'Jurisdiccin',\n  // 'Capital de Estado',\n  // 'Capital de comunidad autnoma y ciudad con estatuto de autonoma',\n  // 'Capital de provincia',\n  // 'Capital de municipio',\n  // 'Capital de EATIM',\n  // 'Entidad colectiva',\n  // 'Entidad menor de poblacin',\n  // 'Distrito municipal',\n  // 'Barrio',\n  // 'Entidad singular',\n  // 'Construccin/instalacin abierta',\n  // 'Edificacin',\n  'Vrtice Geodsico',\n  // 'Hitos de demarcacin territorial',\n  // 'Hitos en vas de comunicacin',\n  'Alineacin montaosa',\n  'Montaa',\n  'Paso de montaa',\n  'Llanura',\n  'Depresin',\n  'Vertientes',\n  'Comarca geogrfica',\n  'Paraje',\n  'Elemento puntual del paisaje',\n  'Saliente costero',\n  'Playa',\n  'Isla',\n  'Otro relieve costero',\n  // 'Parque Nacional y Natural',\n  // 'Espacio protegido restante',\n  // 'Aeropuerto',\n  // 'Aerdromo',\n  // 'Pista de aviacin y helipuerto',\n  // 'Puerto de Estado',\n  // 'Instalacin portuaria',\n  // 'Carretera',\n  // 'Camino y va pecuaria',\n  // 'Va urbana',\n  // 'Ferrocarril',\n  'Curso natural de agua',\n  'Masa de agua',\n  'Curso artificial de agua',\n  // 'Embalse',\n  'Hidrnimo puntual',\n  'Glaciares',\n  'Mar',\n  'Entrante costero y estrecho martimo',\n  'Relieve submarino',\n];\nexport default geographicNameType;\n","/**\n * @module M/impl/control/IGNSearchLocatorControl\n */\nexport default class IGNSearchLocatorControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    this.map = map;\n    super.addTo(map, html);\n  }\n  /**\n   * This function sets a new scale to the map.\n   * Developed for WGS 84 / Pseudo - Mercator 3857 projection.\n   * @private\n   * @function\n   */\n  setScale(scale) {\n    const wmts3857scales = [\n      559082264.0287178,\n      279541132.0143589,\n      139770566.0071794,\n      69885283.00358972,\n      34942641.50179486,\n      17471320.75089743,\n      8735660.375448715,\n      4367830.187724357,\n      2183915.093862179,\n      1091957.546931089,\n      545978.7734655447,\n      272989.3867327723,\n      136494.6933663862,\n      68247.34668319309,\n      34123.67334159654,\n      17061.83667079827,\n      8530.918335399136,\n      4265.459167699568,\n      2132.729583849784,\n    ];\n    const wmts3857resolutions = [\n      156543.0339280410,\n      78271.51696402048,\n      39135.75848201023,\n      19567.87924100512,\n      9783.939620502561,\n      4891.969810251280,\n      2445.984905125640,\n      1222.992452562820,\n      611.4962262814100,\n      305.7481131407048,\n      152.8740565703525,\n      76.43702828517624,\n      38.21851414258813,\n      19.10925707129406,\n      9.554628535647032,\n      4.777314267823516,\n      2.388657133911758,\n      1.194328566955879,\n      0.5971642834779395,\n    ];\n    // Finds closest standard scale\n    const newScale = wmts3857scales.reduce((prev, curr) => {\n      return (Math.abs(curr - scale) < Math.abs(prev - scale) ? curr : prev);\n    });\n    const newResolution = wmts3857resolutions[wmts3857scales.indexOf(newScale)];\n    const olMap = this.facadeMap_.getMapImpl();\n    const olView = olMap.getView();\n    olView.setResolution(newResolution);\n  }\n  /**\n   * This function reprojects map on selected SRS.\n   *\n   * @function\n   * @param {string} origin - EPSG:25830, EPSG:4326, ..., etc\n   * @param {array<number>} coordinates\n   * @api\n   */\n  reproject(origin, coordinates) {\n    const originProj = ol.proj.get(origin);\n    const destProj = ol.proj.get(this.map.getProjection().code);\n    let coordinatesTransform = ol.proj.transform(coordinates, originProj, destProj);\n    coordinatesTransform = [this.normalizeNumber(coordinates[0], coordinatesTransform[0]),\n      this.normalizeNumber(coordinates[1], coordinatesTransform[1]),\n    ];\n    return coordinatesTransform;\n  }\n\n  /**\n   * This function reprojects given coordinates to given projection.\n   * @private\n   * @function\n   * @param { Array <number> } coordinates - [x,y]\n   * @param { string } source - 'EPSG:4326'\n   * @param { string } destiny - 'EPSG:4326'\n   */\n  reprojectReverse(coordinates, source, destiny) {\n    const transformFunc = ol.proj.getTransform(source, destiny);\n    return transformFunc(coordinates);\n  }\n\n  /**\n   * This function reprojects map on selected SRS.\n   *\n   * @function\n   * @param {string} origin - EPSG:25830, EPSG:4326, ..., etc\n   * @param {array<number>} coordinates\n   * @api\n   */\n  reprojectXY(origin, coordinates) {\n    const originProj = ol.proj.get(origin);\n    const destProj = ol.proj.get(this.map.getProjection().code);\n    let coordinatesTransform = ol.proj.transform(coordinates, originProj, destProj);\n    coordinatesTransform = [this.normalizeNumber(coordinates[0], coordinatesTransform[0]),\n      this.normalizeNumber(coordinates[1], coordinatesTransform[1]),\n    ];\n    return coordinatesTransform;\n  }\n\n  readFromWKT(wkt, propertiesString) {\n    const format = new ol.format.WKT();\n    const feature = format.readFeature(wkt, {\n      dataProjection: 'EPSG:4326',\n      featureProjection: this.map.getProjection().code,\n    });\n\n    const properties = JSON.parse(propertiesString);\n    delete properties.geom;\n    feature.setId(`f${new Date().getTime()}`);\n    feature.setProperties(properties);\n    this.wrapComplexFeature(feature);\n    return feature;\n  }\n\n  wrapComplexFeature(feature) {\n    const featureGeom = feature.getGeometry();\n    if ((featureGeom.getType() === M.geom.wkt.type.POLYGON) ||\n      (featureGeom.getType() === M.geom.wkt.type.MULTI_POLYGON)) {\n      let centroid;\n      if (featureGeom.getType() === M.geom.wkt.type.POLYGON) {\n        centroid = featureGeom.getInteriorPoint();\n      } else {\n        centroid = featureGeom.getInteriorPoints();\n      }\n\n      const geometryCollection = new ol.geom.GeometryCollection([centroid, featureGeom]);\n      feature.setGeometry(geometryCollection);\n    }\n  }\n\n  normalizeNumber(origin, calculated) {\n    let res = origin;\n    if (origin !== 0) {\n      res = parseFloat(calculated.toFixed(9));\n    }\n\n    return res;\n  }\n}\n","/**\n * @module M/control/IGNSearchLocatorControl\n */\nimport IGNSearchLocatorImplControl from '../../impl/ol/js/ignsearchlocatorcontrol';\nimport template from '../../templates/ignsearchlocator';\nimport results from '../../templates/results';\nimport xylocator from '../../templates/xylocator';\nimport parcela from '../../templates/parcela';\nimport { getValue } from './i18n/language';\nimport recentresults from '../../templates/recent-results';\n\nlet typingTimer;\n/**\n * @classdesc\n * This class creates an input for searching locations on a map.\n * It uses Instituto Geogrfico Nacional services Geocoder and Nomenclator\n * to search user's input location and return coordinates on click.\n */\nexport default class IGNSearchLocatorControl extends M.Control {\n  /*\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(\n    servicesToSearch,\n    CMC_url = null,\n    DNPPP_url = null,\n    CPMRC_url = null,\n    catastroWMS,\n    maxResults,\n    noProcess,\n    countryCode,\n    urlCandidates,\n    urlFind,\n    urlReverse,\n    urlPrefix,\n    urlAssistant,\n    urlDispatcher,\n    resultVisibility = true,\n    reverse,\n    locationID,\n    requestStreet,\n    geocoderCoords,\n    zoom,\n    searchPosition,\n    position,\n    pointStyle,\n    nomenclatorSearchType,\n    helpUrl,\n    cadastre,\n    searchCoordinatesXYZ,\n    order,\n  ) {\n    if (M.utils.isUndefined(IGNSearchLocatorImplControl)) {\n      M.exception(getValue('impl'));\n    }\n    const impl = new IGNSearchLocatorImplControl();\n    super(impl, 'IGNSearchLocator');\n    // Class properties\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = servicesToSearch;\n\n    /**\n     * Url for \"consulta de municipios para una provincia\"\n     * @private\n     * @type {String}\n     */\n    // eslint-disable-next-line camelcase\n    this.ConsultaMunicipioCodigos_ = CMC_url;\n\n    /**\n     * Url for \"consulta de datos no protegidos para un inmueble por su polgono parcela\"\n     * @private\n     * @type {String}\n     */\n    // eslint-disable-next-line camelcase\n    this.DNPPP_url_ = DNPPP_url;\n\n    /**\n     * Url for \"consulta de coordenadas por Provincia, Municipio y Referencia Catastral\"\n     * @private\n     * @type {String}\n     */\n    // eslint-disable-next-line camelcase\n    this.CPMRC_url_ = CPMRC_url;\n\n    /**\n     * catastroWMS\n     * @private\n     * @type {string}\n     */\n    this.catastroWMS = catastroWMS;\n\n    /**\n     * Select element for Provincias\n     * @private\n     * @type {HTMLElement}\n     */\n    this.selectProvincias = null;\n\n    /**\n     * Select element for Municipios\n     * @private\n     * @type {HTMLElement}\n     */\n    this.selectMunicipios = null;\n\n    /**\n     * Input element for Poligono\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputPoligono = null;\n\n    /**\n     * Input element for Parcela\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputParcela = null;\n\n    /**\n     * Input element for Parcela\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputRefCatastral = null;\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = maxResults;\n    /**\n     * This variables indicates which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'municipio,poblacion' | etc\n     */\n    this.noProcess = noProcess;\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = countryCode;\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = urlCandidates;\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = urlFind;\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = urlReverse;\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = urlPrefix;\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = urlAssistant;\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = urlDispatcher;\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility_ = resultVisibility;\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    this.nomenclatorSearchType = nomenclatorSearchType;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.searchPosition = searchPosition;\n    /**\n     * This variable indicates whether reverse geocoder button should be available.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverse = reverse;\n    /**\n     * This variable indicates whether reverse geocoder button is activated.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverseActivated = false;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID = locationID;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet = requestStreet;\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.geocoderCoords = geocoderCoords;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.urlParse = null;\n\n\n    /**\n     * Checks if point drawing tool is active.\n     * @private\n     * @type {Boolean}\n     */\n    this.isXYLocatorActive = false;\n\n    /**\n     * Zoom\n     *\n     * @private\n     * @type {number}\n     */\n    this.zoom = zoom;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.position = position;\n\n\n    // PARCELA\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.parcela_prov = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.parcela_mun = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.parcela_pol = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.parcela_parc = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xytype = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xydata = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylon = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylat = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylathh = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylatmm = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylatss = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylonhh = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylonmm = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xylonss = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xyutmx = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.xyutmy = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.provincecode = null;\n\n    /**\n     *\n     * @private\n     * @type {string}\n     */\n    this.municipalityvalue = null;\n\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = pointStyle;\n\n    /**\n     * Input element for RC\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputRC_ = null;\n\n    /**\n     * URL to the help for the icon\n     * @private\n     * @type {string}\n     */\n    this.helpUrl = helpUrl;\n\n    /**\n     * @private\n     * @type {Boolean}\n     */\n\n    this.cadastre = cadastre;\n\n    /**\n     * @private\n     * @type {Boolean}\n     */\n\n    this.searchCoordinatesXYZ = searchCoordinatesXYZ;\n\n    this.order = order;\n  }\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api\n   */\n  createView(map) {\n    this.map = map;\n    this.destroyMapLayers();\n    return new Promise((success) => {\n      const html = M.template.compileSync(template, {\n        vars: {\n          translations: {\n            direccion: getValue('direccion'),\n            obtener: getValue('obtener'),\n            buscparcela: getValue('buscparcela'),\n            busccoord: getValue('busccoord'),\n            borrarresult: getValue('borrarresult'),\n            tooltip_input: getValue('tooltip_input'),\n          },\n        },\n      });\n      this.accessibilityTab(html);\n      this.html = html;\n      this.resultsBox = html.querySelector('#m-ignsearchlocator-results');\n      this.searchInput = this.html.querySelector('#m-ignsearchlocator-search-input');\n      html.querySelector('#m-ignsearchlocator-clear-button').addEventListener('click', this.clearResultsAndGeometry.bind(this));\n      if (this.cadastre === false) {\n        html.querySelector('#m-ignsearchlocator-parcela-button').style.display = 'none';\n      } else {\n        html.querySelector('#m-ignsearchlocator-parcela-button').addEventListener('click', this.openParcela.bind(this));\n      }\n      if (this.searchCoordinatesXYZ === false) {\n        html.querySelector('#m-ignsearchlocator-xylocator-button').style.display = 'none';\n      } else {\n        html.querySelector('#m-ignsearchlocator-xylocator-button').addEventListener('click', this.openXYLocator.bind(this));\n      }\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('keyup', e => this.createTimeout(e));\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('click', () => {\n        if (document.getElementById('m-ignsearchlocator-xylocator-button').style.backgroundColor === 'rgb(113, 167, 211)' ||\n          document.getElementById('m-ignsearchlocator-parcela-button').style.backgroundColor === 'rgb(113, 167, 211)') {\n          // Eliminamos la seleccion del xylocator y parcela\n          this.clearResults();\n          this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n          this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n        }\n        if (!document.getElementById('m-ignsearchlocator-search-input').value &&\n          !document.getElementById('m-ignsearchlocator-recent-results-list')) {\n          this.openRecentsResults();\n        }\n      });\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('keydown', () => {\n        clearTimeout(typingTimer);\n      });\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('keydown', () => {\n        clearTimeout(typingTimer);\n      });\n\n      html.querySelector('#m-ignsearchlocator-locate-button').addEventListener('click', this.activateDeactivateReverse.bind(this));\n      document.querySelector('.ign-searchlocator-panel>.m-panel-btn').addEventListener('click', this.clearResults.bind(this));\n      this.clickReverseEvent = this.map.on(M.evt.CLICK, e => this.showReversePopUp(e));\n      this.changePlaceholder();\n      if (!this.reverse) {\n        html.querySelector('#m-ignsearchlocator-locate-button').style.display = 'none';\n      }\n\n      if (this.position === 'TC') {\n        document.querySelector('.ign-searchlocator-panel').style = 'position: relative; left: calc(50vw - 210px);';\n      }\n\n      this.on(M.evt.ADDED_TO_MAP, () => {\n        if (this.locationID && this.locationID.length > 0) {\n          this.point = new M.style.Point({\n            radius: 5,\n            icon: {\n              form: 'none',\n              class: 'g-cartografia-pin',\n              radius: 12,\n              rotation: 0,\n              rotate: false,\n              offset: [0, -12],\n              color: '#f00',\n              opacity: 1,\n            },\n          });\n          this.simple = new M.style.Polygon({\n            fill: {\n              color: 'black',\n              opacity: 0,\n            },\n          });\n          this.drawNomenclatorResult(this.locationID, false);\n        }\n        if (this.requestStreet && this.requestStreet.length > 0) {\n          M.proxy(false);\n          M.remote.get(this.requestStreet).then((res) => {\n            const geoJsonData = res.text.substring(9, res.text.length - 1);\n            this.map.removeLayers(this.clickedElementLayer);\n            const properties = JSON.parse(geoJsonData);\n            const olFeature = this.getImpl().readFromWKT(properties.geom, geoJsonData);\n            // Center coordinates\n            this.coordinates = `${properties.lat}, ${properties.lng}`;\n            // New layer with geometry\n            this.clickedElementLayer = new M.layer.GeoJSON({\n              name: getValue('searchresult'),\n              source: {\n                type: 'FeatureCollection',\n                features: [],\n              },\n            }, { displayInLayerSwitcher: false });\n\n            this.clickedElementLayer.displayInLayerSwitcher = false;\n            this.createGeometryStyles();\n            this.map.addLayers(this.clickedElementLayer);\n            const type = olFeature.getGeometry().getType();\n            if (type === 'Point') {\n              this.clickedElementLayer.setStyle(this.point);\n            }\n\n            if (type.indexOf('Polygon') > -1 || type.indexOf('Collection') > -1) {\n              this.clickedElementLayer.setStyle(new M.style.Polygon({\n                fill: {\n                  color: '#3399CC',\n                  opacity: 0,\n                },\n                stroke: {\n                  color: '#3399CC',\n                  width: 2,\n                },\n              }));\n            }\n\n            // Change zIndex value\n            this.clickedElementLayer.setZIndex(9999999999999999999);\n            // Stops showing polygon geometry\n            if (!this.resultVisibility_) {\n              this.clickedElementLayer.setStyle(this.simple);\n            }\n\n            setTimeout(() => {\n              this.clickedElementLayer.getImpl().getOL3Layer().getSource().addFeature(olFeature);\n              this.zoomInLocation('g', type, this.zoom);\n            }, 200);\n            // show popup for streets\n            if (properties.type === 'callejero' || properties.type === 'portal') {\n              const fullAddress = this.createFullAddress(properties);\n              const coordinates = [properties.lat, properties.lng];\n              const perfectResult = properties.state;\n              this.showSearchPopUp(fullAddress, coordinates, perfectResult, { fake: true });\n            }\n            M.proxy(true);\n          }).catch((err) => {\n            M.proxy(true);\n          });\n        }\n\n        if (this.geocoderCoords && this.geocoderCoords.length === 2) {\n          this.activateDeactivateReverse();\n          const reprojCoords = this.getImpl().reproject(this.geocoderCoords, 'EPSG:4326', map.getProjection().code);\n          this.showReversePopUp({\n            coord: reprojCoords,\n            fake: true,\n          });\n        }\n      });\n      success(html);\n    });\n  }\n\n  /**\n   * This function openresults\n   *\n   * @public\n   * @function\n   * @api\n   *\n   */\n  openRecentsResults() {\n    document.getElementById('m-ignsearchlocator-results').style = 'width: 347px';\n    const recents = window.localStorage.getItem('recents');\n    if (recents && recents.length > 0) {\n      const compiledResult = M.template.compileSync(recentresults, {\n        vars: {\n          places: JSON.parse(recents),\n        },\n      });\n      const elementList = compiledResult.querySelectorAll('li');\n      elementList.forEach((listElement) => {\n        listElement.addEventListener('click', () => {\n          this.goToLocation(listElement, true);\n        });\n      });\n      this.resultsBox.appendChild(compiledResult);\n    }\n  }\n\n  /**\n   * This function remove search layers.\n   *\n   * @public\n   * @function\n   * @api\n   *\n   */\n  destroyMapLayers() {\n    for (let i = 0; i < this.map.getLayers().length; i += 1) {\n      if (this.map.getLayers()[i].name === getValue('searchresult')) {\n        this.map.removeLayers(this.map.getLayers()[i]);\n        this.map.removePopup();\n      }\n    }\n  }\n\n  /**\n   * This function toggles reverse geocoder button activation.\n   *\n   * @public\n   * @function\n   * @api\n   *\n   */\n  activateDeactivateReverse() {\n    if (!this.reverseActivated) {\n      this.invokeEscKey();\n      this.reverseActivated = true;\n      document.querySelector('#m-ignsearchlocator-locate-button span').style.color = '#71a7d3';\n      document.addEventListener('keyup', this.checkEscKey.bind(this));\n      document.getElementsByTagName('body')[0].style.cursor = `url(${M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pushpin.svg'])}) 0 20, auto`;\n    } else {\n      this.reverseActivated = false;\n      document.querySelector('#m-ignsearchlocator-locate-button span').style.color = '#7A7A73';\n      document.removeEventListener('keyup', this.checkEscKey);\n      document.getElementsByTagName('body')[0].style.cursor = 'auto';\n    }\n  }\n\n  checkEscKey(evt) {\n    if (evt.key === 'Escape') {\n      this.reverseActivated = false;\n      document.querySelector('#m-ignsearchlocator-locate-button span').style.color = '#7A7A73';\n      document.removeEventListener('keyup', this.checkEscKey);\n      document.getElementsByTagName('body')[0].style.cursor = 'auto';\n    }\n  }\n\n  invokeEscKey() {\n    try {\n      document.dispatchEvent(new window.KeyboardEvent('keyup', {\n        key: 'Escape',\n        keyCode: 27,\n        code: '',\n        which: 69,\n        shiftKey: false,\n        ctrlKey: false,\n        metaKey: false,\n      }));\n    } catch (err) {\n      /* eslint-disable no-console */\n      console.error(err);\n    }\n  }\n\n  /**\n   * This function shows information tooltip on clicked point.\n   * @param {Event} e - Event\n   */\n  showReversePopUp(e) {\n    if (this.reverseActivated) {\n      // Reproject coordinates to ETRS89 on decimal grades (+ North latitude and East longitude)\n      const origin = this.map.getProjection().code;\n      const destiny = 'EPSG:4258';\n      const etrs89pointCoordinates = this.getImpl()\n        .reprojectReverse([e.coord[0], e.coord[1]], origin, destiny);\n      const params = `lon=${etrs89pointCoordinates[0]}&lat=${etrs89pointCoordinates[1]}`;\n      const urlToGet = `${this.urlReverse}?${params}`;\n      const mapCoordinates = e.coord;\n      this.geocoderCoords = etrs89pointCoordinates;\n      const dataCoordinates = [etrs89pointCoordinates[1], etrs89pointCoordinates[0]];\n      let fullAddress = '';\n      M.proxy(false);\n      M.remote.get(urlToGet).then((res) => {\n        if (res.text !== null) {\n          const returnData = JSON.parse(res.text);\n          fullAddress = this.createFullAddress(returnData);\n        } else {\n          fullAddress = getValue('exception.exists');\n        }\n        this.showPopUp(fullAddress, mapCoordinates, dataCoordinates, null, true, e, false);\n      });\n\n      M.proxy(true);\n    }\n  }\n\n  /**\n   * This function sets a timeout between keypress and search.\n   * @public\n   * @function\n   * @param {e} event that triggers the method\n   * @api\n   */\n  createTimeout(e) {\n    clearTimeout(typingTimer);\n    typingTimer = setTimeout(() => this.searchInputValue(e), 500);\n  }\n  /**\n   * This function gets activation button\n   *\n   * @public\n   * @function\n   * @param {HTML} html of control\n   * @api\n   */\n  getActivationButton(html) {\n    return html.querySelector('.m-ignsearchlocator button');\n  }\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof IGNSearchLocatorControl;\n  }\n  /**\n   * This function\n   * 1.- Takes user's input\n   * 2.- Searches for ocurrences on IGN sources\n   * 3.- Returns results as items in a drop-down list (returns address)\n   * 4.- Onclick on an item goes to its coordinates\n   * @public\n   * @function\n   * @param {event} e - event that triggers this method\n   * @api\n   */\n  searchInputValue(e, firstResult = false) {\n    document.getElementById('m-ignsearchlocator-results').style = 'width: 347px';\n\n    // const { value } = e.target;\n    const value = e.target.value.replace(',', ' ');\n    this.searchValue = value;\n    if (value.length <= 2) {\n      this.resultsBox.innerHTML = '';\n    } else {\n      this.resultsBox.innerHTML = '';\n      // Adds animation class during loading\n      this.resultsBox.classList.add('g-cartografia-spinner');\n      this.resultsBox.style.fontSize = '24px';\n\n      this.nomenclatorCandidates = [];\n      this.geocoderCandidates = [];\n\n      // saves on allCandidates search results from Nomenclator (CommunicationPoolservlet)\n      this.nomenclatorFinished = false;\n      this.candidatesFinished = false;\n      this.getNomenclatorData(value, this.nomenclatorCandidates).then(() => {\n        // saves on allCandidates search results from CartoCiudad (geocoder)\n        this.nomenclatorFinished = true;\n        this.showCandidatesResults(firstResult);\n      });\n\n      this.getCandidatesData(value, this.geocoderCandidates).then(() => {\n        this.candidatesFinished = true;\n        this.showCandidatesResults(firstResult);\n      });\n    }\n  }\n\n  showCandidatesResults(firstResult) {\n    this.allCandidates = [];\n    for (let i = 0; i < this.searchPosition.split(',').length; i += 1) {\n      if (this.searchPosition.split(',')[i] === 'nomenclator') {\n        for (let j = 0; j < this.nomenclatorCandidates.length; j += 1) {\n          this.allCandidates.push(this.nomenclatorCandidates[j]);\n        }\n      }\n      if (this.searchPosition.split(',')[i] === 'geocoder') {\n        for (let j = 0; j < this.geocoderCandidates.length; j += 1) {\n          this.allCandidates.push(this.geocoderCandidates[j]);\n        }\n      }\n    }\n\n    // Service doesn't find results\n    if (this.allCandidates.length === 0 && this.nomenclatorFinished && this.candidatesFinished) {\n      // Clears previous search\n      this.resultsBox.innerHTML = '';\n\n      // remove animation class and return to normal font size after loading\n      this.resultsBox.classList.remove('g-cartografia-spinner');\n      this.resultsBox.style.fontSize = '1em';\n      const parragraph = document.createElement('p');\n      const infoMsg = document.createTextNode(getValue('exception.noresults'));\n      parragraph.classList.add('m-ignsearchlocator-noresults');\n      parragraph.appendChild(infoMsg);\n      this.resultsBox.appendChild(parragraph);\n    } else if (this.allCandidates.length > 0) {\n      // Clears previous search\n      this.resultsBox.innerHTML = '';\n\n      // remove animation class and return to normal font size after loading\n      this.resultsBox.classList.remove('g-cartografia-spinner');\n      this.resultsBox.style.fontSize = '1em';\n\n      const compiledResult = M.template.compileSync(results, {\n        vars: {\n          places: this.allCandidates,\n        },\n      });\n      this.accessibilityTab(compiledResult);\n\n      const elementList = compiledResult.querySelectorAll('li');\n      elementList.forEach((listElement) => {\n        listElement.addEventListener('click', () => {\n          this.goToLocation(listElement);\n        });\n      });\n      if (firstResult === true && elementList.length > 0) {\n        elementList.item(0).click();\n      }\n\n      this.resultsBox.appendChild(compiledResult);\n    }\n  }\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResult(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer);\n    const urlSinJSON = geoJsonData;\n    const json = JSON.parse(urlSinJSON);\n    const olFeature = this.getImpl().readFromWKT(json.geom, urlSinJSON);\n    const properties = JSON.parse(urlSinJSON);\n    // Center coordinates\n    this.coordinates = `${properties.lat}, ${properties.lng}`;\n    // New layer with geometry\n    this.clickedElementLayer = new M.layer.GeoJSON({\n      name: getValue('searchresult'),\n      source: {\n        type: 'FeatureCollection',\n        features: [],\n      },\n    }, { displayInLayerSwitcher: false });\n\n    this.clickedElementLayer.displayInLayerSwitcher = false;\n    this.map.addLayers(this.clickedElementLayer);\n    const type = olFeature.getGeometry().getType();\n    if (type === 'Point') {\n      this.clickedElementLayer.setStyle(this.point);\n    }\n\n    if (type.indexOf('Polygon') > -1 || type.indexOf('Collection') > -1) {\n      this.clickedElementLayer.setStyle(new M.style.Polygon({\n        fill: {\n          color: '#3399CC',\n          opacity: 0,\n        },\n        stroke: {\n          color: '#3399CC',\n          width: 2,\n        },\n      }));\n    }\n\n    // Change zIndex value\n    this.clickedElementLayer.setZIndex(99999999999999999);\n    // Stops showing polygon geometry\n    if (!this.resultVisibility_) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n\n    setTimeout(() => {\n      this.clickedElementLayer.getImpl().getOL3Layer().getSource().addFeature(olFeature);\n      this.zoomInLocation('g', type, this.zoom);\n    }, 200);\n    // show popup for streets\n    if (properties.type === 'callejero' || properties.type === 'portal') {\n      const fullAddress = this.createFullAddress(properties);\n      const coordinates = [properties.lat, properties.lng];\n      const perfectResult = properties.state;\n      this.showSearchPopUp(fullAddress, coordinates, perfectResult);\n    } else if (this.popup !== undefined) {\n      this.map.removePopup(this.popup);\n    }\n  }\n  /**\n   * This function takes data from an entity and returns the complete address\n   * @param {string} jsonResult - json string with entity data\n   */\n  createFullAddress(jsonResult) {\n    const via = (jsonResult.tip_via === null ||\n      jsonResult.tip_via === undefined) ? '' : jsonResult.tip_via;\n    const address = (jsonResult.address === null ||\n      jsonResult.address === undefined) ? '' : jsonResult.address;\n    const portal = (jsonResult.portalNumber === null ||\n      jsonResult.portalNumber === undefined ||\n      jsonResult.portalNumber === 0) ? '' : jsonResult.portalNumber;\n    const muni = (jsonResult.muni === null ||\n      jsonResult.muni === undefined) ? '' : jsonResult.muni;\n    const province = (jsonResult.province === null ||\n      jsonResult.province === undefined) ? '' : jsonResult.province;\n    return `${via} ${address} ${portal}, ${muni.toUpperCase()}, ${province.toUpperCase()}`;\n  }\n  /**\n   * This function removes last search layer and adds new layer\n   * with current result (from nomenclator) features to map and zooms in result.\n   * @public\n   * @function\n   * @param {string} locationId - id of the location object\n   * @api\n   */\n  drawNomenclatorResult(locationId, zoomIn = true) {\n    this.requestStreet = '';\n    this.requestPlace = M.utils.addParameters(this.urlDispatcher, {\n      request: 'OpenQuerySource',\n      query: `<ogc:Filter><ogc:FeatureId fid=\"${locationId}\"/></ogc:Filter>`,\n      sourcename: `${this.urlPrefix}communicationsPoolServlet/sourceAccessWFS-INSPIRE-NGBE.rdf`,\n      outputformat: 'application/json',\n    });\n    this.locationID = locationId;\n    M.remote.get(this.requestPlace).then((res) => {\n      const latLngString = JSON.parse(res.text).results[0].location;\n      const resultTitle = JSON.parse(res.text).results[0].title;\n      const latLngArray = latLngString.split(' ');\n      const latitude = parseFloat(latLngArray[0]);\n      const longitude = parseFloat(latLngArray[1]);\n      this.map.removeLayers(this.clickedElementLayer);\n      const newGeojson = {\n        name: getValue('searchresult'),\n        source: {\n          type: 'FeatureCollection',\n          features: [{\n            type: 'Feature',\n            geometry: {\n              type: 'Point',\n              coordinates: [\n                longitude, latitude,\n              ],\n            },\n            properties: {\n              name: resultTitle,\n            },\n          }],\n        },\n      };\n      this.clickedElementLayer = new M.layer.GeoJSON(newGeojson, { displayInLayerSwitcher: false });\n      this.clickedElementLayer.displayInLayerSwitcher = false;\n      this.clickedElementLayer.setStyle(this.point);\n\n      // Change zIndex value\n      this.clickedElementLayer.setZIndex(9999999999999999999);\n      // Stops showing polygon geometry\n      if (!this.resultVisibility_) {\n        this.clickedElementLayer.setStyle(this.simple);\n      }\n      this.map.addLayers(this.clickedElementLayer);\n      if (zoomIn === true) {\n        this.zoomInLocation('n', 'Point', this.zoom, [longitude, latitude]);\n      }\n    });\n  }\n  /**\n   * This function gets user input, searches for coincidences and adds each one to the given array.\n   * @public\n   * @function\n   * @param {string} inputValue search text written by user\n   * @param { Array < Object > } resultsArray search result candidates from IGN services\n   * @api\n   */\n  getCandidatesData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'n') {\n        let params = `q=${newInputVal}&limit=${this.maxResults + 5}&no_process=${this.noProcess}`;\n        params += `&countrycode=${this.countryCode}&autocancel=true`;\n        const urlToGet = `${this.urlCandidates}?${params}`;\n        M.proxy(false);\n        M.remote.get(urlToGet).then((res) => {\n          const returnData = JSON.parse(res.text.substring(9, res.text.length - 1));\n          for (let i = 0; i < returnData.length; i += 1) {\n            resultsArray.push(returnData[i]);\n          }\n          resolve();\n        });\n\n        M.proxy(true);\n      } else {\n        resolve();\n      }\n    });\n  }\n  /**\n   * This function adds search coincidences on Nomenclator to array\n   * @public\n   * @function\n   * @param {string} inputValue location searched by user\n   * @param {Array <Object>} resultsArray search results\n   * @api\n   */\n  getNomenclatorData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'g') {\n        const params = `maxresults=${this.maxResults - 5}&name_equals=${newInputVal}`;\n        const urlToGet = `${this.urlAssistant}?${params}`;\n        M.remote.get(urlToGet).then((res) => {\n          const temporalData = (res.text !== '' && res.text !== null) ? JSON.parse(res.text) : { results: [] };\n          const returnData = temporalData.results;\n          for (let i = 0; i < returnData.length; i += 1) {\n            // avoid nameplaces not included in this.nomenclatorSearchType\n            if (this.nomenclatorSearchType.indexOf(returnData[i].type) >= 0) {\n              resultsArray.push(returnData[i]);\n            }\n          }\n          // move 'Ncleos de poblacin' to start\n          for (let i = 0; i < resultsArray.length; i += 1) {\n            if (resultsArray[i].type === 'Ncleos de poblacin') {\n              const thisElement = resultsArray.splice(i, 1);\n              resultsArray.splice(0, 0, thisElement);\n            }\n          }\n\n          resultsArray.forEach((elem) => {\n            // eslint-disable-next-line no-param-reassign\n            elem.cps = true;\n          });\n\n          resolve();\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n  /**\n   * This function gets address of selected item and returns geojson data (with coordinates)\n   * Only for Geocoder service\n   * @public\n   * @function\n   * @param {string} listElement element from drop-down list(\"li\")\n   * @param {Array <Object> } elementsData search results\n   * @api\n   */\n  getFindData(listElement, elementsData) {\n    return new Promise((resolve) => {\n      let id;\n      let type;\n      let portal;\n      let via;\n      let address;\n      elementsData.forEach((element) => {\n        if (listElement.getAttribute('id') === element.id) {\n          id = `&id=${element.id}`;\n          type = `&type=${element.type}`;\n          portal = (element.portalNumber !== 0 && element.portalNumber !== undefined) ?\n            `&portal=${element.portalNumber}` : '';\n          via = element.tip_via !== '' ? `&tip_via=${element.tip_via}` : '';\n        }\n      });\n      address = listElement.innerHTML;\n      if (listElement.innerHTML.includes('(')) {\n        const parenthesisIndex = listElement.innerHTML.indexOf('(');\n        address = listElement.innerHTML.substring(0, parenthesisIndex);\n      }\n      // const params = `${type}${via}${id}${portal}&outputformat=geojson`;\n      const params = `${type}${via}${id}${portal}`;\n      const urlToGet = `${this.urlFind}?q=${address}${params}`;\n      // this.urlParse = urlToGet.replace('&outputformat=geojson', '');\n      this.urlParse = urlToGet;\n      this.requestStreet = urlToGet;\n      this.locationID = '';\n      M.proxy(false);\n      M.remote.get(urlToGet).then((res) => {\n        const geoJsonData = res.text.substring(9, res.text.length - 1);\n        resolve(geoJsonData);\n      });\n      M.proxy(true);\n    });\n  }\n  /**\n   * This function zooms in clicked location and draws geometry\n   * @public\n   * @function\n   * @param {Object} listElement clicked result information\n   * @api\n   */\n  goToLocation(listElement, isRecentElement = false) {\n    const text = listElement.querySelector('#info').innerHTML;\n    this.html.querySelector('#m-ignsearchlocator-search-input').value = text;\n    this.currentElement = listElement; // <li>\n    const candidates = isRecentElement ? JSON.parse(window.localStorage.getItem('recents')) : this.allCandidates;\n    const selectedObject = this.findClickedItem(listElement, candidates);\n    this.createGeometryStyles();\n    // if item comes from geocoder\n    if (Object.prototype.hasOwnProperty.call(selectedObject, 'address')) {\n      this.getFindData(listElement, candidates).then((geoJsonData) => {\n        this.drawGeocoderResult(geoJsonData);\n        if (geoJsonData.includes('\"tip_via\":null') && (geoJsonData.includes('\"type\":\"Municipio\"') || geoJsonData.includes('\"type\":\"municipio\"') || geoJsonData.includes('\"type\":\"Provincia\"') || geoJsonData.includes('\"type\":\"provincia\"') || geoJsonData.includes('\"type\":\"comunidad autonoma\"'))) {\n          this.map.removePopup();\n        }\n      });\n    } else { // if item comes from nomenclator\n      this.drawNomenclatorResult(selectedObject.id);\n    }\n    this.resultsBox.innerHTML = '';\n  }\n\n  /**\n   * This function zooms in MaxExtent of clicked element\n   * @public\n   * @function\n   * @param {string} service { 'g' | 'n' }\n   * @param { string } type of geometry in which we zoom\n   * @api\n   */\n  zoomInLocation(service, type, zoom, coords) {\n    this.resultsList = document.getElementById('m-ignsearchlocator-results-list');\n    if (this.clickedElementLayer instanceof M.layer.Vector) {\n      if (service === 'n' && type === 'Point') {\n        this.clickedElementLayer.calculateMaxExtent().then((extent) => {\n          this.map.setBbox(extent);\n          this.map.setZoom(zoom);\n          this.fire('ignsearchlocator:entityFound', [extent]);\n        });\n      } else {\n        const extent = this.clickedElementLayer.getImpl().getOL3Layer().getSource().getExtent();\n        this.map.setBbox(extent);\n        this.fire('ignsearchlocator:entityFound', [extent]);\n      }\n    }\n  }\n  /**\n   * This function returns clicked location object\n   * @public\n   * @function\n   * @param { string } listElement <li>Location</li>\n   * @param { Array < Object > } allCandidates possible locations\n   * @api\n   */\n  findClickedItem(listElement, allCandidates) {\n    const elementClicked = allCandidates.filter(element => element.id === listElement.getAttribute('id'))[0];\n    this.setRecents(elementClicked);\n    return elementClicked;\n  }\n\n  /**\n   * This function check duplicates results\n   * @public\n   * @function\n   * @api\n   */\n  checkDuplicateRecent(element) {\n    const recents = JSON.parse(window.localStorage.getItem('recents'));\n    let found = false;\n\n    recents.forEach((r) => {\n      if (r.id === element.id) {\n        found = true;\n      }\n    });\n\n    return found;\n  }\n\n  /**\n   * This function set search\n   * @public\n   * @function\n   * @api\n   */\n  setRecents(element) {\n    let recents = JSON.parse(window.localStorage.getItem('recents'));\n\n    if (!recents || recents.length === 0) {\n      recents = [element];\n    } else if (!this.checkDuplicateRecent(element)) {\n      if (recents.length === 5) {\n        recents.shift();\n        recents.push(element);\n      } else {\n        recents.push(element);\n      }\n    }\n    window.localStorage.setItem('recents', JSON.stringify(recents));\n  }\n\n  /* Given a set of coordinates (lat, long),\n    searches for the corresponding place\n  */\n  searchCoordinates(setOfCoordinates) {\n    return new Promise((resolve) => {\n      resolve();\n    });\n  }\n  /**\n   * This function clears drawn geometry from map.\n   * @public\n   * @function\n   * @api\n   */\n  clearResults() {\n    this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n    this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n\n    this.searchInput.value = '';\n    this.resultsBox.innerHTML = '';\n    this.searchValue = '';\n    this.map.removeLayers(this.coordinatesLayer);\n    this.map.removeLayers(this.clickedElementLayer);\n    this.map.removePopup(this.map.getPopup());\n  }\n  /**\n   * This function clears input content, results box, popup and shown geometry.\n   * @public\n   * @function\n   * @api\n   */\n  clearResultsAndGeometry() {\n    this.clearResults();\n    this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n    this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n\n    if (this.clickedElementLayer !== undefined) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n    this.map.removePopup(this.popup, [\n      this.lng,\n      this.lat,\n    ]);\n\n    this.xytype = null;\n    this.xydata = null;\n    this.xylon = null;\n    this.xylat = null;\n    this.xylathh = null;\n    this.xylatmm = null;\n    this.xylatss = null;\n    this.xylonhh = null;\n    this.xylonmm = null;\n    this.xylonss = null;\n    this.xyutmx = null;\n    this.xyutmy = null;\n    this.provincecode = null;\n    this.selectMunicipios = null;\n    this.inputPoligono = null;\n    this.inputParcela = null;\n    this.inputRefCatastral = null;\n  }\n\n  /**\n   * Handler for search with RC button\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onRCSearch(evt) {\n    evt.preventDefault();\n    this.inputRefCatastral = document.querySelector('#m-refCatastral-input');\n    this.inputRC_ = this.element_.querySelector('#m-refCatastral-input').value.trim();\n    if ((evt.type !== 'keyup') || (evt.keyCode === 13)) {\n      let inputRC = this.inputRC_;\n      if (M.utils.isNullOrEmpty(inputRC)) {\n        M.dialog.info(getValue('RCnull'));\n      } else {\n        inputRC = inputRC.substr(0, 14);\n        const searchUrl = M.utils.addParameters(this.CPMRC_url_, {\n          Provincia: '',\n          Municipio: '',\n          SRS: this.map.getProjection().code,\n          RC: inputRC,\n        });\n        this.search_(searchUrl, this.showResults_);\n        this.clearResults();\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n      }\n    }\n  }\n  /**\n   * Handler for search with RC button\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onRCConsult(evt) {\n    evt.preventDefault();\n\n    // Se cambia al cursor a una cruz.\n    document.body.style.cursor = 'crosshair';\n    this.clearResults();\n    this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n\n    this.map.on(M.evt.CLICK, this.buildUrl_, this);\n  }\n\n  /**\n   * This function builds the query URL and shows results\n   *\n   * @private\n   * @function\n   * @param {ol.MapBrowserPointerEvent} evt - Browser point event\n   */\n  buildUrl_(evt) {\n    const options = {\n      jsonp: true,\n    };\n\n    const srs = this.map.getProjection().code;\n    M.remote.get(this.catastroWMS, {\n      SRS: srs,\n      Coordenada_X: evt.coord[0],\n      Coordenada_Y: evt.coord[1],\n    }).then((res) => {\n      this.showInfoFromURL_(res, evt.coord);\n\n      // Se desactiva el evento del click una vez haya encontrado una catastro\n      this.map.un(M.evt.CLICK, this.buildUrl_, this);\n      document.body.style.cursor = '';\n    }, options);\n  }\n\n  /**\n   * This function displays information in a popup\n   *\n   * @private\n   * @function\n   * @param {XML} response - response from the petition\n   * @param {array} coordinate - Coordinate position onClick\n   */\n  showInfoFromURL_(response, coordinates) {\n    if ((response.code === 200) && (response.error === false)) {\n      const infos = [];\n      const info = response.text;\n      const formatedInfo = this.formatInfo_(info);\n      infos.push(formatedInfo);\n\n      const tab = {\n        icon: 'g-cartografia-pin',\n        title: this.POPUP_TITLE,\n        content: infos.join(''),\n      };\n\n      let popup = this.map.getPopup();\n\n      if (M.utils.isNullOrEmpty(popup)) {\n        popup = new M.Popup();\n        popup.addTab(tab);\n        this.map.addPopup(popup, coordinates);\n      } else if (popup.getCoordinate()[0] === coordinates[0] &&\n        popup.getCoordinate()[1] === coordinates[1]) {\n        let hasExternalContent = false;\n        popup.getTabs().forEach((t) => {\n          if (t.title !== this.POPUP_TITLE) {\n            hasExternalContent = true;\n          } else {\n            popup.removeTab(t);\n          }\n        });\n        if (hasExternalContent) {\n          popup.addTab(tab);\n        } else {\n          popup = new M.Popup();\n          popup.addTab(tab);\n          this.map.addPopup(popup, coordinates);\n        }\n      } else {\n        popup = new M.Popup();\n        popup.addTab(tab);\n        this.map.addPopup(popup, coordinates);\n      }\n    } else {\n      this.map.removePopup();\n      M.dialog.error(getValue('errorConexion'));\n    }\n  }\n\n  /**\n   * This function formats the response\n   *\n   * @param {string} info - Information to formatting\n   * @returns {string} information - Formatted information\n   * @private\n   * @function\n   */\n  formatInfo_(info) {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(info, 'text/xml');\n    let ldtNode;\n    let valuePopup;\n    let codProv;\n    let codMun;\n    let link = '';\n\n    const rootElement = xmlDoc.getElementsByTagName('consulta_coordenadas')[0];\n    const controlNode = rootElement.getElementsByTagName('control')[0];\n    const errorCtlNode = controlNode.getElementsByTagName('cuerr')[0].childNodes[0].nodeValue;\n    if (errorCtlNode === '1') {\n      // const errorNode = rootElement.getElementsByTagName('lerr')[0];\n      // const errorDesc = errorNode.getElementsByTagName('err')[0];\n      // const errorDescTxt = errorDesc.getElementsByTagName('des')[0].childNodes[0].nodeValue;\n      valuePopup = getValue('noInfo');\n    } else {\n      const coordenadasNode = rootElement.getElementsByTagName('coordenadas')[0];\n      const coordNode = coordenadasNode.getElementsByTagName('coord')[0];\n      const pcNode = coordNode.getElementsByTagName('pc')[0];\n      const pc1Node = pcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n      const pc2Node = pcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n      codProv = pc1Node.substring(0, 2);\n      codMun = pc1Node.substring(2, 5);\n\n      ldtNode = coordNode.getElementsByTagName('ldt')[0].childNodes[0].nodeValue;\n      valuePopup = pc1Node + pc2Node;\n      link = `https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?del==${codProv}&mun=${codMun}&rc1=${pc1Node}&rc2=${pc2Node}`;\n    }\n\n    let formatedInfo = `${M.utils.beautifyAttribute(getValue('informacionCatastral'))}\n    <div class='divinfo'>\n    <table class='mapea-table'>\n    <tbody>\n    <tr><td class='header' colspan='4'></td></tr>\n    <tr><td class='key'><b>${M.utils.beautifyAttribute(getValue('reference'))}</b></td><td class='value'></b>\n    <a href='${link}' target='_blank'>${valuePopup}</a></td></tr>\n    <tr><td class='key'><b>${M.utils.beautifyAttribute(getValue('description'))}</b></td>\n    <td class='value'>${ldtNode}</td></tr>\n    </tbody></table></div>`;\n\n    if (valuePopup.toLowerCase().indexOf(getValue('noReference')) > -1) {\n      formatedInfo = `${M.utils.beautifyAttribute(getValue('informacionCatastral'))}\n      <div class='divinfo'>\n      <table class='mapea-table'>\n      <tbody>\n      <tr><td class='header' colspan='4'></td></tr>\n      <tr><td class='key' colspan='4'><b>${valuePopup}</b></td></tr>\n      </tbody></table>\n      </div>`;\n    }\n\n    return formatedInfo;\n  }\n\n  /**\n   * Does the GET petition to search\n   *\n   * @private\n   * @function\n   */\n  search_(searchUrl, processor) {\n    M.remote.get(searchUrl).then((response) => {\n      const success = this.acceptOVCSW(response);\n      if (success) {\n        processor.call(this, response.xml);\n      }\n    });\n  }\n\n  /**\n   * This function parses results and compiles template\n   * with vars to show results\n   *\n   * @private\n   * @function\n   */\n  showResults_(result) {\n    let resultsTemplateVars = {};\n    resultsTemplateVars = this.parseRCResultsForTemplate_(result, false);\n    Promise.resolve(resultsTemplateVars).then((resultTemplate) => {\n      this.drawGeocoderResultRC(resultTemplate);\n    });\n  }\n\n  /**\n   * This function parses results from RC search for template\n   *\n   * @private\n   * @function\n   */\n  parseRCResultsForTemplate_(result, append) {\n    const docs = this.parseCPMRCResults(result);\n    if (append === true) {\n      this.rcResults_.unshift(docs);\n    } else {\n      this.rcResults_ = [docs];\n    }\n\n    return {\n      docs: this.rcResults_,\n      total: this.rcResults_.length,\n      partial: false,\n      notResutls: false,\n      query: this.inputRC_.value,\n    };\n  }\n\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResultRC(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer); // Center coordinates\n    const attri = geoJsonData.docs[0];\n    // Center coordinates\n    this.coordinates = `${attri.coords[0].xcen}, ${attri.coords[0].ycen}`;\n    const coords = [parseFloat(attri.coords[0].xcen), parseFloat(attri.coords[0].ycen)];\n    // this.coordinates = [236284.96, 4144064.69];\n\n    this.locator_(coords, this.point);\n\n    // show popup for streets\n    const fullAddress = attri.attributes[1].value;\n    this.showSearchPopUpRC(fullAddress, coords, 1, { fake: true });\n\n    const x = coords[0];\n    const y = coords[1];\n    const xFloat = parseFloat(x);\n    const yFloat = parseFloat(y);\n    this.map.setCenter(`${xFloat},${yFloat}*false`);\n  }\n\n\n  /**\n   * This function opens xylocator functions\n   * @public\n   * @function\n   * @api\n   */\n  openParcela() {\n    if (this.resultsBox.innerHTML.includes('coordinatesSystemParcela')) {\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n    } else {\n      this.clearResults();\n      if (this.resultsBox.innerHTML.indexOf('coordinatesSystemParcela')) {\n        this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n      }\n      this.activationManager(true, 'm-ignsearchlocator-parcela-button');\n\n      document.getElementById('m-ignsearchlocator-results').style = 'width: 258px !important; min-width: 258px !important;';\n\n      const compiledXYLocator = M.template.compileSync(parcela, {\n        vars: {\n          translations: {\n            titleparcela: getValue('titleparcela'),\n            province: getValue('province'),\n            municipality: getValue('municipality'),\n            selectmuni: getValue('selectmuni'),\n            selectprov: getValue('selectprov'),\n            estate: getValue('estate'),\n            plot: getValue('plot'),\n            titlerefCatastral: getValue('titlerefCatastral'),\n            refCastatro: getValue('refCastatro'),\n            search: getValue('search'),\n            consultReference: getValue('consultReference'),\n            notaRef: getValue('notaRef'),\n          },\n          accessibility: {\n            province: getValue('accessibility.province'),\n            town: getValue('accessibility.town'),\n            estate: getValue('accessibility.estate'),\n            plot: getValue('accessibility.plot'),\n            cadastre: getValue('accessibility.cadastre'),\n            srs: getValue('accessibility.srs'),\n          },\n        },\n      });\n\n      this.accessibilityTab(compiledXYLocator);\n\n      /**\n       *crear provincias y rellenar municipios\n       */\n      if (this.provincecode === null) {\n        this.selectProvincias = compiledXYLocator.querySelector('select#m-searchParamsProvincia-select');\n        this.selectProvincias.addEventListener('change', evt => this.onProvinciaSelect(evt, null));\n      } else {\n        compiledXYLocator.querySelector('select#m-searchParamsProvincia-select').value = this.provincecode;\n        this.selectProvincias = compiledXYLocator.querySelector('select#m-searchParamsProvincia-select');\n        this.onProvinciaSelect(null, this.provincecode, this.selectMunicipios);\n        this.selectProvincias.addEventListener('change', evt => this.onProvinciaSelect(evt, null, null));\n      }\n\n      if (this.selectMunicipios === null) {\n        this.selectMunicipios = compiledXYLocator.querySelector('#m-searchParamsMunicipio-select');\n      } else {\n        // compiledXYLocator.querySelector('#m-searchParamsMunicipio-select')\n        // .replace(this.municipalityhtml);\n        compiledXYLocator.querySelector('#m-searchParamsMunicipio-select').value = this.selectMunicipios.value;\n      }\n\n      if (this.inputPoligono === null) {\n        this.inputPoligono = compiledXYLocator.querySelector('#m-searchParamsPoligono-input');\n      } else {\n        compiledXYLocator.querySelector('#m-searchParamsPoligono-input').value = this.inputPoligono.value;\n      }\n\n      if (this.inputParcela === null) {\n        this.inputParcela = compiledXYLocator.querySelector('#m-searchParamsParcela-input');\n      } else {\n        compiledXYLocator.querySelector('#m-searchParamsParcela-input').value = this.inputParcela.value;\n      }\n\n\n      if (this.inputRefCatastral === null) {\n        this.inputRefCatastral = compiledXYLocator.querySelector('#m-refCatastral-input');\n      } else {\n        compiledXYLocator.querySelector('#m-refCatastral-input').value = this.inputRefCatastral.value;\n      }\n\n\n      const buttonParamsSearch = compiledXYLocator.querySelector('button#m-searchParams-button');\n      buttonParamsSearch.addEventListener('click', e => this.onParamsSearch(e));\n\n      const buttonParamsSearchRC = compiledXYLocator.querySelector('button#m-refCatastral-button');\n      buttonParamsSearchRC.addEventListener('click', this.onRCSearch.bind(this));\n\n      const buttonParamsConsultRef = compiledXYLocator.querySelector('button#m-consulRef-button');\n      buttonParamsConsultRef.addEventListener('click', this.onRCConsult.bind(this));\n      this.resultsBox.appendChild(compiledXYLocator);\n\n      if (M.language.getLang() === 'es') {\n        document.querySelectorAll('p.parcela--input')[0].style = 'width: 71px';\n        document.querySelectorAll('p.parcela--input')[1].style = 'width: 71px';\n\n        document.querySelector('#m-searchParamsProvincia-select').style = 'width: 68%';\n        document.querySelector('#m-searchParamsMunicipio-select').style = 'width: 68%';\n      }\n    }\n  }\n\n  /**\n   * Handler for search with params button\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onParamsSearch(evt) {\n    evt.preventDefault();\n    // Actualizamos los inputs de parcela y poligino\n    this.inputPoligono = document.querySelector('#m-searchParamsPoligono-input');\n    this.inputParcela = document.querySelector('#m-searchParamsParcela-input');\n\n    if ((evt.type !== 'keyup') || (evt.keyCode === 13)) {\n      if (M.utils.isNullOrEmpty(this.selectProvincias.value) || this.selectProvincias.value === '0') {\n        M.dialog.info(getValue('debeprov'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.selectMunicipios.value) || document.querySelector('#m-searchParamsMunicipio-select').value === '0') {\n        M.dialog.info(getValue('debemuni'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.inputPoligono.value)) {\n        M.dialog.info(getValue('debepoli'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.inputParcela.value)) {\n        M.dialog.info(getValue('debeparce'));\n        return;\n      }\n\n      this.provincecode = this.selectProvincias.value;\n      this.selectMunicipios = document.querySelector('#m-searchParamsMunicipio-select');\n      this.municipalityvalue = this.selectMunicipios.value;\n\n\n      const searchUrl = M.utils.addParameters(this.DNPPP_url_, {\n        CodigoProvincia: this.selectProvincias.value,\n        CodigoMunicipio: this.selectMunicipios.value,\n        CodigoMunicipioINE: '',\n        Poligono: this.inputPoligono.value,\n        Parcela: this.inputParcela.value,\n      });\n\n      M.remote.get(searchUrl).then((response) => {\n        const success = this.acceptOVCSW(response);\n        if (success) {\n          this.parseParamsResultsForTemplate_(response.xml);\n        }\n\n        this.clearResults();\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n      });\n    }\n  }\n\n  parseParamsResultsForTemplate_(response) {\n    const rootElement = response.getElementsByTagName('consulta_dnp')[0];\n    let rcNode;\n    const lrcdnpNode = rootElement.getElementsByTagName('lrcdnp');\n\n    if (lrcdnpNode.length > 0) {\n      const rcdnpNode = lrcdnpNode[0].getElementsByTagName('rcdnp')[0];\n      rcNode = rcdnpNode.getElementsByTagName('rc')[0];\n    } else {\n      const bicoNode = rootElement.getElementsByTagName('bico')[0];\n      const biNode = bicoNode.getElementsByTagName('bi')[0];\n      const idbiNode = biNode.getElementsByTagName('idbi')[0];\n      rcNode = idbiNode.getElementsByTagName('rc')[0];\n    }\n    const pc1Value = rcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n    const pc2Value = rcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n    const searchUrl = M.utils.addParameters(this.CPMRC_url_, {\n      Provincia: '',\n      Municipio: '',\n      SRS: this.map.getProjection().code,\n      RC: pc1Value + pc2Value,\n    });\n\n    return M.remote.get(searchUrl).then((res) => {\n      const success = this.acceptOVCSW(res);\n      if (success) {\n        const docsRC = this.parseCPMRCResults(res.xml);\n        const xcen = docsRC.coords[0].xcen;\n        const ycen = docsRC.coords[0].ycen;\n\n        this.locator_([xcen, ycen], null);\n      }\n    });\n  }\n\n  /**\n   * Parses CPMRC results\n   *\n   * @private\n   * @function\n   */\n  parseCPMRCResults(xmlResults) {\n    const rootElement = xmlResults.getElementsByTagName('consulta_coordenadas')[0];\n    const coordenadasNode = rootElement.getElementsByTagName('coordenadas')[0];\n    const coordNode = coordenadasNode.getElementsByTagName('coord')[0];\n\n    const pcNode = coordNode.getElementsByTagName('pc')[0];\n    const pc1Node = pcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n    const pc2Node = pcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n    const geoNode = coordNode.getElementsByTagName('geo')[0];\n    const xcenNode = geoNode.getElementsByTagName('xcen')[0].childNodes[0].nodeValue;\n    const ycenNode = geoNode.getElementsByTagName('ycen')[0].childNodes[0].nodeValue;\n    const srsNode = geoNode.getElementsByTagName('srs')[0].childNodes[0].nodeValue;\n\n    const ldtNode = coordNode.getElementsByTagName('ldt')[0].childNodes[0].nodeValue;\n\n    return {\n      attributes: [{\n        key: 'Referencia Catastral',\n        value: pc1Node + pc2Node,\n      }, {\n        key: 'Descripcin',\n        value: ldtNode,\n      }],\n      rcId: `rc_${pc1Node}${pc2Node}`,\n      coords: [{\n        xcen: xcenNode,\n        ycen: ycenNode,\n        srs: srsNode,\n      }],\n    };\n  }\n\n\n  /**\n   * Checks if response is valid\n   *\n   * @private\n   * @function\n   */\n  acceptOVCSW(response) {\n    let success = true;\n    try {\n      if ((response.code === 200) && (response.error === false)) {\n        const results2 = response.xml;\n        const rootElement = results2.childNodes[0];\n        const controlNode = rootElement.getElementsByTagName('control')[0];\n        const errorCtlNode = controlNode.getElementsByTagName('cuerr')[0];\n        let cuerr = '0';\n        if (errorCtlNode !== undefined) {\n          cuerr = errorCtlNode.childNodes[0].nodeValue;\n        }\n        if (cuerr === '1') {\n          const errorNode = rootElement.getElementsByTagName('lerr')[0];\n          const errorDesc = errorNode.getElementsByTagName('err')[0];\n          const errorDescTxt = errorDesc.getElementsByTagName('des')[0].childNodes[0].nodeValue;\n          this.element_.classList.remove(this.SEARCHING_CLASS);\n          success = false;\n          M.dialog.info(errorDescTxt);\n        }\n      } else {\n        success = false;\n        M.dialog.error(getValue('exception.mapeaerror'));\n      }\n    } catch (err) {\n      success = false;\n      M.exception(`La respuesta no es un JSON vlido: ${err}.`);\n    }\n    return success;\n  }\n\n  /**\n   * Handler for selecting an option on Provincia select\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onProvinciaSelect(e, idprov, munici) {\n    // En cada click a las provincias, se borran los municipios y se calculan de nuevo.\n    let provinceCode = null;\n    if (e != null) {\n      const elt = e.target;\n      provinceCode = elt.value;\n    } else {\n      provinceCode = idprov;\n    }\n    if (provinceCode !== '0') {\n      if (this.element_.getElementsByTagName('select')['m-searchParamsMunicipio-select'] !== undefined) {\n        this.clearMunicipiosSelect();\n      }\n\n      M.remote.get(this.ConsultaMunicipioCodigos_, {\n        CodigoProvincia: provinceCode,\n        CodigoMunicipio: '',\n        CodigoMunicipioIne: '',\n      }).then((res) => {\n        this.loadMunicipiosSelect(res, munici);\n      });\n    } else {\n      this.clearMunicipiosSelect();\n    }\n  }\n\n\n  /**\n   * Loads and renders options set to Municipios select\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  loadMunicipiosSelect(response, munici) {\n    if ((response.code === 200) && (response.error === false)) {\n      const rootElement = response.xml.getElementsByTagName('consulta_municipiero')[0];\n      const rootMunicipios = rootElement.getElementsByTagName('municipiero')[0];\n      const muniNodes = rootMunicipios.getElementsByTagName('muni');\n      const select = this.element_.getElementsByTagName('select')['m-searchParamsMunicipio-select'];\n      for (let i = 0; i < muniNodes.length; i += 1) {\n        const option = document.createElement('option');\n        const locat = muniNodes[i].getElementsByTagName('locat')[0];\n        option.value = locat.getElementsByTagName('cmc')[0].childNodes[0].nodeValue;\n        option.innerHTML = muniNodes[i].getElementsByTagName('nm')[0].childNodes[0].nodeValue;\n        select.appendChild(option);\n      }\n      if (munici !== undefined && munici !== null) {\n        document.querySelector('#m-searchParamsMunicipio-select').value = this.municipalityvalue;\n      }\n    } else {\n      M.dialog.error(getValue('exception.mapeaerror'));\n    }\n  }\n\n  /**\n   * Clears options set to Municipios select\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  clearMunicipiosSelect() {\n    const select = this.element_.getElementsByTagName('select')['m-searchParamsMunicipio-select'];\n    while (select.firstChild) {\n      select.removeChild(select.firstChild);\n    }\n    const option = document.createElement('option');\n    option.value = '0';\n    option.innerHTML = getValue('selectmuni');\n    select.appendChild(option);\n  }\n\n  /**\n   * This function opens xylocator functions\n   * @public\n   * @function\n   * @api\n   */\n  openXYLocator() {\n    if (this.resultsBox.innerHTML.includes('coordinatesSystemXYLocator')) {\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n    } else {\n      this.clearResults();\n      if (this.resultsBox.innerHTML.indexOf('coordinatesSystemParcela')) {\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n      }\n      this.activationManager(true, 'm-ignsearchlocator-xylocator-button');\n\n      document.getElementById('m-ignsearchlocator-results').style = 'width: 301px;';\n\n      const compiledXYLocator = M.template.compileSync(xylocator, {\n        vars: {\n          hasHelp: this.helpUrl !== undefined && M.utils.isUrl(this.helpUrl),\n          helpUrl: this.helpUrl,\n          translations: {\n            title: getValue('title'),\n            srs: getValue('srs'),\n            longitude: getValue('longitude'),\n            latitude: getValue('latitude'),\n            locate: getValue('locate'),\n            negative: getValue('negative'),\n            east: getValue('east'),\n            west: getValue('west'),\n            north: getValue('north'),\n            south: getValue('south'),\n            geographic: getValue('geographic'),\n            zone: getValue('zone'),\n            dms: getValue('dms'),\n            dd: getValue('dd'),\n          },\n        },\n      });\n\n      this.accessibilityTab(compiledXYLocator);\n\n      if (this.xytype != null) {\n        if (this.xytype === 'EPSG:4258d' && this.xydata === 'd') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LON').value = this.xylon;\n          compiledXYLocator.querySelector('input#LAT').value = this.xylat;\n        } else if (this.xytype === 'EPSG:4326d' && this.xydata === 'd') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LON').value = this.xylon;\n          compiledXYLocator.querySelector('input#LAT').value = this.xylat;\n        } else if (this.xytype === 'EPSG:4258dms' && this.xydata === 'dms') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LONHH').value = this.xylonhh;\n          compiledXYLocator.querySelector('input#LONMM').value = this.xylonmm;\n          compiledXYLocator.querySelector('input#LONSS').value = this.xylonss;\n          compiledXYLocator.querySelector('input#LATHH').value = this.xylathh;\n          compiledXYLocator.querySelector('input#LATMM').value = this.xylatmm;\n          compiledXYLocator.querySelector('input#LATSS').value = this.xylatss;\n        } else if (this.xytype === 'EPSG:4326dms' && this.xydata === 'dms') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LONHH').value = this.xylonhh;\n          compiledXYLocator.querySelector('input#LONMM').value = this.xylonmm;\n          compiledXYLocator.querySelector('input#LONSS').value = this.xylonss;\n          compiledXYLocator.querySelector('input#LATHH').value = this.xylathh;\n          compiledXYLocator.querySelector('input#LATMM').value = this.xylatmm;\n          compiledXYLocator.querySelector('input#LATSS').value = this.xylatss;\n        } else {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#UTM-X').value = this.xyutmx;\n          compiledXYLocator.querySelector('input#UTM-Y').value = this.xyutmy;\n        }\n\n        if (this.xydata === 'd') {\n          const divToHidden1 = compiledXYLocator.querySelector('div#m-xylocator-utm');\n          divToHidden1.style.display = 'none';\n          const divToHidden2 = compiledXYLocator.querySelector('div#m-xylocator-dms');\n          divToHidden2.style.display = 'none';\n          const divToShow = compiledXYLocator.querySelector('div#m-xylocator-latlon');\n          divToShow.style.display = 'table';\n        } else if (this.xydata === 'dms') {\n          const divToHidden1 = compiledXYLocator.querySelector('div#m-xylocator-utm');\n          divToHidden1.style.display = 'none';\n          const divToHidden2 = compiledXYLocator.querySelector('div#m-xylocator-latlon');\n          divToHidden2.style.display = 'none';\n          const divToShow = compiledXYLocator.querySelector('div#m-xylocator-dms');\n          divToShow.style.display = 'block';\n        } else {\n          const divToHidden1 = compiledXYLocator.querySelector('div#m-xylocator-latlon');\n          divToHidden1.style.display = 'none';\n          const divToHidden2 = compiledXYLocator.querySelector('div#m-xylocator-dms');\n          divToHidden2.style.display = 'none';\n          const divToShow = compiledXYLocator.querySelector('div#m-xylocator-utm');\n          divToShow.style.display = 'block';\n        }\n      }\n      compiledXYLocator.querySelector('select#m-xylocator-srs').addEventListener('change', evt => this.manageInputs_(evt));\n      compiledXYLocator.querySelector('button#m-xylocator-loc').addEventListener('click', evt => this.calculate_(evt, compiledXYLocator));\n      this.resultsBox.appendChild(compiledXYLocator);\n    }\n  }\n\n  /**\n   * Hides/shows tools menu and de/activates drawing.\n   * @public\n   * @function\n   * @api\n   * @param {Boolean} clickedGeometry - i.e.isPointActive\n   * @param {String} drawingDiv - i.e.pointdrawing\n   */\n  activationManager(clickedGeometry, drawingDiv) {\n    // if drawing is active\n    if (clickedGeometry) {\n      document.getElementById(drawingDiv).style.backgroundColor = '#71a7d3';\n      document.getElementById(drawingDiv).style.color = 'white';\n    } else {\n      document.querySelectorAll(drawingDiv).forEach(e => e.parentNode.removeChild(e));\n      document.getElementById(drawingDiv).style.backgroundColor = 'white';\n      document.getElementById(drawingDiv).style.color = '#7A7A73';\n    }\n  }\n\n  /**\n   * This function transforms coordinates to map SRS\n   *\n   * @public\n   * @function\n   * @param {DOMEvent} evt - event\n   * @api\n   */\n  calculate_(evt, compiledXYLocator) {\n    try {\n      const selectTarget = document.querySelector('.m-xylocator-container select#m-xylocator-srs');\n      const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n      let origin = selectedOption.value;\n\n      this.xytype = compiledXYLocator.querySelector('#m-xylocator-srs').value;\n      this.xydata = selectedOption.getAttribute('data-units');\n\n      if (this.xydata === 'd') {\n        origin = origin.replace('d', '');\n      }\n      if (this.xydata === 'dms') {\n        origin = origin.replace('dms', '');\n      }\n\n      if (this.xytype === 'EPSG:4258d' && this.xydata === 'd') {\n        this.xylon = compiledXYLocator.querySelector('input#LON').value;\n        this.xylat = compiledXYLocator.querySelector('input#LAT').value;\n      } else if (this.xytype === 'EPSG:4326d' && this.xydata === 'd') {\n        this.xylon = compiledXYLocator.querySelector('input#LON').value;\n        this.xylat = compiledXYLocator.querySelector('input#LAT').value;\n      } else if (this.xytype === 'EPSG:4258dms' && this.xydata === 'dms') {\n        this.xylonhh = compiledXYLocator.querySelector('input#LONHH').value;\n        this.xylonmm = compiledXYLocator.querySelector('input#LONMM').value;\n        this.xylonss = compiledXYLocator.querySelector('input#LONSS').value;\n        this.xylathh = compiledXYLocator.querySelector('input#LATHH').value;\n        this.xylatmm = compiledXYLocator.querySelector('input#LATMM').value;\n        this.xylatss = compiledXYLocator.querySelector('input#LATSS').value;\n      } else if (this.xytype === 'EPSG:4326dms' && this.xydata === 'dms') {\n        this.xylonhh = compiledXYLocator.querySelector('input#LONHH').value;\n        this.xylonmm = compiledXYLocator.querySelector('input#LONMM').value;\n        this.xylonss = compiledXYLocator.querySelector('input#LONSS').value;\n        this.xylathh = compiledXYLocator.querySelector('input#LATHH').value;\n        this.xylatmm = compiledXYLocator.querySelector('input#LATMM').value;\n        this.xylatss = compiledXYLocator.querySelector('input#LATSS').value;\n      } else {\n        this.xyutmx = compiledXYLocator.querySelector('input#UTM-X').value;\n        this.xyutmy = compiledXYLocator.querySelector('input#UTM-Y').value;\n      }\n\n      let x = -1;\n      let y = -1;\n      if (selectedOption.getAttribute('data-units') === 'd') {\n        const xString = document.querySelector('div#m-xylocator-latlon input#LON').value.replace(',', '.');\n        const yString = document.querySelector('div#m-xylocator-latlon input#LAT').value.replace(',', '.');\n        x = parseFloat(xString);\n        y = parseFloat(yString);\n        const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n        this.locator_(coordinatesTransform, null);\n      } else if (selectedOption.getAttribute('data-units') === 'dms') {\n        const hhLon = document.querySelector('div#m-xylocator-dms input#LONHH').value;\n        const mmLon = document.querySelector('div#m-xylocator-dms input#LONMM').value;\n        const ssLon = document.querySelector('div#m-xylocator-dms input#LONSS').value;\n        const dirLon = document.querySelector('div#m-xylocator-dms input[name=\"LONDIR\"]:checked').value;\n        const hhLat = document.querySelector('div#m-xylocator-dms input#LATHH').value;\n        const mmLat = document.querySelector('div#m-xylocator-dms input#LATMM').value;\n        const ssLat = document.querySelector('div#m-xylocator-dms input#LATSS').value;\n        const dirLat = document.querySelector('div#m-xylocator-dms input[name=\"LATDIR\"]:checked').value;\n        if (this.checkDegreeValue_(mmLon) && this.checkDegreeValue_(ssLon) &&\n          this.checkDegreeValue_(mmLat) && this.checkDegreeValue_(ssLat) &&\n          parseFloat(hhLon) >= 0 && parseFloat(hhLon) <= 180 &&\n          parseFloat(hhLat) >= 0 && parseFloat(hhLat) <= 180) {\n          try {\n            x = parseFloat(hhLon) + (parseFloat(mmLon) / 60) + (parseFloat(ssLon) / 3600);\n            y = parseFloat(hhLat) + (parseFloat(mmLat) / 60) + (parseFloat(ssLat) / 3600);\n            if (dirLon !== 'east' && x !== 0) {\n              x = -x;\n            }\n            if (dirLat !== 'north' && y !== 0) {\n              y = -y;\n            }\n            const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n            this.locator_(coordinatesTransform, null);\n          } catch (ex) {\n            M.dialog.error(getValue('exception.transforming'), 'Error');\n          }\n        } else {\n          M.dialog.error(getValue('exception.wrong_values'), 'Error');\n        }\n      } else {\n        try {\n          const xString = document.querySelector('div#m-xylocator-utm input#UTM-X').value.replace(',', '.');\n          const yString = document.querySelector('div#m-xylocator-utm input#UTM-Y').value.replace(',', '.');\n          x = parseFloat(xString);\n          y = parseFloat(yString);\n          const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n          this.locator_(coordinatesTransform, null);\n        } catch (ex) {\n          M.dialog.error(getValue('exception.transforming'), 'Error');\n        }\n      }\n\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n\n      const coordinatesTransform = this.getImpl().reprojectXY(origin, [x, y]);\n      this.locator_(coordinatesTransform, null);\n    } catch (ex) {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n      throw ex;\n    }\n  }\n\n  /**\n   * This function checks degree value\n   *\n   * @public\n   * @function\n   * @param {String} num\n   * @api\n   */\n  checkDegreeValue_(num) {\n    return parseFloat(num) >= 0 && parseFloat(num) < 60;\n  }\n\n  /**\n   * This function changes input label depending on SRS\n   *\n   * @private\n   * @function\n   * @param {DOMEvent} evt - event\n   */\n  manageInputs_(evt) {\n    const selectTarget = evt.target;\n    const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n    if (selectedOption.getAttribute('data-units') === 'd') {\n      const divToHidden1 = document.querySelector('div#m-xylocator-utm');\n      divToHidden1.style.display = 'none';\n      const divToHidden2 = document.querySelector('div#m-xylocator-dms');\n      divToHidden2.style.display = 'none';\n      const divToShow = document.querySelector('div#m-xylocator-latlon');\n      divToShow.style.display = 'table';\n    } else if (selectedOption.getAttribute('data-units') === 'dms') {\n      const divToHidden1 = document.querySelector('div#m-xylocator-utm');\n      divToHidden1.style.display = 'none';\n      const divToHidden2 = document.querySelector('div#m-xylocator-latlon');\n      divToHidden2.style.display = 'none';\n      const divToShow = document.querySelector('div#m-xylocator-dms');\n      divToShow.style.display = 'block';\n    } else {\n      const divToHidden1 = document.querySelector('div#m-xylocator-latlon');\n      divToHidden1.style.display = 'none';\n      const divToHidden2 = document.querySelector('div#m-xylocator-dms');\n      divToHidden2.style.display = 'none';\n      const divToShow = document.querySelector('div#m-xylocator-utm');\n      divToShow.style.display = 'block';\n    }\n  }\n\n  /**\n   * This function centers the map on given point\n   *\n   * @public\n   * @function\n   * @param coords - coordinates writen by user\n   * @api\n   */\n  locator_(coords, point) {\n    const x = coords[0];\n    const y = coords[1];\n    const xFloat = parseFloat(x);\n    const yFloat = parseFloat(y);\n    this.map.removeLayers(this.coordinatesLayer);\n    if (!Number.isNaN(xFloat) && !Number.isNaN(yFloat)) {\n      this.map.setCenter(`${xFloat},${yFloat}*false`);\n      this.map.setZoom(this.zoom);\n      this.fire('xylocator:locationCentered', [{\n        zoom: this.zoom,\n        center: [xFloat, yFloat],\n      }]);\n\n      this.coordinatesLayer = new M.layer.Vector({\n        name: getValue('coordinateresult'),\n      }, { displayInLayerSwitcher: false });\n\n      const feature = new M.Feature('localizacion', {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'Point',\n          coordinates: [xFloat, yFloat],\n        },\n      });\n\n      this.coordinatesLayer.addFeatures([feature]);\n\n      if (point === null) {\n        this.coordinatesLayer.setStyle(new M.style.Point({\n          radius: 8,\n          fill: {\n            color: '#f00',\n            opacity: 0.5,\n          },\n          stroke: {\n            color: '#f00',\n            opacity: 1,\n            width: 3,\n          },\n        }));\n      } else {\n        this.createGeometryStyles();\n        this.coordinatesLayer.setStyle(this.point);\n      }\n\n      this.createGeometryStyles();\n      this.coordinatesLayer.setStyle(this.point);\n\n      // Change zIndex value\n      this.coordinatesLayer.setZIndex(9999999999999999999);\n\n      this.map.addLayers(this.coordinatesLayer);\n    } else {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n    }\n  }\n\n  /**\n   * This function sets geometry visibility on map (visible|invisible).\n   * @public\n   * @function\n   * @param {boolean} flag\n   * @api\n   */\n  setResultVisibility(flag) {\n    this.resultVisibility_ = flag;\n  }\n  /**\n   * This function changes input placeholder based on services choice\n   * @public\n   * @function\n   * @api\n   */\n  changePlaceholder() {\n    if (this.servicesToSearch === 'g') {\n      this.searchInput.placeholder = getValue('direccion');\n    } else if (this.servicesToSearch === 'n') {\n      this.searchInput.placeholder = 'Topnimo';\n    }\n  }\n  /**\n   * This function creates some geometry styles.\n   * @public\n   * @function\n   * @api\n   */\n  createGeometryStyles() {\n    // Shows pin on drawn point\n    if (this.pointStyle === 'pinBlanco') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/marker.svg']),\n          scale: 1.4,\n          fill: {\n            color: '#71a7d3',\n          },\n          stroke: {\n            width: 30,\n            color: 'white',\n          },\n          anchor: [0.5, 1],\n        },\n      });\n    } else if (this.pointStyle === 'pinRojo') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pinign.svg']),\n        },\n      });\n    } else if (this.pointStyle === 'pinMorado') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/m-pin-24.svg']),\n        },\n      });\n    }\n    // Style for hiding geometry\n    this.simple = new M.style.Polygon({\n      fill: {\n        color: 'black',\n        opacity: 0,\n      },\n    });\n  }\n  /**\n    * This\n    function inserts a popUp with information about the searched location\n      (and whether it 's an exact result or an approximation)\n    * @param { string } fullAddress location address(street, portal, etc.)\n    * @param { Array } coordinates latitude[0] and longitude[1] coordinates\n    * @param { boolean } exactResult indicating\n    if the given result is a perfect match\n    */\n  showSearchPopUp(fullAddress, coordinates, exactResult, e = {}) {\n    const destinyProj = this.map.getProjection().code;\n    const destinySource = 'EPSG:4326';\n    const newCoordinates = this.getImpl()\n      .reprojectReverse([coordinates[1], coordinates[0]], destinySource, destinyProj);\n    let exitState;\n    if (exactResult !== 1) {\n      exitState = getValue('aprox');\n    } else {\n      exitState = getValue('exact');\n    }\n    this.showPopUp(fullAddress, newCoordinates, coordinates, exitState, false, e);\n  }\n\n  /**\n    * This\n    function inserts a popUp with information about the searched location\n      (and whether it 's an exact result or an approximation)\n    * @param { string } fullAddress location address(street, portal, etc.)\n    * @param { Array } coordinates latitude[0] and longitude[1] coordinates\n    * @param { boolean } exactResult indicating\n    if the given result is a perfect match\n    */\n  showSearchPopUpRC(fullAddress, coords, exactResult, e = {}) {\n    const target = 'EPSG:4326';\n    const source = this.map.getProjection().code;\n    const newCoords = this.getImpl().reprojectReverse([coords[0], coords[1]], source, target);\n    let exitState;\n    if (exactResult !== 1) {\n      exitState = getValue('aprox');\n    } else {\n      exitState = getValue('exact');\n    }\n\n    this.showPopUp(fullAddress, coords, newCoords, exitState, false, e);\n  }\n  /**\n   * This function inserts a popup on the map with information about its location.\n   * @param { string } fullAddress location address(street, portal, etc.)\n   * @param { Array } mapCoordinates latitude[0] and longitude[1] coordinates on map projection\n   * @param { Array } featureCoordinates latitude[0] and longitude[1] coordinates from feature\n   * @param { string } exitState indicating if the given result is a perfect match\n   */\n  showPopUp(\n    fullAddress, mapcoords, featureCoordinates, exitState = null, addTab = true, e = {},\n    hasOffset = true,\n  ) {\n    const featureTabOpts = { content: '', title: '' };\n    if (exitState !== null) {\n      featureTabOpts.content += `<div><b>${exitState}</b></div>`;\n    }\n\n    featureTabOpts.content += `<div><b>${fullAddress !== undefined ? fullAddress : '-'}</b></div><br/>\n                <div class='ignsearchlocator-popup'><b>Lat:</b>${featureCoordinates[0].toFixed(6)}</div>\n                <div class='ignsearchlocator-popup'><b>Lon:</b>${featureCoordinates[1].toFixed(6)} </div>`;\n    if (this.map.getPopup() instanceof M.Popup && addTab === true) {\n      this.popup = this.map.getPopup();\n      this.popup.addTab(featureTabOpts);\n    } else {\n      const myPopUp = new M.Popup({ panMapIfOutOfView: !e.fake });\n      myPopUp.addTab(featureTabOpts);\n      this.map.addPopup(myPopUp, [\n        mapcoords[0],\n        mapcoords[1],\n      ]);\n      this.popup = myPopUp;\n    }\n    if (hasOffset && this.pointStyle === 'pinBlanco') this.popup.getImpl().setOffset([0, -30]);\n    this.lat = mapcoords[1];\n    this.lng = mapcoords[0];\n  }\n  /**\n   * This function sets given scale to map\n   * @public\n   * @function\n   * @param { number } scale to which the map will zoom in\n   *   (5000 if we want 1: 5000)\n   * @api\n   */\n  setScale(scale) {\n    this.getImpl().setScale(scale);\n  }\n\n  accessibilityTab(html) {\n    if (html.getAttribute('tabindex')) html.setAttribute('tabindex', this.order);\n    html.querySelectorAll('[tabindex=\"0\"]').forEach(el => el.setAttribute('tabindex', this.order));\n  }\n}\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  if (lang === 'es' || lang === 'en') {\n    return translations[lang];\n  }\n  return M.language.getTranslation(lang).ignsearchlocator;\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\n * @module M/plugin/IGNSearchLocator\n */\nimport '../assets/css/ignsearchlocator';\nimport '../assets/css/fonts';\nimport api from '../../api';\nimport geographicNameType from './constants';\nimport IGNSearchLocatorControl from './ignsearchlocatorcontrol';\nimport { getValue } from './i18n/language';\n\nimport es from './i18n/es';\nimport en from './i18n/en';\n\nexport default class IGNSearchLocator extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api\n   */\n  constructor(options) {\n    super();\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = options.servicesToSearch || 'gn';\n\n    /**\n     * CMC_url\n     * @private\n     * @type {String}\n     */\n    const defectCMC = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/ConsultaMunicipioCodigos';\n    this.CMC_url = options.CMC_url != null ? options.CMC_url : defectCMC;\n\n    /**\n     * DNPPP_url\n     * @private\n     * @type {String}\n     */\n    const defectDNPP = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/Consulta_DNPPP_Codigos';\n    this.DNPPP_url = options.DNPPP_url != null ? options.DNPPP_url : defectDNPP;\n\n    /**\n     * CPMRC_url\n     * @private\n     * @type {String}\n     */\n    const defectCPMRC = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_CPMRC';\n    this.CPMRC_url = options.CPMRC_url != null ? options.CPMRC_url : defectCPMRC;\n\n    /**\n     * catastroWMS\n     * @private\n     * @type {string}\n     */\n    this.catastroWMS = options.catastroWMS || 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_RCCOOR';\n\n\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = options.maxResults || 10;\n\n    /**\n     * This variables indicates which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'municipio,poblacion' | etc\n     */\n    this.noProcess = options.noProcess || 'poblacion';\n\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = options.countryCode || 'es';\n\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = options.urlCandidates || 'https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp';\n\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = options.urlFind || 'https://www.cartociudad.es/geocoder/api/geocoder/findJsonp';\n\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = options.urlReverse || 'https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode';\n\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = options.urlPrefix || 'http://www.idee.es/';\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = options.urlAssistant || 'https://www.idee.es/communicationsPoolServlet/SearchAssistant';\n\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = options.urlDispatcher || 'https://www.idee.es/communicationsPoolServlet/Dispatcher';\n\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    this.nomenclatorSearchType = M.config.IGNSEARCH_TYPES_CONFIGURATION || geographicNameType;\n\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility = options.resultVisibility || true;\n\n    /**\n     * This variable indicates whether the plugin can be collapsed.\n     * @private\n     * @type {boolean}\n     */\n    this.isCollapsed = options.isCollapsed || false;\n\n    /**\n     * This variable indicates whether the plugin can be collapsible.\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible || false;\n\n    /**\n     * This variable indicates plugin's position on window\n     * @private\n     * @type {string} { 'TL' | 'TR' | 'BL' | 'BR' } (corners)\n     */\n    this.position = options.position || 'TL';\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = options.pointStyle || 'pinBlanco';\n\n    /**\n     * @private\n     * @type {string} - tooltip on hover on plugin button\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.reverse_ = options.reverse || false;\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID_ = (options.locationID && options.locationID.replace(/\\^/g, '&')) || '';\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet_ = (options.requestStreet && options.requestStreet.replace(/\\^/g, '&')) || '';\n\n    let geocoderCoords = options.geocoderCoords;\n    if (M.utils.isString(geocoderCoords)) {\n      geocoderCoords = geocoderCoords.split(',');\n      geocoderCoords = [Number.parseFloat(geocoderCoords[0]),\n        Number.parseFloat(geocoderCoords[1]),\n      ];\n    }\n    /**\n     * Geocoder reverse coordinates\n     *\n     * @private\n     * @type {number}\n     */\n    this.geocoderCoords_ = geocoderCoords || [];\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    /**\n     * Zoom to do\n     *\n     * @private\n     * @type {string / number}\n     */\n    this.zoom_ = 16;\n    if (options.zoom !== undefined) {\n      this.zoom_ = parseInt(options.zoom, 10);\n    }\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.searchPosition = options.searchPosition || 'nomenclator,geocoder';\n\n    /**\n     * URL to the help for the icon\n     * @private\n     * @type {string}\n     */\n    this.helpUrl = options.helpUrl;\n\n\n    /**\n     * @private\n     * @type {Boolean}\n     */\n\n    this.cadastre = options.cadastre;\n\n    /**\n     * @private\n     * @type {Boolean}\n     */\n\n    this.searchCoordinatesXYZ = options.searchCoordinatesXYZ;\n\n    /**\n     *@private\n     *@type { Number }\n     */\n    this.order = options.order >= -1 ? options.order : null;\n  }\n\n  /**\n   * Return plugin language\n   *\n   * @public\n   * @function\n   * @param {string} lang type language\n   * @api stable\n   */\n  static getJSONTranslations(lang) {\n    if (lang === 'en' || lang === 'es') {\n      return (lang === 'en') ? en : es;\n    }\n    return M.language.getTranslation(lang).ignsearchlocator;\n  }\n\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api\n   */\n  addTo(map) {\n    this.controls_.push(new IGNSearchLocatorControl(\n      this.servicesToSearch,\n      this.CMC_url,\n      this.DNPPP_url,\n      this.CPMRC_url,\n      this.catastroWMS,\n      this.maxResults,\n      this.noProcess,\n      this.countryCode,\n      this.urlCandidates,\n      this.urlFind,\n      this.urlReverse,\n      this.urlPrefix,\n      this.urlAssistant,\n      this.urlDispatcher,\n      this.resultVisibility,\n      this.reverse_,\n      this.locationID_,\n      this.requestStreet_,\n      this.geocoderCoords_,\n      this.zoom_,\n      this.searchPosition,\n      this.position,\n      this.pointStyle,\n      this.nomenclatorSearchType,\n      this.helpUrl,\n      this.cadastre,\n      this.searchCoordinatesXYZ,\n      this.order,\n    ));\n    this.controls_[0].on('ignsearchlocator:entityFound', (extent) => {\n      this.fire('ignsearchlocator:entityFound', [extent]);\n    });\n    this.controls_[0].on('xylocator:locationCentered', (data) => {\n      this.fire('xylocator:locationCentered', data);\n    });\n    this.map_ = map;\n    if (this.position === 'TC') {\n      this.collapsible = false;\n    }\n    this.panel_ = new M.ui.Panel('IGNSearchLocator', {\n      collapsible: this.collapsible,\n      position: M.ui.position[this.position],\n      collapsed: this.isCollapsed,\n      className: 'ign-searchlocator-panel',\n      collapsedButtonClass: 'icon-ignsearch',\n      tooltip: this.tooltip_,\n      order: this.order,\n    });\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function sets geometry visibility on map (visible|invisible).\n   * @public\n   * @function\n   * @param {boolean} flag\n   * @api\n   */\n  setResultVisibility(flag) {\n    this.controls_[0].setResultVisibility(flag);\n  }\n\n  /**\n   * Name of the plugin\n   *\n   * @getter\n   * @function\n   */\n  get name() {\n    return 'ignsearchlocator';\n  }\n\n  /**\n   * Reverse parameter\n   *\n   * @getter\n   * @function\n   */\n  get reverse() {\n    return this.reverse_;\n  }\n\n  /**\n   * Reverse geocoder coordinates\n   *\n   * @getter\n   * @function\n   */\n  get geocoderCoords() {\n    return this.controls_[0].geocoderCoords;\n  }\n\n  /**\n   * Text to search\n   * @getter\n   * @function\n   */\n  get requestStreet() {\n    return this.controls_[0].requestStreet;\n  }\n\n  /**\n   * Text to search\n   * @getter\n   * @function\n   */\n  get locationID() {\n    return this.controls_[0].locationID;\n  }\n\n  /**\n   * This function compares plugins\n   *\n   * @public\n   * @function\n   * @param {M.Plugin} plugin to compare\n   * @api\n   */\n  equals(plugin) {\n    return plugin instanceof IGNSearchLocator;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.servicesToSearch}*${this.maxResults}*${this.noProcess}*${this.resultVisibility}*${this.isCollapsed}*${this.collapsible}*${this.position}*${this.reverse}*${this.requestStreet.replace(/&/g, '^')}*${this.locationID}*${this.geocoderCoords}*${this.zoom}*${this.searchPosition}*${this.pointStyle}`;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    this.map_.removeControls(this.controls_);\n    [this.map_, this.controls_, this.panel_] = [null, null, null];\n  }\n}\n","import M$plugin$IGNSearchLocator from './/facade/js/ignsearchlocator';\nimport M$control$IGNSearchLocatorControl from './/facade/js/ignsearchlocatorcontrol';\nimport M$impl$control$IGNSearchLocatorControl from './/impl/ol/js/ignsearchlocatorcontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.IGNSearchLocator = M$plugin$IGNSearchLocator;\nwindow.M.control.IGNSearchLocatorControl = M$control$IGNSearchLocatorControl;\nwindow.M.impl.control.IGNSearchLocatorControl = M$impl$control$IGNSearchLocatorControl;\n"],"sourceRoot":""}