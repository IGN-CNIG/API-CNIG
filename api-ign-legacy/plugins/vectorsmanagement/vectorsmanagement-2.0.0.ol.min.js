/*! For license information please see vectorsmanagement.ol.min.js.LICENSE.txt */
(()=>{var t={9282:(t,e,n)=>{"use strict";var r=n(4155);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,a=void 0,a=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var s,u,l=n(2136).codes,c=l.ERR_AMBIGUOUS_ARGUMENT,f=l.ERR_INVALID_ARG_TYPE,h=l.ERR_INVALID_ARG_VALUE,p=l.ERR_INVALID_RETURN_VALUE,d=l.ERR_MISSING_ARGS,y=n(5961),g=n(9539).inspect,v=n(9539).types,m=v.isPromise,_=v.isRegExp,b=n(8162)(),w=n(5624)(),x=n(1924)("RegExp.prototype.test");new Map;function S(){var t=n(9158);s=t.isDeepEqual,u=t.isDeepStrictEqual}var E=!1,C=t.exports=k,O={};function I(t){if(t.message instanceof Error)throw t.message;throw new y(t)}function P(t,e,n,r){if(!n){var i=!1;if(0===e)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new y({actual:n,expected:!0,message:r,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function k(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];P.apply(void 0,[k,e.length].concat(e))}C.fail=function t(e,n,i,o,a){var s,u=arguments.length;if(0===u)s="Failed";else if(1===u)i=e,e=void 0;else{if(!1===E)E=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");2===u&&(o="!=")}if(i instanceof Error)throw i;var l={actual:e,expected:n,operator:void 0===o?"fail":o,stackStartFn:a||t};void 0!==i&&(l.message=i);var c=new y(l);throw s&&(c.message=s,c.generatedMessage=!0),c},C.AssertionError=y,C.ok=k,C.equal=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");e!=n&&I({actual:e,expected:n,message:r,operator:"==",stackStartFn:t})},C.notEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");e==n&&I({actual:e,expected:n,message:r,operator:"!=",stackStartFn:t})},C.deepEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===s&&S(),s(e,n)||I({actual:e,expected:n,message:r,operator:"deepEqual",stackStartFn:t})},C.notDeepEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===s&&S(),s(e,n)&&I({actual:e,expected:n,message:r,operator:"notDeepEqual",stackStartFn:t})},C.deepStrictEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===s&&S(),u(e,n)||I({actual:e,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:t})},C.notDeepStrictEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===s&&S();u(e,n)&&I({actual:e,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:t})},C.strictEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");w(e,n)||I({actual:e,expected:n,message:r,operator:"strictEqual",stackStartFn:t})},C.notStrictEqual=function t(e,n,r){if(arguments.length<2)throw new d("actual","expected");w(e,n)&&I({actual:e,expected:n,message:r,operator:"notStrictEqual",stackStartFn:t})};var M=a((function t(e,n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n.forEach((function(t){t in e&&(void 0!==r&&"string"==typeof r[t]&&_(e[t])&&x(e[t],r[t])?i[t]=r[t]:i[t]=e[t])}))}));function T(t,e,n,r){if("function"!=typeof e){if(_(e))return x(e,t);if(2===arguments.length)throw new f("expected",["Function","RegExp"],e);if("object"!==i(t)||null===t){var o=new y({actual:t,expected:e,message:n,operator:"deepStrictEqual",stackStartFn:r});throw o.operator=r.name,o}var a=Object.keys(e);if(e instanceof Error)a.push("name","message");else if(0===a.length)throw new h("error",e,"may not be an empty object");return void 0===s&&S(),a.forEach((function(i){"string"==typeof t[i]&&_(e[i])&&x(e[i],t[i])||function(t,e,n,r,i,o){if(!(n in t)||!u(t[n],e[n])){if(!r){var a=new M(t,i),s=new M(e,i,t),l=new y({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw l.actual=t,l.expected=e,l.operator=o.name,l}I({actual:t,expected:e,message:r,operator:o.name,stackStartFn:o})}}(t,e,i,n,a,r)})),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function L(t){if("function"!=typeof t)throw new f("fn","Function",t);try{t()}catch(t){return t}return O}function N(t){return m(t)||null!==t&&"object"===i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function A(t){return Promise.resolve().then((function(){var e;if("function"==typeof t){if(!N(e=t()))throw new p("instance of Promise","promiseFn",e)}else{if(!N(t))throw new f("promiseFn",["Function","Promise"],t);e=t}return Promise.resolve().then((function(){return e})).then((function(){return O})).catch((function(t){return t}))}))}function R(t,e,n,r){if("string"==typeof n){if(4===arguments.length)throw new f("error",["Object","Error","Function","RegExp"],n);if("object"===i(e)&&null!==e){if(e.message===n)throw new c("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===n)throw new c("error/message",'The error "'.concat(e,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==i(n)&&"function"!=typeof n)throw new f("error",["Object","Error","Function","RegExp"],n);if(e===O){var o="";n&&n.name&&(o+=" (".concat(n.name,")")),o+=r?": ".concat(r):".";var a="rejects"===t.name?"rejection":"exception";I({actual:void 0,expected:n,operator:t.name,message:"Missing expected ".concat(a).concat(o),stackStartFn:t})}if(n&&!T(e,n,r,t))throw e}function j(t,e,n,r){if(e!==O){if("string"==typeof n&&(r=n,n=void 0),!n||T(e,n)){var i=r?": ".concat(r):".",o="doesNotReject"===t.name?"rejection":"exception";I({actual:e,expected:n,operator:t.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}function D(t,e,n,r,o){if(!_(e))throw new f("regexp","RegExp",e);var a="match"===o;if("string"!=typeof t||x(e,t)!==a){if(n instanceof Error)throw n;var s=!n;n=n||("string"!=typeof t?'The "string" argument must be of type string. Received type '+"".concat(i(t)," (").concat(g(t),")"):(a?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(g(e),". Input:\n\n").concat(g(t),"\n"));var u=new y({actual:t,expected:e,message:n,operator:o,stackStartFn:r});throw u.generatedMessage=s,u}}function F(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];P.apply(void 0,[F,e.length].concat(e))}C.throws=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];R.apply(void 0,[t,L(e)].concat(r))},C.rejects=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return A(e).then((function(e){return R.apply(void 0,[t,e].concat(r))}))},C.doesNotThrow=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];j.apply(void 0,[t,L(e)].concat(r))},C.doesNotReject=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return A(e).then((function(e){return j.apply(void 0,[t,e].concat(r))}))},C.ifError=function t(e){if(null!=e){var n="ifError got unwanted exception: ";"object"===i(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?n+=e.constructor.name:n+=e.message:n+=g(e);var r=new y({actual:e,expected:null,operator:"ifError",message:n,stackStartFn:t}),o=e.stack;if("string"==typeof o){var a=o.split("\n");a.shift();for(var s=r.stack.split("\n"),u=0;u<a.length;u++){var l=s.indexOf(a[u]);if(-1!==l){s=s.slice(0,l);break}}r.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw r}},C.match=function t(e,n,r){D(e,n,r,t,"match")},C.doesNotMatch=function t(e,n,r){D(e,n,r,t,"doesNotMatch")},C.strict=b(F,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual}),C.strict.strict=C.strict},5961:(t,e,n)=>{"use strict";var r=n(4155);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}function l(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)},f(t)}function h(t,e,n){return h=p()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&d(i,n.prototype),i},h.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}var v=n(9539).inspect,m=n(2136).codes.ERR_INVALID_ARG_TYPE;function _(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}var b="",w="",x="",S="",E={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function C(t){var e=Object.keys(t),n=Object.create(Object.getPrototypeOf(t));return e.forEach((function(e){n[e]=t[e]})),Object.defineProperty(n,"message",{value:t.message}),n}function O(t){return v(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function I(t,e,n){var i="",o="",a=0,s="",u=!1,l=O(t),c=l.split("\n"),f=O(e).split("\n"),h=0,p="";if("strictEqual"===n&&"object"===g(t)&&"object"===g(e)&&null!==t&&null!==e&&(n="strictEqualObject"),1===c.length&&1===f.length&&c[0]!==f[0]){var d=c[0].length+f[0].length;if(d<=10){if(!("object"===g(t)&&null!==t||"object"===g(e)&&null!==e||0===t&&0===e))return"".concat(E[n],"\n\n")+"".concat(c[0]," !== ").concat(f[0],"\n")}else if("strictEqualObject"!==n){if(d<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;c[0][h]===f[0][h];)h++;h>2&&(p="\n  ".concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return"";var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,n-t.length)}(" ",h),"^"),h=0)}}}for(var y=c[c.length-1],v=f[f.length-1];y===v&&(h++<2?s="\n  ".concat(y).concat(s):i=y,c.pop(),f.pop(),0!==c.length&&0!==f.length);)y=c[c.length-1],v=f[f.length-1];var m=Math.max(c.length,f.length);if(0===m){var C=l.split("\n");if(C.length>30)for(C[26]="".concat(b,"...").concat(S);C.length>27;)C.pop();return"".concat(E.notIdentical,"\n\n").concat(C.join("\n"),"\n")}h>3&&(s="\n".concat(b,"...").concat(S).concat(s),u=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var I=0,P=E[n]+"\n".concat(w,"+ actual").concat(S," ").concat(x,"- expected").concat(S),k=" ".concat(b,"...").concat(S," Lines skipped");for(h=0;h<m;h++){var M=h-a;if(c.length<h+1)M>1&&h>2&&(M>4?(o+="\n".concat(b,"...").concat(S),u=!0):M>3&&(o+="\n  ".concat(f[h-2]),I++),o+="\n  ".concat(f[h-1]),I++),a=h,i+="\n".concat(x,"-").concat(S," ").concat(f[h]),I++;else if(f.length<h+1)M>1&&h>2&&(M>4?(o+="\n".concat(b,"...").concat(S),u=!0):M>3&&(o+="\n  ".concat(c[h-2]),I++),o+="\n  ".concat(c[h-1]),I++),a=h,o+="\n".concat(w,"+").concat(S," ").concat(c[h]),I++;else{var T=f[h],L=c[h],N=L!==T&&(!_(L,",")||L.slice(0,-1)!==T);N&&_(T,",")&&T.slice(0,-1)===L&&(N=!1,L+=","),N?(M>1&&h>2&&(M>4?(o+="\n".concat(b,"...").concat(S),u=!0):M>3&&(o+="\n  ".concat(c[h-2]),I++),o+="\n  ".concat(c[h-1]),I++),a=h,o+="\n".concat(w,"+").concat(S," ").concat(L),i+="\n".concat(x,"-").concat(S," ").concat(T),I+=2):(o+=i,i="",1!==M&&0!==h||(o+="\n  ".concat(L),I++))}if(I>20&&h<m-2)return"".concat(P).concat(k,"\n").concat(o,"\n").concat(b,"...").concat(S).concat(i,"\n")+"".concat(b,"...").concat(S)}return"".concat(P).concat(u?k:"","\n").concat(o).concat(i).concat(s).concat(p)}var P=function(t,e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(_,t);var n,i,a,u,f,h=(n=_,i=p(),function(){var t,e=y(n);if(i){var r=y(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function _(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),"object"!==g(t)||null===t)throw new m("options","Object",t);var n=t.message,i=t.operator,o=t.stackStartFn,a=t.actual,s=t.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=n)e=h.call(this,String(n));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(b="[34m",w="[32m",S="[39m",x="[31m"):(b="",w="",S="",x="")),"object"===g(a)&&null!==a&&"object"===g(s)&&null!==s&&"stack"in a&&a instanceof Error&&"stack"in s&&s instanceof Error&&(a=C(a),s=C(s)),"deepStrictEqual"===i||"strictEqual"===i)e=h.call(this,I(a,s,i));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var f=E[i],p=O(a).split("\n");if("notStrictEqual"===i&&"object"===g(a)&&null!==a&&(f=E.notStrictEqualObject),p.length>30)for(p[26]="".concat(b,"...").concat(S);p.length>27;)p.pop();e=1===p.length?h.call(this,"".concat(f," ").concat(p[0])):h.call(this,"".concat(f,"\n\n").concat(p.join("\n"),"\n"))}else{var d=O(a),y="",v=E[i];"notDeepEqual"===i||"notEqual"===i?(d="".concat(E[i],"\n\n").concat(d)).length>1024&&(d="".concat(d.slice(0,1021),"...")):(y="".concat(O(s)),d.length>512&&(d="".concat(d.slice(0,509),"...")),y.length>512&&(y="".concat(y.slice(0,509),"...")),"deepEqual"===i||"equal"===i?d="".concat(v,"\n\n").concat(d,"\n\nshould equal\n\n"):y=" ".concat(i," ").concat(y)),e=h.call(this,"".concat(d).concat(y))}return Error.stackTraceLimit=u,e.generatedMessage=!n,Object.defineProperty(c(e),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),e.code="ERR_ASSERTION",e.actual=a,e.expected=s,e.operator=i,Error.captureStackTrace&&Error.captureStackTrace(c(e),o),e.stack,e.name="AssertionError",l(e)}return a=_,(u=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(t,e){return v(this,o(o({},e),{},{customInspect:!1,depth:0}))}}])&&s(a.prototype,u),f&&s(a,f),Object.defineProperty(a,"prototype",{writable:!1}),_}(f(Error),v.custom);t.exports=P},2136:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var u,l,c={};function f(t,e,n){n||(n=Error);var r=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,n);var r,s,u,l=a(c);function c(n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),o=l.call(this,function(t,n,r){return"string"==typeof e?e:e(t,n,r)}(n,r,i)),o.code=t,o}return r=c,s&&i(r.prototype,s),u&&i(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r}(n);c[t]=r}function h(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",(function(t,e,i){var o,a,s,l;if(void 0===u&&(u=n(9282)),u("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(a="not ",e.substr(!s||s<0?0:+s,a.length)===a)?(o="must not be",e=e.replace(/^not /,"")):o="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))l="The ".concat(t," ").concat(o," ").concat(h(e,"type"));else{var c=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}(t,".")?"property":"argument";l='The "'.concat(t,'" ').concat(c," ").concat(o," ").concat(h(e,"type"))}return l+=". Received type ".concat(r(i))}),TypeError),f("ERR_INVALID_ARG_VALUE",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===l&&(l=n(9539));var i=l.inspect(e);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),f("ERR_INVALID_RETURN_VALUE",(function(t,e,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(i,".")}),TypeError),f("ERR_MISSING_ARGS",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];void 0===u&&(u=n(9282)),u(e.length>0,"At least one arg needs to be specified");var i="The ",o=e.length;switch(e=e.map((function(t){return'"'.concat(t,'"')})),o){case 1:i+="".concat(e[0]," argument");break;case 2:i+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:i+=e.slice(0,o-1).join(", "),i+=", and ".concat(e[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),t.exports.codes=c},9158:(t,e,n)=>{"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var a=void 0!==/a/g.flags,s=function(t){var e=[];return t.forEach((function(t){return e.push(t)})),e},u=function(t){var e=[];return t.forEach((function(t,n){return e.push([n,t])})),e},l=Object.is?Object.is:n(609),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},f=Number.isNaN?Number.isNaN:n(360);function h(t){return t.call.bind(t)}var p=h(Object.prototype.hasOwnProperty),d=h(Object.prototype.propertyIsEnumerable),y=h(Object.prototype.toString),g=n(9539).types,v=g.isAnyArrayBuffer,m=g.isArrayBufferView,_=g.isDate,b=g.isMap,w=g.isRegExp,x=g.isSet,S=g.isNativeError,E=g.isBoxedPrimitive,C=g.isNumberObject,O=g.isStringObject,I=g.isBooleanObject,P=g.isBigIntObject,k=g.isSymbolObject,M=g.isFloat32Array,T=g.isFloat64Array;function L(t){if(0===t.length||t.length>10)return!0;for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n<48||n>57)return!0}return 10===t.length&&t>=Math.pow(2,32)}function N(t){return Object.keys(t).filter(L).concat(c(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function A(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}var R=0,j=1,D=2,F=3;function B(t,e,n,r){if(t===e)return 0!==t||(!n||l(t,e));if(n){if("object"!==o(t))return"number"==typeof t&&f(t)&&f(e);if("object"!==o(e)||null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(null===t||"object"!==o(t))return(null===e||"object"!==o(e))&&t==e;if(null===e||"object"!==o(e))return!1}var i,s,u,c,h=y(t);if(h!==y(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var p=N(t),d=N(e);return p.length===d.length&&z(t,e,n,r,j,p)}if("[object Object]"===h&&(!b(t)&&b(e)||!x(t)&&x(e)))return!1;if(_(t)){if(!_(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(w(t)){if(!w(e)||(u=t,c=e,!(a?u.source===c.source&&u.flags===c.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(c))))return!1}else if(S(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(m(t)){if(n||!M(t)&&!T(t)){if(!function(t,e){return t.byteLength===e.byteLength&&0===A(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return!1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}(t,e))return!1;var g=N(t),L=N(e);return g.length===L.length&&z(t,e,n,r,R,g)}if(x(t))return!(!x(e)||t.size!==e.size)&&z(t,e,n,r,D);if(b(t))return!(!b(e)||t.size!==e.size)&&z(t,e,n,r,F);if(v(t)){if(s=e,(i=t).byteLength!==s.byteLength||0!==A(new Uint8Array(i),new Uint8Array(s)))return!1}else if(E(t)&&!function(t,e){return C(t)?C(e)&&l(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):O(t)?O(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):I(t)?I(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):P(t)?P(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):k(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}(t,e))return!1}return z(t,e,n,r,R)}function G(t,e){return e.filter((function(e){return d(t,e)}))}function z(t,e,n,i,a,l){if(5===arguments.length){l=Object.keys(t);var f=Object.keys(e);if(l.length!==f.length)return!1}for(var h=0;h<l.length;h++)if(!p(e,l[h]))return!1;if(n&&5===arguments.length){var y=c(t);if(0!==y.length){var g=0;for(h=0;h<y.length;h++){var v=y[h];if(d(t,v)){if(!d(e,v))return!1;l.push(v),g++}else if(d(e,v))return!1}var m=c(e);if(y.length!==m.length&&G(e,m).length!==g)return!1}else{var _=c(e);if(0!==_.length&&0!==G(e,_).length)return!1}}if(0===l.length&&(a===R||a===j&&0===t.length||0===t.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var b=i.val1.get(t);if(void 0!==b){var w=i.val2.get(e);if(void 0!==w)return b===w}i.position++}i.val1.set(t,i.position),i.val2.set(e,i.position);var x=function(t,e,n,i,a,l){var c=0;if(l===D){if(!function(t,e,n,r){for(var i=null,a=s(t),u=0;u<a.length;u++){var l=a[u];if("object"===o(l)&&null!==l)null===i&&(i=new Set),i.add(l);else if(!e.has(l)){if(n)return!1;if(!V(t,e,l))return!1;null===i&&(i=new Set),i.add(l)}}if(null!==i){for(var c=s(e),f=0;f<c.length;f++){var h=c[f];if("object"===o(h)&&null!==h){if(!q(i,h,n,r))return!1}else if(!n&&!t.has(h)&&!q(i,h,n,r))return!1}return 0===i.size}return!0}(t,e,n,a))return!1}else if(l===F){if(!function(t,e,n,i){for(var a=null,s=u(t),l=0;l<s.length;l++){var c=r(s[l],2),f=c[0],h=c[1];if("object"===o(f)&&null!==f)null===a&&(a=new Set),a.add(f);else{var p=e.get(f);if(void 0===p&&!e.has(f)||!B(h,p,n,i)){if(n)return!1;if(!Y(t,e,f,h,i))return!1;null===a&&(a=new Set),a.add(f)}}}if(null!==a){for(var d=u(e),y=0;y<d.length;y++){var g=r(d[y],2),v=g[0],m=g[1];if("object"===o(v)&&null!==v){if(!X(a,t,v,m,n,i))return!1}else if(!(n||t.has(v)&&B(t.get(v),m,!1,i)||X(a,t,v,m,!1,i)))return!1}return 0===a.size}return!0}(t,e,n,a))return!1}else if(l===j)for(;c<t.length;c++){if(!p(t,c)){if(p(e,c))return!1;for(var f=Object.keys(t);c<f.length;c++){var h=f[c];if(!p(e,h)||!B(t[h],e[h],n,a))return!1}return f.length===Object.keys(e).length}if(!p(e,c)||!B(t[c],e[c],n,a))return!1}for(c=0;c<i.length;c++){var d=i[c];if(!B(t[d],e[d],n,a))return!1}return!0}(t,e,n,l,i,a);return i.val1.delete(t),i.val2.delete(e),x}function q(t,e,n,r){for(var i=s(t),o=0;o<i.length;o++){var a=i[o];if(B(e,a,n,r))return t.delete(a),!0}return!1}function U(t){switch(o(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(f(t))return!1}return!0}function V(t,e,n){var r=U(n);return null!=r?r:e.has(r)&&!t.has(r)}function Y(t,e,n,r,i){var o=U(n);if(null!=o)return o;var a=e.get(o);return!(void 0===a&&!e.has(o)||!B(r,a,!1,i))&&(!t.has(o)&&B(r,a,!1,i))}function X(t,e,n,r,i,o){for(var a=s(t),u=0;u<a.length;u++){var l=a[u];if(B(n,l,i,o)&&B(r,e.get(l),i,o))return t.delete(l),!0}return!1}t.exports={isDeepEqual:function(t,e){return B(t,e,false)},isDeepStrictEqual:function(t,e){return B(t,e,true)}}},1924:(t,e,n)=>{"use strict";var r=n(210),i=n(5559),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?i(n):n}},5559:(t,e,n)=>{"use strict";var r=n(8612),i=n(210),o=n(7771),a=n(4453),s=i("%Function.prototype.apply%"),u=i("%Function.prototype.call%"),l=i("%Reflect.apply%",!0)||r.call(u,s),c=n(4429),f=i("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new a("a function is required");var e=l(r,u,arguments);return o(e,1+f(0,t.length-(arguments.length-1)),!0)};var h=function(){return l(r,s,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},4019:(t,e,n)=>{t.exports.structure=n(4590)},810:(t,e,n)=>{var r=n(2686),i={string:"C",number:"N",boolean:"L",null:"C"};function o(t){var e={},n=[];for(var o in t)e[o]=null===t[o]?"null":typeof t[o];for(var a in e){var s=i[e[a]];s&&n.push({name:a,type:s,size:r[s]})}return n}t.exports.multi=function(t){var e={};return t.forEach((function(t){!function(t,e){for(var n in e){var r=void 0!==e[n]&&null!==e[n];(void 0===t[n]||r)&&(t[n]=e[n])}}(e,t)})),o(e)},t.exports.bytesPer=function(t){return t.reduce((function(t,e){return t+e.size}),1)},t.exports.obj=o},2686:t=>{t.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}},514:t=>{t.exports.lpad=function(t,e,n){for(;t.length<e;)t=n+t;return t},t.exports.rpad=function(t,e,n){for(;t.length<e;)t+=n;return t},t.exports.writeField=function(t,e,n,r){for(var i=0;i<e;i++)t.setUint8(r,n.charCodeAt(i)),r++;return r}},4590:(t,e,n)=>{n(2686);var r=n(514),i=n(810);t.exports=function(t,e){var n=e||i.multi(t),o=32*n.length+1,a=i.bytesPer(n),s=new ArrayBuffer(o+32+a*t.length+1),u=new Date,l=new DataView(s);l.setUint8(0,3),l.setUint8(1,u.getFullYear()-1900),l.setUint8(2,u.getMonth()),l.setUint8(3,u.getDate()),l.setUint32(4,t.length,!0);var c=o+32;return l.setUint16(8,c,!0),l.setUint16(10,a,!0),l.setInt8(32+o-1,13),n.forEach((function(t,e){t.name.split("").slice(0,8).forEach((function(t,n){l.setInt8(32+32*e+n,t.charCodeAt(0))})),l.setInt8(32+32*e+11,t.type.charCodeAt(0)),l.setInt8(32+32*e+16,t.size),"N"==t.type&&l.setInt8(32+32*e+17,3)})),offset=o+32,t.forEach((function(t,e){l.setUint8(offset,32),offset++,n.forEach((function(e){var n=t[e.name];switch(null==n&&(n=""),e.type){case"L":l.setUint8(offset,n?84:70),offset++;break;case"D":offset=r.writeField(l,8,r.lpad(n.toString(),8," "),offset);break;case"N":offset=r.writeField(l,e.size,r.lpad(n.toString(),e.size," ").substr(0,18),offset);break;case"C":offset=r.writeField(l,e.size,r.rpad(n.toString(),e.size," "),offset);break;default:throw new Error("Unknown field type")}}))})),l.setUint8(offset,26),l}},2296:(t,e,n)=>{"use strict";var r=n(4429),i=n(3464),o=n(4453),a=n(7296);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new o("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],f=!!a&&a(t,e);if(r)r(t,e,{configurable:null===l&&f?f.configurable:!l,enumerable:null===s&&f?f.enumerable:!s,value:n,writable:null===u&&f?f.writable:!u});else{if(!c&&(s||u||l))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},4289:(t,e,n)=>{"use strict";var r=n(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=n(2296),u=n(1044)(),l=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!=typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;u?s(t,e,n,!0):s(t,e,n)},c=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)l(t,o[s],e[o[s]],n[o[s]])};c.supportsDescriptors=!!u,t.exports=c},4429:(t,e,n)=>{"use strict";var r=n(210)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(t){r=!1}t.exports=r},3981:t=>{"use strict";t.exports=EvalError},1648:t=>{"use strict";t.exports=Error},4726:t=>{"use strict";t.exports=RangeError},6712:t=>{"use strict";t.exports=ReferenceError},3464:t=>{"use strict";t.exports=SyntaxError},4453:t=>{"use strict";t.exports=TypeError},3915:t=>{"use strict";t.exports=URIError},4029:(t,e,n)=>{"use strict";var r=n(5320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(t)?function(t,e,n){for(var r=0,i=t.length;r<i;r++)o.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,a):"string"==typeof t?function(t,e,n){for(var r=0,i=t.length;r<i;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}(t,e,a):function(t,e,n){for(var r in t)o.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,a)}},7648:t=>{"use strict";var e=Object.prototype.toString,n=Math.max,r=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n};t.exports=function(t){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,a=function(t,e){for(var n=[],r=e||0,i=0;r<t.length;r+=1,i+=1)n[i]=t[r];return n}(arguments,1),s=n(0,i.length-a.length),u=[],l=0;l<s;l++)u[l]="$"+l;if(o=Function("binder","return function ("+function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=i.apply(this,r(a,arguments));return Object(e)===e?e:this}return i.apply(t,r(a,arguments))})),i.prototype){var c=function(){};c.prototype=i.prototype,o.prototype=new c,c.prototype=null}return o}},8612:(t,e,n)=>{"use strict";var r=n(7648);t.exports=Function.prototype.bind||r},210:(t,e,n)=>{"use strict";var r,i=n(1648),o=n(3981),a=n(4726),s=n(6712),u=n(3464),l=n(4453),c=n(3915),f=Function,h=function(t){try{return f('"use strict"; return ('+t+").constructor;")()}catch(t){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(t){p=null}var d=function(){throw new l},y=p?function(){try{return d}catch(t){try{return p(arguments,"callee").get}catch(t){return d}}}():d,g=n(1405)(),v=n(8185)(),m=Object.getPrototypeOf||(v?function(t){return t.__proto__}:null),_={},b="undefined"!=typeof Uint8Array&&m?m(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&m?m([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":f,"%GeneratorFunction%":_,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&m?m(m([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&m?m((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&m?m((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&m?m(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":u,"%ThrowTypeError%":y,"%TypedArray%":b,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(m)try{null.error}catch(t){var x=m(m(t));w["%Error.prototype%"]=x}var S=function t(e){var n;if("%AsyncFunction%"===e)n=h("async function () {}");else if("%GeneratorFunction%"===e)n=h("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=h("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&m&&(n=m(i.prototype))}return w[e]=n,n},E={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=n(8612),O=n(8824),I=C.call(Function.call,Array.prototype.concat),P=C.call(Function.apply,Array.prototype.splice),k=C.call(Function.call,String.prototype.replace),M=C.call(Function.call,String.prototype.slice),T=C.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N=/\\(\\)?/g,A=function(t,e){var n,r=t;if(O(E,r)&&(r="%"+(n=E[r])[0]+"%"),O(w,r)){var i=w[r];if(i===_&&(i=S(r)),void 0===i&&!e)throw new l("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new u("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new l('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/,t))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=M(t,0,1),n=M(t,-1);if("%"===e&&"%"!==n)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new u("invalid intrinsic syntax, expected opening `%`");var r=[];return k(t,L,(function(t,e,n,i){r[r.length]=n?k(i,N,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",i=A("%"+r+"%",e),o=i.name,a=i.value,s=!1,c=i.alias;c&&(r=c[0],P(n,I([0,1],c)));for(var f=1,h=!0;f<n.length;f+=1){var d=n[f],y=M(d,0,1),g=M(d,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==d&&h||(s=!0),O(w,o="%"+(r+="."+d)+"%"))a=w[o];else if(null!=a){if(!(d in a)){if(!e)throw new l("base intrinsic for "+t+" exists, but the property is not available.");return}if(p&&f+1>=n.length){var v=p(a,d);a=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:a[d]}else h=O(a,d),a=a[d];h&&!s&&(w[o]=a)}}return a}},7296:(t,e,n)=>{"use strict";var r=n(210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},1044:(t,e,n)=>{"use strict";var r=n(4429),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},8185:t=>{"use strict";var e={__proto__:null,foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof n)}},1405:(t,e,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(5419);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(t,e,n)=>{"use strict";var r=n(5419);t.exports=function(){return r()&&!!Symbol.toStringTag}},8824:(t,e,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(8612);t.exports=o.call(r,i)},3268:t=>{t.exports='<div class="m-vectorsmanagement-analysis">\n\x3c!--    <div>\n        <label tabindex="0" for="radio-perfil" role="text" aria-label="{{translations.layer}}">{{translations.analysisProfile}} </label>\n        <input type="radio" id="radio-perfil" name="radio-analysis" value="perfil" checked>\n    </div>\n    <div>\n        <label tabindex="0" for="radio-buffer" role="text" aria-label="{{translations.feature}}">{{translations.analysisBuffer}} </label>\n        <input type="radio" id="radio-buffer" name="radio-analysis" value="buffer">\n    </div>--\x3e\n    <div tabindex="0" id="analysisBtns" class="m-vectorsmanagement-analysis-content">\n        <div>\n            <button tabindex="0" id="topographic-profile-btn" class="vectorsmanagement-icon-profile" title="{{translations.analysisProfile}}"></button>\n            <button tabindex="0" id="buffer-btn" class="vectorsmanagement-icon-radio-relleno" title="{{translations.analysisBuffer}}"></button>\n            <button tabindex="0" id="vectorsmanagement-btnCoord" class="vectorsmanagement-icon-design-tool" title="{{translations.extension}}"></button>\n            <button tabindex="0" id="vectorsmanagement-btnToGeojson" class="vectorsmanagement-icon-json-file vectorsmanagement-geojson" title="{{translations.getGeoJSON}}"></button>\n        </div>\n        <div tabindex="0" id="featureInfo" style="display: none;" class="closed m-vectorsmanagement-analysis-featureInfo"></div>\n    </div>\n    <button  tabindex="0" style="display: none" id="vectorsmanagement-analysis-btn">{{translations.calculate}}</button>\n</div>'},672:t=>{t.exports='<section id="clear-layer-modal" class="closed">\n    <div class="clear-layer-modal">\n        <p tabindex="0">{{translations.clear_geometries_msg}}</p>\n\n        <div id="clean-modal-btns">\n            <button tabindex="0" id="confirm-clear-btn">{{translations.confirm}}</button>\n            <button tabindex="0" id="cancel-clear-btn">{{translations.cancel}}</button>\n        </div>\n    </div>\n</section>'},3122:t=>{t.exports='<div class="m-vectorsmanagement-creation-container">\n    <div id="creationBtns" class="m-vectorsmanagement-creationBtns">\n        <button tabindex="0" id="pointdrawing" class="vectorsmanagement-icon-pin" title="{{translations.creationPoint}}"></button>\n        <button tabindex="0" id="pointlocateddrawing" class="vectorsmanagement-icon-pin-located" title="{{translations.creationCoordPoint}}"></button>\n        <button tabindex="0" id="linedrawing" class="vectorsmanagement-icon-linea" title="{{translations.creationLine}}"></button>\n        <button tabindex="0" id="polygondrawing" class="vectorsmanagement-icon-poligono" title="{{translations.creationPolygon}}"></button>\n        <button tabindex="0" id="figuredrawing" class="vectorsmanagement-icon-medir-area" title="{{translations.creationFigure}}"></button>\n        <button tabindex="0" id="textdrawing" class="vectorsmanagement-icon-font" title="{{translations.creationText}}"></button>\n    </div>\n    <div id="m-point-coordinates" class="closed">\n        <div>\n            <div class="m-point-coordinates-container">\n                <div class="m-point-coordinates-panel">\n                    <div id="m-point-coordinates-coordinatesSystem">\n                        <label tabindex="0" for="m-point-coordinates-srs" role="text" aria-label="SRS">SRS:</label>\n                        <select tabindex="0" name="srs" id="m-point-coordinates-srs" class="dropdown">\n                            <option class="m-point-coordinates-srs-option" data-units="d" value="EPSG:4258" option="selected">ETRS89 Geogr√°ficas (4258)</option>\n                            <option class="m-point-coordinates-srs-option" data-units="d" value="EPSG:4326">WGS84 Geogr√°ficas (4326)</option>\n                            <option class="m-point-coordinates-srs-option" data-units="m" value="EPSG:3857">WGS84 Pseudo Mercator (3857)</option>\n                            <option class="m-point-coordinates-srs-option" data-units="m" value="EPSG:25831">ETRS89 UTM huso 31 (25831)</option>\n                            <option class="m-point-coordinates-srs-option" data-units="m" value="EPSG:25830">ETRS89 UTM huso 30 (25830)</option>\n                            <option class="m-point-coordinates-srs-option" data-units="m" value="EPSG:25829">ETRS89 UTM huso 29 (25829)</option>\n                            <option class="m-point-coordinates-srs-option" data-units="m" value="EPSG:25828">ETRS89 UTM huso 28 (25828)</option>\n                        </select>\n                    </div>\n                    <div tabindex="0" id="m-point-coordinates-utm" class="closed">\n                        <label tabindex="0" for="UTM-X" role="text" aria-label="X">X:</label>\n                        <input tabindex="0" type="text" name="UTM-X" id="UTM-X" style="color:black">\n                        <br />\n                        <label tabindex="0" for="UTM-Y" role="text" aria-label="Y">Y:</label>\n                        <input tabindex="0" type="text" name="UTM-Y" id="UTM-Y" style="color:black">\n                    </div>\n                    <div tabindex="0" id="m-point-coordinates-latlon">\n                        <label tabindex="0" for="LON" role="text" aria-label="{{translations.creationLongitude}}">{{translations.creationLongitude}}: </label>\n                        <input tabindex="0" type="text" name="LON" id="LON" style="color:black">\n                        <br />\n                        <label tabindex="0" for="LAT" role="text" aria-label="{{translations.creationLatitude}}">{{translations.creationLatitude}}:  </label>\n                        <input tabindex="0" type="text" name="LAT" id="LAT" style="color:black">\n                    </div>\n                </div>\n            </div>\n            <div id="featureInfo"></div>\n        </div>\n        <div class="m-vectorsmanagement-coordinates-buttons">\n            <button tabindex="0" id=\'m-vectormanagement-coordinates-draw\'>{{translations.draw}}</button>\n        </div>\n    </div>\n    <div id="m-text-draw" class="m-vectorsmanagement-text-draw closed">\n        <div>\n            <label tabindex="0" id="textLabel" for="textContent">{{translations.creationText}}:</label>\n            <input tabindex="0" type="text" id="textContent">\n        </div>\n    </div>\n    <div id="m-figuretools" class="closed">\n        <div>\n            <select tabindex="0" id="figuresSelector">\n                <option value=\'4\'>{{translations.cuadrilatero}}</option>\n                <option value=\'40\'>{{translations.circulo}}</option>\n                <option value=\'3\'>{{translations.triangulo}}</option>\n                <option value=\'5\'>{{translations.pentagono}}</option>\n                <option value=\'6\'>{{translations.hexagono}}</option>\n            </select>\n            <input tabindex="0" type="checkbox" id="m-vectorsmanagement-irregularFigure">\n            <label tabindex="0" for="m-vectorsmanagement-irregularFigure">Irregular</label>\n        </div>\n    </div>\n</div>'},7551:t=>{t.exports='<div id="m-vectorsmanagement-download-container">\n    <select tabindex="0" id="m-vectorsmanagement-download-format">\n        <option value="geojson" selected>GeoJSON</option>\n        <option value="kml">KML</option>\n        <option value="gpx">GPX</option>\n        <option value="shp">Shapefile</option>\n    </select>\n    <button tabindex="0" id="m-vectorsmanagement-download-btn">{{translations.download}}</button>\n</div>'},8492:t=>{t.exports='<div class="m-vectorsmanagement-edition-container">\n    <div id="editionBtns" class="m-vectorsmanagement-editionBtns">\n        <button tabindex="0" id="edit" class="vectorsmanagement-icon-editar2" title="{{translations.editgeometria}}"></button>\n        <button tabindex="0" id="holedrawing" class="vectorsmanagement-icon-hole" title="{{translations.hole}}"></button>\n        <button tabindex="0" id="rotatedrawing" class="vectorsmanagement-icon-resize-full-alt" title="{{translations.rotation}}"></button>\n        <button tabindex="0" id="scaledrawing" class="vectorsmanagement-icon-tamano" title="{{translations.scale}}"></button>\n        <button tabindex="0" id="movedrawing" class="vectorsmanagement-icon-mover" title="{{translations.move}}"></button>\n        <button tabindex="0" id="editattribute" class="vectorsmanagement-icon-table" title="{{translations.attributes}}"></button>\n        <button tabindex="0" id="cleanAll" class="vectorsmanagement-icon-papelera" title="{{translations.clean}}"></button>\n    </div>\n    <div id="edition-container" class="closed">\n        <div>\n            <button tabindex="0" id="m-vectorsmanagement-deletegeom-btn">{{translations.delete}}</button>\n        </div>\n    </div>\n</div>'},897:t=>{t.exports='<div id="edition-attributes-container" class="closed">\n    <p class="popup-title" style="margin: 0; cursor: move;">{{translations.title_attribute_table}}</p>\n    <div>\n        <button tabindex="0" id="add-attribute-btn">{{translations.newcolumn}}</button>\n        <div id="m-vectorsmanagement-attribute-table-container"></div>\n    </div>\n</div>'},4881:t=>{t.exports='<div>\n    <div class="popup-section">\n        <div id="addlayer-title" class="popup-title"><b>{{translations.addlayer_title}}</b> <span class=\'vectorsmanagement-icon-layers\'></span></div>\n        <p tabindex="0" id="addlayer-content">{{translations.addlayer_content}}</p>\n    </div>\n    <div class="popup-section">\n        <div id="selection-title" class="popup-title"><b>{{translations.selection_title}}</b> <span class=\'vectorsmanagement-icon-seleccionar\'></span></div>\n        <p tabindex="0" id="selection-content">{{translations.selection_content}}</p>\n    </div>\n    <div class="popup-section">\n        <div id="creation-title" class="popup-title"><b>{{translations.creation_title}}</b> <span class=\'vectorsmanagement-icon-mas\'></span></div>\n        <p tabindex="0" id="creation-content">{{translations.creation_content}}</p>\n        <ul>\n            <li tabindex="0">{{translations.creation_content_1}} <span class=\'vectorsmanagement-icon-pin\'></span>: {{translations.creation_content_1_1}}</li>\n            <li tabindex="0">{{translations.creation_content_2}} <span class=\'vectorsmanagement-icon-pin-located\'></span>: {{translations.creation_content_2_1}}</li>\n            <li tabindex="0">{{translations.creation_content_3}} <span class=\'vectorsmanagement-icon-linea\'></span>: {{translations.creation_content_3_1}}</li>\n            <li tabindex="0">{{translations.creation_content_4}} <span class=\'vectorsmanagement-icon-poligono\'></span>: {{translations.creation_content_4_1}}</li>\n            <li tabindex="0">{{translations.creation_content_5}} <span class=\'vectorsmanagement-icon-medir-area\'></span>: {{translations.creation_content_5_1}}</li>\n            <li tabindex="0">{{translations.creation_content_6}} <span class=\'vectorsmanagement-icon-font\'></span>: {{translations.creation_content_6_1}}</li>\n        </ul>\n    </div>\n    <div class="popup-section">\n        <div id="edition-title" class="popup-title"><b>{{translations.edition_title}}</b> <span class=\'vectorsmanagement-icon-editar\'></span></div>\n        <p id="edition-content">{{translations.edition_content}}</p>\n        <ul>\n            <li tabindex="0">{{translations.edition_content_1}} <span class=\'vectorsmanagement-icon-editar2\'></span>: {{translations.edition_content_1_1}}</li>\n            <li tabindex="0">{{translations.edition_content_2}} <span class=\'vectorsmanagement-icon-hole\'></span>: {{translations.edition_content_2_1}}</li>\n            <li tabindex="0">{{translations.edition_content_3}} <span class=\'vectorsmanagement-icon-resize-full-alt\'></span>: {{translations.edition_content_3_1}}</li>\n            <li tabindex="0">{{translations.edition_content_4}} <span class=\'vectorsmanagement-icon-tamano\'></span>: {{translations.edition_content_4_1}}</li>\n            <li tabindex="0">{{translations.edition_content_5}} <span class=\'vectorsmanagement-icon-mover\'></span>: {{translations.edition_content_5_1}}</li>\n            <li tabindex="0">{{translations.edition_content_6}} <span class=\'vectorsmanagement-icon-table\'></span>: {{translations.edition_content_6_1}}</li>\n            <li tabindex="0">{{translations.edition_content_7}} <span class=\'vectorsmanagement-icon-papelera\'></span>: {{translations.edition_content_7_1}}</li>\n        </ul>\n    </div>\n    <div class="popup-section">\n        <div id="style-title" class="popup-title"><b>{{translations.style_title}}</b> <span class=\'vectorsmanagement-icon-estilo\'></span></div>\n        <p tabindex="0" id="style-content">{{translations.style_content}}</p>\n    </div>\n    <div class="popup-section">\n            <div id="analysis-title" class="popup-title"><b>{{translations.analysis_title}}</b> <span class=\'vectorsmanagement-icon-analisis\'></span></div>\n            <p tabindex="0" id="analysis-content">{{translations.analysis_content}}</p>\n            <ul>\n            <li tabindex="0">{{translations.analysis_content_1}} <span class=\'vectorsmanagement-icon-profile\'></span>: {{translations.analysis_content_1_1}}</li>\n            <li tabindex="0">{{translations.analysis_content_2}} <span class=\'vectorsmanagement-icon-radio-relleno\'></span>: {{translations.analysis_content_2_1}}</li>\n            <li tabindex="0">{{translations.analysis_content_3}} <span class=\'vectorsmanagement-icon-design-tool\'></span>: {{translations.analysis_content_3_1}}</li>\n            <li tabindex="0">{{translations.analysis_content_4}} <span class=\'vectorsmanagement-icon-json-file\'></span>: {{translations.analysis_content_4_1}}</li>\n        </ul>\n    </div>\n    <div class="popup-section">\n        <div id="download-title" class="popup-title"><b>{{translations.download_title}}</b> <span class=\'vectorsmanagement-icon-descargar\'></span></div>\n        <p tabindex="0" id="download-content">{{translations.download_content}}</p>\n    </div>\n</div>'},1242:t=>{t.exports='<section>\n    {{#if point}}\n        <table>\n            <tr tabindex="0">\n                <td>Coordenadas</td>\n                <td>X: {{point.x}}</td>\n                <td>Y: {{point.y}}</td>\n            </tr>\n        </table>\n    {{/if}}\n    {{#if line}}\n    <table>\n        <tr tabindex="0">\n            <td>Longitud</td>\n            <td>2D: {{line.length}} {{line.units}}</td>\n            <td id="infoAnalisis3DLine">3D: Calcular</td>\n        </tr>\n    </table>\n    {{/if}}\n    {{#if polygon}}\n    <table>\n        <tr tabindex="0">\n            <td>√Årea</td>\n            <td>{{polygon.area}}{{polygon.areaUnits}}<sup>2</sup> </td>\n        </tr>\n    </table>\n{{/if}}\n</section>'},3431:(t,e,n)=>{t.exports='<div>\n    <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">vectorsmanagement <img style="vertical-align: bottom; filter: invert(100%);" src="'+n(4914)+'" width="30" height="30"></h2>\n    <div>\n       <p>{{translations.help1}}</p>\n       <p>{{translations.help2}}</p>\n       <img src="{{urlImages}}vectorManagement_1.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help3}}</p>\n       <img src="{{urlImages}}vectorManagement_2.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help4}}</p>\n       <img src="{{urlImages}}vectorManagement_3.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help5}}</p>\n       <img src="{{urlImages}}vectorManagement_4.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help6}}</p>\n       <img src="{{urlImages}}vectorManagement_5.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help7}}</p>\n       <img src="{{urlImages}}vectorManagement_6.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help8}}</p>\n       <img src="{{urlImages}}vectorManagement_7.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help9}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/pluginsvectorManagement" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/pluginsvectorManagement</a></p>\n       <img src="{{urlImages}}vectorManagement_8.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help10}}</p>\n       <img src="{{urlImages}}vectorManagement_9.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help11}}</p>\n       <img src="{{urlImages}}vectorManagement_10.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help12}}</p>\n       <img src="{{urlImages}}vectorManagement_11.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help13}}</p>\n       <img src="{{urlImages}}vectorManagement_12.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help14}}</p>\n       <img src="{{urlImages}}vectorManagement_13.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help15}}</p>\n       <img src="{{urlImages}}vectorManagement_14.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help16}}</p>\n       <img src="{{urlImages}}vectorManagement_15.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help17}}</p>\n       <img src="{{urlImages}}vectorManagement_16.png" style="max-width:70%; margin: 0 auto; display: block">\n       <p>{{translations.help18}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/vectorsmanagement" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/vectorsmanagement</a></p>\n       <p>{{translations.help19}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/vectorsmanagement.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/vectorsmanagement.jsp?language=es</a></p>\n    </div>\n </div>\n '},6231:t=>{t.exports='<div id="vectorsmanagement-point-profile-container">\n    <p tabindex="0" id="point-profile-title" class="popup-title" style="margin: 0; cursor: move;">{{translations.title_point_profile}}</p>\n    <button tabindex="0" class="m-panel-btn vectorsmanagement-icon-cancelar"></button>\n    <div style="font-size: smaller;">\n        {{#if dist}}\n        <div tabindex="0" style="border-bottom: 1px solid grey;">\n            <p style="font-weight: bold;">{{translations.point_profile_map_coordinates}}</p>\n            <p>{{mapCoordX}}</p>\n            <p>{{mapCoordY}}</p>\n            <p>{{mapProj}}</p>\n        </div>\n        {{/if}}\n        <div tabindex="0" style="border-bottom: 1px solid grey;">\n            <p style="font-weight: bold;">{{translations.point_profile_geographic_coordinates}}</p>\n            <p>{{translations.longitude}}: {{geographicCoordX}}</p>\n            <p>{{translations.latitude}}: {{geographicCoordY}}</p>\n            <p>{{geographicProj}}</p>\n        </div>\n        <p tabindex="0">{{translations.altitude}}: {{altitude}}m</p>\n    </div>\n</div>'},377:t=>{t.exports='<div class="m-vectorsmanagement-style-container closed">\n    <div id="styleOptions" class="m-vectorsmanagement-styleOptions">\n        <div>\n            <div tabindex="0" id="options" tabindex="0" role="button" aria-controls="options-content">\n                {{translations.style_options}}\n                <span class="g-cartografia-flecha-abajo"></span>\n            </div>\n            <div id="options-content" class="content-row content closed" aria-hidden="true">\n                <div class="group-row">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" class="m-vectos-style-title" for="fontFamily">{{translations.fill}}: </label>\n                    </div>\n                </div>\n                <div class="group-row">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" for="colorSelectorFill">{{translations.styleColor}}: </label>\n                        <input tabindex="0" id="colorSelectorFill" type="color" value="#71a7d3">\n                    </div>\n                    <div class="vector-style-col-2">\n                        <label tabindex="0" for="opacity">{{translations.opacity}}: </label>\n                        <input tabindex="0" id="opacity" type="number" value="0.5" min="0" max="1" step="0.1">\n                    </div>\n                </div>\n                <div class="group-row" style="padding-top: 15px;">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" class="m-vectos-style-title" for="fontFamily">{{translations.stroke}}: </label>\n                    </div>\n                </div>\n                <div class="group-row">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" for="colorSelector">{{translations.styleColor}}: </label>\n                        <input tabindex="0" id="colorSelector" type="color" data-array-options="colors" value="#71a7d3">\n                    </div>\n                    <div class="vector-style-col-2">\n                        <label tabindex="0" for="thicknessSelector">{{translations.styleThickness}}: </label>\n                        <input tabindex="0" id="thicknessSelector" type="number" value="6" min="1" max="10">\n                    </div>\n                </div>\n                <div class="group-row" style="padding-top: 15px;">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" for="opacityStroke">{{translations.opacity}}: </label>\n                        <input tabindex="0" id="opacityStroke" type="number" value="0.5" min="0" max="1" step="0.1">\n                    </div>\n                </div>\n                <div class="group-row" style="padding-top: 15px;">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" class="m-vectos-style-title" for="fontFamily">{{translations.styleFont}}: </label>\n                    </div>\n                </div>\n                <div class="group-row">\n                    <div class="vector-style-col-1">\n                        <select tabindex="0" id="fontFamily">\n                            <option value="Arial" selected>Arial</option>\n                            <option value="Calibri">Calibri</option>\n                            <option value="Verdana">Verdana</option>\n                            <option value="sans-serif">Sans serif</option>\n                        </select>\n                    </div>\n                    <div class="vector-style-col-2">\n                        <label tabindex="0" id="sizeLabel" for="fontSize">{{translations.styleSize}}: </label>\n                        <input tabindex="0" type="number" id="fontSize" value="12" min="6" max="20">\n                    </div>\n                </div>\n                <div class="group-row">\n                    <div class="group-row">\n                        <div class="vector-style-col-0">\n                            <label tabindex="0" for="colorSelector-text">{{translations.styleColor}}: </label>\n                            <input tabindex="0" id="colorSelector-text" type="color" value="#71a7d3">\n                        </div>\n                    </div>\n                </div>\n                <div class="group-row">\n                    <div class="vector-style-col-0">\n                        <label tabindex="0" id="textLabel" for="textContent">{{translations.creationText}}: </label>\n                        <input tabindex="0" type="text" id="textContent">\n                    </div>\n                </div>\n                <div class="group-row" style="padding-top: 15px;">\n                    <div class="vector-style-col-1">\n                        <label tabindex="0" class="m-vectos-style-title" for="fontFamily">{{translations.opts_point}}: </label>\n                    </div>\n                </div>\n                <div class="group-row">\n                    <div class="vector-style-col-0">\n                        <label tabindex="0" for="radiusSelector-point">{{translations.radius}}: </label>\n                        <input tabindex="0" id="radiusSelector-point" type="number" value="5" min="1" max="60">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <button tabindex="0" id="set-style-btn">{{translations.apply_style}}</button>\n</div>'},7443:t=>{t.exports='<div aria-label="Plugin Vectors Management" role="menuitem" id="div-contenedor-vectorsmanagement" class="m-control m-container m-vectorsmanagement">\n    \x3c!-- T√≠tulo del plugin --\x3e\n   <header role="heading" tabindex="0" id="m-vectorsmanagement-titulo" class="m-vectorsmanagement-titulo">{{translations.headertitle}}</header>\n   <section tabindex="0" class="m-vectorsmanagement-selection-layer">\n    \x3c!-- Selecci√≥n de capa --\x3e\n    <select tabindex="0" role="select" id="m-selectionlayer" class="m-vectorsmanagement-selectValues" title="{{translations.selecctionlayer}}">\n        <option value="" selected disabled>{{translations.selectLayerDefault}}...</option>\n        {{#each layer}}\n            <option value="{{value}}">{{text}}</option>\n        {{/each}}\n    </select>\n    {{#if addlayer}}\n    <button tabindex="0" id="layerdrawing" title="{{translations.creationLayer}}" class="vectorsmanagement-icon-layers"></button>\n    {{/if}}\n    {{#if help}}\n    <button tabindex="0" id="m-vectorsmanagement-help" title="{{translations.help}}" class="vectorsmanagement-icon-ayuda"></button>\n    {{/if}}\n    </section>\n   \x3c!-- Contenedor de controles --\x3e\n   <section id="m-vectorsmanagement-previews" class="m-vectorsmanagement-previews closed">\n       {{#if selection}}\n       <button tabindex="0" id="m-vectorsmanagement-selection" title="{{translations.selection}}" class="vectorsmanagement-icon-seleccionar"></button>\n       {{/if}}\n       <div class="m-vectorsmanagement-toolsContent">\n            {{#if creation}}\n            <button tabindex="0" id="m-vectorsmanagement-creation" title="{{translations.creation}}" class="vectorsmanagement-icon-mas"></button>\n            {{/if}}\n            {{#if edition}}\n            <button tabindex="0" id="m-vectorsmanagement-edition" title="{{translations.edition}}" class="vectorsmanagement-icon-editar"></button>\n            {{/if}}\n            {{#if style}}\n            <button tabindex="0" id="m-vectorsmanagement-style" title="{{translations.style}}" class="vectorsmanagement-icon-estilo"></button>\n            {{/if}}\n            {{#if analysis}}\n            <button tabindex="0" id="m-vectorsmanagement-analysis" title="{{translations.analysis}}" class="vectorsmanagement-icon-analisis"></button>\n            {{/if}}\n            {{#if download}}\n            <button tabindex="0" id="m-vectorsmanagement-download" title="{{translations.download}}" class="vectorsmanagement-icon-descargar"></button>\n            {{/if}}\n       </div>\n   </section>\n\n    \x3c!-- Contenedor de controles --\x3e\n   <section id="m-vectorsmanagement-controls" class="m-vectorsmanagement-controls"></section>\n</div>'},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},2584:(t,e,n)=>{"use strict";var r=n(6410)(),i=n(1924)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},a=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},5320:t=>{"use strict";var e,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,e)}catch(t){t!==n&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(t){try{var e=r.call(t);return o.test(e)}catch(t){return!1}},s=function(t){try{return!a(t)&&(r.call(t),!0)}catch(t){return!1}},u=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var h=document.all;u.call(h)===u.call(document.all)&&(f=function(t){if((c||!t)&&(void 0===t||"object"==typeof t))try{var e=u.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=i?function(t){if(f(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{i(t,null,e)}catch(t){if(t!==n)return!1}return!a(t)&&s(t)}:function(t){if(f(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return s(t);if(a(t))return!1;var e=u.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&s(t)}},8662:(t,e,n)=>{"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(6410)(),u=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(a.test(o.call(t)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(t);if(!u)return!1;if(void 0===r){var e=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(t){}}();r=!!e&&u(e)}return u(t)===r}},8611:t=>{"use strict";t.exports=function(t){return t!=t}},360:(t,e,n)=>{"use strict";var r=n(5559),i=n(4289),o=n(8611),a=n(9415),s=n(3194),u=r(a(),Number);i(u,{getPolyfill:a,implementation:o,shim:s}),t.exports=u},9415:(t,e,n)=>{"use strict";var r=n(8611);t.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},3194:(t,e,n)=>{"use strict";var r=n(4289),i=n(9415);t.exports=function(){var t=i();return r(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}},5692:(t,e,n)=>{"use strict";var r=n(6430);t.exports=function(t){return!!r(t)}},8458:(t,e)=>{"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t,e){for(var r,i,o,a,s,u,l,c="",f=0;f<t.length;)a=(r=t.charCodeAt(f++))>>2,s=(3&r)<<4|(i=t.charCodeAt(f++))>>4,u=(15&i)<<2|(o=t.charCodeAt(f++))>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),c=c+n.charAt(a)+n.charAt(s)+n.charAt(u)+n.charAt(l);return c},e.decode=function(t,e){var r,i,o,a,s,u,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=n.indexOf(t.charAt(c++))<<2|(a=n.indexOf(t.charAt(c++)))>>4,i=(15&a)<<4|(s=n.indexOf(t.charAt(c++)))>>2,o=(3&s)<<6|(u=n.indexOf(t.charAt(c++))),l+=String.fromCharCode(r),64!=s&&(l+=String.fromCharCode(i)),64!=u&&(l+=String.fromCharCode(o));return l}},7326:t=>{"use strict";function e(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}e.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=e},1678:(t,e,n)=>{"use strict";e.STORE={magic:"\0\0",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},e.DEFLATE=n(1033)},6988:(t,e,n)=>{"use strict";var r=n(8910),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(t,e){if(void 0===t||!t.length)return 0;var n="string"!==r.getTypeOf(t);void 0===e&&(e=0);var o=0;e=~e;for(var a=0,s=t.length;a<s;a++)o=n?t[a]:t.charCodeAt(a),e=e>>>8^i[255&(e^o)];return~e}},2640:(t,e,n)=>{"use strict";var r=n(8910);function i(t){this.data=null,this.length=0,this.index=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},t.exports=i},6032:(t,e)=>{"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!1,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},172:(t,e,n)=>{"use strict";var r=n(8910);e.string2binary=function(t){return r.string2binary(t)},e.string2Uint8Array=function(t){return r.transformTo("uint8array",t)},e.uint8Array2String=function(t){return r.transformTo("string",t)},e.string2Blob=function(t){var e=r.transformTo("arraybuffer",t);return r.arrayBuffer2Blob(e)},e.arrayBuffer2Blob=function(t){return r.arrayBuffer2Blob(t)},e.transformTo=function(t,e){return r.transformTo(t,e)},e.getTypeOf=function(t){return r.getTypeOf(t)},e.checkSupport=function(t){return r.checkSupport(t)},e.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,e.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,e.pretty=function(t){return r.pretty(t)},e.findCompression=function(t){return r.findCompression(t)},e.isRegExp=function(t){return r.isRegExp(t)}},1033:(t,e,n)=>{"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n(337);e.uncompressInputType=r?"uint8array":"array",e.compressInputType=r?"uint8array":"array",e.magic="\b\0",e.compress=function(t,e){return i.deflateRaw(t,{level:e.level||-1})},e.uncompress=function(t){return i.inflateRaw(t)}},6085:(t,e,n)=>{"use strict";var r=n(8458);function i(t,e){if(!(this instanceof i))return new i(t,e);this.files={},this.comment=null,this.root="",t&&this.load(t,e),this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}i.prototype=n(7132),i.prototype.load=n(1062),i.support=n(3790),i.defaults=n(6032),i.utils=n(172),i.base64={encode:function(t){return r.encode(t)},decode:function(t){return r.decode(t)}},i.compressions=n(1678),t.exports=i},1062:(t,e,n)=>{"use strict";var r=n(8458),i=n(6624);t.exports=function(t,e){var n,o,a,s;for((e=e||{}).base64&&(t=r.decode(t)),n=(o=new i(t,e)).files,a=0;a<n.length;a++)s=n[a],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},9939:t=>{"use strict";t.exports=function(t,e){return new Buffer(t,e)},t.exports.test=function(t){return Buffer.isBuffer(t)}},696:(t,e,n)=>{"use strict";var r=n(2123);function i(t){this.data=t,this.length=this.data.length,this.index=0}i.prototype=new r,i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},t.exports=i},7132:(t,e,n)=>{"use strict";var r=n(3790),i=n(8910),o=n(6988),a=n(1141),s=n(6032),u=n(8458),l=n(1678),c=n(7326),f=n(9939),h=n(3600),p=n(6175),d=n(6378),y=function(t){if(t._data instanceof c&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},g=function(t){var e=y(t);return"string"===i.getTypeOf(e)?!t.options.binary&&r.nodebuffer?f(e,"utf-8"):t.asBinary():e},v=function(t){var e=y(this);return null==e?"":(this.options.base64&&(e=u.decode(e)),e=t&&this.options.binary?I.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",I.utf8encode(e))),e)},m=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};m.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var t=g(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=g(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var _=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},b=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},w=function(t,e,n){var r,o=i.getTypeOf(e);if("string"==typeof(n=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),(t=b(t,s)).date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t}(n)).unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(t=S(t)),n.createFolders&&(r=x(t))&&E.call(this,r,!0),n.dir||null==e)n.base64=!1,n.binary=!1,e=null,o=null;else if("string"===o)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(e=i.string2binary(e));else{if(n.base64=!1,n.binary=!0,!(o||e instanceof c))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=i.transformTo("uint8array",e))}var a=new m(t,e,n);return this.files[t]=a,a},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},S=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},E=function(t,e){return e=void 0!==e&&e,t=S(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},C=function(t,e,n){var r,a=new c;return t._data instanceof c?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=l.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r),n))):((r=g(t))&&0!==r.length&&!t.dir||(e=l.STORE,r=""),a.uncompressedSize=r.length,a.crc32=o(r),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r),n)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},O=function(t,e,n,r,s){n.compressedContent;var u,l,c,f,p=i.transformTo("string",h.utf8encode(e.name)),d=e.comment||"",y=i.transformTo("string",h.utf8encode(d)),g=p.length!==e.name.length,v=y.length!==d.length,m=e.options,b="",w="",x="";c=e._initialMetadata.dir!==e.dir?e.dir:m.dir,f=e._initialMetadata.date!==e.date?e.date:m.date;var S,E,C,O=0,I=0;c&&(O|=16),"UNIX"===s?(I=798,O|=(S=e.unixPermissions,E=c,C=S,S||(C=E?16893:33204),(65535&C)<<16)):(I=20,O|=63&(e.dosPermissions||0)),u=f.getHours(),u<<=6,u|=f.getMinutes(),u<<=5,u|=f.getSeconds()/2,l=f.getFullYear()-1980,l<<=4,l|=f.getMonth()+1,l<<=5,l|=f.getDate(),g&&(w=_(1,1)+_(o(p),4)+p,b+="up"+_(w.length,2)+w),v&&(x=_(1,1)+_(this.crc32(y),4)+y,b+="uc"+_(x.length,2)+x);var P="";return P+="\n\0",P+=g||v?"\0\b":"\0\0",P+=n.compressionMethod,P+=_(u,2),P+=_(l,2),P+=_(n.crc32,4),P+=_(n.compressedSize,4),P+=_(n.uncompressedSize,4),P+=_(p.length,2),P+=_(b.length,2),{fileRecord:a.LOCAL_FILE_HEADER+P+p+b,dirRecord:a.CENTRAL_FILE_HEADER+_(I,2)+P+_(y.length,2)+"\0\0\0\0"+_(O,4)+_(r,4)+p+b+y,compressedObject:n}},I={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,r,i,o=[];for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],i=new m(r.name,r._data,b(r.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,i)&&o.push(i));return o},file:function(t,e,n){if(1===arguments.length){if(i.isRegExp(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}return this.filter((function(e,n){return!n.dir&&e===t}))[0]||null}return t=this.root+t,w.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=E.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){t=b(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),i.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,n,r=[],o=0,s=0,c=i.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var f in this.files)if(this.files.hasOwnProperty(f)){var h=this.files[f],y=h.options.compression||t.compression.toUpperCase(),g=l[y];if(!g)throw new Error(y+" is not a valid compression method !");var v=h.options.compressionOptions||t.compressionOptions||{},m=C.call(this,h,g,v),w=O.call(this,f,h,m,o,t.platform);o+=w.fileRecord.length+m.compressedSize,s+=w.dirRecord.length,r.push(w)}var x;x=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+_(r.length,2)+_(r.length,2)+_(s,4)+_(o,4)+_(c.length,2)+c;var S=t.type.toLowerCase();for(e="uint8array"===S||"arraybuffer"===S||"blob"===S||"nodebuffer"===S?new d(o+s+x.length):new p(o+s+x.length),n=0;n<r.length;n++)e.append(r[n].fileRecord),e.append(r[n].compressedObject.compressedContent);for(n=0;n<r.length;n++)e.append(r[n].dirRecord);e.append(x);var E=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),E);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",E),t.mimeType);case"base64":return t.base64?u.encode(E):E;default:return E}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return i.transformTo("string",h.utf8encode(t))},utf8decode:function(t){return h.utf8decode(t)}};t.exports=I},1141:(t,e)=>{"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\b"},9001:(t,e,n)=>{"use strict";var r=n(2640),i=n(8910);function o(t,e){this.data=t,e||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}o.prototype=new r,o.prototype.byteAt=function(t){return this.data.charCodeAt(t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},t.exports=o},6175:(t,e,n)=>{"use strict";var r=n(8910),i=function(){this.data=[]};i.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},t.exports=i},3790:(t,e)=>{"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer="undefined"!=typeof Buffer,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);r.append(n),e.blob=0===r.getBlob("application/zip").size}catch(t){e.blob=!1}}}},2123:(t,e,n)=>{"use strict";var r=n(2640);function i(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}i.prototype=new r,i.prototype.byteAt=function(t){return this.data[t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o;return-1},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},t.exports=i},6378:(t,e,n)=>{"use strict";var r=n(8910),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},t.exports=i},3600:(t,e,n)=>{"use strict";for(var r=n(8910),i=n(3790),o=n(9939),a=new Array(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var u=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e},l=function(t){var e,n,i,o,s=t.length,u=new Array(2*s);for(n=0,e=0;e<s;)if((i=t[e++])<128)u[n++]=i;else if((o=a[i])>4)u[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<s;)i=i<<6|63&t[e++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)};e.utf8encode=function(t){return i.nodebuffer?o(t,"utf-8"):function(t){var e,n,r,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e}(t)},e.utf8decode=function(t){if(i.nodebuffer)return r.transformTo("nodebuffer",t).toString("utf-8");for(var e=[],n=0,o=(t=r.transformTo(i.uint8array?"uint8array":"array",t)).length;n<o;){var a=u(t,Math.min(n+65536,o));i.uint8array?e.push(l(t.subarray(n,a))):e.push(l(t.slice(n,a))),n=a}return e.join("")}},8910:(t,e,n)=>{"use strict";var r=n(3790),i=n(1678),o=n(9939);function a(t){return t}function s(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function u(t){var n=65536,r=[],i=t.length,a=e.getTypeOf(t),s=0,u=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,o(0))}}catch(t){u=!1}if(!u){for(var l="",c=0;c<t.length;c++)l+=String.fromCharCode(t[c]);return l}for(;s<i&&n>1;)try{"array"===a||"nodebuffer"===a?r.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+n,i)))):r.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+n,i)))),s+=n}catch(t){n=Math.floor(n/2)}return r.join("")}function l(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.string2binary=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},e.arrayBuffer2Blob=function(t,n){e.checkSupport("blob"),n=n||"application/zip";try{return new Blob([t],{type:n})}catch(e){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},e.applyFromCharCode=u;var c={};c.string={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:function(t){return s(t,o(t.length))}},c.array={string:u,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(t)}},c.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return l(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(new Uint8Array(t))}},c.uint8array={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o(t)}},c.nodebuffer={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:a},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return c[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&o.test(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.findCompression=function(t){for(var e in i)if(i.hasOwnProperty(e)&&i[e].magic===t)return i[e];return null},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},6624:(t,e,n)=>{"use strict";var r=n(9001),i=n(696),o=n(2123),a=n(8910),s=n(1141),u=n(9392),l=n(3790),c=n(7132);function f(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}f.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(e)+", expected "+a.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)(t=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(s.LOCAL_FILE_HEADER),e=!1}catch(t){}throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=a.getTypeOf(t);"string"!==e||l.uint8array?this.reader="nodebuffer"===e?new i(t):new o(a.transformTo("uint8array",t)):this.reader=new r(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=f},9392:(t,e,n)=>{"use strict";var r=n(9001),i=n(8910),o=n(7326),a=n(7132);function s(t,e){this.options=t,this.loadOptions=e}s.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},prepareCompressedContent:function(t,e,n){return function(){var r=t.index;t.setIndex(e);var i=t.readData(n);return t.setIndex(r),i}},prepareContent:function(t,e,n,r,o){return function(){var t=i.transformTo(r.uncompressInputType,this.getCompressedContent()),e=r.uncompress(t);if(e.length!==o)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=i.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new o,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),n=t.readInt(2),r=t.readString(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new r(t.value);return 1!==e.readInt(1)||a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new r(t.value);return 1!==e.readInt(1)||a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},t.exports=s},337:(t,e,n)=>{"use strict";var r={};(0,n(3231).assign)(r,n(7202),n(125),n(2203)),t.exports=r},7202:(t,e,n)=>{"use strict";var r=n(6431),i=n(3231),o=n(3611),a=n(1750),s=n(8495),u=Object.prototype.toString,l=0,c=-1,f=0,h=8;function p(t){if(!(this instanceof p))return new p(t);this.options=i.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==l)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var d;if(d="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,d))!==l)throw new Error(a[n]);this._dict_set=!0}}function d(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}p.prototype.push=function(t,e){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&n!==l)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==a||(this.onEnd(l),s.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=p,e.deflate=d,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},125:(t,e,n)=>{"use strict";var r=n(1706),i=n(3231),o=n(3611),a=n(2203),s=n(1750),u=n(8495),l=n(9187),c=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function h(t,e){var n=new f(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}f.prototype.push=function(t,e){var n,s,u,l,f,h,p=this.strm,d=this.options.chunkSize,y=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(d),p.next_out=0,p.avail_out=d),(n=r.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&y&&(h="string"==typeof y?o.string2buf(y):"[object ArrayBuffer]"===c.call(y)?new Uint8Array(y):y,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(p.output,p.next_out),l=p.next_out-u,f=o.buf2string(p.output,u),p.next_out=l,p.avail_out=d-l,l&&i.arraySet(p.output,p.output,u,l,0),this.onData(f)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),p.avail_out=0,!0)},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=f,e.inflate=h,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.ungzip=h},3231:(t,e)=>{"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},i={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(n)},3611:(t,e,n)=>{"use strict";var r=n(3231),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,o,s=e||t.length,l=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)l[r++]=i;else if((o=a[i])>4)l[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&t[n++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return u(l,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},6578:t=>{"use strict";t.exports=function(t,e,n,r){for(var i=65535&t,o=t>>>16&65535,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16}},2203:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},9274:t=>{"use strict";var e=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,n,r,i){var o=e,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^n[s])];return~t}},6431:(t,e,n)=>{"use strict";var r,i=n(3231),o=n(4286),a=n(6578),s=n(9274),u=n(1750),l=0,c=4,f=0,h=-2,p=-1,d=4,y=2,g=8,v=9,m=286,_=30,b=19,w=2*m+1,x=15,S=3,E=258,C=E+S+1,O=42,I=103,P=113,k=666,M=1,T=2,L=3,N=4;function A(t,e){return t.msg=u[e],e}function R(t){return(t<<1)-(t>4?9:0)}function j(t){for(var e=t.length;--e>=0;)t[e]=0}function D(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function F(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,D(t.strm)}function B(t,e){t.pending_buf[t.pending++]=e}function G(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function z(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-C?t.strstart-(t.w_size-C):0,l=t.window,c=t.w_mask,f=t.prev,h=t.strstart+E,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(n=e)+a]===d&&l[n+a-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=E-(h-o),o=h-E,r>a){if(t.match_start=e,a=r,r>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=f[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function q(t){var e,n,r,o,u,l,c,f,h,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-C)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=d?r-d:0}while(--n);e=n=d;do{r=t.prev[--e],t.prev[e]=r>=d?r-d:0}while(--n);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,f=t.strstart+t.lookahead,h=o,p=void 0,(p=l.avail_in)>h&&(p=h),n=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,f),1===l.state.wrap?l.adler=a(l.adler,c,p,f):2===l.state.wrap&&(l.adler=s(l.adler,c,p,f)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=S)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+S-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<C&&0!==t.strm.avail_in)}function U(t,e){for(var n,r;;){if(t.lookahead<C){if(q(t),t.lookahead<C&&e===l)return M;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-C&&(t.match_length=z(t,n)),t.match_length>=S)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(F(t,!1),0===t.strm.avail_out))return M}return t.insert=t.strstart<S-1?t.strstart:S-1,e===c?(F(t,!0),0===t.strm.avail_out?L:N):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?M:T}function V(t,e){for(var n,r,i;;){if(t.lookahead<C){if(q(t),t.lookahead<C&&e===l)return M;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-C&&(t.match_length=z(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===S&&t.strstart-t.match_start>4096)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-S,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=S-1,t.strstart++,r&&(F(t,!1),0===t.strm.avail_out))return M}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&F(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return M}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,e===c?(F(t,!0),0===t.strm.avail_out?L:N):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?M:T}function Y(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*w),this.dyn_dtree=new i.Buf16(2*(2*_+1)),this.bl_tree=new i.Buf16(2*(2*b+1)),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(x+1),this.heap=new i.Buf16(2*m+1),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*m+1),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=y,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?O:P,t.adler=2===e.wrap?0:1,e.last_flush=l,o._tr_init(e),f):A(t,h)}function H(t){var e,n=W(t);return n===f&&((e=t.state).window_size=2*e.w_size,j(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=S-1,e.match_available=0,e.ins_h=0),n}function Z(t,e,n,r,o,a){if(!t)return h;var s=1;if(e===p&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>v||n!==g||r<8||r>15||e<0||e>9||a<0||a>d)return A(t,h);8===r&&(r=9);var u=new X;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+S-1)/S),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=n,H(t)}r=[new Y(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(q(t),0===t.lookahead&&e===l)return M;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,F(t,!1),0===t.strm.avail_out))return M;if(t.strstart-t.block_start>=t.w_size-C&&(F(t,!1),0===t.strm.avail_out))return M}return t.insert=0,e===c?(F(t,!0),0===t.strm.avail_out?L:N):(t.strstart>t.block_start&&(F(t,!1),t.strm.avail_out),M)})),new Y(4,4,8,4,U),new Y(4,5,16,8,U),new Y(4,6,32,32,U),new Y(4,4,16,16,V),new Y(8,16,32,32,V),new Y(8,16,128,128,V),new Y(8,32,128,256,V),new Y(32,128,258,1024,V),new Y(32,258,258,4096,V)],e.deflateInit=function(t,e){return Z(t,e,g,15,8,0)},e.deflateInit2=Z,e.deflateReset=H,e.deflateResetKeep=W,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?h:(t.state.gzhead=e,f):h},e.deflate=function(t,e){var n,i,a,u;if(!t||!t.state||e>5||e<0)return t?A(t,h):h;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===k&&e!==c)return A(t,0===t.avail_out?-5:h);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===O)if(2===i.wrap)t.adler=0,B(i,31),B(i,139),B(i,8),i.gzhead?(B(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),B(i,255&i.gzhead.time),B(i,i.gzhead.time>>8&255),B(i,i.gzhead.time>>16&255),B(i,i.gzhead.time>>24&255),B(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),B(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(B(i,255&i.gzhead.extra.length),B(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(B(i,0),B(i,0),B(i,0),B(i,0),B(i,0),B(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),B(i,3),i.status=P);else{var p=g+(i.w_bits-8<<4)<<8;p|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=P,G(i,p),0!==i.strstart&&(G(i,t.adler>>>16),G(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),D(t),a=i.pending,i.pending!==i.pending_buf_size));)B(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),D(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,B(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),D(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,B(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=I)}else i.status=I;if(i.status===I&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&D(t),i.pending+2<=i.pending_buf_size&&(B(i,255&t.adler),B(i,t.adler>>8&255),t.adler=0,i.status=P)):i.status=P),0!==i.pending){if(D(t),0===t.avail_out)return i.last_flush=-1,f}else if(0===t.avail_in&&R(e)<=R(n)&&e!==c)return A(t,-5);if(i.status===k&&0!==t.avail_in)return A(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==l&&i.status!==k){var d=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(q(t),0===t.lookahead)){if(e===l)return M;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(F(t,!1),0===t.strm.avail_out))return M}return t.insert=0,e===c?(F(t,!0),0===t.strm.avail_out?L:N):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?M:T}(i,e):3===i.strategy?function(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=E){if(q(t),t.lookahead<=E&&e===l)return M;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=S&&t.strstart>0&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=t.strstart+E;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=E-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=S?(n=o._tr_tally(t,1,t.match_length-S),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(F(t,!1),0===t.strm.avail_out))return M}return t.insert=0,e===c?(F(t,!0),0===t.strm.avail_out?L:N):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?M:T}(i,e):r[i.level].func(i,e);if(d!==L&&d!==N||(i.status=k),d===M||d===L)return 0===t.avail_out&&(i.last_flush=-1),f;if(d===T&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(j(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),D(t),0===t.avail_out))return i.last_flush=-1,f}return e!==c?f:i.wrap<=0?1:(2===i.wrap?(B(i,255&t.adler),B(i,t.adler>>8&255),B(i,t.adler>>16&255),B(i,t.adler>>24&255),B(i,255&t.total_in),B(i,t.total_in>>8&255),B(i,t.total_in>>16&255),B(i,t.total_in>>24&255)):(G(i,t.adler>>>16),G(i,65535&t.adler)),D(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?f:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==O&&69!==e&&73!==e&&91!==e&&e!==I&&e!==P&&e!==k?A(t,h):(t.state=null,e===P?A(t,-3):f):h},e.deflateSetDictionary=function(t,e){var n,r,o,s,u,l,c,p,d=e.length;if(!t||!t.state)return h;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==O||n.lookahead)return h;for(1===s&&(t.adler=a(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(j(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,e,d-n.w_size,n.w_size,0),e=p,d=n.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=d,t.next_in=0,t.input=e,q(n);n.lookahead>=S;){r=n.strstart,o=n.lookahead-(S-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+S-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=S-1,q(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=S-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,n.wrap=s,f},e.deflateInfo="pako deflate (from Nodeca project)"},9187:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4508:t=>{"use strict";t.exports=function(t,e){var n,r,i,o,a,s,u,l,c,f,h,p,d,y,g,v,m,_,b,w,x,S,E,C,O;n=t.state,r=t.next_in,C=t.input,i=r+(t.avail_in-5),o=t.next_out,O=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,h=n.window,p=n.hold,d=n.bits,y=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;t:do{d<15&&(p+=C[r++]<<d,d+=8,p+=C[r++]<<d,d+=8),_=y[p&v];e:for(;;){if(p>>>=b=_>>>24,d-=b,0===(b=_>>>16&255))O[o++]=65535&_;else{if(!(16&b)){if(64&b){if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=y[(65535&_)+(p&(1<<b)-1)];continue e}for(w=65535&_,(b&=15)&&(d<b&&(p+=C[r++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=C[r++]<<d,d+=8,p+=C[r++]<<d,d+=8),_=g[p&m];;){if(p>>>=b=_>>>24,d-=b,16&(b=_>>>16&255)){if(x=65535&_,d<(b&=15)&&(p+=C[r++]<<d,(d+=8)<b&&(p+=C[r++]<<d,d+=8)),(x+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,d-=b,x>(b=o-a)){if((b=x-b)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,E=h,0===f){if(S+=l-b,b<w){w-=b;do{O[o++]=h[S++]}while(--b);S=o-x,E=O}}else if(f<b){if(S+=l+f-b,(b-=f)<w){w-=b;do{O[o++]=h[S++]}while(--b);if(S=0,f<w){w-=b=f;do{O[o++]=h[S++]}while(--b);S=o-x,E=O}}}else if(S+=f-b,b<w){w-=b;do{O[o++]=h[S++]}while(--b);S=o-x,E=O}for(;w>2;)O[o++]=E[S++],O[o++]=E[S++],O[o++]=E[S++],w-=3;w&&(O[o++]=E[S++],w>1&&(O[o++]=E[S++]))}else{S=o-x;do{O[o++]=O[S++],O[o++]=O[S++],O[o++]=O[S++],w-=3}while(w>2);w&&(O[o++]=O[S++],w>1&&(O[o++]=O[S++]))}break}if(64&b){t.msg="invalid distance code",n.mode=30;break t}_=g[(65535&_)+(p&(1<<b)-1)]}}break}}while(r<i&&o<s);r-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},1706:(t,e,n)=>{"use strict";var r=n(3231),i=n(6578),o=n(9274),a=n(4508),s=n(8464),u=1,l=2,c=0,f=-2,h=1,p=12,d=30,y=852,g=592;function v(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=h,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(y),e.distcode=e.distdyn=new r.Buf32(g),e.sane=1,e.back=-1,c):f}function b(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,_(t)):f}function w(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?f:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,b(t))):f}function x(t,e){var n,r;return t?(r=new m,t.state=r,r.window=null,(n=w(t,e))!==c&&(t.state=null),n):f}var S,E,C=!0;function O(t){if(C){var e;for(S=new r.Buf32(512),E=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(u,t.lens,0,288,S,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(l,t.lens,0,32,E,0,t.work,{bits:5}),C=!1}t.lencode=S,t.lenbits=9,t.distcode=E,t.distbits=5}function I(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=b,e.inflateReset2=w,e.inflateResetKeep=_,e.inflateInit=function(t){return x(t,15)},e.inflateInit2=x,e.inflate=function(t,e){var n,y,g,m,_,b,w,x,S,E,C,P,k,M,T,L,N,A,R,j,D,F,B,G,z=0,q=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return f;(n=t.state).mode===p&&(n.mode=13),_=t.next_out,g=t.output,w=t.avail_out,m=t.next_in,y=t.input,b=t.avail_in,x=n.hold,S=n.bits,E=b,C=w,F=c;t:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;S<16;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(2&n.wrap&&35615===x){n.check=0,q[0]=255&x,q[1]=x>>>8&255,n.check=o(n.check,q,2,0),x=0,S=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&x)<<8)+(x>>8))%31){t.msg="incorrect header check",n.mode=d;break}if(8!=(15&x)){t.msg="unknown compression method",n.mode=d;break}if(S-=4,D=8+(15&(x>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){t.msg="invalid window size",n.mode=d;break}n.dmax=1<<D,t.adler=n.check=1,n.mode=512&x?10:p,x=0,S=0;break;case 2:for(;S<16;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(n.flags=x,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=d;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=d;break}n.head&&(n.head.text=x>>8&1),512&n.flags&&(q[0]=255&x,q[1]=x>>>8&255,n.check=o(n.check,q,2,0)),x=0,S=0,n.mode=3;case 3:for(;S<32;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}n.head&&(n.head.time=x),512&n.flags&&(q[0]=255&x,q[1]=x>>>8&255,q[2]=x>>>16&255,q[3]=x>>>24&255,n.check=o(n.check,q,4,0)),x=0,S=0,n.mode=4;case 4:for(;S<16;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}n.head&&(n.head.xflags=255&x,n.head.os=x>>8),512&n.flags&&(q[0]=255&x,q[1]=x>>>8&255,n.check=o(n.check,q,2,0)),x=0,S=0,n.mode=5;case 5:if(1024&n.flags){for(;S<16;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}n.length=x,n.head&&(n.head.extra_len=x),512&n.flags&&(q[0]=255&x,q[1]=x>>>8&255,n.check=o(n.check,q,2,0)),x=0,S=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((P=n.length)>b&&(P=b),P&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,y,m,P,D)),512&n.flags&&(n.check=o(n.check,y,P,m)),b-=P,m+=P,n.length-=P),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===b)break t;P=0;do{D=y[m+P++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&P<b);if(512&n.flags&&(n.check=o(n.check,y,P,m)),b-=P,m+=P,D)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===b)break t;P=0;do{D=y[m+P++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&P<b);if(512&n.flags&&(n.check=o(n.check,y,P,m)),b-=P,m+=P,D)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;S<16;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(x!==(65535&n.check)){t.msg="header crc mismatch",n.mode=d;break}x=0,S=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=p;break;case 10:for(;S<32;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}t.adler=n.check=v(x),x=0,S=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=_,t.avail_out=w,t.next_in=m,t.avail_in=b,n.hold=x,n.bits=S,2;t.adler=n.check=1,n.mode=p;case p:if(5===e||6===e)break t;case 13:if(n.last){x>>>=7&S,S-=7&S,n.mode=27;break}for(;S<3;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}switch(n.last=1&x,S-=1,3&(x>>>=1)){case 0:n.mode=14;break;case 1:if(O(n),n.mode=20,6===e){x>>>=2,S-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=d}x>>>=2,S-=2;break;case 14:for(x>>>=7&S,S-=7&S;S<32;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if((65535&x)!=(x>>>16^65535)){t.msg="invalid stored block lengths",n.mode=d;break}if(n.length=65535&x,x=0,S=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(P=n.length){if(P>b&&(P=b),P>w&&(P=w),0===P)break t;r.arraySet(g,y,m,P,_),b-=P,m+=P,w-=P,_+=P,n.length-=P;break}n.mode=p;break;case 17:for(;S<14;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(n.nlen=257+(31&x),x>>>=5,S-=5,n.ndist=1+(31&x),x>>>=5,S-=5,n.ncode=4+(15&x),x>>>=4,S-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=d;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;S<3;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}n.lens[U[n.have++]]=7&x,x>>>=3,S-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},F=s(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,F){t.msg="invalid code lengths set",n.mode=d;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;L=(z=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,N=65535&z,!((T=z>>>24)<=S);){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(N<16)x>>>=T,S-=T,n.lens[n.have++]=N;else{if(16===N){for(G=T+2;S<G;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(x>>>=T,S-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=d;break}D=n.lens[n.have-1],P=3+(3&x),x>>>=2,S-=2}else if(17===N){for(G=T+3;S<G;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}S-=T,D=0,P=3+(7&(x>>>=T)),x>>>=3,S-=3}else{for(G=T+7;S<G;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}S-=T,D=0,P=11+(127&(x>>>=T)),x>>>=7,S-=7}if(n.have+P>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=d;break}for(;P--;)n.lens[n.have++]=D}}if(n.mode===d)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=d;break}if(n.lenbits=9,B={bits:n.lenbits},F=s(u,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,F){t.msg="invalid literal/lengths set",n.mode=d;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},F=s(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,F){t.msg="invalid distances set",n.mode=d;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(b>=6&&w>=258){t.next_out=_,t.avail_out=w,t.next_in=m,t.avail_in=b,n.hold=x,n.bits=S,a(t,C),_=t.next_out,g=t.output,w=t.avail_out,m=t.next_in,y=t.input,b=t.avail_in,x=n.hold,S=n.bits,n.mode===p&&(n.back=-1);break}for(n.back=0;L=(z=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,N=65535&z,!((T=z>>>24)<=S);){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(L&&!(240&L)){for(A=T,R=L,j=N;L=(z=n.lencode[j+((x&(1<<A+R)-1)>>A)])>>>16&255,N=65535&z,!(A+(T=z>>>24)<=S);){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}x>>>=A,S-=A,n.back+=A}if(x>>>=T,S-=T,n.back+=T,n.length=N,0===L){n.mode=26;break}if(32&L){n.back=-1,n.mode=p;break}if(64&L){t.msg="invalid literal/length code",n.mode=d;break}n.extra=15&L,n.mode=22;case 22:if(n.extra){for(G=n.extra;S<G;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}n.length+=x&(1<<n.extra)-1,x>>>=n.extra,S-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;L=(z=n.distcode[x&(1<<n.distbits)-1])>>>16&255,N=65535&z,!((T=z>>>24)<=S);){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(!(240&L)){for(A=T,R=L,j=N;L=(z=n.distcode[j+((x&(1<<A+R)-1)>>A)])>>>16&255,N=65535&z,!(A+(T=z>>>24)<=S);){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}x>>>=A,S-=A,n.back+=A}if(x>>>=T,S-=T,n.back+=T,64&L){t.msg="invalid distance code",n.mode=d;break}n.offset=N,n.extra=15&L,n.mode=24;case 24:if(n.extra){for(G=n.extra;S<G;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}n.offset+=x&(1<<n.extra)-1,x>>>=n.extra,S-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=d;break}n.mode=25;case 25:if(0===w)break t;if(P=C-w,n.offset>P){if((P=n.offset-P)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=d;break}P>n.wnext?(P-=n.wnext,k=n.wsize-P):k=n.wnext-P,P>n.length&&(P=n.length),M=n.window}else M=g,k=_-n.offset,P=n.length;P>w&&(P=w),w-=P,n.length-=P;do{g[_++]=M[k++]}while(--P);0===n.length&&(n.mode=21);break;case 26:if(0===w)break t;g[_++]=n.length,w--,n.mode=21;break;case 27:if(n.wrap){for(;S<32;){if(0===b)break t;b--,x|=y[m++]<<S,S+=8}if(C-=w,t.total_out+=C,n.total+=C,C&&(t.adler=n.check=n.flags?o(n.check,g,C,_-C):i(n.check,g,C,_-C)),C=w,(n.flags?x:v(x))!==n.check){t.msg="incorrect data check",n.mode=d;break}x=0,S=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;S<32;){if(0===b)break t;b--,x+=y[m++]<<S,S+=8}if(x!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=d;break}x=0,S=0}n.mode=29;case 29:F=1;break t;case d:F=-3;break t;case 31:return-4;default:return f}return t.next_out=_,t.avail_out=w,t.next_in=m,t.avail_in=b,n.hold=x,n.bits=S,(n.wsize||C!==t.avail_out&&n.mode<d&&(n.mode<27||4!==e))&&I(t,t.output,t.next_out,C-t.avail_out)?(n.mode=31,-4):(E-=t.avail_in,C-=t.avail_out,t.total_in+=E,t.total_out+=C,n.total+=C,n.wrap&&C&&(t.adler=n.check=n.flags?o(n.check,g,C,t.next_out-C):i(n.check,g,C,t.next_out-C)),t.data_type=n.bits+(n.last?64:0)+(n.mode===p?128:0)+(20===n.mode||15===n.mode?256:0),(0===E&&0===C||4===e)&&F===c&&(F=-5),F)},e.inflateEnd=function(t){if(!t||!t.state)return f;var e=t.state;return e.window&&(e.window=null),t.state=null,c},e.inflateGetHeader=function(t,e){var n;return t&&t.state&&2&(n=t.state).wrap?(n.head=e,e.done=!1,c):f},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?f:11===n.mode&&i(1,e,r,0)!==n.check?-3:I(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,c):f},e.inflateInfo="pako inflate (from Nodeca project)"},8464:(t,e,n)=>{"use strict";var r=n(3231),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,f,h,p){var d,y,g,v,m,_,b,w,x,S=p.bits,E=0,C=0,O=0,I=0,P=0,k=0,M=0,T=0,L=0,N=0,A=null,R=0,j=new r.Buf16(16),D=new r.Buf16(16),F=null,B=0;for(E=0;E<=i;E++)j[E]=0;for(C=0;C<l;C++)j[e[n+C]]++;for(P=S,I=i;I>=1&&0===j[I];I--);if(P>I&&(P=I),0===I)return c[f++]=20971520,c[f++]=20971520,p.bits=1,0;for(O=1;O<I&&0===j[O];O++);for(P<O&&(P=O),T=1,E=1;E<=i;E++)if(T<<=1,(T-=j[E])<0)return-1;if(T>0&&(0===t||1!==I))return-1;for(D[1]=0,E=1;E<i;E++)D[E+1]=D[E]+j[E];for(C=0;C<l;C++)0!==e[n+C]&&(h[D[e[n+C]]++]=C);if(0===t?(A=F=h,_=19):1===t?(A=o,R-=257,F=a,B-=257,_=256):(A=s,F=u,_=-1),N=0,C=0,E=O,m=f,k=P,M=0,g=-1,v=(L=1<<P)-1,1===t&&L>852||2===t&&L>592)return 1;for(;;){b=E-M,h[C]<_?(w=0,x=h[C]):h[C]>_?(w=F[B+h[C]],x=A[R+h[C]]):(w=96,x=0),d=1<<E-M,O=y=1<<k;do{c[m+(N>>M)+(y-=d)]=b<<24|w<<16|x}while(0!==y);for(d=1<<E-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,C++,0==--j[E]){if(E===I)break;E=e[n+h[C]]}if(E>P&&(N&v)!==g){for(0===M&&(M=P),m+=O,T=1<<(k=E-M);k+M<I&&!((T-=j[k+M])<=0);)k++,T<<=1;if(L+=1<<k,1===t&&L>852||2===t&&L>592)return 1;c[g=N&v]=P<<24|k<<16|m-f}}return 0!==N&&(c[m+N]=E-M<<24|64<<16),p.bits=P,0}},1750:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4286:(t,e,n)=>{"use strict";var r=n(3231),i=0,o=1;function a(t){for(var e=t.length;--e>=0;)t[e]=0}var s=0,u=29,l=256,c=l+1+u,f=30,h=19,p=2*c+1,d=15,y=16,g=7,v=256,m=16,_=17,b=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(c+2));a(C);var O=new Array(2*f);a(O);var I=new Array(512);a(I);var P=new Array(256);a(P);var k=new Array(u);a(k);var M,T,L,N=new Array(f);function A(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function R(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function j(t){return t<256?I[t]:I[256+(t>>>7)]}function D(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,n){t.bi_valid>y-n?(t.bi_buf|=e<<t.bi_valid&65535,D(t,t.bi_buf),t.bi_buf=e>>y-t.bi_valid,t.bi_valid+=n-y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function B(t,e,n){F(t,n[2*e],n[2*e+1])}function G(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function z(t,e,n){var r,i,o=new Array(d+1),a=0;for(r=1;r<=d;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=G(o[s]++,s))}}function q(t){var e;for(e=0;e<c;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<h;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*v]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function U(t){t.bi_valid>8?D(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function V(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function Y(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&V(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!V(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function X(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?B(t,i,e):(B(t,(o=P[i])+l+1,e),0!==(a=w[o])&&F(t,i-=k[o],a),B(t,o=j(--r),n),0!==(a=x[o])&&F(t,r-=N[o],a))}while(s<t.last_lit);B(t,v,e)}function W(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=p,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)Y(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,Y(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,y=e.stat_desc.extra_base,g=e.stat_desc.max_length,v=0;for(o=0;o<=d;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<p;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>g&&(o=g,v++),u[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=y&&(a=h[r-y]),s=u[2*r],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==v){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,v-=2}while(v>0);for(o=g;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),z(o,l,t.bl_count)}function H(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*m]++):s<=10?t.bl_tree[2*_]++:t.bl_tree[2*b]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function Z(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<u&&i===a)){if(s<l)do{B(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(B(t,i,t.bl_tree),s--),B(t,m,t.bl_tree),F(t,s-3,2)):s<=10?(B(t,_,t.bl_tree),F(t,s-3,3)):(B(t,b,t.bl_tree),F(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}a(N);var K=!1;function Q(t,e,n,i){F(t,(s<<1)+(i?1:0),3),function(t,e,n,i){U(t),i&&(D(t,n),D(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){K||(!function(){var t,e,n,r,i,o=new Array(d+1);for(n=0,r=0;r<u-1;r++)for(k[r]=n,t=0;t<1<<w[r];t++)P[n++]=r;for(P[n-1]=r,i=0,r=0;r<16;r++)for(N[r]=i,t=0;t<1<<x[r];t++)I[i++]=r;for(i>>=7;r<f;r++)for(N[r]=i<<7,t=0;t<1<<x[r]-7;t++)I[256+i++]=r;for(e=0;e<=d;e++)o[e]=0;for(t=0;t<=143;)C[2*t+1]=8,t++,o[8]++;for(;t<=255;)C[2*t+1]=9,t++,o[9]++;for(;t<=279;)C[2*t+1]=7,t++,o[7]++;for(;t<=287;)C[2*t+1]=8,t++,o[8]++;for(z(C,c+1,o),t=0;t<f;t++)O[2*t+1]=5,O[2*t]=G(t,5);M=new A(C,w,l+1,c,d),T=new A(O,x,0,f,d),L=new A(new Array(0),S,0,h,g)}(),K=!0),t.l_desc=new R(t.dyn_ltree,M),t.d_desc=new R(t.dyn_dtree,T),t.bl_desc=new R(t.bl_tree,L),t.bi_buf=0,t.bi_valid=0,q(t)},e._tr_stored_block=Q,e._tr_flush_block=function(t,e,n,r){var a,s,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return i;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<l;e++)if(0!==t.dyn_ltree[2*e])return o;return i}(t)),W(t,t.l_desc),W(t,t.d_desc),u=function(t){var e;for(H(t,t.dyn_ltree,t.l_desc.max_code),H(t,t.dyn_dtree,t.d_desc.max_code),W(t,t.bl_desc),e=h-1;e>=3&&0===t.bl_tree[2*E[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),a=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==e?Q(t,e,n,r):4===t.strategy||s===a?(F(t,2+(r?1:0),3),X(t,C,O)):(F(t,4+(r?1:0),3),function(t,e,n,r){var i;for(F(t,e-257,5),F(t,n-1,5),F(t,r-4,4),i=0;i<r;i++)F(t,t.bl_tree[2*E[i]+1],3);Z(t,t.dyn_ltree,e-1),Z(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),X(t,t.dyn_ltree,t.dyn_dtree)),q(t),r&&U(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+l+1)]++,t.dyn_dtree[2*j(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){F(t,2,3),B(t,v,C),function(t){16===t.bi_valid?(D(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},8495:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4807:function(t,e){var n,r,i;r=[],n=function(t,e){var n,r={valueKey:"_",attrKey:"$",attrPrefix:"$",lowerCaseTags:!1,trueIsEmpty:!1,autoDate:!1,ignorePrefixedNodes:!1,parseValues:!1},i=[],o=/^\s*$/,a=/^(?:true|false)$/i;return new function(){function s(t){return r.parseValues?o.test(t)?null:a.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):r.autoDate&&isFinite(Date.parse(t))?new Date(t):t:t}function u(){}function l(t){return null===t?new u:t instanceof Object?t:new t.constructor(t)}function c(t,e,n,o){var a,u,f=4,h=3,p=1,d=i.length,y=t.hasChildNodes(),g=t.nodeType===t.ELEMENT_NODE&&t.hasAttributes(),v=Boolean(2&e),m=0,_="",b=v?{}:!!r.trueIsEmpty||"";if(y)for(var w,x=0;x<t.childNodes.length;x++)(w=t.childNodes.item(x)).nodeType===f?_+=w.nodeValue:w.nodeType===h?_+=w.nodeValue.trim():w.nodeType!==p||r.ignorePrefixedNodes&&w.prefix||i.push(w);var S=i.length,E=s(_);v||!y&&!g||(b=0===e?l(E):{});for(var C=d;C<S;C++)a=i[C].nodeName,r.lowerCaseTags&&(a=a.toLowerCase()),u=c(i[C],e,n,o),b.hasOwnProperty(a)?(b[a].constructor!==Array&&(b[a]=[b[a]]),b[a].push(u)):(b[a]=u,m++);if(g){for(var O,I,P=t.attributes.length,k=o?"":r.attrPrefix,M=o?{}:b,T=0;T<P;m++,T++)I=(O=t.attributes.item(T)).name,r.lowerCaseTags&&(I=I.toLowerCase()),M[k+I]=s(O.value.trim());o&&(n&&Object.freeze(M),b[r.attrKey]=M,m-=P-1)}return 3===e||(2===e||1===e&&m>0)&&_?b[r.valueKey]=E:!v&&0===m&&_&&(b=E),n&&(v||m>0)&&Object.freeze(b),i.length=d,b}function f(t,n,i){var o,a,s;if(i.constructor===String||i.constructor===Number||i.constructor===Boolean){if(n.appendChild(t.createTextNode(i.toString())),i===i.valueOf())return}else i.constructor===Date&&n.appendChild(t.createTextNode(i.toISOString()));for(var u in i)if(void 0!==(o=i[u])&&(null===o&&(o={}),!(isFinite(u)||o instanceof Function)))if(u===r.valueKey)null!==o&&!0!==o&&n.appendChild(t.createTextNode(o.constructor===Date?o.toISOString():String(o)));else if(u===r.attrKey)for(var l in o)n.setAttribute(l,o[l]);else if(u===r.attrPrefix+"xmlns")e&&n.setAttribute(u.slice(1),o);else if(u.charAt(0)===r.attrPrefix)n.setAttribute(u.slice(1),o);else if(o.constructor===Array)for(var c in o)o.hasOwnProperty(c)&&(a=(s=o[c]&&o[c][r.attrPrefix+"xmlns"]||n.namespaceURI)?t.createElementNS(s,u):t.createElement(u),f(t,a,o[c]||{}),n.appendChild(a));else a=(s=(o||{})[r.attrPrefix+"xmlns"]||n.namespaceURI)?t.createElementNS(s,u):t.createElement(u),o instanceof Object?f(t,a,o):null===o||!0===o&&r.trueIsEmpty||a.appendChild(t.createTextNode(o.toString())),n.appendChild(a)}this.config=function(e){for(var i in e)r[i]=e[i];r.parserErrorHandler&&(n=new t.DOMParser({errorHandler:r.parserErrorHandler,locator:{}}))},u.prototype.toString=function(){return"null"},u.prototype.valueOf=function(){return null},this.xmlToJs=this.build=function(t,e,n,r){var i=arguments.length>1&&"number"==typeof e?3&e:1;return c(t,i,n||!1,arguments.length>3?r:3===i)},this.jsToXml=this.unbuild=function(e,n,r,i){var o=(t.document&&t.document.implementation||new t.DOMImplementation).createDocument(n||null,r||"",i||null);return f(o,o.documentElement||o,e),o},this.stringToXml=function(e){return n||(n=new t.DOMParser),n.parseFromString(e,"application/xml")},this.xmlToString=function(e){return void 0!==e.xml?e.xml:(new t.XMLSerializer).serializeToString(e)},this.stringToJs=function(t){var e=this.stringToXml(t);return this.xmlToJs(e)},this.jsToString=this.stringify=function(t,e,n,r){return this.xmlToString(this.jsToXml(t,e,n,r))},this.each=function(t,e,n){t instanceof Array?t.forEach(e,n):[t].forEach(e,n)}}}(window),void 0===(i="function"==typeof n?n.apply(e,r):n)||(t.exports=i)},4244:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},609:(t,e,n)=>{"use strict";var r=n(4289),i=n(5559),o=n(4244),a=n(5624),s=n(2281),u=i(a(),Object);r(u,{getPolyfill:a,implementation:o,shim:s}),t.exports=u},5624:(t,e,n)=>{"use strict";var r=n(4244);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},2281:(t,e,n)=>{"use strict";var r=n(5624),i=n(4289);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},8987:(t,e,n)=>{"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(1414),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),r=a(t),s=e&&"[object String]"===o.call(t),h=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=l&&n;if(s&&t.length>0&&!i.call(t,0))for(var y=0;y<t.length;++y)h.push(String(y));if(r&&t.length>0)for(var g=0;g<t.length;++g)h.push(String(g));else for(var v in t)d&&"prototype"===v||!i.call(t,v)||h.push(String(v));if(u)for(var m=function(t){if("undefined"==typeof window||!p)return f(t);try{return f(t)}catch(t){return!1}}(t),_=0;_<c.length;++_)m&&"constructor"===c[_]||!i.call(t,c[_])||h.push(c[_]);return h}}t.exports=r},2215:(t,e,n)=>{"use strict";var r=Array.prototype.slice,i=n(1414),o=Object.keys,a=o?function(t){return o(t)}:n(8987),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},1414:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},2837:(t,e,n)=>{"use strict";var r=n(2215),i=n(5419)(),o=n(1924),a=Object,s=o("Array.prototype.push"),u=o("Object.prototype.propertyIsEnumerable"),l=i?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var n=a(t);if(1===arguments.length)return n;for(var o=1;o<arguments.length;++o){var c=a(arguments[o]),f=r(c),h=i&&(Object.getOwnPropertySymbols||l);if(h)for(var p=h(c),d=0;d<p.length;++d){var y=p[d];u(c,y)&&s(f,y)}for(var g=0;g<f.length;++g){var v=f[g];if(u(c,v)){var m=c[v];n[v]=m}}}return n}},8162:(t,e,n)=>{"use strict";var r=n(2837);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return t!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},9908:t=>{"use strict";t.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},4155:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],l=!1,c=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&h())}function h(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},2582:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*c/s+f)),Math.min(o,Math.floor(r+(s-u)*c/s+f)),a)}var h=n[r],p=i,d=o;for(e(n,i,r),a(n[o],h)>0&&e(n,i,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],h)<0;)p++;for(;a(n[d],h)>0;)d--}0===a(n[i],h)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):h(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||h(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!h(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));y(t,e,n,l,this.compareMinX);for(var c=e;c<=n;c+=l){var f=Math.min(c+l-1,n);y(t,c,f,u,this.compareMinY);for(var h=c;h<=f;h+=u){var p=Math.min(h+u-1,f);i.children.push(this._build(t,h,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),f=(h=t,p=u,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-l);f<o?(o=f,i=l<i?l:i,a=u):f===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var h,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,u,l,f,h=1/0,p=1/0,d=e;d<=n-e;d++){var y=a(t,0,d,this.toBBox),g=a(t,d,n,this.toBBox),v=(i=y,o=g,s=void 0,u=void 0,l=void 0,f=void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),f=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,f-u)),m=c(y)+c(g);v<h?(h=v,r=d,p=m<p?m:p):v===h&&m<p&&(p=m,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,n-e,n,i),l=f(o)+f(u),c=e;c<n-e;c++){var h=t.children[c];s(o,t.leaf?i(h):h),l+=f(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(u,t.leaf?i(d):d),l+=f(u)}return l},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},7771:(t,e,n)=>{"use strict";var r=n(210),i=n(2296),o=n(1044)(),a=n(7296),s=n(4453),u=r("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||u(e)!==e)throw new s("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,l=!0;if("length"in t&&a){var c=a(t,"length");c&&!c.configurable&&(r=!1),c&&!c.writable&&(l=!1)}return(r||l||!n)&&(o?i(t,"length",e,!0,!0):i(t,"length",e)),t}},4893:(t,e,n)=>{t.exports.download=n(4709),t.exports.write=n(4803),t.exports.zip=n(8447)},4709:(t,e,n)=>{var r=n(8447);t.exports=function(t,e){var n=r(t,e);location.href="data:application/zip;base64,"+n}},8452:t=>{t.exports.enlarge=function(t,e){return e[0]<t.xmin&&(t.xmin=e[0]),e[0]>t.xmax&&(t.xmax=e[0]),e[1]<t.ymin&&(t.ymin=e[1]),e[1]>t.ymax&&(t.ymax=e[1]),t},t.exports.enlargeExtent=function(t,e){return e.xmax>t.xmax&&(t.xmax=e.xmax),e.xmin<t.xmin&&(t.xmin=e.xmin),e.ymax>t.ymax&&(t.ymax=e.ymax),e.ymin<t.ymin&&(t.ymin=e.ymin),t},t.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}},6982:(t,e,n)=>{var r=n(8694).jstypes;function i(t){var e={},n=[];for(var i in t)e[i]=typeof t[i];for(var o in e)n.push({name:o,type:r[e[o]]});return n}t.exports.geojson=function(t){var e={};return t.forEach((function(t){!function(t,e){for(var n in e)t[n]=e[n]}(e,t.properties)})),i(e)},t.exports.obj=i},2669:t=>{function e(t,e){return function(i){var o,a=i.features.filter((o=t,function(t){return t.geometry.type===o}));return{geometries:"POLYGON"===e||"POLYLINE"===e?[a.map(n)]:a.map(n),properties:a.map(r),type:e}}}function n(t){return void 0!==t.geometry.coordinates[0]&&void 0!==t.geometry.coordinates[0][0]&&void 0!==t.geometry.coordinates[0][0][0]?t.geometry.coordinates[0]:t.geometry.coordinates}function r(t){return t.properties}t.exports.point=e("Point","POINT"),t.exports.line=e("LineString","POLYLINE"),t.exports.polygon=e("Polygon","POLYGON")},101:(t,e,n)=>{var r=n(8452);t.exports.write=function(t,e,n,r){var i=100,o=0,a=0;t.forEach((function(t,e){n.setInt32(o,e),n.setInt32(o+4,10),n.setInt32(o+8,1,!0),n.setFloat64(o+12,t[0],!0),n.setFloat64(o+20,t[1],!0),r.setInt32(a,i/2),r.setInt32(a+4,10),a+=8,o+=28,i+=28}))},t.exports.extent=function(t){return t.reduce((function(t,e){return r.enlarge(t,e)}),r.blank())},t.exports.parts=function(t,e){return t.length},t.exports.shxLength=function(t){return 8*t.length},t.exports.shpLength=function(t){return 28*t.length}},9479:(t,e,n)=>{var r=n(8452),i=n(8694);function o(t,e){var n=1;return e!==i.geometries.POLYGON&&e!==i.geometries.POLYLINE||(n=t.reduce((function(t,e){return t+=e.length,Array.isArray(e[0][0][0])&&(t+=e.reduce((function(t,e){return t+e.length-1}),0)),t}),0)),n}function a(t,e){return void 0===e&&(e=[]),"object"==typeof t[0][0]?t.reduce((function(t,e){return t.concat(a(e))}),e):t}t.exports.write=function(t,e,n,i,s){var u=0,l=0,c=100;t.forEach((function(t,e){var f=a(t),h=o([t],s),p=16*f.length+48+4*(h-1),d=f.reduce((function(t,e){return r.enlarge(t,e)}),r.blank());i.setInt32(l,c/2),i.setInt32(l+4,p/2),l+=8,c+=p+8,n.setInt32(u,e+1),n.setInt32(u+4,p/2),n.setInt32(u+8,s,!0),n.setFloat64(u+12,d.xmin,!0),n.setFloat64(u+20,d.ymin,!0),n.setFloat64(u+28,d.xmax,!0),n.setFloat64(u+36,d.ymax,!0),n.setInt32(u+44,h,!0),n.setInt32(u+48,f.length,!0),n.setInt32(u+52,0,!0);for(var y=t.reduce((function(t,e){return Array.isArray(e[0][0])?t=t.concat(e):t.push(e),t}),[]),g=1;g<h;g++)n.setInt32(u+52+4*g,y.reduce((function(t,e,n){return n<g?t+e.length:t}),0),!0);f.forEach((function(t,e){n.setFloat64(u+56+16*e+4*(h-1),t[0],!0),n.setFloat64(u+56+16*e+4*(h-1)+8,t[1],!0)})),u+=p+8}))},t.exports.shpLength=function(t){return 56*t.length+16*a(t).length},t.exports.shxLength=function(t){return 8*t.length},t.exports.extent=function(t){return a(t).reduce((function(t,e){return r.enlarge(t,e)}),r.blank())},t.exports.parts=o},8953:t=>{t.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'},8694:t=>{t.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},4803:(t,e,n)=>{var r=n(8694),i=n(4019),o=n(8953),a=(n(8452),n(6982),n(9282),n(101)),s=n(9479),u={1:a,5:s,3:s};function l(t,e){t.setInt32(0,9994),t.setInt32(28,1e3,!0),t.setInt32(32,e,!0)}function c(t,e){e.setFloat64(36,t.xmin,!0),e.setFloat64(44,t.ymin,!0),e.setFloat64(52,t.xmax,!0),e.setFloat64(60,t.ymax,!0)}t.exports=function(t,e,n,a){var s=r.geometries[e],f=u[s],h=100+4*(f.parts(n,s)-n.length)+f.shpLength(n),p=100+f.shxLength(n),d=new ArrayBuffer(h),y=new DataView(d),g=new ArrayBuffer(p),v=new DataView(g),m=f.extent(n);l(y,s),l(v,s),c(m,y),c(m,v),f.write(n,m,new DataView(d,100),new DataView(g,100),s),y.setInt32(24,h/2),v.setInt32(24,50+4*n.length);var _=i.structure(t);a(null,{shp:y,shx:v,dbf:_,prj:o})}},8447:(t,e,n)=>{var r=n(4155),i=n(4803),o=n(2669),a=n(8953),s=n(6085);t.exports=function(t,e){var n=new s,u=n.folder(e&&e.folder?e.folder:"layers");[o.point(t),o.line(t),o.polygon(t)].forEach((function(t){t.geometries.length&&t.geometries[0].length&&i(t.properties,t.type,t.geometries,(function(n,r){var i=e&&e.types[t.type.toLowerCase()]?e.types[t.type.toLowerCase()]:t.type;u.file(i+".shp",r.shp.buffer,{binary:!0}),u.file(i+".shx",r.shx.buffer,{binary:!0}),u.file(i+".dbf",r.dbf.buffer,{binary:!0}),u.file(i+".prj",a)}))}));var l={compression:"STORE"};return r.browser||(l.type="nodebuffer"),n.generate(l)}},442:t=>{function e(t){return t&&t.length?" "+t.map((function(t){return t[0]+'="'+t[1]+'"'})).join(" "):""}t.exports.attr=e,t.exports.tagClose=function(t,n){return"<"+t+e(n)+"/>"},t.exports.tag=function(t,n,r){return"<"+t+e(r)+">"+n+"</"+t+">"},t.exports.encode=function(t){return(null===t?"":t.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},704:(t,e,n)=>{var r=n(4807);r.config({attrPrefix:"@"}),t.exports=function(t,e){if("string"==typeof(e=function(t,e){for(var n in t)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}({creator:"togpx",metadata:void 0,featureTitle:function t(e){if(!e)return"";if("object"==typeof e.tags){var n=t(e.tags);if(""!==n)return n}return e.name?e.name:e.ref?e.ref:e.id?e.id:""},featureDescription:function t(e){if(!e)return"";if("object"==typeof e.tags)return t(e.tags);var n="";for(var r in e)"object"!=typeof e[r]&&(n+=r+"="+e[r]+"\n");return n.substr(0,n.length-1)},featureLink:void 0,featureCoordTimes:function(t){return t.properties&&(t.properties.times||t.properties.coordTimes)||null}},e||{})).featureCoordTimes){var n=e.featureCoordTimes;e.featureCoordTimes=function(t){return t.properties[n]}}function i(t,n){e.featureLink&&(t.link={"@href":e.featureLink(n.properties)})}var a={gpx:{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1",metadata:null,wpt:[],trk:[]}};return e.creator&&(a.gpx["@creator"]=e.creator),e.metadata?a.gpx.metadata=e.metadata:delete e.metadata,("FeatureCollection"===t.type?t.features:"Feature"===t.type?[t]:[{type:"Feature",properties:{},geometry:t}]).forEach((function t(n){switch(n.geometry.type){case"Point":case"MultiPoint":var r=n.geometry.coordinates;"Point"==n.geometry.type&&(r=[r]),r.forEach((function(t){o={"@lat":t[1],"@lon":t[0],name:e.featureTitle(n.properties),desc:e.featureDescription(n.properties)},void 0!==t[2]&&(o.ele=t[2]),i(o,n),a.gpx.wpt.push(o)}));break;case"LineString":case"MultiLineString":r=n.geometry.coordinates;var s=e.featureCoordTimes(n);"LineString"==n.geometry.type&&(r=[r]),o={name:e.featureTitle(n.properties),desc:e.featureDescription(n.properties)},i(o,n),o.trkseg=[],r.forEach((function(t){var e={trkpt:[]};t.forEach((function(t,n){var r={"@lat":t[1],"@lon":t[0]};void 0!==t[2]&&(r.ele=t[2]),s&&s[n]&&(r.time=s[n]),e.trkpt.push(r)})),o.trkseg.push(e)})),a.gpx.trk.push(o);break;case"Polygon":case"MultiPolygon":o={name:e.featureTitle(n.properties),desc:e.featureDescription(n.properties)},i(o,n),o.trkseg=[];r=n.geometry.coordinates,s=e.featureCoordTimes(n);"Polygon"==n.geometry.type&&(r=[r]),r.forEach((function(t){t.forEach((function(t){var e={trkpt:[]},n=0;t.forEach((function(t){var r={"@lat":t[1],"@lon":t[0]};void 0!==t[2]&&(r.ele=t[2]),s&&s[n]&&(r.time=s[n]),n++,e.trkpt.push(r)})),o.trkseg.push(e)}))})),a.gpx.trk.push(o);break;case"GeometryCollection":n.geometry.geometries.forEach((function(e){var r={properties:n.properties,geometry:e};t(r)}));break;default:console.log("warning: unsupported geometry type: "+n.geometry.type)}})),gpx_str=r.stringify(a),gpx_str}},2816:(t,e,n)=>{var r=n(442),i=r.tag,o=r.encode;function a(t,e){return function(n){if(!n.properties||!s.valid(n.geometry))return"";var r=s.any(n.geometry);if(!r)return"";var a="",u="";if(t.simplestyle){var f=function(t){var e="";t["marker-symbol"]&&(e=e+"ms"+t["marker-symbol"]);t["marker-color"]&&(e=e+"mc"+t["marker-color"].replace("#",""));t["marker-size"]&&(e=e+"ms"+t["marker-size"]);t.stroke&&(e=e+"s"+t.stroke.replace("#",""));t["stroke-width"]&&(e=e+"sw"+t["stroke-width"].toString().replace(".",""));t["stroke-opacity"]&&(e=e+"mo"+t["stroke-opacity"].toString().replace(".",""));t.fill&&(e=e+"f"+t.fill.replace("#",""));t["fill-opacity"]&&(e=e+"fo"+t["fill-opacity"].toString().replace(".",""));return e}(n.properties);f&&(s.isPoint(n.geometry)&&function(t){return!!(t["marker-size"]||t["marker-symbol"]||t["marker-color"])}(n.properties)?(-1===e.indexOf(f)&&(a=function(t,e){return i("Style",i("IconStyle",i("Icon",i("href",function(t){var e=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",r=(t["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+e.charAt(0)+n+"+"+r+".png"}(t))))+i("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]]),[["id",e]])}(n.properties,f),e.push(f)),u=i("styleUrl","#"+f)):(s.isPolygon(n.geometry)||s.isLine(n.geometry))&&function(t){for(var e in t)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[e])return!0}(n.properties)&&(-1===e.indexOf(f)&&(a=function(t,e){var n=i("LineStyle",[i("color",c(t.stroke,t["stroke-opacity"])||"ff555555")+i("width",void 0===t["stroke-width"]?2:t["stroke-width"])]),r="";(t.fill||t["fill-opacity"])&&(r=i("PolyStyle",[i("color",c(t.fill,t["fill-opacity"])||"88555555")]));return i("Style",n+r,[["id",e]])}(n.properties,f),e.push(f)),u=i("styleUrl","#"+f)))}return a+i("Placemark",function(t,e){return t[e.name]?i("name",o(t[e.name])):""}(n.properties,t)+function(t,e){return t[e.description]?i("description",o(t[e.description])):""}(n.properties,t)+function(t){return i("ExtendedData",function(t){var e=[];for(var n in t)e.push([n,t[n]]);return e}(t).map(l).join(""))}(n.properties)+function(t,e){return t[e.timestamp]?i("TimeStamp",i("when",o(t[e.timestamp]))):""}(n.properties,t)+r+u)}}t.exports=function(t,e){return'<?xml version="1.0" encoding="UTF-8"?>'+i("kml",i("Document",function(t){return void 0!==t.documentName?i("name",t.documentName):""}(e=e||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"})+function(t){return void 0!==t.documentDescription?i("description",t.documentDescription):""}(e)+function(t,e){if(!t.type)return"";var n=[];switch(t.type){case"FeatureCollection":return t.features?t.features.map(a(e,n)).join(""):"";case"Feature":return a(e,n)(t);default:return a(e,n)({type:"Feature",geometry:t,properties:{}})}}(t,e)),[["xmlns","http://www.opengis.net/kml/2.2"]])};var s={Point:function(t){return i("Point",i("coordinates",t.coordinates.join(",")))},LineString:function(t){return i("LineString",i("coordinates",u(t.coordinates)))},Polygon:function(t){if(!t.coordinates.length)return"";var e=t.coordinates[0],n=t.coordinates.slice(1),r=i("outerBoundaryIs",i("LinearRing",i("coordinates",u(e)))),o=n.map((function(t){return i("innerBoundaryIs",i("LinearRing",i("coordinates",u(t))))})).join("");return i("Polygon",r+o)},MultiPoint:function(t){return t.coordinates.length?i("MultiGeometry",t.coordinates.map((function(t){return s.Point({coordinates:t})})).join("")):""},MultiPolygon:function(t){return t.coordinates.length?i("MultiGeometry",t.coordinates.map((function(t){return s.Polygon({coordinates:t})})).join("")):""},MultiLineString:function(t){return t.coordinates.length?i("MultiGeometry",t.coordinates.map((function(t){return s.LineString({coordinates:t})})).join("")):""},GeometryCollection:function(t){return i("MultiGeometry",t.geometries.map(s.any).join(""))},valid:function(t){return t&&t.type&&(t.coordinates||"GeometryCollection"===t.type&&t.geometries&&t.geometries.every(s.valid))},any:function(t){return s[t.type]?s[t.type](t):""},isPoint:function(t){return"Point"===t.type||"MultiPoint"===t.type},isPolygon:function(t){return"Polygon"===t.type||"MultiPolygon"===t.type},isLine:function(t){return"LineString"===t.type||"MultiLineString"===t.type}};function u(t){return t.map((function(t){return t.join(",")})).join(" ")}function l(t){return i("Data",i("value",o(t[1])),[["name",o(t[0])]])}function c(t,e){if("string"!=typeof t)return"";if(3===(t=t.replace("#","").toLowerCase()).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!==t.length)return"";var n=t[0]+t[1],r=t[2]+t[3],i=t[4]+t[5],o="ff";return"number"==typeof e&&e>=0&&e<=1&&((o=(255*e).toString(16)).indexOf(".")>-1&&(o=o.substr(0,o.indexOf("."))),o.length<2&&(o="0"+o)),o+i+r+n}},675:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?At:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function f(){this.root_=null,this.size_=0}function h(){}function p(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function y(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var v=function(){};v.prototype.interfaces_=function(){return[]},v.prototype.getClass=function(){return v},v.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var w=function(){},x=function(){},S=function(){},E=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},E.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!v.equalsWithTolerance(this.x,e.x,n)&&!!v.equalsWithTolerance(this.y,e.y,n)}},E.prototype.getOrdinate=function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new m("Invalid ordinate index: "+t)},E.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},E.prototype.equals=function(t){return t instanceof E&&this.equals2D(t)},E.prototype.equalInZ=function(t,e){return v.equalsWithTolerance(this.z,t.z,e)},E.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},E.prototype.clone=function(){},E.prototype.copy=function(){return new E(this)},E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},E.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},E.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},E.prototype.hashCode=function(){var t=17;return 37*(t=37*t+E.hashCode(this.x))+E.hashCode(this.y)},E.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},E.prototype.interfaces_=function(){return[w,x,e]},E.prototype.getClass=function(){return E},E.hashCode=function(){if(1===arguments.length){var t=arguments[0];return _.doubleToLongBits(t),Math.trunc(0)}},C.DimensionalComparator.get=function(){return O},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return _.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(E,C);var O=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};O.prototype.compare=function(t,e){var n=t,r=e,i=O.compare(n.x,r.x);if(0!==i)return i;var o=O.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:O.compare(n.z,r.z)},O.prototype.interfaces_=function(){return[S]},O.prototype.getClass=function(){return O},O.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var I=function(){};I.prototype.create=function(){},I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I};var P=function(){},k={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e";case P.BOUNDARY:return"b";case P.INTERIOR:return"i";case P.NONE:return"-"}throw new m("Unknown location value: "+t)},k.INTERIOR.get=function(){return 0},k.BOUNDARY.get=function(){return 1},k.EXTERIOR.get=function(){return 2},k.NONE.get=function(){return-1},Object.defineProperties(P,k);var M=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},T=function(){},L={LOG_10:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/T.LOG_10},T.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},T.wrap=function(t,e){return t<0?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},T.average=function(t,e){return(t+e)/2},L.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(T,L);var N=function(t){this.str=t};N.prototype.append=function(t){this.str+=t},N.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},N.prototype.toString=function(t){return this.str};var A=function(t){this.value=t};A.prototype.intValue=function(){return this.value},A.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},A.isNaN=function(t){return Number.isNaN(t)};var R=function(){};R.isWhitespace=function(t){return t<=32&&t>=0||127===t},R.toUpperCase=function(t){return t.toUpperCase()};var j=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},D={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};j.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},j.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=j.magnitude(n._hi),i=j.TEN.pow(r);(n=n.divide(i)).gt(j.TEN)?(n=n.divide(j.TEN),r+=1):n.lt(j.ONE)&&(n=n.multiply(j.TEN),r-=1);for(var o=r+1,a=new N,s=j.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,f=0;l>9?(c=!0,f="9"):f="0"+l,a.append(f),n=n.subtract(j.valueOf(l)).multiply(j.TEN),c&&n.selfAdd(j.TEN);var h=!0,p=j.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(h=!1),!h)break}return e[0]=r,a.toString()},j.prototype.sqr=function(){return this.multiply(this)},j.prototype.doubleValue=function(){return this._hi+this._lo},j.prototype.subtract=function(){if(arguments[0]instanceof j){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},j.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},j.prototype.isZero=function(){return 0===this._hi&&0===this._lo},j.prototype.selfSubtract=function(){if(arguments[0]instanceof j){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},j.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},j.prototype.min=function(t){return this.le(t)?this:t},j.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,f=null;return u=this._hi/n,f=(i=(l=j.SPLIT*u)-(i=l-u))*(a=(f=j.SPLIT*n)-(a=f-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(l=(this._hi-c-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+l,this}},j.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},j.prototype.divide=function(){if(arguments[0]instanceof j){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=j.SPLIT*o)-(e=a-o)),u=e*(r=(u=j.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new j(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return _.isNaN(l)?j.createNaN():j.copy(this).selfDivide(l,0)}},j.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},j.prototype.pow=function(t){if(0===t)return j.valueOf(1);var e=new j(this),n=j.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},j.prototype.ceil=function(){if(this.isNaN())return j.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new j(t,e)},j.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},j.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},j.prototype.setValue=function(){if(arguments[0]instanceof j){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},j.prototype.max=function(t){return this.ge(t)?this:t},j.prototype.sqrt=function(){if(this.isZero())return j.valueOf(0);if(this.isNegative())return j.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=j.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},j.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,f=null,h=null,p=null,d=null,y=null,g=null;p=this._hi+u,f=this._lo+l,d=p-(y=p-this._hi),h=f-(g=f-this._lo);var v=(c=p+(y=(d=u-y+(this._hi-d))+f))+(y=(h=l-g+(this._lo-h))+(y+(p-c))),m=y+(c-v);return this._hi=v,this._lo=m,this}},j.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=j.SPLIT*this._hi)-this._hi,l=j.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=l+(i=u-c);return this._hi=c,this._lo=f,this}},j.prototype.selfSqr=function(){return this.selfMultiply(this)},j.prototype.floor=function(){if(this.isNaN())return j.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new j(t,e)},j.prototype.negate=function(){return this.isNaN()?this:new j(-this._hi,-this._lo)},j.prototype.clone=function(){},j.prototype.multiply=function(){if(arguments[0]instanceof j){var t=arguments[0];return t.isNaN()?j.createNaN():j.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?j.createNaN():j.copy(this).selfMultiply(e,0)}},j.prototype.isNaN=function(){return _.isNaN(this._hi)},j.prototype.intValue=function(){return Math.trunc(this._hi)},j.prototype.toString=function(){var t=j.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},j.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+j.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+j.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},j.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=j.SPLIT*i)-(t=o-i)),n=(s=j.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new j(u,i-u+o)},j.prototype.toSciNotation=function(){if(this.isZero())return j.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=j.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},j.prototype.abs=function(){return this.isNaN()?j.NaN:this.isNegative()?this.negate():new j(this)},j.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},j.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},j.prototype.add=function(){if(arguments[0]instanceof j){var t=arguments[0];return j.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return j.copy(this).selfAdd(e)}},j.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof j){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},j.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},j.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},j.prototype.trunc=function(){return this.isNaN()?j.NaN:this.isPositive()?this.floor():this.ceil()},j.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},j.prototype.interfaces_=function(){return[e,w,x]},j.prototype.getClass=function(){return j},j.sqr=function(t){return j.valueOf(t).selfMultiply(t)},j.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return j.parse(t)}if("number"==typeof arguments[0])return new j(arguments[0])},j.sqrt=function(t){return j.valueOf(t).sqrt()},j.parse=function(t){for(var e=0,n=t.length;R.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new j,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,R.isDigit(l)){var c=l-"0";o.selfMultiply(j.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var f=t.substring(e);try{u=A.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var h=o,p=a-s-u;if(0===p)h=o;else if(p>0){var d=j.TEN.pow(p);h=o.divide(d)}else if(p<0){var y=j.TEN.pow(-p);h=o.multiply(y)}return r?h.negate():h},j.createNaN=function(){return new j(_.NaN,_.NaN)},j.copy=function(t){return new j(t)},j.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},j.stringOfChar=function(t,e){for(var n=new N,r=0;r<e;r++)n.append(t);return n.toString()},D.PI.get=function(){return new j(3.141592653589793,12246467991473532e-32)},D.TWO_PI.get=function(){return new j(6.283185307179586,24492935982947064e-32)},D.PI_2.get=function(){return new j(1.5707963267948966,6123233995736766e-32)},D.E.get=function(){return new j(2.718281828459045,14456468917292502e-32)},D.NaN.get=function(){return new j(_.NaN,_.NaN)},D.EPS.get=function(){return 123259516440783e-46},D.SPLIT.get=function(){return 134217729},D.MAX_PRINT_DIGITS.get=function(){return 32},D.TEN.get=function(){return j.valueOf(10)},D.ONE.get=function(){return j.valueOf(1)},D.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},D.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(j,D);var F=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var r=F.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=j.valueOf(e.x).selfAdd(-t.x),o=j.valueOf(e.y).selfAdd(-t.y),a=j.valueOf(n.x).selfAdd(-e.x),s=j.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},F.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,r){var i=j.valueOf(r.y).selfSubtract(n.y).selfMultiply(j.valueOf(e.x).selfSubtract(t.x)),o=j.valueOf(r.x).selfSubtract(n.x).selfMultiply(j.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=j.valueOf(r.x).selfSubtract(n.x).selfMultiply(j.valueOf(t.y).selfSubtract(n.y)),u=j.valueOf(r.y).selfSubtract(n.y).selfMultiply(j.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=j.valueOf(t.x).selfAdd(j.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),f=j.valueOf(e.x).selfSubtract(t.x).selfMultiply(j.valueOf(t.y).selfSubtract(n.y)),h=j.valueOf(e.y).selfSubtract(t.y).selfMultiply(j.valueOf(t.x).selfSubtract(n.x)),p=f.subtract(h).selfDivide(a).doubleValue(),d=j.valueOf(n.y).selfAdd(j.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new E(c,d)},F.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return F.signum(a);r=i+o}else{if(!(i<0))return F.signum(a);if(o>=0)return F.signum(a);r=-i-o}var s=F.DP_SAFE_EPSILON*r;return a>=s||-a>=s?F.signum(a):2},F.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,B);var G=function(){},z={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};z.X.get=function(){return 0},z.Y.get=function(){return 1},z.Z.get=function(){return 2},z.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[x]},G.prototype.getClass=function(){return G},Object.defineProperties(G,z);var q=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(q),V=function(){};V.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var f=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],y=f.y-h.y,g=h.x-f.x,v=f.x*h.y-h.x*f.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=g*b-_*v,this.y=m*v-y*b,this.w=y*_-m*g}};Y.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},Y.prototype.getCoordinate=function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,f=(o*l-u*a)/c,h=(s*a-i*l)/c;if(_.isNaN(f)||_.isInfinite(f)||_.isNaN(h)||_.isInfinite(h))throw new U;return new E(f,h)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},W={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,r,n,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},X.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+E.hashCode(this._minx))+E.hashCode(this._maxx))+E.hashCode(this._miny))+E.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[w,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<s))}},W.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,W);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Z=function(t){this.geometryFactory=t||new ve};Z.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Q[n]&&(e=Q[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Z.prototype.write=function(t){return this.extractGeometry(t)},Z.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!K[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+K[e].apply(this,[t])+")"};var K={coordinate:function(t){return t.x+" "+t.y},point:function(t){return K.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(K.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+K.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+K.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+K.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Q={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(Q.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(Q.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(H.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(H.trimParens,"$1"),n=Q.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(Q.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Z(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new N;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,X.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof U))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new E(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=F.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new E(t),o=new E(e),a=new E(n),s=new E(r),u=new E;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=X.intersects(e,n,r),a=X.intersects(e,n,i),s=X.intersects(r,i,e),u=X.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(s<f?s:f))/2,d=((a>c?a:c)+(u<h?u:h))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!X.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new E(r):0===a?this._intPt[0]=new E(i):0===s?this._intPt[0]=new E(e):0===u&&(this._intPt[0]=new E(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof E&&M(arguments[1],G)){for(var t=arguments[1],e=new at(arguments[0]),n=new E,r=new E,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(M(arguments[0],G)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new E,l=new E,c=new E;a.getCoordinate(0,l),a.getCoordinate(1,c);var f=l.x;c.x-=f;for(var h=0,p=1;p<s-1;p++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(p+1,c),c.x-=f,h+=l.x*(u.y-c.y);return h/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(X.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?T.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==P.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=st.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[x,w,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return ht},Object.defineProperties(ct,ft);var ht=function(){};ht.interfaces_=function(){return[lt]},ht.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var dt=function(){},yt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},yt.Mod2BoundaryNodeRule.get=function(){return gt},yt.EndPointBoundaryNodeRule.get=function(){return vt},yt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},yt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},yt.MOD2_BOUNDARY_RULE.get=function(){return new gt},yt.ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},yt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},yt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},yt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,yt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[dt]},gt.prototype.getClass=function(){return gt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>0},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var wt=function(){};wt.prototype.hasNext=function(){},wt.prototype.next=function(){},wt.prototype.remove=function(){};var xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var St=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Et(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(xt),Et=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(wt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof E&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var f=arguments[0],h=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(f>0&&this.get(f-1).equals2D(h))return null;if(f<p&&this.get(f).equals2D(h))return null}}t.prototype.add.call(this,f,h)}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],v=arguments[3],m=1;g>v&&(m=-1);for(var _=g;_!==v;_+=m)this.add(d[_],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(St),Ot=function(){},It={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};It.ForwardComparator.get=function(){return Pt},It.BidirectionalComparator.get=function(){return kt},It.coordArrayType.get=function(){return new Array(0).fill(null)},Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},Ot.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ot.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ot.indexOf(r,e)<0)return r}return null},Ot.scroll=function(t,e){var n=Ot.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);V.arraycopy(t,n,r,0,t.length-n),V.arraycopy(t,0,r,t.length-n,n),V.arraycopy(r,0,t,0,t.length)},Ot.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Ot.intersection=function(t,e){for(var n=new Ct,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Ot.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ot.removeRepeatedPoints=function(t){return Ot.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},Ot.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Ot.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Ot.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new E(r[i+u])},Ot.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Ot.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ot.toCoordinateArray=function(t){return t.toArray(Ot.coordArrayType)},Ot.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ot.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ot.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Ot.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Ot.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ot.extract=function(t,e,n){e=T.clamp(e,0,t.length);var r=(n=T.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Ot,It);var Pt=function(){};Pt.prototype.compare=function(t,e){return Ot.compare(t,e)},Pt.prototype.interfaces_=function(){return[S]},Pt.prototype.getClass=function(){return Pt};var kt=function(){};kt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Ot.compare(n,r);return Ot.isEqualReversed(n,r)?0:i},kt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Ot.increasingDirection(n),o=Ot.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},kt.prototype.interfaces_=function(){return[S]},kt.prototype.getClass=function(){return kt};var Mt=function(){};Mt.prototype.get=function(){},Mt.prototype.put=function(){},Mt.prototype.size=function(){},Mt.prototype.values=function(){},Mt.prototype.entrySet=function(){};var Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Mt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Lt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Nt(this)},e}(o),Nt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(wt),At=0;(f.prototype=new Tt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:At,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:At,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===l(s(s(t)))){var e=c(s(s(t)));1===a(e)?(u(s(t),At),u(e,At),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),At),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=l(s(s(t)));1===a(n)?(u(s(t),At),u(n,At),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),At),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=At},f.prototype.values=function(){var t=new St,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Lt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},f.prototype.size=function(){return this.size_};var Rt=function(){};Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},h.prototype=new o,(p.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new jt(this)};var jt=function(t){this.treeSet_=t,this.position_=0};jt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},jt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},jt.prototype.remove=function(){throw new i};var Dt=function(){};Dt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Dt.asList=function(t){for(var e=new St,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Ft=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new m("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(R.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Bt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var zt=function(){};zt.prototype.filter=function(t,e){},zt.prototype.isDone=function(){},zt.prototype.isGeometryChanged=function(){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var qt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Dt.asList(this._geometries)),n=new p(Dt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(M(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(M(arguments[0],zt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(M(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(M(arguments[0],lt)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(qt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof Zt?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new St;this._endpointMap=new f;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ot.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){return 1===arguments.length?new Vt(arguments[0]).getBoundary():2===arguments.length?new Vt(arguments[0],arguments[1]).getBoundary():void 0};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Wt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Xt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,r=new St,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Wt.NEWLINE.get=function(){return V.getProperty("line.separator")},Wt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xt,Wt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(a)&&_.isNaN(s)))return!1}return!0},Ht.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ht.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ht.copy(e,i-1,r,o,1);return r},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ht.swap(t,r,e-r)},Ht.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ht.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ht.copyCoord(t,e+o,n,r+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new N;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ht.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ht.copy(e,0,r,o,1);return r};var Zt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(M(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(M(arguments[0],zt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(M(arguments[0],Gt)||M(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Qt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(M(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(M(arguments[0],zt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(M(arguments[0],Gt)||M(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var $t=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Ot.minCoordinate(e.getCoordinates());Ot.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Ot.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var f=this.getInteriorRingN(c),h=i.getInteriorRingN(c),p=f.compareToSameClass(h,r);if(0!==p)return p;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){if(M(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(M(t,zt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(M(t,Gt))t.filter(this);else if(M(t,lt)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(qt),ee=function(t){function e(e,n){e instanceof E&&n instanceof ve&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Zt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new St,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(qt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof qt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Qt||t instanceof Zt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new St,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new St,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Zt?e.createLineString(n):t instanceof Qt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new E}else if(M(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new E}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new E(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new N(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},fe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(M(arguments[0],G))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},ce.prototype.interfaces_=function(){return[I,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},fe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fe.instanceObject.get=function(){return new ce},Object.defineProperties(ce,fe);var he=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new St,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Lt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Mt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ye){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new A(n).compareTo(new A(r))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof E){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,w]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de);var ye=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ye.prototype.readResolve=function(){return ye.nameToTypeMap.get(this._name)},ye.prototype.toString=function(){return this._name},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new he},Object.defineProperties(ye,ge),pe.Type=ye,pe.FIXED=new ye("FIXED"),pe.FLOATING=new ye("FLOATING"),pe.FLOATING_SINGLE=new ye("FLOATING SINGLE");var ve=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?M(arguments[0],I)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ve.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},ve.prototype.createLineString=function(t){return t?t instanceof Array?new Zt(this.getCoordinateSequenceFactory().create(t),this):M(t,G)?new Zt(t,this):void 0:new Zt(this.getCoordinateSequenceFactory().create([]),this)},ve.prototype.createMultiLineString=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},ve.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ve.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $t)return this.createMultiPolygon(ve.toPolygonArray(t));if(s instanceof Zt)return this.createMultiLineString(ve.toLineStringArray(t));if(s instanceof Qt)return this.createMultiPoint(ve.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ve.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ve.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(M(arguments[0],G))return new Qt(arguments[0],this)}},ve.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ve.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(M(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},ve.prototype.getSRID=function(){return this._SRID},ve.prototype.createGeometryCollection=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},ve.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ve.prototype.getPrecisionModel=function(){return this._precisionModel},ve.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(M(arguments[0],G))return new ee(arguments[0],this)}},ve.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ve.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(M(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Ht.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ve.prototype.interfaces_=function(){return[e]},ve.prototype.getClass=function(){return ve},ve.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ve.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ve.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ve,me);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ve};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!we[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?we[n].apply(this,[e.coordinates]):"GeometryCollection"===n?we[n].apply(this,[e.geometries]):we[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!xe[e])throw new Error("Geometry is not supported");return xe[e].apply(this,[t])};var we={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!we[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=we.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new E(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=we.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=we.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=we.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(we.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},xe={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:xe.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(xe.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=xe.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=xe.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xe.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(xe[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Se=function(t){this.geometryFactory=t||new ve,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Se.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},Se.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ee=function(){this.parser=new be(this.geometryFactory)};Ee.prototype.write=function(t){return this.parser.write(t)};var Ce=function(){},Oe={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Oe.ON.get=function(){return 0},Oe.LEFT.get=function(){return 1},Oe.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Oe),(y.prototype=new Error).name="EmptyStackException",(g.prototype=new xt).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new y;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new y;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ie=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ie.prototype.getCoordinate=function(){return this._minCoord},Ie.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ie.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ie.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ce.LEFT;return n[e].y<n[e+1].y&&(r=Ce.RIGHT),r},Ie.prototype.getEdge=function(){return this._orientedDe},Ie.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ie.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ie.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie};var Pe=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),ke=function(){this.array_=[]};ke.prototype.addLast=function(t){this.array_.push(t)},ke.prototype.removeFirst=function(){return this.array_.shift()},ke.prototype.isEmpty=function(){return 0===this.array_.length};var Me=function(){this._finder=null,this._dirEdgeList=new St,this._nodes=new St,this._rightMostCoord=null,this._env=null,this._finder=new Ie};Me.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Me.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Me.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Me.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Me.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Me.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Me.prototype.computeDepths=function(t){var e=new Lt,n=new ke,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Me.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Me.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Me.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Me.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Me.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Me.prototype.getNodes=function(){return this._nodes},Me.prototype.getDirectedEdges=function(){return this._dirEdgeList},Me.prototype.interfaces_=function(){return[w]},Me.prototype.getClass=function(){return Me};var Te=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ce.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=a,this.location[Ce.RIGHT]=s}};Te.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Te.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1;return!0},Te.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Te.prototype.isLine=function(){return 1===this.location.length},Te.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=P.NONE,e[Ce.RIGHT]=P.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===P.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Te.prototype.getLocations=function(){return this.location},Te.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ce.LEFT];this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},Te.prototype.toString=function(){var t=new N;return this.location.length>1&&t.append(P.toLocationSymbol(this.location[Ce.LEFT])),t.append(P.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},Te.prototype.setLocations=function(t,e,n){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=n},Te.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Te.prototype.isArea=function(){return this.location.length>1},Te.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0;return!1},Te.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Te.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Te.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Te.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Le=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Te(e),this.elt[1]=new Te(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Te(n.elt[0]),this.elt[1]=new Te(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Te(P.NONE),this.elt[1]=new Te(P.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Te(o,a,s),this.elt[1]=new Te(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],f=arguments[3];this.elt[0]=new Te(P.NONE,P.NONE,P.NONE),this.elt[1]=new Te(P.NONE,P.NONE,P.NONE),this.elt[u].setLocations(l,c,f)}};Le.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Le.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Le.prototype.isNull=function(t){return this.elt[t].isNull()},Le.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Le.prototype.isLine=function(t){return this.elt[t].isLine()},Le.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Te(t.elt[e]):this.elt[e].merge(t.elt[e])},Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Le.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Le.prototype.toString=function(){var t=new N;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Le.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Le.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Le.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Le.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Le.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Le.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Te(this.elt[t].location[0]))},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.toLineLabel=function(t){for(var e=new Le(P.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ne=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new St,this._pts=new St,this._label=new Le(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new St,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ne.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Ne.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ne.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Pe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ne.prototype.getLinearRing=function(){return this._ring},Ne.prototype.getCoordinate=function(t){return this._pts.get(t)},Ne.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ne.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Ne.prototype.isHole=function(){return this._isHole},Ne.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ne.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ne.prototype.addHole=function(t){this._holes.add(t)},Ne.prototype.isShell=function(){return null===this._shell},Ne.prototype.getLabel=function(){return this._label},Ne.prototype.getEdges=function(){return this._edges},Ne.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ne.prototype.getShell=function(){return this._shell},Ne.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ce.RIGHT);if(n===P.NONE)return null;if(this._label.getLocation(e)===P.NONE)return this._label.setLocation(e,n),null}},Ne.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ne.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Ae=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new St,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ae(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),je=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};je.prototype.setVisited=function(t){this._isVisited=t},je.prototype.setInResult=function(t){this._isInResult=t},je.prototype.isCovered=function(){return this._isCovered},je.prototype.isCoveredSet=function(){return this._isCoveredSet},je.prototype.setLabel=function(t){this._label=t},je.prototype.getLabel=function(){return this._label},je.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},je.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},je.prototype.isInResult=function(){return this._isInResult},je.prototype.isVisited=function(){return this._isVisited},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var De=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Le(0,P.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=P.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==P.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Le(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Le)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===P.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=P.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case P.BOUNDARY:n=P.INTERIOR;break;case P.INTERIOR:default:n=P.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(je),Fe=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof De){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new St,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===P.BOUNDARY&&e.add(r)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Be=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Be,Ge);var ze=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};ze.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},ze.prototype.getDy=function(){return this._dy},ze.prototype.getCoordinate=function(){return this._p0},ze.prototype.setNode=function(t){this._node=t},ze.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},ze.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},ze.prototype.getDirectedCoordinate=function(){return this._p1},ze.prototype.getDx=function(){return this._dx},ze.prototype.getLabel=function(){return this._label},ze.prototype.getEdge=function(){return this._edge},ze.prototype.getQuadrant=function(){return this._quadrant},ze.prototype.getNode=function(){return this._node},ze.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},ze.prototype.computeLabel=function(t){},ze.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ze.prototype.interfaces_=function(){return[w]},ze.prototype.getClass=function(){return ze};var qe=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===P.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===P.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ce.LEFT&&(r=-1);var i=Ce.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(ze),Ue=function(){};Ue.prototype.createNode=function(t){return new De(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var Ve=function(){if(this._edges=new St,this._nodes=null,this._edgeEndList=new St,0===arguments.length)this._nodes=new Fe(new Ue);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof De){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===P.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new qe(n,!0),i=new qe(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new St;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Pe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new St,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Re(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;c.contains(r)&&st.isPointInRing(i,l.getCoordinates())&&(f=!0),f&&(null===o||a.contains(c))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new St,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};We.prototype.getItem=function(){return this._item},We.prototype.getBounds=function(){return this._bounds},We.prototype.interfaces_=function(){return[Xe,e]},We.prototype.getClass=function(){return We};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new St,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ze=function(){};Ze.prototype.visitItem=function(t){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ke=function(){};Ke.prototype.insert=function(t,e){},Ke.prototype.remove=function(t,e){},Ke.prototype.query=function(){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Qe=function(){if(this._childBoundables=new St,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Qe.prototype.getLevel=function(){return this._level},Qe.prototype.size=function(){return this._childBoundables.size()},Qe.prototype.getChildBoundables=function(){return this._childBoundables},Qe.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Qe.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Qe.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Qe.prototype.interfaces_=function(){return[Xe,e]},Qe.prototype.getClass=function(){return Qe},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Qe,Je);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Dt.sort(n,e):Dt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$e.singletonList=function(t){var e=new St;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[w]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Qe};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new St,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Qe?t+=this.size(n):n instanceof We&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof We&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new St:t}if(1===arguments.length){for(var e=arguments[0],n=new St,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Qe){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof We?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new We(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new St;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Qe?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof We),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new St;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(M(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Qe?this.query(i,u,o):u instanceof We?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(M(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe)for(var l=arguments[0],c=arguments[2],f=arguments[1].getChildBoundables(),h=0;h<f.size();h++){var p=f.get(h);this.getIntersectsOp().intersects(p.getBounds(),l)&&(p instanceof Qe?this.query(l,p,c):p instanceof We?c.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Qe&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Qe){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new St;n.add(this.createNode(e));var r=new St(t);$e.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new St,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new St;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(M(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(M(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof Qe){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new St(t);$e.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(M(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&M(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new He;for(c.add(s);!c.isEmpty()&&u>0;){var f=c.poll(),h=f.getDistance();if(h>=u)break;f.isLeaves()?(u=h,l=f):f.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new We(arguments[0],arguments[1]),y=new tn(this.getRoot(),d,p);return this.nearestNeighbour(y)[0]}},n.prototype.interfaces_=function(){return[Ke,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qe),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new E(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[w]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Ct;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new St;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new A(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new E(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new A(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new E(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var fn=function(){};fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new m("Cannot compute the octant for two identical points "+i);return fn.octant(a,s)}};var hn=function(){};hn.prototype.getCoordinates=function(){},hn.prototype.size=function(){},hn.prototype.getCoordinate=function(t){},hn.prototype.isClosed=function(){},hn.prototype.setData=function(t){},hn.prototype.getData=function(){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[hn]},pn.prototype.getClass=function(){return pn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:fn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new E(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new St;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var yn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new E,this.p1=new E;else if(1===arguments.length){var t=arguments[0];this.p0=new E(t.p0),this.p1=new E(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(e,n),this.p1=new E(r,i)}},gn={serialVersionUID:{configurable:!0}};yn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},yn.prototype.orientationIndex=function(){if(arguments[0]instanceof yn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},yn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},yn.prototype.isVertical=function(){return this.p0.x===this.p1.x},yn.prototype.equals=function(t){if(!(t instanceof yn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},yn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},yn.prototype.project=function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof yn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new yn(a,s)}},yn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},yn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},yn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},yn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},yn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},yn.prototype.midPoint=function(){return yn.midPoint(this.p0,this.p1)},yn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},yn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},yn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},yn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},yn.prototype.getLength=function(){return this.p0.distance(this.p1)},yn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},yn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},yn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},yn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},yn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},yn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new E(n-u,r+s)},yn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},yn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},yn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},yn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},yn.prototype.distance=function(){if(arguments[0]instanceof yn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},yn.prototype.pointAlong=function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},yn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},yn.prototype.interfaces_=function(){return[w,e]},yn.prototype.getClass=function(){return yn},yn.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(yn,gn);var vn=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new yn,this._overlapSeg2=new yn};vn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<c&&(r<f&&this.computeOverlapsInternal(t,c,n,r,f,o),f<i&&this.computeOverlapsInternal(t,c,n,f,i,o)),c<e&&(r<f&&this.computeOverlapsInternal(c,e,n,r,f,o),f<i&&this.computeOverlapsInternal(c,e,n,f,i,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new St;n.add(new A(e));do{var r=_n.findChainEnd(t,e);n.add(new A(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new St,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new mn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var wn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};wn.prototype.setSegmentIntersector=function(t){this._segInt=t},wn.prototype.interfaces_=function(){return[bn]},wn.prototype.getClass=function(){return wn};var xn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new St,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Sn},Object.defineProperties(e,n),e}(wn),Sn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vn),En=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Cn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};En.prototype.getEndCapStyle=function(){return this._endCapStyle},En.prototype.isSingleSided=function(){return this._isSingleSided},En.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=En.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=En.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==En.JOIN_ROUND&&(this._quadrantSegments=En.DEFAULT_QUADRANT_SEGMENTS)},En.prototype.getJoinStyle=function(){return this._joinStyle},En.prototype.setJoinStyle=function(t){this._joinStyle=t},En.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},En.prototype.getSimplifyFactor=function(){return this._simplifyFactor},En.prototype.getQuadrantSegments=function(){return this._quadrantSegments},En.prototype.setEndCapStyle=function(t){this._endCapStyle=t},En.prototype.getMitreLimit=function(){return this._mitreLimit},En.prototype.setMitreLimit=function(t){this._mitreLimit=t},En.prototype.setSingleSided=function(t){this._isSingleSided=t},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Cn.CAP_ROUND.get=function(){return 1},Cn.CAP_FLAT.get=function(){return 2},Cn.CAP_SQUARE.get=function(){return 3},Cn.JOIN_ROUND.get=function(){return 1},Cn.JOIN_MITRE.get=function(){return 2},Cn.JOIN_BEVEL.get=function(){return 3},Cn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(En,Cn);var On=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},In={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};On.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},On.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=On.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},On.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},On.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/On.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},On.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},On.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},On.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===On.DELETE;)e++;return e},On.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},On.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==On.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.simplify=function(t,e){return new On(t).simplify(e)},In.INIT.get=function(){return 0},In.DELETE.get=function(){return 1},In.KEEP.get=function(){return 1},In.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(On,In);var Pn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new St},kn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Pn.prototype.getCoordinates=function(){return this._ptList.toArray(Pn.COORDINATE_ARRAY_TYPE)},Pn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Pn.prototype.addPt=function(t){var e=new E(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Pn.prototype.revere=function(){},Pn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Pn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Pn.prototype.toString=function(){return(new ve).createLineString(this.getCoordinates()).toString()},Pn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new E(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Pn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},kn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Pn,kn);var Mn=function(){},Tn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.toDegrees=function(t){return 180*t/Math.PI},Mn.normalize=function(t){for(;t>Math.PI;)t-=Mn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Mn.PI_TIMES_2;return t},Mn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Mn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Mn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Mn.interiorAngle=function(t,e,n){var r=Mn.angle(e,t),i=Mn.angle(e,n);return Math.abs(i-r)},Mn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Mn.PI_TIMES_2;t>=Mn.PI_TIMES_2&&(t=0)}else{for(;t>=Mn.PI_TIMES_2;)t-=Mn.PI_TIMES_2;t<0&&(t=0)}return t},Mn.angleBetween=function(t,e,n){var r=Mn.angle(e,t),i=Mn.angle(e,n);return Mn.diff(r,i)},Mn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Mn.toRadians=function(t){return t*Math.PI/180},Mn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Mn.COUNTERCLOCKWISE:n<0?Mn.CLOCKWISE:Mn.NONE},Mn.angleBetweenOriented=function(t,e,n){var r=Mn.angle(e,t),i=Mn.angle(e,n)-r;return i<=-Math.PI?i+Mn.PI_TIMES_2:i>Math.PI?i-Mn.PI_TIMES_2:i},Tn.PI_TIMES_2.get=function(){return 2*Math.PI},Tn.PI_OVER_2.get=function(){return Math.PI/2},Tn.PI_OVER_4.get=function(){return Math.PI/4},Tn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Tn.CLOCKWISE.get=function(){return st.CLOCKWISE},Tn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Mn,Tn);var Ln=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new yn,this._seg1=new yn,this._offset0=new yn,this._offset1=new yn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===En.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Nn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ln.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ce.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ce.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ln.prototype.addLineEndCap=function(t,e){var n=new yn(t,e),r=new yn;this.computeOffsetSegment(n,Ce.LEFT,this._distance,r);var i=new yn;this.computeOffsetSegment(n,Ce.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case En.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case En.CAP_SQUARE:var u=new E;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new E(r.p1.x+u.x,r.p1.y+u.y),c=new E(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Ln.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ln.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof U))throw t;o=new E(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ln.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Ln.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===En.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===En.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ln.prototype.createSquare=function(t){this._segList.addPt(new E(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new E(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new E(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ln.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ln.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ln.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ln.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ln.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Mn.angle(i,this._seg0.p0),a=Mn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Mn.normalize(o+a),u=Mn.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),f=i.x+l*Math.cos(u),h=i.y+l*Math.sin(u),p=new E(f,h),d=new yn(i,p),y=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Ce.LEFT?(this._segList.addPt(y),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(y))},Ln.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Ln.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new E;l<a;){var f=e+o*l;c.x=t.x+i*Math.cos(f),c.y=t.y+i*Math.sin(f),this._segList.addPt(c),l+=u}},Ln.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ln.prototype.createCircle=function(t){var e=new E(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ln.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ln.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ln.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===En.JOIN_BEVEL||this._bufParams.getJoinStyle()===En.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Ln.prototype.closeRing=function(){this._segList.closeRing()},Ln.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Nn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Nn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Nn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Nn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ln,Nn);var An=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};An.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Ot.reverse(o),o},An.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=On.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=On.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ce.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},An.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ce.RIGHT&&(r=-r);var i=On.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},An.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=On.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ce.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=On.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ce.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},An.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case En.CAP_ROUND:e.createCircle(t);break;case En.CAP_SQUARE:e.createSquare(t)}},An.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},An.prototype.getBufferParameters=function(){return this._bufParams},An.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},An.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return An.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},An.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=On.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=On.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ce.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},An.prototype.getSegGen=function(t){return new Ln(this._precisionModel,this._bufParams,t)},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e};var Rn=function(){this._subgraphs=null,this._seg=new yn,this._cga=new st;var t=arguments[0];this._subgraphs=t},jn={DepthSegment:{configurable:!0}};Rn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new St,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(M(arguments[2],xt)&&arguments[0]instanceof E&&arguments[1]instanceof qe){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(Ce.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Ce.RIGHT));var f=new Dn(this._seg,c);s.add(f)}}else if(M(arguments[2],xt)&&arguments[0]instanceof E&&M(arguments[1],xt))for(var h=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(h,y,p)}},Rn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},jn.DepthSegment.get=function(){return Dn},Object.defineProperties(Rn,jn);var Dn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new yn(t),this._leftDepth=e};Dn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Dn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Dn.prototype.toString=function(){return this._upwardSeg.toString()},Dn.prototype.interfaces_=function(){return[w]},Dn.prototype.getClass=function(){return Dn};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,r){return t*r-e*n},Fn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,f=t.x-i,h=t.y-o,p=(l*f-s*h)/c,d=(-u*f+a*h)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Fn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Fn.isAcute=function(t,e,n){return!!Mn.isAcute(t,e,n)&&!!Mn.isAcute(e,n,t)&&!!Mn.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*Fn.det(o,a,s,u),c=Fn.det(a,o*o+a*a,u,s*s+u*u),f=Fn.det(o,o*o+a*a,s,s*s+u*u);return new E(r-c/l,i+f/l)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},Fn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new E(t.x+i*o,t.y+i*a)},Fn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,f=r*s-i*a,h=l*l+c*c+f*f;return Math.sqrt(h)/2},Fn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new E(r,i)},Fn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new E(s,u)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ce.LEFT;this._distance<0&&(e=-this._distance,n=Ce.RIGHT);var r=t.getExteriorRing(),i=Ot.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,P.EXTERIOR,P.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ot.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ce.opposite(n),P.INTERIOR,P.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ot.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,P.EXTERIOR,P.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Le(0,P.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ce.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Zt?this.addLineString(t):t instanceof Qt?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof qt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var zn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};zn.prototype.next=function(){if(this._atStart)return this._atStart=!1,zn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof qt?(this._subcollectionIterator=new zn(t),this._subcollectionIterator.next()):t},zn.prototype.remove=function(){throw new Error(this.getClass().getName())},zn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},zn.prototype.interfaces_=function(){return[wt]},zn.prototype.getClass=function(){return zn},zn.isAtomic=function(t){return!(t instanceof qt)};var qn=function(){this._geom=null;var t=arguments[0];this._geom=t};qn.prototype.locate=function(t){return qn.locate(t,this._geom)},qn.prototype.interfaces_=function(){return[Gn]},qn.prototype.getClass=function(){return qn},qn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},qn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!qn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(qn.isPointInRing(t,i))return!1}return!0},qn.containsPoint=function(t,e){if(e instanceof $t)return qn.containsPointInPolygon(t,e);if(e instanceof qt)for(var n=new zn(e);n.hasNext();){var r=n.next();if(r!==e&&qn.containsPoint(t,r))return!0}return!1},qn.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:qn.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR};var Un=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]};Un.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=P.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ce.LEFT)!==P.NONE&&(e=r.getLocation(t,Ce.LEFT))}if(e===P.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ce.ON)===P.NONE&&s.setLocation(t,Ce.ON,i),s.isArea(t)){var u=s.getLocation(t,Ce.LEFT),l=s.getLocation(t,Ce.RIGHT);if(l!==P.NONE){if(l!==i)throw new Pe("side location conflict",a.getCoordinate());u===P.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Ce.LEFT)===P.NONE,"found single null side"),s.setLocation(t,Ce.RIGHT,i),s.setLocation(t,Ce.LEFT,i)}}},Un.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ce.LEFT);et.isTrue(r!==P.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ce.LEFT),u=a.getLocation(t,Ce.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Un.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new St(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=qn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new N;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===P.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=P.NONE;if(e[u])l=P.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new St;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ce.LEFT),r=t.getDepth(Ce.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Ce.RIGHT,a),a=u.getDepth(Ce.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=P.INTERIOR;break}if(r.isInResult()){t=P.EXTERIOR;break}}}if(t===P.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===P.INTERIOR):(a.isInResult()&&(i=P.EXTERIOR),s.isInResult()&&(i=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Le(P.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(i,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new De(t,new Vn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){var e=t;return Xn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xn.prototype.interfaces_=function(){return[w]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===Ot.increasingDirection(t)},Xn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var f=(u+=i)===a,h=(l+=o)===s;if(f&&!h)return-1;if(!f&&h)return 1;if(f&&h)return 0}};var Wn=function(){this._edges=new St,this._ocaMap=new f};Wn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Wn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Wn.prototype.iterator=function(){return this._edges.iterator()},Wn.prototype.getEdges=function(){return this._edges},Wn.prototype.get=function(t){return this._edges.get(t)},Wn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Wn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,r){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Zn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Zn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Zn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Zn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Zn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Zn.prototype.getLineIntersector=function(){return this._li},Zn.prototype.hasProperIntersection=function(){return this._hasProper},Zn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Zn.prototype.hasIntersection=function(){return this._hasIntersection},Zn.prototype.isDone=function(){return!1},Zn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Zn.prototype.interfaces_=function(){return[Hn]},Zn.prototype.getClass=function(){return Zn},Zn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n};Kn.prototype.getSegmentIndex=function(){return this.segmentIndex},Kn.prototype.getCoordinate=function(){return this.coord},Kn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kn.prototype.getDistance=function(){return this.dist},Kn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kn.prototype.interfaces_=function(){return[w]},Kn.prototype.getClass=function(){return Kn};var Qn=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};Qn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Qn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Qn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Qn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Qn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new E(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Le(this.edge._label))},Qn.prototype.add=function(t,e,n){var r=new Kn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Qn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new St;n.add(new A(e));do{var r=this.findChainEnd(t,e);n.add(new A(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],f=this.pts[o],h=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,f),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((s+u)/2);i<d&&(s<y&&this.computeIntersectsForChain(i,d,a,s,y,l),y<u&&this.computeIntersectsForChain(i,d,a,y,u,l)),d<o&&(s<y&&this.computeIntersectsForChain(d,o,a,s,y,l),y<u&&this.computeIntersectsForChain(d,o,a,y,u,l))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==P.EXTERIOR&&r!==P.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===P.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Le.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new E(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new N;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(je),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Le(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new St,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Rn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new St,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Me;i.create(r),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new xn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Zn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new An(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ve(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Le(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),n=t.getLocation(0,Ce.RIGHT);return e===P.INTERIOR&&n===P.EXTERIOR?1:e===P.EXTERIOR&&n===P.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ve,n=new St;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(M(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},ir.prototype.scale=function(){if(M(arguments[0],bt)){for(var t=arguments[0],e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new E(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Ot.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],f=arguments[1],h=arguments[2],p=arguments[3];if(c===h&&f===p)return null;var d=c.getCoordinates()[f],y=c.getCoordinates()[f+1],g=h.getCoordinates()[p],v=h.getCoordinates()[p+1];if(this._li.computeIntersection(d,y,g,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,g,v)))throw new $("found non-noded intersection at "+d+"-"+y+" and "+g+"-"+v)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ve},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new E(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var lr=function(){this.tempEnv1=new X,this.selectedSegment=new yn};lr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._index=null;var t=arguments[0];this._index=t},fr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new hr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ze]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},fr.HotPixelSnapAction.get=function(){return hr},Object.defineProperties(cr,fr);var hr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),pr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new St};pr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pr.prototype.isDone=function(){return!1},pr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pr.prototype.interfaces_=function(){return[Hn]},pr.prototype.getClass=function(){return pr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof q))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new pr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(M(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new xn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var yr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new En,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};yr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new pe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},yr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=yr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=yr.precisionScaleFactor(this._argGeom,this._distance,n),i=new pe(r);this.bufferFixedPrecision(i)}},yr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},yr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},yr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},yr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},yr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new yr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new yr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof En&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new yr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new yr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},yr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=T.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},gr.CAP_ROUND.get=function(){return En.CAP_ROUND},gr.CAP_BUTT.get=function(){return En.CAP_FLAT},gr.CAP_FLAT.get=function(){return En.CAP_FLAT},gr.CAP_SQUARE.get=function(){return En.CAP_SQUARE},gr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(yr,gr);var vr=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};vr.prototype.getCoordinates=function(){return this._pt},vr.prototype.getCoordinate=function(t){return this._pt[t]},vr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},vr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},vr.prototype.getDistance=function(){return this._distance},vr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.computeDistance=function(){if(arguments[2]instanceof vr&&arguments[0]instanceof Zt&&arguments[1]instanceof E)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new yn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof vr&&arguments[0]instanceof $t&&arguments[1]instanceof E){var a=arguments[0],s=arguments[1],u=arguments[2];mr.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)mr.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof vr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var c=arguments[0],f=arguments[1],h=arguments[2];if(c instanceof Zt)mr.computeDistance(c,f,h);else if(c instanceof $t)mr.computeDistance(c,f,h);else if(c instanceof qt)for(var p=c,d=0;d<p.getNumGeometries();d++){var y=p.getGeometryN(d);mr.computeDistance(y,f,h)}else h.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof vr&&arguments[0]instanceof yn&&arguments[1]instanceof E){var g=arguments[1],v=arguments[2],m=arguments[0].closestPoint(g);v.setMinimum(m,g)}};var _r=function(t){this._maxPtDist=new vr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return wr},br.MaxMidpointDistanceFilter.get=function(){return xr},Object.defineProperties(_r,br);var wr=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};wr.prototype.filter=function(t){this._minPtDist.initialize(),mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[pt]},wr.prototype.getClass=function(){return wr};var xr=function(t){this._maxPtDist=new vr,this._minPtDist=new vr,this._geom=t||null};xr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.isDone=function(){return!1},xr.prototype.isGeometryChanged=function(){return!1},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[zt]},xr.prototype.getClass=function(){return xr};var Sr=function(t){this._comps=t||null};Sr.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Sr.prototype.interfaces_=function(){return[Gt]},Sr.prototype.getClass=function(){return Sr},Sr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Sr.getPolygons(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof qt&&e.apply(new Sr(n)),n}};var Er=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Er.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Zt&&this._lines.add(t)},Er.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Er.prototype.interfaces_=function(){return[lt]},Er.prototype.getClass=function(){return Er},Er.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Er.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Er.getLines(e,n))}},Er.getLines=function(){if(1===arguments.length){var t=arguments[0];return Er.getLines(t,!1)}if(2===arguments.length){if(M(arguments[0],bt)&&M(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Er.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new St;return i.apply(new Er(a,o)),a}if(arguments[0]instanceof ct&&M(arguments[1],bt)){var s=arguments[0],u=arguments[1];return s instanceof Zt?u.add(s):s.apply(new Er(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&M(arguments[0],bt)&&M(arguments[1],bt)){for(var l=arguments[1],c=arguments[2],f=arguments[0].iterator();f.hasNext();){var h=f.next();Er.getLines(h,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&M(arguments[1],bt)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Er(p,d)),p}}};var Cr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};Cr.prototype.locateInternal=function(){if(arguments[0]instanceof E&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return P.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===P.EXTERIOR)return P.EXTERIOR;if(r===P.BOUNDARY)return P.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===P.INTERIOR)return P.EXTERIOR;if(a===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof Zt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return P.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?st.isOnLine(s,l)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof Qt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?P.INTERIOR:P.EXTERIOR}},Cr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},Cr.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},Cr.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},Cr.prototype.computeLocation=function(t,e){if(e instanceof Qt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Zt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ut)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof qt)for(var u=new zn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Cr.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Zt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Or=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Ir={INSIDE_AREA:{configurable:!0}};Or.prototype.isInsideArea=function(){return this._segIndex===Or.INSIDE_AREA},Or.prototype.getCoordinate=function(){return this._pt},Or.prototype.getGeometryComponent=function(){return this._component},Or.prototype.getSegmentIndex=function(){return this._segIndex},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Ir.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Or,Ir);var Pr=function(t){this._pts=t||null};Pr.prototype.filter=function(t){t instanceof Qt&&this._pts.add(t)},Pr.prototype.interfaces_=function(){return[Gt]},Pr.prototype.getClass=function(){return Pr},Pr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Qt?$e.singletonList(t):Pr.getPoints(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof qt&&e.apply(new Pr(n)),n}};var kr=function(){this._locations=null;var t=arguments[0];this._locations=t};kr.prototype.filter=function(t){(t instanceof Qt||t instanceof Zt||t instanceof $t)&&this._locations.add(new Or(t,0,t.getCoordinate()))},kr.prototype.interfaces_=function(){return[Gt]},kr.prototype.getClass=function(){return kr},kr.getLocations=function(t){var e=new St;return t.apply(new kr(e)),e};var Mr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Cr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Mr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Sr.getPolygons(this._geom[e]);if(i.size()>0){var o=kr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&M(arguments[0],xt)&&M(arguments[1],xt)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),f=0;f<s.size();f++)if(this.computeContainmentDistance(c,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Or&&arguments[1]instanceof $t){var h=arguments[0],p=arguments[1],d=arguments[2],y=h.getCoordinate();if(P.EXTERIOR!==this._ptLocator.locate(y,p))return this._minDistance=0,d[0]=h,d[1]=new Or(p,y),null}},Mr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Er.getLines(this._geom[0]),n=Er.getLines(this._geom[1]),r=Pr.getPoints(this._geom[0]),i=Pr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Mr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Mr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Mr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Mr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new yn(r[o],r[o+1]).closestPoint(i);n[0]=new Or(t,o,s),n[1]=new Or(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Zt){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),h=l.getCoordinates(),p=0;p<f.length-1;p++)for(var d=0;d<h.length-1;d++){var y=st.distanceLineLine(f[p],f[p+1],h[d],h[d+1]);if(y<this._minDistance){this._minDistance=y;var g=new yn(f[p],f[p+1]),v=new yn(h[d],h[d+1]),m=g.closestPoints(v);c[0]=new Or(u,p,m[0]),c[1]=new Or(l,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Mr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Or(i,0,i.getCoordinate()),n[1]=new Or(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Mr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Mr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.distance=function(t,e){return new Mr(t,e).distance()},Mr.isWithinDistance=function(t,e,n){return new Mr(t,e,n).distance()<=n},Mr.nearestPoints=function(t,e){return new Mr(t,e).nearestPoints()};var Tr=function(){this._pt=[new E,new E],this._distance=_.NaN,this._isNull=!0};Tr.prototype.getCoordinates=function(){return this._pt},Tr.prototype.getCoordinate=function(t){return this._pt[t]},Tr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Tr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Tr.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Tr.prototype.getDistance=function(){return this._distance},Tr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var Lr=function(){};Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.computeDistance=function(){if(arguments[2]instanceof Tr&&arguments[0]instanceof Zt&&arguments[1]instanceof E)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new yn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Tr&&arguments[0]instanceof $t&&arguments[1]instanceof E){var s=arguments[0],u=arguments[1],l=arguments[2];Lr.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Lr.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Tr&&arguments[0]instanceof ct&&arguments[1]instanceof E){var f=arguments[0],h=arguments[1],p=arguments[2];if(f instanceof Zt)Lr.computeDistance(f,h,p);else if(f instanceof $t)Lr.computeDistance(f,h,p);else if(f instanceof qt)for(var d=f,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Lr.computeDistance(g,h,p)}else p.setMinimum(f.getCoordinate(),h)}else if(arguments[2]instanceof Tr&&arguments[0]instanceof yn&&arguments[1]instanceof E){var v=arguments[1],m=arguments[2],_=arguments[0].closestPoint(v);m.setMinimum(_,v)}};var Nr=function(){this._g0=null,this._g1=null,this._ptDist=new Tr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ar={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Nr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Nr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Nr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Nr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Nr.prototype.computeOrientedDistance=function(t,e,n){var r=new Rr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new jr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Nr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.distance=function(){if(2===arguments.length)return new Nr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Nr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Ar.MaxPointDistanceFilter.get=function(){return Rr},Ar.MaxDensifiedByFractionDistanceFilter.get=function(){return jr},Object.defineProperties(Nr,Ar);var Rr=function(){this._maxPtDist=new Tr,this._minPtDist=new Tr,this._euclideanDist=new Lr,this._geom=null;var t=arguments[0];this._geom=t};Rr.prototype.filter=function(t){this._minPtDist.initialize(),Lr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rr.prototype.interfaces_=function(){return[pt]},Rr.prototype.getClass=function(){return Rr};var jr=function(){this._maxPtDist=new Tr,this._minPtDist=new Tr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};jr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new E(s,u);this._minPtDist.initialize(),Lr.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},jr.prototype.isDone=function(){return!1},jr.prototype.isGeometryChanged=function(){return!1},jr.prototype.getMaxPointDistance=function(){return this._maxPtDist},jr.prototype.interfaces_=function(){return[zt]},jr.prototype.getClass=function(){return jr};var Dr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Dr.prototype.checkMaximumDistance=function(t,e,n){var r=new Nr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},Dr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Dr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Dr.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Dr.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof qt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Dr.prototype.getErrorIndicator=function(){return this._errorIndicator},Dr.prototype.checkMinimumDistance=function(t,e,n){var r=new Mr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},Dr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Dr.prototype.getErrorLocation=function(){return this._errorLocation},Dr.prototype.getPolygonLines=function(t){for(var e=new St,n=new Er(e),r=Sr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Dr.prototype.getErrorMessage=function(){return this._errMsg},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Fr.VERBOSE.get=function(){return!1},Fr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Dr,Fr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Dr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,Gr);var zr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};zr.prototype.getCoordinates=function(){return this._pts},zr.prototype.size=function(){return this._pts.length},zr.prototype.getCoordinate=function(t){return this._pts[t]},zr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},zr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:fn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},zr.prototype.setData=function(t){this._data=t},zr.prototype.getData=function(){return this._data},zr.prototype.toString=function(){return J.toLineString(new ue(this._pts))},zr.prototype.interfaces_=function(){return[hn]},zr.prototype.getClass=function(){return zr};var qr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new St,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};qr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},qr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},qr.prototype.getIntersectionSegments=function(){return this._intSegments},qr.prototype.count=function(){return this._intersectionCount},qr.prototype.getIntersections=function(){return this._intersections},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},qr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},qr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},qr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},qr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},qr.prototype.interfaces_=function(){return[Hn]},qr.prototype.getClass=function(){return qr},qr.createAllIntersectionsFinder=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e},qr.createAnyIntersectionFinder=function(t){return new qr(t)},qr.createIntersectionCounter=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ur=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ur.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ur.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ur.prototype.isValid=function(){return this.execute(),this._isValid},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new qr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new xn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ur.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ur.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.computeIntersections=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vr=function t(){this._nv=null;var e=arguments[0];this._nv=new Ur(t.toSegmentStrings(e))};Vr.prototype.checkValid=function(){this._nv.checkValid()},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.toSegmentStrings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new zr(r.getCoordinates(),r))}return e},Vr.checkValid=function(t){new Vr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new St,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ve.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Xr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new St,this._resultLineList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Oi.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Oi.isResultOfOp(r,e)&&e===Oi.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Wr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new St;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Wr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Wr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Oi.INTERSECTION)){var r=n.getLabel();Oi.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Wr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Hr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new St,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new St;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Hr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hr.prototype.getInputGeometry=function(){return this._inputGeom},Hr.prototype.transformMultiLineString=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformMultiPoint=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformMultiPolygon=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.copy=function(t){return t.copy()},Hr.prototype.transformGeometryCollection=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ve.toGeometryArray(n)):this._factory.buildGeometry(n)},Hr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Qt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Zt)return this.transformLineString(t,null);if(t instanceof Ut)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof qt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Hr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Zr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new yn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Zt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Zr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new E(o)),0===r&&this._isClosed&&t.set(t.size()-1,new E(o)))}},Zr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Zr.prototype.snapTo=function(t){var e=new Ct(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new E(i),!1)}},Zr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Zr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Kr=function(t){this._srcGeom=t||null},Qr={SNAP_PRECISION_FACTOR:{configurable:!0}};Kr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},Kr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&M(i,Jt)&&(i=r.buffer(0)),i},Kr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kr.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Kr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Kr(t);r[0]=i.snapTo(e,n);var o=new Kr(e);return r[1]=o.snapTo(r[0],n),r},Kr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Kr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Kr.computeOverlaySnapTolerance(i),Kr.computeOverlaySnapTolerance(o))}},Kr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kr.SNAP_PRECISION_FACTOR},Kr.snapToSelf=function(t,e,n){return new Kr(t).snapToSelf(e,n)},Qr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kr,Qr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Zr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),$r=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$r.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},$r.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$r.signExpBits(this._commonBits),this._isFirst=!1,null):$r.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$r.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$r.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$r.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.getBit=function(t,e){return t&1<<e?1:0},$r.signExpBits=function(t){return t>>52},$r.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$r.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($r.getBit(t,r)!==$r.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new E(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new $r,this._commonBitsY=new $r};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[pt]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[zt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Kr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Oi.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Kr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Oi.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Oi.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Oi.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Oi.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Oi.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Oi.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Oi.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Oi.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Oi.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[w]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fi=function(t){function e(){t.call(this),this.events=new St,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&M(arguments[0],xt)&&M(arguments[1],xt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&M(arguments[0],xt)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),hi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};hi.prototype.getMin=function(){return this._min},hi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hi.prototype.getMax=function(){return this._max},hi.prototype.toString=function(){return J.toLineString(new E(this._min,0),new E(this._max,0))},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},pi.NodeComparator.get=function(){return di},Object.defineProperties(hi,pi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[S]},di.prototype.getClass=function(){return di};var yi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hi),gi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hi),vi=function(){this._leaves=new St,this._root=null,this._level=0};vi.prototype.buildTree=function(){$e.sort(this._leaves,new hi.NodeComparator);for(var t=this._leaves,e=null,n=new St;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new yi(t,e,n))},vi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},vi.prototype.printNode=function(t){V.out.println(J.toLineString(new E(t._min,this._level),new E(t._max,this._level)))},vi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},vi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new gi(t.get(n),t.get(n+1));e.add(i)}}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var mi=function(){this._items=new St};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[Ze]},mi.prototype.getClass=function(){return mi};var _i=function(){this._index=null;var t=arguments[0];if(!M(t,Jt))throw new m("Argument must be Polygonal");this._index=new xi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new wi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Gn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return wi},bi.IntervalIndexedGeometry.get=function(){return xi},Object.defineProperties(_i,bi);var wi=function(){this._counter=null;var t=arguments[0];this._counter=t};wi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},wi.prototype.interfaces_=function(){return[Ze]},wi.prototype.getClass=function(){return wi};var xi=function(){this._index=new vi;var t=arguments[0];this.init(t)};xi.prototype.init=function(t){for(var e=Er.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},xi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new yn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},xi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var Si=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new he,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Cr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;P.NONE,r.getLocation(t,Ce.ON)===P.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Qt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof E){var e=arguments[0];this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ot.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Le(this._argIndex,P.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Ot.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Le(this._argIndex,P.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Le(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Zt)this.addLineString(e);else if(e instanceof Qt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ut)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof qt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return M(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(Ve),Ei=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Si(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,e,r),this._arg[1]=new Si(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,i,a),this._arg[1]=new Si(1,o,a)}};Ei.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ei.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Ci=function(){};Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.map=function(){if(arguments[0]instanceof ct&&M(arguments[1],Ci.MapOp)){for(var t=arguments[0],e=arguments[1],n=new St,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(M(arguments[0],bt)&&M(arguments[1],Ci.MapOp)){for(var o=arguments[0],a=arguments[1],s=new St,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Ci.MapOp=function(){};var Oi=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Cr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wn,this._resultPolyList=new St,this._resultLineList=new St,this._resultPointList=new St,this._graph=new Ve(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Le(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new St;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new St,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new St;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Wr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ce.RIGHT),i.getLocation(1,Ce.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ce.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ce.LEFT,r.getLocation(i,Ce.LEFT)),et.isTrue(!r.isNull(i,Ce.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ce.RIGHT,r.getLocation(i,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ei);Oi.overlayOp=function(t,e,n){return new Oi(t,e).getResultGeometry(n)},Oi.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Oi.createEmptyResult(Oi.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ci.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Oi.INTERSECTION)},Oi.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Oi.createEmptyResult(Oi.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Oi.SYMDIFFERENCE)},Oi.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Oi.INTERSECTION:o=Math.min(r,i);break;case Oi.UNION:o=Math.max(r,i);break;case Oi.DIFFERENCE:o=r;break;case Oi.SYMDIFFERENCE:o=Math.max(r,i)}return o},Oi.createEmptyResult=function(t,e,n,r){var i=null;switch(Oi.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Oi.difference=function(t,e){return t.isEmpty()?Oi.createEmptyResult(Oi.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Oi.DIFFERENCE))},Oi.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Oi.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===P.BOUNDARY&&(i=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),a){case Oi.INTERSECTION:return i===P.INTERIOR&&o===P.INTERIOR;case Oi.UNION:return i===P.INTERIOR||o===P.INTERIOR;case Oi.DIFFERENCE:return i===P.INTERIOR&&o!==P.INTERIOR;case Oi.SYMDIFFERENCE:return i===P.INTERIOR&&o!==P.INTERIOR||i!==P.INTERIOR&&o===P.INTERIOR}return!1}},Oi.INTERSECTION=1,Oi.UNION=2,Oi.DIFFERENCE=3,Oi.SYMDIFFERENCE=4;var Ii=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Cr,this._seg=new yn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ii.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ii.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Ii.prototype.extractLinework=function(t){var e=new Pi;t.apply(e);var n=e.getLinework(),r=ve.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var Pi=function(){this._linework=null,this._linework=new St};Pi.prototype.getLinework=function(){return this._linework},Pi.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pi.prototype.interfaces_=function(){return[Gt]},Pi.prototype.getClass=function(){return Pi};var ki=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};ki.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},ki.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},ki.prototype.getPoints=function(t){for(var e=new St,n=Er.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},ki.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var f=new E(l-u,c+s);r.add(f)}if(this._doRight){var h=new E(l+u,c-s);r.add(h)}},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki};var Mi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new St;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ii(this._geom[0],this._boundaryDistanceTolerance),new Ii(this._geom[1],this._boundaryDistanceTolerance),new Ii(this._geom[2],this._boundaryDistanceTolerance)]},Ti={TOLERANCE:{configurable:!0}};Mi.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},Mi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Mi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Mi.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(r,this._location)}},Mi.prototype.addTestPts=function(t){var e=new ki(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Mi.prototype.isValidResult=function(t,e){var n=Oi.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===P.INTERIOR);return r||this.reportResult(t,e,n),r},Mi.prototype.getInvalidLocation=function(){return this._invalidLocation},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Mi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kr.computeSizeBasedSnapTolerance(t),Kr.computeSizeBasedSnapTolerance(e))},Mi.isValid=function(t,e,n,r){return new Mi(t,e,r).isValid(n)},Ti.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Mi,Ti);var Li=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Li.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Li.prototype.combine=function(){for(var t=new St,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.combine=function(){if(1===arguments.length)return new Li(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Li(Li.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Li(Li.createList(n,r,i)).combine()}},Li.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Li.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new St;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new St;return a.add(r),a.add(i),a.add(o),a}};var Ni=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new St)},Ai={STRTREE_NODE_CAPACITY:{configurable:!0}};Ni.prototype.reduceToGeometries=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next(),i=null;M(r,xt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Ni.prototype.extractByEnvelope=function(t,e,n){for(var r=new St,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ni.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Li.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ni.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Ni.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ni.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ni.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ni.getGeometry(e,n),Ni.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Ni.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ni.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ni.prototype.unionActual=function(t,e){return Ni.restrictToPolygons(t.union(e))},Ni.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ni.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new St,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Li.combine(r)},Ni.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.restrictToPolygons=function(t){if(M(t,Jt))return t;var e=Sr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ve.toPolygonArray(e))},Ni.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ni.union=function(t){return new Ni(t).union()},Ai.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ni,Ai);var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Oi.createEmptyResult(Oi.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Oi.UNION)},t.GeoJSONReader=Se,t.GeoJSONWriter=Ee,t.OverlayOp=Oi,t.UnionOp=Ri,t.BufferOp=yr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},384:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},5955:(t,e,n)=>{"use strict";var r=n(2584),i=n(8662),o=n(6430),a=n(5692);function s(t){return t.call.bind(t)}var u="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,c=s(Object.prototype.toString),f=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(u)var d=s(BigInt.prototype.valueOf);if(l)var y=s(Symbol.prototype.valueOf);function g(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function v(t){return"[object Map]"===c(t)}function m(t){return"[object Set]"===c(t)}function _(t){return"[object WeakMap]"===c(t)}function b(t){return"[object WeakSet]"===c(t)}function w(t){return"[object ArrayBuffer]"===c(t)}function x(t){return"undefined"!=typeof ArrayBuffer&&(w.working?w(t):t instanceof ArrayBuffer)}function S(t){return"[object DataView]"===c(t)}function E(t){return"undefined"!=typeof DataView&&(S.working?S(t):t instanceof DataView)}e.isArgumentsObject=r,e.isGeneratorFunction=i,e.isTypedArray=a,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):a(t)||E(t)},e.isUint8Array=function(t){return"Uint8Array"===o(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===o(t)},e.isUint16Array=function(t){return"Uint16Array"===o(t)},e.isUint32Array=function(t){return"Uint32Array"===o(t)},e.isInt8Array=function(t){return"Int8Array"===o(t)},e.isInt16Array=function(t){return"Int16Array"===o(t)},e.isInt32Array=function(t){return"Int32Array"===o(t)},e.isFloat32Array=function(t){return"Float32Array"===o(t)},e.isFloat64Array=function(t){return"Float64Array"===o(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===o(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===o(t)},v.working="undefined"!=typeof Map&&v(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(v.working?v(t):t instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(m.working?m(t):t instanceof Set)},_.working="undefined"!=typeof WeakMap&&_(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(_.working?_(t):t instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),e.isWeakSet=function(t){return b(t)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),e.isArrayBuffer=x,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=E;var C="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(t){return"[object SharedArrayBuffer]"===c(t)}function I(t){return void 0!==C&&(void 0===O.working&&(O.working=O(new C)),O.working?O(t):t instanceof C)}function P(t){return g(t,f)}function k(t){return g(t,h)}function M(t){return g(t,p)}function T(t){return u&&g(t,d)}function L(t){return l&&g(t,y)}e.isSharedArrayBuffer=I,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===c(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===c(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===c(t)},e.isGeneratorObject=function(t){return"[object Generator]"===c(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===c(t)},e.isNumberObject=P,e.isStringObject=k,e.isBooleanObject=M,e.isBigIntObject=T,e.isSymbolObject=L,e.isBoxedPrimitive=function(t){return P(t)||k(t)||M(t)||T(t)||L(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(x(t)||I(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},9539:(t,e,n)=>{var r=n(4155),i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},o=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(l(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),s=r[n];n<i;s=r[++n])v(s)||!x(s)?a+=" "+s:a+=" "+l(s);return a},e.deprecate=function(t,n){if(void 0!==r&&!0===r.noDeprecation)return t;if(void 0===r)return function(){return e.deprecate(t,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),i=!0}return t.apply(this,arguments)}};var a={},s=/^$/;if(r.env.NODE_DEBUG){var u=r.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+u+"$","i")}function l(t,n){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),h(r,t,r.depth)}function c(t,e){var n=l.styles[e];return n?"["+l.colors[n][0]+"m"+t+"["+l.colors[n][1]+"m":t}function f(t,e){return t}function h(t,n,r){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return _(i)||(i=h(t,i,r)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(m(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(C(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return p(n)}var l,c="",f=!1,x=["{","}"];(y(n)&&(f=!0,x=["[","]"]),C(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(c=" "+RegExp.prototype.toString.call(n)),S(n)&&(c=" "+Date.prototype.toUTCString.call(n)),E(n)&&(c=" "+p(n)),0!==a.length||f&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=f?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)k(e,String(a))?o.push(d(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(t,e,n,r,i,!0))})),o}(t,n,r,s,a):a.map((function(e){return d(t,n,r,s,e,f)})),t.seen.pop(),function(t,e,n){var r=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,c,x)):x[0]+c+x[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),k(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=v(n)?h(t,u.value,null):h(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function y(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return void 0===t}function w(t){return x(t)&&"[object RegExp]"===O(t)}function x(t){return"object"==typeof t&&null!==t}function S(t){return x(t)&&"[object Date]"===O(t)}function E(t){return x(t)&&("[object Error]"===O(t)||t instanceof Error)}function C(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(s.test(t)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=n(5955),e.isArray=y,e.isBoolean=g,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=_,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=w,e.types.isRegExp=w,e.isObject=x,e.isDate=S,e.types.isDate=S,e.isError=E,e.types.isNativeError=E,e.isFunction=C,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(384);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":"),[t.getDate(),P[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(5717),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(M&&t[M]){var e;if("function"!=typeof(e=t[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),M&&Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=M,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,e).then((function(t){r.nextTick(a.bind(null,null,t))}),(function(t){r.nextTick(T.bind(null,t,a))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,i(t)),e}},6430:(t,e,n)=>{"use strict";var r=n(4029),i=n(3083),o=n(5559),a=n(1924),s=n(7296),u=a("Object.prototype.toString"),l=n(6410)(),c="undefined"==typeof globalThis?n.g:globalThis,f=i(),h=a("String.prototype.slice"),p=Object.getPrototypeOf,d=a("Array.prototype.indexOf",!0)||function(t,e){for(var n=0;n<t.length;n+=1)if(t[n]===e)return n;return-1},y={__proto__:null};r(f,l&&s&&p?function(t){var e=new c[t];if(Symbol.toStringTag in e){var n=p(e),r=s(n,Symbol.toStringTag);if(!r){var i=p(n);r=s(i,Symbol.toStringTag)}y["$"+t]=o(r.get)}}:function(t){var e=new c[t],n=e.slice||e.set;n&&(y["$"+t]=o(n))});t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!l){var e=h(u(t),8,-1);return d(f,e)>-1?e:"Object"===e&&function(t){var e=!1;return r(y,(function(n,r){if(!e)try{n(t),e=h(r,1)}catch(t){}})),e}(t)}return s?function(t){var e=!1;return r(y,(function(n,r){if(!e)try{"$"+n(t)===r&&(e=h(r,1))}catch(t){}})),e}(t):null}},4914:t=>{"use strict";t.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik0wIDgyNC4zMmMwLTEzLjMxMiAyLjA0OC0yNi42MjQgOC4xOTItMzguOTEyIDE4LjQzMi0zMy43OTIgNDUuMDU2LTU0LjI3MiA4My45NjgtNTQuMjcyIDMxLjc0NCAxLjAyNCA2My40ODggMCA5NS4yMzIgMCAzLjA3MiAwIDUuMTItMS4wMjQgNy4xNjgtNC4wOTYgMTcuNDA4LTI4LjY3MiAzNC44MTYtNTguMzY4IDUyLjIyNC04OC4wNjQgMi4wNDgtMy4wNzIgMi4wNDgtNC4wOTYgMC03LjE2OC0xOC40MzItMTkuNDU2LTI2LjYyNC00MS45ODQtMjYuNjI0LTY4LjYwOC0xLjAyNC0zMy43OTItMS4wMjQtNjguNjA4IDAtMTAzLjQyNCAwLTI1LjYgOC4xOTItNDkuMTUyIDI1LjYtNjguNjA4IDMuMDcyLTIuMDQ4IDMuMDcyLTQuMDk2IDEuMDI0LTcuMTY4LTE3LjQwOC0yOS42OTYtMzQuODE2LTU4LjM2OC01Mi4yMjQtODguMDY0LTIuMDQ4LTMuMDcyLTQuMDk2LTQuMDk2LTcuMTY4LTQuMDk2LTMxLjc0NCAwLTYyLjQ2NCAwLTk0LjIwOCAwLTEwLjI0IDAtMjEuNTA0LTIuMDQ4LTMwLjcyLTUuMTItMjkuNjk2LTkuMjE2LTYzLjQ4OC00My4wMDgtNjIuNDY0LTg4LjA2NCAxLjAyNC0zNC44MTYgMC02OS42MzIgMC0xMDQuNDQ4IDEuMDI0LTExLjI2NCAyLjA0OC0yMS41MDQgNS4xMi0zMi43NjggNS4xMi0xNi4zODQgMTYuMzg0LTI5LjY5NiAyOS42OTYtNDAuOTYgMTQuMzM2LTEyLjI4OCAzMC43Mi0xOS40NTYgNTAuMTc2LTE5LjQ1NiA0MC45Ni0xLjAyNCA4MS45Mi0xLjAyNCAxMjMuOTA0IDAgMzUuODQgMCA2Ny41ODQgMzEuNzQ0IDc3LjgyNCA1OC4zNjggNi4xNDQgMTMuMzEyIDYuMTQ0IDI3LjY0OCA2LjE0NCA0MS45ODQgMCAzLjA3MiAwIDUuMTIgMCA4LjE5MmgzOTEuMTY4bC03My43MjggNzMuNzI4aC0zMTcuNDRjMCAzLjA3MiAwIDcuMTY4IDAgMTAuMjQgMCAyOC42NzItOC4xOTIgNTMuMjQ4LTI3LjY0OCA3My43MjgtMi4wNDggMi4wNDgtMi4wNDggMy4wNzItMS4wMjQgNS4xMiAxOC40MzIgMzAuNzIgMzYuODY0IDYwLjQxNiA1NC4yNzIgOTEuMTM2IDEuMDI0IDEuMDI0IDQuMDk2IDIuMDQ4IDYuMTQ0IDIuMDQ4IDMxLjc0NCAwIDYyLjQ2NCAwIDk0LjIwOCAwIDI1LjYgMCA0Ni4wODAgOC4xOTIgNjIuNDY0IDIzLjU1MiA4LjE5MiA4LjE5MiAxNi4zODQgMTguNDMyIDIyLjUyOCAzMC43MnM4LjE5MiAyNS42IDguMTkyIDM4LjkxMmMwIDI5LjY5Ni0xLjAyNCA1OC4zNjggMCA4OC4wNjQgMCA2LjE0NCAwIDEyLjI4OCAwIDE4LjQzMiAxLjAyNCA0NS4wNTYtMzIuNzY4IDc4Ljg0OC02Mi40NjQgODguMDY0LTkuMjE2IDMuMDcyLTIwLjQ4IDQuMDk2LTMwLjcyIDUuMTItMzEuNzQ0IDAtNjIuNDY0IDAtOTQuMjA4IDAtMy4wNzIgMC01LjEyIDEuMDI0LTYuMTQ0IDMuMDcyLTE3LjQwOCAyOS42OTYtMzUuODQgNTkuMzkyLTUzLjI0OCA4OS4wODgtMi4wNDggMy4wNzItMi4wNDggNC4wOTYgMS4wMjQgNy4xNjggMTcuNDA4IDE4LjQzMiAyNS42IDQxLjk4NCAyNi42MjQgNjcuNTg0IDAgNS4xMiAwIDEwLjI0IDAgMTUuMzZoNDM5LjI5NmMwLTYuMTQ0IDAtMTIuMjg4IDAtMTguNDMyLTEuMDI0LTQxLjk4NCAzMi43NjgtNzUuNzc2IDYxLjQ0LTg2LjAxNiAxMC4yNC0zLjA3MiAyMC40OC00LjA5NiAzMC43Mi00LjA5NiA2LjE0NCAwIDExLjI2NCAwIDE3LjQwOCAwdi0zMTguNDY0bDczLjcyOC03My43Mjh2MzkyLjE5MmM1LjEyIDAgMTEuMjY0IDAgMTYuMzg0IDAgMTAuMjQgMCAyMC40OCAxLjAyNCAzMC43MiA0LjA5NiAzMC43MiAxMS4yNjQgNjIuNDY0IDQ0LjAzMiA2MS40NCA4OC4wNjQgMCAzNS44NCAxLjAyNCA3MC42NTYgMCAxMDYuNDk2IDAgMTEuMjY0LTIuMDQ4IDIxLjUwNC01LjEyIDMxLjc0NC0xMC4yNCAyOS42OTYtNDMuMDA4IDYyLjQ2NC04OC4wNjQgNjEuNDQtMzUuODQtMS4wMjQtNzAuNjU2IDAtMTA1LjQ3MiAwLTcuMTY4IDAtMTUuMzYtMS4wMjQtMjIuNTI4LTIuMDQ4LTI0LjU3Ni01LjEyLTQxLjk4NC0yMC40OC01Ni4zMi00MC45Ni0xMS4yNjQtMTQuMzM2LTE0LjMzNi0zMC43Mi0xNC4zMzYtNDkuMTUyIDAtNS4xMiAwLTExLjI2NCAwLTE3LjQwOGgtNDM5LjI5NmMwIDQuMDk2IDAgOC4xOTIgMCAxMS4yNjQgMCAxMi4yODgtMS4wMjQgMjQuNTc2LTUuMTIgMzYuODY0LTEwLjI0IDI5LjY5Ni00NC4wMzIgNjIuNDY0LTg4LjA2NCA2MS40NC0zNS44NC0xLjAyNC03MC42NTYgMC0xMDYuNDk2IDAtMTAuMjQgMC0yMC40OC0yLjA0OC0yOS42OTYtNC4wOTYtMzEuNzQ0LTEwLjI0LTY0LjUxMi00NS4wNTYtNjMuNDg4LTg5LjA4OCAxLjAyNC0zNS44NCAwLTcwLjY1NiAwLTEwNi40OTZ6TTIyMC4xNiA5NC4yMDhjMC0xMy4zMTItOS4yMTYtMjEuNTA0LTIxLjUwNC0yMS41MDQtMTcuNDA4IDAtMzQuODE2IDAtNTIuMjI0IDBzLTM0LjgxNiAwLTUyLjIyNCAwYy0xMi4yODggMC0yMC40OCA5LjIxNi0yMC40OCAyMS41MDQgMCAzNC44MTYgMCA2OS42MzIgMCAxMDQuNDQ4IDAgMTIuMjg4IDguMTkyIDIxLjUwNCAyMC40OCAyMS41MDQgMzQuODE2IDAgNjkuNjMyIDAgMTA0LjQ0OCAwIDEyLjI4OCAwIDIxLjUwNC05LjIxNiAyMS41MDQtMjEuNTA0IDAtMzQuODE2IDAtNjkuNjMyIDAtMTA0LjQ0OHpNMjkyLjg2NCA1NjMuMmMwIDEzLjMxMiA4LjE5MiAyMS41MDQgMjEuNTA0IDIxLjUwNCAzMy43OTIgMCA2OC42MDggMCAxMDIuNCAwIDE0LjMzNiAwIDIyLjUyOC04LjE5MiAyMi41MjgtMjEuNTA0IDAtMzMuNzkyIDAtNjguNjA4IDAtMTAyLjQgMC0xNC4zMzYtOC4xOTItMjIuNTI4LTIxLjUwNC0yMi41MjgtMTcuNDA4IDAtMzQuODE2IDAtNTIuMjI0IDBzLTM0LjgxNiAwLTUyLjIyNCAwYy0xMy4zMTIgMC0yMS41MDQgOC4xOTItMjEuNTA0IDIyLjUyOCAxLjAyNCAzMy43OTIgMS4wMjQgNjguNjA4IDEuMDI0IDEwMi40ek04MDQuODY0IDkyOS43OTJjMCAxMy4zMTIgOC4xOTIgMjEuNTA0IDIwLjQ4IDIxLjUwNCAzNC44MTYgMCA2OS42MzIgMCAxMDQuNDQ4IDAgMTMuMzEyIDAgMjEuNTA0LTkuMjE2IDIxLjUwNC0yMS41MDQgMC0xNy40MDggMC0zNC44MTYgMC01Mi4yMjRzMC0zNC44MTYgMC01Mi4yMjRjMC0xMi4yODgtOC4xOTItMjEuNTA0LTIxLjUwNC0yMS41MDQtMzQuODE2IDAtNjkuNjMyIDAtMTA0LjQ0OCAwLTEyLjI4OCAwLTIwLjQ4IDkuMjE2LTIwLjQ4IDIxLjUwNC0xLjAyNCAzNC44MTYtMS4wMjQgNjkuNjMyIDAgMTA0LjQ0OHpNNzMuNzI4IDkyOS43OTJjMCAxMy4zMTIgOC4xOTIgMjEuNTA0IDIwLjQ4IDIxLjUwNCAzNC44MTYgMCA2OS42MzIgMCAxMDQuNDQ4IDAgMTIuMjg4IDAgMjEuNTA0LTguMTkyIDIxLjUwNC0yMS41MDQgMC0zNC44MTYgMC02OS42MzIgMC0xMDQuNDQ4IDAtMTIuMjg4LTkuMjE2LTIxLjUwNC0yMS41MDQtMjEuNTA0LTM0LjgxNiAwLTY5LjYzMiAwLTEwNC40NDggMC0xMi4yODggMC0yMC40OCA5LjIxNi0yMC40OCAyMS41MDQgMCAxNy40MDggMCAzNC44MTYgMCA1Mi4yMjRzLTEuMDI0IDM0LjgxNiAwIDUyLjIyNHpNODk3LjAyNCAxNi4zODRsLTQxLjk4NCA0MC45NiAxMTEuNjE2IDExMS42MTYgNDAuOTYtNDEuOTg0YzIxLjUwNC0yMS41MDQgMjEuNTA0LTU2LjMyIDAtNzYuOGwtMzMuNzkyLTMzLjc5MmMtMjAuNDgtMjEuNTA0LTU1LjI5Ni0yMS41MDQtNzYuOCAwdjB6TTgzNS41ODQgNzYuOGwtMTk5LjY4IDE5OS42OGMtOS4yMTYgOS4yMTYtMTUuMzYgMjAuNDgtMTguNDMyIDMxLjc0NGwtMzAuNzIgMTAzLjQyNGMtMi4wNDggNy4xNjggMCAxNS4zNiA1LjEyIDIwLjQ4czEzLjMxMiA3LjE2OCAyMC40OCA1LjEybDEwMi40LTMwLjcyYzEyLjI4OC0zLjA3MiAyMy41NTItMTAuMjQgMzIuNzY4LTE4LjQzMmwxOTkuNjgtMTk5LjY4LTExMS42MTYtMTExLjYxNnoiPjwvcGF0aD4KPC9zdmc+Cg=="},3083:(t,e,n)=>{"use strict";var r=n(9908),i="undefined"==typeof globalThis?n.g:globalThis;t.exports=function(){for(var t=[],e=0;e<r.length;e++)"function"==typeof i[r[e]]&&(t[t.length]=r[e]);return t}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function i(e,n,r){return n=a(n),function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,o()?Reflect.construct(n,r||[],a(e).constructor):n.apply(e,r))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}var u=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),i(this,n,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(n,M.impl.Control),r=n,(o=[{key:"addTo",value:function(t,e){this.map=t,this.olMap=t.getMapImpl()}}])&&e(r.prototype,o),a&&e(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}();const l=JSON.parse('{"exception":{"emptylayer":"The drawing layer is empty.","geometrianoencontrar":"Unrecognized geometry.","formatocoord":"The entered coordinates are not in the correct format.","introduzcoord":"Coordinates are not entered correctly.","errorfichero":"Error loading the file.","nodetectado":"No geometries have been detected in this file.","comprobar":"Error loading the file. Verify that this is the correct file.","insertado":"A permitted file extension has not been inserted. The allowed ones are: KML, SHP (.zip), GPX and GeoJSON.","maxfichero":"The selected file exceeds the maximum of 20 MB allowed","ficherosel":"Download format has not been selected.","query_profile":"The altitude data for this entity could not be queried.","featuresel":"No elements have been selected","topographic_one_element":"The topographic profile can only be made for a single element","typeLayer":"Layers of type MVT and MBTilesVector are not editable"},"help_template":{"title":"Help","addlayer_title":"Create layer","addlayer_content":"This tool adds a new vector layer to the map. Clicking on it opens a window in which you can enter the layer name.","selection_title":"Selection","selection_content":"Tool for selecting elements of the layer. There are several tools that work differently if this tool is active or not.","creation_title":"Creation","creation_content":"Tool to draw different types of geometries on the selected layer.","creation_content_1":"Point","creation_content_1_1":"Allows you to draw a point by clicking on the map.","creation_content_2":"Point by coordinates","creation_content_2_1":"Allows you to create a point by entering the coordinates.","creation_content_3":"Line","creation_content_3_1":"Allows you to draw a line on the map. One click draws a point or vertex, double click finishes the drawing.","creation_content_4":"Polygon","creation_content_4_1":"Allows you to draw a polygon on the map. One click draws a point or vertex, double click finishes the drawing.","creation_content_5":"Figure","creation_content_5_1":"Allows you to draw a regular or irregular shape on the map. One click sets the top left corner, a second click finishes the drawing.","creation_content_6":"Text","creation_content_6_1":"Allows you to write text at a point on the map.","edition_title":"Edition","edition_content":"Tool to edit the geometries of the layer elements.","edition_content_1":"Edit geometry","edition_content_1_1":"Allows you to edit the vertices of a geometry","edition_content_2":"Hole","edition_content_2_1":"Allows you to create a hole in an element. Only valid for polygons.","edition_content_3":"Rotation","edition_content_3_1":"Allows you to rotate the selected elements.","edition_content_4":"Scale","edition_content_4_1":"Allows scaling of selected elements.","edition_content_5":"Move","edition_content_5_1":"Allows you to move the selected elements.","edition_content_6":"Edit attributes","edition_content_6_1":"Allows you to edit the attributes of the layer or selected elements.","edition_content_7":"Clear","edition_content_7_1":"Allows you to delete all elements of the layer.","style_title":"Style editing","style_content":"Tool to edit the styles of the layer or selected elements. They are divided into styles for point, line or polygon.","analysis_title":"Analysis","analysis_content":"Tool for different geographic analyses.","analysis_content_1":"Topographic profile","analysis_content_1_1":"Allows you to display a graph that represents the relief of the terrain. In the case of specific elements, only their height and coordinates are indicated.","analysis_content_2":"Area of influence","analysis_content_2_1":"Allows you to draw an area of influence of an element.","analysis_content_3":"Extension","analysis_content_3_1":"Allows you to show the extension of a geographical object.","analysis_content_4":"GeoJSON","analysis_content_4_1":"Allows you to view the GeoJSON of the layer or selected elements.","download_title":"Download","download_content":"This tool allows you to download the complete layer or selected elements in GeoJSON, KML and Shapefile format."},"textHelp":{"help1":"Vectors management extension allows for the user to create, modify, delete, apply styles, apply spatial analysis and download vector layers.","help2":"To create a layer, the add layer button on the main panel of the extension must be selected.","help3":"Once the layer has been created, it is possible to enable the geometry edition and creation controls. The first control is the one for adding new geometries to the layer, allowing digitalize points, lines, surfaces, geometric figures and texts.","help4":"Given any layer\'s geometries, there are two ways of managing them: all the geometries of the layer at the same time or just the selected ones. To select the geometries, the selection control must be active. To select multiple geometries at once, the control key must be kept pressed, and the geometries will be selected on click.","help5":"The next control for editing, allows to modify the existing geometries in a vector layer. In this control it is possible to modify the geometry\'s vertices: ","help6":"add holes to polygon geometries:","help7":"rotate geometries:","help8":"scale geometries. There are some keyboard shortcuts for this action. The control key can be kept pressed to fix a scaling point, the Shift key can be used to scale keeping the shape and if both are pressed simultaneously, the shape from a certain point is kept:","help9":"move geometries:","help10":"add attributes table:","help11":"and delete geometries from a layer:","help12":"The following control from the vectors management panel is for applying styles to the geometries. From this control, color, fill, opacity, width, font family for texts, font color, text to be shown and radius for point geometries can be defined.","help13":"The analysis control allows to execute an spatial analysis of the available layer\'s geometries. Among them, the topographic profile options: ","help14":"area of influence (buffer):","help15":"calculation of distance/area:","help16":"and showing the geometries in plain text as a json format","help17":"Finally, the last control allows to download the layer in various formats: GeoJSON, KML, GPX y SHP","help18":"Information about this plugin and its possible parametrization is documented in:","help19":"A use case for its parameters can be found in:"},"tooltip":"Vector Management","selection":"Selection","analysis":"Analysis","creation":"Creation","download":"Download","edition":"Edition","help":"Help","style":"Style","selectLayerDefault":"Select layer","selectionLayer":"Layer","selectionFeature":"Feature","creationLayer":"Layer","creationLayer_done":"The layer has been successfully created!","creationPoint":"Point","creationCoordPoint":"Coordinates point","creationLine":"Line","creationPolygon":"Polygon","creationFigure":"Figure","creationText":"Text","creationLongitude":"Longitude","creationLatitude":"Latitude","styleColor":"Color","styleThickness":"Thickness","styleFont":"Font","styleSize":"Size","opacity":"Opacity","radius":"Radius","style_options":"Options","apply_style":"Apply","analysisProfile":"Topographic profile","analysisBuffer":"Buffer","getGeoJSON":"Get GeoJSON","extension":"Extension","draw":"Draw","createdLayer":"Created layer","zmin":"Min alt.","zmax":"Max. alt.","altitude":"Altitude","distance":"Total dist.","ytitle":"Altitud (m)","xtitle":"Distance (km)","title_popup_buffer":"INFLUENCE AREA","title_popup_attribute":"NEW ATTRIBUTE","title_popup_editAttribute":"RENAME ATTRIBUTE","unit_m":"Metres","unit_km":"Kilometres","editgeometria":"Edit geometry","clean":"Clean","hole":"Hole","rotation":"Rotation","scale":"Scale","move":"Move","attributes":"Attributes","delete":"Delete geometry","newcolumn":"New column","layerName":"Name","layerLegend":"Legend","title_new_layer":"NEW VECTOR LAYER","title_attribute_table":"Attribute edition","title_point_profile":"Point data","point_profile_map_coordinates":"Map coordinates","point_profile_geographic_coordinates":"Geographic coordinates","calculate":"Calculate","title_clear_geometries":"Clear layer","clear_geometries_msg":"Are you sure you want to remove all elements from the layer?","confirm":"Ok","accept":"Accept","cancel":"Cancel","cuadrilatero":"Quadrilateral","circulo":"Circle","triangulo":"Triangle","pentagono":"Pentagon","hexagono":"Hexagon","close":"Close","fill":"Fill","stroke":"Stroke","opts_point":"Point Options"}'),c=JSON.parse('{"exception":{"emptylayer":"La capa de dibujo est√° vac√≠a.","geometrianoencontrar":"Geometr√≠a no reconocida.","formatocoord":"Las coordenadas introducidas no tienen el formato correcto.","introduzcoord":"No se han introducido las coordenadas correctamente.","errorfichero":"Error al cargar el fichero.","nodetectado":"No se han detectado geometr√≠as en este fichero.","comprobar":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","insertado":"No se ha insertado una extensi√≥n de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX y GeoJSON.","maxfichero":"El fichero seleccionado sobrepasa el m√°ximo de 20 MB permitido.","ficherosel":"No se ha seleccionado formato de descarga.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","featuresel":"No se han seleccionado elementos","topographic_one_element":"El perfil topografico solo se puede realizar para un √∫nico elemento","typeLayer":"Las capas de tipo MVT y MBTilesVector no son editables"},"help_template":{"title":"Ayuda","addlayer_title":"Crear capa","addlayer_content":"Esta herramienta a√±ade al mapa una nueva capa vectorial. Al hacer click se abre una ventana en la que se puede introducir el nombre de la capa.","selection_title":"Selecci√≥n","selection_content":"Herramienta para seleccionar elementos de la capa. Hay varias herramientas que funcionan diferente si esta herramienta esta activa o no.","creation_title":"Creaci√≥n","creation_content":"Herramienta para dibujar diferentes tipos de geometr√≠as en la capa seleccionada.","creation_content_1":"Punto","creation_content_1_1":"Permite dibujar un punto mediante click en el mapa.","creation_content_2":"Punto por coordenadas","creation_content_2_1":"Permite crear un punto introduciendo las coordenadas.","creation_content_3":"Linea","creation_content_3_1":"Permite dibujar una linea en el mapa. Un click dibuja un punto o v√©rtice, doble click finaliza el dibujo.","creation_content_4":"Poligono","creation_content_4_1":"Permite dibujar un pol√≠gono en el mapa. Un click dibuja un punto o v√©rtice, doble click finaliza el dibujo.","creation_content_5":"Figura","creation_content_5_1":"Permite dibujar una figura regular o irregular en el mapa. Un click establece la esquina superior izquierda, un segundo click finaliza el dibujo.","creation_content_6":"Texto","creation_content_6_1":"Permite escribir un texto en un punto del mapa.","edition_title":"Edici√≥n","edition_content":"Herramienta para editar las geometr√≠as de los elementos de la capa.","edition_content_1":"Editar geometr√≠a","edition_content_1_1":"Permite editar los v√©rtices de una geometr√≠a","edition_content_2":"Agujero","edition_content_2_1":"Permite crear un agujero en un elemento. Solo v√°lido para pol√≠gonos.","edition_content_3":"Rotaci√≥n","edition_content_3_1":"Permite rotar los elementos seleccionados.","edition_content_4":"Escalar","edition_content_4_1":"Permite escalar los elementos seleccionados.","edition_content_5":"Mover","edition_content_5_1":"Permite mover los elementos seleccionados.","edition_content_6":"Editar atributos","edition_content_6_1":"Permite editar los atributos de los elementos de la capa o los seleccionados.","edition_content_7":"Limpiar","edition_content_7_1":"Permite eliminar todos los elementos de la capa.","style_title":"Edici√≥n de estilos","style_content":"Herramienta para editar los estilos de la capa o elementos seleccionados. Se dividen en estilos para punto, linea o pol√≠gono.","analysis_title":"Analisis","analysis_content":"Herramienta para el distintos an√°lisis geogr√°ficos.","analysis_content_1":"Perfil topogr√°fico","analysis_content_1_1":"Permite mostrar un gr√°fico que representa el relieve del terreno. En el caso de elementos puntuales se indica unicamente su altura y coordenadas.","analysis_content_2":"√Årea de influencia","analysis_content_2_1":"Permite dibujar un √°rea de influencia de un elemento.","analysis_content_3":"Extensi√≥n","analysis_content_3_1":"Permite mostrar la extensi√≥n de un objeto geogr√°fico.","analysis_content_4":"GeoJSON","analysis_content_4_1":"Permite ver el GeoJSON de la capa o elementos seleccionados.","download_title":"Descarga","download_content":"Esta herramienta permite descargar la capa completa o los elementos seleccionados en formato GeoJSON, KML, GPX y Shapefile."},"textHelp":{"help1":"La extensi√≥n de gesti√≥n de vectores permite al usuario crear, modificar, borrar, aplicar estilos, aplicar an√°lisis espaciales y descargar capas vectoriales.","help2":"Para crear una capa, se seleccionar√° el bot√≥n a√±adir capa en el panel principal de la extensi√≥n.","help3":"Una vez creada la capa, se pueden activar los controles de edici√≥n y creaci√≥n de geometr√≠as. El primer control es el de a√±adir nuevas geometr√≠as a la capa, permitiendo poder digitalizar puntos, l√≠neas, superficies, figuras geom√©tricas y textos.","help4":"A partir de tener geometr√≠as en una capa, existen dos maneras de tratar estas geometr√≠as: todas las geometr√≠as de la capa a la vez o s√≥lo las seleccionadas. Para seleccionarlas, habr√° que tener activado el control de selecci√≥n. PAra poder seleccionar m√°s de una geometr√≠a a la vez, habr√° que mantener pulsada la tecla control y hacer clic sobre las geometr√≠as a seleccionar.","help5":"El siguiente control de edici√≥n, permite modificar las geometr√≠as existentes en una capa vectorial. En √©ste control se podr√° modificar v√©rtices de una geometr√≠a: ","help6":"a√±adir agujeros a geometr√≠as poligonales:","help7":"rotar geometr√≠as:","help8":"escalar geometr√≠as. En esta acci√≥n existen unos accesos r√°pidos por teclado. Para dejar fijo un punto de escalado, se puede dejar presionada la tecla control, para escalar manteniendo la forma, la tecla Shift y si se mantienen las dos a la vez, mantiene la forma desde un punto:","help9":"mover geometr√≠as:","help10":"a√±adir tabla de atributos:","help11":"y eliminar las geometr√≠as de una capa:","help12":"El siguiente control del panel de gesti√≥n de vectores es aplicar estilos a geometr√≠as. En √©l, se puede asignar color, relleno, opacidad, grosor, tipo de fuente para textos, color de fuente, texto a mostrar y radio para geometr√≠as puntuales","help13":"El control de an√°lisis permite hacer un an√°lisis espacial de las geometr√≠as cargadas en una capa. Entre ellas est√°n las opciones de perfil topogr√°fico: ","help14":"√°rea de influencia (buffer):","help15":"c√°lculo de distancia/√°rea:","help16":"y mostrar las geometr√≠as en texto plano en formato json","help17":"Por √∫ltimo, el √∫ltimo control permite descargar la capa en distintos formatos: GeoJSON, KML, GPX y SHP","help18":"La informaci√≥n relevante a la extensi√≥n y su posible parametrizaci√≥n est√° documentada en:","help19":"El ejemplo de uso de sus par√°metros puede comprobarse en:"},"tooltip":"Gesti√≥n de Vectores","selection":"Seleccionar","analysis":"An√°lisis","creation":"Creaci√≥n","download":"Descargar","edition":"Edici√≥n","help":"Ayuda","style":"Estilo","selectLayerDefault":"Seleccionar capa","selectionLayer":"Capa","selectionFeature":"Feature","creationLayer":"Capa","creationLayer_done":"¬°La capa se ha creado con √©xito!","creationPoint":"Punto","creationCoordPoint":"Punto coordenadas","creationLine":"Linea","creationPolygon":"Pol√≠gono","creationFigure":"Figura","creationText":"Texto","creationLongitude":"Longitud","creationLatitude":"Latitud","styleColor":"Color","styleThickness":"Grosor","styleFont":"Fuente","styleSize":"Tama√±o","opacity":"Opacidad","radius":"Radio","style_options":"Opciones","apply_style":"Aplicar","analysisProfile":"Perfil topogr√°fico","analysisBuffer":"√Årea de influencia","getGeoJSON":"Ver GeoJSON","extension":"Extensi√≥n","draw":"Dibujar","createdLayer":"Creada capa","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","title_popup_buffer":"√ÅREA DE INFLUENCIA","title_popup_attribute":"NUEVO ATRIBUTO","title_popup_editAttribute":"RENOMBRAR ATRIBUTO","unit_m":"Metros","unit_km":"Kil√≥metros","editgeometria":"Editar geometria","clean":"Limpiar","hole":"Agujero","rotation":"Rotaci√≥n","scale":"Escalar","move":"Mover","attributes":"Atributos","delete":"Borrar geometr√≠a","newcolumn":"Nueva columna","layerName":"Nombre","layerLegend":"Leyenda","title_new_layer":"NUEVA CAPA VECTORIAL","title_attribute_table":"Edici√≥n de atributos","title_point_profile":"Datos punto","point_profile_map_coordinates":"Coordenadas mapa","point_profile_geographic_coordinates":"Coordenadas geogr√°ficas","calculate":"Calcular","title_clear_geometries":"Limpiar capa","clear_geometries_msg":"¬øSeguro que desea eliminar todos los elementos de la capa?","confirm":"Confirmar","accept":"Aceptar","cancel":"Cancelar","cuadrilatero":"Cuadril√°tero","circulo":"C√≠rculo","triangulo":"Tri√°ngulo","pentagono":"Pent√°gono","hexagono":"Hex√°gono","close":"Cerrar","fill":"Relleno","stroke":"Trazo","opts_point":"Opciones de puntos"}');var f={en:l,es:c},h=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e="es","function"==typeof M.language.getLang&&(e=M.language.getLang()),e),r=function(t){return"es"===t||"en"===t?f[t]:M.language.getTranslation(t).vectorsmanagement}(n),i="";return M.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(n,"' has not been defined.")):i=t.split(".").reduce((function(t,e){return t[e]}),r),i};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}function g(t,e,n){return e=_(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,v()?Reflect.construct(e,n||[],_(t).constructor):e.apply(t,n))}function v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v=function(){return!!t})()}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},m.apply(null,arguments)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}var w=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(u)&&M.exception(h("exception")),(n=g(this,e,[new u,"Help"])).map_=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(e,M.Control),n=e,(r=[{key:"active",value:function(t){this.layerBtnClick()}},{key:"layerBtnClick",value:function(){this.showLayerDialog()}},{key:"showLayerDialog",value:function(){var t=this;M.dialog.info('<div id="chooseLayerName">\n        <label for="layer-name">'.concat(h("layerName"),': </label>\n        <input type="text" id="layer-name" style="width: 10rem;">\n      </div>'),h("title_new_layer"));var e="#71a7d3",n=document.querySelector(".m-dialog > div.m-modal > div.m-content");n.style.minWidth="auto";var r=n.querySelector(".m-button"),i=document.createElement("button");i.type="button",i.innerHTML=h("cancel"),i.style.width="auto",i.style.backgroundColor="#71a7d3",r.appendChild(i),document.querySelector(".m-modal .m-title").style.backgroundColor=e;var o=document.querySelector(".m-button button"),a=document.querySelector("div.m-modal input#layer-name");o.style.backgroundColor=e,o.addEventListener("click",(function(){t.addLayer(a.value),M.toast.info(h("creationLayer_done"),null,6e3);var e=document.querySelector("#m-selectionlayer");e.options.selectedIndex=1;var n=document.createEvent("HTMLEvents");n.initEvent("change"),e.dispatchEvent(n)})),i.addEventListener("click",(function(){var t=document.querySelector(".m-dialog");t.parentNode.removeChild(t)}))}},{key:"addLayer",value:function(t){var e=new M.layer.Vector({name:t||"vector_".concat(Math.floor(9e3*Math.random())+1e3),legend:t||"Vector_".concat(Math.floor(9e3*Math.random())+1e3)});this.map_.addLayers(e),this.deactivate()}},{key:"destroy",value:function(){}},{key:"activate",value:function(){m(_(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){document.querySelector("#layerdrawing").classList.remove("activated")}},{key:"equals",value:function(t){return t instanceof e}}])&&d(n.prototype,r),i&&d(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),x=6371008.8,S={centimeters:100*x,centimetres:100*x,degrees:x/111325,feet:3.28084*x,inches:39.37*x,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:1e3*x,millimetres:1e3*x,nauticalmiles:x/1852,radians:1,yards:1.0936*x};function E(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function C(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(t[0])||!k(t[1]))throw new Error("coordinates must contain numbers");return E({type:"Point",coordinates:t},e,n)}function O(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function I(t,e){void 0===e&&(e="kilometers");var n=S[e];if(!n)throw new Error(e+" units is invalid");return t*n}function P(t,e){void 0===e&&(e="kilometers");var n=S[e];if(!n)throw new Error(e+" units is invalid");return t/n}function k(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function T(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,f=0,h=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,g=d?t.features.length:1,v=0;v<g;v++){s=(c=!!(l=d?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=c?l.geometries[m]:l)){u=a.coordinates;var w=a.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],h,v,_,b))return!1;h++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++){if(!1===e(u[r][i],h,v,_,b))return!1;h++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++){if(!1===e(u[r][i][o],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===T(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function L(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function N(t,e){var n,r,i,o,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(n=0;n<y;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}function A(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}A.default=A;const R=A;const j=function(t,e){void 0===e&&(e={});var n=R(t);return C([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)};var D=n(675);function F(){return new B}function B(){this.reset()}B.prototype={constructor:B,reset:function(){this.s=this.t=0},add:function(t){z(G,t,this.t),z(this,G.s,this.s),this.s?this.t+=G.t:this.s=G.t},valueOf:function(){return this.s}};var G=new B;function z(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var q=1e-6,U=Math.PI,V=U/2,Y=U/4,X=2*U,W=180/U,H=U/180,Z=Math.abs,K=Math.atan,Q=Math.atan2,J=Math.cos,$=(Math.ceil,Math.exp),tt=(Math.floor,Math.log),et=(Math.pow,Math.sin),nt=(Math.sign,Math.sqrt),rt=Math.tan;function it(t){return t>1?0:t<-1?U:Math.acos(t)}function ot(t){return t>1?V:t<-1?-V:Math.asin(t)}function at(){}function st(t,e){t&&lt.hasOwnProperty(t.type)&&lt[t.type](t,e)}var ut={Feature:function(t,e){st(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)st(n[r].geometry,e)}},lt={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ct(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ct(n[r],e,0)},Polygon:function(t,e){ft(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ft(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)st(n[r],e)}};function ct(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ft(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ct(t[n],e,1);e.polygonEnd()}function ht(t,e){t&&ut.hasOwnProperty(t.type)?ut[t.type](t,e):st(t,e)}F(),F();function pt(t){return[Q(t[1],t[0]),ot(t[2])]}function dt(t){var e=t[0],n=t[1],r=J(n);return[r*J(e),r*et(e),et(n)]}function yt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function vt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function mt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function _t(t){var e=nt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}F();function bt(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function wt(t,e){return[t>U?t-X:t<-U?t+X:t,e]}function xt(t,e,n){return(t%=X)?e||n?bt(Et(t),Ct(e,n)):Et(t):e||n?Ct(e,n):wt}function St(t){return function(e,n){return[(e+=t)>U?e-X:e<-U?e+X:e,n]}}function Et(t){var e=St(t);return e.invert=St(-t),e}function Ct(t,e){var n=J(t),r=et(t),i=J(e),o=et(e);function a(t,e){var a=J(e),s=J(t)*a,u=et(t)*a,l=et(e),c=l*n+s*r;return[Q(u*i-c*o,s*n-l*r),ot(c*i+u*o)]}return a.invert=function(t,e){var a=J(e),s=J(t)*a,u=et(t)*a,l=et(e),c=l*i-u*o;return[Q(u*i+l*o,s*n+c*r),ot(c*n-s*r)]},a}function Ot(t,e,n,r,i,o){if(n){var a=J(e),s=et(e),u=r*n;null==i?(i=e+r*X,o=e-u/2):(i=It(a,i),o=It(a,o),(r>0?i<o:i>o)&&(i+=r*X));for(var l,c=i;r>0?c>o:c<o;c-=u)l=pt([a,-s*J(c),-s*et(c)]),t.point(l[0],l[1])}}function It(t,e){(e=dt(e))[0]-=t,_t(e);var n=it(-e[1]);return((-e[2]<0?-n:n)+X-q)%X}function Pt(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:at,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function kt(t,e){return Z(t[0]-e[0])<q&&Z(t[1]-e[1])<q}function Mt(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Tt(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(kt(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Mt(r,t,null,!0)),u.push(n.o=new Mt(r,null,n,!1)),s.push(n=new Mt(a,t,null,!1)),u.push(n.o=new Mt(a,null,n,!0))}})),s.length){for(u.sort(e),Lt(s),Lt(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Lt(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Nt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}wt.invert=wt;var At,Rt;1===(At=Nt).length&&(Rt=At,At=function(t,e){return Nt(Rt(t),e)});var jt=Array.prototype;jt.slice,jt.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function Dt(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}var Ft=1e9,Bt=-Ft;function Gt(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Z(r[0]-t)<q?i>0?0:3:Z(r[0]-n)<q?i>0?2:1:Z(r[1]-e)<q?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,f,h,p,d,y,g,v,m,_=a,b=Pt(),w={point:x,lineStart:function(){w.point=S,l&&l.push(c=[]);v=!0,g=!1,d=y=NaN},lineEnd:function(){u&&(S(f,h),p&&g&&b.rejoin(),u.push(b.result()));w.point=x,g&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],h=f[0],p=f[1];u<c;++u)o=h,a=p,h=(f=s[u])[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Dt(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Tt(u,s,e,o,a),a.polygonEnd());_=a,u=l=c=null}};function x(t,e){i(t,e)&&_.point(t,e)}function S(o,a){var s=i(o,a);if(l&&c.push([o,a]),v)f=o,h=a,p=s,v=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&g)_.point(o,a);else{var u=[d=Math.max(Bt,Math.min(Ft,d)),y=Math.max(Bt,Math.min(Ft,y))],b=[o=Math.max(Bt,Math.min(Ft,o)),a=Math.max(Bt,Math.min(Ft,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*f,t[1]=u+l*h),c<1&&(e[0]=s+c*f,e[1]=u+c*h),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(o,a),m=!1):(g||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),m=!1)}d=o,y=a,g=s}return w}}var zt=F();function qt(t,e){var n=e[0],r=e[1],i=[et(n),-J(n),0],o=0,a=0;zt.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,f=l[c-1],h=f[0],p=f[1]/2+Y,d=et(p),y=J(p),g=0;g<c;++g,h=m,d=b,y=w,f=v){var v=l[g],m=v[0],_=v[1]/2+Y,b=et(_),w=J(_),x=m-h,S=x>=0?1:-1,E=S*x,C=E>U,O=d*b;if(zt.add(Q(O*S*et(E),y*w+O*J(E))),o+=C?x+S*X:x,C^h>=n^m>=n){var I=gt(dt(f),dt(v));_t(I);var P=gt(i,I);_t(P);var k=(C^x>=0?-1:1)*ot(P[2]);(r>k||r===k&&(I[0]||I[1]))&&(a+=C^x>=0?1:-1)}}return(o<-q||o<q&&zt<-q)^1&a}F();F(),F();var Ut=1/0,Vt=Ut,Yt=-Ut,Xt=Yt,Wt={point:function(t,e){t<Ut&&(Ut=t);t>Yt&&(Yt=t);e<Vt&&(Vt=e);e>Xt&&(Xt=e)},lineStart:at,lineEnd:at,polygonStart:at,polygonEnd:at,result:function(){var t=[[Ut,Vt],[Yt,Xt]];return Yt=Xt=-(Vt=Ut=1/0),t}};const Ht=Wt;F();function Zt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kt(t,e,n,r){return function(i,o){var a,s,u,l=e(o),c=i.invert(r[0],r[1]),f=Pt(),h=e(f),p=!1,d={point:y,lineStart:v,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=w,s=[],a=[]},polygonEnd:function(){d.point=y,d.lineStart=v,d.lineEnd=m,s=Dt(s);var t=qt(a,c);s.length?(p||(o.polygonStart(),p=!0),Tt(s,Jt,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function g(t,e){var n=i(t,e);l.point(n[0],n[1])}function v(){d.point=g,l.lineStart()}function m(){d.point=y,l.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);h.point(n[0],n[1])}function b(){h.lineStart(),u=[]}function w(){_(u[0][0],u[0][1]),h.lineEnd();var t,e,n,r,i=h.clean(),l=f.result(),c=l.length;if(u.pop(),a.push(u),u=null,c)if(1&i){if((e=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),s.push(l.filter(Qt))}return d}}function Qt(t){return t.length>1}function Jt(t,e){return((t=t.x)[0]<0?t[1]-V-q:V-t[1])-((e=e.x)[0]<0?e[1]-V-q:V-e[1])}Zt(4.5);const $t=Kt((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?U:-U,u=Z(o-n);Z(u-U)<q?(t.point(n,r=(r+a)/2>0?V:-V),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=U&&(Z(n-i)<q&&(n-=i*q),Z(o-s)<q&&(o-=s*q),r=function(t,e,n,r){var i,o,a=et(t-n);return Z(a)>q?K((et(e)*(o=J(r))*et(n)-et(r)*(i=J(e))*et(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*V,r.point(-U,i),r.point(0,i),r.point(U,i),r.point(U,0),r.point(U,-i),r.point(0,-i),r.point(-U,-i),r.point(-U,0),r.point(-U,i);else if(Z(t[0]-e[0])>q){var o=t[0]<e[0]?U:-U;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-U,-V]);function te(t){return t}function ee(t){return function(e){var n=new ne;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ne(){}function re(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ht(n,t.stream(Ht));var a=Ht.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}ne.prototype={constructor:ne,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ie=16,oe=J(30*H);function ae(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,f,h,p,d,y,g){var v=l-r,m=c-i,_=v*v+m*m;if(_>4*e&&y--){var b=a+h,w=s+p,x=u+d,S=nt(b*b+w*w+x*x),E=ot(x/=S),C=Z(Z(x)-1)<q||Z(o-f)<q?(o+f)/2:Q(w,b),O=t(C,E),I=O[0],P=O[1],k=I-r,M=P-i,T=m*k-v*M;(T*T/_>e||Z((v*k+m*M)/_-.5)>.3||a*h+s*p+u*d<oe)&&(n(r,i,o,a,s,u,I,P,C,b/=S,w/=S,x,y,g),g.point(I,P),n(I,P,C,b,w,x,l,c,f,h,p,d,y,g))}}return function(e){var r,i,o,a,s,u,l,c,f,h,p,d,y={point:g,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,y.point=m,e.lineStart()}function m(r,i){var o=dt([r,i]),a=t(r,i);n(c,f,l,h,p,d,c=a[0],f=a[1],l=r,h=o[0],p=o[1],d=o[2],ie,e),e.point(c,f)}function _(){y.point=g,e.lineEnd()}function b(){v(),y.point=w,y.lineEnd=x}function w(t,e){m(r=t,e),i=c,o=f,a=h,s=p,u=d,y.point=m}function x(){n(c,f,l,h,p,d,i,o,r,a,s,u,ie,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return ee({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var se=ee({point:function(t,e){this.stream.point(t*H,e*H)}});function ue(t){return function(t){var e,n,r,i,o,a,s,u,l,c,f=150,h=480,p=250,d=0,y=0,g=0,v=0,m=0,_=null,b=$t,w=null,x=te,S=.5,E=ae(I,S);function C(t){return[(t=o(t[0]*H,t[1]*H))[0]*f+n,r-t[1]*f]}function O(t){return(t=o.invert((t[0]-n)/f,(r-t[1])/f))&&[t[0]*W,t[1]*W]}function I(t,i){return[(t=e(t,i))[0]*f+n,r-t[1]*f]}function P(){o=bt(i=xt(g,v,m),e);var t=e(d,y);return n=h-t[0]*f,r=p+t[1]*f,k()}function k(){return l=c=null,C}return C.stream=function(t){return l&&c===t?l:l=se(b(i,E(x(c=t))))},C.clipAngle=function(t){return arguments.length?(b=+t?function(t,e){var n=J(t),r=n>0,i=Z(n)>q;function o(t,e){return J(t)*J(e)>n}function a(t,e,r){var i=[1,0,0],o=gt(dt(t),dt(e)),a=yt(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=n*a/u,c=-n*s/u,f=gt(i,o),h=mt(i,l);vt(h,mt(o,c));var p=f,d=yt(h,p),y=yt(p,p),g=d*d-y*(yt(h,h)-1);if(!(g<0)){var v=nt(g),m=mt(p,(-d-v)/y);if(vt(m,h),m=pt(m),!r)return m;var _,b=t[0],w=e[0],x=t[1],S=e[1];w<b&&(_=b,b=w,w=_);var E=w-b,C=Z(E-U)<q;if(!C&&S<x&&(_=x,x=S,S=_),C||E<q?C?x+S>0^m[1]<(Z(m[0]-b)<q?x:S):x<=m[1]&&m[1]<=S:E>U^(b<=m[0]&&m[0]<=w)){var O=mt(p,(-d+v)/y);return vt(O,h),[m,pt(O)]}}}function s(e,n){var i=r?t:U-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Kt(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var p,d=[f,h],y=o(f,h),g=r?y?0:s(f,h):y?s(f+(f<0?U:-U),h):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(p=a(e,d))||kt(e,p)||kt(d,p))&&(d[0]+=q,d[1]+=q,y=o(d[0],d[1])),y!==u)c=0,y?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^y){var v;g&n||!(v=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!y||e&&kt(e,d)||t.point(d[0],d[1]),e=d,u=y,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,i,o){Ot(o,t,e,i,n,r)}),r?[0,-t]:[-U,t-U])}(_=t*H,6*H):(_=null,$t),k()):_*W},C.clipExtent=function(t){return arguments.length?(x=null==t?(w=a=s=u=null,te):Gt(w=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),k()):null==w?null:[[w,a],[s,u]]},C.scale=function(t){return arguments.length?(f=+t,P()):f},C.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],P()):[h,p]},C.center=function(t){return arguments.length?(d=t[0]%360*H,y=t[1]%360*H,P()):[d*W,y*W]},C.rotate=function(t){return arguments.length?(g=t[0]%360*H,v=t[1]%360*H,m=t.length>2?t[2]%360*H:0,P()):[g*W,v*W,m*W]},C.precision=function(t){return arguments.length?(E=ae(I,S=t*t),k()):nt(S)},C.fitExtent=function(t,e){return re(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return re(t,[[0,0],e],n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&O,P()}}((function(){return t}))()}function le(t){return function(e,n){var r=J(e),i=J(n),o=t(r*i);return[o*i*et(e),o*et(n)]}}function ce(t){return function(e,n){var r=nt(e*e+n*n),i=t(r),o=et(i),a=J(i);return[Q(e*o,r*a),ot(r&&n*o/r)]}}var fe=le((function(t){return nt(2/(1+t))}));fe.invert=ce((function(t){return 2*ot(t/2)}));var he=le((function(t){return(t=it(t))&&t/et(t)}));function pe(t,e){return[t,tt(rt((V+e)/2))]}function de(t,e){return[t,e]}function ye(t,e){var n=J(e),r=J(t)*n;return[n*et(t)/r,et(e)/r]}function ge(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ve(t,e){return[J(e)*et(t),et(e)]}function me(t,e){var n=J(e),r=1+J(t)*n;return[n*et(t)/r,et(e)/r]}function _e(t,e){return[tt(rt((V+e)/2)),-t]}function be(t,e,n,r){var i=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return N(t,(function(t){var i=be(t,e,n,r);i&&a.push(i)})),O(a)}var s=function(t){var e=j(t).geometry.coordinates,n=[-e[0],-e[1]];return ue(he).scale(79.4188).clipAngle(179.999).rotate(n).scale(x)}(o),u={type:o.type,coordinates:xe(o.coordinates,s)},l=(new D.GeoJSONReader).read(u),c=I(P(e,n),"meters"),f=D.BufferOp.bufferOp(l,c,r);if(!we((f=(new D.GeoJSONWriter).write(f)).coordinates))return E({type:f.type,coordinates:Se(f.coordinates,s)},i)}function we(t){return Array.isArray(t[0])?we(t[0]):isNaN(t[0])}function xe(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return xe(t,e)}))}function Se(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return Se(t,e)}))}he.invert=ce((function(t){return t})),pe.invert=function(t,e){return[t,2*K($(e))-V]},de.invert=de,ye.invert=ce(K),ge.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Z(n)>q&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},ve.invert=ce(ot),me.invert=ce((function(t){return 2*K(t)})),_e.invert=function(t,e){return[-e,2*K($(t))-V]};const Ee=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){var n=be(t,e,r,i);n&&o.push(n)})),O(o);case"FeatureCollection":return L(t,(function(t){var n=be(t,e,r,i);n&&L(n,(function(t){t&&o.push(t)}))})),O(o)}return be(t,e,r,i)};function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ie(r.key),r)}}function Ie(t){var e=function(t,e){if("object"!=Ce(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ce(e)?e:e+""}function Pe(t,e,n){return e=Me(e),function(t,e){if(e&&("object"==Ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ke()?Reflect.construct(e,n||[],Me(t).constructor):e.apply(t,n))}function ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ke=function(){return!!t})()}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}function Te(t,e){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Te(t,e)}var Le=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Pe(this,e,[{}]);var r=t||{};n.info=r.info;var i,o=n;if(r.target)(i=document.createElement("div")).id="containerTopo",i.classList.add(r.className||"ol-profil");else{(i=document.createElement("div")).id="containerTopo",i.className=((r.className||"ol-profil")+" ol-unselectable ol-control-vector ol-collapsed").trim();var a=document.createElement("p");a.id="titleTopo",a.textContent=t.title,i.appendChild(a);var s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("class","profile-close-button");var u=function(t){document.querySelector(".ol-profil.ol-unselectable.ol-control-vector").remove(),void 0!==r.pointLayer&&r.pointLayer.clear()};s.addEventListener("click",u),s.addEventListener("touchstart",u),a.appendChild(s);var l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("class","profile-download-button vectorsmanagement-icon-descargar");var c=function(t){var e=n.getImage(),r=document.createElement("a");r.href=e,r.download="Perfil.png",r.click(),r.remove()};l.addEventListener("click",c),l.addEventListener("touchstart",c),a.appendChild(l);var f=document.createElement("button"),h=document.createElement("img");h.setAttribute("src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3dzLW1vdmUiIHZpZXdCb3g9IjAgMCAxNiAxNiI+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy42NDYuMTQ2YS41LjUgMCAwIDEgLjcwOCAwbDIgMmEuNS41IDAgMCAxLS43MDguNzA4TDguNSAxLjcwN1Y1LjVhLjUuNSAwIDAgMS0xIDBWMS43MDdMNi4zNTQgMi44NTRhLjUuNSAwIDEgMS0uNzA4LS43MDhsMi0yek04IDEwYS41LjUgMCAwIDEgLjUuNXYzLjc5M2wxLjE0Ni0xLjE0N2EuNS41IDAgMCAxIC43MDguNzA4bC0yIDJhLjUuNSAwIDAgMS0uNzA4IDBsLTItMmEuNS41IDAgMCAxIC43MDgtLjcwOEw3LjUgMTQuMjkzVjEwLjVBLjUuNSAwIDAgMSA4IDEwek0uMTQ2IDguMzU0YS41LjUgMCAwIDEgMC0uNzA4bDItMmEuNS41IDAgMSAxIC43MDguNzA4TDEuNzA3IDcuNUg1LjVhLjUuNSAwIDAgMSAwIDFIMS43MDdsMS4xNDcgMS4xNDZhLjUuNSAwIDAgMS0uNzA4LjcwOGwtMi0yek0xMCA4YS41LjUgMCAwIDEgLjUtLjVoMy43OTNsLTEuMTQ3LTEuMTQ2YS41LjUgMCAwIDEgLjcwOC0uNzA4bDIgMmEuNS41IDAgMCAxIDAgLjcwOGwtMiAyYS41LjUgMCAwIDEtLjcwOC0uNzA4TDE0LjI5MyA4LjVIMTAuNUEuNS41IDAgMCAxIDEwIDh6Ii8+Cjwvc3ZnPg=="),h.setAttribute("alt","Icon Move"),f.appendChild(h),f.setAttribute("title","Ventana arrastrable"),f.setAttribute("type","button"),f.setAttribute("id","buttonTopoMove"),f.setAttribute("class","profile-move-button icon-move"),a.appendChild(f),setTimeout((function(){M.utils.dragElement("containerTopo","buttonTopoMove"),M.utils.dragElement("containerTopo","titleTopo")}),3e3)}var p=document.createElement("div");p.classList.add("ol-inner"),i.appendChild(p);var d=document.createElement("div");d.style.position="relative",p.appendChild(d);var y=n.ratio=2;n.canvas_=document.createElement("canvas"),n.canvas_.width=(r.width||400)*y,n.canvas_.height=(r.height||250)*y;var g={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(g).forEach((function(t){t in o.canvas_.style&&(o.canvas_.style[t]=g[t])}));var v=document.createElement("div");d.appendChild(v),v.style.width=n.canvas_.width/y+"px",v.style.height=n.canvas_.height/y+"px",v.appendChild(n.canvas_),v.addEventListener("click",(function(t){o.onMove(t)})),v.addEventListener("mousemove",(function(t){o.onMove(t)})),n.element=i,n.margin_={top:25*y,left:55*y,bottom:45*y,right:25*y},n.info.ytitle||(n.margin_.left-=20*y),n.info.xtitle||(n.margin_.bottom-=20*y),n.bar_=document.createElement("div"),n.bar_.classList.add("ol-profilbar"),n.bar_.style.top=n.margin_.top/y+"px",n.bar_.style.height=(n.canvas_.height-n.margin_.top-n.margin_.bottom)/y+"px",d.appendChild(n.bar_),n.cursor_=document.createElement("div"),n.cursor_.classList.add("ol-profilcursor"),d.appendChild(n.cursor_),n.popup_=document.createElement("div"),n.popup_.classList.add("ol-profilpopup"),n.cursor_.appendChild(n.popup_);var m=document.createElement("table");m.cellPadding="0",m.cellSpacing="0",m.style.clientWidth=n.canvas_.width/y+"px",d.appendChild(m);var _=document.createElement("tr");_.classList.add("track-info"),m.appendChild(_);var b=document.createElement("td");b.innerHTML=(n.info.zmin||"Zmin")+': <span class="zmin">',_.appendChild(b);var w=document.createElement("td");w.innerHTML=(n.info.zmax||"Zmax")+': <span class="zmax">',_.appendChild(w);var x=document.createElement("td");x.innerHTML=(n.info.distance||"Distance")+': <span class="dist">',_.appendChild(x);var S=document.createElement("tr");S.classList.add("point-info"),m.appendChild(S);var E=document.createElement("td");E.innerHTML=(n.info.altitude||"Altitude")+': <span class="z">',S.appendChild(E);var C=document.createElement("td");C.innerHTML='Dist. parcial: <span class="dist">',S.appendChild(C);var O=document.createElement("td");return O.innerHTML=(n.info.time||"Time")+': <span class="time">',S.appendChild(O),n.tab_=[],r.feature&&n.setGeometry(r.feature),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Te(t,e)}(e,ol.control.Control),n=e,r=[{key:"popup",value:function(t){this.popup_.innerHTML=t}},{key:"onMove",value:function(t){if(this.tab_.length){var e=this.canvas_.getBoundingClientRect(),n=e.top+window.pageYOffset-document.documentElement.clientTop,r=e.left+window.pageXOffset-document.documentElement.clientLeft,i=t.pageX-r,o=t.pageY-n,a=this.ratio;if(i>this.margin_.left/a&&i<(this.canvas_.width-this.margin_.right)/a&&o>this.margin_.top/a&&o<(this.canvas_.height-this.margin_.bottom)/a){this.bar_.style.left=i+"px",this.bar_.style.display="block";for(var s,u=(i*a-this.margin_.left)/this.scale_[0],l=this.tab_[0],c=1;s=this.tab_[c];c++)if(s[0]>=u){u<(s[0]+l[0])/2&&(s=l);break}s?(this.cursor_.style.left=i+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+s[1]*this.scale_[1]+this.dy_)/a+"px",this.cursor_.style.display="block"):this.cursor_.style.display="none",this.bar_.parentElement.classList.add("over"),this.element.querySelector(".point-info .z").textContent=s[1]+this.info.altitudeUnits,this.element.querySelector(".point-info .dist").textContent=(s[0]/1e3).toFixed(1)+this.info.distanceUnitsKM,this.element.querySelector(".point-info .time").textContent=s[2],i>this.canvas_.width/a/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left"),this.dispatchEvent({type:"over",click:"click"==t.type,coord:s[3],time:s[2],distance:s[0]})}else this.bar_.parentElement.classList.contains("over")&&(this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"),this.dispatchEvent({type:"out"}))}}},{key:"show",value:function(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})}},{key:"hide",value:function(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})}},{key:"toggle",value:function(){this.element.classList.toggle("ol-collapsed");var t=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!t})}},{key:"isShown",value:function(){return!this.element.classList.contains("ol-collapsed")}},{key:"setGeometry",value:function(t,e){e||(e={}),t instanceof ol.Feature&&(t=t.getGeometry());var n=this.canvas_,r=n.getContext("2d"),i=n.width,o=n.height;if(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,i,o),/Z/.test(t.getLayout())){/M/.test(t.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var a=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":a=a[0];break;default:return}var s=e.projection||this.getMap().getView().getProjection();r.setTransform(1,0,0,1,this.margin_.left,o-this.margin_.bottom);var u=this.ratio;i-=this.margin_.right+this.margin_.left,o-=this.margin_.top+this.margin_.bottom,r.strokeStyle="#000",r.lineWidth=.5*u,r.beginPath(),r.moveTo(0,0),r.lineTo(0,-o),r.moveTo(0,0),r.lineTo(i,0),r.stroke();var l,c,f,h,p,d=1/0,y=-1/0,g=this.tab_=[];for(l=0;c=a[l];l++)(h=c[2])<d&&(d=h),h>y&&(y=h),0==l?f=0:f+=C(a[l-1],c),p=O(a[0][3],c[3]),g.push([f,h,p,c]);this.element.querySelector(".track-info .zmin").textContent=d.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .zmax").textContent=y.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .dist").textContent=f>1e3?(f/1e3).toFixed(1)+this.info.distanceUnitsKM:f.toFixed(1)+this.info.distanceUnitsM;for(var v=e.graduation||100;o/(((y=Math.ceil(y/v)*v)-(d=Math.floor(d/v)*v))/v)<15*u;)v*=2;"number"==typeof e.zmin&&d>e.zmin&&(d=e.zmin),"number"==typeof e.zmax&&y<e.zmax&&(y=e.zmax);var m=e.amplitude;m&&(y=Math.max(d+m,y));var _=i/f,b=-o/(y-d),w=this.dy_=-d*b;for(this.scale_=[_,b],r.font=12*u+"px arial",r.textAlign="right",r.textBaseline="middle",r.fillStyle="#000",r.beginPath(),l=d;l<=y;l+=v)"km"!=e.zunit?r.fillText(l,-4*u,l*b+w):r.fillText((l/1e3).toFixed(1),-4*u,l*b+w),r.moveTo(-2*u,l*b+w),0!=l?r.lineTo(f*_,l*b+w):r.lineTo(0,l*b+w);r.textAlign="center",r.textBaseline="top",r.setLineDash([u,3*u]);var x,S=e.unit||"km";for(f>1e3?(x=100*Math.round(f/1e3))>1e3&&(x=1e3*Math.ceil(x/1e3)):(S="m",x=f>100?10*Math.round(f/100):f>10?Math.round(f/10):f>1?Math.round(f)/10:f),l=0;l<=f;l+=x){var E="m"==S?l:l/1e3;r.fillText(Math.round(10*E)/10,l*_,4*u),r.moveTo(l*_,2*u),r.lineTo(l*_,0)}for(r.font=14*u+"px arial",r.fillText(this.info.xtitle.replace("(km)","("+S+")"),i/2,18*u),r.save(),r.rotate(-Math.PI/2),r.fillText(this.info.ytitle,o/2,-this.margin_.left),r.restore(),r.stroke(),r.strokeStyle="#368",r.lineWidth=5,r.setLineDash([]),r.beginPath(),l=0;c=g[l];l++)0==l?r.moveTo(c[0]*_,c[1]*b+w):r.lineTo(c[0]*_,c[1]*b+w);r.stroke()}function C(t,e){return ol.sphere.getDistance(ol.proj.transform(t,s,"EPSG:4326"),ol.proj.transform(e,s,"EPSG:4326"))}function O(t,e){if(!t||!e)return"-";var n=(e-t)/60,r=Math.trunc(n/60),i=Math.trunc(n-60*r);return r+"h"+(i<10?"0":"")+i+"mn"}}},{key:"getImage",value:function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)}}],r&&Oe(n.prototype,r),i&&Oe(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();const Ne=Le;function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Re(t){return function(t){if(Array.isArray(t))return je(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return je(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fe(r.key),r)}}function Fe(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ae(e)?e:e+""}function Be(t,e,n){return e=qe(e),function(t,e){if(e&&("object"==Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ge()?Reflect.construct(e,n||[],qe(t).constructor):e.apply(t,n))}function Ge(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ge=function(){return!!t})()}function ze(){return ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=qe(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ze.apply(null,arguments)}function qe(t){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(t)}function Ue(t,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ue(t,e)}var Ve="EPSG:4326",Ye="EPSG:900913",Xe="https://servicios.idee.es/wcs-inspire/mdt?request=GetCoverage&bbox=",We="&service=WCS&version=1.0.0&coverage=Elevacion4258_5&interpolationMethod=bilinear&crs=EPSG%3A4258&format=ArcGrid&width=2&height=2",He="NODATA_value -9999.000",Ze=function(t,e){var n=Math.pow(10,e),r=Math.round(t*n)/n;return r=r.toString().replace(".",","),e>2?r="".concat(r.split(",")[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),",").concat(r.split(",")[1]):r.replace(/\B(?=(\d{3})+(?!\d))/g,"."),r},Ke=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Be(this,e)).facadeMap_=t,n.source_=new ol.source.Vector({wrapX:!1}),n.vector_=new ol.layer.Vector({source:n.source_,style:n.style_,name:"capatopo"}),n.vector_.setZIndex(1e6),n.facadeMap_.getMapImpl().addLayer(n.vector_),n.distance_=30,n.arrayXZY=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(e,M.impl.Control),n=e,r=[{key:"addTo",value:function(t,n){ze(qe(e.prototype),"addTo",this).call(this,t,n),this.facadeMap_=t,this.olLayer_=void 0}},{key:"setOLLayer",value:function(t){this.olLayer_=t}},{key:"getMapeaFeatureClone",value:function(t){var e=t.getImpl().olFeature_.clone();return M.impl.Feature.olFeature2Facade(e)}},{key:"calculateProfile",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];if("MultiLineString"===t.getGeometry().type)t.getGeometry().coordinates.forEach((function(t){r=r.concat(t)}));else if("Polygon"===t.getGeometry().type)(r=[].concat(t.getGeometry().coordinates[0])).pop();else if("MultiPolygon"===t.getGeometry().type){var i,o=(i=[]).concat.apply(i,Re(t.getGeometry().coordinates.map((function(t){return t[0]}))));r=o}else r=[].concat(t.getGeometry().coordinates);for(var a="",s=1;s<r.length;s+=1)a=a.concat(this.findNewPoints(r[s-1],r[s]));for(var u=a.split("|");u.length>150;)u=u.filter((function(t,e){return e%2==0}));var l=[],c=[];u=u.filter((function(t){return""!==t&&t.trim().length>3})),M.proxy(!1),u.forEach((function(t){var e="".concat(Xe).concat(t).concat(We);c.push(M.remote.get(e))}));var f=this.facadeMap_.getProjection().code;this.arrayXZY=Promise.all(c).then((function(t){M.proxy(!0),t.forEach((function(t){var e=0,n=t.text.split(He).join("");n.indexOf("dy")>-1?e=n.split("dy")[1].split(" ").filter((function(t){return""!==t}))[1]:n.indexOf("cellsize")>-1&&(e=n.split("cellsize")[1].split(" ").filter((function(t){return""!==t}))[1]),l.push(parseFloat(e))}));var r=[];l.forEach((function(t,e){var n=u[e].split(","),i=ol.extent.getCenter([parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])]);r.push([i[0],i[1],t])}));var i=r.map((function(t){return ol.proj.transform(t,"EPSG:4326",f)}));return i=i.filter((function(t){return t[2]>0})),n&&e.showProfile(i),i})).catch((function(t){M.proxy(!0),M.dialog.error(h("exception.query_profile"),"Error")}))}},{key:"calculatePoint",value:function(t){var e=this,n={map:{coordinates:t.getGeometry().coordinates,projection:this.facadeMap_.getProjection().code},geographic:{coordinates:ol.proj.transform(t.getGeometry().coordinates,this.facadeMap_.getProjection().code,Ve),projection:Ve}},r="".concat(n.geographic.coordinates[0],",").concat(n.geographic.coordinates[1],",").concat(n.geographic.coordinates[0]+1e-5,",").concat(n.geographic.coordinates[1]+1e-6);M.proxy(!1);var i="".concat(Xe).concat(r).concat(We);M.remote.get(i).then((function(t){M.proxy(!0);var r=0,i=t.text.split(He).join("");i.indexOf("dy")>-1?r=i.split("dy")[1].split(" ").filter((function(t){return""!==t}))[1]:i.indexOf("cellsize")>-1&&(r=i.split("cellsize")[1].split(" ").filter((function(t){return""!==t}))[1]),n.altitude=r,e.facadeControl.showPointProfile(n)})).catch((function(t){M.proxy(!0),M.dialog.error(h("exception.query_profile"),"Error")}))}},{key:"showProfile",value:function(t){var e=this,n=new ol.geom.LineString(t),r=new ol.Feature({geometry:n,name:"Line"});this.pt=new ol.Feature(new ol.geom.Point([0,0]));var i=new Ne({info:{zmin:h("zmin"),zmax:h("zmax"),altitude:h("altitude"),distance:h("distance"),ytitle:h("ytitle"),xtitle:h("xtitle"),altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"},projection:this.facadeMap_.getProjection().code,map:this.facadeMap_.getMapImpl(),title:h("analysisProfile"),pointLayer:this.source_,width:400,height:200});this.facadeMap_.getMapImpl().addControl(i),i.setGeometry(r),this.pt.setStyle([]),this.source_.addFeature(this.pt),i.on(["over","out"],(function(t){"over"===t.type&&i.popup("".concat(t.coord[2]," m")),function(t){e.pt&&("over"===t.type?(e.pt.setGeometry(new ol.geom.Point(t.coord)),e.pt.setStyle([new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ff0000"})})})])):e.pt.setStyle([]))}(t)})),i.show()}},{key:"findNewPoints",value:function(t,e){var n,r,i,o=this.facadeMap_.getProjection().code,a=ol.proj.transform(t,o,Ye),s=ol.proj.transform(e,o,Ye),u=this.getAngleBetweenPoints(a,s),l=this.getDistBetweenPoints(t,e),c="";if(l>=50){for(var f=l/this.distance_>this.distance_?l/this.distance_:this.distance_,h=0;h<=l/f;h+=1){u>=0&&u<=90?(n=1,r=1):u>=90?(n=-1,r=1):u<=0&&u>=-90?(n=1,r=-1):(n=-1,r=-1);var p=[Math.cos(u*Math.PI/180)*(f*h)+a[0],Math.sin(u*Math.PI/180)*(f*h)+a[1]],d=[Math.cos(u*Math.PI/180)*(f*h+n)+a[0],Math.sin(u*Math.PI/180)*(f*h+r)+a[1]],y=ol.proj.transform(p,Ye,Ve),g=ol.proj.transform(d,Ye,Ve);c+="".concat(y,",").concat(g,"|")}i=c}else{var v=l/this.distance_>this.distance_?l/this.distance_:this.distance_;u>=0&&u<=90?(n=1,r=1):u>=90?(n=-1,r=1):u<=0&&u>=-90?(n=1,r=-1):(n=-1,r=-1);var m=[Math.cos(u*Math.PI/180)*v+a[0],Math.sin(u*Math.PI/180)*v+a[1]],_=[Math.cos(u*Math.PI/180)*(v+n)+a[0],Math.sin(u*Math.PI/180)*(v+r)+a[1]],b=ol.proj.transform(m,Ye,Ve),w=ol.proj.transform(_,Ye,Ve);i="".concat(b,",").concat(w,"|")}return i}},{key:"getDistBetweenPoints",value:function(t,e){var n=this.facadeMap_.getProjection().code;return new ol.geom.LineString([ol.proj.transform(t,n,Ye),ol.proj.transform(e,n,Ye)]).getLength()}},{key:"getAngleBetweenPoints",value:function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return 180*Math.atan2(o-r,i-n)/Math.PI}},{key:"setStyle",value:function(t,e){e&&e.setStyle(this.createStyle(t))}},{key:"createStyle",value:function(t){return new ol.style.Style({fill:new ol.style.Fill({color:t.replace(")",", 0.2)")}),stroke:new ol.style.Stroke({color:t,width:3}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:t})})})}},{key:"getFeatureCoordinates",value:function(t){return t.getImpl().getOLFeature().getGeometry().getCoordinates()}},{key:"getFeatureLength",value:function(t){return t.getImpl().getOLFeature().getGeometry().getLength()}},{key:"getFeatureArea",value:function(t){return t.getImpl().getOLFeature().getGeometry().getArea()}},{key:"getGeometryLength",value:function(t){var e=0,n=this.facadeMap_.getProjection().code,r=this.facadeMap_.getProjection().units;if("EPSG:3857"===n)e=ol.sphere.getLength(t);else if("d"===r)for(var i=t.getCoordinates(),o=0,a=i.length-1;o<a;o+=1)e+=ol.sphere.getDistance(ol.proj.transform(i[o],n,"EPSG:4326"),ol.proj.transform(i[o+1],n,"EPSG:4326"));else e=t.getLength();return e}},{key:"calculate3DLength",value:function(t,e,n){var r=this,i=n;t.then((function(t){for(var n=0,o=0,a=t.length-1;o<a;o+=1){var s=new ol.geom.LineString([t[o],t[o+1]]),u=r.getGeometryLength(s),l=Math.abs(t[o][2]-t[o+1][2]);n+=Math.sqrt(u*u+l*l)}n<e&&(n=e+(e-n)/2);var c="".concat(Ze(n/1e3,2),"km");n<1e3&&(c="".concat(Ze(n,0),"m")),i.innerHTML="3D: ".concat(c)})).catch((function(t){i.innerHTML="-",M.dialog.error(h("try_again"))}))}},{key:"get3DLength",value:function(t,e){var n=document.querySelector("".concat(t)),r=this.getFeatureLength(e);this.calculateProfile(e,!1),this.calculate3DLength(this.arrayXZY,r,n)}},{key:"getAreaGeoJSON",value:function(t){var e=new M.impl.format.GeoJSON,n=this.facadeMap_.getProjection().code;return t.map((function(t){var r=t.getImpl().getOLFeature(),i=ol.sphere.getArea(r.getGeometry());r.getGeometry().transform(n,"EPSG:3857");var o=e.writeFeatureObject(r);return o.properties={area:{km:i/Math.pow(10,6),m:i}},o}))}}],r&&De(n.prototype,r),i&&De(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),Qe=n(3268),Je=n.n(Qe),$e=n(1242),tn=n.n($e),en=n(6231),nn=n.n(en),rn=function(){document.querySelectorAll("div.m-mapea-container div.m-dialog div.m-title").forEach((function(t){t.style.backgroundColor="#71a7d3"})),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3",document.querySelector("div.m-dialog.info div.m-button > button").style.backgroundColor="#71a7d3"};function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function an(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return sn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ln(r.key),r)}}function ln(t){var e=function(t,e){if("object"!=on(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=on(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==on(e)?e:e+""}function cn(t,e,n){return e=pn(e),function(t,e){if(e&&("object"==on(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fn()?Reflect.construct(e,n||[],pn(t).constructor):e.apply(t,n))}function fn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fn=function(){return!!t})()}function hn(){return hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=pn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},hn.apply(null,arguments)}function pn(t){return pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pn(t)}function dn(t,e){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dn(t,e)}var yn=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(Ke)&&M.exception(h("exception"));var i=new Ke(t);return r=cn(this,e,[i,"Analysis"]),i.facadeControl=r,r.map_=t,r.managementControl_=n,r.template=null,r.layer_=null,r.bufferLayer=null,r.destroyLayerBufferFN=r.destroyLayerBuffer.bind(r),r.map_.on(M.evt.REMOVED_LAYER,r.destroyLayerBufferFN),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dn(t,e)}(e,M.Control),n=e,r=[{key:"destroyLayerBuffer",value:function(t){t.filter((function(t){return"bufferLayer"===t.name})).length>0&&(this.bufferLayer=null)}},{key:"active",value:function(t){this.template=M.template.compileSync(Je(),{vars:{translations:{analysisProfile:h("analysisProfile"),analysisBuffer:h("analysisBuffer"),calculate:h("calculate"),getGeoJSON:h("getGeoJSON"),extension:h("extension")}}}),t.querySelector("#m-vectorsmanagement-controls").appendChild(this.template),this.addEvents(),this.managementControl_.accessibilityTab(this.template);var e=this.managementControl_.selectionControl.selectedFeatures_[0];e&&this.showFeatureInfo(e)}},{key:"initializeLayers",value:function(){this.bufferLayer||(this.bufferLayer=new M.layer.Vector({extract:!1,name:"bufferLayer"},{displayInLayerSwitcher:!0}),this.bufferLayer.setStyle(new M.style.Polygon({stroke:{color:"#71a7d3"},fill:{color:"#71a7d3",opacity:.6}})),this.map_.addLayers(this.bufferLayer))}},{key:"addEvents",value:function(){var t=this;this.template.querySelector("#topographic-profile-btn").addEventListener("click",(function(e){return t.analysisBtnClick(e.target.id)})),this.template.querySelector("#buffer-btn").addEventListener("click",(function(e){return t.analysisBtnClick(e.target.id)})),this.template.querySelector("#vectorsmanagement-btnCoord").addEventListener("click",(function(e){t.analysisBtnClick(e.target.id),e.target.classList.contains("activated")&&(document.querySelector(".m-vectorsmanagement-analysis-featureInfo").style.display="block",document.querySelector("#vectorsmanagement-analysis-btn").style.display="none")})),this.template.querySelector("#vectorsmanagement-analysis-btn").addEventListener("click",this.calculateAnalysis.bind(this)),this.template.querySelector("#vectorsmanagement-btnToGeojson").addEventListener("click",(function(){var e=t.managementControl_.selectionControl,n="layer"===e.selection_?t.layer_.getFeatures():e.getSelectedFeatures(),r=t.impl_.getAreaGeoJSON(n),i=JSON.stringify(1===r.length?r[0]:r,null,2);M.dialog.info('<pre class="vectorsmanagement-dialogCode"><code>'.concat(i,"</code></pre>"),"GeoJSON"),rn()}))}},{key:"analysisBtnClick",value:function(t){var e=this.getControlActive();e&&e.id!==t&&this.template.querySelector("#".concat(e.id)).classList.remove("activated"),this.template.querySelector("#".concat(t)).classList.add("activated"),this.template.querySelector("#vectorsmanagement-analysis-btn").style.display="block",document.querySelector(".m-vectorsmanagement-analysis-featureInfo").style.display="none"}},{key:"getControlActive",value:function(){return 0!==this.template.querySelectorAll(".m-vectorsmanagement-analysis>#analysisBtns .activated").length&&this.template.querySelectorAll(".m-vectorsmanagement-analysis>#analysisBtns .activated")[0]}},{key:"setLayer",value:function(t){this.layer_=t,this.getImpl().setOLLayer(this.layer_.getImpl().getOL3Layer())}},{key:"onSelect",value:function(t){var e=this.layer_.getFeatures(),n=t.target.getFeatures().getArray()[0];this.feature=e.filter((function(t){return t.getImpl().getOLFeature()===n}))[0]||void 0,this.calculateAnalysis()}},{key:"calculateAnalysis",value:function(){var t=this.getControlActive();"topographic-profile-btn"===t.id?this.getProfile():"buffer-btn"===t.id&&this.drawBuffer()}},{key:"getProfile",value:function(){var t=this.managementControl_.getSelectedFeatures();t.length>0?t.length>1?M.dialog.info(h("exception.topographic_one_element")):(this.feature=t[0],"Point"!==this.feature.getGeometry().type?this.getImpl().calculateProfile(this.feature):this.getImpl().calculatePoint(this.feature)):M.dialog.info(h("exception.featuresel"))}},{key:"drawBuffer",value:function(){var t=this,e=this.managementControl_.getSelection();if("feature"===e&&0===this.managementControl_.getSelectedFeatures().length)M.dialog.info(h("exception.featuresel"));else if("layer"===e&&0===this.layer_.getFeatures().length)M.dialog.info(h("exception.emptylayer"));else{M.dialog.info('<div id="chooseBuffer">\n          <input type="number" id="metreBuffer" value="50" style="width: 10rem;">\n          <div style="padding-top: 0.5rem;text-align: center;">\n            <input type="radio" name="unit" id="metro" value="m" checked="checked"/>\n            <label for="metro">'.concat(h("unit_m"),'</label>\n            <input type="radio" name="unit" id="kilometro" value="km"/>\n            <label for="kilometro">').concat(h("unit_km"),"</label>\n          </div>\n        </div>"),h("title_popup_buffer"));var n="#71a7d3";document.querySelector(".m-dialog > div.m-modal > div.m-content").style.minWidth="auto",document.querySelector(".m-modal .m-title").style.backgroundColor=n;var r=document.querySelector(".m-button button"),i=document.querySelector("div.m-modal input#metreBuffer"),o=50;i.addEventListener("keyup",(function(){o=i.value,r.style.pointerEvents=null===document.querySelector("div.m-modal input#metreBuffer:invalid")?"initial":"none"})),i.addEventListener("keydown",(function(){r.style.pointerEvents=null===document.querySelector("div.m-modal input#metreBuffer:invalid")?"initial":"none"}));var a=1,s=document.querySelector("div.m-modal input#metro"),u=document.querySelector("div.m-modal input#kilometro");s.addEventListener("change",(function(){a=1})),u.addEventListener("change",(function(){a=1e3})),r.style.backgroundColor=n;var l=document.createElement("button");l.innerHTML=h("accept"),r.innerHTML=h("close"),l.style.width="75px",l.style.marginRight="8px",l.style.backgroundColor=n,r.parentElement.insertBefore(l,r),l.addEventListener("click",(function(e){t.initializeLayers(),t.addBuffer_(o*a),r.click()}))}}},{key:"addBuffer_",value:function(t){var e=this,n=this.managementControl_.getSelection(),r=[],i=this.managementControl_.selectionControl.getLayer().getImpl().getOL3Layer().ol_uid;("feature"===n?this.managementControl_.getSelectedFeatures():this.layer_.getFeatures()).forEach((function(n){var o=e.createFeatureBuffer(n,t,i);r.push(o)})),this.bufferLayer.addFeatures(r)}},{key:"createFeatureBuffer",value:function(t,e,n){var r=this.getImpl().getMapeaFeatureClone(t).getImpl().getOLFeature();this.getImpl().setStyle("rgba(113, 167, 211)",r);var i=new ol.format.GeoJSON;r.getGeometry().transform(this.map_.getProjection().code,"EPSG:4326");var o=i.writeFeatureObject(r),a=Ee(o,parseInt(e,10),{units:"meters"});return r.setGeometry(i.readFeature(a).getGeometry().transform("EPSG:4326",this.map_.getProjection().code)),r.set("parentID",n),M.impl.Feature.olFeature2Facade(r)}},{key:"showPointProfile",value:function(t){var e=this;this.pointTemplate&&document.body.removeChild(this.pointTemplate);var n=M.impl.ol.js.projections.getSupportedProjs().filter((function(e){return e.codes.includes(t.map.projection)}))[0],r="m"===n.units?"m":"¬∞",i="m"===n.units?["X","Y"]:[h("creationLongitude"),h("creationLatitude")],o=M.impl.ol.js.projections.getSupportedProjs().filter((function(e){return e.codes.includes(t.geographic.projection)}))[0],a=n.codes[0]!==o.codes[0];this.pointTemplate=M.template.compileSync(nn(),{vars:{translations:{longitude:h("creationLongitude"),latitude:h("creationLatitude"),altitude:h("altitude"),title_point_profile:h("title_point_profile"),point_profile_map_coordinates:h("point_profile_map_coordinates"),point_profile_geographic_coordinates:h("point_profile_geographic_coordinates")},mapCoordX:"".concat(i[0],": ").concat(t.map.coordinates[0]).concat(r),mapCoordY:"".concat(i[1],": ").concat(t.map.coordinates[1]).concat(r),mapProj:"".concat(n.datum," - ").concat(n.proj.toUpperCase()," (").concat(n.codes[0],")"),geographicCoordX:"".concat(t.geographic.coordinates[0],"¬∞"),geographicCoordY:"".concat(t.geographic.coordinates[1],"¬∞"),geographicProj:"".concat(o.datum," - ").concat(o.proj.toUpperCase()," (").concat(o.codes[0],")"),altitude:t.altitude,dist:a}}),document.body.appendChild(this.pointTemplate),this.managementControl_.accessibilityTab(this.pointTemplate),this.pointTemplate.querySelector(".m-panel-btn").addEventListener("click",(function(){e.removeModalEvents(),document.body.removeChild(e.pointTemplate),e.pointTemplate=null}))}},{key:"mouseupFunction",value:function(){this.isDragging=!1}},{key:"mousemoveFunction",value:function(t){this.isDragging&&(this.pointTemplate.style.top="".concat(t.clientY-this.offsetY+this.pointTemplate.clientHeight/2,"px"),this.pointTemplate.style.left="".concat(t.clientX-this.offsetX+this.pointTemplate.clientWidth/2,"px"))}},{key:"addModalEvents",value:function(){var t=this;this.pointTemplate.addEventListener("mousedown",(function(e){t.isDragging=!0,t.offsetX=e.offsetX,t.offsetY=e.offsetY})),this.mouseupFunctionEvent=this.mouseupFunction.bind(this),this.mousemoveFunctionEvent=this.mousemoveFunction.bind(this),document.addEventListener("mouseup",this.mouseupFunctionEvent),document.addEventListener("mousemove",this.mousemoveFunctionEvent)}},{key:"removeModalEvents",value:function(){document.removeEventListener("mouseup",this.mouseupFunctionEvent),document.removeEventListener("mousemove",this.mousemoveFunctionEvent)}},{key:"showFeatureInfo",value:function(t){var e=this,n=document.querySelector("#analysisBtns #featureInfo");null!==n&&(n.classList.remove("closed"),n.innerHTML="");var r=!1,i=!1,o=!1;switch(t.getGeometry().type){case"Point":case"MultiPoint":var a=an(this.getImpl().getFeatureCoordinates(t),2),s=a[0],u=a[1];null!==n&&((r={}).x=Math.round(1e3*s)/1e3,r.y=Math.round(1e3*u)/1e3);break;case"LineString":case"MultiLineString":var l=this.getImpl().getFeatureLength(t),c="km";l>100?l=Math.round(l/1e3*100)/100:(l=Math.round(100*l)/100,c="m"),null!==n&&((i={}).length=l,i.units=c);break;case"Polygon":case"MultiPolygon":var f=this.getImpl().getFeatureArea(t),h="km";f>1e4?f=Math.round(f/1e6*100)/100:(f=Math.round(100*f)/100,h="m"),null!==n&&((o={}).area=f,o.areaUnits=h);break;default:null!==document.querySelector("#edition-container #featureInfo")&&document.querySelector("#edition-container #featureInfo").classList.add("closed")}this.infoanalysisTemplate=M.template.compileSync(tn(),{vars:{point:r,line:i,polygon:o}}),this.template.querySelector("#analysisBtns #featureInfo").appendChild(this.infoanalysisTemplate),this.managementControl_.accessibilityTab(this.infoanalysisTemplate);var p=document.querySelector("#infoAnalisis3DLine");p&&p.addEventListener("click",(function(){e.getImpl().get3DLength("#infoAnalisis3DLine",t)}))}},{key:"destroy",value:function(){this.map_.un(M.evt.REMOVED_LAYER,this.destroyLayerBufferFN)}},{key:"activate",value:function(){hn(pn(e.prototype),"activate",this).call(this)}},{key:"removeBufferFeatures",value:function(){if(null!==this.bufferLayer){var t=this.managementControl_.selectionControl.getLayer().getImpl().getOL3Layer().ol_uid,e=this.bufferLayer.getFeatures().filter((function(e){return e.getImpl().getOLFeature().get("parentID")===t}));this.bufferLayer.removeFeatures(e)}}},{key:"deactivate",value:function(){this.template.remove(),this.removeModalEvents()}},{key:"equals",value:function(t){return t instanceof e}}],r&&un(n.prototype,r),i&&un(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function gn(t){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(t)}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mn(r.key),r)}}function mn(t){var e=function(t,e){if("object"!=gn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gn(e)?e:e+""}const _n=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null},(e=[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&vn(t.prototype,e),n&&vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),bn="propertychange";function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sn(r.key),r)}}function Sn(t){var e=function(t,e){if("object"!=wn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wn(e)?e:e+""}function En(t,e){return t>e?1:t<e?-1:0}function Cn(t,e,n){if(t[0]<=e)return 0;var r=t.length;if(e<=t[r-1])return r-1;if("function"==typeof n){for(var i=1;i<r;++i){var o=t[i];if(o===e)return i;if(o<e)return n(e,t[i-1],o)>0?i-1:i}return r-1}if(n>0){for(var a=1;a<r;++a)if(t[a]<e)return a-1;return r-1}if(n<0){for(var s=1;s<r;++s)if(t[s]<=e)return s;return r-1}for(var u=1;u<r;++u){if(t[u]==e)return u;if(t[u]<e)return t[u-1]-e<e-t[u]?u-1:u}return r-1}function On(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function In(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function Pn(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function kn(){return!0}function Mn(){return!1}function Tn(){}function Ln(t){for(var e in t)delete t[e]}function Nn(t){var e;for(e in t)return!1;return!e}function An(t){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(t)}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jn(r.key),r)}}function jn(t){var e=function(t,e){if("object"!=An(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=An(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==An(e)?e:e+""}function Dn(t,e,n){return e=Bn(e),function(t,e){if(e&&("object"==An(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fn()?Reflect.construct(e,n||[],Bn(t).constructor):e.apply(t,n))}function Fn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fn=function(){return!!t})()}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}function Gn(t,e){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gn(t,e)}const zn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dn(this,e)).eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gn(t,e)}(e,t),n=e,(r=[{key:"addEventListener",value:function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);r.includes(e)||r.push(e)}}},{key:"dispatchEvent",value:function(t){var e="string"==typeof t,n=e?t:t.type,r=this.listeners_&&this.listeners_[n];if(r){var i=e?new _n(t):t;i.target||(i.target=this.eventTarget_||this);var o,a=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,s[n]=0),++a[n];for(var u=0,l=r.length;u<l;++u)if(!1===(o="handleEvent"in r[u]?r[u].handleEvent(i):r[u].call(this,i))||i.propagationStopped){o=!1;break}if(0==--a[n]){var c=s[n];for(delete s[n];c--;)this.removeEventListener(n,Tn);delete a[n]}return o}}},{key:"disposeInternal",value:function(){this.listeners_&&Ln(this.listeners_)}},{key:"getListeners",value:function(t){return this.listeners_&&this.listeners_[t]||void 0}},{key:"hasListener",value:function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var r=n.indexOf(e);-1!==r&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=Tn,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}}}])&&Rn(n.prototype,r),i&&Rn(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disposed=!1},(e=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}])&&xn(t.prototype,e),n&&xn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()),qn="change",Un="contextmenu",Vn="dblclick";function Yn(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function Xn(t,e,n,r){return Yn(t,e,n,r,!0)}function Wn(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ln(t))}function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kn(r.key),r)}}function Kn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hn(e)?e:e+""}function Qn(t,e,n){return e=$n(e),function(t,e){if(e&&("object"==Hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jn()?Reflect.construct(e,n||[],$n(t).constructor):e.apply(t,n))}function Jn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jn=function(){return!!t})()}function $n(t){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$n(t)}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tr(t,e)}var er=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Qn(this,e)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}(e,t),n=e,(r=[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(qn)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Yn(this,t[i],e);return r}return Yn(this,t,e)}},{key:"onceInternal",value:function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=Xn(this,t[i],e)}else n=Xn(this,t,e);return e.ol_key=n,n}},{key:"unInternal",value:function(t,e){var n=e.ol_key;if(n)nr(n);else if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}])&&Zn(n.prototype,r),i&&Zn(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(zn);function nr(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)Wn(t[e]);else Wn(t)}er.prototype.on,er.prototype.once,er.prototype.un;const rr=er;function ir(){throw new Error("Unimplemented abstract method.")}var or=0;function ar(t){return t.ol_uid||(t.ol_uid=String(++or))}function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cr(r.key),r)}}function lr(t,e,n){return e&&ur(t.prototype,e),n&&ur(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cr(t){var e=function(t,e){if("object"!=sr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sr(e)?e:e+""}function fr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t,e,n){return e=dr(e),function(t,e){if(e&&("object"==sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pr()?Reflect.construct(e,n||[],dr(t).constructor):e.apply(t,n))}function pr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pr=function(){return!!t})()}function dr(t){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dr(t)}function yr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gr(t,e)}function gr(t,e){return gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gr(t,e)}var vr=function(t){function e(t,n,r){var i;return fr(this,e),(i=hr(this,e,[t])).key=n,i.oldValue=r,i}return yr(e,t),lr(e)}(_n);const mr=function(t){function e(t){var n;return fr(this,e),(n=hr(this,e)).on,n.once,n.un,ar(n),n.values_=null,void 0!==t&&n.setProperties(t),n}return yr(e,t),lr(e,[{key:"get",value:function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"getPropertiesInternal",value:function(){return this.values_}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(t,e){var n;n="change:".concat(t),this.hasListener(n)&&this.dispatchEvent(new vr(n,t,e)),n=bn,this.hasListener(n)&&this.dispatchEvent(new vr(n,t,e))}},{key:"addChangeListener",value:function(t,e){this.addEventListener("change:".concat(t),e)}},{key:"removeChangeListener",value:function(t,e){this.removeEventListener("change:".concat(t),e)}},{key:"set",value:function(t,e,n){var r=this.values_||(this.values_={});if(n)r[t]=e;else{var i=r[t];r[t]=e,i!==e&&this.notify(t,i)}}},{key:"setProperties",value:function(t,e){for(var n in t)this.set(n,t[n],e)}},{key:"applyProperties",value:function(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}},{key:"unset",value:function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],Nn(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}])}(rr),_r="active";function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xr(r.key),r)}}function xr(t){var e=function(t,e){if("object"!=br(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==br(e)?e:e+""}function Sr(t,e,n){return e=Cr(e),function(t,e){if(e&&("object"==br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Er()?Reflect.construct(e,n||[],Cr(t).constructor):e.apply(t,n))}function Er(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Er=function(){return!!t})()}function Cr(t){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cr(t)}function Or(t,e){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Or(t,e)}const Ir=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sr(this,e)).on,n.once,n.un,t&&t.handleEvent&&(n.handleEvent=t.handleEvent),n.map_=null,n.setActive(!0),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Or(t,e)}(e,t),n=e,(r=[{key:"getActive",value:function(){return this.get(_r)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(t){return!0}},{key:"setActive",value:function(t){this.set(_r,t)}},{key:"setMap",value:function(t){this.map_=t}}])&&wr(n.prototype,r),i&&wr(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mr),Pr=0,kr=1,Mr=2,Tr=3;function Lr(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rr(r.key),r)}}function Rr(t){var e=function(t,e){if("object"!=Nr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nr(e)?e:e+""}var jr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Lr(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}return e=t,n=[{key:"clone",value:function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return ir()}},{key:"getImage",value:function(t){return ir()}},{key:"getHitDetectionImage",value:function(){return ir()}},{key:"getPixelRatio",value:function(t){return 1}},{key:"getImageState",value:function(){return ir()}},{key:"getImageSize",value:function(){return ir()}},{key:"getOrigin",value:function(){return ir()}},{key:"getSize",value:function(){return ir()}},{key:"setDisplacement",value:function(t){this.displacement_=t}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=Lr(t)}},{key:"listenImageChange",value:function(t){ir()}},{key:"load",value:function(){ir()}},{key:"unlistenImageChange",value:function(t){ir()}}],n&&Ar(e.prototype,n),r&&Ar(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();const Dr=jr;function Fr(t,e,n){return Math.min(Math.max(t,e),n)}function Br(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return Gr(t,e,n,r)}function Gr(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function zr(t,e){var n=t%e;return n*e<0?n+e:n}function qr(t,e,n){return t+n*(e-t)}function Ur(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var Vr=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Yr=/^([a-z]*)$|^hsla?\(.*\)$/i;function Xr(t){return"string"==typeof t?t:Qr(t)}function Wr(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}var Hr=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var i=0;for(var o in t)3&i++||(delete t[o],--e)}r=function(t){var e,n,r,i,o;Yr.exec(t)&&(t=Wr(t));if(Vr.exec(t)){var a,s=t.length-1;a=s<=4?1:2;var u=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),r=parseInt(t.substr(1+2*a,a),16),i=u?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,u&&(i=(i<<4)+i)),o=[e,n,r,i/255]}else if(t.startsWith("rgba("))Kr(o=t.slice(5,-1).split(",").map(Number));else{if(!t.startsWith("rgb("))throw new Error("Invalid color");(o=t.slice(4,-1).split(",").map(Number)).push(1),Kr(o)}return o}(n),t[n]=r,++e}return r}}();function Zr(t){return Array.isArray(t)?t:Hr(t)}function Kr(t){return t[0]=Fr(t[0]+.5|0,0,255),t[1]=Fr(t[1]+.5|0,0,255),t[2]=Fr(t[2]+.5|0,0,255),t[3]=Fr(t[3],0,1),t}function Qr(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Jr(t){return Array.isArray(t)?Qr(t):t}var $r="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",ti=($r.includes("firefox"),$r.includes("safari")&&!$r.includes("chrom")&&($r.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test($r)),$r.includes("webkit")&&$r.includes("edge"),$r.includes("macintosh"),"undefined"!=typeof devicePixelRatio&&devicePixelRatio,"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope),ei="undefined"!=typeof Image&&Image.prototype.decode;!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}}();function ni(t,e,n,r){var i;return i=n&&n.length?n.shift():ti?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}var ri,ii,oi=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),ai=["style","variant","weight","size","lineHeight","family"],si=function(t){var e=t.match(oi);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=ai.length;r<i;++r){var o=e[r+1];void 0!==o&&(n[ai[r]]=o)}return n.families=n.family.split(/,\s?/),n},ui="10px sans-serif",li="#000",ci="round",fi=[],hi="round",pi="#000",di="center",yi="middle",gi=[0,0,0,0],vi=new mr,mi=null,_i={},bi=function(){var t,e,n="32px ",r=["monospace","serif"],i=r.length,o="wmytzilWMYTZIL@#/&?$%10ÔÄì";function a(t,a,s){for(var u=!0,l=0;l<i;++l){var c=r[l];if(e=Si(t+" "+a+" "+n+c,o),s!=c){var f=Si(t+" "+a+" "+n+s+","+c,o);u=u&&f!=e}}return!!u}function s(){for(var e=!0,n=vi.getKeys(),r=0,i=n.length;r<i;++r){var o=n[r];vi.get(o)<100&&(a.apply(this,o.split("\n"))?(Ln(_i),mi=null,ri=void 0,vi.set(o,100)):(vi.set(o,vi.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=si(e);if(n)for(var r=n.families,i=0,o=r.length;i<o;++i){var u=r[i],l=n.style+"\n"+n.weight+"\n"+u;void 0===vi.get(l)&&(vi.set(l,100,!0),a(n.style,n.weight,u)||(vi.set(l,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),wi=function(t){var e=_i[t];if(null==e){if(ti){var n=si(t),r=xi(t,"≈Ωg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else ii||((ii=document.createElement("div")).innerHTML="M",ii.style.minHeight="0",ii.style.maxHeight="none",ii.style.height="auto",ii.style.padding="0",ii.style.border="none",ii.style.position="absolute",ii.style.display="block",ii.style.left="-99999px"),ii.style.font=t,document.body.appendChild(ii),e=ii.offsetHeight,document.body.removeChild(ii);_i[t]=e}return e};function xi(t,e){return mi||(mi=ni(1,1)),t!=ri&&(mi.font=t,ri=mi.font),mi.measureText(e)}function Si(t,e){return xi(t,e).width}function Ei(t,e,n){if(e in n)return n[e];var r=e.split("\n").reduce((function(e,n){return Math.max(e,Si(t,n))}),0);return n[e]=r,r}function Ci(t,e,n,r,i,o,a,s,u,l,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(u,l),t.scale(c[0],c[1]),function(t,e){for(var n=t.contextInstructions,r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}(r,t)):c[0]<0||c[1]<0?(t.translate(u,l),t.scale(c[0],c[1]),t.drawImage(r,i,o,a,s,0,0,a,s)):t.drawImage(r,i,o,a,s,u,l,a*c[0],s*c[1]),t.restore()}function Oi(t){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(t)}function Ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pi(r.key),r)}}function Pi(t){var e=function(t,e){if("object"!=Oi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Oi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oi(e)?e:e+""}function ki(t,e,n){return e=Ti(e),function(t,e){if(e&&("object"==Oi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mi()?Reflect.construct(e,n||[],Ti(t).constructor):e.apply(t,n))}function Mi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mi=function(){return!!t})()}function Ti(t){return Ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ti(t)}function Li(t,e){return Li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Li(t,e)}var Ni=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ki(this,e,[{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}])).canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=void 0!==t.fill?t.fill:null,n.origin_=[0,0],n.points_=t.points,n.radius_=void 0!==t.radius?t.radius:t.radius1,n.radius2_=t.radius2,n.angle_=void 0!==t.angle?t.angle:0,n.stroke_=void 0!==t.stroke?t.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Li(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}},{key:"getAnchor",value:function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}},{key:"getImage",value:function(t){var e=this.canvas_[t];if(!e){var n=this.renderOptions_,r=ni(n.size*t,n.size*t);this.draw_(n,r,t),e=r.canvas,this.canvas_[t]=e}return e}},{key:"getPixelRatio",value:function(t){return t}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return Mr}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t,this.render()}},{key:"listenImageChange",value:function(t){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t){}},{key:"calculateLineJoinSize_",value:function(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,i=void 0===this.radius2_?r:this.radius2_;if(r<i){var o=r;r=i,i=o}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,u=i*Math.sin(s),l=r-Math.sqrt(i*i-u*u),c=Math.sqrt(u*u+l*l),f=c/u;if("miter"===t&&f<=n)return f*e;var h=e/2/f,p=e/2*(l/c),d=Math.sqrt((r+h)*(r+h)+p*p)-r;if(void 0===this.radius2_||"bevel"===t)return 2*d;var y=r*Math.sin(s),g=i-Math.sqrt(r*r-y*y),v=Math.sqrt(y*y+g*g)/y;if(v<=n){var m=v*e/2-i-r;return 2*Math.max(d,m)}return 2*d}},{key:"createRenderOptions",value:function(){var t,e=ci,n=hi,r=0,i=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=pi),t=Jr(t),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(n=this.stroke_.getLineJoin())&&(n=hi),void 0===(e=this.stroke_.getLineCap())&&(e=ci),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));var s=this.calculateLineJoinSize_(n,a,r),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*u+s),lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:n,miterLimit:r}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}},{key:"draw_",value:function(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var r=this.fill_.getColor();null===r&&(r=li),e.fillStyle=Jr(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},{key:"createHitDetectionCanvas_",value:function(t){if(this.fill_){var e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=Zr(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var r=ni(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}},{key:"createPath_",value:function(t){var e=this.points_,n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{var r=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=i+a*o,u=a%2==0?n:r;t.lineTo(u*Math.cos(s),u*Math.sin(s))}t.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=li,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}],r&&Ii(n.prototype,r),i&&Ii(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Dr);const Ai=Ni;function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Di(r.key),r)}}function Di(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ri(e)?e:e+""}function Fi(t,e,n){return e=Gi(e),function(t,e){if(e&&("object"==Ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bi()?Reflect.construct(e,n||[],Gi(t).constructor):e.apply(t,n))}function Bi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bi=function(){return!!t})()}function Gi(t){return Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gi(t)}function zi(t,e){return zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zi(t,e)}var qi=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fi(this,e,[{points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zi(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}},{key:"setRadius",value:function(t){this.radius_=t,this.render()}}],r&&ji(n.prototype,r),i&&ji(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Ai);const Ui=qi;function Vi(t){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(t)}function Yi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xi(r.key),r)}}function Xi(t){var e=function(t,e){if("object"!=Vi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vi(e)?e:e+""}const Wi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.color_=void 0!==e.color?e.color:null}return e=t,(n=[{key:"clone",value:function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(t){this.color_=t}}])&&Yi(e.prototype,n),r&&Yi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function Hi(t){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(t)}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ki(r.key),r)}}function Ki(t){var e=function(t,e){if("object"!=Hi(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hi(e)?e:e+""}const Qi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return e=t,(n=[{key:"clone",value:function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(t){this.color_=t}},{key:"setLineCap",value:function(t){this.lineCap_=t}},{key:"setLineDash",value:function(t){this.lineDash_=t}},{key:"setLineDashOffset",value:function(t){this.lineDashOffset_=t}},{key:"setLineJoin",value:function(t){this.lineJoin_=t}},{key:"setMiterLimit",value:function(t){this.miterLimit_=t}},{key:"setWidth",value:function(t){this.width_=t}}])&&Zi(e.prototype,n),r&&Zi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function Ji(t,e){if(!t)throw new Error(e)}function $i(t){return $i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(t)}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eo(r.key),r)}}function eo(t){var e=function(t,e){if("object"!=$i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$i(e)?e:e+""}var no=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.geometry_=null,this.geometryFunction_=ao,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return e=t,n=[{key:"clone",value:function(){var e=this.getGeometry();return e&&"object"===$i(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(t){this.renderer_=t}},{key:"setHitDetectionRenderer",value:function(t){this.hitDetectionRenderer_=t}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(t){this.text_=t}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ao,this.geometry_=t}},{key:"setZIndex",value:function(t){this.zIndex_=t}}],n&&to(e.prototype,n),r&&to(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();var ro=null;function io(t,e){if(!ro){var n=new Wi({color:"rgba(255,255,255,0.4)"}),r=new Qi({color:"#3399CC",width:1.25});ro=[new no({image:new Ui({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return ro}function oo(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new no({fill:new Wi({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new no({stroke:new Qi({color:e,width:5})}),new no({stroke:new Qi({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new no({image:new Ui({radius:6,fill:new Wi({color:n}),stroke:new Qi({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function ao(t){return t.getGeometry()}const so=no;var uo,lo,co;lo=[0,153,255,1],co=[new so({stroke:new Qi({color:uo=[255,255,255,1],width:5})}),new so({image:new Ui({radius:6,fill:new Wi({color:lo}),stroke:new Qi({color:uo,width:1.5})}),stroke:new Qi({color:lo,width:3}),fill:new Wi({color:[255,255,255,.5]})})];const fo=function(t){if(!0===t)return co;var e=new Wi({color:(t=t||{}).fillColor||"rgba(255,255,255,0.4)"}),n=new Qi({color:t.color||"#3399CC",width:1.25});return[new so({image:new Ui({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]},ho="add",po="remove";function yo(t){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yo(t)}function go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mo(r.key),r)}}function vo(t,e,n){return e&&go(t.prototype,e),n&&go(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mo(t){var e=function(t,e){if("object"!=yo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yo(e)?e:e+""}function _o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(t,e,n){return e=xo(e),function(t,e){if(e&&("object"==yo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wo()?Reflect.construct(e,n||[],xo(t).constructor):e.apply(t,n))}function wo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wo=function(){return!!t})()}function xo(t){return xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xo(t)}function So(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eo(t,e)}function Eo(t,e){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Eo(t,e)}var Co="length",Oo=function(t){function e(t,n,r){var i;return _o(this,e),(i=bo(this,e,[t])).element=n,i.index=r,i}return So(e,t),vo(e)}(_n),Io=function(t){function e(t,n){var r;if(_o(this,e),(r=bo(this,e)).on,r.once,r.un,n=n||{},r.unique_=!!n.unique,r.array_=t||[],r.unique_)for(var i=0,o=r.array_.length;i<o;++i)r.assertUnique_(r.array_[i],i);return r.updateLength_(),r}return So(e,t),vo(e,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)t(e[n],n,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(Co)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Oo(ho,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Oo(po,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Oo(po,n,t)),this.dispatchEvent(new Oo(ho,e,t))}}},{key:"updateLength_",value:function(){this.set(Co,this.array_.length)}},{key:"assertUnique_",value:function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}])}(mr);const Po=Io,ko="opacity",Mo="visible",To="extent",Lo="zIndex",No="maxResolution",Ao="minResolution",Ro="maxZoom",jo="minZoom",Do="source",Fo="map";function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zo(r.key),r)}}function zo(t){var e=function(t,e){if("object"!=Bo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bo(e)?e:e+""}function qo(t,e,n){return e=Yo(e),function(t,e){if(e&&("object"==Bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Uo()?Reflect.construct(e,n||[],Yo(t).constructor):e.apply(t,n))}function Uo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Uo=function(){return!!t})()}function Vo(){return Vo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Yo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Vo.apply(null,arguments)}function Yo(t){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yo(t)}function Xo(t,e){return Xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xo(t,e)}const Wo=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qo(this,e)).on,n.once,n.un,n.background_=t.background;var r=Object.assign({},t);return"object"===Bo(t.properties)&&(delete r.properties,Object.assign(r,t.properties)),r[ko]=void 0!==t.opacity?t.opacity:1,Ji("number"==typeof r[ko],"Layer opacity must be a number"),r[Mo]=void 0===t.visible||t.visible,r[Lo]=t.zIndex,r[No]=void 0!==t.maxResolution?t.maxResolution:1/0,r[Ao]=void 0!==t.minResolution?t.minResolution:0,r[jo]=void 0!==t.minZoom?t.minZoom:-1/0,r[Ro]=void 0!==t.maxZoom?t.maxZoom:1/0,n.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xo(t,e)}(e,t),n=e,(r=[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Fr(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return ir()}},{key:"getLayerStatesArray",value:function(t){return ir()}},{key:"getExtent",value:function(){return this.get(To)}},{key:"getMaxResolution",value:function(){return this.get(No)}},{key:"getMinResolution",value:function(){return this.get(Ao)}},{key:"getMinZoom",value:function(){return this.get(jo)}},{key:"getMaxZoom",value:function(){return this.get(Ro)}},{key:"getOpacity",value:function(){return this.get(ko)}},{key:"getSourceState",value:function(){return ir()}},{key:"getVisible",value:function(){return this.get(Mo)}},{key:"getZIndex",value:function(){return this.get(Lo)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(To,t)}},{key:"setMaxResolution",value:function(t){this.set(No,t)}},{key:"setMinResolution",value:function(t){this.set(Ao,t)}},{key:"setMaxZoom",value:function(t){this.set(Ro,t)}},{key:"setMinZoom",value:function(t){this.set(jo,t)}},{key:"setOpacity",value:function(t){Ji("number"==typeof t,"Layer opacity must be a number"),this.set(ko,t)}},{key:"setVisible",value:function(t){this.set(Mo,t)}},{key:"setZIndex",value:function(t){this.set(Lo,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),Vo(Yo(e.prototype),"disposeInternal",this).call(this)}}])&&Go(n.prototype,r),i&&Go(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mr),Ho="prerender",Zo="postrender",Ko="precompose",Qo=0,Jo=1,$o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var ta={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};function ea(t){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(t)}function na(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ra(r.key),r)}}function ra(t){var e=function(t,e){if("object"!=ea(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ea(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ea(e)?e:e+""}const ia=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit},(e=[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||ta[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}])&&na(t.prototype,e),n&&na(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function oa(t){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oa(t)}function aa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sa(r.key),r)}}function sa(t){var e=function(t,e){if("object"!=oa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oa(e)?e:e+""}function ua(t,e,n){return e=ca(e),function(t,e){if(e&&("object"==oa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,la()?Reflect.construct(e,n||[],ca(t).constructor):e.apply(t,n))}function la(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(la=function(){return!!t})()}function ca(t){return ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ca(t)}function fa(t,e){return fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fa(t,e)}var ha=6378137,pa=Math.PI*ha,da=[-pa,-pa,pa,pa],ya=[-180,-85,180,85],ga=ha*Math.log(Math.tan(Math.PI/2)),va=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ua(this,e,[{code:t,units:"m",extent:da,global:!0,worldExtent:ya,getPointResolution:function(t,e){return t/Math.cosh(e[1]/ha)}}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fa(t,e)}(e,t),n=e,r&&aa(n.prototype,r),i&&aa(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(ia),ma=[new va("EPSG:3857"),new va("EPSG:102100"),new va("EPSG:102113"),new va("EPSG:900913"),new va("http://www.opengis.net/def/crs/EPSG/0/3857"),new va("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _a(t,e,n){var r=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(r));for(var i=0;i<r;i+=n){e[i]=pa*t[i]/180;var o=ha*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>ga?o=ga:o<-ga&&(o=-ga),e[i+1]=o}return e}function ba(t,e,n){var r=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(r));for(var i=0;i<r;i+=n)e[i]=180*t[i]/pa,e[i+1]=360*Math.atan(Math.exp(t[i+1]/ha))/Math.PI-90;return e}function wa(t){return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(t)}function xa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sa(r.key),r)}}function Sa(t){var e=function(t,e){if("object"!=wa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wa(e)?e:e+""}function Ea(t,e,n){return e=Oa(e),function(t,e){if(e&&("object"==wa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ca()?Reflect.construct(e,n||[],Oa(t).constructor):e.apply(t,n))}function Ca(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ca=function(){return!!t})()}function Oa(t){return Oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oa(t)}function Ia(t,e){return Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ia(t,e)}var Pa=[-180,-90,180,90],ka=6378137*Math.PI/180,Ma=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ea(this,e,[{code:t,units:"degrees",extent:Pa,axisOrientation:n,global:!0,metersPerUnit:ka,worldExtent:Pa}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ia(t,e)}(e,t),n=e,r&&xa(n.prototype,r),i&&xa(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(ia),Ta=[new Ma("CRS:84"),new Ma("EPSG:4326","neu"),new Ma("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ma("urn:ogc:def:crs:OGC:2:84"),new Ma("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ma("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ma("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],La={};var Na={};function Aa(t,e,n){var r=t.getCode(),i=e.getCode();r in Na||(Na[r]={}),Na[r][i]=n}const Ra={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ja(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Da(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Da(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Fa(t){for(var e=Ya(),n=0,r=t.length;n<r;++n)Qa(e,t[n]);return e}function Ba(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Ga(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function za(t,e){return Ua(t,e[0],e[1])}function qa(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Ua(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Va(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=Ra.UNKNOWN;return a<n?u|=Ra.LEFT:a>i&&(u|=Ra.RIGHT),s<r?u|=Ra.BELOW:s>o&&(u|=Ra.ABOVE),u===Ra.UNKNOWN&&(u=Ra.INTERSECTING),u}function Ya(){return[1/0,1/0,-1/0,-1/0]}function Xa(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function Wa(t){return Xa(1/0,1/0,-1/0,-1/0,t)}function Ha(t,e,n,r,i){return Ja(Wa(i),t,e,n,r)}function Za(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Ka(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Qa(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Ja(t,e,n,r,i){for(;n<r;n+=i)$a(t,e[n],e[n+1]);return t}function $a(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function ts(t,e){var n;return(n=e(es(t)))||(n=e(ns(t)))||(n=e(ss(t)))?n:(n=e(as(t)))||!1}function es(t){return[t[0],t[1]]}function ns(t){return[t[2],t[1]]}function rs(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function is(t,e,n,r,i){var o=function(t,e,n,r){var i=e*r[0]/2,o=e*r[1]/2,a=Math.cos(n),s=Math.sin(n),u=i*a,l=i*s,c=o*a,f=o*s,h=t[0],p=t[1];return[h-u+f,p-l-c,h-u-f,p-l+c,h+u-f,p+l+c,h+u+f,p+l-c,h-u+f,p-l-c]}(t,e,n,r),a=ja(o,8),s=a[0],u=a[1],l=a[2],c=a[3],f=a[4],h=a[5],p=a[6],d=a[7];return Xa(Math.min(s,l,f,p),Math.min(u,c,h,d),Math.max(s,l,f,p),Math.max(u,c,h,d),i)}function os(t){return t[3]-t[1]}function as(t){return[t[0],t[3]]}function ss(t){return[t[2],t[3]]}function us(t){return t[2]-t[0]}function ls(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function cs(t){return t[2]<t[0]||t[3]<t[1]}function fs(t,e,n,r){if(cs(t))return Wa(n);var i=[];if(r>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<r;++s)i.push(t[0]+o*s/r,t[1],t[2],t[1]+a*s/r,t[2]-o*s/r,t[3],t[0],t[3]-a*s/r);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],l=[],c=0,f=i.length;c<f;c+=2)u.push(i[c]),l.push(i[c+1]);return function(t,e,n){return Xa(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(u,l,n)}function hs(t,e){var n=e.getExtent(),r=rs(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){var i=us(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}function ps(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function ds(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ys(t,e){return Math.sqrt(ds(t,e))}function gs(t,e){if(e.canWrapX()){var n=us(e.getExtent()),r=function(t,e,n){var r=e.getExtent(),i=0;e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||us(r),i=Math.floor((t[0]-r[0])/n));return i}(t,e,n);r&&(t[0]-=r*n)}return t}var vs={info:1,warn:2,error:3,none:4},ms=vs.info;var _s=!0;function bs(t){_s=!(void 0===t||t)}function ws(t,e){if(void 0!==e)for(var n=0,r=t.length;n<r;++n)e[n]=t[n];else e=t.slice();return e}function xs(t,e){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function Ss(t){!function(t,e){La[t]=e}(t.getCode(),t),Aa(t,t,ws)}function Es(t){return"string"==typeof t?La[e=t]||La[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Cs(t){!function(t){t.forEach(Ss)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Aa(e,t,ws)}))}))}function Os(t,e){return t?"string"==typeof t?Es(t):t:Es(e)}function Is(t,e){var n=function(t,e){var n;return t in Na&&e in Na[t]&&(n=Na[t][e]),n}(t.getCode(),e.getCode());return n||(n=xs),n}function Ps(t,e){return Is(Es(t),Es(e))}function ks(t,e,n){return Ps(e,n)(t,void 0,t.length)}function Ms(t,e,n,r){return fs(t,Ps(e,n),void 0,r)}var Ts,Ls,Ns,As=null;function Rs(){return As}function js(t,e){return As?ks(t,e,As):t}function Ds(t,e){return As?ks(t,As,e):(_s&&!ps(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(_s=!1,function(){var t;ms>vs.warn||(t=console).warn.apply(t,arguments)}("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Fs(t,e){return As?Ms(t,e,As):t}function Bs(t,e){return As?Ms(t,As,e):t}function Gs(t,e){if(!As)return t;var n=Es(e).getUnits(),r=As.getUnits();return n&&r?t*ta[n]/ta[r]:t}function zs(t,e,n){return function(r,i,o,a,s){if(r){if(!i&&!e)return r;var u=e?0:o[0]*i,l=e?0:o[1]*i,c=s?s[0]:0,f=s?s[1]:0,h=t[0]+u/2+c,p=t[2]-u/2+c,d=t[1]+l/2+f,y=t[3]-l/2+f;h>p&&(p=h=(p+h)/2),d>y&&(y=d=(y+d)/2);var g=Fr(r[0],h,p),v=Fr(r[1],d,y);if(a&&n&&i){var m=30*i;g+=-m*Math.log(1+Math.max(0,h-r[0])/m)+m*Math.log(1+Math.max(0,r[0]-p)/m),v+=-m*Math.log(1+Math.max(0,d-r[1])/m)+m*Math.log(1+Math.max(0,r[1]-y)/m)}return[g,v]}}}function qs(t){return t}function Us(t,e,n,r){var i=us(e)/n[0],o=os(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function Vs(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Fr(r,n/2,2*e)}function Ys(t,e,n,r,i){return n=void 0===n||n,function(o,a,s,u){if(void 0!==o){var l=r?Us(t,r,s,i):t;return n&&u?Vs(o,l,e):Fr(o,e,l)}}}function Xs(t){if(void 0!==t)return 0}function Ws(t){if(void 0!==t)return t}function Hs(t){return t=t||5*Math.PI/180,function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}function Zs(t){return 1-function(t){return Math.pow(t,3)}(1-t)}function Ks(t){return 3*t*t-2*t*t*t}Cs(ma),Cs(Ta),Ts=ma,Ls=_a,Ns=ba,Ta.forEach((function(t){Ts.forEach((function(e){Aa(t,e,Ls),Aa(e,t,Ns)}))}));var Qs;new Array(6);function Js(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function $s(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function tu(t,e,n,r,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=r*l,t[1]=i*u,t[2]=-r*u,t[3]=i*l,t[4]=a*r*l-s*r*u+e,t[5]=a*i*u+s*i*l+n,t}function eu(t,e){var n,r=(n=e)[0]*n[3]-n[1]*n[2];Ji(0!==r,"Transformation matrix cannot be inverted");var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/r,t[1]=-o/r,t[2]=-a/r,t[3]=i/r,t[4]=(a*l-s*u)/r,t[5]=-(i*l-o*u)/r,t}function nu(t){var e="matrix("+t.join(", ")+")";if(ti)return e;var n=Qs||(Qs=document.createElement("div"));return n.style.transform=e,n.style.transform}function ru(t,e,n,r,i,o){o=o||[];for(var a=0,s=e;s<n;s+=r){var u=t[s],l=t[s+1];o[a++]=i[0]*u+i[2]*l+i[4],o[a++]=i[1]*u+i[3]*l+i[5]}return o&&o.length!=a&&(o.length=a),o}function iu(t,e,n,r,i,o,a){a=a||[];for(var s=Math.cos(i),u=Math.sin(i),l=o[0],c=o[1],f=0,h=e;h<n;h+=r){var p=t[h]-l,d=t[h+1]-c;a[f++]=l+p*s-d*u,a[f++]=c+p*u+d*s;for(var y=h+2;y<h+r;++y)a[f++]=t[y]}return a&&a.length!=f&&(a.length=f),a}function ou(t){return ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(t)}function au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,su(r.key),r)}}function su(t){var e=function(t,e){if("object"!=ou(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ou(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ou(e)?e:e+""}function uu(t,e,n){return e=cu(e),function(t,e){if(e&&("object"==ou(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lu()?Reflect.construct(e,n||[],cu(t).constructor):e.apply(t,n))}function lu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lu=function(){return!!t})()}function cu(t){return cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cu(t)}function fu(t,e){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fu(t,e)}var hu=[1,0,0,1,0,0],pu=function(t){function e(){var t,n,r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=uu(this,e)).extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=(n=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)},a=!1,function(){var t=Array.prototype.slice.call(arguments);return a&&this===o&&Pn(t,i)||(a=!0,o=this,i=t,r=n.apply(this,arguments)),r}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fu(t,e)}(e,t),n=e,r=[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return ir()}},{key:"closestPointXY",value:function(t,e,n,r){return ir()}},{key:"containsXY",value:function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return ir()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Wa(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}},{key:"rotate",value:function(t,e){ir()}},{key:"scale",value:function(t,e,n){ir()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return ir()}},{key:"getType",value:function(){return ir()}},{key:"applyTransform",value:function(t){ir()}},{key:"intersectsExtent",value:function(t){return ir()}},{key:"translate",value:function(t,e){ir()}},{key:"transform",value:function(t,e){var n=Es(t),r="tile-pixels"==n.getUnits()?function(t,r,i){var o=n.getExtent(),a=n.getWorldExtent(),s=os(a)/os(o);return tu(hu,a[0],a[3],s,-s,0,0,0),ru(t,0,t.length,i,hu,r),Ps(n,e)(t,r,i)}:Ps(n,e);return this.applyTransform(r),this}}],r&&au(n.prototype,r),i&&au(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mr);const du=pu;function yu(t){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(t)}function gu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vu(r.key),r)}}function vu(t){var e=function(t,e){if("object"!=yu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yu(e)?e:e+""}function mu(t,e,n){return e=bu(e),function(t,e){if(e&&("object"==yu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_u()?Reflect.construct(e,n||[],bu(t).constructor):e.apply(t,n))}function _u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_u=function(){return!!t})()}function bu(t){return bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bu(t)}function wu(t,e){return wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wu(t,e)}var xu=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=mu(this,e)).layout="XY",t.stride=2,t.flatCoordinates=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wu(t,e)}(e,t),n=e,r=[{key:"computeExtent",value:function(t){return Ha(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return ir()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=Su(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,e){ir()}},{key:"setLayout",value:function(t,e,n){var r;if(t)r=Su(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(r=e.length)}this.layout=t,this.stride=r}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();iu(n,0,n.length,r,t,e,n),this.changed()}}},{key:"scale",value:function(t,e,n){void 0===e&&(e=t),n||(n=rs(this.getExtent()));var r=this.getFlatCoordinates();if(r){var i=this.getStride();!function(t,e,n,r,i,o,a,s){s=s||[];for(var u=a[0],l=a[1],c=0,f=e;f<n;f+=r){var h=t[f]-u,p=t[f+1]-l;s[c++]=u+i*h,s[c++]=l+o*p;for(var d=f+2;d<f+r;++d)s[c++]=t[d]}s&&s.length!=c&&(s.length=c)}(r,0,r.length,i,t,e,n,r),this.changed()}}},{key:"translate",value:function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();!function(t,e,n,r,i,o,a){a=a||[];for(var s=0,u=e;u<n;u+=r){a[s++]=t[u]+i,a[s++]=t[u+1]+o;for(var l=u+2;l<u+r;++l)a[s++]=t[l]}a&&a.length!=s&&(a.length=s)}(n,0,n.length,r,t,e,n),this.changed()}}}],r&&gu(n.prototype,r),i&&gu(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(du);function Su(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const Eu=xu;function Cu(t,e,n,r,i,o,a){var s,u=t[e],l=t[e+1],c=t[n]-u,f=t[n+1]-l;if(0===c&&0===f)s=e;else{var h=((i-u)*c+(o-l)*f)/(c*c+f*f);if(h>1)s=n;else{if(h>0){for(var p=0;p<r;++p)a[p]=qr(t[e+p],t[n+p],h);return void(a.length=r)}s=e}}for(var d=0;d<r;++d)a[d]=t[s+d];a.length=r}function Ou(t,e,n,r,i){var o=t[e],a=t[e+1];for(e+=r;e<n;e+=r){var s=t[e],u=t[e+1],l=Gr(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function Iu(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=Ou(t,e,s,r,i),e=s}return i}function Pu(t,e,n,r,i,o,a,s,u,l,c){if(e==n)return l;var f,h;if(0===i){if((h=Gr(a,s,t[e],t[e+1]))<l){for(f=0;f<r;++f)u[f]=t[e+f];return u.length=r,h}return l}c=c||[NaN,NaN];for(var p=e+r;p<n;)if(Cu(t,p-r,p,r,a,s,c),(h=Gr(a,s,c[0],c[1]))<l){for(l=h,f=0;f<r;++f)u[f]=c[f];u.length=r,p+=r}else p+=r*Math.max((Math.sqrt(h)-Math.sqrt(l))/i|0,1);if(o&&(Cu(t,n-r,e,r,a,s,c),(h=Gr(a,s,c[0],c[1]))<l)){for(l=h,f=0;f<r;++f)u[f]=c[f];u.length=r}return l}function ku(t,e,n,r,i,o,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=n.length;f<h;++f){var p=n[f];l=Pu(t,e,p,r,i,o,a,s,u,l,c),e=p}return l}function Mu(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function Tu(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=n[i],s=0;s<r;++s)t[e++]=a[s];return e}function Lu(t,e,n,r,i){i=i||[];for(var o=0,a=0,s=n.length;a<s;++a){var u=Tu(t,e,n[a],r);i[o++]=u,e=u}return i.length=o,i}function Nu(t,e,n,r,i,o,a){var s=(n-e)/r;if(s<3){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,n-r],c=0;l.length>0;){for(var f=l.pop(),h=l.pop(),p=0,d=t[h],y=t[h+1],g=t[f],v=t[f+1],m=h+r;m<f;m+=r){var _=Br(t[m],t[m+1],d,y,g,v);_>p&&(c=m,p=_)}p>i&&(u[(c-e)/r]=1,h+r<c&&l.push(h,c),c+r<f&&l.push(c,f))}for(var b=0;b<s;++b)u[b]&&(o[a++]=t[e+b*r],o[a++]=t[e+b*r+1]);return a}function Au(t,e,n,r,i,o,a,s){for(var u=0,l=n.length;u<l;++u){var c=n[u];a=Nu(t,e,c,r,i,o,a),s.push(a),e=c}return a}function Ru(t,e){return e*Math.round(t/e)}function ju(t,e,n,r,i,o,a){if(e==n)return a;var s,u,l=Ru(t[e],i),c=Ru(t[e+1],i);e+=r,o[a++]=l,o[a++]=c;do{if(s=Ru(t[e],i),u=Ru(t[e+1],i),(e+=r)==n)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<n;){var f=Ru(t[e],i),h=Ru(t[e+1],i);if(e+=r,f!=s||h!=u){var p=s-l,d=u-c,y=f-l,g=h-c;p*g==d*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(d<0&&g<d||d==g||d>0&&g>d)?(s=f,u=h):(o[a++]=s,o[a++]=u,l=s,c=u,s=f,u=h)}}return o[a++]=s,o[a++]=u,a}function Du(t,e,n,r,i,o,a,s){for(var u=0,l=n.length;u<l;++u){var c=n[u];a=ju(t,e,c,r,i,o,a),s.push(a),e=c}return a}function Fu(t,e,n,r,i){i=void 0!==i?i:[];for(var o=0,a=e;a<n;a+=r)i[o++]=t.slice(a,a+r);return i.length=o,i}function Bu(t,e,n,r,i){i=void 0!==i?i:[];for(var o=0,a=0,s=n.length;a<s;++a){var u=n[a];i[o++]=Fu(t,e,u,r,i[o]),e=u}return i.length=o,i}function Gu(t,e,n,r,i){i=void 0!==i?i:[];for(var o=0,a=0,s=n.length;a<s;++a){var u=n[a];i[o++]=1===u.length&&u[0]===e?[]:Bu(t,e,u,r,i[o]),e=u[u.length-1]}return i.length=o,i}function zu(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function qu(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=zu(t,e,s,r),e=s}return i}function Uu(t){return Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(t)}function Vu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yu(r.key),r)}}function Yu(t){var e=function(t,e){if("object"!=Uu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Uu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uu(e)?e:e+""}function Xu(t,e,n){return e=Hu(e),function(t,e){if(e&&("object"==Uu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wu()?Reflect.construct(e,n||[],Hu(t).constructor):e.apply(t,n))}function Wu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wu=function(){return!!t})()}function Hu(t){return Hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hu(t)}function Zu(t,e){return Zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zu(t,e)}var Ku=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Xu(this,e)).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(t[0])?r.setCoordinates(t,n):r.setFlatCoordinates(n,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zu(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){return new e(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,e,n,r){return r<Ga(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ou(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))}},{key:"getArea",value:function(){return zu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return Fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var n=[];return n.length=Nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tu(this.flatCoordinates,0,t,this.stride),this.changed()}}],r&&Vu(n.prototype,r),i&&Vu(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const Qu=Ku;function Ju(t){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(t)}function $u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tl(r.key),r)}}function tl(t){var e=function(t,e){if("object"!=Ju(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ju(e)?e:e+""}function el(t,e,n){return e=rl(e),function(t,e){if(e&&("object"==Ju(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nl()?Reflect.construct(e,n||[],rl(t).constructor):e.apply(t,n))}function nl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nl=function(){return!!t})()}function rl(t){return rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rl(t)}function il(t,e){return il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},il(t,e)}var al=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=el(this,e)).setCoordinates(t,n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&il(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){var i=this.flatCoordinates,o=Gr(t,e,i[0],i[1]);if(o<r){for(var a=this.stride,s=0;s<a;++s)n[s]=i[s];return n.length=a,o}return r}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(t){return e=this.flatCoordinates,n=t,r=e[0],i=e[1],Xa(r,i,r,i,n);var e,n,r,i}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return Ua(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mu(this.flatCoordinates,0,t,this.stride),this.changed()}}],r&&$u(n.prototype,r),i&&$u(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const sl=al;function ul(t,e,n,r,i){return!ts(i,(function(i){return!ll(t,e,n,r,i[0],i[1])}))}function ll(t,e,n,r,i,o){for(var a=0,s=t[n-r],u=t[n-r+1];e<n;e+=r){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function cl(t,e,n,r,i,o){if(0===n.length)return!1;if(!ll(t,e,n[0],r,i,o))return!1;for(var a=1,s=n.length;a<s;++a)if(ll(t,n[a-1],n[a],r,i,o))return!1;return!0}function fl(t,e,n,r,i,o,a){for(var s,u,l,c,f,h,p,d=i[o+1],y=[],g=0,v=n.length;g<v;++g){var m=n[g];for(c=t[m-r],h=t[m-r+1],s=e;s<m;s+=r)f=t[s],p=t[s+1],(d<=h&&p<=d||h<=d&&d<=p)&&(l=(d-h)/(p-h)*(f-c)+c,y.push(l)),c=f,h=p}var _=NaN,b=-1/0;for(y.sort(En),c=y[0],s=1,u=y.length;s<u;++s){f=y[s];var w=Math.abs(f-c);w>b&&cl(t,e,n,r,l=(c+f)/2,d)&&(_=l,b=w),c=f}return isNaN(_)&&(_=i[o]),a?(a.push(_,d,b),a):[_,d,b]}function hl(t,e,n,r,i){var o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)))return o;return!1}function pl(t,e,n,r,i){var o=Ja([1/0,1/0,-1/0,-1/0],t,e,n,r);return!!ls(i,o)&&(!!qa(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||hl(t,e,n,r,(function(t,e){return function(t,e,n){var r=!1,i=Va(t,e),o=Va(t,n);if(i===Ra.INTERSECTING||o===Ra.INTERSECTING)r=!0;else{var a,s,u=t[0],l=t[1],c=t[2],f=t[3],h=e[0],p=e[1],d=n[0],y=n[1],g=(y-p)/(d-h);o&Ra.ABOVE&&!(i&Ra.ABOVE)&&(r=(a=d-(y-f)/g)>=u&&a<=c),r||!(o&Ra.RIGHT)||i&Ra.RIGHT||(r=(s=y-(d-c)*g)>=l&&s<=f),r||!(o&Ra.BELOW)||i&Ra.BELOW||(r=(a=d-(y-l)/g)>=u&&a<=c),r||!(o&Ra.LEFT)||i&Ra.LEFT||(r=(s=y-(d-u)*g)>=l&&s<=f)}return r}(i,t,e)})))))}function dl(t,e,n,r,i){if(!function(t,e,n,r,i){return!!(pl(t,e,n,r,i)||ll(t,e,n,r,i[0],i[1])||ll(t,e,n,r,i[0],i[3])||ll(t,e,n,r,i[2],i[1])||ll(t,e,n,r,i[2],i[3]))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(ul(t,n[o-1],n[o],r,i)&&!pl(t,n[o-1],n[o],r,i))return!1;return!0}function yl(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function gl(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return 0===i?void 0:i>0}function vl(t,e,n,r,i){i=void 0!==i&&i;for(var o=0,a=n.length;o<a;++o){var s=n[o],u=gl(t,e,s,r);if(0===o){if(i&&u||!i&&!u)return!1}else if(i&&!u||!i&&u)return!1;e=s}return!0}function ml(t,e,n,r,i){i=void 0!==i&&i;for(var o=0,a=n.length;o<a;++o){var s=n[o],u=gl(t,e,s,r);(0===o?i&&u||!i&&!u:i&&!u||!i&&u)&&yl(t,e,s,r),e=s}return e}function _l(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o)e=ml(t,e,n[o],r,i);return e}function bl(t){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(t)}function wl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xl(r.key),r)}}function xl(t){var e=function(t,e){if("object"!=bl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bl(e)?e:e+""}function Sl(t,e,n){return e=Cl(e),function(t,e){if(e&&("object"==bl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,El()?Reflect.construct(e,n||[],Cl(t).constructor):e.apply(t,n))}function El(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(El=function(){return!!t})()}function Cl(t){return Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cl(t)}function Ol(t,e){return Ol=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ol(t,e)}var Il=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Sl(this,e)).ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&r?(i.setFlatCoordinates(n,t),i.ends_=r):i.setCoordinates(t,n),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ol(t,e)}(e,t),n=e,r=[{key:"appendLinearRing",value:function(t){this.flatCoordinates?In(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){return r<Ga(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Iu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ku(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))}},{key:"containsXY",value:function(t,e){return cl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return qu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?ml(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Bu(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=rs(this.getExtent());this.flatInteriorPoint_=fl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new sl(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(t){return t<0||this.ends_.length<=t?null:new Qu(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLinearRings",value:function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o],u=new Qu(e.slice(i,s),t);r.push(u),i=s}return r}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;vl(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ml(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var n=[],r=[];return n.length=Du(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,"XY",r)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return dl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Lu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}],r&&wl(n.prototype,r),i&&wl(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const Pl=Il;function kl(t){if(cs(t))throw new Error("Cannot create polygon from empty extent");var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new Il(o,"XY",[o.length])}function Ml(t,e,n){e=e||32;for(var r=t.getStride(),i=t.getLayout(),o=t.getCenter(),a=r*(e+1),s=new Array(a),u=0;u<a;u+=r){s[u]=0,s[u+1]=0;for(var l=2;l<r;l++)s[u+l]=o[l]}var c=[s.length],f=new Il(s,i,c);return function(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=r||0,u=0;u<=a;++u){var l=u*o,c=s+2*zr(u,a)*Math.PI/a;i[l]=e[0]+n*Math.cos(c),i[l+1]=e[1]+n*Math.sin(c)}t.changed()}(f,o,t.getRadius(),n),f}function Tl(t){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(t)}function Ll(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nl(r.key),r)}}function Nl(t){var e=function(t,e){if("object"!=Tl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tl(e)?e:e+""}function Al(t,e,n){return e=jl(e),function(t,e){if(e&&("object"==Tl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rl()?Reflect.construct(e,n||[],jl(t).constructor):e.apply(t,n))}function Rl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rl=function(){return!!t})()}function jl(t){return jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jl(t)}function Dl(t,e){return Dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dl(t,e)}var Fl=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Al(this,e)).on,n.once,n.un,t=Object.assign({},t),n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Os(t.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,t.projection&&bs(),t.center&&(t.center=Ds(t.center,n.projection_)),t.extent&&(t.extent=Bs(t.extent,n.projection_)),n.applyOptions_(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dl(t,e)}(e,t),n=e,r=[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var n in $o)delete e[n];this.setProperties(e,!0);var r=function(t){var e,n,r,i=28,o=2,a=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:i,u=void 0!==t.zoomFactor?t.zoomFactor:o,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,h=Os(t.projection,"EPSG:3857"),p=h.getExtent(),d=t.constrainOnlyCenter,y=t.extent;if(l||y||!h.isGlobal()||(d=!1,y=p),void 0!==t.resolutions){var g=t.resolutions;n=g[a],r=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n,r){return e=void 0===e||e,function(i,o,a,s){if(void 0!==i){var u=t[0],l=t[t.length-1],c=n?Us(u,n,a,r):u;if(s)return e?Vs(i,c,l):Fr(i,l,c);var f=Math.min(c,i),h=Math.floor(Cn(t,f,o));return t[h]>c&&h<t.length-1?t[h+1]:t[h]}}}(g,c,!d&&y,f):Ys(n,r,c,!d&&y,f)}else{var v=(p?Math.max(us(p),os(p)):360*ta.degrees/h.getMetersPerUnit())/256/Math.pow(o,0),m=v/Math.pow(o,i-0);void 0!==(n=t.maxResolution)?a=0:n=v/Math.pow(u,a),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,s):v/Math.pow(u,s):m),s=a+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,s-a),e=t.constrainResolution?function(t,e,n,r,i,o){return r=void 0===r||r,n=void 0!==n?n:0,function(a,s,u,l){if(void 0!==a){var c=i?Us(e,i,u,o):e;if(l)return r?Vs(a,c,n):Fr(a,n,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),h=-s*(.5-1e-9)+.5,p=Math.min(c,a),d=Math.floor(Math.log(e/p)/Math.log(t)+h),y=Math.max(f,d);return Fr(e/Math.pow(t,y),n,c)}}}(u,n,r,c,!d&&y,f):Ys(n,r,c,!d&&y,f)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:a,zoomFactor:u}}(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return zs(t.extent,t.constrainOnlyCenter,e)}var n=Os(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,zs(r,!1,!1)}return qs}(t),o=r.constraint,a=function(t){var e,n,r=void 0===t.enableRotation||t.enableRotation;if(r){var i=t.constrainRotation;return void 0===i||!0===i?Hs():!1===i?Ws:"number"==typeof i?(e=i,n=2*Math.PI/e,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):Ws}return Xs}(t);this.constraints_={center:i,resolution:o,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenterInternal();if(n){var r=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(r[3]-e[3]+e[1]-r[1]),a=i/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=Object.assign({},r)).center=Ds(r.center,this.getProjection())),r.anchor&&((r=Object.assign({},r)).anchor=Ds(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var r=0;r<n&&!this.isDef();++r){var i=arguments[r];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(r!==n){for(var o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,u=this.targetRotation_,l=[];r<n;++r){var c=arguments[r],f={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Ks,callback:e};if(c.center&&(f.sourceCenter=a,f.targetCenter=c.center.slice(),a=f.targetCenter),void 0!==c.zoom?(f.sourceResolution=s,f.targetResolution=this.getResolutionForZoom(c.zoom),s=f.targetResolution):c.resolution&&(f.sourceResolution=s,f.targetResolution=c.resolution,s=f.targetResolution),void 0!==c.rotation){f.sourceRotation=u;var h=zr(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+h,u=f.targetRotation}Gl(f)?f.complete=!0:o+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(Qo,1),this.updateAnimations_()}else e&&Bl(e,!0)}},{key:"getAnimating",value:function(){return this.hints_[Qo]>0}},{key:"getInteracting",value:function(){return this.hints_[Jo]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(Qo,-this.hints_[Qo]);for(var e=0,n=this.animations_.length;e<n;++e){var r=this.animations_[e];if(r[0].callback&&Bl(r[0].callback,!1),!t)for(var i=0,o=r.length;i<o;++i){var a=r[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var r=this.animations_[n],i=!0,o=0,a=r.length;o<a;++o){var s=r[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var f=s.sourceCenter[0],h=s.sourceCenter[1],p=s.targetCenter[0],d=s.targetCenter[1];this.nextCenter_=s.targetCenter;var y=f+c*(p-f),g=h+c*(d-h);this.targetCenter_=[y,g]}if(s.sourceResolution&&s.targetResolution){var v=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var m=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(v,0,m,!0);this.targetCenter_=this.calculateCenterZoom(_,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var b=1===c?zr(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var w=this.constraints_.rotation(b,!0);this.targetCenter_=this.calculateCenterRotate(w,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=b}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[n]=null,this.setHint(Qo,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=r[0].callback;x&&Bl(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var n,r,i,o=this.getCenterInternal();return void 0!==o&&(function(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;t[0]=i,t[1]=o}(n=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),i=e,(r=n)[0]+=+i[0],r[1]+=+i[1]),n}},{key:"calculateCenterZoom",value:function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();return void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]),n}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?js(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get($o.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){return Fs(this.calculateExtentInternal(t),this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();Ji(e,"The view center is not defined");var n=this.getResolution();Ji(void 0!==n,"The view resolution is not defined");var r=this.getRotation();return Ji(void 0!==r,"The view rotation is not defined"),is(e,n,r,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get($o.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal(Bs(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var n=us(t)/e[0],r=os(t)/e[1];return Math.max(n,r)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*r)}}},{key:"getRotation",value:function(){return this.get($o.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/e;return function(t){return Math.log(n/t)/e/i}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.padding_;if(i){var o=this.getViewportSizeMinusPadding_();r=zl(r,this.getViewportSize_(),[o[0]/2+i[3],o[1]/2+i[0]],e,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var i=Cn(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Fr(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Fr(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var n;if(Ji(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t))Ji(!cs(t),"Cannot fit empty extent provided as `geometry`"),n=kl(Bs(t,this.getProjection()));else if("Circle"===t.getType()){var r=Bs(t.getExtent(),this.getProjection());(n=kl(r)).rotate(this.getRotation(),rs(r))}else{var i=Rs();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,c=0,f=i.length;c<f;c+=o){var h=i[c]*n-i[c+1]*r,p=i[c]*r+i[c+1]*n;a=Math.min(a,h),s=Math.min(s,p),u=Math.max(u,h),l=Math.max(l,p)}return[a,s,u,l]}},{key:"fitInternal",value:function(t,e){var n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());var r,i=void 0!==e.padding?e.padding:[0,0,0,0],o=void 0!==e.nearest&&e.nearest;r=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var a=this.rotatedExtentForGeometry(t),s=this.getResolutionForExtentInternal(a,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);s=isNaN(s)?r:Math.max(s,r),s=this.getConstrainedResolution(s,o?0:1);var u=this.getRotation(),l=Math.sin(u),c=Math.cos(u),f=rs(a);f[0]+=(i[1]-i[3])/2*s,f[1]+=(i[0]-i[2])/2*s;var h=f[0]*c-f[1]*l,p=f[1]*c+f[0]*l,d=this.getConstrainedCenter([h,p],s),y=e.callback?e.callback:Tn;void 0!==e.duration?this.animateInternal({resolution:s,center:d,duration:e.duration,easing:e.easing},y):(this.targetResolution_=s,this.targetCenter_=d,this.applyTargetState_(!1,!0),Bl(y,!0))}},{key:"centerOn",value:function(t,e,n){this.centerOnInternal(Ds(t,this.getProjection()),e,n)}},{key:"centerOnInternal",value:function(t,e,n){this.setCenterInternal(zl(t,e,n,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,n,r){var i,o=this.padding_;if(o&&t){var a=this.getViewportSizeMinusPadding_(-n),s=zl(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=js(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&Ds(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=Ds(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?Ds(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,i,n),a=this.constraints_.center(this.targetCenter_,o,i,n,this.calculateCenterShift(this.targetCenter_,o,r,i));this.get($o.ROTATION)!==r&&this.set($o.ROTATION,r),this.get($o.RESOLUTION)!==o&&(this.set($o.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get($o.CENTER)&&ps(this.get($o.CENTER),a)||this.set($o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,n){t=void 0!==t?t:200;var r=e||0,i=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,r,o),s=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,i,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=i,this.targetCenter_=s,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===i&&this.getCenterInternal()&&ps(this.getCenterInternal(),s)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:s,resolution:a,duration:t,easing:Zs,anchor:n}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(Jo,1)}},{key:"endInteraction",value:function(t,e,n){n=n&&Ds(n,this.getProjection()),this.endInteractionInternal(t,e,n)}},{key:"endInteractionInternal",value:function(t,e,n){this.getInteracting()&&(this.setHint(Jo,-1),this.resolveConstraints(t,e,n))}},{key:"getConstrainedCenter",value:function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}},{key:"getConstrainedZoom",value:function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}],r&&Ll(n.prototype,r),i&&Ll(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mr);function Bl(t,e){setTimeout((function(){t(e)}),0)}function Gl(t){return!(t.sourceCenter&&t.targetCenter&&!ps(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function zl(t,e,n,r,i){var o=Math.cos(-i),a=Math.sin(-i),s=t[0]*o-t[1]*a,u=t[1]*o+t[0]*a;return[(s+=(e[0]/2-n[0])*r)*o-(u+=(n[1]-e[1]/2)*r)*(a=-a),u*o+s*a]}const ql=Fl;function Ul(t){return Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(t)}function Vl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yl(r.key),r)}}function Yl(t){var e=function(t,e){if("object"!=Ul(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ul(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ul(e)?e:e+""}function Xl(t,e,n){return e=Zl(e),function(t,e){if(e&&("object"==Ul(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wl()?Reflect.construct(e,n||[],Zl(t).constructor):e.apply(t,n))}function Wl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wl=function(){return!!t})()}function Hl(){return Hl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Zl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Hl.apply(null,arguments)}function Zl(t){return Zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zl(t)}function Kl(t,e){return Kl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kl(t,e)}var Ql=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=Object.assign({},t);delete r.source,(n=Xl(this,e,[r])).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.sourceReady_=!1,n.rendered=!1,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addChangeListener(Do,n.handleSourcePropertyChange_);var i=t.source?t.source:null;return n.setSource(i),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kl(t,e)}(e,t),n=e,r=[{key:"getLayersArray",value:function(t){return(t=t||[]).push(this),t}},{key:"getLayerStatesArray",value:function(t){return(t=t||[]).push(this.getLayerState()),t}},{key:"getSource",value:function(){return this.get(Do)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var t=this.getSource();return t?t.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var t=this;this.sourceChangeKey_&&(Wn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;var e=this.getSource();e&&(this.sourceChangeKey_=Yn(e,qn,this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout((function(){t.dispatchEvent("sourceready")}),0))),this.changed()}},{key:"getFeatures",value:function(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}},{key:"getData",value:function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}},{key:"isVisible",value:function(t){var e,n,r=this,i=this.getMapInternal();!t&&i&&(t=i.getView()),!(e=t instanceof ql?{viewState:t.getState(),extent:t.calculateExtent()}:t).layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),n=e.layerStatesArray?e.layerStatesArray.find((function(t){return t.layer===r})):this.getLayerState();var o=this.getExtent();return function(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}(n,e.viewState)&&(!o||ls(o,e.extent))}},{key:"getAttributions",value:function(t){if(!this.isVisible(t))return[];var e,n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];var r=e(t instanceof ql?t.getViewStateAndExtent():t);return Array.isArray(r)||(r=[r]),r}},{key:"render",value:function(t,e){var n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(t){t||this.unrender(),this.set(Fo,t)}},{key:"getMapInternal",value:function(){return this.get(Fo)}},{key:"setMap",value:function(t){this.mapPrecomposeKey_&&(Wn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Wn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Yn(t,Ko,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Ji(!e.some((function(t){return t.layer===n.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}),this),this.mapRenderKey_=Yn(this,qn,t.render,t),this.changed())}},{key:"setSource",value:function(t){this.set(Do,t)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),Hl(Zl(e.prototype),"disposeInternal",this).call(this)}}],r&&Vl(n.prototype,r),i&&Vl(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Wo);const Jl=Ql;var $l=n(2582);function tc(t,e){return e&&(t.src=e),ei?new Promise((function(e,n){return t.decode().then((function(){return e(t)}),n)})):function(t,e){return new Promise((function(n,r){function i(){a(),n(t)}function o(){a(),r(new Error("Image load error"))}function a(){t.removeEventListener("load",i),t.removeEventListener("error",o)}t.addEventListener("load",i),t.addEventListener("error",o),e&&(t.src=e)}))}(t)}function ec(t){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(t)}function nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rc(r.key),r)}}function rc(t){var e=function(t,e){if("object"!=ec(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ec(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ec(e)?e:e+""}var ic=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32},(e=[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];3&t++||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}},{key:"get",value:function(t,e,n){var r=oc(t,e,n);return r in this.cache_?this.cache_[r]:null}},{key:"set",value:function(t,e,n,r){var i=oc(t,e,n);this.cache_[i]=r,++this.cacheSize_}},{key:"setSize",value:function(t){this.maxCacheSize_=t,this.expire()}}])&&nc(t.prototype,e),n&&nc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function oc(t,e,n){return e+":"+t+":"+(n?Xr(n):"null")}var ac=new ic;function sc(t){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(t)}function uc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lc(r.key),r)}}function lc(t){var e=function(t,e){if("object"!=sc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sc(e)?e:e+""}function cc(t,e,n){return e=hc(e),function(t,e){if(e&&("object"==sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fc()?Reflect.construct(e,n||[],hc(t).constructor):e.apply(t,n))}function fc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fc=function(){return!!t})()}function hc(t){return hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hc(t)}function pc(t,e){return pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pc(t,e)}var dc=null,yc=function(t){function e(t,n,r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=cc(this,e)).hitDetectionImage_=null,a.image_=t,a.crossOrigin_=r,a.canvas_={},a.color_=o,a.imageState_=void 0===i?Pr:i,a.size_=t&&t.width&&t.height?[t.width,t.height]:null,a.src_=n,a.tainted_,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pc(t,e)}(e,t),n=e,(r=[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&this.imageState_===Mr){dc||(dc=ni(1,1,void 0,{willReadFrequently:!0})),dc.drawImage(this.image_,0,0);try{dc.getImageData(0,0,1,1),this.tainted_=!1}catch(t){dc=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(qn)}},{key:"handleImageError_",value:function(){this.imageState_=Tr,this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=Mr,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}},{key:"getImage",value:function(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}},{key:"getPixelRatio",value:function(t){return this.replaceColor_(t),this.canvas_[t]?t:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],n=ni(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){var t=this;if(this.imageState_===Pr){this.image_||this.initializeImage_(),this.imageState_=kr;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&tc(this.image_,this.src_).then((function(e){t.image_=e,t.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===Mr){var e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);var r=n.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Xr(this.color_),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=n}}}])&&uc(n.prototype,r),i&&uc(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(zn);function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function vc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mc(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mc(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bc(r.key),r)}}function bc(t){var e=function(t,e){if("object"!=gc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gc(e)?e:e+""}function wc(t,e,n){return e=Cc(e),xc(t,Sc()?Reflect.construct(e,n||[],Cc(t).constructor):e.apply(t,n))}function xc(t,e){if(e&&("object"==gc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sc=function(){return!!t})()}function Ec(){return Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Cc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Ec.apply(null,arguments)}function Cc(t){return Cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cc(t)}function Oc(t,e){return Oc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oc(t,e)}function Ic(t,e,n,r){return void 0!==n&&void 0!==r?[n/t,r/e]:void 0!==n?n/t:void 0!==r?r/e:1}var Pc=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,o=void 0!==t.scale?t.scale:1,a=void 0!==t.rotateWithView&&t.rotateWithView;(n=wc(this,e,[{opacity:r,rotation:i,scale:o,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:a,declutterMode:t.declutterMode}])).anchor_=void 0!==t.anchor?t.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",n.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",n.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",n.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var s,u=void 0!==t.img?t.img:null,l=t.src;if(Ji(!(void 0!==l&&u),"`image` and `src` cannot be provided at the same time"),void 0!==l&&0!==l.length||!u||(l=u.src||ar(u)),Ji(void 0!==l&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),Ji(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?s=Pr:void 0!==u&&(s=u instanceof HTMLImageElement?u.complete?u.src?Mr:Pr:kr:Mr),n.color_=void 0!==t.color?Zr(t.color):null,n.iconImage_=function(t,e,n,r,i){var o=void 0===e?void 0:ac.get(e,n,i);return o||(o=new yc(t,t instanceof HTMLImageElement?t.src||void 0:e,n,r,i),ac.set(e,n,i,o)),o}(u,l,n.crossOrigin_,s,n.color_),n.offset_=void 0!==t.offset?t.offset:[0,0],n.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",n.origin_=null,n.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){var c,f;if(t.size){var h=vc(t.size,2);c=h[0],f=h[1]}else{var p=n.getImage(1);if(p.width&&p.height)c=p.width,f=p.height;else if(p instanceof HTMLImageElement){n.initialOptions_=t;return n.listenImageChange((function e(){if(n.unlistenImageChange(e),n.initialOptions_){var r=n.iconImage_.getSize();n.setScale(Ic(r[0],r[1],t.width,t.height))}})),xc(n)}}void 0!==c&&n.setScale(Ic(c,f,t.width,t.height))}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oc(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){var t,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:r,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getAnchor",value:function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var n=this.getDisplacement(),r=this.getScaleArray();return[t[0]-n[0]/r[0],t[1]+n[1]/r[1]]}},{key:"setAnchor",value:function(t){this.anchor_=t,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(t){return this.iconImage_.getImage(t)}},{key:"getPixelRatio",value:function(t){return this.iconImage_.getPixelRatio(t)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"getWidth",value:function(){var t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==Mr?this.iconImage_.getSize()[0]*t[0]:void 0}},{key:"getHeight",value:function(){var t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==Mr?this.iconImage_.getSize()[1]*t[1]:void 0}},{key:"setScale",value:function(t){delete this.initialOptions_,Ec(Cc(e.prototype),"setScale",this).call(this,t)}},{key:"listenImageChange",value:function(t){this.iconImage_.addEventListener(qn,t)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(t){this.iconImage_.removeEventListener(qn,t)}}],r&&_c(n.prototype,r),i&&_c(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Dr);const kc=Pc;function Mc(t){return Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(t)}function Tc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lc(r.key),r)}}function Lc(t){var e=function(t,e){if("object"!=Mc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mc(e)?e:e+""}var Nc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Lr(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Wi({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return e=t,n=[{key:"clone",value:function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(t){this.overflow_=t}},{key:"setFont",value:function(t){this.font_=t}},{key:"setMaxAngle",value:function(t){this.maxAngle_=t}},{key:"setOffsetX",value:function(t){this.offsetX_=t}},{key:"setOffsetY",value:function(t){this.offsetY_=t}},{key:"setPlacement",value:function(t){this.placement_=t}},{key:"setRepeat",value:function(t){this.repeat_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setFill",value:function(t){this.fill_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=Lr(void 0!==t?t:1)}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"setText",value:function(t){this.text_=t}},{key:"setTextAlign",value:function(t){this.textAlign_=t}},{key:"setJustify",value:function(t){this.justify_=t}},{key:"setTextBaseline",value:function(t){this.textBaseline_=t}},{key:"setBackgroundFill",value:function(t){this.backgroundFill_=t}},{key:"setBackgroundStroke",value:function(t){this.backgroundStroke_=t}},{key:"setPadding",value:function(t){this.padding_=t}}],n&&Tc(e.prototype,n),r&&Tc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();const Ac=Nc;var Rc;function jc(t,e){return jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jc(t,e)}function Dc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dc=function(){return!!t})()}function Fc(t){return function(t){if(Array.isArray(t))return Yc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Vc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bc(t){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(t)}function Gc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wc(r.key),r)}}function zc(t,e,n){return e&&Gc(t.prototype,e),n&&Gc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vc(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Vc(t,e){if(t){if("string"==typeof t)return Yc(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yc(t,e):void 0}}function Yc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Xc(t,e,n){return(e=Wc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wc(t){var e=function(t,e){if("object"!=Bc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bc(e)?e:e+""}var Hc=0,Zc=1<<Hc++,Kc=1<<Hc++,Qc=1<<Hc++,Jc=1<<Hc++,$c=1<<Hc++,tf=Math.pow(2,5)-1,ef=Xc(Xc(Xc(Xc(Xc({},Zc,"boolean"),Kc,"number"),Qc,"string"),Jc,"color"),$c,"number[]"),nf=Object.keys(ef).map(Number).sort(En);function rf(t){var e,n,r=[],i=Uc(nf);try{for(i.s();!(e=i.n()).done;){var o=e.value;(t&(n=o))===n&&r.push(ef[o])}}catch(t){i.e(t)}finally{i.f()}return 0===r.length?"untyped":r.length<3?r.join(" or "):r.slice(0,-1).join(", ")+", or "+r[r.length-1]}function of(t,e){return!!(t&e)}var af=zc((function t(e,n){qc(this,t),this.type=e,this.value=n})),sf=zc((function t(e,n){qc(this,t),this.type=e,this.operator=n;for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];this.args=i}));function uf(){return{variables:new Set,properties:new Set}}function lf(t,e){switch(Bc(t)){case"boolean":return new af(Zc,t);case"number":return new af(Kc,t);case"string":return new af(Qc,t)}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"==typeof t[0])return function(t,e){var n=t[0],r=ff[n];if(!r)throw new Error("Unknown operator: ".concat(n));return r(t,e)}(t,e);var n,r=Uc(t);try{for(r.s();!(n=r.n()).done;){if("number"!=typeof n.value)throw new Error("Expected an array of numbers")}}catch(t){r.e(t)}finally{r.f()}var i=$c;return 3!==t.length&&4!==t.length||(i|=Jc),new af(i,t)}var cf={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},ff=(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Rc={},cf.Number,pf(hf(1,1/0,tf),Kc)),cf.String,pf(hf(1,1/0,tf),Qc)),cf.Get,pf((function(t,e){if(2!==t.length)throw new Error("Expected 1 argument for get operation");var n=lf(t[1],e);if(!(n instanceof af))throw new Error("Expected a literal argument for get operation");if("string"!=typeof n.value)throw new Error("Expected a string argument for get operation");return e.properties.add(n.value),[n]}),tf)),cf.Var,pf((function(t,e){if(2!==t.length)throw new Error("Expected 1 argument for var operation");var n=lf(t[1],e);if(!(n instanceof af))throw new Error("Expected a literal argument for var operation");if("string"!=typeof n.value)throw new Error("Expected a string argument for get operation");return e.variables.add(n.value),[n]}),tf)),cf.Resolution,pf((function(t,e){var n=t[0];if(1!==t.length)throw new Error("Expected no arguments for ".concat(n," operation"));return[]}),Kc)),cf.Any,pf(hf(2,1/0,Zc),Zc)),cf.All,pf(hf(2,1/0,Zc),Zc)),cf.Not,pf(hf(1,1,Zc),Zc)),cf.Equal,pf(hf(2,2,tf),Zc)),cf.NotEqual,pf(hf(2,2,tf),Zc)),Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Rc,cf.GreaterThan,pf(hf(2,2,tf),Zc)),cf.GreaterThanOrEqualTo,pf(hf(2,2,tf),Zc)),cf.LessThan,pf(hf(2,2,tf),Zc)),cf.LessThanOrEqualTo,pf(hf(2,2,tf),Zc)),cf.Multiply,pf(hf(2,1/0,Kc),Kc)),cf.Divide,pf(hf(2,2,Kc),Kc)),cf.Add,pf(hf(2,1/0,Kc),Kc)),cf.Subtract,pf(hf(2,2,Kc),Kc)),cf.Clamp,pf(hf(3,3,Kc),Kc)),cf.Mod,pf(hf(2,2,Kc),Kc)),Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Xc(Rc,cf.Pow,pf(hf(2,2,Kc),Kc)),cf.Abs,pf(hf(1,1,Kc),Kc)),cf.Floor,pf(hf(1,1,Kc),Kc)),cf.Ceil,pf(hf(1,1,Kc),Kc)),cf.Round,pf(hf(1,1,Kc),Kc)),cf.Sin,pf(hf(1,1,Kc),Kc)),cf.Cos,pf(hf(1,1,Kc),Kc)),cf.Atan,pf(hf(1,2,Kc),Kc)),cf.Sqrt,pf(hf(1,1,Kc),Kc)),cf.Match,pf(hf(4,1/0,Qc|Kc),tf)));function hf(t,e,n){return function(r,i){var o=r[0],a=r.length-1;if(t===e){if(a!==t){var s=1===t?"":"s";throw new Error("Expected ".concat(t," argument").concat(s," for operation ").concat(o,", got ").concat(a))}}else if(a<t||a>e)throw new Error("Expected ".concat(t," to ").concat(e," arguments for operation ").concat(o,", got ").concat(a));for(var u=new Array(a),l=0;l<a;++l){var c=lf(r[l+1],i);if(!of(n,c.type)){var f=rf(n),h=rf(c.type);throw new Error("Unexpected type for argument ".concat(l," of ").concat(o," operation")+" : got ".concat(f," but expected ").concat(h))}u[l]=c}return u}}function pf(t,e){return function(n,r){var i=n[0],o=t(n,r);return function(t,e,n){if(Dc())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&jc(i,n.prototype),i}(sf,[e,i].concat(Fc(o)))}}function df(t){return df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(t)}function yf(t,e,n){var r=lf(t,n);if(!of(e,r.type)){var i=rf(e),o=rf(r.type);throw new Error("Expected expression to be of type ".concat(i,", got ").concat(o))}return gf(r,n)}function gf(t,e){if(t instanceof af)return function(){return t.value};var n=t.operator;switch(n){case cf.Number:case cf.String:return function(t,e){for(var n=t.operator,r=t.args.length,i=new Array(r),o=0;o<r;++o)i[o]=gf(t.args[o],e);switch(n){case cf.Number:case cf.String:return function(t){for(var e=0;e<r;++e){var o=i[e](t);if(df(o)===n)return o}throw new Error("Expected one of the values to be a ".concat(n))};default:throw new Error("Unsupported assertion operator ".concat(n))}}(t,e);case cf.Get:case cf.Var:return function(t,e){var n=t.args[0];if(!(n instanceof af))throw new Error("Expected literal name");var r=n.value;if("string"!=typeof r)throw new Error("Expected string name");switch(t.operator){case cf.Get:return function(t){return t.properties[r]};case cf.Var:return function(t){return t.variables[r]};default:throw new Error("Unsupported accessor operator ".concat(t.operator))}}(t);case cf.Resolution:return function(t){return t.resolution};case cf.Any:case cf.All:case cf.Not:return function(t,e){for(var n=t.operator,r=t.args.length,i=new Array(r),o=0;o<r;++o)i[o]=gf(t.args[o],e);switch(n){case cf.Any:return function(t){for(var e=0;e<r;++e)if(i[e](t))return!0;return!1};case cf.All:return function(t){for(var e=0;e<r;++e)if(!i[e](t))return!1;return!0};case cf.Not:return function(t){return!i[0](t)};default:throw new Error("Unsupported logical operator ".concat(n))}}(t,e);case cf.Equal:case cf.NotEqual:case cf.LessThan:case cf.LessThanOrEqualTo:case cf.GreaterThan:case cf.GreaterThanOrEqualTo:return function(t,e){var n=t.operator,r=gf(t.args[0],e),i=gf(t.args[1],e);switch(n){case cf.Equal:return function(t){return r(t)===i(t)};case cf.NotEqual:return function(t){return r(t)!==i(t)};case cf.LessThan:return function(t){return r(t)<i(t)};case cf.LessThanOrEqualTo:return function(t){return r(t)<=i(t)};case cf.GreaterThan:return function(t){return r(t)>i(t)};case cf.GreaterThanOrEqualTo:return function(t){return r(t)>=i(t)};default:throw new Error("Unsupported comparison operator ".concat(n))}}(t,e);case cf.Multiply:case cf.Divide:case cf.Add:case cf.Subtract:case cf.Clamp:case cf.Mod:case cf.Pow:case cf.Abs:case cf.Floor:case cf.Ceil:case cf.Round:case cf.Sin:case cf.Cos:case cf.Atan:case cf.Sqrt:return function(t,e){for(var n=t.operator,r=t.args.length,i=new Array(r),o=0;o<r;++o)i[o]=gf(t.args[o],e);switch(n){case cf.Multiply:return function(t){for(var e=1,n=0;n<r;++n)e*=i[n](t);return e};case cf.Divide:return function(t){return i[0](t)/i[1](t)};case cf.Add:return function(t){for(var e=0,n=0;n<r;++n)e+=i[n](t);return e};case cf.Subtract:return function(t){return i[0](t)-i[1](t)};case cf.Clamp:return function(t){var e=i[0](t),n=i[1](t);if(e<n)return n;var r=i[2](t);return e>r?r:e};case cf.Mod:return function(t){return i[0](t)%i[1](t)};case cf.Pow:return function(t){return Math.pow(i[0](t),i[1](t))};case cf.Abs:return function(t){return Math.abs(i[0](t))};case cf.Floor:return function(t){return Math.floor(i[0](t))};case cf.Ceil:return function(t){return Math.ceil(i[0](t))};case cf.Round:return function(t){return Math.round(i[0](t))};case cf.Sin:return function(t){return Math.sin(i[0](t))};case cf.Cos:return function(t){return Math.cos(i[0](t))};case cf.Atan:return 2===r?function(t){return Math.atan2(i[0](t),i[1](t))}:function(t){return Math.atan(i[0](t))};case cf.Sqrt:return function(t){return Math.sqrt(i[0](t))};default:throw new Error("Unsupported numeric operator ".concat(n))}}(t,e);case cf.Match:return function(t,e){for(var n=t.args.length,r=new Array(n),i=0;i<n;++i)r[i]=gf(t.args[i],e);return function(t){for(var e=r[0](t),i=1;i<n;i+=2)if(e===r[i](t))return r[i+1](t);return r[n-1](t)}}(t,e);default:throw new Error("Unsupported operator ".concat(n))}}function vf(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return mf(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mf(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function mf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _f(t){return!0}function bf(t){var e=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i){var o=t[i],a="filter"in o?yf(o.filter,Zc,e):_f,s=void 0;if(Array.isArray(o.style)){var u=o.style.length;s=new Array(u);for(var l=0;l<u;++l)s[l]=xf(o.style[l],e)}else s=[xf(o.style,e)];r[i]={filter:a,styles:s}}return function(e){for(var i=[],o=!1,a=0;a<n;++a){if((0,r[a].filter)(e)&&(!t[a].else||!o)){o=!0;var s,u=vf(r[a].styles);try{for(u.s();!(s=u.n()).done;){var l=(0,s.value)(e);l&&i.push(l)}}catch(t){u.e(t)}finally{u.f()}}}return i}}(t,uf()),n={variables:{},properties:{},resolution:NaN};return function(t,r){return n.properties=t.getPropertiesInternal(),n.resolution=r,e(n)}}function wf(t){for(var e=uf(),n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=xf(t[i],e);var o={variables:{},properties:{},resolution:NaN},a=new Array(n);return function(t,e){o.properties=t.getPropertiesInternal(),o.resolution=e;for(var i=0;i<n;++i)a[i]=r[i](o);return a}}function xf(t,e){var n=Sf(t,"",e),r=Ef(t,"",e),i=function(t,e){var n="text-",r=Of(t,n+"value",e);if(!r)return null;var i=Sf(t,n,e),o=Sf(t,n+"background-",e),a=Ef(t,n,e),s=Ef(t,n+"background-",e),u=Of(t,n+"font",e),l=Cf(t,n+"max-angle",e),c=Cf(t,n+"offset-x",e),f=Cf(t,n+"offset-y",e),h=If(t,n+"overflow",e),p=Of(t,n+"placement",e),d=Cf(t,n+"repeat",e),y=Tf(t,n+"scale",e),g=If(t,n+"rotate-with-view",e),v=Cf(t,n+"rotation",e),m=Of(t,n+"align",e),_=Of(t,n+"justify",e),b=Of(t,n+"baseline",e),w=kf(t,n+"padding",e),x=new Ac({});return function(t){if(x.setText(r(t)),i&&x.setFill(i(t)),o&&x.setBackgroundFill(o(t)),a&&x.setStroke(a(t)),s&&x.setBackgroundStroke(s(t)),u&&x.setFont(u(t)),l&&x.setMaxAngle(l(t)),c&&x.setOffsetX(c(t)),f&&x.setOffsetY(f(t)),h&&x.setOverflow(h(t)),p){var e=p(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");x.setPlacement(e)}if(d&&x.setRepeat(d(t)),y&&x.setScale(y(t)),g&&x.setRotateWithView(g(t)),v&&x.setRotation(v(t)),m){var n=m(t);if("left"!==n&&"center"!==n&&"right"!==n&&"end"!==n&&"start"!==n)throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(n)}if(_){var S=_(t);if("left"!==S&&"right"!==S&&"center"!==S)throw new Error("Expected left, right, or center for text-justify");x.setJustify(S)}if(b){var E=b(t);if("bottom"!==E&&"top"!==E&&"middle"!==E&&"alphabetic"!==E&&"hanging"!==E)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(E)}return w&&x.setPadding(w(t)),x}}(t,e),o=function(t,e){if("icon-src"in t)return function(t,e){var n="icon-",r=n+"src",i=Df(t[r],r),o=Mf(t,n+"anchor",e),a=Tf(t,n+"scale",e),s=Cf(t,n+"opacity",e),u=Mf(t,n+"displacement",e),l=Cf(t,n+"rotation",e),c=If(t,n+"rotate-with-view",e),f=Nf(t,n+"anchor-origin"),h=Af(t,n+"anchor-x-units"),p=Af(t,n+"anchor-y-units"),d=function(t,e){var n=t[e];if(void 0===n)return;return Bf(n,e)}(t,n+"color"),y=function(t,e){var n=t[e];if(void 0===n)return;if("string"!=typeof n)throw new Error("Expected a string for ".concat(e));return n}(t,n+"cross-origin"),g=function(t,e){var n=t[e];if(void 0===n)return;return jf(n,e)}(t,n+"offset"),v=Nf(t,n+"offset-origin"),m=Lf(t,n+"width"),_=Lf(t,n+"height"),b=function(t,e){var n=t[e];if(void 0===n)return;if("number"==typeof n)return Lr(n);if(!Array.isArray(n))throw new Error("Expected a number or size array for ".concat(e));if(2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])throw new Error("Expected a number or size array for ".concat(e));return n}(t,n+"size"),w=Rf(t,n+"declutter"),x=new kc({src:i,anchorOrigin:f,anchorXUnits:h,anchorYUnits:p,color:d,crossOrigin:y,offset:g,offsetOrigin:v,height:_,width:m,size:b,declutterMode:w});return function(t){return s&&x.setOpacity(s(t)),u&&x.setDisplacement(u(t)),l&&x.setRotation(l(t)),c&&x.setRotateWithView(c(t)),a&&x.setScale(a(t)),o&&x.setAnchor(o(t)),x}}(t,e);if("shape-points"in t)return function(t,e){var n="shape-",r=n+"points",i=Ff(t[r],r),o=Sf(t,n,e),a=Ef(t,n,e),s=Tf(t,n+"scale",e),u=Mf(t,n+"displacement",e),l=Cf(t,n+"rotation",e),c=If(t,n+"rotate-with-view",e),f=Lf(t,n+"radius"),h=Lf(t,n+"radius1"),p=Lf(t,n+"radius2"),d=Lf(t,n+"angle"),y=Rf(t,n+"declutter-mode"),g=new Ai({points:i,radius:f,radius1:h,radius2:p,angle:d,declutterMode:y});return function(t){return o&&g.setFill(o(t)),a&&g.setStroke(a(t)),u&&g.setDisplacement(u(t)),l&&g.setRotation(l(t)),c&&g.setRotateWithView(c(t)),s&&g.setScale(s(t)),g}}(t,e);if("circle-radius"in t)return function(t,e){var n="circle-",r=Sf(t,n,e),i=Ef(t,n,e),o=Cf(t,n+"radius",e),a=Tf(t,n+"scale",e),s=Mf(t,n+"displacement",e),u=Cf(t,n+"rotation",e),l=If(t,n+"rotate-with-view",e),c=Rf(t,n+"declutter-mode"),f=new Ui({radius:5,declutterMode:c});return function(t){return o&&f.setRadius(o(t)),r&&f.setFill(r(t)),i&&f.setStroke(i(t)),s&&f.setDisplacement(s(t)),u&&f.setRotation(u(t)),l&&f.setRotateWithView(l(t)),a&&f.setScale(a(t)),f}}(t,e);return null}(t,e),a=Cf(t,"z-index",e),s=new so;return function(t){var e=!0;if(n){var u=n(t);u&&(e=!1),s.setFill(u)}if(r){var l=r(t);l&&(e=!1),s.setStroke(l)}if(i){var c=i(t);c&&(e=!1),s.setText(c)}if(o){var f=o(t);f&&(e=!1),s.setImage(f)}return a&&s.setZIndex(a(t)),e?null:s}}function Sf(t,e,n){var r=Pf(t,e+"fill-color",n);if(!r)return null;var i=new Wi;return function(t){var e=r(t);return"none"===e?null:(i.setColor(e),i)}}function Ef(t,e,n){var r=Cf(t,e+"stroke-width",n),i=Pf(t,e+"stroke-color",n);if(!r&&!i)return null;var o=Of(t,e+"stroke-line-cap",n),a=Of(t,e+"stroke-line-join",n),s=kf(t,e+"stroke-line-dash",n),u=Cf(t,e+"stroke-line-dash-offset",n),l=Cf(t,e+"stroke-miter-limit",n),c=new Qi;return function(t){if(i){var e=i(t);if("none"===e)return null;c.setColor(e)}if(r&&c.setWidth(r(t)),o){var n=o(t);if("butt"!==n&&"round"!==n&&"square"!==n)throw new Error("Expected butt, round, or square line cap");c.setLineCap(n)}if(a){var f=a(t);if("bevel"!==f&&"round"!==f&&"miter"!==f)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return s&&c.setLineDash(s(t)),u&&c.setLineDashOffset(u(t)),l&&c.setMiterLimit(l(t)),c}}function Cf(t,e,n){if(e in t){var r=yf(t[e],Kc,n);return function(t){return Ff(r(t),e)}}}function Of(t,e,n){if(!(e in t))return null;var r=yf(t[e],Qc,n);return function(t){return Df(r(t),e)}}function If(t,e,n){if(!(e in t))return null;var r=yf(t[e],Zc,n);return function(t){var n=r(t);if("boolean"!=typeof n)throw new Error("Expected a boolean for ".concat(e));return n}}function Pf(t,e,n){if(!(e in t))return null;var r=yf(t[e],Jc|Qc,n);return function(t){return Bf(r(t),e)}}function kf(t,e,n){if(!(e in t))return null;var r=yf(t[e],$c,n);return function(t){return jf(r(t),e)}}function Mf(t,e,n){if(!(e in t))return null;var r=yf(t[e],$c,n);return function(t){var n=jf(r(t),e);if(2!==n.length)throw new Error("Expected two numbers for ".concat(e));return n}}function Tf(t,e,n){if(!(e in t))return null;var r=yf(t[e],$c|Kc,n);return function(t){return function(t,e){if("number"==typeof t)return t;var n=jf(t,e);if(2!==n.length)throw new Error("Expected an array of two numbers for ".concat(e));return n}(r(t),e)}}function Lf(t,e){var n=t[e];if(void 0!==n){if("number"!=typeof n)throw new Error("Expected a number for ".concat(e));return n}}function Nf(t,e){var n=t[e];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error("Expected bottom-left, bottom-right, top-left, or top-right for ".concat(e));return n}}function Af(t,e){var n=t[e];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error("Expected pixels or fraction for ".concat(e));return n}}function Rf(t,e){var n=t[e];if(void 0!==n){if("string"!=typeof n)throw new Error("Expected a string for ".concat(e));if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error("Expected declutter, obstacle, or none for ".concat(e));return n}}function jf(t,e){if(!Array.isArray(t))throw new Error("Expected an array for ".concat(e));for(var n=t.length,r=0;r<n;++r)if("number"!=typeof t[r])throw new Error("Expected an array of numbers for ".concat(e));return t}function Df(t,e){if("string"!=typeof t)throw new Error("Expected a string for ".concat(e));return t}function Ff(t,e){if("number"!=typeof t)throw new Error("Expected a number for ".concat(e));return t}function Bf(t,e){if("string"==typeof t)return t;var n=jf(t,e),r=n.length;if(r<3||r>4)throw new Error("Expected a color with 3 or 4 values for ".concat(e));return n}function Gf(t){return Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(t)}function zf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qf(r.key),r)}}function qf(t){var e=function(t,e){if("object"!=Gf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gf(e)?e:e+""}function Uf(t,e,n){return e=Xf(e),function(t,e){if(e&&("object"==Gf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vf()?Reflect.construct(e,n||[],Xf(t).constructor):e.apply(t,n))}function Vf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vf=function(){return!!t})()}function Yf(){return Yf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Xf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Yf.apply(null,arguments)}function Xf(t){return Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xf(t)}function Wf(t,e){return Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wf(t,e)}var Hf="renderOrder",Zf=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var r=Object.assign({},t);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(n=Uf(this,e,[r])).declutter_=void 0!==t.declutter&&t.declutter,n.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(t.style),n.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,n.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wf(t,e)}(e,t),n=e,r=[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(t){return Yf(Xf(e.prototype),"getFeatures",this).call(this,t)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(Hf)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(t){t.declutterTree||(t.declutterTree=new $l(9)),this.getRenderer().renderDeclutter(t)}},{key:"setRenderOrder",value:function(t){this.set(Hf,t)}},{key:"setStyle",value:function(t){this.style_=function(t){if(void 0===t)return io;if(!t)return null;if("function"==typeof t)return t;if(t instanceof so)return t;if(!Array.isArray(t))return wf([t]);if(0===t.length)return[];var e=t.length,n=t[0];if(n instanceof so){for(var r=new Array(e),i=0;i<e;++i){var o=t[i];if(!(o instanceof so))throw new Error("Expected a list of style instances");r[i]=o}return r}if("style"in n){for(var a=new Array(e),s=0;s<e;++s){var u=t[s];if(!("style"in u))throw new Error("Expected a list of rules with a style property");a[s]=u}return bf(a)}var l=t;return wf(l)}(t),this.styleFunction_=null===t?void 0:function(t){var e,n;"function"==typeof t?e=t:(Array.isArray(t)?n=t:(Ji("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n});return e}(this.style_),this.changed()}}],r&&zf(n.prototype,r),i&&zf(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Jl);const Kf=Zf;var Qf={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Jf=[Qf.FILL],$f=[Qf.STROKE],th=[Qf.BEGIN_PATH],eh=[Qf.CLOSE_PATH];const nh=Qf;function rh(t){return rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(t)}function ih(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oh(r.key),r)}}function oh(t){var e=function(t,e){if("object"!=rh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rh(e)?e:e+""}const ah=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"drawCustom",value:function(t,e,n,r){}},{key:"drawGeometry",value:function(t){}},{key:"setStyle",value:function(t){}},{key:"drawCircle",value:function(t,e){}},{key:"drawFeature",value:function(t,e){}},{key:"drawGeometryCollection",value:function(t,e){}},{key:"drawLineString",value:function(t,e){}},{key:"drawMultiLineString",value:function(t,e){}},{key:"drawMultiPoint",value:function(t,e){}},{key:"drawMultiPolygon",value:function(t,e){}},{key:"drawPoint",value:function(t,e){}},{key:"drawPolygon",value:function(t,e){}},{key:"drawText",value:function(t,e){}},{key:"setFillStrokeStyle",value:function(t,e){}},{key:"setImageStyle",value:function(t,e){}},{key:"setTextStyle",value:function(t,e){}}])&&ih(t.prototype,e),n&&ih(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function sh(t){return sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(t)}function uh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lh(r.key),r)}}function lh(t){var e=function(t,e){if("object"!=sh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sh(e)?e:e+""}function ch(t,e,n){return e=hh(e),function(t,e){if(e&&("object"==sh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fh()?Reflect.construct(e,n||[],hh(t).constructor):e.apply(t,n))}function fh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fh=function(){return!!t})()}function hh(t){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hh(t)}function ph(t,e){return ph=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ph(t,e)}var dh=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ch(this,e)).tolerance=t,o.maxExtent=n,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ph(t,e)}(e,t),n=e,r=[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}},{key:"appendFlatPointCoordinates",value:function(t,e){for(var n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,i=this.coordinates,o=i.length,a=0,s=t.length;a<s;a+=e)r[0]=t[a],r[1]=t[a+1],za(n,r)&&(i[o++]=r[0],i[o++]=r[1]);return o}},{key:"appendFlatLineCoordinates",value:function(t,e,n,r,i,o){var a=this.coordinates,s=a.length,u=this.getBufferedMaxExtent();o&&(e+=r);var l,c,f,h=t[e],p=t[e+1],d=this.tmpCoordinate_,y=!0;for(l=e+r;l<n;l+=r)d[0]=t[l],d[1]=t[l+1],(f=Va(u,d))!==c?(y&&(a[s++]=h,a[s++]=p,y=!1),a[s++]=d[0],a[s++]=d[1]):f===Ra.INTERSECTING?(a[s++]=d[0],a[s++]=d[1],y=!1):y=!0,h=d[0],p=d[1],c=f;return(i&&y||l===e+r)&&(a[s++]=h,a[s++]=p),s}},{key:"drawCustomCoordinates_",value:function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o],u=this.appendFlatLineCoordinates(t,e,s,r,!1,!1);i.push(u),e=s}return e}},{key:"drawCustom",value:function(t,e,n,r){this.beginGeometry(t,e);var i,o,a,s,u,l=t.getType(),c=t.getStride(),f=this.coordinates.length;switch(l){case"MultiPolygon":i=t.getOrientedFlatCoordinates(),s=[];var h=t.getEndss();u=0;for(var p=0,d=h.length;p<d;++p){var y=[];u=this.drawCustomCoordinates_(i,u,h[p],c,y),s.push(y)}this.instructions.push([nh.CUSTOM,f,s,t,n,Gu]),this.hitDetectionInstructions.push([nh.CUSTOM,f,s,t,r||n,Gu]);break;case"Polygon":case"MultiLineString":a=[],i="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(i,0,t.getEnds(),c,a),this.instructions.push([nh.CUSTOM,f,a,t,n,Bu]),this.hitDetectionInstructions.push([nh.CUSTOM,f,a,t,r||n,Bu]);break;case"LineString":case"Circle":i=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(i,0,i.length,c,!1,!1),this.instructions.push([nh.CUSTOM,f,o,t,n,Fu]),this.hitDetectionInstructions.push([nh.CUSTOM,f,o,t,r||n,Fu]);break;case"MultiPoint":i=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(i,c))>f&&(this.instructions.push([nh.CUSTOM,f,o,t,n,Fu]),this.hitDetectionInstructions.push([nh.CUSTOM,f,o,t,r||n,Fu]));break;case"Point":i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),o=this.coordinates.length,this.instructions.push([nh.CUSTOM,f,o,t,n]),this.hitDetectionInstructions.push([nh.CUSTOM,f,o,t,r||n])}this.endGeometry(e)}},{key:"beginGeometry",value:function(t,e){this.beginGeometryInstruction1_=[nh.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[nh.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==nh.END_GEOMETRY?o=t:r==nh.BEGIN_GEOMETRY&&(n[2]=t,On(this.hitDetectionInstructions,o,t),o=-1)}},{key:"setFillStrokeStyle",value:function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=Jr(r||li)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=Jr(i||pi);var o=e.getLineCap();n.lineCap=void 0!==o?o:ci;var a=e.getLineDash();n.lineDash=a?a.slice():fi;var s=e.getLineDashOffset();n.lineDashOffset=s||0;var u=e.getLineJoin();n.lineJoin=void 0!==u?u:hi;var l=e.getWidth();n.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}},{key:"createFill",value:function(t){var e=t.fillStyle,n=[nh.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(t){return[nh.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}},{key:"updateStrokeStyle",value:function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||i!=t.currentLineDash&&!Pn(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)}},{key:"endGeometry",value:function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[nh.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Ba(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}],r&&uh(n.prototype,r),i&&uh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(ah);const yh=dh;function gh(t){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gh(t)}function vh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mh(r.key),r)}}function mh(t){var e=function(t,e){if("object"!=gh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gh(e)?e:e+""}function _h(t,e,n){return e=xh(e),function(t,e){if(e&&("object"==gh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bh()?Reflect.construct(e,n||[],xh(t).constructor):e.apply(t,n))}function bh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bh=function(){return!!t})()}function wh(){return wh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=xh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},wh.apply(null,arguments)}function xh(t){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xh(t)}function Sh(t,e){return Sh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sh(t,e)}const Eh=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=_h(this,e,[t,n,r,i])).hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterMode_=void 0,o.declutterImageWithText_=void 0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sh(t,e)}(e,t),n=e,(r=[{key:"drawPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([nh.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nh.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([nh.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nh.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,wh(xh(e.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=i[0],this.originY_=i[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}])&&vh(n.prototype,r),i&&vh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(yh);function Ch(t){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(t)}function Oh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ih(r.key),r)}}function Ih(t){var e=function(t,e){if("object"!=Ch(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ch(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ch(e)?e:e+""}function Ph(t,e,n){return e=Th(e),function(t,e){if(e&&("object"==Ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kh()?Reflect.construct(e,n||[],Th(t).constructor):e.apply(t,n))}function kh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kh=function(){return!!t})()}function Mh(){return Mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Th(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Mh.apply(null,arguments)}function Th(t){return Th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Th(t)}function Lh(t,e){return Lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lh(t,e)}const Nh=function(t){function e(t,n,r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ph(this,e,[t,n,r,i])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lh(t,e)}(e,t),n=e,(r=[{key:"drawFlatCoordinates_",value:function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),a=[nh.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}},{key:"drawLineString",value:function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nh.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,fi,0],th);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push($f),this.endGeometry(e)}}},{key:"drawMultiLineString",value:function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nh.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,fi,0],th);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,o[l],s);this.hitDetectionInstructions.push($f),this.endGeometry(e)}}},{key:"finish",value:function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push($f),this.reverseHitDetectionInstructions(),this.state=null,Mh(Th(e.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push($f),t.lastStroke=this.coordinates.length),t.lastStroke=0,Mh(Th(e.prototype),"applyStroke",this).call(this,t),this.instructions.push(th)}}])&&Oh(n.prototype,r),i&&Oh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(yh);function Ah(t){return Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(t)}function Rh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jh(r.key),r)}}function jh(t){var e=function(t,e){if("object"!=Ah(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ah(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ah(e)?e:e+""}function Dh(t,e,n){return e=Gh(e),function(t,e){if(e&&("object"==Ah(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fh()?Reflect.construct(e,n||[],Gh(t).constructor):e.apply(t,n))}function Fh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fh=function(){return!!t})()}function Bh(){return Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Gh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Bh.apply(null,arguments)}function Gh(t){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gh(t)}function zh(t,e){return zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zh(t,e)}var qh=function(t){function e(t,n,r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dh(this,e,[t,n,r,i])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zh(t,e)}(e,t),n=e,r=[{key:"drawFlatCoordinatess_",value:function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=n.length;this.instructions.push(th),this.hitDetectionInstructions.push(th);for(var u=0;u<s;++u){var l=n[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,l,r,!0,!a),h=[nh.MOVE_TO_LINE_TO,c,f];this.instructions.push(h),this.hitDetectionInstructions.push(h),a&&(this.instructions.push(eh),this.hitDetectionInstructions.push(eh)),e=l}return o&&(this.instructions.push(Jf),this.hitDetectionInstructions.push(Jf)),a&&(this.instructions.push($f),this.hitDetectionInstructions.push($f)),e}},{key:"drawCircle",value:function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([nh.SET_FILL_STYLE,li]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([nh.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,fi,0]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var u=[nh.CIRCLE,s];this.instructions.push(th,u),this.hitDetectionInstructions.push(th,u),void 0!==n.fillStyle&&(this.instructions.push(Jf),this.hitDetectionInstructions.push(Jf)),void 0!==n.strokeStyle&&(this.instructions.push($f),this.hitDetectionInstructions.push($f)),this.endGeometry(e)}}},{key:"drawPolygon",value:function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([nh.SET_FILL_STYLE,li]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([nh.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,fi,0]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}}},{key:"drawMultiPolygon",value:function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([nh.SET_FILL_STYLE,li]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([nh.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,fi,0]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,o[l],s);this.endGeometry(e)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var n=this.coordinates,r=0,i=n.length;r<i;++r)n[r]=Ru(n[r],t);return Bh(Gh(e.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}],r&&Rh(n.prototype,r),i&&Rh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(yh);const Uh=qh;function Vh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Yh(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yh(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Xh(t,e,n,r,i){for(var o=[],a=n,s=0,u=e.slice(n,2);s<t&&a+i<r;){var l=Vh(u.slice(-2),2),c=l[0],f=l[1],h=e[a+i],p=e[a+i+1],d=Math.sqrt((h-c)*(h-c)+(p-f)*(p-f));if((s+=d)>=t){var y=(t-s+d)/d,g=qr(c,h,y),v=qr(f,p,y);u.push(g,v),o.push(u),u=[g,v],s==t&&(a+=i),s=0}else if(s<t)u.push(e[a+i],e[a+i+1]),a+=i;else{var m=d-s,_=qr(c,h,m/d),b=qr(f,p,m/d);u.push(_,b),o.push(u),u=[_,b],s=0,a+=i}}return s>0&&o.push(u),o}function Wh(t,e,n,r,i){var o,a,s,u,l,c,f,h,p,d=n,y=n,g=0,v=0,m=n;for(o=n;o<r;o+=i){var _=e[o],b=e[o+1];void 0!==u&&(h=_-u,p=b-l,s=Math.sqrt(h*h+p*p),void 0!==c&&(v+=a,Math.acos((c*h+f*p)/(a*s))>t&&(v>g&&(g=v,d=m,y=o),v=0,m=o-i)),a=s,c=h,f=p),u=_,l=b}return(v+=s)>g?[m,o]:[d,y]}function Hh(t){return Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(t)}function Zh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kh(r.key),r)}}function Kh(t){var e=function(t,e){if("object"!=Hh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hh(e)?e:e+""}function Qh(t,e,n){return e=tp(e),function(t,e){if(e&&("object"==Hh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jh()?Reflect.construct(e,n||[],tp(t).constructor):e.apply(t,n))}function Jh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jh=function(){return!!t})()}function $h(){return $h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=tp(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},$h.apply(null,arguments)}function tp(t){return tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tp(t)}function ep(t,e){return ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ep(t,e)}var np={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},rp=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Qh(this,e,[t,n,r,i])).labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.fillStates[li]={fillStyle:li},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ep(t,e)}(e,t),n=e,r=[{key:"finish",value:function(){var t=$h(tp(e.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,e){var n=this.textFillState_,r=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(n||r)){var o=this.coordinates,a=o.length,s=t.getType(),u=null,l=t.getStride();if("line"!==i.placement||"LineString"!=s&&"MultiLineString"!=s&&"Polygon"!=s&&"MultiPolygon"!=s){var c=i.overflow?null:[];switch(s){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),l=2;break;case"Polygon":u=t.getFlatInteriorPoint(),i.overflow||c.push(u[2]/this.resolution),l=3;break;case"MultiPolygon":var f=t.getFlatInteriorPoints();u=[];for(var h=0,p=f.length;h<p;h+=3)i.overflow||c.push(f[h+2]/this.resolution),u.push(f[h],f[h+1]);if(0===u.length)return;l=2}var d=this.appendFlatPointCoordinates(u,l);if(d===a)return;if(c&&(d-a)/2!=u.length/l){var y=a/2;c=c.filter((function(t,e){var n=o[2*(y+e)]===u[e*l]&&o[2*(y+e)+1]===u[e*l+1];return n||--y,n}))}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&this.updateFillStyle(this.state,this.createFill),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var g=i.padding;if(g!=gi&&(i.scale[0]<0||i.scale[1]<0)){var v=i.padding[0],m=i.padding[1],_=i.padding[2],b=i.padding[3];i.scale[0]<0&&(m=-m,b=-b),i.scale[1]<0&&(v=-v,_=-_),g=[v,m,_,b]}var w=this.pixelRatio;this.instructions.push([nh.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,g==gi?gi:g.map((function(t){return t*w})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var x=1/w,S=this.state.fillStyle;i.backgroundFill&&(this.state.fillStyle=li,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([nh.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,void 0,this.declutterImageWithText_,g,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?li:this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),i.backgroundFill&&(this.state.fillStyle=S,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!ls(this.getBufferedMaxExtent(),t.getExtent()))return;var E;if(u=t.getFlatCoordinates(),"LineString"==s)E=[u.length];else if("MultiLineString"==s)E=t.getEnds();else if("Polygon"==s)E=t.getEnds().slice(0,1);else if("MultiPolygon"==s){var C=t.getEndss();E=[];for(var O=0,I=C.length;O<I;++O)E.push(C[O][0])}this.beginGeometry(t,e);for(var P=i.repeat,k=P?void 0:i.textAlign,M=0,T=0,L=E.length;T<L;++T)for(var N=void 0,A=0,R=(N=P?Xh(P*this.resolution,u,M,E[T],l):[u.slice(M,E[T])]).length;A<R;++A){var j=N[A],D=0,F=j.length;if(null==k){var B=Wh(i.maxAngle,j,0,j.length,2);D=B[0],F=B[1]}for(var G=D;G<F;G+=l)o.push(j[G],j[G+1]);var z=o.length;M=E[T],this.drawChars_(a,z),a=z}this.endGeometry(e)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||di,justify:e.justify,textBaseline:e.textBaseline||yi,scale:e.scale});var o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}},{key:"drawChars_",value:function(t,e){var n=this.textStrokeState_,r=this.textState_,i=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,u=np[r.textBaseline],l=this.textOffsetY_*s,c=this.text_,f=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([nh.DRAW_CHARS,t,e,u,r.overflow,a,r.maxAngle,s,l,i,f*s,c,o,1]),this.hitDetectionInstructions.push([nh.DRAW_CHARS,t,e,u,r.overflow,a?li:a,r.maxAngle,s,l,i,f*s,c,o,1/s])}},{key:"setTextStyle",value:function(t,e){var n,r,i;if(t){var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=Jr(o.getColor()||li)):(r=null,this.textFillState_=r);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||ci,i.lineDash=s?s.slice():fi,i.lineDashOffset=void 0===u?0:u,i.lineJoin=a.getLineJoin()||hi,i.lineWidth=void 0===l?1:l,i.miterLimit=void 0===c?10:c,i.strokeStyle=Jr(a.getColor()||pi)}else i=null,this.textStrokeState_=i;n=this.textState_;var f=t.getFont()||ui;bi(f);var h=t.getScaleArray();n.overflow=t.getOverflow(),n.font=f,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||yi,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||gi,n.scale=void 0===h?[1,1]:h;var p=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===g?0:g,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:ar(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+ar(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}],r&&Zh(n.prototype,r),i&&Zh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(yh);function ip(t){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(t)}function op(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ap(r.key),r)}}function ap(t){var e=function(t,e){if("object"!=ip(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ip(e)?e:e+""}var sp={Circle:Uh,Default:yh,Image:Eh,LineString:Nh,Polygon:Uh,Text:rp};const up=function(){return t=function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}},(e=[{key:"finish",value:function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var r in n){var i=n[r].finish();t[e][r]=i}}return t}},{key:"getBuilder",value:function(t,e){var n=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(r={},this.buildersByZIndex_[n]=r);var i=r[e];return void 0===i&&(i=new(0,sp[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=i),i}}])&&op(t.prototype,e),n&&op(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function lp(t){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(t)}function cp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fp(r.key),r)}}function fp(t){var e=function(t,e){if("object"!=lp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lp(e)?e:e+""}function hp(t,e,n){return e=yp(e),function(t,e){if(e&&("object"==lp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pp()?Reflect.construct(e,n||[],yp(t).constructor):e.apply(t,n))}function pp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pp=function(){return!!t})()}function dp(){return dp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=yp(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},dp.apply(null,arguments)}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yp(t)}function gp(t,e){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gp(t,e)}var vp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=hp(this,e)).ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=t,n.declutterExecutorGroup=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gp(t,e)}(e,t),n=e,r=[{key:"getFeatures",value:function(t){return ir()}},{key:"getData",value:function(t){return null}},{key:"prepareFrame",value:function(t){return ir()}},{key:"renderFrame",value:function(t,e){return ir()}},{key:"loadedTileCallback",value:function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}},{key:"createLoadedTileFinder",value:function(t,e,n){var r=this;return function(i,o){var a=r.loadedTileCallback.bind(r,n,i);return t.forEachLoadedTile(e,i,o,a)}}},{key:"forEachFeatureAtCoordinate",value:function(t,e,n,r,i){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(t){var e=t.target;e.getState()!==Mr&&e.getState()!==Tr||this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(t){var e=t.getState();return e!=Mr&&e!=Tr&&t.addEventListener(qn,this.boundHandleImageChange_),e==Pr&&(t.load(),e=t.getState()),e==Mr}},{key:"renderIfReadyAndVisible",value:function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,dp(yp(e.prototype),"disposeInternal",this).call(this)}}],r&&cp(n.prototype,r),i&&cp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(rr);const mp=vp;function _p(t){return _p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(t)}function bp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wp(r.key),r)}}function wp(t){var e=function(t,e){if("object"!=_p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_p(e)?e:e+""}function xp(t,e,n){return e=Ep(e),function(t,e){if(e&&("object"==_p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sp()?Reflect.construct(e,n||[],Ep(t).constructor):e.apply(t,n))}function Sp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sp=function(){return!!t})()}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ep(t)}function Cp(t,e){return Cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cp(t,e)}const Op=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=xp(this,e,[t])).inversePixelTransform=n,o.frameState=r,o.context=i,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cp(t,e)}(e,t),n=e,r&&bp(n.prototype,r),i&&bp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(_n);function Ip(t){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(t)}function Pp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kp(r.key),r)}}function kp(t){var e=function(t,e){if("object"!=Ip(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ip(e)?e:e+""}function Mp(t,e,n){return e=Np(e),function(t,e){if(e&&("object"==Ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tp()?Reflect.construct(e,n||[],Np(t).constructor):e.apply(t,n))}function Tp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tp=function(){return!!t})()}function Lp(){return Lp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Np(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Lp.apply(null,arguments)}function Np(t){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Np(t)}function Ap(t,e){return Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ap(t,e)}var Rp=[],jp=null;var Dp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mp(this,e,[t])).container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ap(t,e)}(e,t),n=e,r=[{key:"getImageData",value:function(t,e,n){var r;jp||(jp=ni(1,1,void 0,{willReadFrequently:!0})),jp.clearRect(0,0,1,1);try{jp.drawImage(t,e,n,1,1,0,0,1,1),r=jp.getImageData(0,0,1,1).data}catch(t){return jp=null,null}return r}},{key:"getBackground",value:function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}},{key:"useContainer",value:function(t,e,n){var r,i,o=this.getLayer().getClassName();if(t&&t.className===o&&(!n||t&&t.style.backgroundColor&&Pn(Zr(t.style.backgroundColor),Zr(n)))){var a=t.firstElementChild;a instanceof HTMLCanvasElement&&(i=a.getContext("2d"))}if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(r=document.createElement("div")).className=o;var s=r.style;s.position="absolute",s.width="100%",s.height="100%";var u=(i=ni()).canvas;r.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=r,this.context=i}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}},{key:"clipUnrotated",value:function(t,e,n){var r=as(n),i=ss(n),o=ns(n),a=es(n);$s(e.coordinateToPixelTransform,r),$s(e.coordinateToPixelTransform,i),$s(e.coordinateToPixelTransform,o),$s(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;$s(s,r),$s(s,i),$s(s,o),$s(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}},{key:"dispatchRenderEvent_",value:function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new Op(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}}},{key:"preRender",value:function(t,e){this.frameState=e,this.dispatchRenderEvent_(Ho,t,e)}},{key:"postRender",value:function(t,e){this.dispatchRenderEvent_(Zo,t,e)}},{key:"getRenderTransform",value:function(t,e,n,r,i,o,a){var s=i/2,u=o/2,l=r/e,c=-l,f=-t[0]+a,h=-t[1];return tu(this.tempTransform,s,u,l,c,-n,f,h)}},{key:"disposeInternal",value:function(){delete this.frameState,Lp(Np(e.prototype),"disposeInternal",this).call(this)}}],r&&Pp(n.prototype,r),i&&Pp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mp);const Fp=Dp;function Bp(t,e,n,r,i,o,a,s,u,l,c,f){var h=t[e],p=t[e+1],d=0,y=0,g=0,v=0;function m(){d=h,y=p,h=t[e+=r],p=t[e+1],v+=g,g=Math.sqrt((h-d)*(h-d)+(p-y)*(p-y))}do{m()}while(e<n-r&&v+g<o);for(var _=0===g?0:(o-v)/g,b=qr(d,h,_),w=qr(y,p,_),x=e-r,S=v,E=o+s*u(l,i,c);e<n-r&&v+g<E;)m();var C,O=qr(d,h,_=0===g?0:(E-v)/g),I=qr(y,p,_);if(f){var P=[b,w,O,I];iu(P,0,4,2,f,P,P),C=P[0]>P[2]}else C=b>O;var k,M=Math.PI,T=[],L=x+r===e;if(g=0,v=S,h=t[e=x],p=t[e+1],L){m(),k=Math.atan2(p-y,h-d),C&&(k+=k>0?-M:M);var N=(O+b)/2,A=(I+w)/2;return T[0]=[N,A,(E-o)/2,k,i],T}for(var R=0,j=(i=i.replace(/\n/g," ")).length;R<j;){m();var D=Math.atan2(p-y,h-d);if(C&&(D+=D>0?-M:M),void 0!==k){var F=D-k;if(F+=F>M?-2*M:F<-M?2*M:0,Math.abs(F)>a)return null}k=D;for(var B=R,G=0;R<j;++R){var z=s*u(l,i[C?j-R-1:R],c);if(e+r<n&&v+g<o+G+z/2)break;G+=z}if(R!==B){var q=C?i.substring(j-B,j-R):i.substring(B,R),U=qr(d,h,_=0===g?0:(o+G/2-v)/g),V=qr(y,p,_);T.push([U,V,G/2,D,q]),o+=G}}return T}function Gp(t,e,n,r){for(var i=t[e],o=t[e+1],a=0,s=e+r;s<n;s+=r){var u=t[s],l=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}function zp(t){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(t)}function qp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Up(r.key),r)}}function Up(t){var e=function(t,e){if("object"!=zp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zp(e)?e:e+""}var Vp=[1/0,1/0,-1/0,-1/0],Yp=[],Xp=[],Wp=[],Hp=[];function Zp(t){return t[3].declutterBox}var Kp=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Qp(t,e){return"start"===e?e=Kp.test(t)?"right":"left":"end"===e&&(e=Kp.test(t)?"left":"right"),np[e]}function Jp(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}var $p=function(){return t=function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}},e=[{key:"createLabel",value:function(t,e,n,r){var i=t+e+n+r;if(this.labels_[i])return this.labels_[i];var o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,s=this.textStates[e],u=this.pixelRatio,l=[s.scale[0]*u,s.scale[1]*u],c=Array.isArray(t),f=s.justify?np[s.justify]:Qp(Array.isArray(t)?t[0]:t,s.textAlign||di),h=r&&o.lineWidth?o.lineWidth:0,p=c?t:t.split("\n").reduce(Jp,[]),d=function(t,e){for(var n=[],r=[],i=[],o=0,a=0,s=0,u=0,l=0,c=e.length;l<=c;l+=2){var f=e[l];if("\n"!==f&&l!==c){var h=e[l+1]||t.font,p=Si(h,f);n.push(p),a+=p;var d=wi(h);r.push(d),u=Math.max(u,d)}else o=Math.max(o,a),i.push(a),a=0,s+=u}return{width:o,height:s,widths:n,heights:r,lineWidths:i}}(s,p),y=d.width,g=d.height,v=d.widths,m=d.heights,_=d.lineWidths,b=y+h,w=[],x=(b+2)*l[0],S=(g+h)*l[1],E={width:x<0?Math.floor(x):Math.ceil(x),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:w};1==l[0]&&1==l[1]||w.push("scale",l),r&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",h),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset)),n&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var C,O=.5-f,I=f*b+O*h,P=[],k=[],M=0,T=0,L=0,N=0,A=0,R=p.length;A<R;A+=2){var j=p[A];if("\n"!==j){var D=p[A+1]||s.font;D!==C&&(r&&P.push("font",D),n&&k.push("font",D),C=D),M=Math.max(M,m[L]);var F=[j,I+O*v[L]+f*(v[L]-_[N]),.5*(h+M)+T];I+=v[L],r&&P.push("strokeText",F),n&&k.push("fillText",F),++L}else T+=M,M=0,I=f*b+O*h,++N}return Array.prototype.push.apply(w,P),Array.prototype.push.apply(w,k),this.labels_[i]=E,E}},{key:"replayTextBackground_",value:function(t,e,n,r,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(t,e,n,r,i,o,a,s,u,l,c,f,h,p,d,y){var g,v=n-(a*=f[0]),m=r-(s*=f[1]),_=i+u>t?t-u:i,b=o+l>e?e-l:o,w=p[3]+_*f[0]+p[1],x=p[0]+b*f[1]+p[2],S=v-p[3],E=m-p[0];return(d||0!==c)&&(Yp[0]=S,Hp[0]=S,Yp[1]=E,Xp[1]=E,Xp[0]=S+w,Wp[0]=Xp[0],Wp[1]=E+x,Hp[1]=Wp[1]),0!==c?($s(g=tu([1,0,0,1,0,0],n,r,1,1,c,-n,-r),Yp),$s(g,Xp),$s(g,Wp),$s(g,Hp),Xa(Math.min(Yp[0],Xp[0],Wp[0],Hp[0]),Math.min(Yp[1],Xp[1],Wp[1],Hp[1]),Math.max(Yp[0],Xp[0],Wp[0],Hp[0]),Math.max(Yp[1],Xp[1],Wp[1],Hp[1]),Vp)):Xa(Math.min(S,S+w),Math.min(E,E+x),Math.max(S,S+w),Math.max(E,E+x),Vp),h&&(v=Math.round(v),m=Math.round(m)),{drawImageX:v,drawImageY:m,drawImageW:_,drawImageH:b,originX:u,originY:l,declutterBox:{minX:Vp[0],minY:Vp[1],maxX:Vp[2],maxY:Vp[3],value:y},canvasTransform:g,scale:f}}},{key:"replayImageOrLabel_",value:function(t,e,n,r,i,o,a){var s=!(!o&&!a),u=r.declutterBox,l=t.canvas,c=a?a[2]*r.scale[0]/2:0;return u.minX-c<=l.width/e&&u.maxX+c>=0&&u.minY-c<=l.height/e&&u.maxY+c>=0&&(s&&this.replayTextBackground_(t,Yp,Xp,Wp,Hp,o,a),Ci(t,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}},{key:"fill_",value:function(t){if(this.alignFill_){var e=$s(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}},{key:"setStrokeStyle_",value:function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}},{key:"drawLabelWithPointPlacement_",value:function(t,e,n,r){var i=this.textStates[e],o=this.createLabel(t,e,r,n),a=this.strokeStates[n],s=this.pixelRatio,u=Qp(Array.isArray(t)?t[0]:t,i.textAlign||di),l=np[i.textBaseline||yi],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale[0])+2*(.5-u)*c,anchorY:l*o.height/s+2*(.5-l)*c}}},{key:"execute_",value:function(t,e,n,r,i,o,a,s){var u,l,c;this.pixelCoordinates_&&Pn(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=ru(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),l=this.renderedTransform_,c=n,l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5]);for(var f,h,p,d,y,g,v,m,_,b,w,x,S,E,C,O,I=0,P=r.length,k=0,M=0,T=0,L=null,N=null,A=this.coordinateCache_,R=this.viewRotation_,j=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},F=this.instructions!=r||this.overlaps?0:200;I<P;){var B=r[I];switch(B[0]){case nh.BEGIN_GEOMETRY:S=B[1],O=B[3],S.getGeometry()?void 0===a||ls(a,O.getExtent())?++I:I=B[2]+1:I=B[2];break;case nh.BEGIN_PATH:M>F&&(this.fill_(t),M=0),T>F&&(t.stroke(),T=0),M||T||(t.beginPath(),d=NaN,y=NaN),++I;break;case nh.CIRCLE:var G=u[k=B[1]],z=u[k+1],q=u[k+2]-G,U=u[k+3]-z,V=Math.sqrt(q*q+U*U);t.moveTo(G+V,z),t.arc(G,z,V,0,2*Math.PI,!0),++I;break;case nh.CLOSE_PATH:t.closePath(),++I;break;case nh.CUSTOM:k=B[1],f=B[2];var Y=B[3],X=B[4],W=6==B.length?B[5]:void 0;D.geometry=Y,D.feature=S,I in A||(A[I]=[]);var H=A[I];W?W(u,k,f,2,H):(H[0]=u[k],H[1]=u[k+1],H.length=2),X(H,D),++I;break;case nh.DRAW_IMAGE:k=B[1],f=B[2],m=B[3],h=B[4],p=B[5];var Z=B[6],K=B[7],Q=B[8],J=B[9],$=B[10],tt=B[11],et=B[12],nt=B[13],rt=B[14],it=B[15];if(!m&&B.length>=20){_=B[19],b=B[20],w=B[21],x=B[22];var ot=this.drawLabelWithPointPlacement_(_,b,w,x);m=ot.label,B[3]=m;var at=B[23];h=(ot.anchorX-at)*this.pixelRatio,B[4]=h;var st=B[24];p=(ot.anchorY-st)*this.pixelRatio,B[5]=p,Z=m.height,B[6]=Z,nt=m.width,B[13]=nt}var ut=void 0;B.length>25&&(ut=B[25]);var lt=void 0,ct=void 0,ft=void 0;B.length>17?(lt=B[16],ct=B[17],ft=B[18]):(lt=gi,ct=!1,ft=!1),$&&j?tt+=R:$||j||(tt-=R);for(var ht=0;k<f;k+=2)if(!(ut&&ut[ht++]<nt/this.pixelRatio)){var pt=this.calculateImageOrLabelDimensions_(m.width,m.height,u[k],u[k+1],nt,Z,h,p,Q,J,tt,et,i,lt,ct||ft,S),dt=[t,e,m,pt,K,ct?L:null,ft?N:null];if(s){if("none"===rt)continue;if("obstacle"===rt){s.insert(pt.declutterBox);continue}var yt=void 0,gt=void 0;if(it){var vt=f-k;if(!it[vt]){it[vt]=dt;continue}if(yt=it[vt],delete it[vt],gt=Zp(yt),s.collides(gt))continue}if(s.collides(pt.declutterBox))continue;yt&&(s.insert(gt),this.replayImageOrLabel_.apply(this,yt)),s.insert(pt.declutterBox)}this.replayImageOrLabel_.apply(this,dt)}++I;break;case nh.DRAW_CHARS:var mt=B[1],_t=B[2],bt=B[3],wt=B[4];x=B[5];var xt=B[6],St=B[7],Et=B[8];w=B[9];var Ct=B[10];_=B[11],b=B[12];var Ot=[B[13],B[13]],It=this.textStates[b],Pt=It.font,kt=[It.scale[0]*St,It.scale[1]*St],Mt=void 0;Pt in this.widths_?Mt=this.widths_[Pt]:(Mt={},this.widths_[Pt]=Mt);var Tt=Gp(u,mt,_t,2),Lt=Math.abs(kt[0])*Ei(Pt,_,Mt);if(wt||Lt<=Tt){var Nt=Bp(u,mt,_t,2,_,(Tt-Lt)*Qp(_,this.textStates[b].textAlign),xt,Math.abs(kt[0]),Ei,Pt,Mt,j?0:this.viewRotation_);t:if(Nt){var At=[],Rt=void 0,jt=void 0,Dt=void 0,Ft=void 0,Bt=void 0;if(w)for(Rt=0,jt=Nt.length;Rt<jt;++Rt){Dt=(Bt=Nt[Rt])[4],Ft=this.createLabel(Dt,b,"",w),h=Bt[2]+(kt[0]<0?-Ct:Ct),p=bt*Ft.height+2*(.5-bt)*Ct*kt[1]/kt[0]-Et;var Gt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Bt[0],Bt[1],Ft.width,Ft.height,h,p,0,0,Bt[3],Ot,!1,gi,!1,S);if(s&&s.collides(Gt.declutterBox))break t;At.push([t,e,Ft,Gt,1,null,null])}if(x)for(Rt=0,jt=Nt.length;Rt<jt;++Rt){Dt=(Bt=Nt[Rt])[4],Ft=this.createLabel(Dt,b,x,""),h=Bt[2],p=bt*Ft.height-Et;var zt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Bt[0],Bt[1],Ft.width,Ft.height,h,p,0,0,Bt[3],Ot,!1,gi,!1,S);if(s&&s.collides(zt.declutterBox))break t;At.push([t,e,Ft,zt,1,null,null])}s&&s.load(At.map(Zp));for(var qt=0,Ut=At.length;qt<Ut;++qt)this.replayImageOrLabel_.apply(this,At[qt])}}++I;break;case nh.END_GEOMETRY:if(void 0!==o){var Vt=o(S=B[1],O);if(Vt)return Vt}++I;break;case nh.FILL:F?M++:this.fill_(t),++I;break;case nh.MOVE_TO_LINE_TO:for(k=B[1],f=B[2],E=u[k],v=(C=u[k+1])+.5|0,(g=E+.5|0)===d&&v===y||(t.moveTo(E,C),d=g,y=v),k+=2;k<f;k+=2)g=(E=u[k])+.5|0,v=(C=u[k+1])+.5|0,k!=f-2&&g===d&&v===y||(t.lineTo(E,C),d=g,y=v);++I;break;case nh.SET_FILL_STYLE:L=B,this.alignFill_=B[2],M&&(this.fill_(t),M=0,T&&(t.stroke(),T=0)),t.fillStyle=B[1],++I;break;case nh.SET_STROKE_STYLE:N=B,T&&(t.stroke(),T=0),this.setStrokeStyle_(t,B),++I;break;case nh.STROKE:F?T++:t.stroke(),++I;break;default:++I}}M&&this.fill_(t),T&&t.stroke()}},{key:"execute",value:function(t,e,n,r,i,o){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,i,void 0,void 0,o)}},{key:"executeHitDetection",value:function(t,e,n,r,i){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,i)}}],e&&qp(t.prototype,e),n&&qp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();const td=$p;function ed(t){return function(t){if(Array.isArray(t))return nd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return nd(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nd(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rd(t){return rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(t)}function id(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,od(r.key),r)}}function od(t){var e=function(t,e){if("object"!=rd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rd(e)?e:e+""}var ad=["Polygon","Circle","LineString","Image","Text","Default"],sd=function(){return t=function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)},e=[{key:"clip",value:function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}},{key:"createExecutors_",value:function(t){for(var e in t){var n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);var r=t[e];for(var i in r){var o=r[i];n[i]=new td(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}},{key:"hasExecutors",value:function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(t,e,n,r,i,o){var a=2*(r=Math.round(r))+1,s=tu(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=ni(a,a,void 0,{willReadFrequently:!0}));var l,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Qa(l=[1/0,1/0,-1/0,-1/0],t),Ba(l,e*(this.renderBuffer_+r),l));var f,h=function(t){if(void 0!==ud[t])return ud[t];for(var e=2*t+1,n=t*t,r=new Array(n+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var a=i*i+o*o;if(a>n)break;var s=r[a];s||(s=[],r[a]=s),s.push(4*((t+i)*e+(t+o))+3),i>0&&s.push(4*((t-i)*e+(t+o))+3),o>0&&(s.push(4*((t+i)*e+(t-o))+3),i>0&&s.push(4*((t-i)*e+(t-o))+3))}for(var u=[],l=0,c=r.length;l<c;++l)r[l]&&u.push.apply(u,ed(r[l]));return ud[t]=u,u}(r);function p(t,e){for(var n=c.getImageData(0,0,a,a).data,s=0,u=h.length;s<u;s++)if(n[h[s]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(t)){var l=(h[s]-3)/4,p=r-l%a,d=r-(l/a|0),y=i(t,e,p*p+d*d);if(y)return y}c.clearRect(0,0,a,a);break}}var d,y,g,v,m,_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(En),d=_.length-1;d>=0;--d){var b=_[d].toString();for(g=this.executorsByZIndex_[b],y=ad.length-1;y>=0;--y)if(void 0!==(v=g[f=ad[y]])&&(m=v.executeHitDetection(c,s,n,p,l)))return m}}},{key:"getClipCoords",value:function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],r=e[1],i=e[2],o=e[3],a=[n,r,n,o,i,o,i,r];return ru(a,0,8,2,t,a),a}},{key:"isEmpty",value:function(){return Nn(this.executorsByZIndex_)}},{key:"execute",value:function(t,e,n,r,i,o,a){var s,u,l,c,f,h,p=Object.keys(this.executorsByZIndex_).map(Number);for(p.sort(En),this.maxExtent_&&(t.save(),this.clip(t,n)),o=o||ad,a&&p.reverse(),s=0,u=p.length;s<u;++s){var d=p[s].toString();for(f=this.executorsByZIndex_[d],l=0,c=o.length;l<c;++l)void 0!==(h=f[o[l]])&&h.execute(t,e,n,r,i,a)}this.maxExtent_&&t.restore()}}],e&&id(t.prototype,e),n&&id(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),ud={};const ld=sd;function cd(t){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(t)}function fd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hd(r.key),r)}}function hd(t){var e=function(t,e){if("object"!=cd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cd(e)?e:e+""}function pd(t,e,n){return e=yd(e),function(t,e){if(e&&("object"==cd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dd()?Reflect.construct(e,n||[],yd(t).constructor):e.apply(t,n))}function dd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dd=function(){return!!t})()}function yd(t){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yd(t)}function gd(t,e){return gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gd(t,e)}var vd=function(t){function e(t,n,r,i,o,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=pd(this,e)).context_=t,u.pixelRatio_=n,u.extent_=r,u.transform_=i,u.transformRotation_=i?Ur(Math.atan2(i[1],i[0]),10):0,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gd(t,e)}(e,t),n=e,r=[{key:"drawImages_",value:function(t,e,n,r){if(this.image_){var i=ru(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;0===this.transformRotation_&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var f=i[l]-this.imageAnchorX_,h=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=f+this.imageAnchorX_,d=h+this.imageAnchorY_;tu(a,p,d,1,1,u,-p,-d),o.save(),o.transform.apply(o,a),o.translate(p,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,h,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=s)}}},{key:"drawText_",value:function(t,e,n,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=ru(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=r){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(s-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u))}}}},{key:"moveToLineTo_",value:function(t,e,n,r,i){var o=this.context_,a=ru(t,e,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),n}},{key:"drawRings_",value:function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.moveToLineTo_(t,e,n[i],r,!0);return e}},{key:"drawCircle",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ls(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var r=t.getFlatCoordinates();if(!r)return null;var i=t.getStride();return ru(r,0,r.length,i,e,n)}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"setTransform",value:function(t){this.transform_=t}},{key:"drawGeometry",value:function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])}},{key:"drawPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}},{key:"drawMultiPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}},{key:"drawLineString",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ls(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(ls(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(r,i,o[s],a,!1);n.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}}},{key:"drawPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ls(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ls(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];r=this.drawRings_(n,r,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),Pn(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:di;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,e){var n=this;if(t){var r=t.getColor();this.fillState_={fillStyle:Jr(r||li)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),u=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),f=a||fi;this.strokeState_={lineCap:void 0!==o?o:ci,lineDash:1===this.pixelRatio_?f:f.map((function(t){return t*n.pixelRatio_})),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==u?u:hi,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:Jr(i||pi)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){var e;if(t&&(e=t.getSize())){var n=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),i=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();var o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:Jr(n||li)}}else this.textFillState_=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),a=r.getLineDash(),s=r.getLineDashOffset(),u=r.getLineJoin(),l=r.getWidth(),c=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:ci,lineDash:a||fi,lineDashOffset:s||0,lineJoin:void 0!==u?u:hi,lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:Jr(i||pi)}}else this.textStrokeState_=null;var f=t.getFont(),h=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),y=t.getRotation(),g=t.getScaleArray(),v=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==f?f:ui,textAlign:void 0!==m?m:di,textBaseline:void 0!==_?_:yi},this.text_=void 0!==v?Array.isArray(v)?v.reduce((function(t,e,n){return t+(n%2?" ":e)}),""):v:"",this.textOffsetX_=void 0!==h?this.pixelRatio_*h:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""}}],r&&fd(n.prototype,r),i&&fd(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(ah);const md=vd;var _d=.5;var bd=.5,wd={Point:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();if(a){if(a.getImageState()!=Mr)return;var u=t;if(i){var l=a.getDeclutterMode();if("none"!==l)if(u=i,"obstacle"===l){var c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(a,o),c.drawPoint(e,r)}else s&&s.getText()&&(o={})}var f=u.getBuilder(n.getZIndex(),"Image");f.setImageStyle(a,o),f.drawPoint(e,r)}if(s&&s.getText()){var h=t;i&&(h=i);var p=h.getBuilder(n.getZIndex(),"Text");p.setTextStyle(s,o),p.drawText(e,r)}},LineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,r)}var s=n.getText();if(s&&s.getText()){var u=(i||t).getBuilder(n.getZIndex(),"Text");u.setTextStyle(s),u.drawText(e,r)}},Polygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),"Polygon");s.setFillStrokeStyle(o,a),s.drawPolygon(e,r)}var u=n.getText();if(u&&u.getText()){var l=(i||t).getBuilder(n.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,r)}},MultiPoint:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();if(a){if(a.getImageState()!=Mr)return;var u=t;if(i){var l=a.getDeclutterMode();if("none"!==l)if(u=i,"obstacle"===l){var c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(a,o),c.drawMultiPoint(e,r)}else s&&s.getText()&&(o={})}var f=u.getBuilder(n.getZIndex(),"Image");f.setImageStyle(a,o),f.drawMultiPoint(e,r)}if(s&&s.getText()){var h=t;i&&(h=i);var p=h.getBuilder(n.getZIndex(),"Text");p.setTextStyle(s,o),p.drawText(e,r)}},MultiLineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r)}var s=n.getText();if(s&&s.getText()){var u=(i||t).getBuilder(n.getZIndex(),"Text");u.setTextStyle(s),u.drawText(e,r)}},MultiPolygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(a||o){var s=t.getBuilder(n.getZIndex(),"Polygon");s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,r)}var u=n.getText();if(u&&u.getText()){var l=(i||t).getBuilder(n.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,r)}},GeometryCollection:function(t,e,n,r,i){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o){(0,wd[s[o].getType()])(t,s[o],n,r,i)}},Circle:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),"Circle");s.setFillStrokeStyle(o,a),s.drawCircle(e,r)}var u=n.getText();if(u&&u.getText()){var l=(i||t).getBuilder(n.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,r)}}};function xd(t,e){return parseInt(ar(t),10)-parseInt(ar(e),10)}function Sd(t,e){return bd*t/e}function Ed(t,e,n,r,i,o,a){var s=!1,u=n.getImage();if(u){var l=u.getImageState();l==Mr||l==Tr?u.unlistenImageChange(i):(l==Pr&&u.load(),u.listenImageChange(i),s=!0)}return function(t,e,n,r,i,o){var a=n.getGeometryFunction()(e);if(!a)return;var s=a.simplifyTransformed(r,i),u=n.getRenderer();if(u)Cd(t,s,n,e);else{(0,wd[s.getType()])(t,s,n,e,o)}}(t,e,n,r,o,a),s}function Cd(t,e,n,r){if("GeometryCollection"!=e.getType())t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer());else for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)Cd(t,i[o],n,r)}function Od(t){return Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(t)}function Id(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pd(r.key),r)}}function Pd(t){var e=function(t,e){if("object"!=Od(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Od(e)?e:e+""}function kd(t,e,n){return e=Td(e),function(t,e){if(e&&("object"==Od(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Md()?Reflect.construct(e,n||[],Td(t).constructor):e.apply(t,n))}function Md(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Md=function(){return!!t})()}function Td(t){return Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Td(t)}function Ld(t,e){return Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ld(t,e)}var Nd=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kd(this,e,[t])).boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=[1/0,1/0,-1/0,-1/0],n.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ld(t,e)}(e,t),n=e,r=[{key:"renderWorlds",value:function(t,e,n){var r=e.extent,i=e.viewState,o=i.center,a=i.resolution,s=i.projection,u=i.rotation,l=s.getExtent(),c=this.getLayer().getSource(),f=e.pixelRatio,h=e.viewHints,p=!(h[Qo]||h[Jo]),d=this.compositionContext_,y=Math.round(e.size[0]*f),g=Math.round(e.size[1]*f),v=c.getWrapX()&&s.canWrapX(),m=v?us(l):null,_=v?Math.ceil((r[2]-l[2])/m)+1:1,b=v?Math.floor((r[0]-l[0])/m):0;do{var w=this.getRenderTransform(o,a,u,f,y,g,b*m);t.execute(d,1,w,u,p,void 0,n)}while(++b<_)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var t=ni(this.context.canvas.width,this.context.canvas.height,Rp);this.compositionContext_=t}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,e=this.compositionContext_,(n=e.canvas).width=1,n.height=1,e.clearRect(0,0,1,1),Rp.push(this.compositionContext_.canvas),this.compositionContext_=null}var e,n}},{key:"renderDeclutter",value:function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(t,e){var n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];!function(t,e,n){Js(t,e,0,0,n,0,0)}(this.pixelTransform,1/n,1/n),eu(this.inversePixelTransform,this.pixelTransform);var i=nu(this.pixelTransform);this.useContainer(e,i,this.getBackground(t));var o=this.context,a=o.canvas,s=this.replayGroup_,u=this.declutterExecutorGroup,l=s&&!s.isEmpty()||u&&!u.isEmpty();if(!l&&!this.getLayer().hasListener(Ho)&&!this.getLayer().hasListener(Zo))return null;var c=Math.round(t.size[0]*n),f=Math.round(t.size[1]*n);a.width!=c||a.height!=f?(a.width=c,a.height=f,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,c,f),this.preRender(o,t);var h=t.viewState,p=h.projection;this.opacity_=r.opacity,this.setupCompositionContext_();var d=!1;if(l&&r.extent&&this.clipping){var y=Bs(r.extent,p);(d=(l=ls(y,t.extent))&&!qa(y,t.extent))&&this.clipUnrotated(this.compositionContext_,t,y)}return l&&this.renderWorlds(s,t),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(t){var e=this;return new Promise((function(n){if(!e.hitDetectionImageData_&&!e.animatingOrInteracting_){var r=[e.context.canvas.width,e.context.canvas.height];$s(e.pixelTransform,r);var i=e.renderedCenter_,o=e.renderedResolution_,a=e.renderedRotation_,s=e.renderedProjection_,u=e.wrappedRenderedExtent_,l=e.getLayer(),c=[],f=r[0]*_d,h=r[1]*_d;c.push(e.getRenderTransform(i,o,a,_d,f,h,0).slice());var p=l.getSource(),d=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!qa(d,u)){for(var y,g=u[0],v=us(d),m=0;g<d[0];)y=v*--m,c.push(e.getRenderTransform(i,o,a,_d,f,h,y).slice()),g+=v;for(m=0,g=u[2];g>d[2];)y=v*++m,c.push(e.getRenderTransform(i,o,a,_d,f,h,y).slice()),g-=v}e.hitDetectionImageData_=function(t,e,n,r,i,o,a){var s=ni(t[0]*_d,t[1]*_d);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new md(s,_d,i,null,a),c=n.length,f=Math.floor(16777215/c),h={},p=1;p<=c;++p){var d=n[p-1],y=d.getStyleFunction()||r;if(y){var g=y(d,o);if(g){Array.isArray(g)||(g=[g]);for(var v=(p*f).toString(16).padStart(7,"#00000"),m=0,_=g.length;m<_;++m){var b=g[m],w=b.getGeometryFunction()(d);if(w&&ls(i,w.getExtent())){var x=b.clone(),S=x.getFill();S&&S.setColor(v);var E=x.getStroke();E&&(E.setColor(v),E.setLineDash(null)),x.setText(void 0);var C=b.getImage();if(C){var O=C.getImageSize();if(!O)continue;var I=ni(O[0],O[1],void 0,{alpha:!1}),P=I.canvas;I.fillStyle=v,I.fillRect(0,0,P.width,P.height),x.setImage(new kc({img:P,anchor:C.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:C.getOrigin(),opacity:1,size:C.getSize(),scale:C.getScale(),rotation:C.getRotation(),rotateWithView:C.getRotateWithView()}))}var k=x.getZIndex()||0,M=h[k];M||(M={},h[k]=M,M.Polygon=[],M.Circle=[],M.LineString=[],M.Point=[]);var T=w.getType();if("GeometryCollection"===T)for(var L=w.getGeometriesArrayRecursive(),N=0,A=L.length;N<A;++N){var R=L[N];M[R.getType().replace("Multi","")].push(R,x)}else M[T.replace("Multi","")].push(w,x)}}}}}for(var j=Object.keys(h).map(Number).sort(En),D=0,F=j.length;D<F;++D){var B=h[j[D]];for(var G in B)for(var z=B[G],q=0,U=z.length;q<U;q+=2){l.setStyle(z[q+1]);for(var V=0,Y=e.length;V<Y;++V)l.setTransform(e[V]),l.drawGeometry(z[q])}}return s.getImageData(0,0,u.width,u.height)}(r,c,e.renderedFeatures_,l.getStyleFunction(),u,o,a)}n(function(t,e,n){var r=[];if(n){var i=Math.floor(Math.round(t[0])*_d),o=Math.floor(Math.round(t[1])*_d),a=4*(Fr(i,0,n.width-1)+Fr(o,0,n.height-1)*n.width),s=n.data[a],u=n.data[a+1],l=n.data[a+2]+256*(u+256*s),c=Math.floor(16777215/e.length);l&&l%c==0&&r.push(e[l/c-1])}return r}(t,e.renderedFeatures_,e.hitDetectionImageData_))}))}},{key:"forEachFeatureAtCoordinate",value:function(t,e,n,r,i){var o=this;if(this.replayGroup_){var a,s=e.viewState.resolution,u=e.viewState.rotation,l=this.getLayer(),c={},f=function(t,e,n){var o=ar(t),a=c[o];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return c[o]=!0,i.splice(i.lastIndexOf(a),1),r(t,l,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return c[o]=!0,r(t,l,e);i.push(c[o]={feature:t,layer:l,geometry:e,distanceSq:n,callback:r})}},h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((function(r){return a=r.forEachFeatureAtCoordinate(t,s,u,n,f,r===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),a}}},{key:"handleFontsChanged",value:function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}},{key:"handleStyleImageChange_",value:function(t){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(t){var e=this,n=this.getLayer(),r=n.getSource();if(!r)return!1;var i=t.viewHints[Qo],o=t.viewHints[Jo],a=n.getUpdateWhileAnimating(),s=n.getUpdateWhileInteracting();if(this.ready&&!a&&i||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,l=t.viewState,c=l.projection,f=l.resolution,h=t.pixelRatio,p=n.getRevision(),d=n.getRenderBuffer(),y=n.getRenderOrder();void 0===y&&(y=xd);var g=l.center.slice(),v=Ba(u,d*f),m=v.slice(),_=[v.slice()],b=c.getExtent();if(r.getWrapX()&&c.canWrapX()&&!qa(b,t.extent)){var w=us(b),x=Math.max(us(v)/2,w);v[0]=b[0]-x,v[2]=b[2]+x,gs(g,c);var S=hs(_[0],c);S[0]<b[0]&&S[2]<b[2]?_.push([S[0]+w,S[1],S[2]+w,S[3]]):S[0]>b[0]&&S[2]>b[2]&&_.push([S[0]-w,S[1],S[2]-w,S[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==p&&this.renderedRenderOrder_==y&&qa(this.wrappedRenderedExtent_,v))return Pn(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var E,C=new up(Sd(f,h),v,f,h);this.getLayer().getDeclutter()&&(E=new up(Sd(f,h),v,f,h));var O,I=Rs();if(I){for(var P=0,k=_.length;P<k;++P){var M=Fs(_[P],c);r.loadFeatures(M,Gs(f,c),I)}O=Is(I,c)}else for(var T=0,L=_.length;T<L;++T)r.loadFeatures(_[T],f,c);var N=function(t,e){var n=Sd(t,e);return n*n}(f,h),A=!0,R=function(t){var r,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(r=i(t,f)),r){var o=e.renderFeature(t,N,r,C,O,E);A=A&&!o}},j=Fs(v,c),D=r.getFeaturesInExtent(j);y&&D.sort(y);for(var F=0,B=D.length;F<B;++F)R(D[F]);this.renderedFeatures_=D,this.ready=A;var G=C.finish(),z=new ld(v,f,h,r.getOverlaps(),G,n.getRenderBuffer());return E&&(this.declutterExecutorGroup=new ld(v,f,h,r.getOverlaps(),E.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=p,this.renderedRenderOrder_=y,this.renderedExtent_=m,this.wrappedRenderedExtent_=v,this.renderedCenter_=g,this.renderedProjection_=c,this.replayGroup_=z,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(t,e,n,r,i,o){if(!n)return!1;var a=!1;if(Array.isArray(n))for(var s=0,u=n.length;s<u;++s)a=Ed(r,t,n[s],e,this.boundHandleStyleImageChange_,i,o)||a;else a=Ed(r,t,n,e,this.boundHandleStyleImageChange_,i,o);return a}}],r&&Id(n.prototype,r),i&&Id(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Fp);const Ad=Nd;function Rd(t){return Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(t)}function jd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dd(r.key),r)}}function Dd(t){var e=function(t,e){if("object"!=Rd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rd(e)?e:e+""}function Fd(t,e,n){return e=Gd(e),function(t,e){if(e&&("object"==Rd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bd()?Reflect.construct(e,n||[],Gd(t).constructor):e.apply(t,n))}function Bd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bd=function(){return!!t})()}function Gd(t){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gd(t)}function zd(t,e){return zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zd(t,e)}const qd=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fd(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zd(t,e)}(e,t),n=e,(r=[{key:"createRenderer",value:function(){return new Ad(this)}}])&&jd(n.prototype,r),i&&jd(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Kf);function Ud(t){return Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(t)}function Vd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yd(r.key),r)}}function Yd(t){var e=function(t,e){if("object"!=Ud(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ud(e)?e:e+""}var Xd=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rbush_=new $l(e),this.items_={}},e=[{key:"insert",value:function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[ar(e)]=n}},{key:"load",value:function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++){var o=t[r],a=e[r],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=s,this.items_[ar(a)]=s}this.rbush_.load(n)}},{key:"remove",value:function(t){var e=ar(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}},{key:"update",value:function(t,e){var n=this.items_[ar(e)];Za([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))}},{key:"getAll",value:function(){return this.rbush_.all().map((function(t){return t.value}))}},{key:"getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}},{key:"forEach",value:function(t){return this.forEach_(this.getAll(),t)}},{key:"forEachInExtent",value:function(t,e){return this.forEach_(this.getInExtent(t),e)}},{key:"forEach_",value:function(t,e){for(var n,r=0,i=t.length;r<i;r++)if(n=e(t[r]))return n;return n}},{key:"isEmpty",value:function(){return Nn(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(t){var e=this.rbush_.toJSON();return Xa(e.minX,e.minY,e.maxX,e.maxY,t)}},{key:"concat",value:function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}}],e&&Vd(t.prototype,e),n&&Vd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();const Wd=Xd;function Hd(t){return Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(t)}function Zd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kd(r.key),r)}}function Kd(t){var e=function(t,e){if("object"!=Hd(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Hd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hd(e)?e:e+""}function Qd(t,e,n){return e=$d(e),function(t,e){if(e&&("object"==Hd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jd()?Reflect.construct(e,n||[],$d(t).constructor):e.apply(t,n))}function Jd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jd=function(){return!!t})()}function $d(t){return $d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$d(t)}function ty(t,e){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ty(t,e)}function ey(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const ny=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qd(this,e)).projection=Es(t.projection),n.attributions_=ey(t.attributions),n.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,n.loading=!1,n.state_=void 0!==t.state?t.state:"ready",n.wrapX_=void 0!==t.wrapX&&t.wrapX,n.interpolate_=!!t.interpolate,n.viewResolver=null,n.viewRejector=null;var r=n;return n.viewPromise_=new Promise((function(t,e){r.viewResolver=t,r.viewRejector=e})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ty(t,e)}(e,t),n=e,(r=[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(t){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=ey(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}])&&Zd(n.prototype,r),i&&Zd(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mr),ry="addfeature",iy="changefeature",oy="clear",ay="removefeature",sy="featuresloadstart",uy="featuresloadend",ly="featuresloaderror";function cy(t,e){return[[-1/0,-1/0,1/0,1/0]]}var fy=!1;function hy(t,e){return function(n,r,i,o,a){var s=this;!function(t,e,n,r,i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,r,i):t,!0),"arraybuffer"==e.getType()&&(s.responseType="arraybuffer"),s.withCredentials=fy,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r,u=e.getType();"json"==u||"text"==u?r=s.responseText:"xml"==u?(r=s.responseXML)||(r=(new DOMParser).parseFromString(s.responseText,"application/xml")):"arraybuffer"==u&&(r=s.response),r?o(e.readFeatures(r,{extent:n,featureProjection:i}),e.readProjection(r)):a()}else a()},s.onerror=a,s.send()}(t,e,n,r,i,(function(t,e){s.addFeatures(t),void 0!==o&&o(t)}),a||Tn)}}function py(t){return py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},py(t)}function dy(t){return function(t){if(Array.isArray(t))return yy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return yy(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yy(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function gy(){return gy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Sy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},gy.apply(null,arguments)}function vy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_y(r.key),r)}}function my(t,e,n){return e&&vy(t.prototype,e),n&&vy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _y(t){var e=function(t,e){if("object"!=py(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=py(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==py(e)?e:e+""}function by(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wy(t,e,n){return e=Sy(e),function(t,e){if(e&&("object"==py(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xy()?Reflect.construct(e,n||[],Sy(t).constructor):e.apply(t,n))}function xy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xy=function(){return!!t})()}function Sy(t){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sy(t)}function Ey(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cy(t,e)}function Cy(t,e){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cy(t,e)}var Oy=function(t){function e(t,n,r){var i;return by(this,e),(i=wy(this,e,[t])).feature=n,i.features=r,i}return Ey(e,t),my(e)}(_n),Iy=function(t){function e(t){var n;by(this,e),(n=wy(this,e,[{attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}])).on,n.once,n.un,n.loader_=Tn,n.format_=t.format,n.overlaps_=void 0===t.overlaps||t.overlaps,n.url_=t.url,void 0!==t.loader?n.loader_=t.loader:void 0!==n.url_&&(Ji(n.format_,"`format` must be set when `url` is set"),n.loader_=hy(n.url_,n.format_)),n.strategy_=void 0!==t.strategy?t.strategy:cy;var r,i,o=void 0===t.useSpatialIndex||t.useSpatialIndex;return n.featuresRtree_=o?new Wd:null,n.loadedExtentsRtree_=new Wd,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(r=t.features).getArray()),o||void 0!==r||(r=new Po(i)),void 0!==i&&n.addFeaturesInternal(i),void 0!==r&&n.bindFeaturesCollection_(r),n}return Ey(e,t),my(e,[{key:"addFeature",value:function(t){this.addFeatureInternal(t),this.changed()}},{key:"addFeatureInternal",value:function(t){var e=ar(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Oy(ry,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)}},{key:"setupChangeEvents_",value:function(t,e){this.featureChangeKeys_[t]=[Yn(e,qn,this.handleFeatureChange_,this),Yn(e,bn,this.handleFeatureChange_,this)]}},{key:"addToIndex_",value:function(t,e){var n=!0,r=e.getId();return void 0!==r&&(r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e),n&&(Ji(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}},{key:"addFeatures",value:function(t){this.addFeaturesInternal(t),this.changed()}},{key:"addFeaturesInternal",value:function(t){for(var e=[],n=[],r=[],i=0,o=t.length;i<o;i++){var a=t[i],s=ar(a);this.addToIndex_(s,a)&&n.push(a)}for(var u=0,l=n.length;u<l;u++){var c=n[u],f=ar(c);this.setupChangeEvents_(f,c);var h=c.getGeometry();if(h){var p=h.getExtent();e.push(p),r.push(c)}else this.nullGeometryFeatures_[f]=c}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(ry))for(var d=0,y=n.length;d<y;d++)this.dispatchEvent(new Oy(ry,n[d]))}},{key:"bindFeaturesCollection_",value:function(t){var e=this,n=!1;this.addEventListener(ry,(function(e){n||(n=!0,t.push(e.feature),n=!1)})),this.addEventListener(ay,(function(e){n||(n=!0,t.remove(e.feature),n=!1)})),t.addEventListener(ho,(function(t){n||(n=!0,e.addFeature(t.element),n=!1)})),t.addEventListener(po,(function(t){n||(n=!0,e.removeFeature(t.element),n=!1)})),this.featuresCollection_=t}},{key:"clear",value:function(t){var e=this;if(t){for(var n in this.featureChangeKeys_){this.featureChangeKeys_[n].forEach(Wn)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){for(var r in this.featuresRtree_.forEach((function(t){e.removeFeatureInternal(t)})),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new Oy(oy);this.dispatchEvent(i),this.changed()}},{key:"forEachFeature",value:function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureAtCoordinateDirect",value:function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){if(n.getGeometry().intersectsCoordinate(t))return e(n)}))}},{key:"forEachFeatureInExtent",value:function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureIntersectingExtent",value:function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var r=e(n);if(r)return r}}))}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Nn(this.nullGeometryFeatures_)||In(t,Object.values(this.nullGeometryFeatures_))),t}},{key:"getFeaturesAtCoordinate",value:function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}},{key:"getFeaturesInExtent",value:function(t,e){var n=this;if(this.featuresRtree_){var r;if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);var i=function(t,e){if(e.canWrapX()){var n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];hs(t,e);var r=us(n);if(us(t)>r)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+r,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-r,t[3]]]}return[t]}(t,e);return(r=[]).concat.apply(r,dy(i.map((function(t){return n.featuresRtree_.getInExtent(t)}))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(t,e){var n=t[0],r=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0];return e=e||kn,this.featuresRtree_.forEachInExtent(s,(function(t){if(e(t)){var u=t.getGeometry(),l=a;if((a=u.closestPointXY(n,r,o,a))<l){i=t;var c=Math.sqrt(a);s[0]=n-c,s[1]=r-c,s[2]=n+c,s[3]=r+c}}})),i}},{key:"getExtent",value:function(t){return this.featuresRtree_.getExtent(t)}},{key:"getFeatureById",value:function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null}},{key:"getFeatureByUid",value:function(t){var e=this.uidIndex_[t];return void 0!==e?e:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(t){var e=t.target,n=ar(e),r=e.getGeometry();if(r){var i=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new Oy(iy,e))}},{key:"hasFeature",value:function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:ar(t)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Nn(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(t,e,n){for(var r=this,i=this.loadedExtentsRtree_,o=this.strategy_(t,e,n),a=function(){var t=o[s],a=i.forEachInExtent(t,(function(e){return qa(e.extent,t)}));a||(++r.loadingExtentsCount_,r.dispatchEvent(new Oy(sy)),r.loader_.call(r,t,e,n,(function(t){--r.loadingExtentsCount_,r.dispatchEvent(new Oy(uy,void 0,t))}),(function(){--r.loadingExtentsCount_,r.dispatchEvent(new Oy(ly))})),i.insert(t,{extent:t.slice()}))},s=0,u=o.length;s<u;++s)a();this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),gy(Sy(e.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(Za(n.extent,t))return e=n,!0})),e&&n.remove(e)}},{key:"removeFeature",value:function(t){if(t){var e=ar(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}}},{key:"removeFeatureInternal",value:function(t){var e=ar(t),n=this.featureChangeKeys_[e];if(n){n.forEach(Wn),delete this.featureChangeKeys_[e];var r=t.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Oy(ay,t)),t}}},{key:"removeFromIdIndex_",value:function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}},{key:"setLoader",value:function(t){this.loader_=t}},{key:"setUrl",value:function(t){Ji(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(hy(t,this.format_))}}])}(ny);const Py=Iy;function ky(t){return ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(t)}function My(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ty(r.key),r)}}function Ty(t){var e=function(t,e){if("object"!=ky(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ky(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ky(e)?e:e+""}function Ly(t,e,n){return e=Ay(e),function(t,e){if(e&&("object"==ky(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ny()?Reflect.construct(e,n||[],Ay(t).constructor):e.apply(t,n))}function Ny(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ny=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ay(t)}function Ry(t,e){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ry(t,e)}var jy=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=Ly(this,e),void 0!==r&&void 0===n?i.setFlatCoordinates(r,t):(n=n||0,i.setCenterAndRadius(t,n,r)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ry(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<r){if(0===s)for(var u=0;u<this.stride;++u)n[u]=i[u];else{var l=this.getRadius()/Math.sqrt(s);n[0]=i[0]+l*o,n[1]=i[1]+l*a;for(var c=2;c<this.stride;++c)n[c]=i[c]}return n.length=this.stride,s}return r}},{key:"containsXY",value:function(t,e){var n=this.flatCoordinates,r=t-n[0],i=e-n[1];return r*r+i*i<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Xa(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(t){if(ls(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||ts(t,this.intersectsCoordinate.bind(this))}return!1}},{key:"setCenter",value:function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()}},{key:"setCenterAndRadius",value:function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=Mu(r,0,t,this.stride);r[i++]=r[0]+e;for(var o=1,a=this.stride;o<a;++o)r[i++]=r[o];r.length=i,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(t,e){}},{key:"setRadius",value:function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}},{key:"rotate",value:function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(iu(n,0,n.length,r,t,e,n)),this.changed()}}],r&&My(n.prototype,r),i&&My(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);jy.prototype.transform;const Dy=jy;function Fy(t,e,n,r,i,o,a){var s,u,l=(n-e)/r;if(1===l)s=e;else if(2===l)s=e,u=i;else if(0!==l){for(var c=t[e],f=t[e+1],h=0,p=[0],d=e+r;d<n;d+=r){var y=t[d],g=t[d+1];h+=Math.sqrt((y-c)*(y-c)+(g-f)*(g-f)),p.push(h),c=y,f=g}var v=i*h,m=function(t,e,n){var r,i;n=n||En;for(var o=0,a=t.length,s=!1;o<a;)(i=+n(t[r=o+(a-o>>1)],e))<0?o=r+1:(a=r,s=!i);return s?o:~o}(p,v);m<0?(u=(v-p[-m-2])/(p[-m-1]-p[-m-2]),s=e+(-m-2)*r):s=e+m*r}a=a>1?a:2,o=o||new Array(a);for(var _=0;_<a;++_)o[_]=void 0===s?NaN:void 0===u?t[s+_]:qr(t[s+_],t[s+r+_],u);return o}function By(t,e,n,r,i,o){if(n==e)return null;var a;if(i<t[e+r-1])return o?((a=t.slice(e,e+r))[r-1]=i,a):null;if(t[n-1]<i)return o?((a=t.slice(n-r,n))[r-1]=i,a):null;if(i==t[e+r-1])return t.slice(e,e+r);for(var s=e/r,u=n/r;s<u;){var l=s+u>>1;i<t[(l+1)*r-1]?u=l:s=l+1}var c=t[s*r-1];if(i==c)return t.slice((s-1)*r,(s-1)*r+r);var f=(i-c)/(t[(s+1)*r-1]-c);a=[];for(var h=0;h<r-1;++h)a.push(qr(t[(s-1)*r+h],t[s*r+h],f));return a.push(i),a}function Gy(t){return Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(t)}function zy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qy(r.key),r)}}function qy(t){var e=function(t,e){if("object"!=Gy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gy(e)?e:e+""}function Uy(t,e,n){return e=Yy(e),function(t,e){if(e&&("object"==Gy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vy()?Reflect.construct(e,n||[],Yy(t).constructor):e.apply(t,n))}function Vy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vy=function(){return!!t})()}function Yy(t){return Yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yy(t)}function Xy(t,e){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xy(t,e)}var Wy=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Uy(this,e)).flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(t[0])?r.setCoordinates(t,n):r.setFlatCoordinates(n,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xy(t,e)}(e,t),n=e,r=[{key:"appendCoordinate",value:function(t){this.flatCoordinates?In(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){return r<Ga(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ou(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))}},{key:"forEachSegment",value:function(t){return hl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,By(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}},{key:"getCoordinates",value:function(){return Fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return Fy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}},{key:"getLength",value:function(){return Gp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var n=[];return n.length=Nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(t){return pl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tu(this.flatCoordinates,0,t,this.stride),this.changed()}}],r&&zy(n.prototype,r),i&&zy(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const Hy=Wy;function Zy(t){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(t)}function Ky(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qy(r.key),r)}}function Qy(t){var e=function(t,e){if("object"!=Zy(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zy(e)?e:e+""}function Jy(t,e,n){return e=tg(e),function(t,e){if(e&&("object"==Zy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$y()?Reflect.construct(e,n||[],tg(t).constructor):e.apply(t,n))}function $y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($y=function(){return!!t})()}function tg(t){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tg(t)}function eg(t,e){return eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eg(t,e)}var ng=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jy(this,e)).on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var r=t;n.setGeometry(r)}else{var i=t;n.setProperties(i)}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eg(t,e)}(e,t),n=e,r=[{key:"clone",value:function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&(Wn(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Yn(t,qn,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(t){this.set(this.geometryName_,t)}},{key:"setStyle",value:function(t){var e,n;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?n=e:(Ji("function"==typeof e.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),n=[e]),function(){return n}):void 0,this.changed()}},{key:"setId",value:function(t){this.id_=t,this.changed()}},{key:"setGeometryName",value:function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}],r&&Ky(n.prototype,r),i&&Ky(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(mr);const rg=ng;function ig(t){return ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(t)}function og(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ag(r.key),r)}}function ag(t){var e=function(t,e){if("object"!=ig(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ig(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ig(e)?e:e+""}function sg(t,e,n){return e=cg(e),function(t,e){if(e&&("object"==ig(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ug()?Reflect.construct(e,n||[],cg(t).constructor):e.apply(t,n))}function ug(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ug=function(){return!!t})()}function lg(){return lg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=cg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},lg.apply(null,arguments)}function cg(t){return cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cg(t)}function fg(t,e){return fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fg(t,e)}var hg=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var r=n=sg(this,e,[{handleEvent:function(t){return r.handleEvent_(t)}}]);n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.maxCircleCoordinates_=t.maxCircleCoordinates||100,n.features_=t.features,n.source_=t.source,n.conditionFn_=t.condition,n.squareFn_=t.squareCondition,n.centeredFn_=t.centerCondition,n.canRotate_=!1!==t.canRotate,n.geometryName_=t.geometryName||"geometry",n.setSides(t.sides);var i=fo(!0);return n.sketch_=new Po,n.overlayLayer_=new qd({source:new Py({features:n.sketch_,useSpatialIndex:!1}),name:"DrawRegular overlay",displayInLayerSwitcher:!1,style:t.style||i}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fg(t,e)}(e,t),n=e,r=[{key:"setMap",value:function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),lg(cg(e.prototype),"setMap",this).call(this,t),this.overlayLayer_.setMap(t)}},{key:"setActive",value:function(t){this.reset(),lg(cg(e.prototype),"setActive",this).call(this,t)}},{key:"reset",value:function(){this.overlayLayer_&&this.overlayLayer_.getSource().clear(),this.started_=!1}},{key:"setSides",value:function(t){t=parseInt(t),this.sides_=t>2?t:0}},{key:"canRotate",value:function(t){return!0!==t&&!1!==t||(this.canRotate_=t),this.canRotate_}},{key:"getSides",value:function(){return this.sides_}},{key:"getGeom_",value:function(){if(this.overlayLayer_.getSource().clear(),!this.center_)return!1;var t;if(this.coord_){var e,n,r,i,o,a=this.center_,s=this.coord_;if(!this.sides_&&this.square_&&!this.centered_)return a=[(s[0]+a[0])/2,(s[1]+a[1])/2],e=[s[0]-a[0],s[1]-a[1]],r=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=new Dy(a,r,"XY"),o=this.getMap().getPixelFromCoordinate(a),n=Math.max(100,Math.abs(o[0]-this.coordPx_[0]),Math.abs(o[1]-this.coordPx_[1])),Ml(i,n=Math.min(this.maxCircleCoordinates_,Math.round(n/3)),0);var u=this.canRotate_&&this.centered_&&this.square_;if(e=[s[0]-a[0],s[1]-a[1]],this.square_&&!u){var l=Math.max(Math.abs(e[0]),Math.abs(e[1]));s=[a[0]+(e[0]>0?l:-l),a[1]+(e[1]>0?l:-l)]}if((r=Math.sqrt(e[0]*e[0]+e[1]*e[1]))>0){var c;if(i=new Dy(a,r,"XY"),c=u?Math.atan2(e[1],e[0]):this.startAngle[this.sides_]||this.startAngle.default,this.sides_?t=Ml(i,this.sides_,c):(o=this.getMap().getPixelFromCoordinate(this.center_),n=Math.max(100,Math.abs(o[0]-this.coordPx_[0]),Math.abs(o[1]-this.coordPx_[1])),t=Ml(i,n=Math.min(this.maxCircleCoordinates_,Math.round(n/(this.centered_?3:5))),0)),u)return t;var f=t.getExtent(),h=((a=this.centered_?[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]]:this.center_)[0]-s[0])/(f[0]-f[2]),p=(a[1]-s[1])/(f[1]-f[3]);if(this.square_){var d=Math.min(Math.abs(h),Math.abs(p));h=Math.sign(h)*d,p=Math.sign(p)*d}var y=[a[0]-f[0]*h,a[1]-f[1]*p];return t.applyTransform((function(t,e,n){for(var r=0;r<t.length;r+=n)e[r]=t[r]*h+y[0],e[r+1]=t[r+1]*p+y[1];return e})),t}}return new sl(this.center_)}},{key:"drawSketch_",value:function(t){if(this.overlayLayer_.getSource().clear(),t){this.square_=this.squareFn_?this.squareFn_(t):t.originalEvent.shiftKey,this.centered_=this.centeredFn_?this.centeredFn_(t):t.originalEvent.metaKey||t.originalEvent.ctrlKey;var e=this.getGeom_();if(e){var n=this.feature_;return"Polygon"===e.getType()&&n.getGeometry().setCoordinates(e.getCoordinates()),this.overlayLayer_.getSource().addFeature(n),this.coord_&&this.square_&&(this.canRotate_&&this.centered_&&this.coord_||!this.sides_&&!this.centered_)&&this.overlayLayer_.getSource().addFeature(new rg(new Hy([this.center_,this.coord_]))),n}}}},{key:"drawPoint_",value:function(t,e){e||this.overlayLayer_.getSource().clear(),this.overlayLayer_.getSource().addFeature(new rg(new sl(t)))}},{key:"handleEvent_",value:function(t){var e,n;switch(this._eventTime=new Date,t.type){case"pointerdown":if(this.conditionFn_&&!this.conditionFn_(t))break;this.downPx_=t.pixel,this.start_(t),this._longTouch=!1,setTimeout(function(){this._longTouch=new Date-this._eventTime>450,this._longTouch&&this.handleMoveEvent_(t)}.bind(this),500);break;case"pointerup":this.started_&&this.coord_&&(e=this.downPx_[0]-t.pixel[0])*e+(n=this.downPx_[1]-t.pixel[1])*n<=this.squaredClickTolerance_&&("pointermove"==this.lastEvent||"keydown"==this.lastEvent||(e=this.upPx_[0]-t.pixel[0])*e+(n=this.upPx_[1]-t.pixel[1])*n<=this.squaredClickTolerance_?this.end_(t):(this.handleMoveEvent_(t),this.drawPoint_(t.coordinate,!0))),this.upPx_=t.pixel;break;case"pointerdrag":if(this.started_){var r=this.getMap().getPixelFromCoordinate(this.center_);(e=r[0]-t.pixel[0])*e+(n=r[1]-t.pixel[1])*n<=this.squaredClickTolerance_&&this.reset()}return!this._longTouch;case"pointermove":this.started_&&(e=this.downPx_[0]-t.pixel[0])*e+(n=this.downPx_[1]-t.pixel[1])*n>this.squaredClickTolerance_&&(this.handleMoveEvent_(t),this.lastEvent=t.type);break;default:if(this.lastEvent=t.type,this.started_&&"dblclick"===t.type)return!1}return!0}},{key:"finishDrawing",value:function(){this.started_&&this.coord_&&this.end_({pixel:this.upPx_,coordinate:this.coord_})}},{key:"handleMoveEvent_",value:function(t){if(this.started_){this.coord_=t.coordinate,this.coordPx_=t.pixel;var e=this.drawSketch_(t);this.dispatchEvent({type:"drawing",feature:e,pixel:t.pixel,startCoordinate:this.center_,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}else this.drawPoint_(t.coordinate)}},{key:"start_",value:function(t){if(this.started_)this.coord_=t.coordinate;else{this.started_=!0,this.center_=t.coordinate,this.coord_=null;var e=this.feature_=new rg({});e.setGeometryName(this.geometryName_||"geometry"),e.setGeometry(new Pl([[t.coordinate,t.coordinate,t.coordinate]])),this.drawSketch_(t),this.dispatchEvent({type:"drawstart",feature:e,pixel:t.pixel,coordinate:t.coordinate})}}},{key:"end_",value:function(t){if(this.coord_=t.coordinate,this.started_=!1,!this.coord_||this.center_[0]===this.coord_[0]&&this.center_[1]===this.coord_[1])this.dispatchEvent({type:"drawcancel",feature:null,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_});else{var e=this.feature_;e.setGeometry(this.getGeom_()),this.source_?this.source_.addFeature(e):this.features_&&this.features_.push(e),this.dispatchEvent({type:"drawend",feature:e,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}this.center_=this.coord_=null,this.drawSketch_()}}],r&&og(n.prototype,r),i&&og(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Ir);hg.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4};const pg=hg;function dg(t){return dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(t)}function yg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gg(r.key),r)}}function gg(t){var e=function(t,e){if("object"!=dg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dg(e)?e:e+""}function vg(t,e,n){return e=bg(e),function(t,e){if(e&&("object"==dg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mg()?Reflect.construct(e,n||[],bg(t).constructor):e.apply(t,n))}function mg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mg=function(){return!!t})()}function _g(){return _g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=bg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},_g.apply(null,arguments)}function bg(t){return bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bg(t)}function wg(t,e){return wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wg(t,e)}var xg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vg(this,e)).facadeMap_=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wg(t,e)}(e,M.impl.Control),n=e,r=[{key:"addTo",value:function(t,n){_g(bg(e.prototype),"addTo",this).call(this,t,n),this.facadeMap_=t,this.vectorSource_=void 0}},{key:"setVectorSource",value:function(t){this.vectorSource_=t}},{key:"getVectorSource",value:function(){return this.vectorSource_}},{key:"addDrawInteraction",value:function(){var t=this.facadeMap_.getMapImpl();this.draw=this.newDrawInteraction(this.vectorSource_,this.facadeControl.geometry),this.addDrawEvent(),t.addInteraction(this.draw)}},{key:"addDrawEvent",value:function(){var t=this;this.draw.on("drawend",(function(e){t.facadeControl.onDraw(e)}))}},{key:"addFigureInteraction",value:function(){var t=this.facadeMap_.getMapImpl();this.drawRegular=this.newDrawFigureInteraction(this.vectorSource_),this.addDrawFigureEvent(),t.addInteraction(this.drawRegular)}},{key:"addDrawFigureEvent",value:function(){var t=this;this.drawRegular.on("drawend",(function(e){t.facadeControl.onDrawFigure(e)}))}},{key:"newDrawFigureInteraction",value:function(t){return new pg({canRotate:!0,sides:4,source:t,squareCondition:function(){return!document.getElementById("m-vectorsmanagement-irregularFigure").checked}})}},{key:"changeFigure",value:function(t){var e=t.target.value;this.drawRegular.setSides(parseInt(e,10))}},{key:"removeFigureDrawInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.drawRegular)}},{key:"removeDrawInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.draw)}},{key:"newDrawInteraction",value:function(t,e){return new ol.interaction.Draw({source:t,type:e})}},{key:"newPolygonFeature",value:function(t){return new ol.Feature({geometry:ol.geom.Polygon.fromExtent(t)})}},{key:"drawPointFeature",value:function(t,e){var n=this.facadeMap_.getProjection().code,r=ol.proj.transform(t,e,n),i=new ol.Feature({geometry:new ol.geom.Point(r)}),o=this.convertToMFeatures(i);return this.facadeControl.getLayer().addFeatures([o]),this.facadeMap_.setCenter(r),o}},{key:"getMapeaFeatureClone",value:function(){var t=this.facadeControl.feature.getImpl().olFeature_.clone();return M.impl.Feature.olFeature2Facade(t)}},{key:"getFeatureExtent",value:function(t){return t.getImpl().getOLFeature().getGeometry().getExtent()}},{key:"convertToMFeatures",value:function(t){return new M.Feature(t.getId(),{geometry:{coordinates:t.getGeometry().getCoordinates(),type:t.getGeometry().getType()}})}}],r&&yg(n.prototype,r),i&&yg(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),Sg=n(3122),Eg=n.n(Sg);function Cg(t){return Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(t)}function Og(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ig(r.key),r)}}function Ig(t){var e=function(t,e){if("object"!=Cg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Cg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cg(e)?e:e+""}function Pg(t,e,n){return e=Tg(e),function(t,e){if(e&&("object"==Cg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kg()?Reflect.construct(e,n||[],Tg(t).constructor):e.apply(t,n))}function kg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kg=function(){return!!t})()}function Mg(){return Mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Tg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Mg.apply(null,arguments)}function Tg(t){return Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tg(t)}function Lg(t,e){return Lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lg(t,e)}var Ng="Arial",Ag="#71a7d3",Rg=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(xg)&&M.exception(h("exception"));var i=new xg(t);return r=Pg(this,e,[i,"Creation"]),i.facadeControl=r,r.map_=t,r.managementControl_=n,r.template=null,r.layer_=null,r.isPointActive=!1,r.isLocatedPointActive=!1,r.isLineActive=!1,r.isPolygonActive=!1,r.isFigureActive=!1,r.isTextActive=!1,r.feature=void 0,r.emphasis=void 0,r.geometry=void 0,r.selectionLayer=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lg(t,e)}(e,M.Control),n=e,r=[{key:"active",value:function(t){this.template=M.template.compileSync(Eg(),{vars:{translations:{creationLayer:h("creationLayer"),creationPoint:h("creationPoint"),creationCoordPoint:h("creationCoordPoint"),creationLine:h("creationLine"),creationPolygon:h("creationPolygon"),creationFigure:h("creationFigure"),creationText:h("creationText"),creationLongitude:h("creationLongitude"),creationLatitude:h("creationLatitude"),draw:h("draw"),cuadrilatero:h("cuadrilatero"),circulo:h("circulo"),triangulo:h("triangulo"),pentagono:h("pentagono"),hexagono:h("hexagono")}}}),t.querySelector("#m-vectorsmanagement-controls").appendChild(this.template),this.initializeLayers(),this.addEvents(),this.managementControl_.accessibilityTab(this.template)}},{key:"initializeLayers",value:function(){var t=this.map_.getLayers().filter((function(t){return"selectLayer"===t.name}));t.length>0?this.selectionLayer=t[0]:(this.selectionLayer=new M.layer.Vector({extract:!1,name:"selectLayer",source:this.getImpl().getVectorSource()},{displayInLayerSwitcher:!1}),this.layer_.getImpl().extract=!1,this.map_.addLayers(this.selectionLayer),this.selectionLayer.setZIndex(this.selectionLayer.getZIndex()+8))}},{key:"addEvents",value:function(){var t=this;this.template.querySelector("#pointdrawing").addEventListener("click",(function(e){return t.geometryBtnClick("Point")})),this.template.querySelector("#pointlocateddrawing").addEventListener("click",(function(e){return t.geometryBtnClick("LocatedPoint")})),this.template.querySelector("#linedrawing").addEventListener("click",(function(e){return t.geometryBtnClick("LineString")})),this.template.querySelector("#polygondrawing").addEventListener("click",(function(e){return t.geometryBtnClick("Polygon")})),this.template.querySelector("#figuredrawing").addEventListener("click",(function(e){return t.geometryBtnClick("Figure")})),this.template.querySelector("#textdrawing").addEventListener("click",(function(e){return t.geometryBtnClick("Text")})),this.template.querySelector("#m-point-coordinates-srs").addEventListener("change",this.srsChangeEvent),this.template.querySelector("#m-vectormanagement-coordinates-draw").addEventListener("click",this.drawPointCoords.bind(this)),this.template.querySelector("#figuresSelector").addEventListener("change",(function(e){return t.getImpl().changeFigure(e)}))}},{key:"srsChangeEvent",value:function(t){var e=t.target.selectedOptions[0].dataset.units,n=document.querySelector("#m-point-coordinates-utm"),r=document.querySelector("#m-point-coordinates-latlon");"d"===e?(n.classList.contains("closed")||n.classList.add("closed"),r.classList.contains("closed")&&r.classList.remove("closed")):"m"===e&&(r.classList.contains("closed")||r.classList.add("closed"),n.classList.contains("closed")&&n.classList.remove("closed"))}},{key:"drawPointCoords",value:function(){var t,e,n=this.template.querySelector("#m-point-coordinates-srs").selectedOptions[0],r=n.value;if("d"===n.dataset.units?(t=this.template.querySelector("#LON").value,e=this.template.querySelector("#LAT").value):(t=this.template.querySelector("#UTM-X").value,e=this.template.querySelector("#UTM-Y").value),void 0!==t&&t.length>0&&void 0!==e&&e.length>0){var i=parseFloat(t),o=parseFloat(e);if(Number.isNaN(i)||Number.isNaN(o))M.dialog.error(h("exception.formatocoord"));else{var a=[i,o];this.feature=this.getImpl().drawPointFeature(a,r)}}else M.dialog.error(h("exception.introduzcoord"))}},{key:"deactiveBtn",value:function(t,e){var n=this.getControlActive(t),r=!1;return n?(n&&(n.id==="".concat(e)&&(r=!0),"pointlocateddrawing"===n.id?this.template.querySelector("#m-point-coordinates").classList.add("closed"):"textdrawing"===n.id?this.template.querySelector("#m-text-draw").classList.add("closed"):"figuredrawing"===n.id&&this.template.querySelector("#m-figuretools").classList.add("closed"),n.classList.remove("activated")),r):r}},{key:"getControlActive",value:function(t){return 0!==t.querySelectorAll(".m-vectorsmanagement-creation-container>#creationBtns .activated").length&&t.querySelectorAll(".m-vectorsmanagement-creation-container>#creationBtns .activated")[0]}},{key:"deactivateDrawing",value:function(){if(this.isPointActive||this.isLocatedPointActive||this.isLineActive||this.isPolygonActive||this.isTextActive||this.isFigureActive){this.isLocatedPointActive&&this.template.querySelector("#m-point-coordinates").classList.add("closed"),this.isFigureActive?(this.template.querySelector("#m-figuretools").classList.add("closed"),this.getImpl().removeFigureDrawInteraction()):(this.isTextActive&&this.template.querySelector("#m-text-draw").classList.add("closed"),this.getImpl().removeDrawInteraction()),this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.managementControl_.removeSelectedFeatures(),void 0!==this.feature&&this.feature.getStyle()&&void 0!==this.feature.getStyle().get("label")&&this.feature.getStyle().set("fill.opacity",0),this.feature=void 0,this.isPointActive=!1,this.isLocatedPointActive=!1,this.isLineActive=!1,this.isPolygonActive=!1,this.isFigureActive=!1,this.isTextActive=!1;var t=this.getControlActive(this.template);t&&t.classList.remove("activated")}}},{key:"activationManager",value:function(t,e,n){this[t]?(this.deactivateDrawing(),this[t]=!1,this.geometry=void 0,document.getElementById(e).classList.remove("activated")):(this.deactivateDrawing(),this[t]=!0,this.geometry=n,document.getElementById(e).classList.add("activated"))}},{key:"geometryBtnClick",value:function(t){switch(t){case"Point":this.activationManager("isPointActive","pointdrawing",t);break;case"LocatedPoint":this.activationManager("isLocatedPointActive","pointlocateddrawing",t);break;case"LineString":this.activationManager("isLineActive","linedrawing",t);break;case"Polygon":this.activationManager("isPolygonActive","polygondrawing",t);break;case"Figure":this.activationManager("isFigureActive","figuredrawing","Polygon");break;case"Text":this.activationManager("isTextActive","textdrawing","Point")}(this.isPointActive||this.isLocatedPointActive||this.isLineActive||this.isPolygonActive||this.isFigureActive||this.isTextActive)&&(this.isTextActive?(this.template.querySelector("#textContent").value="",this.template.querySelector("#m-text-draw").classList.remove("closed")):this.isLocatedPointActive?this.template.querySelector("#m-point-coordinates").classList.remove("closed"):this.isFigureActive&&(this.template.querySelector("#m-figuretools").classList.remove("closed"),this.getImpl().addFigureInteraction()),"LocatedPoint"!==t&&"Figure"!==t&&this.getImpl().addDrawInteraction())}},{key:"setLayer",value:function(t){this.layer_=t,this.getImpl().setVectorSource(this.layer_.getImpl().getOL3Layer().getSource())}},{key:"getLayer",value:function(){return this.layer_}},{key:"onDraw",value:function(t){this.hideTextPoint(),this.feature=M.impl.Feature.olFeature2Facade(t.feature),this.geometry=this.feature.getGeometry().type,"Point"===this.geometry&&this.isTextActive&&(this.updateGlobalsWithInput(),this.setTextStyle()),this.addAttributesToFeature(),this.layer_.addFeatures(this.feature),this.emphasizeSelectedFeature()}},{key:"addAttributesToFeature",value:function(){var t=this.layer_.getFeatures();if(t.length>0&&t[0].getAttributes()){var e=Object.keys(t[0].getAttributes()),n={};e.forEach((function(t){n[t]=""})),this.feature.setAttributes(n)}}},{key:"onDrawFigure",value:function(t){this.feature=this.getImpl().convertToMFeatures(t.feature),this.geometry=this.feature.getGeometry().type,this.addAttributesToFeature(),this.layer_.addFeatures(this.feature),this.emphasizeSelectedFeature()}},{key:"hideTextPoint",value:function(){"Point"===this.geometry&&this.feature&&this.feature.getStyle()&&void 0!==this.feature.getStyle().get("label")&&this.feature.getStyle().set("fill.opacity",0)}},{key:"updateGlobalsWithInput",value:function(){var t=document.querySelector("#m-text-draw #textContent");this.textContent=""===t.value?"Texto":t.value}},{key:"setTextStyle",value:function(){var t;t=null!==this.feature.getStyle()&&"bold"===this.feature.getStyle().get("label.font").split(" ")[0]?"bold ".concat(12,"px ").concat(Ng):"".concat(12,"px ").concat(Ng),this.feature.setStyle(new M.style.Point({radius:3,fill:{color:"#ff5733",opacity:1},stroke:{color:"#fdfefe",width:0},label:{text:this.textContent,font:t,color:"#71a7d3"}}))}},{key:"setFeatureStyle",value:function(t,e){switch(e){case"Point":case"MultiPoint":t.setStyle(new M.style.Point({radius:6,fill:{color:Ag},stroke:{color:Ag,width:2}}));break;case"LineString":case"MultiLineString":t.setStyle(new M.style.Line({stroke:{color:Ag,width:6}}));break;case"Polygon":case"MultiPolygon":t.setStyle(new M.style.Polygon({fill:{color:Ag,opacity:.2},stroke:{color:Ag,width:6}}));break;default:throw new Error(h("exception.geometrianoencontrar"))}}},{key:"emphasizeSelectedFeature",value:function(){if(this.emphasis=null,this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.managementControl_.removeSelectedFeatures(),this.feature){var t=null!==document.querySelector("#textdrawtools");if("Point"!==this.geometry&&"MultiPoint"!==this.geometry||t)if("Point"!==this.geometry&&"MultiPoint"!==this.geometry||!t){var e=this.getImpl().getFeatureExtent(this.feature);this.emphasis=M.impl.Feature.olFeature2Facade(this.getImpl().newPolygonFeature(e)),this.emphasis.setStyle(new M.style.Line({stroke:{color:"#FF0000",width:2}}))}else null===this.feature.getStyle()&&this.setTextStyle(!1),this.feature.getStyle().set("fill.opacity",1);else this.emphasis=this.getImpl().getMapeaFeatureClone(),this.emphasis.setStyle(new M.style.Point({radius:20,stroke:{color:"#FF0000",width:2}}));this.managementControl_.addFeatureToSelection(this.feature),this.selectionLayer.addFeatures([this.emphasis])}}},{key:"destroy",value:function(){}},{key:"activate",value:function(){Mg(Tg(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.deactivateDrawing(),this.template&&this.template.remove()}},{key:"equals",value:function(t){return t instanceof e}}],r&&Og(n.prototype,r),i&&Og(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),jg=n(4893),Dg=n(2816),Fg=n.n(Dg),Bg=n(704),Gg=n.n(Bg);function zg(t){return zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(t)}function qg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ug(r.key),r)}}function Ug(t){var e=function(t,e){if("object"!=zg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zg(e)?e:e+""}function Vg(t,e,n){return e=Wg(e),function(t,e){if(e&&("object"==zg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yg()?Reflect.construct(e,n||[],Wg(t).constructor):e.apply(t,n))}function Yg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yg=function(){return!!t})()}function Xg(){return Xg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Wg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Xg.apply(null,arguments)}function Wg(t){return Wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wg(t)}function Hg(t,e){return Hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hg(t,e)}var Zg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vg(this,e)).facadeMap_=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hg(t,e)}(e,M.impl.Control),n=e,(r=[{key:"addTo",value:function(t,n){Xg(Wg(e.prototype),"addTo",this).call(this,t,n),this.facadeMap_=t,this.olLayer_=void 0}}])&&qg(n.prototype,r),i&&qg(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),Kg=n(7551),Qg=n.n(Kg);function Jg(t){return Jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(t)}function $g(t){return function(t){if(Array.isArray(t))return tv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tv(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tv(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ev(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nv(r.key),r)}}function nv(t){var e=function(t,e){if("object"!=Jg(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jg(e)?e:e+""}function rv(t,e,n){return e=av(e),function(t,e){if(e&&("object"==Jg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iv()?Reflect.construct(e,n||[],av(t).constructor):e.apply(t,n))}function iv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iv=function(){return!!t})()}function ov(){return ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=av(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ov.apply(null,arguments)}function av(t){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},av(t)}function sv(t,e){return sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sv(t,e)}var uv=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(Zg)&&M.exception(h("exception"));var i=new Zg(t);return r=rv(this,e,[i,"Download"]),i.facadeControl=r,r.map_=t,r.managementControl_=n,r.template=null,r.layer_=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sv(t,e)}(e,M.Control),n=e,r=[{key:"active",value:function(t){this.template=M.template.compileSync(Qg(),{vars:{translations:{download:h("download")}}}),t.querySelector("#m-vectorsmanagement-controls").appendChild(this.template);var e=this.template.querySelector("#m-vectorsmanagement-download-btn");this.managementControl_.accessibilityTab(this.template),e.addEventListener("click",this.downloadBtnEvent.bind(this))}},{key:"downloadBtnEvent",value:function(){"layer"===this.managementControl_.getSelection()?this.downloadLayer():this.downloadFeature()}},{key:"downloadLayer",value:function(){var t=this.newNoTextLayer();if(t.getFeatures().length>0){t.setVisible(!1),this.map_.addLayers(t);var e=t.toGeoJSON();this.map_.removeLayers(t),this.download(e)}else M.dialog.info(h("exception.emptylayer"))}},{key:"downloadFeature",value:function(){var t=this.managementControl_.getSelectedFeatures();if(t.length>0){var e=[];t.forEach((function(t){var n=t.getStyle();n&&void 0!==n.get("label")||e.push(t.getGeoJSON())}));var n={type:"FeatureCollection",features:M.impl.utils.geojsonTo4326(e,this.map_.getProjection().code)};this.download(n)}else M.dialog.info(h("exception.featuresel"))}},{key:"download",value:function(t){var e,n,r,i=this.getLayer().name||"misgeometrias",o=this.template.querySelector("#m-vectorsmanagement-download-format").value;switch(o){case"geojson":e=JSON.stringify(t),n="geo+json",r="geojson";break;case"kml":e=Fg()(t),n="vnd.google-earth.kml+xml",r="kml";break;case"gpx":e=Gg()(t),n="gpx+xml",r="gpx";break;case"shp":var a=this.parseGeojsonForShp(t),s={folder:i,types:{point:"puntos",polygon:"poligonos",polyline:"lineas"}};jg.download(a,s);break;default:M.dialog.error(h("exception.ficherosel"))}if("shp"!==o){var u=window.URL.createObjectURL(new window.Blob([e],{type:"application/".concat(n)})),l=document.createElement("a");l.href=u,l.setAttribute("download","".concat(i,".").concat(r)),document.body.appendChild(l),l.click()}this.managementControl_.deactive(document,"m-vectorsmanagement-download")}},{key:"newNoTextLayer",value:function(){var t=new M.layer.Vector({name:"copia"}),e=this.layer_.getFeatures().filter((function(t){return null===t.getStyle()||void 0===t.getStyle().get("label")}));return t.addFeatures(e),t}},{key:"parseGeojsonForShp",value:function(t){var e=t,n=[];t.features.forEach((function(t){var e=t.geometry.type;if(e.match(/^Multi/)){var r=t.geometry.coordinates.map((function(n,r){var i={type:"Feature",id:"".concat(t.id).concat(r),geometry:{type:"",coordinates:n},properties:{}};switch(e){case"MultiPoint":i.geometry.type="Point";break;case"MultiLineString":i.geometry.type="LineString";break;case"MultiPolygon":i.geometry.type="Polygon"}return i}));n.push.apply(n,$g(r))}else n.push(t)})),e.features=n;for(var r=0;r<e.features.length;r+=1)delete e.features[r].id;return e}},{key:"setLayer",value:function(t){this.layer_=t}},{key:"getLayer",value:function(){return this.layer_}},{key:"destroy",value:function(){}},{key:"activate",value:function(){ov(av(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.template.remove()}},{key:"equals",value:function(t){return t instanceof e}}],r&&ev(n.prototype,r),i&&ev(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function lv(t){return lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(t)}function cv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fv(r.key),r)}}function fv(t){var e=function(t,e){if("object"!=lv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lv(e)?e:e+""}function hv(t,e,n){return e=dv(e),function(t,e){if(e&&("object"==lv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pv()?Reflect.construct(e,n||[],dv(t).constructor):e.apply(t,n))}function pv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pv=function(){return!!t})()}function dv(t){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dv(t)}function yv(t,e){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yv(t,e)}var gv=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=hv(this,e),n&&!Array.isArray(t[0])?r.setFlatCoordinates(n,t):r.setCoordinates(t,n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yv(t,e)}(e,t),n=e,r=[{key:"appendPoint",value:function(t){this.flatCoordinates?In(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){if(r<Ga(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=Gr(t,e,i[a],i[a+1]);if(u<r){r=u;for(var l=0;l<o;++l)n[l]=i[a+l];n.length=o}}return r}},{key:"getCoordinates",value:function(){return Fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new sl(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var a=new sl(t.slice(i,i+n),e);r.push(a)}return r}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n)if(Ua(t,e[r],e[r+1]))return!0;return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tu(this.flatCoordinates,0,t,this.stride),this.changed()}}],r&&cv(n.prototype,r),i&&cv(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const vv=gv;function mv(t){return mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(t)}function _v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bv(r.key),r)}}function bv(t){var e=function(t,e){if("object"!=mv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=mv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mv(e)?e:e+""}function wv(t,e,n){return e=Sv(e),function(t,e){if(e&&("object"==mv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xv()?Reflect.construct(e,n||[],Sv(t).constructor):e.apply(t,n))}function xv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xv=function(){return!!t})()}function Sv(t){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sv(t)}function Ev(t,e){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ev(t,e)}var Cv=function(t){function e(t,n,r){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=wv(this,e)).endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){for(var o=i.getLayout(),a=t,s=[],u=[],l=0,c=a.length;l<c;++l){var f=a[l];0===l&&(o=f.getLayout());for(var h=s.length,p=f.getEnds(),d=0,y=p.length;d<y;++d)p[d]+=h;In(s,f.getFlatCoordinates()),u.push(p)}n=o,t=s,r=u}return void 0!==n&&r?(i.setFlatCoordinates(n,t),i.endss_=r):i.setCoordinates(t,n),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ev(t,e)}(e,t),n=e,r=[{key:"appendPolygon",value:function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;In(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}},{key:"clone",value:function(){for(var t=this.endss_.length,n=new Array(t),r=0;r<t;++r)n[r]=this.endss_[r].slice();var i=new e(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}},{key:"closestPointXY",value:function(t,e,n,r){return r<Ga(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=Iu(t,e,s,r,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,r,i,o,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=n.length;f<h;++f){var p=n[f];l=ku(t,e,p,r,i,o,a,s,u,l,c),e=p[p.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))}},{key:"containsXY",value:function(t,e){return function(t,e,n,r,i,o){if(0===n.length)return!1;for(var a=0,s=n.length;a<s;++a){var u=n[a];if(cl(t,e,u,r,i,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}},{key:"getArea",value:function(){return function(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=qu(t,e,s,r),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?_l(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Gu(e,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,r){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=n.length;a<s;++a){var u=n[a];o=Ha(t,e,u[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,n,r,i){for(var o=[],a=0,s=n.length;a<s;++a){var u=n[a];o=fl(t,e,u,r,i,2*a,o),e=u[u.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new vv(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(!vl(t,e,s,r,i))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=_l(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var n=[],r=[];return n.length=function(t,e,n,r,i,o,a,s){for(var u=0,l=n.length;u<l;++u){var c=n[u],f=[];a=Du(t,e,c,r,i,o,a,f),s.push(f),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,"XY",r)}},{key:"getPolygon",value:function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var r=this.endss_[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new Pl(this.flatCoordinates.slice(e,i),this.layout,r)}},{key:"getPolygons",value:function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var f=new Pl(e.slice(i,u),t,s);r.push(f),i=u}return r}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(t){return function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(dl(t,e,s,r,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,r,i){i=i||[];for(var o=0,a=0,s=n.length;a<s;++a){var u=Lu(t,e,n[a],r,i[o]);0===u.length&&(u[0]=e),i[o++]=u,e=u[u.length-1]}return i.length=o,i}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}],r&&_v(n.prototype,r),i&&_v(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const Ov=Cv;function Iv(t){return Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(t)}function Pv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kv(r.key),r)}}function kv(t){var e=function(t,e){if("object"!=Iv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Iv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Iv(e)?e:e+""}function Mv(t,e,n){return e=Nv(e),function(t,e){if(e&&("object"==Iv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tv()?Reflect.construct(e,n||[],Nv(t).constructor):e.apply(t,n))}function Tv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tv=function(){return!!t})()}function Lv(){return Lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Nv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Lv.apply(null,arguments)}function Nv(t){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nv(t)}function Av(t,e){return Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Av(t,e)}var Rv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mv(this,e)).geometries_=t||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Av(t,e)}(e,t),n=e,r=[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(Wn),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Yn(this.geometries_[t],qn,this.changed,this))}},{key:"clone",value:function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){if(r<Ga(this.getExtent(),t,e))return r;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)r=i[o].closestPointXY(t,e,n,r);return r}},{key:"containsXY",value:function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)if(n[r].containsXY(t,e))return!0;return!1}},{key:"computeExtent",value:function(t){Wa(t);for(var e=this.geometries_,n=0,r=e.length;n<r;++n)Ka(t,e[n].getExtent());return t}},{key:"getGeometries",value:function(){return jv(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var t=[],e=this.geometries_,n=0,r=e.length;n<r;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],r=this.geometries_,i=!1,o=0,a=r.length;o<a;++o){var s=r[o],u=s.getSimplifiedGeometry(t);n.push(u),u!==s&&(i=!0)}if(i){var l=new e(null);return l.setGeometriesArray(n),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(t){for(var e=this.geometries_,n=0,r=e.length;n<r;++n)if(e[n].intersectsExtent(t))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)n[r].rotate(t,e);this.changed()}},{key:"scale",value:function(t,e,n){n||(n=rs(this.getExtent()));for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].scale(t,e,n);this.changed()}},{key:"setGeometries",value:function(t){this.setGeometriesArray(jv(t))}},{key:"setGeometriesArray",value:function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(t){for(var e=this.geometries_,n=0,r=e.length;n<r;++n)e[n].applyTransform(t);this.changed()}},{key:"translate",value:function(t,e){for(var n=this.geometries_,r=0,i=n.length;r<i;++r)n[r].translate(t,e);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),Lv(Nv(e.prototype),"disposeInternal",this).call(this)}}],r&&Pv(n.prototype,r),i&&Pv(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(du);function jv(t){for(var e=[],n=0,r=t.length;n<r;++n)e.push(t[n].clone());return e}const Dv=Rv;function Fv(t){return Fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(t)}function Bv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gv(r.key),r)}}function Gv(t){var e=function(t,e){if("object"!=Fv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fv(e)?e:e+""}function zv(t,e,n){return e=Uv(e),function(t,e){if(e&&("object"==Fv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qv()?Reflect.construct(e,n||[],Uv(t).constructor):e.apply(t,n))}function qv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qv=function(){return!!t})()}function Uv(t){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uv(t)}function Vv(t,e){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vv(t,e)}function Yv(t){return Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yv(t)}function Xv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wv(r.key),r)}}function Wv(t){var e=function(t,e){if("object"!=Yv(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Yv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yv(e)?e:e+""}function Hv(t,e,n){return e=Qv(e),function(t,e){if(e&&("object"==Yv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zv()?Reflect.construct(e,n||[],Qv(t).constructor):e.apply(t,n))}function Zv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zv=function(){return!!t})()}function Kv(){return Kv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Qv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Kv.apply(null,arguments)}function Qv(t){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qv(t)}function Jv(t,e){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jv(t,e)}const $v=function(t){function e(t,n,r,i,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Hv(this,e,[t,n,o])).originalEvent=r,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s.activePointers=a,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jv(t,e)}(e,t),n=e,(r=[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){Kv(Qv(e.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){Kv(Qv(e.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}])&&Xv(n.prototype,r),i&&Xv(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=zv(this,e,[t])).map=n,i.frameState=void 0!==r?r:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vv(t,e)}(e,t),n=e,r&&Bv(n.prototype,r),i&&Bv(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(_n)),tm="singleclick",em=Vn,nm="pointerdrag",rm="pointermove",im="pointerdown",om="pointerup";function am(t){return am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(t)}function sm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,um(r.key),r)}}function um(t){var e=function(t,e){if("object"!=am(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=am(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==am(e)?e:e+""}function lm(t,e,n){return e=fm(e),function(t,e){if(e&&("object"==am(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cm()?Reflect.construct(e,n||[],fm(t).constructor):e.apply(t,n))}function cm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cm=function(){return!!t})()}function fm(t){return fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fm(t)}function hm(t,e){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hm(t,e)}var pm=function(t){function e(t,n,r){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=lm(this,e)).ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(t[0]))i.setCoordinates(t,n);else if(void 0!==n&&r)i.setFlatCoordinates(n,t),i.ends_=r;else{for(var o=i.getLayout(),a=t,s=[],u=[],l=0,c=a.length;l<c;++l){var f=a[l];0===l&&(o=f.getLayout()),In(s,f.getFlatCoordinates()),u.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=u}return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hm(t,e)}(e,t),n=e,r=[{key:"appendLineString",value:function(t){this.flatCoordinates?In(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,r){return r<Ga(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Iu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ku(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))}},{key:"getCoordinateAtM",value:function(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,function(t,e,n,r,i,o,a){if(a)return By(t,e,n[n.length-1],r,i,o);var s;if(i<t[r-1])return o?((s=t.slice(0,r))[r-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-r))[r-1]=i,s):null;for(var u=0,l=n.length;u<l;++u){var c=n[u];if(e!=c){if(i<t[e+r-1])return null;if(i<=t[c-1])return By(t,e,c,r,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}},{key:"getCoordinates",value:function(){return Bu(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(t){return t<0||this.ends_.length<=t?null:new Hy(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLineStrings",value:function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],u=new Hy(t.slice(i,s),n);r.push(u),i=s}return r}},{key:"getFlatMidpoints",value:function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.ends_,i=this.stride,o=0,a=r.length;o<a;++o){var s=r[o];In(t,Fy(e,n,s,i,.5)),n=s}return t}},{key:"getSimplifiedGeometryInternal",value:function(t){var n=[],r=[];return n.length=Au(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,"XY",r)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(t){return function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){if(pl(t,e,n[o],r,i))return!0;e=n[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Lu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}],r&&sm(n.prototype,r),i&&sm(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Eu);const dm=pm;function ym(t){return ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(t)}function gm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vm(r.key),r)}}function vm(t){var e=function(t,e){if("object"!=ym(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ym(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ym(e)?e:e+""}function mm(t,e,n){return e=bm(e),function(t,e){if(e&&("object"==ym(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_m()?Reflect.construct(e,n||[],bm(t).constructor):e.apply(t,n))}function _m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_m=function(){return!!t})()}function bm(t){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bm(t)}function wm(t,e){return wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wm(t,e)}const xm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=mm(this,e,[t=t||{}]),t.handleDownEvent&&(n.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(n.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(n.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(n.handleUpEvent=t.handleUpEvent),t.stopDown&&(n.stopDown=t.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wm(t,e)}(e,t),n=e,(r=[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(t){return!1}},{key:"handleDragEvent",value:function(t){}},{key:"handleEvent",value:function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==nm)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==om){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==im){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==rm&&this.handleMoveEvent(t);return!e}},{key:"handleMoveEvent",value:function(t){}},{key:"handleUpEvent",value:function(t){return!1}},{key:"stopDown",value:function(t){return t}},{key:"updateTrackedPointers_",value:function(t){t.activePointers&&(this.targetPointers=t.activePointers)}}])&&gm(n.prototype,r),i&&gm(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Ir);var Sm=kn,Em=Mn,Cm=function(t){return t.type==tm},Om=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Im=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};function Pm(t){return Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(t)}function km(){return km="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=jm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},km.apply(null,arguments)}function Mm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lm(r.key),r)}}function Tm(t,e,n){return e&&Mm(t.prototype,e),n&&Mm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lm(t){var e=function(t,e){if("object"!=Pm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Pm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pm(e)?e:e+""}function Nm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Am(t,e,n){return e=jm(e),function(t,e){if(e&&("object"==Pm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rm()?Reflect.construct(e,n||[],jm(t).constructor):e.apply(t,n))}function Rm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rm=function(){return!!t})()}function jm(t){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jm(t)}function Dm(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fm(t,e)}function Fm(t,e){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fm(t,e)}var Bm="drawstart",Gm="drawend",zm="drawabort",qm=function(t){function e(t,n){var r;return Nm(this,e),(r=Am(this,e,[t])).feature=n,r}return Dm(e,t),Tm(e)}(_n);function Um(t,e){return Gr(t[0],t[1],e[0],e[1])}function Vm(t,e){var n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function Ym(t,e,n){var r,i;e<n?(r=e,i=n):(r=n,i=e);var o=Math.ceil(r),a=Math.floor(i);if(o>a)return Um(Qm(t,r),Qm(t,i));var s=0;r<o&&(s+=Um(Qm(t,r),Vm(t,o)));a<i&&(s+=Um(Vm(t,a),Qm(t,i)));for(var u=o;u<a-1;++u){s+=Um(Vm(t,u),Vm(t,u+1))}return s}function Xm(t,e,n){if(e instanceof Hy)Hm(t,e.getCoordinates(),!1,n);else if(e instanceof dm)for(var r=e.getCoordinates(),i=0,o=r.length;i<o;++i)Hm(t,r[i],!1,n);else if(e instanceof Pl)for(var a=e.getCoordinates(),s=0,u=a.length;s<u;++s)Hm(t,a[s],!0,n);else if(e instanceof Ov)for(var l=e.getCoordinates(),c=0,f=l.length;c<f;++c)for(var h=l[c],p=0,d=h.length;p<d;++p)Hm(t,h[p],!0,n);else if(e instanceof Dv)for(var y=e.getGeometries(),g=0;g<y.length;++g)Xm(t,y[g],n);else;}var Wm={index:-1,endIndex:NaN};function Hm(t,e,n,r){for(var i=t[0],o=t[1],a=0,s=e.length-1;a<s;++a){var u=Km(i,o,e[a],e[a+1]);if(0===u.squaredDistance){var l=a+u.along;return void r.push({coordinates:e,ring:n,startIndex:l,endIndex:l})}}}var Zm={along:0,squaredDistance:0};function Km(t,e,n,r){var i=n[0],o=n[1],a=r[0]-i,s=r[1]-o,u=0,l=i,c=o;return 0===a&&0===s||(l+=a*(u=Fr(((t-i)*a+(e-o)*s)/(a*a+s*s),0,1)),c+=s*u),Zm.along=u,Zm.squaredDistance=Ur(Gr(t,e,l,c),10),Zm}function Qm(t,e){var n=t.length,r=Math.floor(e),i=e-r;r>=n?r-=n:r<0&&(r+=n);var o=r+1;o>=n&&(o-=n);var a=t[r],s=a[0],u=a[1],l=t[o];return[s+(l[0]-s)*i,u+(l[1]-u)*i]}var Jm=function(t){function e(t){var n;Nm(this,e);var r=t;r.stopDown||(r.stopDown=Mn),(n=Am(this,e,[r])).on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=t.source?t.source:null,n.features_=t.features?t.features:null,n.snapTolerance_=t.snapTolerance?t.snapTolerance:12,n.type_=t.type,n.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(n.type_),n.stopClick_=!!t.stopClick,n.minPoints_=t.minPoints?t.minPoints:"Polygon"===n.mode_?3:2,n.maxPoints_="Circle"===n.mode_?2:t.maxPoints?t.maxPoints:1/0,n.finishCondition_=t.finishCondition?t.finishCondition:kn,n.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";var i,o=t.geometryFunction;if(!o){var a,s=n.mode_;if("Circle"===s)o=function(t,e,n){var r=e||new Dy([NaN,NaN]),i=Ds(t[0],n),o=ds(i,Ds(t[t.length-1],n));r.setCenterAndRadius(i,Math.sqrt(o),this.geometryLayout_);var a=Rs();return a&&r.transform(n,a),r};else"Point"===s?a=sl:"LineString"===s?a=Hy:"Polygon"===s&&(a=Pl),o=function(t,e,n){return e?"Polygon"===s?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])],this.geometryLayout_):e.setCoordinates([],this.geometryLayout_):e.setCoordinates(t,this.geometryLayout_):e=new a(t,this.geometryLayout_),e}}return n.geometryFunction_=o,n.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.overlay_=new qd({source:new Py({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:(i=oo(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),n.geometryName_=t.geometryName,n.condition_=t.condition?t.condition:Om,n.freehandCondition_,t.freehand?n.freehandCondition_=Sm:n.freehandCondition_=t.freehandCondition?t.freehandCondition:Im,n.traceCondition_,n.setTrace(t.trace||!1),n.traceState_={active:!1},n.traceSource_=t.traceSource||t.source||null,n.addChangeListener(_r,n.updateState_),n}return Dm(e,t),Tm(e,[{key:"setTrace",value:function(t){var e;e=t?!0===t?Sm:t:Em,this.traceCondition_=e}},{key:"setMap",value:function(t){km(jm(e.prototype),"setMap",this).call(this,t),this.updateState_()}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleEvent",value:function(t){t.originalEvent.type===Un&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);var n=t.type===rm,r=!0;!this.freehand_&&this.lastDragTime_&&t.type===nm&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===nm&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===im?r=!1:n&&this.getPointerCount()<2?(r=t.type===rm)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===nm&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===em&&(r=!1),km(jm(e.prototype),"handleEvent",this).call(this,t)&&r}},{key:"handleDownEvent",value:function(t){var e=this;return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){e.handlePointerMove_(new $v(rm,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}},{key:"deactivateTrace_",value:function(){this.traceState_={active:!1}}},{key:"toggleTraceState_",value:function(t){if(this.traceSource_&&this.traceCondition_(t))if(this.traceState_.active)this.deactivateTrace_();else{var e=this.getMap(),n=Fa([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),r=this.traceSource_.getFeaturesInExtent(n);if(0!==r.length){var i=function(t,e){for(var n=[],r=0;r<e.length;++r)Xm(t,e[r].getGeometry(),n);return n}(t.coordinate,r);i.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:i,targetIndex:-1})}}}},{key:"addOrRemoveTracedCoordinates_",value:function(t,e){var n=t.startIndex<=t.endIndex;n===t.startIndex<=e?n&&e>t.endIndex||!n&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(n&&e<t.endIndex||!n&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}},{key:"removeTracedCoordinates_",value:function(t,e){if(t!==e){var n=0;if(t<e){var r=Math.ceil(t),i=Math.floor(e);i===e&&(i-=1),n=i-r+1}else{var o=Math.floor(t),a=Math.ceil(e);a===e&&(a+=1),n=o-a+1}n>0&&this.removeLastPoints_(n)}}},{key:"addTracedCoordinates_",value:function(t,e,n){if(e!==n){var r=[];if(e<n){var i=Math.ceil(e),o=Math.floor(n);o===n&&(o-=1);for(var a=i;a<=o;++a)r.push(Vm(t.coordinates,a))}else{var s=Math.floor(e),u=Math.ceil(n);u===n&&(u+=1);for(var l=s;l>=u;--l)r.push(Vm(t.coordinates,l))}r.length&&this.appendCoordinates(r)}}},{key:"updateTrace_",value:function(t){var e=this.traceState_;if(e.active&&!(-1===e.targetIndex&&ys(e.startPx,t.pixel)<this.snapTolerance_)){var n=function(t,e,n,r){for(var i=t[0],o=t[1],a=1/0,s=-1,u=NaN,l=0;l<e.targets.length;++l){for(var c=e.targets[l],f=c.coordinates,h=1/0,p=void 0,d=0;d<f.length-1;++d){var y=Km(i,o,f[d],f[d+1]);y.squaredDistance<h&&(h=y.squaredDistance,p=d+y.along)}h<a&&(a=h,c.ring&&e.targetIndex===l&&(c.endIndex>c.startIndex?p<c.startIndex&&(p+=f.length):c.endIndex<c.startIndex&&p>c.startIndex&&(p-=f.length)),u=p,s=l)}var g=e.targets[s],v=g.ring;if(e.targetIndex===s&&v){var m=Qm(g.coordinates,u);ys(n.getPixelFromCoordinate(m),e.startPx)>r&&(v=!1)}if(v){var _=g.coordinates,b=_.length,w=g.startIndex,x=u;if(w<x){var S=Ym(_,w,x);Ym(_,w,x-b)<S&&(u-=b)}else{var E=Ym(_,w,x);Ym(_,w,x+b)<E&&(u+=b)}}return Wm.index=s,Wm.endIndex=u,Wm}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(-1!==e.targetIndex){var r=e.targets[e.targetIndex];this.removeTracedCoordinates_(r.startIndex,r.endIndex)}var i=e.targets[n.index];this.addTracedCoordinates_(i,i.startIndex,n.endIndex)}else{var o=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(o,n.endIndex)}e.targetIndex=n.index;var a=e.targets[e.targetIndex];a.endIndex=n.endIndex;var s=Qm(a.coordinates,a.endIndex),u=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(u[0]),Math.round(u[1])]}}},{key:"handleUpEvent",value:function(t){var e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){var r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():this.freehand_||r&&"Point"!==this.mode_||(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}},{key:"handlePointerMove_",value:function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,r=e[0]-n[0],i=e[1]-n[1],o=r*r+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}},{key:"atFinish_",value:function(t,e){var n=!1;if(this.sketchFeature_){var r=!1,i=[this.finishCoordinate_],o=this.mode_;if("Point"===o)n=!0;else if("Circle"===o)n=2===this.sketchCoords_.length;else if("LineString"===o)r=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){var a=this.sketchCoords_;r=a[0].length>this.minPoints_,i=[a[0][0],a[0][a[0].length-2]],i=e?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(r)for(var s=this.getMap(),u=0,l=i.length;u<l;u++){var c=i[u],f=s.getPixelFromCoordinate(c),h=t[0]-f[0],p=t[1]-f[1],d=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(h*h+p*p)<=d){this.finishCoordinate_=c;break}}}return n}},{key:"createOrUpdateSketchPoint_",value:function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new rg(new sl(t)),this.updateSketchFeatures_())}},{key:"createOrUpdateCustomSketchLine_",value:function(t){this.sketchLine_||(this.sketchLine_=new rg);var e=t.getLinearRing(0),n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new Hy(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}},{key:"startDrawing_",value:function(t){for(var e=this.getMap().getView().getProjection(),n=Su(this.geometryLayout_);t.length<n;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new rg(new Hy(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new rg,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new qm(Bm,this.sketchFeature_))}},{key:"modifyDrawing_",value:function(t){for(var e,n,r=this.getMap(),i=this.sketchFeature_.getGeometry(),o=r.getView().getProjection(),a=Su(this.geometryLayout_);t.length<a;)t.push(0);("Point"===this.mode_?n=this.sketchCoords_:"Polygon"===this.mode_?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(r.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=t[0],n[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(t);if("Polygon"===i.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}},{key:"addToDrawing_",value:function(t){var e,n,r=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),this.geometryFunction_(n,r,i)):"Polygon"===o&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,r,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()}},{key:"removeLastPoints_",value:function(t){if(this.sketchFeature_){for(var e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r=this.mode_,i=0;i<t;++i){var o=void 0;if("LineString"===r||"Circle"===r){if((o=this.sketchCoords_).splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();var a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,e,n),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===r){(o=this.sketchCoords_[0]).splice(-2,1);var s=this.sketchLine_.getGeometry();if(o.length>=2){var u=o[o.length-2].slice();o[o.length-1]=u,this.createOrUpdateSketchPoint_(u)}s.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,n)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}}},{key:"removeLastPoint",value:function(){this.removeLastPoints_(1)}},{key:"finishDrawing",value:function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,n,r)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,n,r),e=n.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new vv([e])):"MultiLineString"===this.type_?t.setGeometry(new dm([e])):"MultiPolygon"===this.type_&&t.setGeometry(new Ov([e])),this.dispatchEvent(new qm(Gm,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}}},{key:"abortDrawing_",value:function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}},{key:"abortDrawing",value:function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new qm(zm,t))}},{key:"appendCoordinates",value:function(t){var e,n=this.mode_,r=!this.sketchFeature_;if(r&&this.startDrawing_(t[0]),"LineString"===n||"Circle"===n)e=this.sketchCoords_;else{if("Polygon"!==n)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}r&&e.shift(),e.pop();for(var i=0;i<t.length;i++)this.addToDrawing_(t[i]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)}},{key:"extend",value:function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new rg(new sl(n)),this.updateSketchFeatures_(),this.dispatchEvent(new qm(Bm,this.sketchFeature_))}},{key:"updateSketchFeatures_",value:function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}},{key:"updateState_",value:function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}])}(xm);const $m=Jm;function t_(t){return t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t_(t)}function e_(){return e_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=u_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},e_.apply(null,arguments)}function n_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i_(r.key),r)}}function r_(t,e,n){return e&&n_(t.prototype,e),n&&n_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i_(t){var e=function(t,e){if("object"!=t_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=t_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t_(e)?e:e+""}function o_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a_(t,e,n){return e=u_(e),function(t,e){if(e&&("object"==t_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s_()?Reflect.construct(e,n||[],u_(t).constructor):e.apply(t,n))}function s_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s_=function(){return!!t})()}function u_(t){return u_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u_(t)}function l_(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c_(t,e)}function c_(t,e){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c_(t,e)}var f_="select",h_=function(t){function e(t,n,r,i){var o;return o_(this,e),(o=a_(this,e,[t])).selected=n,o.deselected=r,o.mapBrowserEvent=i,o}return l_(e,t),r_(e)}(_n),p_={},d_=function(t){function e(t){var n,r,i;if(o_(this,e),(n=a_(this,e)).on,n.once,n.un,t=t||{},n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=t.condition?t.condition:Cm,n.addCondition_=t.addCondition?t.addCondition:Em,n.removeCondition_=t.removeCondition?t.removeCondition:Em,n.toggleCondition_=t.toggleCondition?t.toggleCondition:Im,n.multi_=!!t.multi&&t.multi,n.filter_=t.filter?t.filter:kn,n.hitTolerance_=t.hitTolerance?t.hitTolerance:0,n.style_=void 0!==t.style?t.style:(In((r=oo()).Polygon,r.LineString),In(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),n.features_=t.features||new Po,t.layers)if("function"==typeof t.layers)i=t.layers;else{var o=t.layers;i=function(t){return o.includes(t)}}else i=kn;return n.layerFilter_=i,n.featureLayerAssociation_={},n}return l_(e,t),r_(e,[{key:"addFeatureLayerAssociation_",value:function(t,e){this.featureLayerAssociation_[ar(t)]=e}},{key:"getFeatures",value:function(){return this.features_}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"getLayer",value:function(t){return this.featureLayerAssociation_[ar(t)]}},{key:"setHitTolerance",value:function(t){this.hitTolerance_=t}},{key:"setMap",value:function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),e_(u_(e.prototype),"setMap",this).call(this,t),t?(this.features_.addEventListener(ho,this.boundAddFeature_),this.features_.addEventListener(po,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ho,this.boundAddFeature_),this.features_.removeEventListener(po,this.boundRemoveFeature_))}},{key:"addFeature_",value:function(t){var e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){var n=this.getMap().getAllLayers().find((function(t){if(t instanceof qd&&t.getSource()&&t.getSource().hasFeature(e))return t}));n&&this.addFeatureLayerAssociation_(e,n)}}},{key:"removeFeature_",value:function(t){this.style_&&this.restorePreviousStyle_(t.element)}},{key:"getStyle",value:function(){return this.style_}},{key:"applySelectedStyle_",value:function(t){var e=ar(t);e in p_||(p_[e]=t.getStyle()),t.setStyle(this.style_)}},{key:"restorePreviousStyle_",value:function(t){for(var n=this.getMap().getInteractions().getArray(),r=n.length-1;r>=0;--r){var i=n[r];if(i!==this&&i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}var o=ar(t);t.setStyle(p_[o]),delete p_[o]}},{key:"removeFeatureLayerAssociation_",value:function(t){delete this.featureLayerAssociation_[ar(t)]}},{key:"handleEvent",value:function(t){var e=this;if(!this.condition_(t))return!0;var n=this.addCondition_(t),r=this.removeCondition_(t),i=this.toggleCondition_(t),o=!n&&!r&&!i,a=t.map,s=this.getFeatures(),u=[],l=[];if(o){Ln(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,(function(t,n){if(t instanceof rg&&e.filter_(t,n))return e.addFeatureLayerAssociation_(t,n),l.push(t),!e.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.getLength()-1;c>=0;--c){var f=s.item(c),h=l.indexOf(f);h>-1?l.splice(h,1):(s.remove(f),u.push(f))}0!==l.length&&s.extend(l)}else{a.forEachFeatureAtPixel(t.pixel,(function(t,o){if(t instanceof rg&&e.filter_(t,o))return!n&&!i||s.getArray().includes(t)?(r||i)&&s.getArray().includes(t)&&(u.push(t),e.removeFeatureLayerAssociation_(t)):(e.addFeatureLayerAssociation_(t,o),l.push(t)),!e.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=u.length-1;p>=0;--p)s.remove(u[p]);s.extend(l)}return(l.length>0||u.length>0)&&this.dispatchEvent(new h_(f_,l,u,t)),!0}}])}(Ir);const y_=d_;function g_(t){return g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g_(t)}function v_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m_(r.key),r)}}function m_(t){var e=function(t,e){if("object"!=g_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=g_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g_(e)?e:e+""}function __(t,e,n){return e=x_(e),function(t,e){if(e&&("object"==g_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,b_()?Reflect.construct(e,n||[],x_(t).constructor):e.apply(t,n))}function b_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(b_=function(){return!!t})()}function w_(){return w_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=x_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},w_.apply(null,arguments)}function x_(t){return x_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x_(t)}function S_(t,e){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S_(t,e)}var E_=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){var n=t[0].pop();return this.getPolygon()&&!this.getPolygon().intersectsCoordinate(n)||(this.lastOKCoord=[n[0],n[1]]),t[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new Pl(t),e},i=(t=t||{}).geometryFunction;if(t.geometryFunction=i?function(t,e,n){return e=r.bind(this)(t,e),i.bind(this)(t,e,n)}:r,t.type="Polygon",(n=__(this,e,[t]))._select=new y_({style:t.style}),n._select.setActive(!1),t.layers&&("function"==typeof t.layers?n.layers_=t.layers:t.layers.indexOf&&(n.layers_=function(e){return t.layers.indexOf(e)>=0})),"function"==typeof t.featureFilter)n._features=t.featureFilter;else if(t.featureFilter){var o=t.featureFilter;n._features=function(t){return o.indexOf?!!o[o.indexOf(t)]:!!o.item(o.getArray().indexOf(t))}}else n._features=function(){return!0};return n.on("drawstart",n._startDrawing.bind(n)),n.on("drawend",n._finishDrawing.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S_(t,e)}(e,t),n=e,r=[{key:"setMap",value:function(t){this.getMap()&&this.getMap().removeInteraction(this._select),t&&t.addInteraction(this._select),w_(x_(e.prototype),"setMap",this).call(this,t)}},{key:"setActive",value:function(t){this._select&&this._select.getFeatures().clear(),w_(x_(e.prototype),"setActive",this).call(this,t)}},{key:"removeLastPoint",value:function(){this._feature&&this._feature.getGeometry().getCoordinates()[0].length>2&&w_(x_(e.prototype),"removeLastPoint",this).call(this)}},{key:"getPolygon",value:function(){return this._polygon}},{key:"_startDrawing",value:function(t){var e=this.getMap();this._feature=t.feature;var n=t.feature.getGeometry().getCoordinates()[0][0];this._current=null,e.forEachFeatureAtPixel(e.getPixelFromCoordinate(n),function(t,e){if(!this._current&&this._features(t,e)){var r=t.getGeometry();if("Polygon"===r.getType()&&r.intersectsCoordinate(n))this._polygonIndex=!1,this._polygon=r,this._current=t;else if("MultiPolygon"===r.getType()&&r.intersectsCoordinate(n))for(var i,o=0;i=r.getPolygon(o);o++)if(i.intersectsCoordinate(n)){this._polygonIndex=o,this._polygon=i,this._current=t;break}}}.bind(this),{layerFilter:this.layers_}),this._select.getFeatures().clear(),this._current?this._select.getFeatures().push(this._current):(this.setActive(!1),this.setActive(!0))}},{key:"_finishDrawing",value:function(t){t.hole=t.feature,t.feature=this._select.getFeatures().item(0),this.dispatchEvent({type:"modifystart",features:[this._current]});var e=t.hole.getGeometry().getCoordinates()[0];if(e.length>3)if(!1!==this._polygonIndex){for(var n,r=t.feature.getGeometry(),i=new Ov([]),o=0;n=r.getPolygon(o);o++)o===this._polygonIndex?(n.appendLinearRing(new Qu(e)),i.appendPolygon(n)):i.appendPolygon(n);t.feature.setGeometry(i)}else this.getPolygon().appendLinearRing(new Qu(e));this.dispatchEvent({type:"modifyend",features:[this._current]}),this._feature=null,this._select.getFeatures().clear()}},{key:"_geometryFn",value:function(t,e){var n=t[0].pop();return this.getPolygon()&&!this.getPolygon().intersectsCoordinate(n)||(this.lastOKCoord=[n[0],n[1]]),t[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new Pl(t),e}}],r&&v_(n.prototype,r),i&&v_(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}($m);const C_=E_;function O_(t){return O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O_(t)}function I_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||k_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P_(t){return function(t){if(Array.isArray(t))return M_(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||k_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k_(t,e){if(t){if("string"==typeof t)return M_(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M_(t,e):void 0}}function M_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function T_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L_(r.key),r)}}function L_(t){var e=function(t,e){if("object"!=O_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=O_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O_(e)?e:e+""}function N_(t,e,n){return e=j_(e),function(t,e){if(e&&("object"==O_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A_()?Reflect.construct(e,n||[],j_(t).constructor):e.apply(t,n))}function A_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A_=function(){return!!t})()}function R_(){return R_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=j_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},R_.apply(null,arguments)}function j_(t){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j_(t)}function D_(t,e){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D_(t,e)}var F_=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var r=n=N_(this,e,[{handleDownEvent:function(t){return r.handleDownEvent_(t)},handleDragEvent:function(t){return this.handleDragEvent_(t)},handleMoveEvent:function(t){return this.handleMoveEvent_(t)},handleUpEvent:function(t){return this.handleUpEvent_(t)}}]);return n.selection_=new Po,n.handles_=new Po,n.overlayLayer_=new qd({source:new Py({features:n.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(t){return r.style[(t.get("handle")||"default")+(t.get("constraint")||"")+(t.get("option")||"")]}}),n.features_=t.features,"function"==typeof t.filter&&(n._filter=t.filter),n.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,n._handleEvent=t.condition||function(){return!0},n.addFn_=t.addCondition||function(){return!1},n.setPointRadius(t.pointRadius),n.set("translateFeature",!1!==t.translateFeature),n.set("translate",!1!==t.translate),n.set("translateBBox",!0===t.translateBBox),n.set("stretch",!1!==t.stretch),n.set("scale",!1!==t.scale),n.set("rotate",!1!==t.rotate),n.set("keepAspectRatio",t.keepAspectRatio||function(t){return t.originalEvent.shiftKey}),n.set("modifyCenter",t.modifyCenter||function(t){return t.originalEvent.metaKey||t.originalEvent.ctrlKey}),n.set("noFlip",t.noFlip||!1),n.set("selection",!1!==t.selection),n.set("hitTolerance",t.hitTolerance||0),n.set("enableRotatedTransform",t.enableRotatedTransform||!1),n.set("keepRectangle",t.keepRectangle||!1),n.set("buffer",t.buffer||0),n.on("propertychange",(function(){this.drawSketch_()})),n.setDefaultStyle(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D_(t,e)}(e,t),n=e,r=[{key:"setMap",value:function(t){var n=this.getMap();if(n){var r=n.getTargetElement();n.removeLayer(this.overlayLayer_),this.previousCursor_&&r&&(r.style.cursor=this.previousCursor_),this.previousCursor_=void 0}R_(j_(e.prototype),"setMap",this).call(this,t),this.overlayLayer_.setMap(t),null===t&&this.select(null),null!==t&&(this.isTouch=/touch/.test(t.getViewport().className),this.setDefaultStyle())}},{key:"setActive",value:function(t){this.select(null),this.overlayLayer_&&this.overlayLayer_.setVisible(t),R_(j_(e.prototype),"setActive",this).call(this,t)}},{key:"setDefaultStyle",value:function(t){var e=(t=t||{}).pointStroke||new Qi({color:[255,0,0,1],width:1}),n=t.stroke||new Qi({color:[255,0,0,1],width:1,lineDash:[4,4]}),r=t.fill||new Wi({color:[255,0,0,.01]}),i=t.pointFill||new Wi({color:[255,255,255,.8]}),o=new Ai({fill:i,stroke:e,radius:this.isTouch?12:6,displacement:this.isTouch?[24,-24]:[12,-12],points:15});o.setDisplacement||(o.getAnchor()[0]=this.isTouch?-10:-5);var a=new Ai({fill:i,stroke:e,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),s=new Ai({fill:i,stroke:e,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function u(t,e,n){return[new so({image:t,stroke:e,fill:n})]}this.style={default:u(a,n,r),translate:u(a,e,i),rotate:u(o,e,i),rotate0:u(a,e,i),scale:u(a,e,i),scale1:u(a,e,i),scale2:u(a,e,i),scale3:u(a,e,i),scalev:u(s,e,i),scaleh1:u(s,e,i),scalev2:u(s,e,i),scaleh3:u(s,e,i)},this.drawSketch_()}},{key:"setStyle",value:function(t,e){if(e){this.style[t]=e instanceof Array?e:[e];for(var n=0;n<this.style[t].length;n++){var r=this.style[t][n].getImage();r&&("rotate"==t&&(r.getAnchor()[0]=-5),this.isTouch&&r.setScale(1.8));var i=this.style[t][n].getText();i&&("rotate"==t&&i.setOffsetX(this.isTouch?14:7),this.isTouch&&i.setScale(1.8))}this.drawSketch_()}}},{key:"getFeatureAtPixel_",value:function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t,(function(t,n){var r=!1;if(!n){if(t===e.bbox_)return!!e.get("translateBBox")&&{feature:t,handle:"translate",constraint:"",option:""};if(e.handles_.forEach((function(e){e===t&&(r=!0)})),r)return{feature:t,handle:t.get("handle"),constraint:t.get("constraint"),option:t.get("option")}}if(!e.get("selection"))return e.selection_.getArray().some((function(e){return t===e}))?{feature:t}:null;if(e._filter)return e._filter(t,n)?{feature:t}:null;if(e.layers_){for(var i=0;i<e.layers_.length;i++)if(e.layers_[i]===n)return{feature:t};return null}return e.features_?(e.features_.forEach((function(e){e===t&&(r=!0)})),r?{feature:t}:null):{feature:t}}),{hitTolerance:this.get("hitTolerance")})||{}}},{key:"getGeometryRotateToZero_",value:function(t,e){var n=t.getGeometry(),r=this.getMap().getView().getRotation();if(0===r||!this.get("enableRotatedTransform"))return e?n.clone():n;var i=n.clone();return i.rotate(-1*r,this.getMap().getView().getCenter()),i}},{key:"_isRectangle",value:function(t){return!(!this.get("keepRectangle")||"Polygon"!==t.getType())&&5===t.getCoordinates()[0].length}},{key:"drawSketch_",value:function(t){var e,n,r,i=this.selection_.item(0)&&this._isRectangle(this.selection_.item(0).getGeometry());if(this.overlayLayer_.getSource().clear(),this.selection_.getLength()){var o,a=this.getMap().getView().getRotation(),s=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent();i&&(o=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4)).unshift(o[3]),s=Ba(s,this.get("buffer")),this.selection_.forEach(function(t){var e=this.getGeometryRotateToZero_(t).getExtent();Ka(s,e)}.bind(this));var u=1===this.selection_.getLength()?this._pointRadius(this.selection_.item(0)):0;if(!u||u instanceof Array||(u=[u,u]),!0===t)this.ispt_||(this.overlayLayer_.getSource().addFeature(new rg({geometry:new sl(this.center_),handle:"rotate0"})),r=kl(s),this.get("enableRotatedTransform")&&0!==a&&r.rotate(a,this.getMap().getView().getCenter()),n=this.bbox_=new rg(r),this.overlayLayer_.getSource().addFeature(n));else{if(this.ispt_){var l=this.getMap().getPixelFromCoordinate([s[0],s[1]]);if(l){var c=u&&u[0]||10,f=u&&u[1]||10;s=Fa([this.getMap().getCoordinateFromPixel([l[0]-c,l[1]-f]),this.getMap().getCoordinateFromPixel([l[0]+c,l[1]+f])])}}r=i?new Pl([o]):kl(s),this.get("enableRotatedTransform")&&0!==a&&r.rotate(a,this.getMap().getView().getCenter()),n=this.bbox_=new rg(r);var h=[],p=r.getCoordinates()[0];if(!this.ispt_||u){if(h.push(n),!this.iscircle_&&!this.ispt_&&this.get("stretch")&&this.get("scale"))for(e=0;e<p.length-1;e++)n=new rg({geometry:new sl([(p[e][0]+p[e+1][0])/2,(p[e][1]+p[e+1][1])/2]),handle:"scale",constraint:e%2?"h":"v",option:e}),h.push(n);if(this.get("scale"))for(e=0;e<p.length-1;e++)n=new rg({geometry:new sl(p[e]),handle:"scale",option:e}),h.push(n);this.get("translate")&&!this.get("translateFeature")&&(n=new rg({geometry:new sl([(p[0][0]+p[2][0])/2,(p[0][1]+p[2][1])/2]),handle:"translate"}),h.push(n))}!this.iscircle_&&this.get("rotate")&&(n=new rg({geometry:new sl(p[3]),handle:"rotate"}),h.push(n)),this.overlayLayer_.getSource().addFeatures(h)}}}},{key:"select",value:function(t,e){if(t){if(t.getGeometry&&t.getGeometry()){if(e)this.selection_.push(t);else{var n=this.selection_.getArray().indexOf(t);this.selection_.removeAt(n)}this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:t,features:this.selection_})}}else this.selection_&&(this.selection_.clear(),this.drawSketch_())}},{key:"setSelection",value:function(t){this.selection_.clear(),t.forEach(function(t){this.selection_.push(t)}.bind(this)),this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})}},{key:"watchFeatures_",value:function(){this._featureListeners&&this._featureListeners.forEach((function(t){nr(t)})),this._featureListeners=[],this.selection_.forEach(function(t){this._featureListeners.push(t.on("change",function(){this.isUpdating_||this.drawSketch_()}.bind(this)))}.bind(this))}},{key:"handleDownEvent_",value:function(t){if(this._handleEvent(t,this.selection_)){var e=this.getFeatureAtPixel_(t.pixel),n=e.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(n)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(e.handle="translate"),e.handle){this.mode_=e.handle,this.opt_=e.option,this.constraint_=e.constraint;var r=this.getMap().getView().getRotation();this.coordinate_=n.get("handle")?n.getGeometry().getCoordinates():t.coordinate,this.pixel_=this.getMap().getCoordinateFromPixel(this.coordinate_),this.geoms_=[],this.rotatedGeoms_=[];for(var i,o=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],s=0;i=this.selection_.item(s);s++)if(this.geoms_.push(i.getGeometry().clone()),o=Ka(o,i.getGeometry().getExtent()),this.get("enableRotatedTransform")&&0!==r){var u=this.getGeometryRotateToZero_(i,!0);this.rotatedGeoms_.push(u),a=Ka(a,u.getExtent())}if(this.extent_=kl(o).getCoordinates()[0],this.get("enableRotatedTransform")&&0!==r&&(this.rotatedExtent_=kl(a).getCoordinates()[0]),"rotate"===this.mode_){this.center_=this.getCenter()||rs(o);var l=t.map.getTargetElement();l.style.cursor=this.Cursors.rotate0,this.previousCursor_=l.style.cursor}else this.center_=rs(o);return this.angle_=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!0}if(this.get("selection")){if(n){this.addFn_(t)||this.selection_.clear();var c=this.selection_.getArray().indexOf(n);c<0?this.selection_.push(n):this.selection_.removeAt(c)}else this.selection_.clear();return this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:n,features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!1}}}},{key:"getCenter",value:function(){return this.get("center")}},{key:"setCenter",value:function(t){return this.set("center",t)}},{key:"handleDragEvent_",value:function(t){if(this._handleEvent(t,this.features_)){var e,n,r,i,o=this.getMap().getView().getRotation(),a=[this.coordinate_[0],this.coordinate_[1]],s=[t.coordinate[0],t.coordinate[1]];switch(this.isUpdating_=!0,this.mode_){case"rotate":var u=Math.atan2(this.center_[1]-s[1],this.center_[0]-s[0]);if(!this.ispt)for(e=0;r=this.selection_.item(e);e++)(i=this.geoms_[e].clone()).rotate(u-this.angle_,this.center_),"Circle"==i.getType()&&i.setCenterAndRadius(i.getCenter(),i.getRadius()),r.setGeometry(i);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:u-this.angle_,pixel:t.pixel,coordinate:t.coordinate});break;case"translate":var l=s[0]-a[0],c=s[1]-a[1];for(e=0;r=this.selection_.item(e);e++)r.getGeometry().translate(l,c);this.handles_.forEach((function(t){t.getGeometry().translate(l,c)})),this.coordinate_=t.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[l,c],pixel:t.pixel,coordinate:t.coordinate});break;case"scale":var f=this.center_;if(this.get("modifyCenter")(t)){var h=this.extent_;this.get("enableRotatedTransform")&&0!==o&&(h=this.rotatedExtent_),f=h[(Number(this.opt_)+2)%4]}var p=1==this.geoms_.length&&this._isRectangle(this.geoms_[0]),d=this.constraint_,y=this.opt_,g=this.coordinate_,v=t.coordinate;if(this.get("enableRotatedTransform")&&0!==o){var m=new sl(this.coordinate_);m.rotate(-1*o,f),g=m.getCoordinates();var _=new sl(t.coordinate);_.rotate(-1*o,f),v=_.getCoordinates()}var b=(v[0]-f[0])/(g[0]-f[0]),w=(v[1]-f[1])/(g[1]-f[1]),x=[v[0]-g[0],v[1]-g[1]];if(this.get("enableRotatedTransform")&&0!==o){var S=new sl(f);S.rotate(-1*o,this.getMap().getView().getCenter()),f=S.getCoordinates()}for(this.get("noFlip")&&(b<0&&(b=-b),w<0&&(w=-w)),this.constraint_?"h"==this.constraint_?b=1:w=1:this.get("keepAspectRatio")(t)&&(b=w=Math.min(b,w)),e=0;r=this.selection_.item(e);e++)(i=0!==o&&this.get("enableRotatedTransform")?this.rotatedGeoms_[e].clone():this.geoms_[e].clone()).applyTransform(function(t,e,r){if(r<2)return e;if(p){var o=[[6],[0,8],[2],[4]],a=[t[0],t[1]],s=[t[2],t[3]],u=[t[4],t[5]],l=[t[6],t[7]],c=[t[8],t[9]];if(d){var h=y%2==0?this._countVector(a,s):this._countVector(l,a),g=this._projectVectorOnVector(x,h),m=y+1<o.length?y+1:0,_=[].concat(P_(o[y]),P_(o[m]));for(n=0;n<t.length;n+=r)e[n]=_.includes(n)?t[n]+g[0]:t[n],e[n+1]=_.includes(n)?t[n+1]+g[1]:t[n+1]}else{var S,E;switch(y){case 0:x=this._countVector(l,v),S=this._projectVectorOnVector(x,this._countVector(u,l)),E=this._projectVectorOnVector(x,this._countVector(a,l));var C=I_(this._movePoint(a,S),2);e[0]=C[0],e[1]=C[1];var O=I_(this._movePoint(u,E),2);e[4]=O[0],e[5]=O[1];var I=I_(this._movePoint(l,x),2);e[6]=I[0],e[7]=I[1];var P=I_(this._movePoint(c,S),2);e[8]=P[0],e[9]=P[1];break;case 1:x=this._countVector(a,v),S=this._projectVectorOnVector(x,this._countVector(l,a)),E=this._projectVectorOnVector(x,this._countVector(s,a));var k=I_(this._movePoint(a,x),2);e[0]=k[0],e[1]=k[1];var M=I_(this._movePoint(s,S),2);e[2]=M[0],e[3]=M[1];var T=I_(this._movePoint(l,E),2);e[6]=T[0],e[7]=T[1];var L=I_(this._movePoint(c,x),2);e[8]=L[0],e[9]=L[1];break;case 2:x=this._countVector(s,v),S=this._projectVectorOnVector(x,this._countVector(a,s)),E=this._projectVectorOnVector(x,this._countVector(u,s));var N=I_(this._movePoint(a,E),2);e[0]=N[0],e[1]=N[1];var A=I_(this._movePoint(s,x),2);e[2]=A[0],e[3]=A[1];var R=I_(this._movePoint(u,S),2);e[4]=R[0],e[5]=R[1];var j=I_(this._movePoint(c,E),2);e[8]=j[0],e[9]=j[1];break;case 3:x=this._countVector(u,v),S=this._projectVectorOnVector(x,this._countVector(s,u)),E=this._projectVectorOnVector(x,this._countVector(l,u));var D=I_(this._movePoint(s,E),2);e[2]=D[0],e[3]=D[1];var F=I_(this._movePoint(u,x),2);e[4]=F[0],e[5]=F[1];var B=I_(this._movePoint(l,S),2);e[6]=B[0],e[7]=B[1]}}}else for(n=0;n<t.length;n+=r)1!=b&&(e[n]=f[0]+(t[n]-f[0])*b),1!=w&&(e[n+1]=f[1]+(t[n+1]-f[1])*w);return"Circle"==i.getType()&&i.setCenterAndRadius(i.getCenter(),i.getRadius()),e}.bind(this)),this.get("enableRotatedTransform")&&0!==o&&i.rotate(o,this.getMap().getView().getCenter()),r.setGeometry(i);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[b,w],pixel:t.pixel,coordinate:t.coordinate})}this.isUpdating_=!1}}},{key:"handleMoveEvent_",value:function(t){if(this._handleEvent(t,this.features_)&&!this.mode_){var e=this.getFeatureAtPixel_(t.pixel),n=t.map.getTargetElement();if(e.feature){var r=e.handle?this.Cursors[(e.handle||"default")+(e.constraint||"")+(e.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=n.style.cursor),n.style.cursor=r}else void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_),this.previousCursor_=void 0}}},{key:"handleUpEvent_",value:function(t){return"rotate"===this.mode_&&(t.map.getTargetElement().style.cursor=this.Cursors.default,this.previousCursor_=void 0),this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1}},{key:"setPointRadius",value:function(t){this._pointRadius="function"==typeof t?t:function(){return t}}},{key:"getFeatures",value:function(){return this.selection_}},{key:"_projectVectorOnVector",value:function(t,e){var n=(t[0]*e[0]+t[1]*e[1])/(e[0]*e[0]+e[1]*e[1]);return[e[0]*n,e[1]*n]}},{key:"_countVector",value:function(t,e){return[e[0]-t[0],e[1]-t[1]]}},{key:"_movePoint",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}}],r&&T_(n.prototype,r),i&&T_(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(xm);F_.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"};const B_=F_;function G_(t){return G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G_(t)}function z_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q_(r.key),r)}}function q_(t){var e=function(t,e){if("object"!=G_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=G_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G_(e)?e:e+""}function U_(t,e,n){return e=X_(e),function(t,e){if(e&&("object"==G_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,V_()?Reflect.construct(e,n||[],X_(t).constructor):e.apply(t,n))}function V_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V_=function(){return!!t})()}function Y_(){return Y_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=X_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Y_.apply(null,arguments)}function X_(t){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X_(t)}function W_(t,e){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W_(t,e)}var H_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=U_(this,e)).facadeMap_=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W_(t,e)}(e,M.impl.Control),n=e,r=[{key:"addTo",value:function(t,n){Y_(X_(e.prototype),"addTo",this).call(this,t,n),this.facadeMap_=t,this.vectorSource_=void 0}},{key:"activateSelection",value:function(t){var e=this,n=this.facadeMap_.getMapImpl(),r=this.facadeControl.getLayer().getImpl().getOL3Layer();if(r){this.select=new ol.interaction.Select({wrapX:!1,layers:[r]}),this.select.on("select",(function(t){t.target.getFeatures().getArray().length>0&&e.facadeControl.onSelect(t)})),n.addInteraction(this.select);var i=t.snapToPointer,o=void 0===i||i,a=t.pixelTolerance,s=void 0===a?30:a;this.edit=new ol.interaction.Modify({features:this.select.getFeatures(),snapToPointer:o,pixelTolerance:s}),this.edit.on("modifyend",(function(t){e.facadeControl.onModify()})),n.addInteraction(this.edit)}}},{key:"addHoleDrawInteraction",value:function(){var t=this.facadeMap_.getMapImpl();this.drawHole=new C_({layers:[this.facadeControl.getLayer().getImpl().getOL3Layer()]}),t.addInteraction(this.drawHole)}},{key:"addRotateInteraction",value:function(t){var e=this,n=this.facadeMap_.getMapImpl(),r=new ol.Collection(t);this.rotate=new B_({enableRotatedTransform:!1,hitTolerance:2,translateFeature:!1,scale:!1,rotate:!0,keepAspectRatio:void 0,keepRectangle:!1,translate:!1,stretch:!1,selection:!1}),this.rotate.on("rotateend",(function(t){e.facadeControl.onModify()})),n.addInteraction(this.rotate),this.rotate.setSelection(r)}},{key:"refreshRotateSelection",value:function(t){var e=new ol.Collection(t);this.rotate.setSelection(e)}},{key:"addMoveInteraction",value:function(t){var e=this,n=this.facadeMap_.getMapImpl(),r=new ol.Collection(t);this.move=new B_({enableRotatedTransform:!0,hitTolerance:2,translateFeature:!0,scale:!1,rotate:!1,keepAspectRatio:void 0,keepRectangle:!1,translate:!0,stretch:!1,selection:!1}),this.move.on("translateend",(function(t){e.facadeControl.onModify()})),n.addInteraction(this.move),this.move.setSelection(r)}},{key:"refreshMoveSelection",value:function(t){var e=new ol.Collection(t);this.move.setSelection(e)}},{key:"addScaleInteraction",value:function(t){var e=this,n=this.facadeMap_.getMapImpl(),r=new ol.Collection(t);this.scale=new B_({enableRotatedTransform:!1,hitTolerance:2,translateFeature:!1,scale:!0,rotate:!1,keepAspectRatio:void 0,keepRectangle:!1,translate:!1,stretch:!1,selection:!1}),this.scale.on("scaleend",(function(t){e.facadeControl.onModify()})),n.addInteraction(this.scale),this.scale.setSelection(r)}},{key:"refreshScaleSelection",value:function(t){var e=new ol.Collection(t);this.scale.setSelection(e)}},{key:"removeDrawHoleInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.drawHole)}},{key:"removeRotateInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.rotate)}},{key:"removeMoveInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.move)}},{key:"removeScaleInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.scale)}},{key:"removeEditInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.edit)}},{key:"removeSelectInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.select)}},{key:"getFeatureExtent",value:function(t){return t.getImpl().getOLFeature().getGeometry().getExtent()}},{key:"newPolygonFeature",value:function(t){return new ol.Feature({geometry:ol.geom.Polygon.fromExtent(t)})}},{key:"getMapeaFeatureClone",value:function(t){var e=t.getImpl().olFeature_.clone();return M.impl.Feature.olFeature2Facade(e)}}],r&&z_(n.prototype,r),i&&z_(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),Z_=n(8492),K_=n.n(Z_),Q_=n(672),J_=n.n(Q_),$_=n(897),tb=n.n($_);function eb(t){return eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eb(t)}function nb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rb(r.key),r)}}function rb(t){var e=function(t,e){if("object"!=eb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=eb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eb(e)?e:e+""}function ib(t,e,n){return e=sb(e),function(t,e){if(e&&("object"==eb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ob()?Reflect.construct(e,n||[],sb(t).constructor):e.apply(t,n))}function ob(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ob=function(){return!!t})()}function ab(){return ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=sb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ab.apply(null,arguments)}function sb(t){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sb(t)}function ub(t,e){return ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ub(t,e)}var lb=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(H_)&&M.exception(h("exception"));var i=new H_(t);return r=ib(this,e,[i,"Edition"]),i.facadeControl=r,r.map_=t,r.managementControl_=n,r.template=null,r.layer_=null,r.isEditActive=!1,r.isHoleActive=!1,r.isRotateActive=!1,r.isScaleActive=!1,r.isMoveActive=!1,r.isEditAttributeActive=!1,r.selectionLayer=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ub(t,e)}(e,M.Control),n=e,r=[{key:"active",value:function(t){this.template=M.template.compileSync(K_(),{vars:{translations:{editgeometria:h("editgeometria"),clean:h("clean"),hole:h("hole"),rotation:h("rotation"),scale:h("scale"),move:h("move"),delete:h("delete"),attributes:h("attributes"),newcolumn:h("newcolumn"),title_attribute_table:h("title_attribute_table"),title_clear_geometries:h("title_clear_geometries"),clear_geometries_msg:h("clear_geometries_msg"),confirm:h("confirm"),cancel:h("cancel")}}}),this.initializeLayers(),t.querySelector("#m-vectorsmanagement-controls").appendChild(this.template),this.addEvents(),this.managementControl_.accessibilityTab(this.template)}},{key:"initializeLayers",value:function(){var t=this.map_.getLayers().filter((function(t){return"selectLayer"===t.name}));t.length>0?this.selectionLayer=t[0]:(this.selectionLayer=new M.layer.Vector({extract:!1,name:"selectLayer",source:this.layer_.getImpl().getOL3Layer().getSource()},{displayInLayerSwitcher:!1}),this.layer_.getImpl().extract=!1,this.map_.addLayers(this.selectionLayer),this.selectionLayer.setZIndex(this.selectionLayer.getZIndex()+8))}},{key:"addEvents",value:function(){var t=this;this.template.querySelector("#edit").addEventListener("click",(function(){return t.editionBtnClick("edit")})),this.template.querySelector("#holedrawing").addEventListener("click",(function(){return t.editionBtnClick("holedrawing")})),this.template.querySelector("#rotatedrawing").addEventListener("click",(function(){return t.editionBtnClick("rotatedrawing")})),this.template.querySelector("#scaledrawing").addEventListener("click",(function(){return t.editionBtnClick("scaledrawing")})),this.template.querySelector("#movedrawing").addEventListener("click",(function(){return t.editionBtnClick("movedrawing")})),this.template.querySelector("#editattribute").addEventListener("click",(function(){return t.editionBtnClick("editattribute")})),this.template.querySelector("#cleanAll").addEventListener("click",(function(){return t.showModalCleanGeometries()})),this.template.querySelector("#m-vectorsmanagement-deletegeom-btn").addEventListener("click",(function(){return t.deleteSingleFeature()}))}},{key:"addModalEvents",value:function(){var t=this;this.template.querySelector("#edition-attributes-container").addEventListener("mousedown",(function(e){t.isDragging=!0,t.offsetX=e.offsetX,t.offsetY=e.offsetY})),this.mouseupFunctionEvent=this.mouseupFunction.bind(this),this.mousemoveFunctionEvent=this.mousemoveFunction.bind(this),document.addEventListener("mouseup",this.mouseupFunctionEvent),document.addEventListener("mousemove",this.mousemoveFunctionEvent)}},{key:"removeModalEvents",value:function(){document.removeEventListener("mouseup",this.mouseupFunctionEvent),document.removeEventListener("mousemove",this.mousemoveFunctionEvent)}},{key:"mouseupFunction",value:function(){this.isDragging=!1}},{key:"mousemoveFunction",value:function(t){if(this.isDragging){var e=this.template.querySelector("#edition-attributes-container");e.style.top="".concat(t.clientY-this.offsetY+e.clientHeight/2,"px"),e.style.left="".concat(t.clientX-this.offsetX+e.clientWidth/2,"px")}}},{key:"editionBtnClick",value:function(t){switch(t){case"edit":this.activationManager("isEditActive",t);break;case"holedrawing":this.activationManager("isHoleActive",t);break;case"rotatedrawing":this.activationManager("isRotateActive",t);break;case"scaledrawing":this.activationManager("isScaleActive",t);break;case"movedrawing":this.activationManager("isMoveActive",t);break;case"editattribute":this.activationManager("isEditAttributeActive",t)}this.isEditActive?(this.managementControl_.hideSelectionLayer(),this.activateEdition()):this.isHoleActive?this.activateHole():this.isRotateActive?this.activateRotate():this.isScaleActive?this.activateScale():this.isMoveActive?this.activateMove():this.isEditAttributeActive&&this.activateEditAttributes()}},{key:"openModalEditAttribute",value:function(){var t=this,e=M.template.compileSync(tb(),{vars:{translations:{newcolumn:h("newcolumn")}}});this.managementControl_.accessibilityTab(e),M.dialog.info(e.innerHTML,h("title_attribute_table")),M.utils.draggabillyElement(".m-dialog .m-modal .m-content",".m-dialog .m-modal .m-content .m-title"),rn(),document.querySelector("#add-attribute-btn").onclick=function(){return t.newAttributeColumn()},document.querySelector(".m-dialog.info .m-modal .m-button button").onclick=function(){return t.activationManager("isEditAttributeActive","editattribute")}}},{key:"activationManager",value:function(t,e){this[t]?(this.deactivateEdition(),this[t]=!1,document.getElementById(e).classList.remove("activated")):(this.deactivateEdition(),this[t]=!0,document.getElementById(e).classList.add("activated"))}},{key:"deactivateEdition",value:function(){this.isEditActive?(this.isEditActive=!1,this.deactivateSelection(),this.managementControl_.showSelectionLayer()):this.isHoleActive?(this.isHoleActive=!1,this.getImpl().removeDrawHoleInteraction()):this.isRotateActive?(this.isRotateActive=!1,this.getImpl().removeRotateInteraction()):this.isScaleActive?(this.isScaleActive=!1,this.getImpl().removeScaleInteraction()):this.isMoveActive?(this.isMoveActive=!1,this.getImpl().removeMoveInteraction()):this.isEditAttributeActive&&(this.isEditAttributeActive=!1,this.removeModalEvents());var t=this.getControlActive(this.template);t&&t.classList.remove("activated")}},{key:"deactivateSelection",value:function(){this.feature=void 0,this.template.querySelector("#edition-container").classList.add("closed"),this.getImpl().removeEditInteraction(),this.getImpl().removeSelectInteraction(),this.managementControl_.removeSelectedFeatures(),this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures())}},{key:"showModalCleanGeometries",value:function(){var t=this,e=M.template.compileSync(J_(),{vars:{translations:{title_clear_geometries:h("title_clear_geometries"),clear_geometries_msg:h("clear_geometries_msg"),confirm:h("confirm"),cancel:h("cancel")}}});this.managementControl_.accessibilityTab(e),M.dialog.info(e.innerHTML,h("title_attribute_table")),document.querySelector("#confirm-clear-btn").onclick=function(){return t.closeModalCleanGeometries(!0)},document.querySelector("#cancel-clear-btn").onclick=function(){return t.closeModalM()},this.changeStyleModalClean()}},{key:"changeStyleModalClean",value:function(){rn(),document.querySelector(".m-modal .m-content .m-message").style.borderBottom="none",document.querySelector(".m-modal .m-content .m-button").style.display="none"}},{key:"closeModalM",value:function(){document.querySelector(".m-modal .m-content .m-button button").click()}},{key:"closeModalCleanGeometries",value:function(t){t&&this.cleanGeometries(),this.closeModalM()}},{key:"cleanGeometries",value:function(){this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.layer_.removeFeatures(this.layer_.getFeatures()),this.managementControl_.analysisControl.removeBufferFeatures()}},{key:"deleteSingleFeature",value:function(){this.feature&&(this.layer_.removeFeatures(this.feature),this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.template.querySelector("#edition-container").classList.add("closed"))}},{key:"getControlActive",value:function(t){return 0!==t.querySelectorAll(".m-vectorsmanagement-edition-container>#editionBtns .activated").length&&t.querySelectorAll(".m-vectorsmanagement-edition-container>#editionBtns .activated")[0]}},{key:"activateEdition",value:function(){var t=this.managementControl_.edition_ instanceof Object?this.managementControl_.edition_:{snapToPointer:!0,pixelTolerance:30};this.getImpl().activateSelection(t)}},{key:"activateHole",value:function(){this.getImpl().addHoleDrawInteraction()}},{key:"activateRotate",value:function(){var t=this.managementControl_.getSelectedOLFeatures();this.getImpl().addRotateInteraction(t)}},{key:"activateScale",value:function(){var t=this.managementControl_.getSelectedOLFeatures();this.getImpl().addScaleInteraction(t)}},{key:"activateMove",value:function(){var t=this.managementControl_.getSelectedOLFeatures();this.getImpl().addMoveInteraction(t)}},{key:"activateEditAttributes",value:function(){this.showFeatureAttributes()}},{key:"onSelect",value:function(t){var e=this.layer_.getFeatures(),n=t.target.getFeatures().getArray()[0];this.feature=e.filter((function(t){return t.getImpl().getOLFeature()===n}))[0]||void 0,this.geometry=this.feature.getGeometry().type,this.emphasizeSelectedFeature(),this.template.querySelector("#edition-container").classList.remove("closed")}},{key:"onModify",value:function(){this.refreshEmphasizedFeatures(),this.layer_.redraw()}},{key:"emphasizeSelectedFeature",value:function(){this.emphasis=null,this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.managementControl_.removeSelectedFeatures(),this.emphasizeFeature(this.feature,!0)}},{key:"refreshEmphasizedFeatures",value:function(){var t=this;this.emphasis=null,this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.managementControl_.getSelectedFeatures().forEach((function(e){return t.emphasizeFeature(e,!1)}))}},{key:"refreshSelection",value:function(){if(this.isEditAttributeActive){var t=this.managementControl_.getSelectedFeatures();this.refreshAttributeTable(t)}else if(this.isMoveActive){var e=this.managementControl_.getSelectedOLFeatures();this.getImpl().refreshMoveSelection(e)}else if(this.isScaleActive){var n=this.managementControl_.getSelectedOLFeatures();this.getImpl().refreshScaleSelection(n)}else if(this.isRotateActive){var r=this.managementControl_.getSelectedOLFeatures();this.getImpl().refreshRotateSelection(r)}}},{key:"emphasizeFeature",value:function(t,e){if(t){var n,r=t.getGeometry().type;if("Point"===r||"MultiPoint"===r)(n=this.getImpl().getMapeaFeatureClone(t)).setStyle(new M.style.Point({radius:20,stroke:{color:"#FF0000",width:2}}));else{var i=this.getImpl().getFeatureExtent(t);(n=M.impl.Feature.olFeature2Facade(this.getImpl().newPolygonFeature(i))).setStyle(new M.style.Line({stroke:{color:"#FF0000",width:2}}))}e&&this.managementControl_.addFeatureToSelection(t),this.selectionLayer.addFeatures([n])}}},{key:"showFeatureAttributes",value:function(){var t=this.managementControl_.getSelectedFeatures();if(0===t.length&&(t=this.layer_.getFeatures()),t.length>0){this.openModalEditAttribute();var e=t[0].getAttributes();if(e){var n=Object.keys(e);this.createAttributeTable(n,t)}else this.createEmptyTable()}else M.dialog.info(h("exception.emptylayer"))}},{key:"createEmptyTable",value:function(){var t=document.createElement("table");return t.id="attribute-table",document.querySelector("#m-vectorsmanagement-attribute-table-container").appendChild(t),t}},{key:"createAttributeTable",value:function(t,e){var n=this,r=this.createEmptyTable(),i=document.createElement("tr");r.appendChild(i),e.forEach((function(t){return r.appendChild(document.createElement("tr"))})),t.forEach((function(t){var o=n.createAttributeHeader(t);i.appendChild(o),n.fillData(r,e,t,!1)}))}},{key:"newAttributeColumn",value:function(){var t=this,e=document.querySelector(".m-dialog.info");e.style.display="none",M.dialog.info('<div id="chooseAttribute" class="m-vectorsmanagement-editAttribute">\n        <input autofocus type="text" id="attribute-name" style="width: 10rem;">\n      </div>',h("title_popup_attribute")),rn();var n="#71a7d3";document.querySelector(".m-dialog > div.m-modal > div.m-content").style.minWidth="auto",document.querySelector(".m-modal .m-title").style.backgroundColor=n;var r=document.querySelectorAll(".m-button button")[1],i=document.querySelector("div.m-modal input#attribute-name");r.style.backgroundColor=n,r.addEventListener("click",(function(){e.style.display="block",t.createAttributeColumn(i.value)}))}},{key:"createAttributeColumn",value:function(t){if(t){var e,n=document.querySelector("#attribute-table");n.firstChild?e=n.firstChild:(e=document.createElement("tr"),n.appendChild(e));var r=this.createAttributeHeader(t);e.appendChild(r);var i=this.managementControl_.getSelectedFeatures();0===i.length&&(i=this.layer_.getFeatures()),this.fillData(n,i,t,!0)}}},{key:"createAttributeHeader",value:function(t){var e=this,n=document.createElement("th"),r=document.createElement("span");r.textContent=t;var i=document.createElement("button");i.name=t,i.classList.add("vectorsmanagement-icon-papelera"),i.addEventListener("click",(function(t){return e.deleteAttribute(t)}));var o=document.createElement("button");return o.name=t,o.classList.add("vectorsmanagement-icon-editar2"),o.addEventListener("click",(function(t){return e.renameAttribute(t)})),n.appendChild(r),n.appendChild(i),n.appendChild(o),n}},{key:"fillData",value:function(t,e,n,r){if(r)for(var i=this.layer_.getFeatures(),o=0;o<i.length;o+=1)i[o].setAttribute(n,"");for(var a=0;a<e.length;a+=1){var s=document.createElement("td"),u=document.createElement("input");u.type="text",u.classList.add(e[a].getId()),u.name=n,u.value=e[a].getAttribute(n),this.addInputEvents(u),s.appendChild(u),t.children[a+1].appendChild(s)}}},{key:"addInputEvents",value:function(t){var e=this;t.addEventListener("focus",(function(){var n=t.classList[0];e.feature=e.getLayer().getFeatureById(n),e.geometry=e.feature.getGeometry().type;var r=e.feature.getImpl().getOLFeature().getGeometry().getExtent();e.map_.setBbox(r),e.map_.getZoom()>17&&e.map_.setZoom(17)})),t.addEventListener("keyup",(function(){var n=t.name;e.feature.setAttribute(n,t.value)}))}},{key:"focusFeature",value:function(t){var e=t.target.classList[0];this.feature=this.layer_.getFeatureById(e),this.emphasizeSelectedFeature()}},{key:"updateFeatureAttribute",value:function(t){this.feature.setAttribute(t.target.name,t.target.value)}},{key:"deleteAttribute",value:function(t){var e=t.target.name,n=this.layer_.getFeatures();n.forEach((function(t){t.getImpl().getOLFeature().unset(e)}));var r=document.querySelector("#attribute-table");r.parentNode.removeChild(r);var i=this.managementControl_.getSelectedFeatures();this.createAttributeTable(Object.keys(n[0].getAttributes()),i.length>0?i:n)}},{key:"renameAttribute",value:function(t){var e=this,n=document.querySelector(".m-dialog.info");n.style.display="none",M.dialog.info('<div id="chooseAttribute" class="m-vectorsmanagement-editAttribute">\n        <input type="text" id="attribute-name" style="width: 10rem;">\n      </div>',h("title_popup_editAttribute")),rn();var r="#71a7d3";document.querySelector(".m-dialog > div.m-modal > div.m-content").style.minWidth="auto",document.querySelector(".m-modal .m-title").style.backgroundColor=r;var i=document.querySelectorAll(".m-button button")[1],o=document.querySelector("div.m-modal input#attribute-name");i.style.backgroundColor=r,i.addEventListener("click",(function(){n.style.display="block",e.updateFeaturesAttributeName(t.target.name,o.value)}))}},{key:"changeStyleDialog",value:function(){document.querySelectorAll("div.m-mapea-container div.m-dialog div.m-title").forEach((function(t){t.style.backgroundColor="#71a7d3"})),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3",document.querySelector("div.m-dialog.info div.m-button > button").style.backgroundColor="#71a7d3"}},{key:"updateFeaturesAttributeName",value:function(t,e){var n=this,r=this.layer_.getFeatures();r.forEach((function(r){return n.updateAttributes(r,t,e)}));var i=this.managementControl_.getSelectedFeatures();this.refreshAttributeTable(i.length>0?i:r)}},{key:"refreshAttributeTable",value:function(t){var e=document.querySelector("#attribute-table");e.parentNode.removeChild(e),this.createAttributeTable(Object.keys(t[0].getAttributes()),t)}},{key:"updateAttributes",value:function(t,e,n){var r=t.getAttributes(),i={};Object.keys(r).forEach((function(o){o===e?i[n]=r[o]:i[o]=r[o],t.getImpl().getOLFeature().unset(o)})),t.setAttributes(i)}},{key:"setLayer",value:function(t){this.layer_=t}},{key:"getLayer",value:function(){return this.layer_}},{key:"activate",value:function(){ab(sb(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.template.remove(),this.deactivateEdition(),this.removeModalEvents()}},{key:"equals",value:function(t){return t instanceof e}}],r&&nb(n.prototype,r),i&&nb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function cb(t){return cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cb(t)}function fb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hb(r.key),r)}}function hb(t){var e=function(t,e){if("object"!=cb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cb(e)?e:e+""}function pb(t,e,n){return e=yb(e),function(t,e){if(e&&("object"==cb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,db()?Reflect.construct(e,n||[],yb(t).constructor):e.apply(t,n))}function db(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(db=function(){return!!t})()}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yb(t)}function gb(t,e){return gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gb(t,e)}var vb=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pb(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gb(t,e)}(e,M.impl.Control),n=e,(r=[{key:"addTo",value:function(t,e){this.map=t,this.olMap=t.getMapImpl()}}])&&fb(n.prototype,r),i&&fb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),mb=n(4881),_b=n.n(mb);function bb(t){return bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bb(t)}function wb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xb(r.key),r)}}function xb(t){var e=function(t,e){if("object"!=bb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bb(e)?e:e+""}function Sb(t,e,n){return e=Ob(e),function(t,e){if(e&&("object"==bb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Eb()?Reflect.construct(e,n||[],Ob(t).constructor):e.apply(t,n))}function Eb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Eb=function(){return!!t})()}function Cb(){return Cb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ob(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Cb.apply(null,arguments)}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ob(t)}function Ib(t,e){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ib(t,e)}var Pb=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(vb)&&M.exception(h("exception")),(r=Sb(this,e,[new vb,"Help"])).map_=t,r.template=null,r.closeEventActive_=!1,r.managementControl_=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ib(t,e)}(e,M.Control),n=e,(r=[{key:"active",value:function(t){this.template=M.template.compileSync(_b(),{vars:{translations:{addlayer_title:h("help_template").addlayer_title,addlayer_content:h("help_template").addlayer_content,selection_title:h("help_template").selection_title,selection_content:h("help_template").selection_content,creation_title:h("help_template").creation_title,creation_content:h("help_template").creation_content,edition_title:h("help_template").edition_title,edition_content:h("help_template").edition_content,edition_content_1:h("help_template").edition_content_1,edition_content_1_1:h("help_template").edition_content_1_1,edition_content_2:h("help_template").edition_content_2,edition_content_2_1:h("help_template").edition_content_2_1,edition_content_3:h("help_template").edition_content_3,edition_content_3_1:h("help_template").edition_content_3_1,edition_content_4:h("help_template").edition_content_4,edition_content_4_1:h("help_template").edition_content_4_1,edition_content_5:h("help_template").edition_content_5,edition_content_5_1:h("help_template").edition_content_5_1,edition_content_6:h("help_template").edition_content_6,edition_content_6_1:h("help_template").edition_content_6_1,edition_content_7:h("help_template").edition_content_7,edition_content_7_1:h("help_template").edition_content_7_1,style_title:h("help_template").style_title,style_content:h("help_template").style_content,analysis_title:h("help_template").analysis_title,analysis_content:h("help_template").analysis_content,analysis_content_1:h("help_template").analysis_content_1,analysis_content_1_1:h("help_template").analysis_content_1_1,analysis_content_2:h("help_template").analysis_content_2,analysis_content_2_1:h("help_template").analysis_content_2_1,download_title:h("help_template").download_title,download_content:h("help_template").download_content,creation_content_1:h("help_template").creation_content_1,creation_content_1_1:h("help_template").creation_content_1_1,creation_content_2:h("help_template").creation_content_2,creation_content_2_1:h("help_template").creation_content_2_1,creation_content_3:h("help_template").creation_content_3,creation_content_3_1:h("help_template").creation_content_3_1,creation_content_4:h("help_template").creation_content_4,creation_content_4_1:h("help_template").creation_content_4_1,creation_content_5:h("help_template").creation_content_5,creation_content_5_1:h("help_template").creation_content_5_1,creation_content_6:h("help_template").creation_content_6,creation_content_6_1:h("help_template").creation_content_6_1,analysis_content_3:h("help_template").analysis_content_3,analysis_content_3_1:h("help_template").analysis_content_3_1,analysis_content_4:h("help_template").analysis_content_4,analysis_content_4_1:h("help_template").analysis_content_4_1}}}),this.closeEventActive_||(document.addEventListener("keydown",this.closeEvent.bind(this)),this.closeEventActive_=!0),M.dialog.info(M.utils.htmlToString(this.template),h("help_template").title),document.querySelector(".m-dialog.info .m-content").style.overflowX="auto",document.querySelector(".m-dialog.info .m-content").style.maxHeight="70vh",document.querySelector(".m-button button").addEventListener("click",this.deactivate.bind(this)),this.managementControl_.accessibilityTab(this.template)}},{key:"destroy",value:function(){}},{key:"activate",value:function(){Cb(Ob(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.template.remove();var t=document.querySelector("#m-vectorsmanagement-help");t&&t.classList.remove("activated")}},{key:"closeEvent",value:function(t){"Escape"===t.key&&null!==document.querySelector(".m-control.m-container.m-modal")&&this.deactivate()}},{key:"equals",value:function(t){return t instanceof e}}])&&wb(n.prototype,r),i&&wb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function kb(t){return kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kb(t)}function Mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tb(r.key),r)}}function Tb(t){var e=function(t,e){if("object"!=kb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kb(e)?e:e+""}function Lb(t,e,n){return e=Rb(e),function(t,e){if(e&&("object"==kb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nb()?Reflect.construct(e,n||[],Rb(t).constructor):e.apply(t,n))}function Nb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nb=function(){return!!t})()}function Ab(){return Ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Rb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Ab.apply(null,arguments)}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rb(t)}function jb(t,e){return jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jb(t,e)}var Db=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lb(this,e)).facadeMap_=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jb(t,e)}(e,M.impl.Control),n=e,r=[{key:"addTo",value:function(t,n){Ab(Rb(e.prototype),"addTo",this).call(this,t,n),this.facadeMap_=t,this.vectorSource_=void 0}},{key:"activateSelection",value:function(){var t=this,e=this.facadeMap_.getMapImpl(),n=this.facadeControl.getLayer().getImpl().getOL3Layer();null!==document.querySelector(".m-geometrydraw>#downloadFormat")&&document.querySelector(".m-geometrydraw").removeChild(this.facadeControl.downloadingTemplate),n&&(this.select=new ol.interaction.Select({wrapX:!1,layers:[n],style:null,toggleCondition:ol.events.condition.platformModifierKeyOnly}),this.select.on("select",(function(e){e.target.getFeatures().getArray().length>0&&t.facadeControl.onSelect(e)})),e.addInteraction(this.select))}},{key:"removeSelectInteraction",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.select)}},{key:"getMapeaFeatureClone",value:function(){var t=this.facadeControl.feature.getImpl().olFeature_.clone();return M.impl.Feature.olFeature2Facade(t)}},{key:"getFeatureExtent",value:function(){return this.facadeControl.feature.getImpl().getOLFeature().getGeometry().getExtent()}},{key:"newPolygonFeature",value:function(t){return new ol.Feature({geometry:ol.geom.Polygon.fromExtent(t)})}}],r&&Mb(n.prototype,r),i&&Mb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function Fb(t){return Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fb(t)}function Bb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gb(r.key),r)}}function Gb(t){var e=function(t,e){if("object"!=Fb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fb(e)?e:e+""}function zb(t,e,n){return e=Vb(e),function(t,e){if(e&&("object"==Fb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qb()?Reflect.construct(e,n||[],Vb(t).constructor):e.apply(t,n))}function qb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qb=function(){return!!t})()}function Ub(){return Ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Vb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Ub.apply(null,arguments)}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vb(t)}function Yb(t,e){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yb(t,e)}var Xb=["holedrawing","rotatedrawing","scaledrawing"],Wb=["holedrawing"],Hb=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(Db)&&M.exception(h("exception"));var i=new Db(t);return r=zb(this,e,[i,"Selection"]),i.facadeControl=r,r.map_=t,r.managementControl_=n,r.template=null,r.selection_="layer",r.layer_=null,r.selectedFeatures_=[],r.selectionLayer=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yb(t,e)}(e,M.Control),n=e,r=[{key:"active",value:function(t){this.initializeLayers(),this.getImpl().activateSelection(),this.selection_="feature"}},{key:"initializeLayers",value:function(){var t=this.map_.getLayers().filter((function(t){return"selectLayer"===t.name}));t.length>0?this.selectionLayer=t[0]:(this.selectionLayer=new M.layer.Vector({extract:!1,name:"selectLayer",source:this.layer_.getImpl().getOL3Layer().getSource()},{displayInLayerSwitcher:!1}),this.layer_.getImpl().extract=!1,this.map_.addLayers(this.selectionLayer),this.selectionLayer.setZIndex(this.selectionLayer.getZIndex()+8))}},{key:"getSelection",value:function(){return this.selection_}},{key:"hideSelectionLayer",value:function(){this.getImpl().removeSelectInteraction()}},{key:"showSelectedLayer",value:function(){this.getImpl().activateSelection()}},{key:"getSelectedFeatures",value:function(){return this.selectedFeatures_}},{key:"getSelectedOLFeatures",value:function(){var t=[];return this.selectedFeatures_.forEach((function(e){return t.push(e.getImpl().getOLFeature())})),t}},{key:"removeSelectedFeatures",value:function(){this.selectedFeatures_=[]}},{key:"addFeatureToSelection",value:function(t){this.selectedFeatures_.push(t)}},{key:"onSelect",value:function(t){var e=this,n=this.layer_.getFeatures(),r=t.target.getFeatures().getArray();if(this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.removeSelectedFeatures(),r.forEach((function(t){e.feature=n.filter((function(e){return e.getImpl().getOLFeature()===t}))[0]||void 0,e.feature&&e.addFeatureToSelection(e.feature),e.geometry=e.feature.getGeometry().type,e.emphasizeSelectedFeature()})),this.managementControl_.refreshSelection(),1===this.selectedFeatures_.length&&null!==document.querySelector(".m-vectorsmanagement-analysis")&&this.managementControl_.analysisControl.showFeatureInfo(this.selectedFeatures_[0]),document.querySelector("#m-vectorsmanagement-edition").classList.contains("activated")){this.enabledButton([].concat(Xb,Wb));var i=this.managementControl_.editionControl;if(1===this.selectedFeatures_.length){var o=this.selectedFeatures_[0].getGeometry().type;"Point"===o&&(this.disabledButton(Xb),i.isHoleActive?(i.isHoleActive=!1,i.getImpl().removeDrawHoleInteraction()):i.isRotateActive?(i.isRotateActive=!1,i.getImpl().removeRotateInteraction()):i.isScaleActive&&(i.isScaleActive=!1,i.getImpl().removeScaleInteraction())),"LineString"===o&&(this.disabledButton(Wb),i.isHoleActive&&(i.isHoleActive=!1,i.getImpl().removeDrawHoleInteraction()))}else this.disabledButton(Wb),i.isHoleActive&&(i.isHoleActive=!1,i.getImpl().removeDrawHoleInteraction())}}},{key:"emphasizeSelectedFeature",value:function(){if(this.emphasis=null,this.feature){if("Point"===this.geometry||"MultiPoint"===this.geometry)this.emphasis=this.getImpl().getMapeaFeatureClone(),this.emphasis.setStyle(new M.style.Point({radius:20,stroke:{color:"#FF0000",width:2}}));else{var t=this.getImpl().getFeatureExtent();this.emphasis=M.impl.Feature.olFeature2Facade(this.getImpl().newPolygonFeature(t)),this.emphasis.setStyle(new M.style.Line({stroke:{color:"#FF0000",width:2}}))}this.selectionLayer.addFeatures([this.emphasis])}}},{key:"destroy",value:function(){}},{key:"setLayer",value:function(t){this.layer_=t}},{key:"getLayer",value:function(){return this.layer_}},{key:"activate",value:function(){Ub(Vb(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.getImpl().removeSelectInteraction(),this.removeSelectedFeatures(),this.selectionLayer&&this.selectionLayer.removeFeatures(this.selectionLayer.getFeatures()),this.selection_="layer",this.managementControl_.refreshSelection(),this.enabledButton([].concat(Xb,Wb))}},{key:"disabledButton",value:function(t){t.forEach((function(t){var e=document.querySelector("#".concat(t));e.setAttribute("disabled","disabled"),e.classList.add("disabled"),e.classList.contains("activated")&&e.classList.remove("activated")}))}},{key:"enabledButton",value:function(t){t.forEach((function(t){var e=document.querySelector("#".concat(t));e&&e.classList.contains("disabled")&&(e.removeAttribute("disabled"),e.classList.remove("disabled"))}))}},{key:"equals",value:function(t){return t instanceof e}}],r&&Bb(n.prototype,r),i&&Bb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function Zb(t){return Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zb(t)}function Kb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qb(r.key),r)}}function Qb(t){var e=function(t,e){if("object"!=Zb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zb(e)?e:e+""}function Jb(t,e,n){return e=ew(e),function(t,e){if(e&&("object"==Zb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$b()?Reflect.construct(e,n||[],ew(t).constructor):e.apply(t,n))}function $b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($b=function(){return!!t})()}function tw(){return tw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ew(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},tw.apply(null,arguments)}function ew(t){return ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ew(t)}function nw(t,e){return nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nw(t,e)}var rw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jb(this,e)).facadeMap_=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nw(t,e)}(e,M.impl.Control),n=e,(r=[{key:"addTo",value:function(t,n){tw(ew(e.prototype),"addTo",this).call(this,t,n),this.facadeMap_=t}}])&&Kb(n.prototype,r),i&&Kb(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),iw=n(377),ow=n.n(iw);function aw(t){return aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aw(t)}function sw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uw(r.key),r)}}function uw(t){var e=function(t,e){if("object"!=aw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=aw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aw(e)?e:e+""}function lw(t,e,n){return e=hw(e),function(t,e){if(e&&("object"==aw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cw()?Reflect.construct(e,n||[],hw(t).constructor):e.apply(t,n))}function cw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cw=function(){return!!t})()}function fw(){return fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=hw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},fw.apply(null,arguments)}function hw(t){return hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hw(t)}function pw(t,e){return pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pw(t,e)}var dw=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(rw)&&M.exception(h("exception"));var i=new rw;return r=lw(this,e,[i,"Style"]),i.facadeControl=r,r.map_=t,r.managementControl_=n,r.template=null,r.layer_=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pw(t,e)}(e,M.Control),n=e,r=[{key:"active",value:function(t){this.template=M.template.compileSync(ow(),{vars:{translations:{styleColor:h("styleColor"),styleThickness:h("styleThickness"),styleFont:h("styleFont"),styleSize:h("styleSize"),creationText:h("creationText"),opacity:h("opacity"),radius:h("radius"),style_options:h("style_options"),apply_style:h("apply_style"),fill:h("fill"),stroke:h("stroke"),opts_point:h("opts_point")}}}),t.querySelector("#m-vectorsmanagement-controls").appendChild(this.template),this.refreshStyle(),this.addEvents(),this.managementControl_.accessibilityTab(this.template)}},{key:"refreshStyle",value:function(){var t=this.managementControl_.getSelection();"layer"===t?this.showLayerStyle():"feature"===t&&this.showFeatureStyle()}},{key:"addEvents",value:function(){var t=this;this.template.querySelector("#options").addEventListener("click",(function(){return t.toggleContent()})),this.template.querySelector("#options").addEventListener("keypress",(function(e){"Enter"===e.key&&t.toggleContent()})),this.template.querySelector("#set-style-btn").addEventListener("click",(function(){return t.applyStyle()}))}},{key:"toggleContent",value:function(){var t=this.template.querySelector(".content"),e=this.template.querySelector("#options").children[0];t.classList.contains("closed")?(t.classList.remove("closed"),e.classList.remove("g-cartografia-flecha-abajo"),e.classList.add("g-cartografia-flecha-arriba")):(t.classList.add("closed"),e.classList.remove("g-cartografia-flecha-arriba"),e.classList.add("g-cartografia-flecha-abajo"))}},{key:"showLayerStyle",value:function(){var t=this.layer_.getStyle(),e={};t&&(e=t.getOptions()),this.showStyle(e)}},{key:"showFeatureStyle",value:function(){var t=this.managementControl_.getSelectedFeatures();if(t.length>0){for(var e={},n=0;n<t.length;n+=1){var r=t[n],i=r.getStyle();i&&i.getOptions()&&("Point"!==r.getGeometry().type&&"MultiPoint"!==r.getGeometry().type||e.point?"LineString"!==r.getGeometry().type&&"MultiLineString"!==r.getGeometry().type||e.line?"Polygon"!==r.getGeometry().type&&"MultiPolygon"!==r.getGeometry().type||e.polygon||(e.polygon=i.getOptions()):e.line=i.getOptions():e.point=i.getOptions())}e.point||e.line||e.polygon?this.showStyle(e):this.showLayerStyle()}else M.dialog.info(h("exception.featuresel"))}},{key:"showStyle",value:function(t){t&&(this.setStyle(t.point),this.setStyle(t.line),this.setStyle(t.polygon)),this.template.classList.remove("closed")}},{key:"rgbaToHex",value:function(t){var e=t.match(/(\d+(\.\d+)?)/g),n=Number.parseInt(e[0],10),r=Number.parseInt(e[1],10),i=Number.parseInt(e[2],10);return"#".concat(n.toString(16).padStart(2,"0")).concat(r.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0")).toUpperCase()}},{key:"setStyle",value:function(t,e){if(t){var n=this.template.querySelector("#colorSelectorFill"),r=this.template.querySelector("#opacity");if(n&&(t.fill.opacity?r.value=t.fill.opacity:r.value=.4,t.fill.color)){var i=t.fill.color.indexOf("rgba")>=0;n.value=i?this.rgbaToHex(t.fill.color):t.fill.color}var o=this.template.querySelector("#colorSelector");t.stroke&&t.stroke.color&&o&&(o.value=t.stroke.color);var a=this.template.querySelector("#thicknessSelector");t.stroke&&t.stroke.width&&a&&(a.value=t.stroke.width);var s=this.template.querySelector("#opacityStroke");t.stroke&&t.stroke.opacity&&s&&(s.value=t.stroke.opacity);var u=this.template.querySelector("#textContent"),l=this.template.querySelector("#fontFamily"),c=this.template.querySelector("#fontSize"),f=this.template.querySelector("#colorSelector-text");if(t.label&&t.label.text?u.value=t.label.text:u.value="",t.label&&t.label.font){var h=t.label.font.split(" ");2===h.length?(c.value=Number.parseInt(h[0].replace("px",""),10),l.value=h[1]):(c.value=12,l.value=t.label.font),t.label.color&&(f.value=t.label.color)}else c.value=12,l.value="Arial";var p=this.template.querySelector("#radiusSelector-point");p&&(t.radius?p.value=t.radius:p.value=5)}}},{key:"applyStyle",value:function(){var t=this.getStyle(),e={point:t,line:t,polygon:t},n=this.managementControl_.getSelection();"layer"===n?this.layer_.setStyle(new M.style.Generic(e)):"feature"===n&&this.managementControl_.getSelectedFeatures().forEach((function(t){var n;switch(t.getGeometry().type){case"Point":case"MultiPoint":n=new M.style.Point(e.point);break;case"LineString":case"MultiLineString":n=new M.style.Line(e.line);break;case"Polygon":case"MultiPolygon":n=new M.style.Polygon(e.polygon)}n&&t.setStyle(n)}))}},{key:"getStyle",value:function(){var t={stroke:{},fill:{}},e=this.template.querySelector("#colorSelectorFill");e&&(t.fill.color=e.value);var n=this.template.querySelector("#opacity");n&&(t.fill.opacity=n.value);var r=this.template.querySelector("#colorSelector");r&&(t.stroke.color=r.value);var i=this.template.querySelector("#thicknessSelector");i&&(t.stroke.width=i.value);var o=this.template.querySelector("#opacityStroke");o&&(t.stroke.opacity=o.value);var a=this.template.querySelector("#fontFamily"),s=this.template.querySelector("#textContent"),u=this.template.querySelector("#fontSize"),l=this.template.querySelector("#colorSelector-text");s&&s.value&&(t.label={},t.label.text=s.value,a&&u&&(t.label.font="".concat(u.value,"px ").concat(a.value)),l&&(t.label.color=l.value));var c=this.template.querySelector("#radiusSelector-point");return c&&(t.radius=c.value),t}},{key:"setLayer",value:function(t){this.layer_=t}},{key:"destroy",value:function(){}},{key:"activate",value:function(){fw(hw(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.template.remove()}},{key:"equals",value:function(t){return t instanceof EditionControl}}],r&&sw(n.prototype,r),i&&sw(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),yw=n(7443),gw=n.n(yw);function vw(t){return vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vw(t)}function mw(t){return function(t){if(Array.isArray(t))return _w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _w(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_w(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function bw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ww(r.key),r)}}function ww(t){var e=function(t,e){if("object"!=vw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vw(e)?e:e+""}function xw(t,e,n){return e=Ew(e),function(t,e){if(e&&("object"==vw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sw()?Reflect.construct(e,n||[],Ew(t).constructor):e.apply(t,n))}function Sw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sw=function(){return!!t})()}function Ew(t){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ew(t)}function Cw(t,e){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cw(t,e)}var Ow=function(t){function e(t){var n,r=t.map,i=t.selection,o=t.addlayer,a=t.analysis,s=t.creation,u=t.download,l=t.edition,c=t.help,f=t.style,h=t.isDraggable,p=t.order;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xw(this,e,[new M.impl.Control,"VectorsManagement"])).selection_=i,n.addlayer_=o,n.analysis_=a,n.creation_=s,n.download_=u,n.edition_=l,n.help_=c,n.style_=f,n.layers_=r.getLayers().filter((function(t){return(t instanceof M.layer.Vector||t instanceof M.layer.GenericVector)&&t.displayInLayerSwitcher})).map((function(t){return{value:t.name,text:t.legend||t.name,zIndex:t.getZIndex()}})).sort((function(t,e){return e.zIndex-t.zIndex})),n.selectedLayer=null,n.isDraggable_=h,n.order=p,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cw(t,e)}(e,M.Control),n=e,(r=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise((function(t,n){var r=M.template.compileSync(gw(),{vars:{selection:e.selection_,addlayer:e.addlayer_,analysis:e.analysis_,creation:e.creation_,download:e.download_,edition:!!(e.edition_ instanceof Object||!0===e.edition_),help:e.help_,style:e.style_,layer:e.layers_,translations:{headertitle:h("tooltip"),analysis:h("analysis"),creation:h("creation"),download:h("download"),edition:h("edition"),help:h("help"),selection:h("selection"),style:h("style"),selectLayerDefault:h("selectLayerDefault")}}});e.html=r,e.selection_&&e.addSelectionControl(r),e.addlayer_&&e.addAddLayerControl(r),e.analysis_&&e.addAnalysisControl(r),e.creation_&&e.addCreationControl(r),e.download_&&e.addDownloadControl(r),e.edition_&&e.addEditionControl(r),e.help_&&e.addHelpControl(r),e.style_&&e.addStyleControl(r),r.querySelector("#m-selectionlayer").addEventListener("change",e.selectLayerEvent.bind(e)),e.map.on(M.evt.ADDED_LAYER,e.refreshLayers.bind(e)),e.map.on(M.evt.REMOVED_LAYER,e.refreshLayers.bind(e)),e.isDraggable_&&M.utils.draggabillyPlugin(e.getPanel(),"#m-vectorsmanagement-titulo"),e.accessibilityTab(r),t(r)}))}},{key:"selectLayerEvent",value:function(){this.selectionControl&&this.selectionControl.selectedFeatures_.length>0&&(document.querySelector("#m-vectorsmanagement-selection").classList.remove("activated"),this.selectionControl.deactivate()),this.html.querySelector("#m-vectorsmanagement-previews").classList.remove("closed");var t=this.html.querySelector("#m-selectionlayer").selectedOptions[0].value;this.selectedLayer=this.map.getLayers().filter((function(e){return e.name===t}))[0],"MVT"!==this.selectedLayer.type&&"MBTilesVector"!==this.selectedLayer.type||M.toast.warning(h("exception.typeLayer"),null,6e3),this.selection_&&this.selectionControl.setLayer(this.selectedLayer),this.creation_&&this.creationControl.setLayer(this.selectedLayer),this.edition_&&this.editionControl.setLayer(this.selectedLayer),this.style_&&this.styleControl.setLayer(this.selectedLayer),this.analysis_&&this.analysisControl.setLayer(this.selectedLayer),this.download_&&this.downloadControl.setLayer(this.selectedLayer)}},{key:"addSelectionControl",value:function(t){var e=this;this.selectionControl=new Hb(this.map_,this),t.querySelector("#m-vectorsmanagement-selection").addEventListener("click",(function(n){n.target.classList.contains("activated")?(e.selectionControl.deactivate(),n.target.classList.remove("activated")):(e.selectionControl.active(t),n.target.classList.add("activated"),e.creationControl.deactivate(),document.querySelector("#m-vectorsmanagement-creation").classList.remove("activated"))}))}},{key:"addAddLayerControl",value:function(t){var e=this;this.addLayerControl=new w(this.map_),t.querySelector("#layerdrawing").addEventListener("click",(function(n){e.deactive(t,"addlayer")||(n.target.classList.add("activated"),e.addLayerControl.active(t))}))}},{key:"addAnalysisControl",value:function(t){var e=this;this.analysisControl=new yn(this.map_,this),t.querySelector("#m-vectorsmanagement-analysis").addEventListener("click",(function(n){e.deactive(t,"analysis")||(e.analysisControl.active(t),n.target.classList.add("activated"))}))}},{key:"addCreationControl",value:function(t){var e=this;this.creationControl=new Rg(this.map_,this),t.querySelector("#m-vectorsmanagement-creation").addEventListener("click",(function(n){e.deactive(t,"creation")||(e.creationControl.active(t),n.target.classList.add("activated"),e.selectionControl&&(e.selectionControl.deactivate(),document.querySelector("#m-vectorsmanagement-selection").classList.remove("activated")))}))}},{key:"addDownloadControl",value:function(t){var e=this;this.downloadControl=new uv(this.map_,this),t.querySelector("#m-vectorsmanagement-download").addEventListener("click",(function(n){e.deactive(t,"download")||(e.selectedLayer.getFeatures().length>0?(e.downloadControl.active(t),n.target.classList.add("activated")):M.dialog.info(h("exception.emptylayer")))}))}},{key:"addEditionControl",value:function(t){var e=this;this.editionControl=new lb(this.map_,this),t.querySelector("#m-vectorsmanagement-edition").addEventListener("click",(function(n){var r=document.querySelector("#m-vectorsmanagement-selection");e.selectionControl&&r.classList.contains("activated")&&(e.selectionControl.deactivate(),r.classList.remove("activated")),e.deactive(t,"edition")||(e.editionControl.active(t),e.selectionControl&&(e.selectionControl.active(t),r.classList.add("activated")),n.target.classList.add("activated"))}))}},{key:"addHelpControl",value:function(t){var e=this;this.helpControl=new Pb(this.map_,this),t.querySelector("#m-vectorsmanagement-help").addEventListener("click",(function(n){e.deactive(t,"help")||(e.helpControl.active(t),n.target.classList.add("activated"),rn())}))}},{key:"addStyleControl",value:function(t){var e=this;this.styleControl=new dw(this.map_,this),t.querySelector("#m-vectorsmanagement-style").addEventListener("click",(function(n){e.deactive(t,"style")||(e.styleControl.active(t),n.target.classList.add("activated"))}))}},{key:"deactive",value:function(t,e){var n=this.getControlActive(t),r=!1;return n?(n&&(n.id==="m-vectorsmanagement-".concat(e)&&(r=!0),"layerdrawing"===n.id?this.addLayerControl.deactivate():"m-vectorsmanagement-analysis"===n.id?this.analysisControl.deactivate():"m-vectorsmanagement-creation"===n.id?this.creationControl.deactivate():"m-vectorsmanagement-download"===n.id?this.downloadControl.deactivate():"m-vectorsmanagement-edition"===n.id?this.editionControl.deactivate():"m-vectorsmanagement-help"===n.id?this.helpControl.deactivate():"m-vectorsmanagement-style"===n.id&&this.styleControl.deactivate(),n.classList.remove("activated")),r):r}},{key:"getControlActive",value:function(t){return 0!==t.querySelectorAll("#m-vectorsmanagement-previews .activated:not(#m-vectorsmanagement-selection)").length&&t.querySelectorAll("#m-vectorsmanagement-previews .activated:not(#m-vectorsmanagement-selection)")[0]}},{key:"getSelection",value:function(){var t="layer";return this.selectionControl&&(t=this.selectionControl.getSelection()),t}},{key:"getSelectedFeatures",value:function(){var t=[];return this.selectionControl&&(t=this.selectionControl.getSelectedFeatures()),t}},{key:"getSelectedOLFeatures",value:function(){var t=[];return this.selectionControl&&(t=this.selectionControl.getSelectedOLFeatures()),t}},{key:"removeSelectedFeatures",value:function(){this.selectionControl&&this.selectionControl.removeSelectedFeatures()}},{key:"addFeatureToSelection",value:function(t){this.selectionControl&&this.selectionControl.addFeatureToSelection(t)}},{key:"hideSelectionLayer",value:function(){this.selectionControl&&this.html.querySelector("#m-vectorsmanagement-selection").classList.contains("activated")&&this.selectionControl.hideSelectionLayer()}},{key:"showSelectionLayer",value:function(){this.selectionControl&&this.html.querySelector("#m-vectorsmanagement-selection").classList.contains("activated")&&this.selectionControl.showSelectedLayer()}},{key:"refreshLayers",value:function(){this.layers_=this.map_.getLayers().filter((function(t){return(t instanceof M.layer.Vector||t instanceof M.layer.GenericVector)&&t.displayInLayerSwitcher})).map((function(t){return{value:t.name,text:t.legend||t.name,zIndex:t.getZIndex()}}));for(var t=this.html.querySelector("#m-selectionlayer"),e=t.selectedOptions[0].value,n=this.layers_.filter((function(t){return t.value===e})).length>0,r=t.children.length,i=0;i<r;i+=1)t.children[0].remove();var o=document.createElement("option");o.value="",o.selected=!n,o.disabled=!0,o.innerText="".concat(h("selectLayerDefault"),"..."),t.appendChild(o),mw(this.layers_).sort((function(t,e){return e.zIndex-t.zIndex})).forEach((function(n){(o=document.createElement("option")).value=n.value,o.innerText=n.text,o.selected=n.value===e,t.appendChild(o)})),n||(this.html.querySelector("#m-vectorsmanagement-previews").classList.add("closed"),this.deactive(this.html,""))}},{key:"refreshSelection",value:function(){var t=this.getControlActive(this.html);t&&("m-vectorsmanagement-edition"===t.id?this.editionControl.refreshSelection():"m-vectorsmanagement-style"===t.id&&this.styleControl.refreshStyle())}},{key:"accessibilityTab",value:function(t){var e=this;t.querySelectorAll('[tabindex="0"]').forEach((function(t){return t.setAttribute("tabindex",e.order)}))}},{key:"destroy",value:function(){this.analysisControl.destroy()}},{key:"equals",value:function(t){return t instanceof e}}])&&bw(n.prototype,r),i&&bw(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(),Iw=n(3431),Pw=n.n(Iw);function kw(t){return kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kw(t)}function Mw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tw(r.key),r)}}function Tw(t){var e=function(t,e){if("object"!=kw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kw(e)?e:e+""}function Lw(t,e,n){return e=Aw(e),function(t,e){if(e&&("object"==kw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nw()?Reflect.construct(e,n||[],Aw(t).constructor):e.apply(t,n))}function Nw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nw=function(){return!!t})()}function Aw(t){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Aw(t)}function Rw(t,e){return Rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rw(t,e)}var jw=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lw(this,e)).map_=null,t.controls_=[],t.name="vectorsmanagement",t.options=n,t.position_=n.position||"TR",t.collapsed=void 0===n.collapsed||n.collapsed,t.collapsible=void 0===n.collapsible||n.collapsible,t.selection=void 0===n.selection||n.selection,t.addlayer=void 0===n.addlayer||n.addlayer,t.analysis=t.selection&&(void 0===n.analysis||n.analysis),t.creation=void 0===n.creation||n.creation,t.download=void 0===n.download||n.download,t.edition=t.selection&&(void 0===n.edition||n.edition),t.help=void 0===n.help||n.help,t.style=void 0===n.style||n.style,t.tooltip_=n.tooltip||h("tooltip"),t.isDraggable=!M.utils.isUndefined(n.isDraggable)&&n.isDraggable,t.order=n.order>=-1?n.order:null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rw(t,e)}(e,M.Plugin),n=e,i=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?l:c:M.language.getTranslation(t).vectorsmanagement}}],(r=[{key:"addTo",value:function(t){var e=this;this.controls_.push(new Ow({map:t,selection:this.selection,addlayer:this.addlayer,analysis:this.analysis,creation:this.creation,download:this.download,edition:this.edition,help:this.help,style:this.style,isDraggable:this.isDraggable,order:this.order})),this.map_=t,this.panel_=new M.ui.Panel("VectorsManagement",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position_],className:"m-plugin-vectorsmanagement",tooltip:this.tooltip_,collapsedButtonClass:"vectorsmanagement-icon-vectors",order:this.order}),this.controls_[0].on("vectorsmanagement:activeChanges",(function(t){e.layerId=t.activeLayerId})),this.panel_.addControls(this.controls_),t.addPanels(this.panel_)}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.selection,"*").concat(this.addlayer,"*").concat(this.analysis,"*").concat(this.creation,"*").concat(this.download,"*").concat(this.edition,"*").concat(this.help,"*").concat(this.style)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.map_=null,this.control_=null,this.controls_=null,this.panel_=null,this.name=null,this.layerOpts=null}},{key:"equals",value:function(t){return t instanceof e}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(t){t(M.template.compileSync(Pw(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/vectorsmanagement/images/"),translations:{help1:h("textHelp.help1"),help2:h("textHelp.help2"),help3:h("textHelp.help3"),help4:h("textHelp.help4"),help5:h("textHelp.help5"),help6:h("textHelp.help6"),help7:h("textHelp.help7"),help8:h("textHelp.help8"),help9:h("textHelp.help9"),help10:h("textHelp.help10"),help11:h("textHelp.help11"),help12:h("textHelp.help12"),help13:h("textHelp.help13"),help14:h("textHelp.help14"),help15:h("textHelp.help15"),help16:h("textHelp.help16"),help17:h("textHelp.help17"),help18:h("textHelp.help18"),help19:h("textHelp.help19")}}}))}))}}}])&&Mw(n.prototype,r),i&&Mw(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();function Dw(t){return Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dw(t)}function Fw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bw(r.key),r)}}function Bw(t){var e=function(t,e){if("object"!=Dw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dw(e)?e:e+""}function Gw(t,e,n){return e=Uw(e),function(t,e){if(e&&("object"==Dw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zw()?Reflect.construct(e,n||[],Uw(t).constructor):e.apply(t,n))}function zw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zw=function(){return!!t})()}function qw(){return qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Uw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},qw.apply(null,arguments)}function Uw(t){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uw(t)}function Vw(t,e){return Vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vw(t,e)}var Yw=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gw(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vw(t,e)}(e,M.impl.Control),n=e,(r=[{key:"addTo",value:function(t,n){qw(Uw(e.prototype),"addTo",this).call(this,t,n)}}])&&Fw(n.prototype,r),i&&Fw(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();window.M.control||(window.M.control={}),window.M.plugin||(window.M.plugin={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.control.AddLayer=w,window.M.control.AnalysisControl=yn,window.M.control.CreationControl=Rg,window.M.control.DownloadControl=uv,window.M.control.EditionControl=lb,window.M.control.Help=Pb,window.M.control.SelectionControl=Hb,window.M.control.StyleControl=dw,window.M.plugin.VectorsManagement=jw,window.M.control.VectorsManagementControl=Ow,window.M.impl.control.AddLayerControl=u,window.M.impl.control.Analysiscontrol=Ke,window.M.impl.control.Creationcontrol=xg,window.M.impl.control.Downloadcontrol=Zg,window.M.impl.control.Editioncontrol=H_,window.M.impl.control.Helpcontrol=vb,window.M.impl.control.Selectioncontrol=Db,window.M.impl.control.Stylecontrol=rw,window.M.impl.control.VectorsManagementControl=Yw})()})();
//# sourceMappingURL=vectorsmanagement.ol.min.js.map