!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5)}([function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Perfiltopografico controls."},"tooltip":"Topography Profile","title":"Topography Profile","profil":{"title":"Topographic Profile","zmin":"Min Alt.","zmax":"Max Alt.","altitude":"Alt.","distance":"Full Distance","ytitle":"Altitude (m)","xtitle":"Distance (km)"}}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Perfiltopografico."},"tooltip":"Perfil Topográfico","title":"Perfil Topográfico","profil":{"title":"Perfil Topográfico","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)"}}')},function(t,e){t.exports='<div class="m-control m-container m-topographicprofile-container">\r\n    <button id=\'m-topographicprofile-btn\' class="m-topographicprofile-btn icon-chart"></button>\r\n</div>\r\n'},function(t){t.exports=JSON.parse('{"url":{"name":"topographicprofile","separator":"*"},"constructor":"M.plugin.Topographicprofile","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","possibleValues":["TL","TR","BL","BR"],"position":0}]}],"files":{"ol":{"scripts":["topographicprofile.ol.min.js"],"styles":["topographicprofile.ol.min.css"]}},"metadata":{"name":"Perfil Topográfico","description":"Genera un perfil longitudinal","text":"A partir de un eje dibujado, el plugin muestra un perfil longitudinal del terreno","version":"1.1.0","date":"Enero, 2020","author":"","org":"CNIG","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","centralized":true}}')},function(t,e,o){},function(t,e,o){"use strict";o.r(e);o(4);var n,i,r=o(0),a=o(1),l={en:r,es:a},s=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},c=function(t){return"es"===t||"en"===t?l[t]:M.language.getTranslation(t).topographicprofile},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s(),o=c(e),n="";return M.utils.isNullOrEmpty(o)?console.warn("The translation '".concat(e,"' has not been defined.")):n=t.split(".").reduce((function(t,e){return t[e]}),o),n},p={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"},f=function(t){var e=this,o=t||{};this.info=o.info||p;var n,i=this;if(o.target)(n=document.createElement("div")).classList.add(o.className||"ol-profil");else{(n=document.createElement("div")).className=((o.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed").trim();var r=document.createElement("p");r.textContent=u("profil.title"),n.appendChild(r);var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("class","profile-close-button");var l=function(n){t.map.removeControl(e),o.source.clear()};a.addEventListener("click",l),a.addEventListener("touchstart",l),r.appendChild(a);var s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("class","profile-download-button");var c=function(t){var o=e.getImage(),n=document.createElement("a");n.href=o,n.download="Perfil.png",n.click(),n.remove()};s.addEventListener("click",c),s.addEventListener("touchstart",c),r.appendChild(s)}var f=document.createElement("div");f.classList.add("ol-inner"),n.appendChild(f);var h=document.createElement("div");h.style.position="relative",f.appendChild(h);var d=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(o.width||400)*d,this.canvas_.height=(o.height||250)*d;var m={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(m).forEach((function(t){t in i.canvas_.style&&(i.canvas_.style[t]=m[t])}));var y=document.createElement("div");h.appendChild(y),y.style.width=this.canvas_.width/d+"px",y.style.height=this.canvas_.height/d+"px",y.appendChild(this.canvas_),y.addEventListener("click",(function(t){i.onMove(t)})),y.addEventListener("mousemove",(function(t){i.onMove(t)})),ol.control.Control.call(this,{element:n,target:o.target}),this.margin_={top:25*d,left:55*d,bottom:45*d,right:25*d},this.info.ytitle||(this.margin_.left-=20*d),this.info.xtitle||(this.margin_.bottom-=20*d),this.bar_=document.createElement("div"),this.bar_.classList.add("ol-profilbar"),this.bar_.style.top=this.margin_.top/d+"px",this.bar_.style.height=(this.canvas_.height-this.margin_.top-this.margin_.bottom)/d+"px",h.appendChild(this.bar_),this.cursor_=document.createElement("div"),this.cursor_.classList.add("ol-profilcursor"),h.appendChild(this.cursor_),this.popup_=document.createElement("div"),this.popup_.classList.add("ol-profilpopup"),this.cursor_.appendChild(this.popup_);var v=document.createElement("table");v.cellPadding="0",v.cellSpacing="0",v.style.clientWidth=this.canvas_.width/d+"px",h.appendChild(v);var g=document.createElement("tr");g.classList.add("track-info"),v.appendChild(g);var _=document.createElement("td");_.innerHTML=(this.info.zmin||"Zmin")+': <span class="zmin">',g.appendChild(_);var b=document.createElement("td");b.innerHTML=(this.info.zmax||"Zmax")+': <span class="zmax">',g.appendChild(b);var w=document.createElement("td");w.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',g.appendChild(w);var M=document.createElement("tr");M.classList.add("point-info"),v.appendChild(M);var P=document.createElement("td");P.innerHTML=(this.info.altitude||"Altitude")+': <span class="z">',M.appendChild(P);var S=document.createElement("td");S.innerHTML='Dist. parcial: <span class="dist">',M.appendChild(S);var x=document.createElement("td");x.innerHTML=(this.info.time||"Time")+': <span class="time">',M.appendChild(x),this.tab_=[],o.feature&&this.setGeometry(o.feature)};n=f,i=ol.control.Control,n.prototype=Object.create(i.prototype),n.prototype.constructor=n,f.prototype.popup=function(t){this.popup_.innerHTML=t},f.prototype.onMove=function(t){if(this.tab_.length){var e=this.canvas_.getBoundingClientRect(),o=e.top+window.pageYOffset-document.documentElement.clientTop,n=e.left+window.pageXOffset-document.documentElement.clientLeft,i=t.pageX-n,r=t.pageY-o,a=this.ratio;if(i>this.margin_.left/a&&i<(this.canvas_.width-this.margin_.right)/a&&r>this.margin_.top/a&&r<(this.canvas_.height-this.margin_.bottom)/a){this.bar_.style.left=i+"px",this.bar_.style.display="block";for(var l,s=(i*a-this.margin_.left)/this.scale_[0],c=this.tab_[0],u=1;l=this.tab_[u];u++)if(l[0]>=s){s<(l[0]+c[0])/2&&(l=c);break}l?(this.cursor_.style.left=i+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+l[1]*this.scale_[1]+this.dy_)/a+"px",this.cursor_.style.display="block"):this.cursor_.style.display="none",this.bar_.parentElement.classList.add("over"),this.element.querySelector(".point-info .z").textContent=l[1]+this.info.altitudeUnits,this.element.querySelector(".point-info .dist").textContent=(l[0]/1e3).toFixed(1)+this.info.distanceUnitsKM,this.element.querySelector(".point-info .time").textContent=l[2],i>this.canvas_.width/a/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left"),this.dispatchEvent({type:"over",click:"click"==t.type,coord:l[3],time:l[2],distance:l[0]})}else this.bar_.parentElement.classList.contains("over")&&(this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"),this.dispatchEvent({type:"out"}))}},f.prototype.show=function(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})},f.prototype.hide=function(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})},f.prototype.toggle=function(){this.element.classList.toggle("ol-collapsed");var t=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!t})},f.prototype.isShown=function(){return!this.element.classList.contains("ol-collapsed")},f.prototype.setGeometry=function(t,e){e||(e={}),t instanceof ol.Feature&&(t=t.getGeometry());var o=this.canvas_,n=o.getContext("2d"),i=o.width,r=o.height;if(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i,r),/Z/.test(t.getLayout())){/M/.test(t.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var a=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":a=a[0];break;default:return}var l=e.projection||this.getMap().getView().getProjection();n.setTransform(1,0,0,1,this.margin_.left,r-this.margin_.bottom);var s=this.ratio;i-=this.margin_.right+this.margin_.left,r-=this.margin_.top+this.margin_.bottom,n.strokeStyle="#000",n.lineWidth=.5*s,n.beginPath(),n.moveTo(0,0),n.lineTo(0,-r),n.moveTo(0,0),n.lineTo(i,0),n.stroke();var c,u,p,f,h,d,m,y=1/0,v=-1/0,g=this.tab_=[];for(c=0;u=a[c];c++)(f=u[2])<y&&(y=f),f>v&&(v=f),0==c?p=0:p+=(d=a[c-1],m=u,ol.sphere.getDistance(ol.proj.transform(d,l,"EPSG:4326"),ol.proj.transform(m,l,"EPSG:4326"))),h=O(a[0][3],u[3]),g.push([p,f,h,u]);this.element.querySelector(".track-info .zmin").textContent=y.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .zmax").textContent=v.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .dist").textContent=p>1e3?(p/1e3).toFixed(1)+this.info.distanceUnitsKM:p.toFixed(1)+this.info.distanceUnitsM;for(var _=e.graduation||100;;){if(!(r/(((v=Math.ceil(v/_)*_)-(y=Math.floor(y/_)*_))/_)<15*s))break;_*=2}"number"==typeof e.zmin&&y>e.zmin&&(y=e.zmin),"number"==typeof e.zmax&&v<e.zmax&&(v=e.zmax);var b=e.amplitude;b&&(v=Math.max(y+b,v));var w=i/p,M=-r/(v-y),P=this.dy_=-y*M;for(this.scale_=[w,M],n.font=12*s+"px arial",n.textAlign="right",n.textBaseline="middle",n.fillStyle="#000",n.beginPath(),c=y;c<=v;c+=_)"km"!=e.zunit?n.fillText(c,-4*s,c*M+P):n.fillText((c/1e3).toFixed(1),-4*s,c*M+P),n.moveTo(-2*s,c*M+P),0!=c?n.lineTo(p*w,c*M+P):n.lineTo(0,c*M+P);n.textAlign="center",n.textBaseline="top",n.setLineDash([s,3*s]);var S,x=e.unit||"km";for(p>1e3?(S=100*Math.round(p/1e3))>1e3&&(S=1e3*Math.ceil(S/1e3)):(x="m",S=p>100?10*Math.round(p/100):p>10?Math.round(p/10):p>1?Math.round(p)/10:p),c=0;c<=p;c+=S){var j="m"==x?c:c/1e3;n.fillText(Math.round(10*j)/10,c*w,4*s),n.moveTo(c*w,2*s),n.lineTo(c*w,0)}for(n.font=14*s+"px arial",n.fillText(this.info.xtitle.replace("(km)","("+x+")"),i/2,18*s),n.save(),n.rotate(-Math.PI/2),n.fillText(this.info.ytitle,r/2,-this.margin_.left),n.restore(),n.stroke(),n.strokeStyle="#368",n.lineWidth=3,n.setLineDash([]),n.beginPath(),c=0;u=g[c];c++)0==c?n.moveTo(u[0]*w,u[1]*M+P):n.lineTo(u[0]*w,u[1]*M+P);n.stroke()}function O(t,e){if(!t||!e)return"-";var o=(e-t)/60,n=Math.trunc(o/60),i=Math.trunc(o-60*n);return n+"h"+(i<10?"0":"")+i+"mn"}},f.prototype.getImage=function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)};var h=f;function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,r=void 0,r=function(t,e){if("object"!==d(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===d(r)?r:String(r)),n)}var i,r}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=v(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:o):i.value}}).apply(this,arguments)}function v(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=w(t);if(e){var i=w(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return b(this,o)}}function b(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(r,M.impl.Control);var e,o,n,i=_(r);function r(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=i.call(this);var o=[t.distance,"EPSG:900913",t.serviceURL,"EPSG:4326"];e.distancePoinst_=o[0],e.mercator_=o[1],e.serviceURL=o[2],e.coordEPSG4326=o[3];var n=[null,null,null,null,null,null,null,null,null,null,null,null];e.projectionMap_=n[0],e.profil_=n[1],e.facadeMap_=n[2],e.vector_=n[3],e.source_=n[4],e.vectorProfile_=n[5],e.sourceProfile_=n[6],e.draw_=n[7],e.lineCoord_=n[8],e.pointsCoord_=n[9],e.dataPoints_=n[10],e.pt=n[11];var a=[null,null,null];return e.lineString_=a[0],e.feature_=a[1],e.style_=a[2],e}return e=r,(o=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.initOlLayers(),y(w(r.prototype),"addTo",this).call(this,t,e)}},{key:"initOlLayers",value:function(){this.style_=function(t){return"LineString"==t.getGeometry().getType()?[new ol.style.Style({stroke:new ol.style.Stroke({color:"#4286f4",width:2})})]:[new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"#4286f4"})}),stroke:new ol.style.Stroke({color:"#4286f4",width:2}),fill:new ol.style.Fill({color:"#4286f4"})})]},this.source_=new ol.source.Vector({wrapX:!1}),this.vector_=new ol.layer.Vector({source:this.source_,style:this.style_,name:"capatopo"}),this.sourceProfile_=new ol.source.Vector,this.vectorProfile_=new ol.layer.Vector({source:this.sourceProfile_}),this.vector_.setZIndex(1e3),this.facadeMap_.getMapImpl().addLayer(this.vector_),this.projectionMap_=this.facadeMap_.getProjection().code}},{key:"findNewPoints",value:function(t,e){var o,n,i=new String,r=ol.proj.transform(t,this.projectionMap_,this.mercator_),a=ol.proj.transform(e,this.projectionMap_,this.mercator_),l=this.getAngleBetweenPoints(r,a),s=this.getDistBetweenPoints(t,e);if(!(s<50)){for(var c=s/this.distancePoinst_>this.distancePoinst_?s/this.distancePoinst_:this.distancePoinst_,u=0;u<=s/c;u++){l>=0&&l<=90?(o=1,n=1):l>=90?(o=-1,n=1):l<=0&&l>=-90?(o=1,n=-1):(o=-1,n=-1);var p=[Math.cos(l*Math.PI/180)*(c*u)+r[0],Math.sin(l*Math.PI/180)*(c*u)+r[1]],f=[Math.cos(l*Math.PI/180)*(c*u+o)+r[0],Math.sin(l*Math.PI/180)*(c*u+n)+r[1]];i+=ol.proj.transform(p,this.mercator_,this.coordEPSG4326)+",",i+=ol.proj.transform(f,this.mercator_,this.coordEPSG4326)+"|"}return i}}},{key:"getDistBetweenPoints",value:function(t,e){return new ol.geom.LineString([ol.proj.transform(t,this.projectionMap_,this.mercator_),ol.proj.transform(e,this.projectionMap_,this.mercator_)]).getLength()}},{key:"getAngleBetweenPoints",value:function(t,e){var o=t[0],n=t[1],i=e[0],r=e[1];return 180*Math.atan2(r-n,i-o)/Math.PI}},{key:"startLoad",value:function(){document.body.style.cursor="wait",this.deactivate(),document.querySelector(".m-topographicprofile.activated").style.pointerEvents="none"}},{key:"endLoad",value:function(){document.body.style.cursor="default",this.activate(),document.querySelector(".m-topographicprofile.activated").style.pointerEvents="auto"}},{key:"activate",value:function(){this.draw_||this.createIteraction("LineString"),this.facadeMap_.getMapImpl().addInteraction(this.draw_),document.querySelector("#m-topographicprofile-btn").classList.add("activated")}},{key:"createIteraction",value:function(t){this.draw_=new ol.interaction.Draw({source:this.source_,type:t}),this.draw_.on("drawstart",function(t){this.projectionMap_=this.facadeMap_.getProjection().code,this.clearLayer()}.bind(this)),this.draw_.on("drawend",function(t){this.lineCoord_=t.feature.getGeometry().getCoordinates(),this.pointsCoord_=new String;for(var e=1;e<this.lineCoord_.length;e++)this.pointsCoord_=this.pointsCoord_.concat(this.findNewPoints(this.lineCoord_[e-1],this.lineCoord_[e]));this.getDataFromGGISCore()}.bind(this))}},{key:"getDataFromGGISCore",value:function(){var t=this;if(this.pointsCoord_){var e=this.pointsCoord_.split("|"),o=[],n=[];e=e.filter((function(t){return""!==t&&t.trim().length>3})),M.proxy(!1),e.forEach((function(t){var e="".concat("https://servicios.idee.es/wcs-inspire/mdt?request=GetCoverage&bbox=").concat(t).concat("&service=WCS&version=1.0.0&coverage=Elevacion4258_500&interpolationMethod=bilinear&crs=EPSG%3A4258&format=ArcGrid&width=2&height=2");n.push(M.remote.get(e))})),Promise.all(n).then((function(n){M.proxy(!0),n.forEach((function(t){var e=0,n=t.text.split("NODATA_value -9999.000").join("");n.indexOf("dy")>-1?e=n.split("dy")[1].split(" ").filter((function(t){return""!==t}))[1]:n.indexOf("cellsize")>-1&&(e=n.split("cellsize")[1].split(" ").filter((function(t){return""!==t}))[1]),o.push(parseFloat(e))}));var i=[];o.forEach((function(t,o){var n=e[o].split(","),r=ol.extent.getCenter([parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])]);i.push([r[0],r[1],t])})),t.controlProfile();var r=i.map((function(e){return ol.proj.transform(e,"EPSG:4326",t.facadeMap_.getProjection().code)}));t.lineString_.setCoordinates(r)})).catch((function(t){M.proxy(!0),M.dialog.error("No se han obtenido datos")}))}}},{key:"setDataFromLocal",value:function(t){var e=this;this.controlProfile(),t=t.map((function(t){return ol.proj.transform(t,"EPSG:4326",e.facadeMap_.getProjection().code)})),this.lineString_.setCoordinates(t),this.vector_.getSource().addFeature(this.feature_)}},{key:"controlProfile",value:function(){if(!this.profil_){this.lineString_=new ol.geom.LineString([]),this.feature_=new ol.Feature({geometry:this.lineString_,name:"Line"}),this.sourceProfile_.addFeature(this.feature_),this.profil_=new h({info:{zmin:u("profil.zmin"),zmax:u("profil.zmax"),altitude:u("profil.altitude"),distance:u("profil.distance"),ytitle:u("profil.ytitle"),xtitle:u("profil.xtitle"),altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"},projection:this.facadeMap_.getProjection().code,map:this.facadeMap_.getMapImpl(),source:this.source_}),this.facadeMap_.getMapImpl().addControl(this.profil_);var t=function(t){this.pt&&("over"==t.type?(this.pt.setGeometry(new ol.geom.Point(t.coord)),this.pt.setStyle([new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ff0000"})})})])):this.pt.setStyle([]))}.bind(this);this.sourceProfile_.once("change",function(t){"ready"===this.sourceProfile_.getState()&&(this.profil_.setGeometry(this.sourceProfile_.getFeatures()[0]),this.pt=new ol.Feature(new ol.geom.Point([0,0])),this.pt.setStyle([]),this.source_.addFeature(this.pt))}.bind(this)),this.profil_.on(["over","out"],function(e){"over"==e.type&&this.profil_.popup(e.coord[2]+" m"),t(e)}.bind(this))}this.profil_.show()}},{key:"deactivate",value:function(){this.draw_&&(this.facadeMap_.getMapImpl().removeInteraction(this.draw_),this.clearLayer(),document.querySelector("#m-topographicprofile-btn").classList.remove("activated"))}},{key:"clearLayer",value:function(){this.source_.clear(),this.profil_&&(this.profil_.hide(),this.sourceProfile_.clear(),this.facadeMap_.getMapImpl().removeControl(this.profil_),this.profil_=null)}},{key:"removeLayer",value:function(){this.deactivate(),this.clearLayer(),this.facadeMap_.getMapImpl().removeLayer(this.vector_)}},{key:"destroy",value:function(){this.removeLayer(),this.facadeMap_.getMapImpl().removeControl(this)}},{key:"toggle",value:function(){this.profil_&&this.profil_.toggle()}}])&&m(e.prototype,o),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(),S=o(2),x=o.n(S);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,r=void 0,r=function(t,e){if("object"!==j(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===j(r)?r:String(r)),n)}var i,r}function T(){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=E(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:o):i.value}}).apply(this,arguments)}function E(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=R(t);if(e){var i=R(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return C(this,o)}}function C(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(r,M.Control);var e,o,n,i=L(r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),M.utils.isUndefined(P)&&M.exception("La implementación usada no puede crear controles TopographicprofileControl");var e=new P(t);return i.call(this,e,"Topographicprofile")}return e=r,(o=[{key:"createView",value:function(t){var e=this;return M.template.compileSync||(M.template.compileSync=function(t,e){var o,n={};M.utils.isUndefined(e)||(n=M.utils.extends(n,e.vars),o=e.parseToHtml);var i=Handlebars.compile(t)(n);return!1!==o?M.utils.stringToHtml(i):i}),this.facadeMap_=t,new Promise((function(t,o){var n=M.template.compileSync(x.a);e.template_=n,n.querySelector("#m-topographicprofile-btn").title=u("title"),t(n)}))}},{key:"getActivationButton",value:function(t){return t.querySelector("#m-topographicprofile-btn")}},{key:"deactivate",value:function(){T(R(r.prototype),"deactivate",this).call(this)}},{key:"equals",value:function(t){return t instanceof r}}])&&O(e.prototype,o),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(),F=o(3);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,r=void 0,r=function(t,e){if("object"!==A(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===A(r)?r:String(r)),n)}var i,r}function I(t,e){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=q(t);if(e){var i=q(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return N(this,o)}}function N(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(l,M.Plugin);var e,o,n,i=B(l);function l(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(this,l),(t=i.call(this)).map_=null,t.controls_=[],t.position_=e.position?e.position:"TR",t.metadata_=F.metadata,t.facadeMap_=null,t.panel_=null,t.control_=null,t.options_=e,t.options_.distance=e.distance||30,t.options_.visible=!e.hasOwnProperty("visible")||e.visible,t}return e=l,n=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?r:a:M.language.getTranslation(t).topographicprofile}}],(o=[{key:"addTo",value:function(t){this.controls_.push(new z(this.options_)),this.map_=t,this.panel_=new M.ui.Panel("panelTopographicprofile",{className:"m-topographicprofile",collapsedButtonClass:"icon-chart",position:M.ui.position[this.position_],tooltip:u("tooltip")}),this.panel_.addControls(this.controls_),t.addPanels(this.panel_),this.options_.visible||setTimeout((function(){document.querySelector("#m-topographicprofile-btn").click(),document.getElementsByClassName("m-topographicprofile")[0].style.setProperty("display","none","important")}),50)}},{key:"setDataFromLocal",value:function(t){this.controls_[0].impl_.setDataFromLocal(t)}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_)}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_);var t=[null,null,null];this.map_=t[0],this.controls_=t[1],this.panel_=t[2]}},{key:"name",get:function(){return"topographicprofile"}}])&&G(e.prototype,o),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Topographicprofile=U,window.M.control.Topographicprofilecontrol=z,window.M.impl.control.TopographicprofileControl=P}]);
//# sourceMappingURL=topographicprofile-1.1.0.ol.min.js.map