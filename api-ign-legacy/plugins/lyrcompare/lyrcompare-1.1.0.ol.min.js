!function(e){var t={};function r(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e){e.exports=JSON.parse('{"tooltip":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layehrs","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyr1Select_tooltip":"Select layer on the first position","lyr2Select_tooltip":"Select layer on the second position","lyr3Select_tooltip":"Select layer on the third position","lyr4Select_tooltip":"Select layer on the fourth position","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","lyrcompare_obsolete":"Message to developer: M.plugin.LyrCompare has been deprecated, please use M.plugin.Comparators instead"}')},function(e){e.exports=JSON.parse('{"tooltip":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyr1Select_tooltip":"Selecciona la capa de la posición 1","lyr2Select_tooltip":"Selecciona la capa de la posición 2","lyr3Select_tooltip":"Selecciona la capa de la posición 3","lyr4Select_tooltip":"Selecciona la capa de la posición 4","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","lyrcompare_obsolete":"Mensaje para el desarrollador: M.plugin.LyrCompare ha quedado obsoleto, utilice en su lugar M.plugin.Comparators"}')},function(e,t){e.exports='<div id="div-contenedor" class="m-lyrcompare-container">\n    <div id="m-lyrcompare-titulo">{{translations.tooltip}}</div>\n    <div class="div-m-lyrcompare-panel">\n        <div class="m-lyrcompare-effect-buttoms">\n            <button id="m-lyrcompare-vcurtain" class="big-buttom" title="{{translations.tooltip_vcurtain}}"><i class="lyrcompare-icon-columns"></i></button>\n            <button id="m-lyrcompare-hcurtain" class="big-buttom" title="{{translations.tooltip_hcurtain}}"><i class="lyrcompare-icon-columns-rotate"></i></button>\n            <button id="m-lyrcompare-multicurtain" class="big-buttom" title="{{translations.tooltip_multicurtain}}"><i class="lyrcompare-icon-th-large"></i></button>\n        </div>\n        <div class="div-m-lyrcompare-transparent-opacity">\n            <label for="input-transparent-opacity" title="{{translations.opacity_tooltip}}">{{translations.opacity}}: </label>\n            <input type="range" min="0" max="100" value="100" id="input-transparent-opacity" title="{{translations.opacity_tooltip}}"></input>\n        </div>\n        <div class="div-m-lyrcompare-transparent-static">\n            <input type="radio" id="div-m-lyrcompare-transparent-dynamic" name="staticDivision" value="0"><label for="div-m-lyrcompare-transparent-dynamic" title="{{translations.dynamic_tooltip}}">{{translations.dynamic}}</label>\n            <input type="radio" id="div-m-lyrcompare-transparent-static" name="staticDivision" value="1"><label for="div-m-lyrcompare-transparent-static" title="{{translations.static_tooltip}}">{{translations.static}}</label>\n            <input type="radio" id="div-m-lyrcompare-transparent-mixed" name="staticDivision" value="2"><label for="div-m-lyrcompare-transparent-mixed" title="{{translations.mixed_tooltip}}">{{translations.mixed}}</label>\n        </div>\n        <hr />\n        {{#if options}}\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrA-cont">\n                <label id="m-lyrcompare-lyrA-lbl" for="m-lyrcompare-lyrA" title="{{translations.lyr1Select_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrA">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow"></div>\n            </div>\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrB-cont">\n                <label id="m-lyrcompare-lyrB-lbl" for="m-lyrcompare-lyrB" title="{{translations.lyr2Select_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrB">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow">\n                </div>\n            </div>\n            \x3c!--Multi Curtain--\x3e\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrC-cont">\n                <label id="m-lyrcompare-lyrC-lbl" for="m-lyrcompare-lyrC" title="{{translations.lyr3Select_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrC">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow"></div>\n            </div>\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrD-cont">\n                <label id="m-lyrcompare-lyrD-lbl" for="m-lyrcompare-lyrD" title="{{translations.lyr4Select_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrD">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow">\n                </div>\n            </div>\n        {{/if}}\n    </div>\n</div>'},function(e){e.exports=JSON.parse('{"url":{"name":"lyrcompare","separator":"*!"},"constructor":"M.plugin.LyrCompare","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","possibleValues":["TL","TR","BL","BR"],"position":0},{"type":"simple","name":"layers","position":1},{"type":"boolean","name":"collapsible","position":2},{"type":"boolean","name":"collapsed","position":3},{"type":"simple","name":"staticDivision","position":4},{"type":"simple","name":"opacityVal","position":5},{"type":"simple","name":"comparisonMode","position":6},{"type":"simple","name":"defaultLyrA","position":7},{"type":"simple","name":"defaultLyrB","position":8},{"type":"simple","name":"defaultLyrC","position":9},{"type":"simple","name":"defaultLyrD","position":10},{"type":"boolean","name":"interface","position":11}]}],"files":{"ol":{"scripts":["lyrcompare.ol.min.js"],"styles":["lyrcompare.ol.min.css"]}},"metadata":{"name":"LyrCompare","description":"Comparación entre capas","text":"Plugin que permite comparar varias capas sobre una cartografía base. La extensión de las capas sobre lienzo vienen definidas por la posición del ratón o por el punto medio del lienzo.","version":"1.1.0","date":"Abril, 2020","author":"","org":"Centro Nacional de Información Geográfica - Instituto Geográfico Nacional. Ministerio de Transportes, Mobilidad y Agenda Urbana","tags":"apicnig,plugin","icon":"./facade/assets/icons/icons.svg"}}')},function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(4);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(n=o.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===i(a)?a:String(a)),o)}var n,a}function n(){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=a(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,ol.interaction.Pointer);var t,r,i,a=s(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).layers_=[],t.swipeClicked=!1,ol.interaction.Pointer.call(p(t),{handleDownEvent:t.setPosition,handleUpEvent:function(){return t.swipeClicked=!1},handleMoveEvent:t.setPosition});var r=e||{};t.pos=!1,t.opacityVal=r.opacityVal||100;var i=[r.lyrA].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));t.addLayerA(i);var o=[r.lyrB].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));if(t.addLayerB(o),void 0!==r.lyrC&&void 0!==r.lyrD){var n=[r.lyrC].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));t.addLayerC(n);var l=[r.lyrD].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));t.addLayerD(l)}return t}return t=c,(r=[{key:"setMap",value:function(e){if(this.getMap()){for(var t=0;t<this.layers_.length;t+=1)this.layers_[t].prerender&&ol.Observable.unByKey(this.layers_[t].prerender),this.layers_[t].postrender&&ol.Observable.unByKey(this.layers_[t].postrender),this.layers_[t].prerender=this.layers_[t].postrender=null;this.getMap().renderSync()}ol.interaction.Pointer.prototype.setMap.call(this,e),e&&(this.createSwipeControl(),this.layers_[0].prerender=this.layers_[0].on("prerender",this.prerenderA_.bind(this)),this.layers_[0].postrender=this.layers_[0].on("postrender",this.postrenderA_.bind(this)),this.layers_[1].prerender=this.layers_[1].on("prerender",this.prerenderB_.bind(this)),this.layers_[1].postrender=this.layers_[1].on("postrender",this.postrenderB_.bind(this)),void 0!==this.layers_[2]&&void 0!==this.layers_[3]&&(this.layers_[2].prerender=this.layers_[2].on("prerender",this.prerenderC_.bind(this)),this.layers_[2].postrender=this.layers_[2].on("postrender",this.postrenderC_.bind(this)),this.layers_[3].prerender=this.layers_[3].on("prerender",this.prerenderD_.bind(this)),this.layers_[3].postrender=this.layers_[3].on("postrender",this.postrenderD_.bind(this))),e.renderSync())}},{key:"setOpacity",value:function(e){if(this.opacityVal=e,this.getMap())for(var t=0;t<this.layers_.length;t+=1)this.layers_[t].setOpacity(this.opacityVal/100)}},{key:"setStaticDivision",value:function(e){this.staticDivision=e,this.updatePosition()}},{key:"setComparisonMode",value:function(e){this.comparisonMode=e,this.updatePosition()}},{key:"setVisibilityLayersCD",value:function(){void 0===this.layers_[2]||void 0===this.layers_[3]||1!==this.comparisonMode&&2!==this.comparisonMode?void 0!==this.layers_[2]&&void 0!==this.layers_[3]&&(this.layers_[2].setVisible(!0),this.layers_[3].setVisible(!0)):(this.layers_[2].setVisible(!1),this.layers_[3].setVisible(!1))}},{key:"addLayerA",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.prerenderA_.bind(this)),t.postrender=e[0].on("postrender",this.postrenderA_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"addLayerB",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.prerenderB_.bind(this)),t.postrender=e[0].on("postrender",this.postrenderB_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"addLayerC",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.prerenderC_.bind(this)),t.postrender=e[0].on("postrender",this.postrenderC_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"addLayerD",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.prerenderD_.bind(this)),t.postrender=e[0].on("postrender",this.postrenderD_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"removeLayer",value:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t+=1){var r=void 0;for(r=0;r<this.layers_.length&&this.layers_[r]!==e[t];r+=1);r!==this.layers_.length&&this.getMap()&&(this.layers_[r].prerender&&ol.Observable.unByKey(this.layers_[r].prerender),this.layers_[r].postrender&&ol.Observable.unByKey(this.layers_[r].postrender),this.layers_.splice(r,1),this.getMap().renderSync())}}},{key:"setPosition",value:function(e){if(2===this.staticDivision&&this.swipeClicked||2!==this.staticDivision){if(e.pixel?this.pos=e.pixel:e&&e instanceof Array?this.pos=e:e=[-1e7,-1e7],2===this.staticDivision&&1!==e.pointerEvent.buttons){var t=this.map_.getSize();this.pos=[t[0]/2,t[1]/2],this.swipeClicked=!1}this.getMap()&&this.getMap().renderSync(),this.moveSwipeControl()}}},{key:"updatePosition",value:function(){var e=document.querySelector(".lyrcompare-swipe-control");if(e&&(1==this.comparisonMode?e.classList="lyrcompare-swipe-control vertical"+(1==this.staticDivision?" static":" dynamic"):2==this.comparisonMode?e.classList="lyrcompare-swipe-control horizontal"+(1==this.staticDivision?" static":" dynamic"):3==this.comparisonMode&&(e.classList="lyrcompare-swipe-control vertical horizontal"+(1==this.staticDivision?" static":" dynamic"))),this.getMap()){var t=this.map_.getSize();e.style.left=t[0]/2-e.offsetWidth/2+"px",e.style.top=t[1]/2-e.offsetHeight/2+"px",this.pos=[t[0]/2,t[1]/2],this.swipeClicked=!1,this.getMap().renderSync()}}},{key:"prerenderA_",value:function(e){var t=e.context,r=e.frameState.pixelRatio,i=this.map_.getSize();t.save(),t.beginPath(),1==this.staticDivision?1==this.comparisonMode?t.rect(0,0,i[0]/2*r-0*r,i[1]):2==this.comparisonMode?t.rect(0,0,i[0],i[1]*r/2-0*r):3==this.comparisonMode&&t.rect(0,0,i[0]/2*r-0*r,i[1]/2):1==this.comparisonMode?t.rect(0,0,this.pos[0]-0*r,i[1]):2==this.comparisonMode?t.rect(0,0,t.canvas.width,this.pos[1]*r-0*r):3==this.comparisonMode&&t.rect(0,0,this.pos[0]-0*r,this.pos[1]-0*r),t.clip()}},{key:"postrenderA_",value:function(e){e.context.restore()}},{key:"prerenderB_",value:function(e){var t=e.context,r=e.frameState.pixelRatio,i=this.map_.getSize();t.save(),t.beginPath(),1==this.staticDivision?1==this.comparisonMode?t.rect(i[0]*r/2+0*r,0,t.canvas.width-i[0]*r/2,i[1]):2==this.comparisonMode?t.rect(0,i[1]*r/2+0*r,t.canvas.width,t.canvas.height-i[1]*r/2):3==this.comparisonMode&&t.rect(i[0]*r/2,0,t.canvas.width-i[0]*r/2,i[1]/2):1==this.comparisonMode?t.rect(this.pos[0],0,i[0]-this.pos[0],i[1]):2==this.comparisonMode?t.rect(0,this.pos[1],t.canvas.width,t.canvas.height-this.pos[1]):3==this.comparisonMode&&t.rect(this.pos[0],0,i[0]-this.pos[0],this.pos[1]),t.clip()}},{key:"postrenderB_",value:function(e){e.context.restore()}},{key:"prerenderC_",value:function(e){var t=e.context,r=e.frameState.pixelRatio,i=this.map_.getSize();t.save(),t.beginPath(),1==this.staticDivision?3==this.comparisonMode&&t.rect(0,i[1]*r/2,i[0]/2*r-0*r,i[1]):3==this.comparisonMode&&t.rect(0,this.pos[1]*r,this.pos[0]*r-0*r,(i[1]-this.pos[1])*r-0*r),t.clip()}},{key:"postrenderC_",value:function(e){e.context.restore()}},{key:"prerenderD_",value:function(e){var t=e.context,r=e.frameState.pixelRatio,i=this.map_.getSize();t.save(),t.beginPath(),1==this.staticDivision?3==this.comparisonMode&&t.rect(i[0]*r/2,i[1]*r/2,t.canvas.width*r/2-0*r,t.canvas.height*r/2-0*r):3==this.comparisonMode&&t.rect(this.pos[0]*r,this.pos[1]*r,(t.canvas.width-this.pos[0])*r-0*r,(t.canvas.height-this.pos[1])*r-0*r),t.clip()}},{key:"postrenderD_",value:function(e){e.context.restore()}},{key:"createSwipeControl",value:function(){var e,t,r=this;null==document.querySelector(".lyrcompare-swipe-control")?((e=document.createElement("div")).classList.add("lyrcompare-swipe-control"),(t=document.createElement("div")).classList.add("control-icon"),e.append(t),document.querySelector(".ol-overlaycontainer-stopevent").append(e)):(e=document.querySelector(".lyrcompare-swipe-control"),t=document.querySelector(".lyrcompare-swipe-control .control-icon")),e.addEventListener("mousedown",(function(){return r.swipeClicked=!0})),e.addEventListener("mouseup",(function(){return r.swipeClicked=!1})),e.addEventListener("touchstart",(function(){return r.swipeClicked=!0})),e.addEventListener("touchend",(function(){return r.swipeClicked=!1})),this.updatePosition()}},{key:"moveSwipeControl",value:function(){var e=this.map_.getSize(),t=document.querySelector(".lyrcompare-swipe-control");t&&this.getMap()&&(0==this.staticDivision||2==this.staticDivision?1==this.comparisonMode?(t.style.top=e[1]/2-t.offsetHeight/2+"px",t.style.left=this.pos[0]-t.offsetWidth/2+"px"):2==this.comparisonMode?(t.style.left=e[0]/2-t.offsetWidth/2+"px",t.style.top=this.pos[1]-t.offsetHeight/2+"px"):3==this.comparisonMode&&(t.style.left=this.pos[0]-t.offsetWidth/2+"px",t.style.top=this.pos[1]-t.offsetHeight/2+"px"):(t.style.left=e[0]/2-t.offsetWidth/2+"px",t.style.top=e[1]/2-t.offsetHeight/2+"px"))}},{key:"setActive",value:function(e){n(y(c.prototype),"setActive",this).call(this,e)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,n=void 0,n=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===d(n)?n:String(n)),i)}var o,n}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=v(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(n,M.impl.Control);var t,r,i,o=S(n);function n(){return m(this,n),o.apply(this,arguments)}return t=n,(r=[{key:"addTo",value:function(e,t){this.map=e,this.olMap=e.getMapImpl(),h(g(n.prototype),"addTo",this).call(this,e,t)}},{key:"effectSelectedCurtain",value:function(e,t,r,i,o,n,a){e.setVisible(!0),t.setVisible(!0),this.transparentInteraction_=new u({opacityVal:o,lyrA:e,lyrB:t,lyrC:r,lyrD:i}),this.olMap.addInteraction(this.transparentInteraction_),this.setOpacity(o),this.setComparisonMode(a),this.setStaticDivision(n)}},{key:"setVisibilityLayersCD",value:function(){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setVisibilityLayersCD()}},{key:"setOpacity",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setOpacity(e)}},{key:"setComparisonMode",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setComparisonMode(e),this.setVisibilityLayersCD()}},{key:"setStaticDivision",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setStaticDivision(e)}},{key:"addLayer",value:function(e){this.transparentInteraction_.addLayer(e.getImpl().getOL3Layer())}},{key:"removeEffectsCurtain",value:function(){this.olMap.removeInteraction(this.transparentInteraction_)}},{key:"removeLayer",value:function(e){this.transparentInteraction_.removeLayer(e.getImpl().getOL3Layer())}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}(),w=r(2),C=r.n(w),D=r(0),O=r(1),A={en:D,es:O},k=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},B=function(e){return"es"===e||"en"===e?A[e]:M.language.getTranslation(e).lyrcompare},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k(),r=B(t),i="";return M.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(t,"' has not been defined.")):i=e.split(".").reduce((function(e,t){return e[t]}),r),i};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function V(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,n=void 0,n=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==P(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===P(n)?n:String(n)),i)}var o,n}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Array.prototype.unique=function(e){return function(){return this.filter(e)}}((function(e,t,r){return r.indexOf(e,t+1)<0}));var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(n,M.Control);var t,r,i,o=I(n);function n(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),M.utils.isUndefined(L)&&M.exception("La implementación usada no puede crear controles LyrCompareControl");var r=new L;return(t=o.call(this,r,"LyrCompare")).layers=e.layers,t.collapsible=e.collapsible,t.collapsed=e.collapsed,t.opacityVal=e.opacityVal,t.layerSelectedA=null,t.layerSelectedB=null,t.layerSelectedC=null,t.layerSelectedD=null,t.template=null,t.staticDivision=e.staticDivision,t.opacityVal=e.opacityVal,t.comparisonMode=e.comparisonMode,t.defaultLyrA=e.defaultLyrA,t.defaultLyrB=e.defaultLyrB,t.defaultLyrC=e.defaultLyrC,t.defaultLyrD=e.defaultLyrD,t}return t=n,(r=[{key:"createView",value:function(e){var t=this;return console.warn(j("lyrcompare_obsolete")),this.comparisonMode>0&&this.on(M.evt.ADDED_TO_MAP,(function(e){t.activateCurtain()})),this.map=e,new Promise((function(e,r){if(t.layers=t.transformToLayers(t.layers),t.layers.length>=2){3===t.comparisonMode&&t.layers.length<4&&(M.dialog.error(j("no_layers_plugin"),"lyrcompare"),t.comparisonMode=0);var i=t.allLayerLoad();if(i)t.setFunctionsAndCompile(e);else var o=setInterval((function(){(i=t.allLayerLoad())&&(clearInterval(o),t.setFunctionsAndCompile(e))}),200)}else M.dialog.error(j("no_layers_plugin"),"lyrcompare")}))}},{key:"setFunctionsAndCompile",value:function(e){var t=this,r={jsonp:!0,vars:{options:this.layers.map((function(e){return e instanceof Object?{name:e.name,legend:e.legend}:{name:e,legend:e}})),comparisonMode:this.comparisonMode,translations:{tooltip:j("tooltip"),tooltip_vcurtain:j("tooltip_vcurtain"),tooltip_hcurtain:j("tooltip_hcurtain"),tooltip_multicurtain:j("tooltip_multicurtain"),opacity:j("opacity"),static:j("static"),dynamic:j("dynamic"),mixed:j("mixed"),layer:j("layer"),opacity_tooltip:j("opacity_tooltip"),static_tooltip:j("static_tooltip"),dynamic_tooltip:j("dynamic_tooltip"),mixed_tooltip:j("mixed_tooltip"),lyr1Select_tooltip:j("lyr1Select_tooltip"),lyr2Select_tooltip:j("lyr2Select_tooltip"),lyr3Select_tooltip:j("lyr3Select_tooltip"),lyr4Select_tooltip:j("lyr4Select_tooltip")}}};return this.template=M.template.compileSync(C.a,r),this.setEventsAndValues(),this.updateControls(),0==this.layers.length?M.dialog.error(j("no_layers_plugin")):this.template.querySelectorAll('button[id^="m-lyrcompare-"]').forEach((function(e,r){e.addEventListener("click",(function(e){return 0===t.comparisonMode?(t.comparisonMode=r+1,void t.activateCurtain()):t.comparisonMode===r+1?(t.comparisonMode=0,void t.deactivateCurtain()):(t.comparisonMode=r+1,t.updateControls(),void t.getImpl().setComparisonMode(t.comparisonMode))}))})),e(this.template)}},{key:"setEventsAndValues",value:function(){var e=this;this.template.querySelector("#input-transparent-opacity").value=this.opacityVal,this.template.querySelector("#input-transparent-opacity").addEventListener("input",(function(t){e.opacityVal=Number(t.target.value),e.getImpl().setOpacity(e.opacityVal)})),1===this.staticDivision?this.template.querySelector("#div-m-lyrcompare-transparent-static").checked=!0:0===this.staticDivision?this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").checked=!0:this.template.querySelector("#div-m-lyrcompare-transparent-mixed").checked=!0,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelector("#div-m-lyrcompare-transparent-static").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelector("#div-m-lyrcompare-transparent-mixed").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(t){t.addEventListener("change",(function(r){var i=e.layers.filter((function(e){return e.name===r.target.value})),o=[];if("m-lyrcompare-lyrA"===t.id?o=[i[0].name,e.layerSelectedB.name,e.layerSelectedC.name,e.layerSelectedD.name]:"m-lyrcompare-lyrB"===t.id?o=[e.layerSelectedA.name,i[0].name,e.layerSelectedC.name,e.layerSelectedD.name]:"m-lyrcompare-lyrC"===t.id?o=[e.layerSelectedA.name,e.layerSelectedB.name,i[0].name,e.layerSelectedD.name]:"m-lyrcompare-lyrD"===t.id&&(o=[e.layerSelectedA.name,e.layerSelectedB.name,e.layerSelectedC.name,i[0].name]),!1===e.checkLayersAreDifferent.apply(e,q(o)))return M.dialog.info(j("advice_sameLayer")),"m-lyrcompare-lyrA"===t.id?e.template.querySelector("#"+t.id).value=e.layerSelectedA.name:"m-lyrcompare-lyrB"===t.id?e.template.querySelector("#"+t.id).value=e.layerSelectedB.name:"m-lyrcompare-lyrC"===t.id?e.template.querySelector("#"+t.id).value=e.layerSelectedC.name:"m-lyrcompare-lyrD"===t.id&&(e.template.querySelector("#"+t.id).value=e.layerSelectedD.name),!1;"m-lyrcompare-lyrA"===t.id?(i[0].name===e.layerSelectedC.name&&(e.layerSelectedC.setVisible(!1),e.layerSelectedC=e.layerSelectedA,e.template.querySelector("#m-lyrcompare-lyrC").value=e.layerSelectedA.name),i[0].name===e.layerSelectedD.name&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=e.layerSelectedA,e.template.querySelector("#m-lyrcompare-lyrD").value=e.layerSelectedA.name)):"m-lyrcompare-lyrB"===t.id&&(i[0].name===e.layerSelectedC.name&&(e.layerSelectedC.setVisible(!1),e.layerSelectedC=e.layerSelectedB,e.template.querySelector("#m-lyrcompare-lyrC").value=e.layerSelectedB.name),i[0].name===e.layerSelectedD.name&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=e.layerSelectedB,e.template.querySelector("#m-lyrcompare-lyrD").value=e.layerSelectedB.name)),"m-lyrcompare-lyrA"===t.id?(e.layerSelectedA.setVisible(!1),e.layerSelectedA=i[0]):"m-lyrcompare-lyrB"===t.id?(e.layerSelectedB.setVisible(!1),e.layerSelectedB=i[0]):"m-lyrcompare-lyrC"===t.id?(e.layerSelectedC.setVisible(!1),e.layerSelectedC=i[0]):"m-lyrcompare-lyrD"===t.id&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=i[0]),e.removeEffectsComparison(),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode)}))}))}},{key:"checkLayersAreDifferent",value:function(e,t,r,i){if(1===this.comparisonMode||2===this.comparisonMode){if(e===t)return!1}else{var o=[e,t,r,i];if(o.length!==o.unique().length)return!1}return!0}},{key:"activateCurtain",value:function(){this.activeDefault(),this.getImpl().effectSelectedCurtain(this.layerSelectedA,this.layerSelectedB,this.layerSelectedC,this.layerSelectedD,this.opacityVal,this.staticDivision,this.comparisonMode),this.updateControls()}},{key:"activeDefault",value:function(){null===this.layerSelectedA&&(this.layerSelectedA=this.layers[this.defaultLyrA],this.template.querySelector("#m-lyrcompare-lyrA").selectedIndex=this.defaultLyrA),null===this.layerSelectedB&&(this.layerSelectedB=this.layers[this.defaultLyrB],this.template.querySelector("#m-lyrcompare-lyrB").selectedIndex=this.defaultLyrB),null===this.layerSelectedC&&(this.layerSelectedC=this.layers[this.defaultLyrC],this.template.querySelector("#m-lyrcompare-lyrC").selectedIndex=this.defaultLyrC),null===this.layerSelectedD&&(this.layerSelectedD=this.layers[this.defaultLyrD],this.template.querySelector("#m-lyrcompare-lyrD").selectedIndex=this.defaultLyrD)}},{key:"deactivateCurtain",value:function(){this.comparisonMode=0,null!==this.layerSelectedA&&null!==this.layerSelectedB&&(this.layerSelectedA.setVisible(!1),this.layerSelectedB.setVisible(!1)),null!==this.layerSelectedC&&null!==this.layerSelectedD&&void 0!==this.layerSelectedC&&void 0!==this.layerSelectedD&&(this.layerSelectedC.setVisible(!1),this.layerSelectedD.setVisible(!1)),this.removeEffectsComparison(),this.updateControls()}},{key:"removeEffectsComparison",value:function(){this.getImpl().removeEffectsCurtain()}},{key:"updateControls",value:function(){this.removeActivate(),this.activateByMode();var e=document.querySelector(".lyrcompare-swipe-control");if(0==this.comparisonMode)return this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(e){e.disabled=!0})),void(this.template.querySelector("input").disabled=!0);1===this.comparisonMode?(e&&(e.style.opacity="1"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("lyrcompare-icon-columns-2"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("lyrcompare-icon-columns-1"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrA").disabled=!1,this.template.querySelector("#m-lyrcompare-lyrB").disabled=!1):2===this.comparisonMode?(e&&(e.style.opacity="1"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("lyrcompare-icon-columns-4"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("lyrcompare-icon-columns-3"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrA").disabled=!1,this.template.querySelector("#m-lyrcompare-lyrB").disabled=!1):3===this.comparisonMode&&(e&&(e.style.opacity="1"),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(e){e.disabled=!1})),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("lyrcompare-icon-th-large-1"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("lyrcompare-icon-th-large-2"),this.template.querySelector("#m-lyrcompare-lyrC-lbl").classList.add("lyrcompare-icon-th-large-3"),this.template.querySelector("#m-lyrcompare-lyrD-lbl").classList.add("lyrcompare-icon-th-large-4"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrC-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrD-cont").style.display="block"),this.template.querySelector("input").disabled=!1}},{key:"activateByMode",value:function(){1===this.comparisonMode?this.template.querySelector("#m-lyrcompare-vcurtain").classList.add("buttom-pressed-vcurtain"):2===this.comparisonMode?this.template.querySelector("#m-lyrcompare-hcurtain").classList.add("buttom-pressed-hcurtain"):3===this.comparisonMode&&this.template.querySelector("#m-lyrcompare-multicurtain").classList.add("buttom-pressed-multicurtain")}},{key:"removeActivate",value:function(){this.template.querySelector("#m-lyrcompare-vcurtain").classList.remove("buttom-pressed-vcurtain"),this.template.querySelector("#m-lyrcompare-hcurtain").classList.remove("buttom-pressed-hcurtain"),this.template.querySelector("#m-lyrcompare-multicurtain").classList.remove("buttom-pressed-multicurtain"),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').disabled=!0,this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrC-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrD-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList="",this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList="";var e=document.querySelector(".lyrcompare-swipe-control");e&&(e.style.opacity="0")}},{key:"removeCurtainLayers",value:function(e){var t=this;e.forEach((function(e){if(e instanceof Object){if(e instanceof Object){var r=t.map.getLayers().filter((function(t){return e.name.includes(t.name)}))[t.map.getLayers().filter((function(t){return e.name.includes(t.name)})).length-1];t.map.removeLayers(r)}}else if(e.indexOf("*")>=0){var i=e.split("*")[3],o=t.map.getLayers().filter((function(e){return i.includes(e.name)}))[t.map.getLayers().filter((function(e){return i.includes(e.name)})).length-1];t.map.removeLayers(o)}else{var n=t.map.getLayers().filter((function(t){return e.includes(t.name)}))[t.map.getLayers().filter((function(t){return e.includes(t.name)})).length-1];t.map.removeLayers(n)}}))}},{key:"allLayerLoad",value:function(){return void 0!==this.layers[0].load&&(void 0!==this.layers[1].load||void 0===this.layers[2]||void 0===this.layers[3]||void 0!==this.layers[2].load&&void 0!==this.layers[3].load)}},{key:"transformToLayers",value:function(e){var t=e.map((function(e){var t=null;if(e instanceof Object){if(e instanceof Object){var r=this.map.getLayers().filter((function(t){return e.name.includes(t.name)}))[0];t=this.isValidLayer(r)?r:null}}else if(e.indexOf("*")>=0){var i=e.split("*");"WMS"==i[0].toUpperCase()?(t=new M.layer.WMS({url:i[2],name:i[3]}),this.map.getLayers().filter((function(e){return t.name.includes(e.name)})).length>0&&this.map.removeLayers(this.map.getLayers().filter((function(e){return t.name.includes(e.name)}))[0]),this.map.addLayers(t)):"WMTS"==i[0].toUpperCase()&&(t=new M.layer.WMTS({url:i[1],name:i[2]}),this.map.addLayers(t))}else{var o=this.map.getLayers().filter((function(t){return e.includes(t.name)}))[0];t=this.isValidLayer(o)?o:null}if(null!==t)return null===t.getImpl().getOL3Layer()?setTimeout((function(){"WMS"===t.type?t.load=!0:"WMTS"===t.type&&(t.facadeLayer_.load=!0)}),1e3):t.load=!0,t.displayInLayerSwitcher=!1,t.setVisible(!1),t;this.layers.remove(e)}),this);return void 0===t[0]?[]:t}},{key:"isValidLayer",value:function(e){return"WMTS"===e.type||"WMS"===e.type}},{key:"equals",value:function(e){return e instanceof n}},{key:"getLayersNames",value:function(){return this.layers.map((function(e){return e.name}))}}])&&V(t.prototype,r),i&&V(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}(),z=r(3);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,n=void 0,n=function(e,t){if("object"!==W(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==W(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===W(n)?n:String(n)),i)}var o,n}function J(e,t){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=G(e);if(t){var o=G(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(n,M.Plugin);var t,r,i,o=K(n);function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(H(this,n),(e=o.call(this)).name_="lyrcompare",e.error_=!1,e.layers=[],void 0===t.layers||t.layers.length<2?(M.dialog.error(j("no_layers_plugin"),"lyrcompare"),e.error_=!0):Array.isArray(t.layers)?e.layers=t.layers:e.layers=t.layers.split(","),e.controls_=[],e.map_=null,!1===e.error_){var r=["TR","TL","BL","BR"];e.position=r.includes(t.position)?t.position:"TR",e.collapsed=t.collapsed,void 0===e.collapsed&&(e.collapsed=!0),e.collapsible=t.collapsible,void 0===e.collapsible&&(e.collapsible=!0),e.staticDivision=void 0===t.staticDivision?1:parseInt(t.staticDivision),void 0===t.opacityVal?e.opacityVal=100:(e.opacityVal=parseInt(t.opacityVal),e.opacityVal<=0?e.opacityVal=0:e.opacityVal>=100&&(e.opacityVal=100)),void 0===t.comparisonMode?e.comparisonMode=0:(e.comparisonMode=parseInt(t.comparisonMode),(e.comparisonMode<=0||e.comparisonMode>3)&&(e.comparisonMode=0)),e.metadata_=z.metadata,e.tooltip_=t.tooltip||j("tooltip"),void 0===t.defaultLyrA?e.defaultLyrA=0:e.defaultLyrA=parseInt(t.defaultLyrA),void 0===t.defaultLyrB?e.defaultLyrB=0!==e.defaultLyrA?0:1:e.defaultLyrB=parseInt(t.defaultLyrB),e.defaultLyrA===e.defaultLyrB&&(M.dialog.error(j("repeated_layers"),"lyrcompare"),e.error_=!0),void 0===t.defaultLyrC?e.defaultLyrC=2:e.defaultLyrC=parseInt(t.defaultLyrC),e.defaultLyrA!==e.defaultLyrC&&e.defaultLyrB!==e.defaultLyrC||(M.dialog.error(j("repeated_layers"),"lyrcompare"),e.error_=!0),void 0===t.defaultLyrD?e.defaultLyrD=3:e.defaultLyrD=parseInt(t.defaultLyrD),e.defaultLyrA!==e.defaultLyrD&&e.defaultLyrB!==e.defaultLyrD&&e.defaultLyrC!==e.defaultLyrD||(M.dialog.error(j("repeated_layers"),"lyrcompare"),e.error_=!0)}return e}return t=n,i=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?D:O:M.language.getTranslation(e).lyrcompare}}],(r=[{key:"addTo",value:function(e){this.map_=e;var t={layers:this.layers,collapsible:this.collapsible,collapsed:this.collapsed,staticDivision:this.staticDivision,opacityVal:this.opacityVal,comparisonMode:this.comparisonMode,defaultLyrA:this.defaultLyrA,defaultLyrB:this.defaultLyrB,defaultLyrC:this.defaultLyrC,defaultLyrD:this.defaultLyrD};this.control_=new N(t),this.controls_.push(this.control_),this.error_?0!==e.getPlugins("lyrcompare").length&&e.removePlugins(e.getPlugins("lyrcompare")):(this.panel_=new M.ui.Panel("panelLyrcompare",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position],className:"m-plugin-lyrcompare",collapsedButtonClass:"lyrcompare-icon",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_))}},{key:"destroy",value:function(){this.deactivate();var e=document.querySelector(".lyrcompare-swipe-control");e&&e.remove(),this.map_.removeControls([this.control_]),this.control_.removeCurtainLayers(this.control_.getLayersNames());var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.name_=t[0],this.error_=t[1],this.layers=t[2],this.controls_=t[3],this.map_=t[4],this.position=t[5],this.collapsed=t[6],this.collapsible=t[7],this.staticDivision=t[8],this.opacityVal=t[9],this.comparisonMode=t[10],this.metadata_=t[11],this.tooltip_=t[12],this.defaultLyrA=t[13],this.defaultLyrB=t[14],this.defaultLyrC=t[15],this.defaultLyrD=t[16]}},{key:"name",get:function(){return this.name_}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*!").concat(this.layers.join(","),"*!").concat(this.collapsible,"*!").concat(this.collapsed,"*!").concat(this.staticDivision,"*!").concat(this.opacityVal,"*!").concat(this.comparisonMode,"*!").concat(this.defaultLyrA,"*!").concat(this.defaultLyrB,"*!").concat(this.defaultLyrC,"*!").concat(this.defaultLyrD)}},{key:"activate",value:function(){this.control_.activateCurtain()}},{key:"deactivate",value:function(){this.control_.deactivateCurtain()}},{key:"equals",value:function(e){return e instanceof n}}])&&U(t.prototype,r),i&&U(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.LyrCompare=$,window.M.control.LyrCompareControl=N,window.M.impl.control.CurtainInteraction=u,window.M.impl.control.Lyrcomparecontrol=L}]);
//# sourceMappingURL=lyrcompare-1.1.0.ol.min.js.map