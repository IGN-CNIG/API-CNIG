!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.u)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.u?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=5)}([function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"title":"Share URL","text":"Embedded HTML","copy":"Copy","tooltip":"Copied!","tooltipPanel":"Share"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"title":"Compartir URL","text":"HTML embebido","copy":"Copiar","tooltip":"¡Copiado!","tooltipPanel":"Compartir"}')},function(t,n){t.exports='<div id="div-contenedor" class="m-control m-container m-sharemap-container">\n    <button id="m-sharemap-geturl">\n        <i class="icon-share-2"></i>\n    </button>\n</div>'},function(t,n){t.exports='<div id="m-plugin-sharemap-dialog" class="m-plugin-sharemap-dialog">\n    <div aria-modal="true" id="m-plugin-sharemap-modal" class="m-plugin-sharemap-modal">\n        <div id="m-plugin-sharemap-content" class="m-plugin-sharemap-content">\n            <div id="m-plugin-sharemap-title" role="heading" class="m-plugin-sharemap-title" aria-label="Modal Plugin Sharemap">\n                <span role="text" tabindex="0">{{{title}}}</span>\n                <div id="m-plugin-sharemap-tooltip" class="m-plugin-sharemap-tooltip">\n                    <span class="m-plugin-sharemap-tooltiptext">\n                        {{tooltip}}\n                    </span>\n                </div>\n            </div>\n            <div role="menu" tabindex="0" aria-label="Menu {{{title}}}" id="m-plugin-sharemap-message" class="m-plugin-sharemap-message">\n                <input tabindex="0" aria-label="{{title}}" type="text" />\n                <button tabindex="0" type="button" aria-label="{{copyBtn}} {{title}}" id="m-plugin-sharemap-copybutton">{{copyBtn}}</button>\n            </div>\n            <div id="m-plugin-sharemap-social" class="m-plugin-sharemap-social">\n                <a role="link" aria-label="link facebook" tabindex="0" id="facebook" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg>\n                </a>\n                <a role="link" aria-label="link twitter" tabindex="0" id="twitter" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" class="svg-inline--fa fa-twitter-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg>\n                </a>\n                <a role="link" aria-label="link pinterest" tabindex="0" id="pinterest" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="pinterest-square" class="svg-inline--fa fa-pinterest-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M448 80v352c0 26.5-21.5 48-48 48H154.4c9.8-16.4 22.4-40 27.4-59.3 3-11.5 15.3-58.4 15.3-58.4 8 15.3 31.4 28.2 56.3 28.2 74.1 0 127.4-68.1 127.4-152.7 0-81.1-66.2-141.8-151.4-141.8-106 0-162.2 71.1-162.2 148.6 0 36 19.2 80.8 49.8 95.1 4.7 2.2 7.1 1.2 8.2-3.3.8-3.4 5-20.1 6.8-27.8.6-2.5.3-4.6-1.7-7-10.1-12.3-18.3-34.9-18.3-56 0-54.2 41-106.6 110.9-106.6 60.3 0 102.6 41.1 102.6 99.9 0 66.4-33.5 112.4-77.2 112.4-24.1 0-42.1-19.9-36.4-44.4 6.9-29.2 20.3-60.7 20.3-81.8 0-53-75.5-45.7-75.5 25 0 21.7 7.3 36.5 7.3 36.5-31.4 132.8-36.1 134.5-29.6 192.6l2.2.8H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z"></path></svg>\n                </a>\n            </div>\n            <div role="heading" id="m-plugin-sharemap-text" class="m-plugin-sharemap-text">\n                <span role="text" tabindex="0">{{{text}}}</span>\n            </div>\n            <div role="menu" tabindex="0" aria-label="Menu {{{text}}}" id="m-plugin-sharemap-html" class="m-plugin-sharemap-html">\n                <input tabindex="0" aria-label="{{{text}}}" type="text" />\n                <button tabindex="0" type="button" aria-label="{{copyBtnHtml}} {{{text}}}" id="m-plugin-sharemap-copybuttonhtml">{{copyBtnHtml}}</button>\n            </div>\n            <div id="m-plugin-sharemap-button" class="m-plugin-sharemap-button">\n                <button type="button" tabindex="0">{{btn}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>\n</div>'},function(t,n,e){},function(t,n,e){"use strict";e.r(n);e(4);var r=e(2),i=e.n(r),o=e(3),a=e.n(o);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o,a,u=[],l=!0,s=!1;try{if(o=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;l=!1}else for(;!(l=(r=o.call(e)).done)&&(u.push(r.value),u.length!==n);l=!0);}catch(t){s=!0,i=t}finally{try{if(!l&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return s(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,n){if("object"!==u(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===u(o)?o:String(o)),r)}var i,o}function f(t,n){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function p(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=m(t);if(n){var i=m(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return h(this,e)}}function h(t,n){if(n&&("object"===u(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){t.classList.contains("m-plugin-sharemap-shade")?t.classList.remove("m-plugin-sharemap-shade"):(t.classList.add("m-plugin-sharemap-shade"),setTimeout((function(){t.classList.remove("m-plugin-sharemap-shade")}),2e3))},v=function(t){var n=t;n.disabled=!1,n.select(),document.execCommand("copy"),n.disabled=!0,document.getSelection().removeAllRanges()},b=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&f(t,n)}(u,M.Control);var n,e,r,o=p(u);function u(t){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,u);var e=new M.impl.Control;return(n=o.call(this,e,"sharemap")).h=t.baseUrl,n.v=t.title,n.g=t.text,n.k=t.btn,n.M=t.copyBtn,n.S=t.copyBtnHtml,n.O=t.primaryColor||"#71a7d3",n.j=t.secondaryColor||"#fff",n.C=[{id:".m-plugin-sharemap-content button",styles:{backgroundColor:"".concat(n.O," "),color:"".concat(n.j," ")}},{id:"#m-plugin-sharemap-content",styles:{backgroundColor:"".concat(n.j," "),border:"1px solid ".concat(n.O," "),boxShadow:"0 2px 4px ".concat(n.O,", 0 -1px 0px ").concat(n.O," ")}},{id:".m-plugin-sharemap-content span",styles:{color:"".concat(n.O," ")}},{id:".m-plugin-sharemap-dialog div.m-plugin-sharemap-social",styles:{borderBottom:"".concat(n.O," 1px solid ")}},{id:"#m-plugin-sharemap-social a svg",styles:{color:"".concat(n.O," ")}},{id:"m-sharemap-geturl",styles:{backgroundColor:n.O,color:n.j}}],n.T=t.overwriteStyles||!1,n.B=t.minimize||!1,n.P=t.tooltip||"¡Copiado!",n.R=t.urlAPI||!1,n.order=t.order,n.filterLayers=t.filterLayers,n.shareLayer=t.shareLayer,n}return n=u,(e=[{key:"createView",value:function(t){var n=this;return this.L=t,new Promise((function(t,e){var r=M.template.compileSync(i.a),o=r.querySelector("button");if(o.setAttribute("tabindex",n.order),o.setAttribute("aria-label","Plugin Sharemap"),!0===n.T){var a=l(n.C.filter((function(t){return t.id===o.id})),1)[0];o.style.backgroundColor=a.styles.backgroundColor,o.style.color=a.styles.color,o.style.border=a.styles.border}n.accessibilityTab(r),n.addEvents(r),t(r)}))}},{key:"addEvents",value:function(t){var n=this;t.querySelector("#m-sharemap-geturl").addEventListener("click",(function(){document.querySelector("#m-plugin-sharemap-title")||n.activateModal()}))}},{key:"activateModal",value:function(){var t=M.template.compileSync(a.a,{vars:{title:this.v,text:this.g,btn:this.k,copyBtn:this.M,copyBtnHtml:this.S,tooltip:this.P}});this.accessibilityTab(t),!0===this.T&&this.C.forEach((function(n){t.querySelectorAll(n.id).forEach((function(t){var e=t;Object.keys(n.styles).forEach((function(t){e.style[t]=n.styles[t]}))}))}));var n=t.querySelector("#m-plugin-sharemap-message input"),e=t.querySelector("#m-plugin-sharemap-html input"),r=document.querySelector("div.m-mapea-container");t.querySelector("#m-plugin-sharemap-button > button").addEventListener("click",(function(){var n;(n=t).parentElement.removeChild(n),document.querySelector(".m-sharemap-container").click(),document.querySelector("#m-sharemap-geturl").focus()}));var i=t.querySelector("#m-plugin-sharemap-copybutton"),o=t.querySelector("#m-plugin-sharemap-copybuttonhtml"),u=t.querySelector("#m-plugin-sharemap-title");i.addEventListener("click",(function(){v(n),d(u.querySelector("#m-plugin-sharemap-tooltip"))})),o.addEventListener("click",(function(){v(e),d(u.querySelector("#m-plugin-sharemap-tooltip"))})),this.buildURL(t).then((function(){return r.appendChild(t)})),this.buildHtml(t).then((function(){return r.appendChild(t)})).then((function(){u.focus(),u.click()}))}},{key:"buildURL",value:function(t){var n=this,e=t.querySelector("input"),r=t.querySelector("#twitter"),i=t.querySelector("#facebook"),o=t.querySelector("#pinterest");return this.getControls().then((function(t){var a;if(n.R){var u=n.L.getCenter(),l=u.x,s=u.y,c=n.L.getProjection(),f=c.code,p=c.units;if(a="".concat(n.h,"?center=").concat(l,",").concat(s,"&zoom=").concat(n.L.getZoom()),n.B){var h=t.filter((function(t){return void 0!==t&&-1===t.indexOf("backgroundlayers")})).join(",");h.endsWith(",")&&(h=h.slice(0,-1)),-1!==h.indexOf("scale")&&h.indexOf("scale")!==h.indexOf("scaleline")||(h=h.concat(",scale*true")),a=a.concat("&controls=".concat(h)).concat("&plugins=toc,zoompanel,measurebar,mousesrs")}else a=a.concat("&controls=".concat(t)).concat("&".concat(n.getPlugins()));a=(a=n.getLayers().length>0?a.concat("&layers=".concat(n.getLayers())):a.concat("")).concat("&projection=".concat(f,"*").concat(p)),e.value=a}else{var m=n.L.getCenter(),d=m.x,v=m.y,b=window.location.search?window.location.href.replace(window.location.search,""):window.location.href;a="".concat(b,"?center=").concat(d,",").concat(v,"&zoom=").concat(n.L.getZoom(),"&srs=").concat(n.L.getProjection().code);var y=[];if(!0===n.shareLayer?y=n.getLayersInLayerswitcher():!1===n.shareLayer&&(y=n.getLayersInfilterLayers()),a=y.length>0?a.concat("&layers=".concat(y)):a.concat(""),!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS))if(y.length>0){var g="";M.config.MAP_VIEWER_LAYERS.forEach((function(t){-1===y.indexOf(t)&&(g=g.concat(",".concat(t)))})),M.utils.isNullOrEmpty(g)&&(a="".concat(a,",").concat(M.config.MAP_VIEWER_LAYERS))}else a="".concat(a,"&layers=").concat(M.config.MAP_VIEWER_LAYERS);e.value=a}a=encodeURI(a),M.remote.get("http://tinyurl.com/api-create.php?url=".concat(a)).then((function(t){i.href="http://www.facebook.com/sharer.php?u=".concat(t.text),r.href="https://twitter.com/intent/tweet?url=".concat(t.text),o.href="https://www.pinterest.es/pin/create/button/?url=".concat(t.text)}))}))}},{key:"buildHtml",value:function(t){var n=this,e=t.querySelector("#m-plugin-sharemap-html").querySelector("input");return this.getControls().then((function(t){var r;if(n.R){var i=n.L.getCenter(),o=i.x,a=i.y,u=n.L.getProjection(),l=u.code,s=u.units;if(r="".concat(n.h,"?center=").concat(o,",").concat(a,"&zoom=").concat(n.L.getZoom()),n.B){var c=t.filter((function(t){return void 0!==t&&-1===t.indexOf("backgroundlayers")})).join(",");c.endsWith(",")&&(c=c.slice(0,-1)),-1!==c.indexOf("scale")&&c.indexOf("scale")!==c.indexOf("scaleline")||(c=c.concat(",scale*true")),r=r.concat("&controls=".concat(c)).concat("&plugins=toc,zoompanel,measurebar,mousesrs")}else r=r.concat("&controls=".concat(t)).concat("&".concat(n.getPlugins()));r=(r=n.getLayers().length>0?r.concat("&layers=".concat(n.getLayers())):r.concat("")).concat("&projection=".concat(l,"*").concat(s))}else{var f=n.L.getCenter(),p=f.x,h=f.y,m=window.location.search?window.location.href.replace(window.location.search,""):window.location.href;r="".concat(m,"?center=").concat(p,",").concat(h,"&zoom=").concat(n.L.getZoom());var d=[];if(!0===n.shareLayer?d=n.getLayersInLayerswitcher():!1===n.shareLayer&&(d=n.getLayersInfilterLayers()),r=d.length>0?r.concat("&layers=".concat(d)):r.concat(""),!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS))if(d.length>0){var v="";M.config.MAP_VIEWER_LAYERS.forEach((function(t){-1===d.indexOf(t)&&(v=v.concat(",".concat(t)))})),M.utils.isNullOrEmpty(v)&&(r="".concat(r,",").concat(M.config.MAP_VIEWER_LAYERS))}else r="".concat(r,"&layers=").concat(M.config.MAP_VIEWER_LAYERS);e.value=r}var b='<iframe width="800" height="600" frameborder="0" style="border:0" src="'.concat(r,'"></iframe>');e.value=b}))}},{key:"getControls",value:function(){var t=this,n=this.h.match(/(.*[A-Za-z-0-9])/)[0],e=this.L.getControls().map((function(t){return t.name}));return new Promise((function(r){M.remote.get("".concat(n,"/api/actions/controls")).then((function(n){var i=JSON.parse(n.text),o=e.filter((function(t){return i.includes(t)})).filter((function(t){return"backgroundlayers"!==t}));if(o.includes("mouse")){var a=t.L.getControls().find((function(t){return"mouse"===t.name})).getImpl().showProj,u=o.indexOf("mouse");o[u]=!0===a?"mouse*true":"mouse"}if(o.includes("scale")){var l=t.L.getControls().find((function(t){return"scale"===t.name})).getImpl().exactScale,s=o.indexOf("scale");o[s]=!0===l?"scale*true":"scale"}var c,f=t.L.getControls().filter((function(t){return"backgroundlayers"===t.name}))[0];if(!M.utils.isNullOrEmpty(f)){var p=f.visible,h=f.activeLayer;c="boolean"==typeof p&&"number"==typeof h?"backgroundlayers*".concat(h,"*").concat(p):"backgroundlayers"}o.push(c),r(o)}))}))}},{key:"getLayers",value:function(){var t=this;return this.L.getLayers().filter((function(t){var n="__draw__"!==t.name&&"selectionLayer"!==t.name;return"attributions"===t.name&&"KML"===t.type&&(n=n&&!1),!1===t.displayInLayerSwitcher&&!0===t.transparent&&(n=n&&!1),n})).map((function(n){return t.layerToParam(n)})).filter((function(t){return null!=t}))}},{key:"getLayersInLayerswitcher",value:function(){var t=this;return this.L.getLayers().filter((function(t){return!0===t.displayInLayerSwitcher&&!0===t.transparent})).map((function(n){return t.layerToParam(n)})).filter((function(t){return null!=t}))}},{key:"getLayersInfilterLayers",value:function(){var t=this;return this.L.getLayers().filter((function(n){return t.filterLayers.includes(n.name)})).map((function(n){return t.layerToParam(n)})).filter((function(t){return null!=t}))}},{key:"layerToParam",value:function(t){var n;return"osm"===t.name?n=t.name:/mapbox/.test(t.name)?n="MAPBOX.".concat(t.name):"WMS"===t.type?n=this.getWMS(t):"WMTS"===t.type?n=this.getWMTS(t):"KML"===t.type?n=this.getKML(t):"WFS"===t.type?n=this.getWFS(t):"GeoJSON"===t.type?n=this.getGeoJSON(t):"Vector"===t.type?n=this.getVector(t):"MVT"===t.type?n=this.getMVT(t):"OGCAPIFeatures"===t.type&&(n=this.getOGCAPIFeatures(t)),n}},{key:"getKML",value:function(t){return"KML*".concat(t.name,"*").concat(t.url,"*").concat(t.extract,"*").concat(t.label,"*").concat(t.isVisible())}},{key:"getGeoJSON",value:function(t){var n=M.utils.isUndefined(t.source)?encodeURIComponent(t.url):t.serialize(),e=t.getStyle()?t.getStyle().serialize():"";return"GeoJSON*".concat(t.name,"*").concat(n,"*").concat(t.extract,"*").concat(e)}},{key:"getOGCAPIFeatures",value:function(t){var n=t.getStyle()?t.getStyle().serialize():"";return"OGCAPIFeatures*".concat(t.legend||t.name,"*").concat(t.url,"*").concat(t.name,"*").concat(t.limit||"","*").concat(t.bbox||"","*").concat(t.id||"","*").concat(t.offset||"","*").concat(t.format||"","*").concat(n,"*").concat(t.extract||"")}},{key:"getVector",value:function(t){var n=Object.assign(t.toGeoJSON());n.crs={properties:{name:"EPSG:4326"},type:"name"},n=window.btoa(unescape(encodeURIComponent(JSON.stringify(n))));var e=t.getStyle()?t.getStyle().serialize():"";return"GeoJSON*".concat(t.name,"*").concat(n,"**").concat(e)}},{key:"getMVT",value:function(t){return"MVT*".concat(t.url,"*").concat(t.name,"*").concat(t.getProjection())}},{key:"getWMS",value:function(t){return"WMS*".concat(this.normalizeString(t.legend||t.name),"*").concat(t.url,"*").concat(t.name,"*").concat(t.transparent,"*").concat(t.tiled,"*").concat(t.userMaxExtent||"","*").concat(t.version,"*").concat(t.displayInLayerSwitcher,"*").concat(t.isQueryable(),"*").concat(t.isVisible())}},{key:"getWFS",value:function(t){var n=t.getStyle().serialize();return"WFS*".concat(this.normalizeString(t.legend||t.name),"*").concat(t.url,"*").concat(t.namespace,":").concat(t.name,":*").concat(t.geometry||"","*").concat(t.ids||"","*").concat(t.cql||"","*").concat(n||"")}},{key:"getWMTS",value:function(t){var n=this.L.getProjection().code,e=null;try{e=t.getLegend()}catch(n){e=t.legend}return"WMTS*".concat(t.url,"*").concat(t.name,"*").concat(t.matrixSet||n,"*").concat(this.normalizeString(e),"*").concat(t.transparent,"*").concat(t.options.format||"image/png","*").concat(t.displayInLayerSwitcher,"*").concat(t.isQueryable(),"*").concat(t.isVisible())}},{key:"getPlugins",value:function(){return this.L.getPlugins().map((function(t){var n="";return M.utils.isFunction(t.getAPIRest)&&(n=t.getAPIRest()),n})).join("&")}},{key:"equals",value:function(t){return t instanceof u}},{key:"normalizeString",value:function(t){var n=t.replace(/,/g,"");return n=n.replace(/\*/g,"")}},{key:"accessibilityTab",value:function(t){var n=this;t.querySelectorAll('[tabindex="0"]').forEach((function(t){return t.setAttribute("tabindex",n.order)}))}}])&&c(n.prototype,e),r&&c(n,r),Object.defineProperty(n,"prototype",{writable:!1}),u}(),y=e(0),g=e(1),w={en:y,es:g},k=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},x=function(t){return"es"===t||"en"===t?w[t]:M.language.getTranslation(t).sharemap},S=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k(),e=x(n),r="";return M.utils.isNullOrEmpty(e)?console.warn("The translation '".concat(n,"' has not been defined.")):r=t.split(".").reduce((function(t,n){return t[n]}),e),r};function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var j=["filterLayers"];function C(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}function T(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,o=function(t,n){if("object"!==O(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===O(o)?o:String(o)),r)}var i,o}function B(t,n){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function P(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=L(t);if(n){var i=L(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return R(this,e)}}function R(t,n){if(n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&B(t,n)}(o,M.Plugin);var n,e,r,i=P(o);function o(t){var n,e=t.filterLayers,r=void 0===e?[]:e,a=C(t,j);if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this),M.utils.isNullOrEmpty(a.baseUrl)&&console.warn("options.baseUrl is null or undefined."),n.L=null,n.A=[],n.h=a.baseUrl||"https://componentes.cnig.es/api-core/",!M.utils.isString(n.h))throw new Error("options.baseUrl is not string type.");return n.I=a.position||"BR",n.v=a.title||S("title"),n.g=a.text||S("text"),n.k=a.btn||"OK",n.M=a.copyBtn||S("copy"),n.S=a.copyBtnHtml||S("copy"),n.C=a.styles||{},n.T=a.overwriteStyles||!1,n.B=a.minimize||!1,n.P=a.tooltip||S("tooltip"),n.R=a.urlAPI||!1,n.order=a.order>=-1?a.order:null,n.filterLayers=void 0===a.shareLayer||!1===a.shareLayer?r:[],n.shareLayer=a.shareLayer||!1,n.options=a,n}return n=o,r=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?y:g:M.language.getTranslation(t).sharemap}}],(e=[{key:"addTo",value:function(t){this.control=new b({baseUrl:this.h,title:this.v,text:this.g,btn:this.k,copyBtn:this.M,copyBtnHtml:this.S,primaryColor:this.C.primaryColor,secondaryColor:this.C.secondaryColor,tooltip:this.P,overwriteStyles:this.T,minimize:this.B,urlAPI:this.R,order:this.order,filterLayers:this.filterLayers,shareLayer:this.shareLayer}),this.A.push(this.control),this.L=t,this.H=new M.ui.Panel("ShareMap",{collapsible:!1,position:M.ui.position[this.I],className:"m-plugin-sharemap",tooltip:S("tooltipPanel"),order:this.order}),this.H.addControls(this.A),t.addPanels(this.H)}},{key:"destroy",value:function(){this.L.removeControls([this.control]);var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.L=t[0],this.control=t[1],this.A=t[2],this.H=t[3],this.h=t[4],this.I=t[5],this.v=t[6],this.g=t[7],this.k=t[8],this.M=t[9],this.S=t[10],this.C=t[11],this.T=t[12],this.P=t[13]}},{key:"getControls",value:function(){return this.A}},{key:"name",get:function(){return"sharemap"}},{key:"baseUrl",get:function(){return this.h}},{key:"map",get:function(){return this.L}},{key:"position",get:function(){return this.I}},{key:"tooltip",get:function(){return this.P}},{key:"title",get:function(){return this.v}},{key:"text",get:function(){return this.g}},{key:"btn",get:function(){return this.k}},{key:"copyBtn",get:function(){return this.M}},{key:"copyBtnHtml",get:function(){return this.S}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.P,"*").concat(this.baseUrl,"*").concat(this.B,"*").concat(this.v,"*").concat(this.k,"*").concat(this.M,"*").concat(this.g,"*").concat(this.S,"*").concat(this.R,"*").concat(this.shareLayer)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}}])&&T(n.prototype,e),r&&T(n,r),Object.defineProperty(n,"prototype",{writable:!1}),o}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.ShareMap=A,window.M.control.ShareMapControl=b}]);
//# sourceMappingURL=sharemap-1.1.0.ol.min.js.map