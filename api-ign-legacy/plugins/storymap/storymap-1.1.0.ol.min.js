!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t){t.exports=JSON.parse('{"exception":{"cobertura":"Checking coverage in the area...","nocobertura":"This layer has no coverage in this area"},"tooltip":"Story Map","warning":"WARNING"}')},function(t){t.exports=JSON.parse('{"exception":{"cobertura":"Comprobando cobertura en la zona...","nocobertura":"Esta capa no tiene cobertura en esta zona"},"tooltip":"Story Map","warning":"AVISO"}')},function(t){t.exports=JSON.parse('{"url":{"name":"storymap","separator":"*"},"constructor":"M.plugin.StoryMap","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","position":0,"possibleValues":["TL","TR","BR","BL"]},{"type":"boolean","name":"collapsed","position":1},{"type":"boolean","name":"collapsible","position":2},{"type":"simple","name":"tooltip","position":3},{"type":"simple","name":"delay","position":4}]}],"files":{"ol":{"scripts":["storymap.ol.min.js"],"styles":["storymap.ol.min.css"]}},"metadata":{"name":"StoryMap","description":"Table of contents of the map. Pretty design version","text":"Tabla de contenidos de fototeca. Consulta cobertura de vuelo sobre la vista","version":"1.1.0","date":"18/11/2019","author":"Guadaltel","org":"CNIG","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg"}}')},function(t,e){t.exports='<div id="m-storymap-container" class="m-control m-container m-storymap-container m-storymap">\n    <div class="m-storymap-panel" id="m-storymap-panel">\n        <div class="title">\n            {{title}}\n        </div>\n        <main class="mainStoryMap">\n            <div class="navPointer" id="navPointer">\n\n                <button speed="{{speed}}" id="buttonDelay" class="buttonDelay">\n                    1x\n                </button>\n\n                <svg id="play" height="23" width="23" xmlns="http://www.w3.org/2000/svg"\n                    class="icon icon-tabler icon-tabler-player-play" width="44" height="44" viewBox="0 0 24 24"\n                    stroke-width="1.5" stroke="#65a3d4" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />\n                    <path d="M7 4v16l13 -8z" />\n                </svg>\n                <svg id="pause" style="display: none;" height="23" width="23" xmlns="http://www.w3.org/2000/svg"\n                    class="icon icon-tabler icon-tabler-player-pause" width="44" height="44" viewBox="0 0 24 24"\n                    stroke-width="1.5" stroke="#65a3d4" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />\n                    <rect x="6" y="5" width="4" height="14" rx="1" />\n                    <rect x="14" y="5" width="4" height="14" rx="1" />\n                </svg>\n\n            </div>\n            <div class="navStep" id="navStep">\n            </div>\n            <div class="navContent">\n                <section id="contentStoryMap" class="contentStoryMap">\n                    <header class="header_contentStoryMap">\n                        <h2 id="title_contentStoryMap">title</h2>\n                        <p id="subtitle_contentStoryMap">sub</p>\n                    </header>\n\n                </section>\n            </div>\n            <div class="arrowScroll">\n                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-big-down" width="44"\n                    height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#71a7d3" fill="none"\n                    stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />\n                    <path\n                        d="M15 4v8h3.586a1 1 0 0 1 .707 1.707l-6.586 6.586a1 1 0 0 1 -1.414 0l-6.586 -6.586a1 1 0 0 1 .707 -1.707h3.586v-8a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1z" />\n                </svg>\n            </div>\n        </main>\n    </div>\n\n</div>'},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(4),n(5);var o=n(2);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function c(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:String(e)}function l(t,e,n){return e=p(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=u(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(){return a(this,e),l(this,e,arguments)}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,M.impl.Control),n=e,(o=[{key:"addTo",value:function(t,n){s(p(e.prototype),"addTo",this).call(this,t,n)}}])&&i(n.prototype,o),r&&i(n,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(),f=n(3),v=n.n(f);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,g(o.key),o)}}function g(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b(e)?e:String(e)}function S(t,e,n){return e=k(e),function(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=x(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function x(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;h(this,e);var i=new y;return(t=S(this,e,[i,"StoryMapControl"])).content_=n,t.delay=o,t.stepIndex=0,t.indexCap=0,t.indexInContent=r,t.direction=!0,t.svgArrowScroll=!0,t.arrowScrollEffect_contador=1,t.panelHTML_=null,t.isDraggable_=a,t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,M.Control),n=e,(o=[{key:"createView",value:function(t){var e=this;return this.map_=t,new Promise((function(n,o){var r=M.template.compileSync(v.a,{vars:{title:"Story Map",speed:e.delay/1e3}});r=e.createContent(r,e.indexInContent),e.scrollEvent(r),r=e.createNavPointer(r,e.content_.cap.length),r=e.buttonDelay(r),t.on("M.evt.COMPLETED",(function(){e.createPointerSteps(0)})),window.innerWidth<=772&&(e.handleMovil(),document.querySelector(".m-plugin-storymap .m-panel-btn").addEventListener("click",e.handleMovil)),r=e.createPlayPause(r),r=e.arrowEvent(r),r=e.eventIndex(r),e.panelHTML_=r,e.isDraggable_&&M.utils.draggabillyPlugin(e.getPanel(),"#m-storymap-panel .title"),n(e.panelHTML_)}))}},{key:"createContent",value:function(t,e){var n=t.querySelector("#contentStoryMap"),o=this.content_.cap;if(e){var r={title:e.title,subtitle:e.subtitle,steps:[{html:"".concat(this.createIndex(),"<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>"),js:e.js}]};o.unshift(r)}t.querySelector("#title_contentStoryMap").innerHTML=o[0].title,t.querySelector("#subtitle_contentStoryMap").innerHTML=o[0].subtitle;var a="";return o.forEach((function(t,e){var n=t.steps;a+="<div id=cap".concat(e,0===e?' style="display: block;" class="chapters">':' style="display: none;" class="chapters">'),n.forEach((function(t,n){var o=t.html;t.js,a+=0===n&&0===e?'<div id="step'.concat(n,'" class="step" style="display: block;"><br><br>').concat(o,"<br><br></div>"):'<div id="step'.concat(n,'" class="step" style="display: none;"><br><br>').concat(o,"<br><br></div>")})),a+="</div>"})),n.innerHTML+=a,t.querySelector("#navStep").innerHTML='<svg id="pointStep0" height="23" width="23" index="0">\n    <circle class="pointerEffect" index="0" stroke="#71a7d3" strokeWidth="1" fill="#71a7d3" cx="50%" cy="50%" r="4" />\n  </svg>',t}},{key:"disableCap",value:function(t,e,n){var o=document.querySelector("#contentStoryMap").querySelectorAll(".chapters"),r=o[t].querySelectorAll(".step");o[e].style="display: none",o[t].style="display: block";var a=n?r[0]:r[r.length-1];this.addJSCap(t,n?0:r.length-1),a.style="display: block",a.scroll({top:20,behavior:"smooth"}),this.changeTitleSubtitle(t)}},{key:"disableStep",value:function(t,e){var n=document.querySelector("#cap".concat(t));n.querySelectorAll(".step").forEach((function(t){t.style="display: none;"}));var o=n.querySelector("#step".concat(e));o.style="display: block",o.scroll({top:20,behavior:"smooth"})}},{key:"changeTitleSubtitle",value:function(t){var e=this.content_.cap;document.querySelector("#title_contentStoryMap").innerHTML=e[t].title,document.querySelector("#subtitle_contentStoryMap").innerHTML=e[t].subtitle}},{key:"capIndex",value:function(t,e){var n=document.querySelector(t).querySelectorAll(e);for(var o in n)if("block"===n[o].style.display&&!Number.isNaN(o)){var r=n[o].id;return Number.parseInt(r[r.length-1],10)}return!1}},{key:"createNavPointer",value:function(t,e){for(var n=this,o=t.querySelector("#navPointer"),r=0;r<e;r++)o.innerHTML+=0===r?'\n        <svg id="pointerNav'.concat(r,'" height="23" width="23" index="').concat(r,'">\n          <circle class="pointerEffect" index="').concat(r,'" stroke="#71a7d3" strokeWidth="1" fill="#71a7d3" cx="50%" cy="50%" r="4" />\n        </svg>\n        '):'\n        <svg id="pointerNav'.concat(r,'" height="23" width="23" index="').concat(r,'">\n          <circle index="').concat(r,'" stroke="#71a7d3" strokeWidth="1" fill="#71a7d3" cx="50%" cy="50%" r="4" />\n        </svg>\n        ');return t.querySelectorAll("#navPointer > svg").forEach((function(t,e){0!==e&&1!==e&&(t.addEventListener("click",(function(t){var e=t.target;n.resetScroll(),n.disableCap(e.getAttribute("index"),n.capIndex("#contentStoryMap",".chapters"),!0),n.createPointerSteps(e.getAttribute("index")),n.effectPointer(e.getAttribute("index"),"#pointerNav","navPointer"),n.effectPointer(0,"#pointStep","navStep")})),t.children[0].addEventListener("click",(function(t){var e=t.target;n.resetScroll(),n.disableCap(e.getAttribute("index"),n.capIndex("#contentStoryMap",".chapters"),!0),n.createPointerSteps(e.getAttribute("index")),n.effectPointer(e.getAttribute("index"),"#pointerNav","navPointer"),n.effectPointer(0,"#pointStep","navStep")})))})),t}},{key:"createPointerSteps",value:function(t){var e=this,n=this.content_.cap[t].steps,o="";n.forEach((function(t,e){o+=0===e?'<svg id="pointStep'.concat(e,'" height="23" width="23" index="').concat(e,'">\n        <circle class="pointerEffect" index="').concat(e,'" stroke="#71a7d3" strokeWidth="1" fill="#71a7d3" cx="50%" cy="50%" r="4" />\n      </svg>'):'<svg id="pointStep'.concat(e,'" height="23" width="23" index="').concat(e,'">\n        <circle index="').concat(e,'" stroke="#71a7d3" strokeWidth="1" fill="#71a7d3" cx="50%" cy="50%" r="4" />\n      </svg>')}));var r=document.querySelector("#navStep");r.innerHTML=o,r.querySelectorAll("svg").forEach((function(n){n.addEventListener("click",(function(n){var o=n.target;e.disableStep(t,o.getAttribute("index")),e.addJSCap(t,o.getAttribute("index")),e.effectPointer(o.getAttribute("index"),"#pointStep","navStep")}))}))}},{key:"createPlayPause",value:function(t){var e=this,n=t.querySelector("#play"),o=t.querySelector("#pause");return this.idTimeCap=0,this.allIntervalId=[],n.addEventListener("click",(function(){n.style.display="none",o.style.display="block",e.idTimeCap=e.timeCap(),e.allIntervalId.push(e.idTimeCap)})),o.addEventListener("click",(function(){o.style.display="none",n.style.display="block",e.allIntervalId.forEach((function(t){clearInterval(t)}))})),t}},{key:"resetScroll",value:function(){document.querySelectorAll(".step").forEach((function(t){t.style="display: none"}))}},{key:"scrollEvent",value:function(t){var e=this,n=t.querySelectorAll(".chapters");return n.forEach((function(t){t.querySelectorAll(".step").forEach((function(o){o.addEventListener("scroll",(function(r){var a=r.target;if(e.svgArrowScroll&&e.arrowScrollEffect(),Math.abs(a.scrollHeight-a.clientHeight-a.scrollTop)<1&&(n[n.length-1].id!==t.id||"step".concat(t.childElementCount-1)!==a.id)){a.style="display: none";var i=Number(o.id.replace("step",""))+1;if(t.querySelectorAll(".step").length-1<i){var c=Number(t.id.replace("cap",""))+1;document.querySelector("#cap".concat(c)).style="display: block",document.querySelector("#cap".concat(c)).querySelector("#step0").style="display: block",document.querySelector("#".concat(t.id)).style="display: none",e.addJSCap(c,0),e.effectPointer(c,"#pointerNav","navPointer"),e.createPointerSteps(c),e.effectPointer(0,"#pointStep","navStep"),e.changeTitleSubtitle(c)}else{var l=document.querySelector("#".concat(t.id)).querySelector("#step".concat(i)),s=Number(t.id.replace("cap",""));l.style="display: block",l.scrollTop=1,e.addJSCap(s,i),e.effectPointer(i,"#pointStep","navStep")}}else if(0===a.scrollTop&&("cap0"!==t.id||"step0"!==a.id)){var u=Number(o.id.replace("step",""))-1;if(a.style="display: none",u<0){var p=Number(t.id.replace("cap",""))-1,d=document.querySelector("#cap".concat(p));d.style="display: block";var y=document.querySelector("#cap".concat(p)).querySelector("#step".concat(d.childElementCount-1));y.style="display: block",y.scrollTop=10,document.querySelector("#".concat(t.id)).style="display: none",e.addJSCap(p,d.childElementCount-1),e.effectPointer(p,"#pointerNav","navPointer"),e.createPointerSteps(p),e.changeTitleSubtitle(p),e.effectPointer(d.childElementCount-1,"#pointStep","navStep")}else{var f=Number(t.id.replace("cap","")),v=document.querySelector("#".concat(t.id)).querySelector("#step".concat(u));v.style="display: block",v.scrollTop=10,e.addJSCap(f,u),e.effectPointer(u,"#pointStep","navStep")}}}))}))})),t}},{key:"addJSCap",value:function(t,e){try{document.querySelector("#storyMap_jsCap")&&document.body.removeChild(document.querySelector("#storyMap_jsCap"));var n=document.createElement("script");n.id="storyMap_jsCap";var o=document.createTextNode("{".concat(this.content_.cap[t].steps[e].js,"}"));n.appendChild(o),document.body.appendChild(n)}catch(t){console.warn('Comprueba que has introducido correctamente el script, respetando ";" y llamando a map o mapjs')}}},{key:"timeCap",value:function(){var t=this;return setInterval((function(){var e=t.capIndex("#cap".concat(t.capIndex("#contentStoryMap",".chapters")),".step"),n=document.querySelector("#cap".concat(t.capIndex("#contentStoryMap",".chapters"))).querySelector("#step".concat(e)),o=t.content_.cap.length-1,r=t.content_.cap[t.content_.cap.length-1].steps.length-1;"#cap".concat(t.capIndex("#contentStoryMap",".chapters"))==="#cap".concat(o)&&"#step".concat(e)==="#step".concat(r)||n.scroll({top:n.scrollHeight+10,behavior:"smooth"})}),1e3*document.querySelector("#buttonDelay").getAttribute("speed"))}},{key:"arrowScrollEffect",value:function(){var t=this;setTimeout((function(){t.arrowScrollEffect_contador-=.1,document.querySelector(".arrowScroll").style="opacity: ".concat(t.arrowScrollEffect_contador),t.arrowScrollEffect_contador>=0&&t.arrowScrollEffect()}),150),this.svgArrowScroll=!this.svgArrowScroll}},{key:"arrowEvent",value:function(t){return t.querySelector(".arrowScroll").addEventListener("mouseover",(function(t){document.querySelector("#cap0").querySelector("#step0").scroll({top:70,behavior:"smooth"})})),t}},{key:"effectPointer",value:function(t,e,n){document.querySelector(".".concat(n," .pointerEffect")).classList.remove("pointerEffect"),document.querySelector("".concat(e).concat(t," > circle")).classList.add("pointerEffect")}},{key:"createIndex",value:function(){var t=this.content_.cap,e="";return t.forEach((function(t,n){var o=t.title,r=void 0===o?"":o,a=t.subtitle,i=void 0===a?"":a;e+='<li index="'.concat(n+1,'">').concat(r,". ").concat(i,"</li>")})),e="<ol id='indexContent'>".concat(e,"</ol>")}},{key:"eventIndex",value:function(t){var e=this;return t.querySelectorAll("#indexContent > li").forEach((function(t,n){t.addEventListener("click",(function(t){var n=t.target;e.resetScroll(),e.disableCap(n.getAttribute("index"),e.capIndex("#contentStoryMap",".chapters"),!0),e.createPointerSteps(n.getAttribute("index")),e.effectPointer(n.getAttribute("index"),"#pointerNav","navPointer")}))})),t}},{key:"buttonDelay",value:function(t){var e=this,n=[{text:"0.5x",value:0},{text:"1x",value:1},{text:"2x",value:2},{text:"3x",value:3},{text:"5x",value:5}],o=0;return t.querySelector("#buttonDelay").addEventListener("click",(function(r){var a=r.target;e.allIntervalId.forEach((function(t){clearInterval(t)})),0!==(o=o>=n.length-1?0:o+1)?(a.style="width: 23px",a.setAttribute("speed",e.delay/1e3/n[o].value),document.querySelector("#navStep").style="margin-left: 5px;"):(a.setAttribute("speed",e.delay/1e3*(n[o].value+1.5)),a.style="width: 40px;",document.querySelector("#navStep").style="margin-left: -15px;"),a.innerHTML=n[o].text;var i=t.querySelector("#play"),c=t.querySelector("#pause");i.style.display="none",c.style.display="block";var l=setInterval((function(){var t=document.querySelector("#cap".concat(e.content_.cap.length-1)).lastChild.style.display,n=e.capIndex("#cap".concat(e.capIndex("#contentStoryMap",".chapters")),".step"),o=document.querySelector("#cap".concat(e.capIndex("#contentStoryMap",".chapters"))).querySelector("#step".concat(n)),r=e.content_.cap.length-1,a=e.content_.cap[e.content_.cap.length-1].steps.length-1;"#cap".concat(e.capIndex("#contentStoryMap",".chapters"))==="#cap".concat(r)&&"#step".concat(n)==="#step".concat(a)||o.scroll({top:o.scrollHeight+10,behavior:"smooth"}),"block"===t&&(i.style.display="block",c.style.display="none",clearInterval(l))}),1e3*a.getAttribute("speed"));e.allIntervalId.push(l)})),t}},{key:"activate",value:function(){w(k(e.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){w(k(e.prototype),"deactivate",this).call(this)}},{key:"getActivationButton",value:function(t){return t.querySelector(".m-storymap button")}},{key:"handleMovil",value:function(){document.querySelector(".m-plugin-storymap.opened")?document.querySelectorAll(".m-panel").forEach((function(t){t.classList.contains("m-plugin-storymap")||(t.style.display="none")})):document.querySelectorAll(".m-panel").forEach((function(t){t.classList.contains("m-plugin-storymap")||(t.style.display="block")}))}},{key:"equals",value:function(t){return t instanceof e}}])&&m(n.prototype,o),r&&m(n,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(),E=n(0),O=n(1),j={en:E,es:O},q=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},C=function(t){return"es"===t||"en"===t?j[t]:M.language.getTranslation(t).storymap},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q(),n=C(e),o="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(e,"' has not been defined.")):o=t.split(".").reduce((function(t,e){return t[e]}),n),o};function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,N(o.key),o)}}function N(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=I(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I(e)?e:String(e)}function R(t,e,n){return e=D(e),function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],D(t).constructor):e.apply(t,n))}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A(this,e),(t=R(this,e)).map_=null,t.controls_=[],t.position_=n.position||"TR",t.collapsed_=!0===n.collapsed,t.metadata_=o.metadata,t.tooltip_=n.tooltip||T("tooltip"),t.content_=n.content||{},t.delay=n.delay||2e3,t.collapsible=n.collapsible||!1,t.indexInContent=n.indexInContent||!1,t.options_=n,t.isDraggable=!M.utils.isUndefined(n.isDraggable)&&n.isDraggable,t}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(e,M.Plugin),n=e,a=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?E:O:M.language.getTranslation(t).storymap}}],(r=[{key:"addTo",value:function(t){this.control=new P(this.content_[M.language.getLang()],this.delay,this.indexInContent,this.isDraggable),this.map_=t,window.map=t,window.mapjs=t,this.panel_=new M.ui.Panel("panelStoryMap",{collapsible:this.collapsible,position:M.ui.position[this.position_],collapsedButtonClass:"icon-capas2",className:"m-plugin-storymap",tooltip:this.tooltip_,collapsed:this.collapsed_}),this.panel_.addControls([this.control]),t.addPanels(this.panel_)}},{key:"position",get:function(){return this.position_}},{key:"name",get:function(){return"storymap"}},{key:"collapsed",get:function(){return this.panel_.isCollapsed()}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed,"*").concat(this.tooltip,"*").concat(this.isDraggableE,"*")}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options_))}},{key:"equals",value:function(t){return t instanceof e}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"destroy",value:function(){this.map_.removeControls(this.control);var t=[null,null,null];this.map_=t[0],this.control=t[1],this.panel_=t[2]}}])&&L(n.prototype,r),a&&L(n,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.StoryMap=B,window.M.control.StoryMapControl=P}]);
//# sourceMappingURL=storymap-1.1.0.ol.min.js.map