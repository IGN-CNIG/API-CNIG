!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=16)}([function(e){e.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create LayerswitcherControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","ogcfeatures":"The provided url does not correspond to a valid layer type","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search"},"tooltip":"Layer Manager","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Include URL of the service to load","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"Services Catalog","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","hide_service":"Hide service","show_service":"Show service","show_all_services":"Show all services","hide_all_services":"Hide all services","type_service":"Tipo de servicio","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found.","legend":"Legend","legend_error":"Error in legend","data_layer":"Data for GeoJSON layer","n_obj_geo":"Number of geographical objects","extension":"Extension","loading":"Loading","attributes":"Attributes","values":"Values","attribution":"Attribute","description":"Description","minzoom":"Minimum zoom","maxzoom":"Maximum zoom","center":"Center","addAllLayers":"Add all services","previous":"Previous","next":"Next","separatedby":"Identifier separated by commas \',\'","placeHolderLegend":"Text displayed in selector"}')},function(e){e.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LayerswitcherControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","ogcfeatures":"La url proporcionada no se corresponde con un tipo de capa válida","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda"},"tooltip":"Gestor de capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"Incluir URL del servicio a cargar","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","hide_service":"Ocultar servicio","show_service":"Mostrar servicio","show_all_services":"Mostrar todos los servicios","hide_all_services":"Ocultar todos los servicios","type_service":"Tipo de servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature","legend":"Leyenda","legend_error":"Error en la leyenda","data_layer":"Datos para la capa","n_obj_geo":"Número de objetos geográficos","extension":"Extensión","loading":"Cargando","attributes":"Atributos","values":"Valores","attribution":"Atributo","description":"Descripción","minzoom":"Zoom mínimo","maxzoom":"Zoom máximo","center":"Centro","addAllLayers":"Añadir todos los servicios","previous":"Anterior","next":"Siguiente","separatedby":"Identificador separados por comas \',\'","placeHolderLegend":"Texto que se muestra en el selector"}')},function(e,t){e.exports='<div id="m-layerswitcher-ogcCContainer">\n    <div>\n        <select tabindex="0" id="m-layerswitcher-ogc-vectors-select">\n            <option disabled="disabled" value="">{{translations.select_service}}</option>\n            {{#each layers}}\n                {{#if ../selectedLayer}}\n                    {{#lt @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                    {{/lt}}\n                    {{#gt @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                    {{/gt}}\n                    {{#eq @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}" selected>{{this.title}}</option>\n                    {{/eq}}\n                {{else}}\n                    <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                {{/if}}\n            {{/each}}\n        </select>\n    </div>\n    <div class="btn-container"><br>\n        <fieldset tabindex="0" class="m-layerswitcher-ogc-fieldset-customquery">\n            <legend>{{translations.filters}}</legend>\n            <label class="m-layerswitcher-ogc-label-customquery">\n                <input tabindex="0" type="radio" name="m-layerswitcher-ogc-filter" value="id" class="m-layerswitcher-ogc-input-customquery" id="m-layerswitcher-ogc-filter-id-input" {{#unless filterByOtherFilters}}checked{{/unless}}>\n                &nbsp;{{translations.id_filter}}\n            </label>\n            <br><br>\n            <label class="m-layerswitcher-ogc-label-customquery">\n                <input tabindex="0" type="radio" name="m-layerswitcher-ogc-filter" value="others" class="m-layerswitcher-ogc-input-customquery" {{#if filterByOtherFilters}}checked{{/if}}>\n                &nbsp;{{translations.other_filters}}\n            </label>\n            <br><br>\n            {{#unless filterByOtherFilters}}\n                <fieldset tabindex="0" id="m-layerswitcher-ogc-filter-id" style="display:block;" class="m-layerswitcher-ogc-filter-custom-query">\n            {{else}}\n                <fieldset tabindex="0" id="m-layerswitcher-ogc-filter-id" style="display:none;" class="m-layerswitcher-ogc-filter-custom-query">\n            {{/unless}}\n            <div id="m-layerswitcher-ogc-search-form-id">\n                <div id="m-layerswitcher-ogc-form-input"><label tabindex="0" for="m-layerswitcher-ogc-search-form-ID" class="m-layerswitcher-ogc-search-form-id">ID</label><input type="text" class="m-layerswitcher-ogc-search-form-ID" id="m-layerswitcher-ogc-search-form-ID" value="{{this.prevID}}"><br /></div>\n            </div>\n        </fieldset>\n\n\n        {{#if filterByOtherFilters}}\n            <fieldset tabindex="0" id="m-layerswitcher-ogc-other-filters" style="display:block;" class="m-layerswitcher-ogc-filter-custom-query">\n        {{else}}\n            <fieldset tabindex="0" id="m-layerswitcher-ogc-other-filters" style="display:none;" class="m-layerswitcher-ogc-filter-custom-query">\n        {{/if}}\n        <div id="m-layerswitcher-ogc-search-formothers">\n            <div tabindex="0"><label>{{translations.amount_results}} </label><input tabindex="0" type="text" id="m-layerswitcher-ogc-limit-items" value="{{#if limit}}{{limit}}{{else}}10{{/if}}" step="1" class="fieldset-limit"><label>{{translations.amount_results_2}} </label></div><br>\n            <div><label class="fieldset-bbox" tabindex="0">{{translations.bbox_select}}<input tabindex="0" type="checkbox" id="m-layerswitcher-ogc-search-bbox" {{#if bbox}}checked{{/if}}></label>\n            </div><br>\n            {{#if summary}}\n                <div id="m-layerswitcher-ogc-summary">\n                    {{#if filterByOtherFilters}}\n                        <div>{{translations.other_filters}}\n                    {{/if}}\n                    <ul>\n                        {{#each summary}}\n                            <li>{{@key}} = {{this}}</li>\n                        {{/each}}\n                    </ul>\n                </div>\n                <br>\n        </div>\n\n        {{/if}}\n\n        <div tabindex="0" class="m-layerswitcher-ogc-warning-msg">{{translations.warning}}</div></br>\n        <button class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-custom-query-button"> {{translations.custom_query_btn}}</button>\n    </div>\n    </fieldset>\n    </fieldset>\n    <p tabindex="0" id="m-layerswitcher-ogc-check-results" style="display: none;"></p>\n    <div class="m-layerswithcer-ogc-buttons">\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-select-button"> {{translations.add_btn}}</button>\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-check-button" style="margin-right: 0;"> {{translations.check_results}}</button>\n    </div>\n</div>\n</div>'},function(e,t){e.exports='<main class="m-control m-layerswitcher-container">\n        <header id="m-layerswitcher-title" class="m-layerswitcher-title">\n            <h1 aria-label="Plugin layerswitcher" tabindex="0" role="text">{{translations.layers}}</h1>\n            <button tabindex="0" id="m-layerswitcher-addlayers" title="{{translations.add_service}}"\n                class="m-layerswitcher-addservice">Añadir</button>\n        </header>\n    <section tabindex="0" aria-label="Plugin layerswitcher" id="m-layerswitcher-content" class="m-layerswitcher-content"></section>\n</main>'},function(e,t){e.exports='{{#*inline "layerswitcherLayer"}}\n    {{#each layers}}\n        <li tabindex="0" class="m-layerswitcher-layer" aria-label="{{translations.layers}}">\n            <div class="m-layerswitcher-title-layer">\n                {{#if ../isEyes}}\n                    <div class="m-layerswitcher-visible-control">\n                        <button aria-label="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" tabindex="0" data-select-type="eye" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-check {{#if visible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}} {{#if outOfRange}}m-layerswitcher-outOfRange{{/if}}">\n                        </button>\n                    </div>\n                {{/if}}\n                {{#if ../isRadio}}\n                    <div class="m-layerswitcher-visible-control">\n                        <input aria-label="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" tabindex="0" {{#eq checkedLayer "true"}}checked{{/eq}} type="radio" data-select-type="radio" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-check {{#if outOfRange}}m-layerswitcher-outOfRange-input{{/if}}" name="m-layerswitcher-radioLayers" value="{{type}}-{{id}}">\n                    </div>\n                {{/if}}\n                <div class="m-layerswitcher-visible-typeContent">\n                    <table>\n                        <tbody>\n                            <tr>\n                                <td><span {{#if ../displayLabel}}style="display: none"{{/if}} aria-label="Tipo de servicio {{type}}" tabindex="0" class="m-layerswitcher-type">{{type}}</span></td>\n                                <td><span tabindex="0" class="m-layerswitcher-title-box">{{title}}</span></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                {{#if ../isDelete}}\n                    <button title="{{../translations.remove_layer}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" tabindex="0" aria-label="{{translations.remove_layer}}" class="m-layerswitcher-icons-delete">\n                    </button>\n                {{/if}}\n            </div>\n            {{#if visible}}\n                <div class="m-layerswitcher-tools">\n                    {{#if ../isTransparency}}\n                        <div class="m-layerswitcher-opacity">\n                            <input tabindex="0" type="range" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-transparency" min="0" max="1" step="0.1" value="{{opacity}}" {{#unless visible}} disabled {{/unless}} {{#if outOfRange}} disabled {{/if}} />\n                        </div>\n                    {{/if}}\n                    <div class="m-layerswitcher-action-tools">\n                        {{#if ../isLegend}}\n                            <button tabindex="0" title="{{../translations.show_hide}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-image"></button>\n                        {{/if}}\n                        {{#if ../isZoom}}\n                            <button tabindex="0" title="{{../translations.zoom}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-target"></button>\n                        {{/if}}\n                        {{#if ../isInformation}}\n                            <button tabindex="0" title="{{../translations.info_metadata}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-info"></button>\n                        {{/if}}\n                        {{#if ../isStyle}}\n                            {{#if hasStyles}}\n                                <button tabindex="0" title="{{../translations.change_style}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-style"></button>\n                            {{/if}}\n                        {{/if}}\n                    </div>\n                </div>\n                <div class="m-layerswitcher-legend">\n                    <img></img>\n                </div>\n            {{/if}}\n        </li>\n    {{/each}}\n    {{/inline}}\n    <div>\n        {{#gt overlayLayers.length 0}}\n            {{#if isEyes}}\n                <button aria-label="{{#if allVisible}}{{translations.show_all_services}}{{^}}{{translations.hide_all_services}}{{/if}}" tabindex="0" id="m-layerswitcher-hsalllayers" class="m-layerswitcher-allstatus {{#if allVisible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}}"></button>\n            {{/if}}\n            <ul class="m-layerswitcher-ullayers">\n                {{> layerswitcherLayer layers=overlayLayers}}\n            </ul>\n        {{/gt}}\n    </div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n        <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n\n        <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.abstract}}:</span></p>\n        <div tabindex="0">\n            {{abstract}}\n        </div>\n        {{#if provider}}\n            <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.provider}}:</span></p>\n        {{/if}}\n        {{#if provider}}\n            <div tabindex="0">\n                {{{provider}}}\n            </div>\n        {{/if}}\n        {{#if hasMetadata }}\n            <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.metadata}}:</span></p>\n        {{/if}}\n        {{#if metadata}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n        {{/if}}\n        {{#if metadata_service}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata_service}}">{{translations.see_more_service}}</a></p>\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-btn-container">\n        {{#if capabilities}}\n            <a tabindex="0" class="m-layerswitcher-common-btn" href="{{capabilities}}" target="_blank">{{translations.service_info}}</a>\n        {{/if}}\n        {{#if downloadCenter}}\n            <a tabindex="0" class="m-layerswitcher-common-btn" href="{{downloadCenter}}" target="_blank">{{translations.download_center}}</a>\n        {{/if}}\n    </div>\n</div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n\n        <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.abstract}}:</span></p>\n        <div tabindex="0">\n            {{abstract}}\n        </div>\n        {{#if metadata}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n        {{/if}}\n        {{#gt attributes.length 0 }}\n            <div id="m-layerswitcher-tfoot">\n                <p tabindex="0"><span>{{translations.attributes}}:</span>&nbsp;</p>\n                <div class="m-layerswitcher-pagecontrolscontainer">\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-izquierda m-layerswitcher-hidden" id="m-layerswitcher-previous" aria-label="{{translations.previous}}"></span>\n                    </div>\n                    <span tabindex="0" id="m-layerswitcher-pageinfo">Página {{pages.actual}} de {{pages.total}}</span>\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-derecha m-layerswitcher-hidden" id="m-layerswitcher-next" aria-label="{{translations.next}}"></span>\n                    </div>\n                </div>\n            </div>\n            <table id="m-layerswitcher-table" class="m-layerswitcher-tablepagination">\n                <thead>\n                    <tr>\n                        {{#each headerAtt}}\n                            <td tabindex="0">{{this}}</td>\n                        {{/each}}\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#each attributes}}\n                        <tr>\n                            {{#each this.properties}}\n                                <td tabindex="0"> {{{this}}}</td>\n                            {{/each}}\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        {{/gt}}\n    </div>\n</div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n        <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n        {{#if numberFeatures}}\n            <p tabindex="0"><span>{{translations.n_obj_geo}}:</span>&nbsp; {{numberFeatures}}</p>\n        {{/if}}\n        {{#if extension}}\n            <p tabindex="0"><span>{{translations.extension}}:</span>&nbsp; [{{extension}}]</p>\n        {{/if}}\n        {{#if others.id}}\n            <p tabindex="0"><span>ID:</span>&nbsp; {{others.id}}</p>\n        {{/if}}\n        {{#if others.attribution}}\n            <p tabindex="0"><span>{{translations.attribution}}:</span>&nbsp; {{others.attribution}}</p>\n        {{/if}}\n        {{#if others.description}}\n            <p tabindex="0"><span>{{translations.description}}:</span>&nbsp; {{others.description}}</p>\n        {{/if}}\n        {{#if others.minzoom}}\n            <p tabindex="0"><span>{{translations.minzoom}}:</span>&nbsp; {{others.minzoom}}</p>\n        {{/if}}\n        {{#if others.maxzoom}}\n            <p tabindex="0"><span>{{translations.maxzoom}}:</span>&nbsp; {{others.maxzoom}}</p>\n        {{/if}}\n        {{#if others.center}}\n            <p tabindex="0"><span>{{translations.center}}:</span>&nbsp; [{{others.center}}]</p>\n        {{/if}}\n        {{#gt attributes.length 0 }}\n            <div id="m-layerswitcher-tfoot">\n                <p tabindex="0"><span>{{translations.attributes}}:</span>&nbsp;</p>\n                <div class="m-layerswitcher-pagecontrolscontainer">\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-izquierda m-layerswitcher-hidden" id="m-layerswitcher-previous" aria-label="{{translations.previous}}"></span>\n                    </div>\n                    <span id="m-layerswitcher-pageinfo">Página {{pages.actual}} de {{pages.total}}</span>\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-derecha m-layerswitcher-hidden" id="m-layerswitcher-next" aria-label="{{translations.next}}"></span>\n                    </div>\n                </div>\n            </div>\n            <table id="m-layerswitcher-table" class="m-layerswitcher-tablepagination">\n                <thead>\n                    <tr>\n                        {{#each headerAtt}}\n                            <td tabindex="0">{{this}}</td>\n                        {{/each}}\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#each attributes}}\n                        <tr>\n                            {{#each this.properties}}\n                                <td tabindex="0"> {{{this}}}</td>\n                            {{/each}}\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        {{/gt}}\n    </div>\n</div>'},function(e,t){e.exports='<div id="m-layerswitcher-style">\n    <div tabindex="0" class="m-layerswitcher-style-container">\n        <select tabindex="0" id="m-layerswitcher-style-select">\n            <option disabled="disabled" value="">{{translations.select_style}}</option>\n            {{#if isVectorLayer}}\n                {{#each styles}}\n                    {{#if this.options_.name}}\n                        <option value="{{@index}}">{{this.options_.name}}</option>\n                    {{else}}\n                        {{#eq @index 0}}\n                            <option value="{{@index}}">{{../translations.default_style}} </option>\n                        {{/eq}}\n                        {{#gt @index 0}}\n                            <option value="{{@index}}">{{../translations.style}} {{@index}}\n                        {{/gt}}\n                    {{/if}}\n\n                {{/each}}\n            {{else}}\n                {{#each styles}}\n                    <option value="{{Name}}">{{Title}}</option>\n                {{/each}}\n            {{/if}}\n        </select>\n    </div>\n    <div class="m-layerswitcher-style-btn-container">\n        <button tabindex="0" class="m-layerswitcher-style-common-btn">{{translations.change}}</button>\n    </div>\n</div>'},function(e,t){e.exports='<div class="m-layerswitcher-addservices">\n    <div class="m-layerswitcher-search-panel">\n        <div class="input-container">\n            <input tabindex="0" type="text" id="m-layerswitcher-addservices-search-input" placeholder="{{translations.url_service}}" class="m-layerswitcher-input-search" />\n            <span>\n                <button tabindex="0" id="m-layerswitcher-addservices-search-btn" class="m-layerswitcher-icons-zoom m-search-btn" title="{{translations.query}}"></button>\n                {{#if codsiActive}}\n                    <button tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-btn" class="m-layerswitcher-icons-codsi m-search-btn" title="{{translations.codsi_services}}"></button>\n                {{/if}}\n\n                {{#if hasPrecharged}}\n                    <button tabindex="0" role="button" id="m-layerswitcher-addservices-list-btn" class="m-layerswitcher-icons-lista m-search-btn" title="{{translations.loaded_services}}"></button>\n                {{/if}}\n            </span>\n        </div>\n        <div id="m-layerswitcher-ogcCContainer"></div>\n        <div id="m-layerswitcher-layerContainer"></div>\n    </div>\n    <div id="m-layerswitcher-addservices-suggestions" class="m-layerswitcher-addservices-suggestions">\n        <table>\n            {{#if precharged}}\n            <thead>\n                <tr>\n                    <th tabindex="0">{{translations.availables}}</th>\n                </tr>\n            </thead>\n            {{/if}}\n            <tbody>\n                {{#each precharged.groups}}\n                    <tr>\n                        <td>\n                            <button tabindex="0" role="button" class="m-layerswitcher-suggestion-caret">{{name}}</button>\n                            <ul class="m-layerswitcher-suggestion-group">\n                                {{#each services}}\n                                    <li><button tabindex="0" class="m-layerswitcher-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</button></li>\n                                {{/each}}\n                            </ul>\n                        </td>\n                    </tr>\n                {{/each}}\n                {{#each precharged.services}}\n                    <tr>\n                        <td><button tabindex="0" class="m-layerswitcher-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</button></td>\n                    </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n   \n    <div id="m-layerswitcher-addservices-codsi" style="display: none;">\n        <p><a tabindex="0" href="https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home" target="_blank">{{translations.codsi_services}}</a></p>\n        <div class="m-layerswitcher-addservices-codsi-search-panel">\n            <input tabindex="0" type="text" id="m-layerswitcher-addservices-codsi-search-input" placeholder="{{translations.filter_text}}" class="m-input-search" />\n            <span tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-filter-btn" class="m-layerswitcher-icons-zoom m-filter-btn" title="{{translations.filter_results}}"></span>\n            <span tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-clean-btn" class="m-layerswitcher-icons-papelera m-clean-btn" title="{{translations.clean_filter}}"></span>\n        </div>\n        <div>\n            <table>\n                <tbody id="m-layerswitcher-addservices-codsi-results"></tbody>\n            </table>\n        </div>\n        <div id="m-layerswitcher-addservices-codsi-pagination">\n        </div>\n    </div>\n    <div id="m-layerswitcher-addservices-results"></div>\n</div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-service-capabilities">\n        {{#if showgeneral}}\n            <p tabindex="0" class="m-layerswitcher-show-capabilities"><button tabindex="0" class="m-layerswitcher-icons-desplegar"></button>&nbsp;{{translations.show_service_info}} {{type}}</p>\n            <div class="m-layerswitcher-capabilities-container">\n                {{#if serviceCapabilities.title}}\n                    <p><span tabindex="0">{{translations.title}}:</span></p>\n                {{/if}}\n                {{#if serviceCapabilities.title}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.title}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.abstract}}\n                    <p>\n                        <span tabindex="0">{{translations.abstract}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.abstract}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.abstract}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.contact}}\n                    <p>\n                        <span tabindex="0">{{translations.responsible}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.contact}}\n                    <div tabindex="0">\n                        {{{serviceCapabilities.contact}}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.accessConstraints}}\n                    <p>\n                        <span tabindex="0">{{translations.access_constraints}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.accessConstraints}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.accessConstraints}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n        {{#if isWFS}}\n            <p tabindex="0" class="m-layerswitcher-show-capabilities-wfs"><button tabindex="0" class="m-layerswitcher-icons-desplegar"></button>&nbsp;{{translations.show_service_info}} WFS</p>\n            <div class="m-layerswitcher-capabilities-container-wfs">\n                {{#if serviceCapabilitieswfs.title}}\n                    <p><span tabindex="0">{{translations.title}}:</span></p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.title}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.title}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.abstract}}\n                    <p>\n                        <span tabindex="0">{{translations.abstract}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.abstract}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.abstract}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.contact}}\n                    <p>\n                        <span tabindex="0">{{translations.responsible}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.contact}}\n                    <div tabindex="0">\n                        {{{serviceCapabilitieswfs.contact}}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.accessConstraints}}\n                    <p>\n                        <span tabindex="0">{{translations.access_constraints}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.accessConstraints}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.accessConstraints}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-table-results">\n        <div class="m-layerswitcher-table-container">\n            {{#if showgeneral}}\n                <table id="m-layerswitcher-all">\n                    <thead>\n                        <tr tabindex="0">\n                            <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                            <th>{{translations.layers}} {{type}}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{#each result}}\n                            <tr tabindex="0">\n                                <td><span role="button" aria-label="{{translations.add_service}}" tabindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{legend}}</td>\n                            </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            {{/if}}\n            {{#if isWFS}}\n                <table id="m-layerswitcher-wfs">\n                    <thead>\n                        <tr tabindex="0">\n                            <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall-wfs" class="m-layerswitcher-icons-check"></button></th>\n                            <th>{{translations.layers}} WFS</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{#each layersWFS}}\n                            <tr tabindex="0">\n                                <td><span role="button" aria-label="{{translations.add_service}}" tabindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices-wfs m-layerswitcher-icons-check"></span></td>\n                                <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{title}}">{{title}}</td>\n                            </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            {{/if}}\n        </div>\n        <div class="button">\n            <button tabindex="0" type="button" class="m-layerswitcher-addservices-add m-layerswitcher-common-btn">{{translations.add}}</button>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<div id="m-layerswitcher-layerContainer">\n    {{#eq type \'geojson\'}}\n        <p>{{translations.data_layer}} GeoJSON</p>\n    {{/eq}}\n    {{#eq type \'osm\'}}\n        <p>{{translations.data_layer}} OSM</p>\n    {{/eq}}\n    {{#eq type \'tms\'}}\n        <p>{{translations.data_layer}} TMS</p>\n    {{/eq}}\n    {{#eq type \'xyz\'}}\n        <p>{{translations.data_layer}} XYZ</p>\n    {{/eq}}\n    {{#eq type \'mvt\'}}\n        <p>{{translations.data_layer}} MVT</p>\n        {{#gt layers.length 0}}\n            <div id="m-layerswitcher-addservices-results">\n                <div class="m-layerswitcher-table-results">\n                    <div class="m-layerswitcher-table-container">\n                        <table id="m-layerswitcher-all">\n                            <thead>\n                                <tr>\n                                    <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                                    <th>{{translations.layers}}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {{#each layers}}\n                                    <tr tabindex="0">\n                                        <td><span tabindex="0" aria-label="{{translations.add_service}}" role="button" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                        <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{name}}</td>\n                                    </tr>\n                                {{/each}}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        {{/gt}}\n    {{/eq}}\n    {{#eq type \'kml\'}}\n        <p>{{translations.data_layer}} KML</p>\n        {{#gt layers.length 0}}\n            <div id="m-layerswitcher-addservices-results">\n                <div class="m-layerswitcher-table-results">\n                    <div class="m-layerswitcher-table-container">\n                        <table id="m-layerswitcher-all">\n                            <thead>\n                                <tr tabindex="0">\n                                    <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                                    <th>{{translations.layers}}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {{#each layers}}\n                                    <tr tabindex="0">\n                                        <td><span aria-label="{{translations.add_service}}" role="button" abindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                        <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{name}}</td>\n                                    </tr>\n                                {{/each}}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        {{/gt}}\n    {{/eq}}\n    <div class="m-layerswitcher-layer-fields">\n        {{#if isMVT}}\n            {{#eq layers.length 0}}\n                <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-name">{{translations.name}}</label>\n                <input tabindex="0" type="text" id="m-layerswitcher-layer-name" placeholder="{{translations.separatedby}}" />\n            {{/eq}}\n        {{else}}\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-name">{{translations.name}}</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-name" />\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-layer-fields">\n        <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-legend">{{translations.legend}}</label>\n        <input tabindex="0" type="text" id="m-layerswitcher-layer-legend" placeholder="{{translations.placeHolderLegend}}"/>\n    </div>\n    {{#eq type \'osm\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'tms\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'xyz\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'mvt\'}}\n        \x3c!--<div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>--\x3e\n    {{/eq}}\n    <div class="button">\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-layer-button"> {{translations.add_btn}}</button>\n    </div>\n</div>'},function(e,t){e.exports='<form>\n    <div id="m-layerswitcher-ogc-search-formothers">\n        <div role="text" tabindex="0" class="m-layerswitcher-ogc-warning-msg m-layerswitcher-ogc-warning-msg-custom-query ">{{translations.custom_query_warning}}</div>\n        {{#each filtersList}}\n            {{#if this.title}}\n                {{#if this.bool}}\n                    <div class="m-layerswitcher-ogc-form-input">\n                        <div class="m-layerswitcher-ogc-more-width">\n                            <label tabindex="0" for="search-form-{{this.title}}">{{this.title}}</label>\n                        </div>\n                        <div class="m-layerswitcher-ogc-less-width">\n                            {{#if this.value}}\n                                {{#eq this.value "true"}}\n                                    <div><input tabindex="0" aria-label="true" type="checkbox" id="search-form-{{this.title}}" value="true" {{#eq this.value "true"}}checked{{/eq}}>true</div>\n                                    <div><input tabindex="0" aria-label="false" type="checkbox" id="search-form-{{this.title}}" value="false" {{#eq this.value "false"}}checked{{/eq}}>false</div>\n                                {{/eq}}\n                            {{else}}\n                                <div><input tabindex="0" aria-label="true"  type="checkbox" id="search-form-{{this.title}}" value="true">true</div>\n                                <div><input tabindex="0" aria-label="false" type="checkbox" id="search-form-{{this.title}}" value="false">false</div>\n                            {{/if}}\n                        </div>\n                        <br />\n                    </div>\n                {{else if this.date}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input">\n                            <label tabindex="0" for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label>\n                            <input tabindex="0" class="search-form-date" type="date" id="search-form-{{this.title}}" value="{{this.value}}">\n                            <br />\n                        </div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-date" type="date" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else if this.number}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-number" type="number" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-number" type="number" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input type="text" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input type="text" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        {{/each}}\n\n    </div>\n</form>'},function(e){e.exports=JSON.parse('{"url":{"name":"layerswitcher","separator":"*"},"constructor":"M.plugin.Layerswitcher","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","position":0,"possibleValues":["TL","TR","BL","BR"]},{"type":"boolean","name":"collapsed","position":1},{"type":"boolean","name":"collapsible","position":2},{"type":"simple","name":"tooltip","position":3},{"type":"boolean","name":"isDraggable","position":4},{"type":"boolean","name":"isMoveLayers","position":5},{"type":"simple","name":"modeSelectLayers","position":6},{"type":"simple","name":"tools","position":7},{"type":"boolean","name":"http","position":8},{"type":"boolean","name":"https","position":9},{"type":"boolean","name":"showCatalog","position":10},{"type":"boolean","name":"useProxy","position":11}]}],"files":{"ol":{"scripts":["layerswitcher.ol.min.js"],"styles":["layerswitcher.ol.min.css"]}},"metadata":{"name":"layerswitcher","description":"Extensión que permite listar y gestionar los servicios añadidos en el mapa. Además permite añadir servicios de forma fácil y rápida.","version":"1.0.0","date":"2023-09-14","author":"Guadaltel","org":"CNIG","tags":"plugin"}}')},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(14),i(15);
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){n(e,t,i[t])}))}return e}function o(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function l(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=l(/Edge/i),u=l(/firefox/i),h=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),p=l(/iP(ad|od|hone)/i),m=l(/chrome/i)&&l(/android/i),y={capture:!1,passive:!1};function f(e,t,i){e.addEventListener(t,i,!c&&y)}function v(e,t,i){e.removeEventListener(t,i,!c&&y)}function g(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function b(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function w(e,t,i,r){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&g(e,t):g(e,t))||r&&e===i)return e;if(e===i)break}while(e=b(e))}return null}var _,S=/\s+/g;function x(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(S," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(S," ")}}function k(e,t,i){var r=e&&e.style;if(r){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=i+("string"==typeof i?"":"px")}}function C(e,t){var i="";if("string"==typeof e)i=e;else do{var r=k(e,"transform");r&&"none"!==r&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function O(e,t,i){if(e){var r=e.getElementsByTagName(t),n=0,a=r.length;if(i)for(;n<a;n++)i(r[n],n);return r}return[]}function L(){var e=document.scrollingElement;return e||document.documentElement}function E(e,t,i,r,n){if(e.getBoundingClientRect||e===window){var a,s,o,l,d,u,h;if(e!==window&&e!==L()?(s=(a=e.getBoundingClientRect()).top,o=a.left,l=a.bottom,d=a.right,u=a.height,h=a.width):(s=0,o=0,l=window.innerHeight,d=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(n=n||e.parentNode,!c))do{if(n&&n.getBoundingClientRect&&("none"!==k(n,"transform")||i&&"static"!==k(n,"position"))){var p=n.getBoundingClientRect();s-=p.top+parseInt(k(n,"border-top-width")),o-=p.left+parseInt(k(n,"border-left-width")),l=s+a.height,d=o+a.width;break}}while(n=n.parentNode);if(r&&e!==window){var m=C(n||e),y=m&&m.a,f=m&&m.d;m&&(l=(s/=f)+(u/=f),d=(o/=y)+(h/=y))}return{top:s,left:o,bottom:l,right:d,width:h,height:u}}}function T(e,t,i){for(var r=N(e,!0),n=E(e)[t];r;){var a=E(r)[i];if(!("top"===i||"left"===i?n>=a:n<=a))return r;if(r===L())break;r=N(r,!1)}return!1}function q(e,t,i){for(var r=0,n=0,a=e.children;n<a.length;){if("none"!==a[n].style.display&&a[n]!==je.ghost&&a[n]!==je.dragged&&w(a[n],i.draggable,e,!1)){if(r===t)return a[n];r++}n++}return null}function P(e,t){for(var i=e.lastElementChild;i&&(i===je.ghost||"none"===k(i,"display")||t&&!g(i,t));)i=i.previousElementSibling;return i||null}function A(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===je.clone||t&&!g(e,t)||i++;return i}function D(e){var t=0,i=0,r=L();if(e)do{var n=C(e),a=n.a,s=n.d;t+=e.scrollLeft*a,i+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,i]}function N(e,t){if(!e||!e.getBoundingClientRect)return L();var i=e,r=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=k(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return L();if(r||t)return i;r=!0}}}while(i=i.parentNode);return L()}function I(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function R(e,t){return function(){if(!_){var i=arguments,r=this;1===i.length?e.call(r,i[0]):e.apply(r,i),_=setTimeout((function(){_=void 0}),t)}}}function j(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function F(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var W="Sortable"+(new Date).getTime();function B(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==k(e,"display")&&e!==je.ghost){t.push({target:e,rect:E(e)});var i=s({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=C(e,!0);r&&(i.top-=r.f,i.left-=r.e)}e.fromRect=i}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var n=!1,a=0;t.forEach((function(e){var t=0,i=e.target,s=i.fromRect,o=E(i),l=i.prevFromRect,c=i.prevToRect,d=e.rect,u=C(i,!0);u&&(o.top-=u.f,o.left-=u.e),i.toRect=o,i.thisAnimationDuration&&I(l,o)&&!I(s,o)&&(d.top-o.top)/(d.left-o.left)==(s.top-o.top)/(s.left-o.left)&&(t=function(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}(d,l,c,r.options)),I(o,s)||(i.prevFromRect=s,i.prevToRect=o,t||(t=r.options.animation),r.animate(i,d,o,t)),t&&(n=!0,a=Math.max(a,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"==typeof i&&i()}),a):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,r){if(r){k(e,"transition",""),k(e,"transform","");var n=C(this.el),a=n&&n.a,s=n&&n.d,o=(t.left-i.left)/(a||1),l=(t.top-i.top)/(s||1);e.animatingX=!!o,e.animatingY=!!l,k(e,"transform","translate3d("+o+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),k(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),k(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){k(e,"transition",""),k(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var H=[],U={initializeByDefault:!0},V={mount:function(e){for(var t in U)U.hasOwnProperty(t)&&!(t in e)&&(e[t]=U[t]);H.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var n=e+"Global";H.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][n]&&t[r.pluginName][n](s({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](s({sortable:t},i)))}))},initializePlugins:function(e,t,i,r){for(var n in H.forEach((function(r){var n=r.pluginName;if(e.options[n]||r.initializeByDefault){var s=new r(e,t,e.options);s.sortable=e,s.options=e.options,e[n]=s,a(i,s.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var s=this.modifyOption(e,n,e.options[n]);void 0!==s&&(e.options[n]=s)}},getEventProperties:function(e,t){var i={};return H.forEach((function(r){"function"==typeof r.eventProperties&&a(i,r.eventProperties.call(t[r.pluginName],e))})),i},modifyOption:function(e,t,i){var r;return H.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[t]&&(r=n.optionListeners[t].call(e[n.pluginName],i))})),r}};function z(e){var t=e.sortable,i=e.rootEl,r=e.name,n=e.targetEl,a=e.cloneEl,o=e.toEl,l=e.fromEl,u=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,m=e.newDraggableIndex,y=e.originalEvent,f=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[W]){var g,b=t.options,w="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||c||d?(g=document.createEvent("Event")).initEvent(r,!0,!0):g=new CustomEvent(r,{bubbles:!0,cancelable:!0}),g.to=o||i,g.from=l||i,g.item=n||i,g.clone=a,g.oldIndex=u,g.newIndex=h,g.oldDraggableIndex=p,g.newDraggableIndex=m,g.originalEvent=y,g.pullMode=f?f.lastPutMode:void 0;var _=s({},v,V.getEventProperties(r,t));for(var S in _)g[S]=_[S];i&&i.dispatchEvent(g),b[w]&&b[w].call(t,g)}}var G=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.evt,n=o(i,["evt"]);V.pluginEvent.bind(je)(e,t,s({dragEl:X,parentEl:Z,ghostEl:J,rootEl:K,nextEl:$,lastDownEl:Q,cloneEl:ee,cloneHidden:te,dragStarted:me,putSortable:oe,activeSortable:je.active,originalEvent:r,oldIndex:ie,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:ae,hideGhostForTarget:De,unhideGhostForTarget:Ne,cloneNowHidden:function(){te=!0},cloneNowShown:function(){te=!1},dispatchSortableEvent:function(e){Y({sortable:t,name:e,originalEvent:r})}},n))};function Y(e){z(s({putSortable:oe,cloneEl:ee,targetEl:X,rootEl:K,oldIndex:ie,oldDraggableIndex:ne,newIndex:re,newDraggableIndex:ae},e))}var X,Z,J,K,$,Q,ee,te,ie,re,ne,ae,se,oe,le,ce,de,ue,he,pe,me,ye,fe,ve,ge,be=!1,we=!1,_e=[],Se=!1,xe=!1,Me=[],ke=!1,Ce=[],Oe="undefined"!=typeof document,Le=p,Ee=d||c?"cssFloat":"float",Te=Oe&&!m&&!p&&"draggable"in document.createElement("div"),qe=function(){if(Oe){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Pe=function(e,t){var i=k(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=q(e,0,t),a=q(e,1,t),s=n&&k(n),o=a&&k(a),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+E(n).width,c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+E(a).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return!a||"both"!==o.clear&&o.clear!==d?"horizontal":"vertical"}return n&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=r&&"none"===i[Ee]||a&&"none"===i[Ee]&&l+c>r)?"vertical":"horizontal"},Ae=function(e){function t(e,i){return function(r,n,a,s){var o=r.options.group.name&&n.options.group.name&&r.options.group.name===n.options.group.name;if(null==e&&(i||o))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(r,n,a,s),i)(r,n,a,s);var l=(i?r:n).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},n=e.group;n&&"object"==r(n)||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},De=function(){!qe&&J&&k(J,"display","none")},Ne=function(){!qe&&J&&k(J,"display","")};Oe&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var Ie=function(e){if(X){e=e.touches?e.touches[0]:e;var t=(n=e.clientX,a=e.clientY,_e.some((function(e){if(!P(e)){var t=E(e),i=e[W].options.emptyInsertThreshold,r=n>=t.left-i&&n<=t.right+i,o=a>=t.top-i&&a<=t.bottom+i;return i&&r&&o?s=e:void 0}})),s);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[W]._onDragOver(i)}}var n,a,s},Re=function(e){X&&X.parentNode[W]._isOutsideThisEl(e.target)};function je(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[W]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Pe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==je.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in V.initializePlugins(this,e,i),i)!(r in t)&&(t[r]=i[r]);for(var n in Ae(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Te,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?f(e,"pointerdown",this._onTapStart):(f(e,"mousedown",this._onTapStart),f(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(e,"dragover",this),f(e,"dragenter",this)),_e.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,B())}function Fe(e,t,i,r,n,a,s,o){var l,u,h=e[W],p=h.options.onMove;return!window.CustomEvent||c||d?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=r,l.related=n||t,l.relatedRect=a||E(t),l.willInsertAfter=o,l.originalEvent=s,e.dispatchEvent(l),p&&(u=p.call(h,l,s)),u}function We(e){e.draggable=!1}function Be(){ke=!1}function He(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function Ue(e){return setTimeout(e,0)}function Ve(e){return clearTimeout(e)}je.prototype={constructor:je,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,n=r.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,o=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||o,c=r.filter;if(function(e){Ce.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var r=t[i];r.checked&&Ce.push(r)}}(i),!X&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled||l.isContentEditable||(o=w(o,r.draggable,i,!1))&&o.animated||Q===o)){if(ie=A(o),ne=A(o,r.draggable),"function"==typeof c){if(c.call(this,e,o,this))return Y({sortable:t,rootEl:l,name:"filter",targetEl:o,toEl:i,fromEl:i}),G("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=w(l,r.trim(),i,!1))return Y({sortable:t,rootEl:r,name:"filter",targetEl:o,fromEl:i,toEl:i}),G("filter",t,{evt:e}),!0}))))return void(n&&e.cancelable&&e.preventDefault());r.handle&&!w(l,r.handle,i,!1)||this._prepareDragStart(e,s,o)}}},_prepareDragStart:function(e,t,i){var r,n=this,a=n.el,s=n.options,o=a.ownerDocument;if(i&&!X&&i.parentNode===a){var l=E(i);if(K=a,Z=(X=i).parentNode,$=X.nextSibling,Q=i,se=s.group,je.dragged=X,le={target:X,clientX:(t||e).clientX,clientY:(t||e).clientY},he=le.clientX-l.left,pe=le.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,X.style["will-change"]="all",r=function(){G("delayEnded",n,{evt:e}),je.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!u&&n.nativeDraggable&&(X.draggable=!0),n._triggerDragStart(e,t),Y({sortable:n,name:"choose",originalEvent:e}),x(X,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){O(X,e.trim(),We)})),f(o,"dragover",Ie),f(o,"mousemove",Ie),f(o,"touchmove",Ie),f(o,"mouseup",n._onDrop),f(o,"touchend",n._onDrop),f(o,"touchcancel",n._onDrop),u&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),G("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||c))r();else{if(je.eventCanceled)return void this._onDrop();f(o,"mouseup",n._disableDelayedDrag),f(o,"touchend",n._disableDelayedDrag),f(o,"touchcancel",n._disableDelayedDrag),f(o,"mousemove",n._delayedDragTouchMoveHandler),f(o,"touchmove",n._delayedDragTouchMoveHandler),s.supportPointer&&f(o,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(r,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&We(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._disableDelayedDrag),v(e,"touchend",this._disableDelayedDrag),v(e,"touchcancel",this._disableDelayedDrag),v(e,"mousemove",this._delayedDragTouchMoveHandler),v(e,"touchmove",this._delayedDragTouchMoveHandler),v(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?f(document,"pointermove",this._onTouchMove):f(document,t?"touchmove":"mousemove",this._onTouchMove):(f(X,"dragend",this),f(K,"dragstart",this._onDragStart));try{document.selection?Ue((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(be=!1,K&&X){G("dragStarted",this,{evt:t}),this.nativeDraggable&&f(document,"dragover",Re);var i=this.options;!e&&x(X,i.dragClass,!1),x(X,i.ghostClass,!0),je.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,De();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY))!==t;)t=e;if(X.parentNode[W]._isOutsideThisEl(e),t)do{if(t[W]){if(t[W]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ne()}},_onTouchMove:function(e){if(le){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,n=e.touches?e.touches[0]:e,a=J&&C(J,!0),s=J&&a&&a.a,o=J&&a&&a.d,l=Le&&ge&&D(ge),c=(n.clientX-le.clientX+r.x)/(s||1)+(l?l[0]-Me[0]:0)/(s||1),d=(n.clientY-le.clientY+r.y)/(o||1)+(l?l[1]-Me[1]:0)/(o||1);if(!je.active&&!be){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(J){a?(a.e+=c-(de||0),a.f+=d-(ue||0)):a={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");k(J,"webkitTransform",u),k(J,"mozTransform",u),k(J,"msTransform",u),k(J,"transform",u),de=c,ue=d,ce=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!J){var e=this.options.fallbackOnBody?document.body:K,t=E(X,!0,Le,!0,e),i=this.options;if(Le){for(ge=e;"static"===k(ge,"position")&&"none"===k(ge,"transform")&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=L()),t.top+=ge.scrollTop,t.left+=ge.scrollLeft):ge=L(),Me=D(ge)}x(J=X.cloneNode(!0),i.ghostClass,!1),x(J,i.fallbackClass,!0),x(J,i.dragClass,!0),k(J,"transition",""),k(J,"transform",""),k(J,"box-sizing","border-box"),k(J,"margin",0),k(J,"top",t.top),k(J,"left",t.left),k(J,"width",t.width),k(J,"height",t.height),k(J,"opacity","0.8"),k(J,"position",Le?"absolute":"fixed"),k(J,"zIndex","100000"),k(J,"pointerEvents","none"),je.ghost=J,e.appendChild(J),k(J,"transform-origin",he/parseInt(J.style.width)*100+"% "+pe/parseInt(J.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,n=i.options;G("dragStart",this,{evt:e}),je.eventCanceled?this._onDrop():(G("setupClone",this),je.eventCanceled||((ee=F(X)).draggable=!1,ee.style["will-change"]="",this._hideClone(),x(ee,this.options.chosenClass,!1),je.clone=ee),i.cloneId=Ue((function(){G("clone",i),je.eventCanceled||(i.options.removeCloneOnHide||K.insertBefore(ee,X),i._hideClone(),Y({sortable:i,name:"clone"}))})),!t&&x(X,n.dragClass,!0),t?(we=!0,i._loopId=setInterval(i._emulateDragOver,50)):(v(document,"mouseup",i._onDrop),v(document,"touchend",i._onDrop),v(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",n.setData&&n.setData.call(i,r,X)),f(document,"drop",i),k(X,"transform","translateZ(0)")),be=!0,i._dragStartId=Ue(i._dragStarted.bind(i,t,e)),f(document,"selectstart",i),me=!0,h&&k(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,r,n,a=this.el,o=e.target,l=this.options,c=l.group,d=je.active,u=se===c,h=l.sort,p=oe||d,m=this,y=!1;if(!ke){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),o=w(o,l.draggable,a,!0),I("dragOver"),je.eventCanceled)return y;if(X.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||m._ignoreWhileAnimating===o)return F(!1);if(we=!1,d&&!l.disabled&&(u?h||(r=!K.contains(X)):oe===this||(this.lastPutMode=se.checkPull(this,d,X,e))&&c.checkPut(this,d,X,e))){if(n="vertical"===this._getDirection(e,o),t=E(X),I("dragOverValid"),je.eventCanceled)return y;if(r)return Z=K,R(),this._hideClone(),I("revert"),je.eventCanceled||($?K.insertBefore(X,$):K.appendChild(X)),F(!0);var f=P(a,l.draggable);if(!f||function(e,t,i){var r=E(P(i.el,i.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,n,this)&&!f.animated){if(f===X)return F(!1);if(f&&a===e.target&&(o=f),o&&(i=E(o)),!1!==Fe(K,a,X,t,o,i,e,!!o))return R(),a.appendChild(X),Z=a,B(),F(!0)}else if(o.parentNode===a){i=E(o);var v,g,b,_=X.parentNode!==a,S=!function(e,t,i){var r=i?e.left:e.top,n=i?e.right:e.bottom,a=i?e.width:e.height,s=i?t.left:t.top,o=i?t.right:t.bottom,l=i?t.width:t.height;return r===s||n===o||r+a/2===s+l/2}(X.animated&&X.toRect||t,o.animated&&o.toRect||i,n),M=n?"top":"left",C=T(o,"top","top")||T(X,"top","top"),O=C?C.scrollTop:void 0;if(ye!==o&&(g=i[M],Se=!1,xe=!S&&l.invertSwap||_),0!==(v=function(e,t,i,r,n,a,s,o){var l=r?e.clientY:e.clientX,c=r?i.height:i.width,d=r?i.top:i.left,u=r?i.bottom:i.right,h=!1;if(!s)if(o&&ve<c*n){if(!Se&&(1===fe?l>d+c*a/2:l<u-c*a/2)&&(Se=!0),Se)h=!0;else if(1===fe?l<d+ve:l>u-ve)return-fe}else if(l>d+c*(1-n)/2&&l<u-c*(1-n)/2)return function(e){return A(X)<A(e)?1:-1}(t);if((h=h||s)&&(l<d+c*a/2||l>u-c*a/2))return l>d+c/2?1:-1;return 0}(e,o,i,n,S?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,xe,ye===o))){var L=A(X);do{L-=v,b=Z.children[L]}while(b&&("none"===k(b,"display")||b===J))}if(0===v||b===o)return F(!1);ye=o,fe=v;var q=o.nextElementSibling,D=!1,N=Fe(K,a,X,t,o,i,e,D=1===v);if(!1!==N)return 1!==N&&-1!==N||(D=1===N),ke=!0,setTimeout(Be,30),R(),D&&!q?a.appendChild(X):o.parentNode.insertBefore(X,D?q:o),C&&j(C,0,O-C.scrollTop),Z=X.parentNode,void 0===g||xe||(ve=Math.abs(g-E(o)[M])),B(),F(!0)}if(a.contains(X))return F(!1)}return!1}function I(l,c){G(l,m,s({evt:e,isOwner:u,axis:n?"vertical":"horizontal",revert:r,dragRect:t,targetRect:i,canSort:h,fromSortable:p,target:o,completed:F,onMove:function(i,r){return Fe(K,a,X,t,i,E(i),e,r)},changed:B},c))}function R(){I("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function F(t){return I("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(m),m!==p&&(x(X,oe?oe.options.ghostClass:d.options.ghostClass,!1),x(X,l.ghostClass,!0)),oe!==m&&m!==je.active?oe=m:m===je.active&&oe&&(oe=null),p===m&&(m._ignoreWhileAnimating=o),m.animateAll((function(){I("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(o===X&&!X.animated||o===a&&!o.animated)&&(ye=null),l.dragoverBubble||e.rootEl||o===document||(X.parentNode[W]._isOutsideThisEl(e.target),!t&&Ie(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function B(){re=A(X),ae=A(X,l.draggable),Y({sortable:m,name:"change",toEl:a,newIndex:re,newDraggableIndex:ae,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",Ie),v(document,"mousemove",Ie),v(document,"touchmove",Ie)},_offUpEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._onDrop),v(e,"touchend",this._onDrop),v(e,"pointerup",this._onDrop),v(e,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;re=A(X),ae=A(X,i.draggable),G("drop",this,{evt:e}),Z=X&&X.parentNode,re=A(X),ae=A(X,i.draggable),je.eventCanceled||(be=!1,xe=!1,Se=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ve(this.cloneId),Ve(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&k(document.body,"user-select",""),k(X,"transform",""),e&&(me&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(K===Z||oe&&"clone"!==oe.lastPutMode)&&ee&&ee.parentNode&&ee.parentNode.removeChild(ee),X&&(this.nativeDraggable&&v(X,"dragend",this),We(X),X.style["will-change"]="",me&&!be&&x(X,oe?oe.options.ghostClass:this.options.ghostClass,!1),x(X,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==Z?(re>=0&&(Y({rootEl:Z,name:"add",toEl:Z,fromEl:K,originalEvent:e}),Y({sortable:this,name:"remove",toEl:Z,originalEvent:e}),Y({rootEl:Z,name:"sort",toEl:Z,fromEl:K,originalEvent:e}),Y({sortable:this,name:"sort",toEl:Z,originalEvent:e})),oe&&oe.save()):re!==ie&&re>=0&&(Y({sortable:this,name:"update",toEl:Z,originalEvent:e}),Y({sortable:this,name:"sort",toEl:Z,originalEvent:e})),je.active&&(null!=re&&-1!==re||(re=ie,ae=ne),Y({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){G("nulling",this),K=X=Z=J=$=ee=Q=te=le=ce=me=re=ae=ie=ne=ye=fe=oe=se=je.dragged=je.ghost=je.clone=je.active=null,Ce.forEach((function(e){e.checked=!0})),Ce.length=de=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,r=0,n=i.length,a=this.options;r<n;r++)w(e=i[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||He(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach((function(e,r){var n=i.children[r];w(n,this.options.draggable,i,!1)&&(t[e]=n)}),this),e.forEach((function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return w(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var r=V.modifyOption(this,e,t);i[e]=void 0!==r?r:t,"group"===e&&Ae(i)},destroy:function(){G("destroy",this);var e=this.el;e[W]=null,v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart),v(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),_e.splice(_e.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!te){if(G("hideClone",this),je.eventCanceled)return;k(ee,"display","none"),this.options.removeCloneOnHide&&ee.parentNode&&ee.parentNode.removeChild(ee),te=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(te){if(G("showClone",this),je.eventCanceled)return;K.contains(X)&&!this.options.group.revertClone?K.insertBefore(ee,X):$?K.insertBefore(ee,$):K.appendChild(ee),this.options.group.revertClone&&this.animate(X,ee),k(ee,"display",""),te=!1}}else this._hideClone()}},Oe&&f(document,"touchmove",(function(e){(je.active||be)&&e.cancelable&&e.preventDefault()})),je.utils={on:f,off:v,css:k,find:O,is:function(e,t){return!!w(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:R,closest:w,toggleClass:x,clone:F,index:A,nextTick:Ue,cancelNextTick:Ve,detectDirection:Pe,getChild:q},je.get=function(e){return e[W]},je.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(je.utils=s({},je.utils,e.utils)),V.mount(e)}))},je.create=function(e,t){return new je(e,t)},je.version="1.10.2";var ze,Ge,Ye,Xe,Ze,Je,Ke=[],$e=!1;function Qe(){Ke.forEach((function(e){clearInterval(e.pid)})),Ke=[]}function et(){clearInterval(Je)}var tt=R((function(e,t,i,r){if(t.scroll){var n,a=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,l=t.scrollSpeed,c=L(),d=!1;Ge!==i&&(Ge=i,Qe(),ze=t.scroll,n=t.scrollFn,!0===ze&&(ze=N(i,!0)));var u=0,h=ze;do{var p=h,m=E(p),y=m.top,f=m.bottom,v=m.left,g=m.right,b=m.width,w=m.height,_=void 0,S=void 0,x=p.scrollWidth,M=p.scrollHeight,C=k(p),O=p.scrollLeft,T=p.scrollTop;p===c?(_=b<x&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),S=w<M&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(_=b<x&&("auto"===C.overflowX||"scroll"===C.overflowX),S=w<M&&("auto"===C.overflowY||"scroll"===C.overflowY));var q=_&&(Math.abs(g-a)<=o&&O+b<x)-(Math.abs(v-a)<=o&&!!O),P=S&&(Math.abs(f-s)<=o&&T+w<M)-(Math.abs(y-s)<=o&&!!T);if(!Ke[u])for(var A=0;A<=u;A++)Ke[A]||(Ke[A]={});Ke[u].vx==q&&Ke[u].vy==P&&Ke[u].el===p||(Ke[u].el=p,Ke[u].vx=q,Ke[u].vy=P,clearInterval(Ke[u].pid),0==q&&0==P||(d=!0,Ke[u].pid=setInterval(function(){r&&0===this.layer&&je.active._onTouchMove(Ze);var t=Ke[this.layer].vy?Ke[this.layer].vy*l:0,i=Ke[this.layer].vx?Ke[this.layer].vx*l:0;"function"==typeof n&&"continue"!==n.call(je.dragged.parentNode[W],i,t,e,Ze,Ke[this.layer].el)||j(Ke[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==c&&(h=N(h,!1)));$e=d}}),30),it=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,n=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,o=e.unhideGhostForTarget;if(t){var l=i||n;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);o(),l&&!l.el.contains(d)&&(a("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function rt(){}function nt(){}rt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=q(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:it},a(rt,{pluginName:"revertOnSpill"}),nt.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:it},a(nt,{pluginName:"removeOnSpill"});je.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):this.options.supportPointer?f(document,"pointermove",this._handleFallbackAutoScroll):t.touches?f(document,"touchmove",this._handleFallbackAutoScroll):f(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),et(),Qe(),clearTimeout(_),_=void 0},nulling:function(){Ze=Ge=ze=$e=Je=Ye=Xe=null,Ke.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,r=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,n);if(Ze=e,t||d||c||h){tt(e,this.options,a,t);var s=N(a,!0);!$e||Je&&r===Ye&&n===Xe||(Je&&et(),Je=setInterval((function(){var a=N(document.elementFromPoint(r,n),!0);a!==s&&(s=a,Qe()),tt(e,i.options,a,t)}),10),Ye=r,Xe=n)}else{if(!this.options.bubbleScroll||N(a,!0)===L())return void Qe();tt(e,this.options,N(a,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),je.mount(nt,rt);var at=je;function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ct(r.key),r)}}function ct(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:String(t)}function dt(e,t,i){return t=pt(t),function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],pt(e).constructor):t.apply(e,i))}function ut(){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=ht(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:i):n.value}}).apply(this,arguments)}function ht(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pt(e)););return e}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yt=function(e){function t(){return ot(this,t),dt(this,t,arguments)}var i,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(t,M.impl.Control),i=t,(r=[{key:"addTo",value:function(e,i){this.facadeMap_=e,ut(pt(t.prototype),"addTo",this).call(this,e,i)}},{key:"registerEvent",value:function(e){this.facadeMap_=e,this.fnRender=this.renderControl.bind(this),M.utils.isNullOrEmpty(e)||(this.olMap=e.getMapImpl(),this.olMap.on("rendercomplete",this.fnRender))}},{key:"renderControl",value:function(){this.facadeControl.render()}},{key:"removeRenderComplete",value:function(){M.utils.isNullOrEmpty(this.olMap)||(this.olMap.un("rendercomplete",this.fnRender),this.fnRender=null)}},{key:"getTransformedCoordinates",value:function(e,t){var i=ol.proj.getTransform(e,"EPSG:4326");return this.getFullCoordinates(t,i(this.getXY(t)))}},{key:"getFullCoordinates",value:function(e,t){var i=e;return i[0]=t[0],i[1]=t[1],i}},{key:"getXY",value:function(e){for(var t=[],i=0;i<e.length;i+=1)t.push(e[i]);for(;t.length>2;)t.pop();return t}},{key:"destroy",value:function(){this.removeRenderComplete()}}])&&lt(i.prototype,r),n&&lt(i,n),Object.defineProperty(i,"prototype",{writable:!1}),t}(),ft=i(3),vt=i.n(ft),gt=i(4),bt=i.n(gt),wt=i(0),_t=i(1),St={en:wt,es:_t},xt=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},Mt=function(e){return"es"===e||"en"===e?St[e]:M.language.getTranslation(e).layerswitcher},kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt(),i=Mt(t),r="";return M.utils.isNullOrEmpty(i)?console.warn("The translation '".concat(t,"' has not been defined.")):r=e.split(".").reduce((function(e,t){return e[t]}),i),r},Ct=i(5),Ot=i.n(Ct),Lt=i(6),Et=i.n(Lt),Tt=i(7),qt=i.n(Tt),Pt=i(8),At=i.n(Pt),Dt=i(9),Nt=i.n(Dt),It=i(10),Rt=i.n(It),jt=i(2),Ft=i.n(jt),Wt=i(11),Bt=i.n(Wt),Ht=i(12),Ut=i.n(Ht);function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e){return function(e){if(Array.isArray(e))return Gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zt(r.key),r)}}function Zt(e){var t=function(e,t){if("object"!=Vt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vt(t)?t:String(t)}function Jt(e,t,i){return t=Kt(t),function(e,t){if(t&&("object"===Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $t(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],Kt(e).constructor):t.apply(e,i))}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t){return(Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ei="#m-layerswitcher-addservices-codsi",ti="#m-layerswitcher-addservices-codsi-btn",ii="#m-layerswitcher-addservices-search-input",ri="#m-layerswitcher-addservices-results",ni="#m-layerswitcher-layerContainer",ai="#m-layerswitcher-addservices-list-btn",si="#m-layerswitcher-addservices-search-btn",oi=[1,2,3],li=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yt(this,t),M.utils.isUndefined(yt)&&M.exception(kt("exception.impl"));var r=new yt;return e=Jt(this,t,[r,"Layerswitcher"]),r.facadeControl=$t(e),e.pages_={total:0,actual:1,element:0},e.numPages_=5,e.map_=void 0,e.template_=void 0,e.isDraggable_=i.isDraggable,e.modeSelectLayers=i.modeSelectLayers,e.isCheckedLayerRadio=!1,e.overlayLayers=[],e.statusShowHideAllLayers=!0,e.tools=i.tools,e.isTransparency=!1,e.isLegend=!1,e.isZoom=!1,e.isInformation=!1,e.isStyle=!1,e.isDelete=!1,e.isMoveLayers=i.isMoveLayers,e.collapsed=i.collapsed,e.precharged=i.precharged,e.http=i.http,e.https=i.https,e.filterName=void 0,e.stateSelectAll=!1,e.codsiActive=i.showCatalog,e.useProxy=i.useProxy,e.statusProxy=i.statusProxy,e.select_codsi=1,e.displayLabel=i.displayLabel,e.order=i.order,e.useAttributions_=i.useAttributions,e}var i,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}(t,M.Control),i=t,(r=[{key:"createView",value:function(e){var t=this;return this.map_=e,M.utils.isString(this.tools)&&(this.tools=this.tools.split(",")),this.tools.forEach((function(e){"transparency"===e&&(t.isTransparency=!0),"legend"===e&&(t.isLegend=!0),"zoom"===e&&(t.isZoom=!0),"information"===e&&(t.isInformation=!0),"style"===e&&(t.isStyle=!0),"delete"===e&&(t.isDelete=!0)})),e.on(M.evt.ADDED_LAYER,(function(e){"radio"===t.modeSelectLayers&&!0===t.isCheckedLayerRadio&&e.forEach((function(e){e.setVisible(!1)}))})),new Promise((function(i){t.getTemplateVariables(e).then((function(r){var n=M.template.compileSync(vt.a,{vars:r});t.template_=n,t.template_.addEventListener("click",t.clickLayer.bind(t),!1),t.template_.addEventListener("input",t.inputLayer.bind(t),!1),t.getImpl().registerEvent(e),t.template_.querySelector("#m-layerswitcher-addlayers").addEventListener("click",t.openAddServices.bind(t),!1),t.accessibilityTab(t.template_),i(t.template_)}))}))}},{key:"addEventPanel",value:function(e){var t=this;e.getButtonPanel().parentElement.classList.contains("collapsed")&&setTimeout((function(){t.getImpl().removeRenderComplete()}),501),e.getButtonPanel().addEventListener("click",this.collapsedPlugin.bind(this),!1),this.isDraggable_&&M.utils.draggabillyPlugin(e,"#m-layerswitcher-title")}},{key:"eventsPanel",value:function(e){e.getButtonPanel().parentElement.classList.contains("collapsed")&&this.getImpl().removeRenderComplete(),e.getButtonPanel().addEventListener("click",this.collapsedPlugin.bind(this),!1),this.isDraggable_&&M.utils.draggabillyPlugin(e,"#m-layerswitcher-title")}},{key:"getTemplateVariables",value:function(e){var t=this;return new Promise((function(i,r){M.utils.isNullOrEmpty(e)||(t.overlayLayers=e.getRootLayers().filter((function(e){var t=!0===e.transparent,i=!0===e.displayInLayerSwitcher;return t&&i})),t.overlayLayers=t.reorderLayers(t.overlayLayers),Promise.all(t.overlayLayers.map(t.parseLayerForTemplate_.bind(t))).then((function(e){i({overlayLayers:e,translations:{layers:kt("layers"),show_hide:kt("show_hide"),hide_service:kt("hide_service"),show_service:kt("show_service"),show_all_services:kt("show_all_services"),hide_all_services:kt("hide_all_services"),zoom:kt("zoom"),info_metadata:kt("info_metadata"),remove_layer:kt("remove_layer"),change_style:kt("change_style")},allVisible:!t.statusShowHideAllLayers,isRadio:"radio"===t.modeSelectLayers,isEyes:"eyes"===t.modeSelectLayers,isTransparency:t.isTransparency,isLegend:t.isLegend,isZoom:t.isZoom,isInformation:t.isInformation,isStyle:t.isStyle,isDelete:t.isDelete,displayLabel:!t.displayLabel})})))}))}},{key:"reorderLayers",value:function(e){return e.sort((function(e,t){return e.getZIndex()-t.getZIndex()})).reverse()}},{key:"parseLayerForTemplate_",value:function(e){var t=e.legend||e.name,i=!M.utils.isNullOrEmpty(e.capabilitiesMetadata)&&!M.utils.isNullOrEmpty(e.capabilitiesMetadata.abstract);return new Promise((function(r){var n=i&&e.capabilitiesMetadata.style.length>1||e instanceof M.layer.Vector&&!M.utils.isNullOrEmpty(e.predefinedStyles)&&e.predefinedStyles.length>1;"KML"===e.type&&(e.options.extractStyles||M.utils.isUndefined(e.options.extractStyles))&&(n=!1),r({title:t,type:e.type,visible:!0===e.isVisible(),id:e.name,url:e.url,outOfRange:!e.inRange(),checkedLayer:e.checkedLayer||"false",opacity:e.getOpacity(),metadata:i,hasStyles:n})}))}},{key:"render",value:function(){var e=this;this.getTemplateVariables(this.map_).then((function(t){var i;null!==document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers")&&(i=document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers").scrollTop);var r=M.template.compileSync(bt.a,{vars:t});if(e.template_.querySelector("#m-layerswitcher-content").innerHTML=r.innerHTML,"radio"===e.modeSelectLayers&&!1===e.isCheckedLayerRadio){var n=e.template_.querySelectorAll("input[type=radio]");n.length>0&&(e.isCheckedLayerRadio=!0,n[0].click())}var a=e.template_.querySelector(".m-layerswitcher-ullayers");if(null!==a&&e.isMoveLayers){var s=e.map_.getLayers();at.create(a,{animation:150,ghostClass:"m-layerswitcher-gray-shadow",filter:".m-layerswitcher-opacity",preventOnFilter:!1,onEnd:function(e){var t=e.from,i=s.filter((function(e){var t=e.type,i=e.displayInLayerSwitcher;return"Vector"!==t&&!0===i})),r=Math.max.apply(Math,zt(i.map((function(e){return e.getZIndex()}))));t.querySelectorAll("li.m-layerswitcher-layer .m-layerswitcher-title-layer .m-layerswitcher-visible-control *").forEach((function(e){var t=e.getAttribute("data-layer-name"),i=e.getAttribute("data-layer-url")||void 0,n=e.getAttribute("data-layer-type"),a=s.filter((function(e){return e.name===t&&(e.url===i||void 0===e.url&&("OSM"===e.type||"GeoJSON"===e.type||"MBTilesVector"===e.type||"MBTiles"===e.type))&&e.type===n}));a.length>0&&(a[0].setZIndex(r),r-=1)}))}})}if(void 0!==i){var o=document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers");null!==o&&(o.scrollTop=i)}}))}},{key:"collapsedPlugin",value:function(e){e.target.parentElement.classList.contains("collapsed")?this.getImpl().removeRenderComplete():(this.render(),this.getImpl().registerEvent(this.map_))}},{key:"clickLayer",value:function(e){var t=this,i=e||window.event,r=i.target.getAttribute("data-layer-name"),n=i.target.getAttribute("data-layer-url")||void 0,a=i.target.getAttribute("data-layer-type"),s=i.target.getAttribute("data-select-type");if("m-layerswitcher-hsalllayers"===i.target.id)this.showHideAllLayers();else if(!(M.utils.isNullOrEmpty(r)||M.utils.isNullOrEmpty(n)&&(void 0!==n||"OSM"!==a&&"GeoJSON"!==a&&"GenericVector"!==a&&"Vector"!==a&&"MBTilesVector"!==a&&"MBTiles"!==a)||M.utils.isNullOrEmpty(a))){var o=this.findLayer(i);if(o.length>0)if(o=o[0],i.target.className.indexOf("m-layerswitcher-check")>-1&&"eye"===s)i.target.classList.contains("m-layerswitcher-check")&&(!0!==o.transparent&&o.isVisible()||o.setVisible(!o.isVisible()));else if(i.target.className.indexOf("m-layerswitcher-check")>-1&&"radio"===s)this.overlayLayers.forEach((function(e){e.name!==r||e.type!==a||e.url!==n&&"noURL"!==n?(e.checkedLayer="false",e.setVisible(!1)):(e.checkedLayer="true",e.setVisible(!0))}));else if(i.target.className.indexOf("m-layerswitcher-icons-image")>-1){var l=i.target.parentElement.parentElement.parentElement.querySelector(".m-layerswitcher-legend");if("block"!==l.style.display){var c=o.getLegendURL();c instanceof Promise?c.then((function(e){-1===e.indexOf("assets/img/legend-default.png")?l.querySelector("img").src=e:t.errorLegendLayer(o).then((function(t){l.querySelector("img").src=""!==t?t:e}))})):c.indexOf("assets/img/legend-default.png")>=0?this.errorLegendLayer(o).then((function(e){if("error legend"===e){var t=l.querySelector("img"),i=document.createElement("p"),r=document.createElement("span");r.classList.add("m-layerswitcher-icons-cancel"),i.classList.add("m-layerswitcher-legend-error"),i.appendChild(r);var n=document.createTextNode(kt("legend_error"));i.appendChild(n),t.parentNode.insertBefore(i,t)}else l.querySelector("img").src=""!==e?e:c})):l.querySelector("img").src=c,l.style.display="block"}else{var d=l.querySelector("img").parentElement.querySelector("p");M.utils.isNullOrEmpty(d)||d.remove(),l.style.display="none"}}else if(i.target.className.indexOf("m-layerswitcher-icons-target")>-1)this.eventIconTarget_(a,o);else if(i.target.className.indexOf("m-layerswitcher-icons-info")>-1)if("OGCAPIFeatures"===o.type){var u,h="".concat(o.url).concat(o.name,"?f=json"),p="".concat(o.url).concat(o.name,"?f=html");M.proxy(this.useProxy),M.remote.get(h).then((function(e){var i={title:(u=JSON.parse(e.text)).title,abstract:u.description,hasMetadata:!0,metadata:p,isOgc:!0,translations:{title:kt("title"),name:kt("name"),abstract:kt("abstract"),provider:kt("provider"),service_info:kt("service_info"),download_center:kt("download_center"),see_more:kt("see_more"),metadata_abstract:kt("metadata_abstract"),responsible:kt("responsible"),access_constraints:kt("access_constraints"),use_constraints:kt("use_constraints"),online_resources:kt("online_resources"),see_more_layer:kt("see_more_layer"),see_more_service:kt("see_more_service"),metadata:kt("metadata"),attributes:kt("attributes")}};if(o.getFeatures().length>0){t.pages_={total:0,actual:1,element:0};var r=[],n=o.getFeatures(),a=Object.keys(n[0].getAttributes());n.forEach((function(e){var t=Object.values(e.getAttributes());M.utils.isNullOrEmpty(t)||r.push({properties:t})})),M.utils.isUndefined(a)?i.attributes=r:(i.pages=t.pageResults_(r),i.allAttributes=r,i.attributes=!M.utils.isNullOrEmpty(r)&&r.slice(t.pages_.element,t.pages_.element+t.numPages_)),i.headerAtt=a}if(t.renderInfo(i,"OGCAPIFeatures"),t.latestVars_=i,o instanceof M.layer.Vector&&document.querySelector("#m-layerswitcher-next")){var s=document.querySelector("#m-layerswitcher-next");s.addEventListener("click",t.nextPage_.bind(t)),s.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&s.click()}));var l=document.querySelector("#m-layerswitcher-previous");l.addEventListener("click",t.previousPage_.bind(t)),l.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&l.click()})),t.hasNext_(),t.hasPrevious_()}})),M.proxy(this.statusProxy)}else if("WMS"===o.type||"WMTS"===o.type){var m={name:o.name,title:o.legend,abstract:o.capabilitiesMetadata.abstract,translations:{title:kt("title"),name:kt("name"),abstract:kt("abstract"),provider:kt("provider"),service_info:kt("service_info"),download_center:kt("download_center"),see_more:kt("see_more"),metadata_abstract:kt("metadata_abstract"),responsible:kt("responsible"),access_constraints:kt("access_constraints"),use_constraints:kt("use_constraints"),online_resources:kt("online_resources"),see_more_layer:kt("see_more_layer"),see_more_service:kt("see_more_service"),metadata:kt("metadata")}};m.capabilities=this.addCapabilitiesInformation(o),o.capabilitiesMetadata.metadataURL&&(m.metadata=o.capabilitiesMetadata.metadataURL[0].OnlineResource),m.provider=this.informationProvider(o),M.proxy(this.useProxy),M.remote.get(m.capabilities).then((function(e){var i=e.text.split("<inspire_common:URL>")[1].split("<")[0].split("&amp;").join("&");!M.utils.isNullOrEmpty(i)&&M.utils.isUrl(i)&&(m.metadata_service=i,m.hasMetadata=!0),M.utils.isNullOrEmpty(m.metadata)||!M.utils.isUrl(m.metadata)?void 0!==m.metadata_service?t.infoDownloadCenter(m.metadata_service,m):t.renderInfo(m):(m.hasMetadata=!0,t.infoDownloadCenter(m.metadata,m))})).catch((function(e){t.renderInfo(m)})),M.proxy(this.statusProxy)}else{var y=!0,f={name:o.name,title:o.legend,translations:{title:kt("title"),name:kt("name"),n_obj_geo:kt("n_obj_geo"),extension:kt("extension"),attributes:kt("attributes"),values:kt("values"),attribution:kt("attribution"),description:kt("description"),minzoom:kt("minzoom"),maxzoom:kt("maxzoom"),center:kt("center")}};if(o instanceof M.layer.Vector){var v=o.getFeatures().length;f.numberFeatures=v;var g=o.getMaxExtent();if(f.extension=M.utils.isNullOrEmpty(g)?g:g.toString().replaceAll(",",", "),v>0){this.pages_={total:0,actual:1,element:0};var b=[],w=o.getFeatures(),_=Object.keys(w[0].getAttributes());w.forEach((function(e){var t=Object.values(e.getAttributes());M.utils.isNullOrEmpty(t)||b.push({properties:t})})),M.utils.isUndefined(_)?f.attributes=b:(f.pages=this.pageResults_(b),f.allAttributes=b,f.attributes=!M.utils.isNullOrEmpty(b)&&b.slice(this.pages_.element,this.pages_.element+this.numPages_)),f.headerAtt=_}}var S=o.type;if("MVT"===S||"TMS"===S||"XYZ"===S){y=!1;var x=o.url;x=x.replace(/\{z\}\/\{x\}\/\{(-?)y\}\/?.*$/,"metadata.json");var k=o.getMaxExtent();f.extension=M.utils.isNullOrEmpty(k)?k:k.toString().replaceAll(",",", "),M.proxy(this.useProxy),M.remote.get(x).then((function(e){if(200===e.code){var i=JSON.parse(e.text),r={};i.id&&(r.id=i.id),i.attribution&&(r.attribution=i.attribution),i.description&&(r.description=i.description),void 0!==i.minzoom&&(r.minzoom=i.minzoom.toString()),void 0!==i.maxzoom&&(r.maxzoom=i.maxzoom.toString()),i.center&&(r.center=i.center.toString().replaceAll(",",", ")),Object.keys(r).length>0&&(f.others=r)}t.renderInfo(f,"Others")})),M.proxy(this.statusProxy)}else if("OSM"===S||"MBTiles"===S){var C=o.getMaxExtent();f.extension=M.utils.isNullOrEmpty(C)?C:C.toString().replaceAll(",",", ")}y&&(this.renderInfo(f,"Others"),this.latestVars_=f),o instanceof M.layer.Vector&&function e(){setTimeout((function(){document.querySelector("#m-layerswitcher-next")?document.querySelector("#m-layerswitcher-next")&&(t.latestVars_=f,document.querySelector("#m-layerswitcher-next").addEventListener("click",t.nextPage_.bind(t)),document.querySelector("#m-layerswitcher-previous").addEventListener("click",t.previousPage_.bind(t)),t.hasNext_(),t.hasPrevious_()):e()}),1e3)}()}else if(i.target.className.indexOf("m-layerswitcher-icons-style")>-1){var O=[],L=!1;M.utils.isUndefined(o.capabilitiesMetadata)||M.utils.isUndefined(o.capabilitiesMetadata.style)||(O=o.capabilitiesMetadata.style),o instanceof M.layer.Vector&&(O=o.predefinedStyles,L=!0);var E=M.template.compileSync(At.a,{jsonp:!0,parseToHtml:!1,vars:{styles:O,isVectorLayer:L,translations:{select_style:kt("select_style"),change:kt("change"),style:kt("style"),default_style:kt("default_style"),selected:kt("selected")}}});M.dialog.info(E,kt("configure_layer"),this.order),this.focusModal(".m-title span"),setTimeout((function(){document.querySelector("#m-layerswitcher-style button").addEventListener("click",t.changeLayerConfig.bind(t,o,O)),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=kt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",setTimeout((function(){document.querySelector(".m-layerswitcher-style-container").focus()}),500)}),10)}else i.target.className.indexOf("m-layerswitcher-icons-delete")>-1&&this.map_.removeLayers(o)}i.stopPropagation()}},{key:"eventIconTarget_",value:function(e,t){var i=this;if("WMS"===e)t.getMaxExtent((function(e){i.map_.setBbox(e)}));else if(["WMTS","WFS","MBTilesVector","MBTiles","OSM","XYZ","TMS","GeoJSON","KML","OGCAPIFeatures","Vector","GenericRaster","GenericVector","MVT"].includes(e)){var r=t.getMaxExtent();null===r&&t.calculateMaxExtent?t.calculateMaxExtent().then((function(e){e.length>0?i.map_.setBbox(e):i.map_.setBbox(i.map_.getExtent())})).catch((function(e){console.error(e)})):null===r?this.map_.setBbox(this.map_.getExtent()):this.map_.setBbox(r)}else M.dialog.info(kt("exception.extent"),kt("info"),this.order)}},{key:"pageResults_",value:function(e){return this.pages_.total=Math.ceil(e.length/this.numPages_),this.pages_}},{key:"nextPage_",value:function(){this.pages_.total>this.pages_.actual&&(this.pages_.actual=this.pages_.actual+1,this.pages_.element=this.pages_.element+this.numPages_,this.updateTablePage_())}},{key:"previousPage_",value:function(){this.pages_.actual>1&&(this.pages_.actual=this.pages_.actual-1,this.pages_.element=this.pages_.element-this.numPages_,this.updateTablePage_())}},{key:"updateTablePage_",value:function(){var e=document.querySelector("#m-layerswitcher-table tbody");e.innerHTML="",this.latestVars_.attributes=!M.utils.isNullOrEmpty(this.latestVars_.allAttributes)&&this.latestVars_.allAttributes.slice(this.pages_.element,this.pages_.element+this.numPages_),this.latestVars_.attributes&&this.latestVars_.attributes.forEach((function(t){var i=document.createElement("tr");t.properties.forEach((function(e){var t=document.createElement("td");t.innerHTML=e,i.appendChild(t)})),e.appendChild(i)})),document.querySelector("#m-layerswitcher-pageinfo").innerText="Página ".concat(this.pages_.actual," de ").concat(this.pages_.total),this.hasNext_(),this.hasPrevious_()}},{key:"hasNext_",value:function(e){var t;M.utils.isNullOrEmpty(e)||(t=e),M.utils.isNullOrEmpty(t)&&(t=document),this.pages_.actual<this.pages_.total?t.querySelector("#m-layerswitcher-next").classList.remove("m-layerswitcher-hidden"):t.querySelector("#m-layerswitcher-next").classList.add("m-layerswitcher-hidden")}},{key:"hasPrevious_",value:function(e){var t;M.utils.isNullOrEmpty(e)||(t=e),M.utils.isNullOrEmpty(t)&&(t=document),this.pages_.actual<=this.pages_.total&&1!==this.pages_.actual?t.querySelector("#m-layerswitcher-previous").classList.remove("m-layerswitcher-hidden"):t.querySelector("#m-layerswitcher-previous").classList.add("m-layerswitcher-hidden")}},{key:"inputLayer",value:function(e){var t=this;if("radio"!==e.target.type){clearTimeout(this.inputLayerTimeID),this.getImpl().removeRenderComplete();var i=e||window.event;if(!M.utils.isNullOrEmpty(i.target)){var r=this.findLayer(i);r.length>0&&(i.stopPropagation(),r[0].setOpacity(i.target.value))}this.inputLayerTimeID=setTimeout((function(){t.getImpl().registerEvent(t.map_)}),500)}}},{key:"findLayer",value:function(e){var t=e.target.getAttribute("data-layer-name"),i=e.target.getAttribute("data-layer-url")||void 0,r=e.target.getAttribute("data-layer-type"),n=[];return M.utils.isNullOrEmpty(t)||M.utils.isNullOrEmpty(i)&&(void 0!==i||"OSM"!==r&&"GeoJSON"!==r&&"GenericVector"!==r&&"Vector"!==r&&"MBTilesVector"!==r&&"MBTiles"!==r)||M.utils.isNullOrEmpty(r)||(n=this.overlayLayers.filter((function(e){return e.name===t&&(e.url===i||void 0===e.url||e.url[0]===i)&&e.type===r}))),n}},{key:"errorLegendLayer",value:function(e){var t=this;return new Promise((function(i){var r="";if("TMS"===e.type)r=e.url.replace("{z}/{x}/{-y}","0/0/0");else if("XYZ"===e.type)r=e.url.replace("{z}/{x}/{y}","0/0/0");else if("OSM"===e.type){var n=e.getImpl().getOL3Layer().getSource().getUrls();n.length>0&&(n=n[0]),r=n.replace("{z}/{x}/{y}","0/0/0")}""!==r?(M.proxy(t.useProxy),M.remote.get(r).then((function(e){200!==e.code&&(r=""),i(r)})),M.proxy(t.statusProxy)):i("error legend")}))}},{key:"renderInfo",value:function(e,t){var i,r=e;r.translations.previous=kt("previous"),r.translations.next=kt("next"),"OGCAPIFeatures"===t?(i=M.template.compileSync(Et.a,{jsonp:!1,parseToHtml:!1,vars:r}),this.focusModal(".m-layerswitcher-info-cap p")):"Others"===t?(i=M.template.compileSync(qt.a,{jsonp:!1,parseToHtml:!1,vars:r}),this.focusModal(".m-layerswitcher-info-cap p")):(i=M.template.compileSync(Ot.a,{jsonp:!1,parseToHtml:!1,vars:r}),this.focusModal(".m-layerswitcher-info-cap p")),M.dialog.info(i,kt("layer_info"),this.order),setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=kt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3"}),10)}},{key:"addCapabilitiesInformation",value:function(e){return"WMS"===e.type?M.utils.getWMSGetCapabilitiesUrl(e.url,e.version):"WMTS"===e.type&&M.utils.getWMTSGetCapabilitiesUrl(e.url)}},{key:"informationProvider",value:function(e){if(M.utils.isNullOrEmpty(e.capabilitiesMetadata.attribution))return!1;var t="";if("WMS"===e.type&&(t="".concat(e.capabilitiesMetadata.attribution.Title),void 0!==e.capabilitiesMetadata.attribution.OnlineResource&&(t+='<p><a class="m-layerswitcher-provider-link" href="'.concat(e.capabilitiesMetadata.attribution.OnlineResource,'" target="_blank">').concat(e.capabilitiesMetadata.attribution.OnlineResource,"</a></p>"))),"WMTS"===e.type){t="".concat(e.capabilitiesMetadata.attribution.ProviderName)+'<p><a class="m-layerswitcher-provider-link" href="'.concat(e.capabilitiesMetadata.attribution.ProviderSite,'" target="_blank">').concat(e.capabilitiesMetadata.attribution.ProviderSite,"</a></p>");var i=e.capabilitiesMetadata.attribution.ServiceContact;if(!M.utils.isNullOrEmpty(i)&&!M.utils.isNullOrEmpty(i.ContactInfo)){var r=i.ContactInfo.Address.ElectronicMailAddress;t+='<p><a class="m-layerswitcher-provider-link" href="mailto:'.concat(r,'">').concat(r,"</a></p>")}}return t}},{key:"infoDownloadCenter",value:function(e,t){var i=this;M.proxy(this.useProxy),M.remote.get(e).then((function(e){var r=e.text.split("<gmd:MD_DigitalTransferOptions>")[1].split("<gmd:URL>").filter((function(e){return e.indexOf("centrodedescargas")>-1&&-1===e.indexOf("atom")}));if(r.length>0){var n=r[0].split("</gmd:URL>")[0].trim();t.downloadCenter=n}i.renderInfo(t)})).catch((function(e){i.renderInfo(t)})),M.proxy(this.statusProxy)}},{key:"showHideAllLayers",value:function(){var e=this;this.statusShowHideAllLayers=!this.statusShowHideAllLayers,this.overlayLayers.forEach((function(t){t.setVisible(e.statusShowHideAllLayers)}))}},{key:"changeLayerConfig",value:function(e,t){var i=document.querySelector("#m-layerswitcher-style-select").value;if(""!==i){if(e instanceof M.layer.Vector){if(!M.utils.isNullOrEmpty(t)){var r=t[i];0===i?e.setStyle():e.setStyle(r)}}else{e.getImpl().getOL3Layer().getSource().updateParams({STYLES:i});var n=e.capabilitiesMetadata;if(!M.utils.isNullOrEmpty(n)&&!M.utils.isNullOrEmpty(n.style)){var a=e.capabilitiesMetadata.style.filter((function(e){return e.Name===i}));if(a.length>0&&a[0].LegendURL.length>0){var s=a[0].LegendURL[0].OnlineResource;e.setLegendURL(s)}}}document.querySelector("div.m-mapea-container div.m-dialog").remove()}}},{key:"showLoading",value:function(){var e=document.createElement("p");e.id="m-layerswitcher-loading",e.innerHTML='<span class="m-layerswitcher-icons-spinner"></span>',document.querySelector(".m-layerswitcher-search-panel").appendChild(e),document.querySelector(si).style.display="none",document.querySelector(ti)&&(document.querySelector(ti).style.display="none"),document.querySelector(ai).style.display="none",this.loadingActive=!0}},{key:"removeLoading",value:function(){document.querySelector("#m-layerswitcher-loading")&&document.querySelector(si)&&(document.querySelector("#m-layerswitcher-loading").remove(),document.querySelector(si).style.display="inline",document.querySelector(ti)&&(document.querySelector(ti).style.display="inline"),document.querySelector(ai).style.display="inline",this.loadingActive=!1)}},{key:"readCapabilities",value:function(e){var t=this,i=document.querySelector("#m-layerswitcher-addservices-suggestions"),r=document.querySelector(ii);e.preventDefault();var n=!1,a=!1;i.style.display="none";var s=r.value.trim().split("?")[0];if(this.removeContains(e),M.utils.isNullOrEmpty(s))M.dialog.error(kt("exception.empty"),void 0,this.order);else if(M.utils.isUrl(s))if(this.http&&!this.https?n=/^(http:)/.test(s):this.https&&!this.http?a=/^(https:)/.test(s):this.http&&this.https&&(n=!0,a=!0),!0===n||!0===a){this.showLoading();var o=s.indexOf(".pbf")>=0,l=s.indexOf(".json")>=0;if(o||l){var c=s,d="{z}/{x}/{y}.pbf";o&&(-1===s.indexOf("{z}/{x}/{y}")&&(d="{z}/{y}/{x}.pbf"),c=s.replace(d,"metadata.json")),M.proxy(this.useProxy),M.remote.get(c).then((function(e){if(l&&e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0)t.printLayerModal(s,"geojson");else{var i,r=JSON.parse(e.text);M.utils.isNullOrEmpty(r)?r={}:(M.utils.isNullOrEmpty(r.json)||(r=JSON.parse(r.json)),i=c.substring(0,c.lastIndexOf("/")+1).concat(d));var n=r.vector_layers||[],a=r.tileurl||r.tiles||i||s;M.utils.isString(a)&&(a=[a]),n=n.map((function(e){return{name:e.id}})),t.printLayerModal(a[0],"mvt",n)}})),M.proxy(this.statusProxy)}else s.indexOf("{z}/{x}/{-y}")>=0?this.printLayerModal(s,"tms"):s.indexOf("{z}/{x}/{y}")>=0&&s.indexOf("openstreetmap")>=0?this.printLayerModal(s,"osm"):s.indexOf("{z}/{x}/{y}")>=0?this.printLayerModal(s,"xyz"):new Promise((function(e,i){var r=setTimeout((function(){return i()}),15e3);M.proxy(t.useProxy),M.remote.get(M.utils.getWMTSGetCapabilitiesUrl(s)).then((function(t){clearTimeout(r),e(t)})),M.proxy(t.statusProxy)})).then((function(e){if(e.text&&e.text.indexOf("<TileMatrixSetLink>")>=0&&e.text.indexOf('Operation name="GetTile"')>=0){var i=(new M.impl.format.WMTSCapabilities).read(e.xml);t.serviceCapabilities=i.capabilities||{};var r=M.impl.util.wmtscapabilities.getLayers(i.capabilities,s,t.map_.getProjection().code);t.capabilities=t.filterResults(r),t.showResults()}else{var n=new Promise((function(e,i){var r=setTimeout((function(){return i()}),15e3);M.proxy(t.useProxy),M.remote.get(M.utils.getWMSGetCapabilitiesUrl(s,"1.3.0")).then((function(t){clearTimeout(r),e(t)})),M.proxy(t.statusProxy)})),a=new Promise((function(e,i){var r=setTimeout((function(){return i()}),15e3),n=s;n=M.utils.addParameters(s,"request=GetCapabilities"),n=M.utils.addParameters(n,"service=WFS"),n=M.utils.addParameters(n,{version:"1.3.0"}),M.proxy(t.useProxy),M.remote.get(n).then((function(t){clearTimeout(r),e(t)})),M.proxy(t.statusProxy)}));Promise.all([n,a]).then((function(e){var i=!1,r=!1;if(-1===e[0].text.indexOf("<TileMatrixSetLink>")&&e[0].text.indexOf("<GetMap>")>=0&&(i=!0),-1===e[1].text.indexOf("<TileMatrixSetLink>")&&e[1].text.indexOf('Operation name="GetFeature"')>=0&&(r=!0),i||r)try{if(i){var n=(new M.impl.format.WMSCapabilities).read(e[0].xml||(new DOMParser).parseFromString(e[0].text,"text/xml"));t.serviceCapabilities=n.Service||{};var a=new M.impl.GetCapabilities(n,s,t.map_.getProjection().code);t.capabilities=t.filterResults(a.getLayers()),t.capabilities.forEach((function(e){try{t.getParents(n,e)}catch(e){}}))}var o;r&&(o=t.readWFSCapabilities(e[1])),t.showResults(o)}catch(e){M.dialog.error(kt("exception.capabilities"),void 0,t.order),t.removeLoading()}else t.checkIfOGCAPIFeatures(s).then((function(e){!0===e?t.checkIfOGCAPICollection(s).then((function(e){e?t.printOGCModal(s):(M.dialog.error(kt("exception.ogcfeatures"),void 0,t.order),t.removeLoading())})):(M.proxy(t.useProxy),M.remote.get(s).then((function(e){if(e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0)t.printLayerModal(s,"geojson");else if(e.text.indexOf("<kml ")>=0){var i=(new DOMParser).parseFromString(e.text,"text/xml").getElementsByTagName("Folder"),r=-1,n=Array.from(i).map((function(e){return r+=1,{name:e.name||"Layer__".concat(r)}}));t.printLayerModal(s,"kml",n)}})),M.proxy(t.statusProxy))})),M.proxy(t.statusProxy)})).catch((function(e){M.dialog.error(kt("exception.capabilities"),void 0,t.order),t.removeLoading()}))}})).catch((function(e){M.dialog.error(kt("exception.capabilities"),void 0,t.order),t.removeLoading()}))}else{var u;this.http?u=kt("exception.only_http"):this.https?u=kt("exception.only_https"):this.http||this.https||(u=kt("exception.no_http_https")),M.dialog.error(u,void 0,this.order)}else M.dialog.error(kt("exception.valid_url"),void 0,this.order)}},{key:"openAddServices",value:function(){var e=this,t=this.precharged,i=void 0!==t.groups&&t.groups.length>0||void 0!==t.services&&t.services.length>0,r=this.codsiActive,n=M.template.compileSync(Nt.a,{jsonp:!0,parseToHtml:!1,vars:{precharged:t,hasPrecharged:i,codsiActive:r,translations:{url_service:kt("url_service"),query:kt("query"),loaded_services:kt("loaded_services"),clean:kt("clean"),availables:kt("availables"),codsi_services:kt("codsi_services"),filter_results:kt("filter_results"),clean_filter:kt("clean_filter"),filter_text:kt("filter_text")}}});M.dialog.info(n,kt("load_ext_services"),this.order),setTimeout((function(){e.changeClodeButtonModal(),e.addEventSuggestions(),e.addEventCODSI(),e.addEventSearch()}),10),this.focusModal("#m-layerswitcher-addservices-search-input")}},{key:"focusModal",value:function(e){setTimeout((function(){var t=document.querySelector(e);t.focus(),t.click()}),100)}},{key:"changeClodeButtonModal",value:function(){document.querySelector("div.m-dialog.info div.m-button > button").innerHTML=kt("close")}},{key:"addEventSearch",value:function(){var e=this,t=document.querySelector(si),i=document.querySelector(ii);t.addEventListener("click",(function(t){e.filterName=void 0,e.readCapabilities(t)})),i.addEventListener("keydown",(function(t){13===t.keyCode&&(e.filterName=void 0,e.readCapabilities(t))}))}},{key:"addEventSuggestions",value:function(){var e=this,t=document.querySelector(ai);null!==t&&(t.addEventListener("click",(function(t){return e.showSuggestions(t)})),t.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.showSuggestions(t)}))),document.querySelectorAll(".m-layerswitcher-suggestion-caret").forEach((function(e){e.addEventListener("click",(function(){e.parentElement.querySelector(".m-layerswitcher-suggestion-group").classList.toggle("active"),e.classList.toggle("m-layerswitcher-suggestion-caret-close")}))})),document.querySelectorAll("#m-layerswitcher-addservices-suggestions .m-layerswitcher-suggestion").forEach((function(t){t.addEventListener("click",(function(t){return e.loadSuggestion(t)}))}))}},{key:"showSuggestions",value:function(){var e=document.querySelector(ei),t=document.querySelector("#m-layerswitcher-ogcCContainer"),i=document.querySelector(ri),r=document.querySelector("#m-layerswitcher-addservices-suggestions");document.querySelector(ni).innerHTML="",null!==e&&(e.style.display="none"),null!==t&&(t.style.display="none"),i.innerHTML="",r.style.display="block"}},{key:"readWFSCapabilities",value:function(e){var t=[],i=e.text.split("<FeatureTypeList>")[1].split("</FeatureTypeList>")[0];i.indexOf("<FeatureType>")>-1?i.split("<FeatureType>").forEach((function(e){e.indexOf("</Name>")>-1&&t.push({name:e.split("</Name>")[0].split(">")[1].trim(),title:e.split("</Title>")[0].split("<Title>")[1].trim()})})):i.indexOf("<FeatureType")>-1&&i.split("<FeatureType").forEach((function(e){e.indexOf("</Name>")>-1&&t.push({name:e.split("</Name>")[0].split("<Name>")[1].trim(),title:e.split("</Title>")[0].split("<Title>")[1].trim()})}));var r={},n=!1;try{r.title=e.text.split("<ows:Title>")[1].split("</ows:Title>")[0],n=!0}catch(e){n=n||!1}try{r.abstract=e.text.split("<ows:Abstract>")[1].split("</ows:Abstract>")[0],n=!0}catch(e){n=n||!1}try{r.accessConstraints=e.text.split("<ows:AccessConstraints>")[1].split("</ows:AccessConstraints>")[0],n=!0}catch(e){n=n||!1}return{services:t,capabilities:r,hasCapabilities:n}}},{key:"removeContains",value:function(e){e.preventDefault();var t=document.querySelector(ei),i=document.querySelector("#m-layerswitcher-ogcCContainer");null!==i&&(i.style.display="none"),null!==document.querySelector(ni)&&(document.querySelector(ni).style.display="none"),null!==t&&(t.style.display="none"),document.querySelector(ri).innerHTML=""}},{key:"filterResults",value:function(e){var t=this,i=[],r=[],n=[];return void 0===this.filterName?e.forEach((function(e){i.push(e),r.push(e.name)})):"none"===this.filterName?(void 0!==this.precharged.services&&this.precharged.services.length>0&&(n=n.concat(this.precharged.services)),void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(e){void 0!==e.services&&e.services.length>0&&(n=n.concat(e.services))})),e.forEach((function(e){var a=!1;n.forEach((function(n){n.type===e.type&&t.checkUrls(n.url,e.url)&&((void 0!==n.white_list&&n.white_list.length>0&&n.white_list.indexOf(e.name)>-1&&-1===r.indexOf(e.name)||void 0===n.white_list&&-1===r.indexOf(e.name))&&(i.push(e),r.push(e.name)),a=!0)})),a||(i.push(e),r.push(e.name))}))):void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(n){void 0!==n.services&&n.services.length>0&&n.name===t.filterName&&e.forEach((function(e){var a=!1;n.services.forEach((function(n){n.type===e.type&&t.checkUrls(n.url,e.url)&&((void 0!==n.white_list&&n.white_list.length>0&&n.white_list.indexOf(e.name)>-1&&-1===r.indexOf(e.name)||void 0===n.white_list&&-1===r.indexOf(e.name))&&(i.push(e),r.push(e.name)),a=!0)})),a||(i.push(e),r.push(e.name))}))})),i}},{key:"showResults",value:function(e){var t=this;this.removeLoading();var i=[],r="WMS";M.utils.isUndefined(this.capabilities)||this.capabilities.forEach((function(e){var t=e.getImpl();t.abstract=e.capabilitiesMetadata.abstract.trim(),r=e.type,i.push(t)}));var n=document.querySelector(ri);if(i.length>0||!M.utils.isUndefined(e)){var a={},s=!0;if("WMTS"===r){var o=this.serviceCapabilities.ServiceIdentification,l=this.serviceCapabilities.ServiceProvider;if(void 0!==o&&void 0!==o.Title&&(a.title=o.Title.trim()),void 0!==o&&void 0!==o.Abstract&&(a.abstract=o.Abstract.trim()),void 0!==o&&void 0!==o.AccessConstraints&&(a.accessConstraints=o.AccessConstraints.trim()),void 0!==l){var c="".concat(l.ProviderName,'<p><a class="m-layerswitcher-provider-link" href="').concat(l.ProviderSite,'" target="_blank">').concat(l.ProviderSite,"</a></p>"),d=l.ServiceContact.ContactInfo;if(!M.utils.isNullOrEmpty(l.ServiceContact)&&!M.utils.isNullOrEmpty(d)){var u=d.Address.ElectronicMailAddress;c+='<p><a class="m-layerswitcher-provider-link" href="mailto:'.concat(u,'">').concat(u,"</a></p>")}a.contact=c}}else if(M.utils.isUndefined(this.serviceCapabilities))s=!1;else{var h=this.serviceCapabilities.ContactInformation;void 0!==this.serviceCapabilities.Title&&(a.title=this.serviceCapabilities.Title.trim()),void 0!==this.serviceCapabilities.Abstract&&(a.abstract=this.serviceCapabilities.Abstract.trim()),void 0!==this.serviceCapabilities.AccessConstraints&&(a.accessConstraints=this.serviceCapabilities.AccessConstraints.trim()),void 0!==h&&void 0!==h.ContactPersonPrimary&&void 0!==h.ContactPersonPrimary.ContactOrganization&&(a.contact=h.ContactPersonPrimary.ContactOrganization.trim())}var p={result:i,serviceCapabilities:a,type:r,isWFS:!1,showgeneral:s,translations:{layers:kt("layers"),add:kt("add"),title:kt("title"),abstract:kt("abstract"),responsible:kt("responsible"),access_constraints:kt("access_constraints"),show_service_info:kt("show_service_info"),addAllLayers:kt("addAllLayers"),add_service:kt("add_service")}};M.utils.isUndefined(e)||(p.layersWFS=e.services,p.serviceCapabilitieswfs=e.capabilities,p.isWFS=!0);var m=M.template.compileSync(Rt.a,{vars:p});n.innerHTML=m.innerHTML;for(var y=n.querySelectorAll("span.m-check-layerswitcher-addservices"),f=0;f<y.length;f+=1)y[f].addEventListener("click",(function(e){return t.registerCheck(e)}));for(var v=n.querySelectorAll("span.m-check-layerswitcher-addservices-wfs"),g=0;g<v.length;g+=1)v[g].addEventListener("click",(function(e){return t.registerCheckWFS(e)}));for(var b=n.querySelectorAll("#m-layerswitcher-all tbody tr td.m-layerswitcher-table-layer-name"),w=0;w<b.length;w+=1)b[w].addEventListener("click",(function(e){return t.registerCheckFromName(e)}));for(var _=n.querySelectorAll("#m-layerswitcher-wfs tbody tr td.m-layerswitcher-table-layer-name"),S=0;S<_.length;S+=1)_[S].addEventListener("click",(function(e){return t.registerCheckFromNameWFS(e)}));n.querySelectorAll(".m-layerswitcher-table-results .m-layerswitcher-table-container table tbody tr td span").forEach((function(e){return e.addEventListener("keydown",(function(e){return 13===e.keyCode&&t.registerCheckFromName(e)}))}));var x=n.querySelector("#m-layerswitcher-addservices-selectall");M.utils.isNull(x)||x.addEventListener("click",(function(e){return t.registerCheck(e)}));var k=n.querySelector("#m-layerswitcher-addservices-selectall-wfs");M.utils.isNull(k)||k.addEventListener("click",(function(e){return t.registerCheckWFS(e)})),n.querySelector(".m-layerswitcher-addservices-add").addEventListener("click",(function(e){return t.addLayers(e)}));var C=n.querySelector(".m-layerswitcher-show-capabilities");M.utils.isNull(C)||C.addEventListener("click",(function(){var e=n.querySelector(".m-layerswitcher-capabilities-container");"block"!==e.style.display?(e.style.display="block",C.innerHTML='<span class="m-layerswitcher-icons-colapsar"></span>&nbsp;'.concat(kt("hide_service_info"))):(e.style.display="none",C.innerHTML='<span class="m-layerswitcher-icons-desplegar"></span>&nbsp;'.concat(kt("show_service_info")))}));var O=n.querySelector(".m-layerswitcher-show-capabilities-wfs");M.utils.isNull(O)||O.addEventListener("click",(function(){var e=n.querySelector(".m-layerswitcher-capabilities-container-wfs");"block"!==e.style.display?(e.style.display="block",O.innerHTML='<span class="m-layerswitcher-icons-colapsar"></span>&nbsp;'.concat(kt("hide_service_info"))):(e.style.display="none",O.innerHTML='<span class="m-layerswitcher-icons-desplegar"></span>&nbsp;'.concat(kt("show_service_info")))}))}else n.innerHTML='<p class="m-layerswitcher-noresults">'.concat(kt("exception.no_results"),"</p>");document.querySelector(ri).style.display="block"}},{key:"checkIfOGCAPIFeatures",value:function(e){return M.proxy(this.useProxy),M.remote.get("".concat(e,"?f=json")).then((function(e){var t=!1;return M.utils.isNullOrEmpty(e)||M.utils.isNullOrEmpty(e.text)||-1===e.text.indexOf("collections")||(t=!0),t})).catch((function(){return!1}))}},{key:"checkIfOGCAPICollection",value:function(e){M.proxy(this.useProxy);var t="".concat(e.endsWith("/")?e:"".concat(e,"/"),"collections?f=json");return M.remote.get(t).then((function(e){var t=!1;if(!M.utils.isNullOrEmpty(e)&&!M.utils.isNullOrEmpty(e.text)){var i=JSON.parse(e.text);i.collections.length>0&&"feature"===i.collections[0].itemType&&(t=!0)}return t})).catch((function(){return!1}))}},{key:"registerCheck",value:function(e){var t=e||window.event;if(!M.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-layerswitcher-addservices")){var i=document.querySelector(ri).querySelectorAll(".m-check-layerswitcher-addservices.m-layerswitcher-icons-check").length;i+=t.target.classList.contains("m-layerswitcher-icons-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("m-layerswitcher-icons-check"),t.target.classList.toggle("m-layerswitcher-icons-check-seleccionado"),i>0?(this.stateSelectAll=!1,document.querySelector("#m-layerswitcher-addservices-selectall").classList.remove("m-layerswitcher-icons-check-seleccionado"),document.querySelector("#m-layerswitcher-addservices-selectall").classList.add("m-layerswitcher-icons-check")):0===i&&(this.stateSelectAll=!0,document.querySelector("#m-layerswitcher-addservices-selectall").classList.remove("m-layerswitcher-icons-check"),document.querySelector("#m-layerswitcher-addservices-selectall").classList.add("m-layerswitcher-icons-check-seleccionado"))}else M.utils.isNullOrEmpty(t.target)||"m-layerswitcher-addservices-selectall"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("m-layerswitcher-icons-check-seleccionado"),t.target.classList.add("m-layerswitcher-icons-check"),this.unSelect(),this.stateSelectAll=!1):(t.target.classList.remove("m-layerswitcher-icons-check"),t.target.classList.add("m-layerswitcher-icons-check-seleccionado"),this.select(),this.stateSelectAll=!0))}},{key:"registerCheckWFS",value:function(e){var t=e||window.event;if(!M.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-layerswitcher-addservices-wfs")){var i=document.querySelector(ri).querySelectorAll(".m-check-layerswitcher-addservices-wfs.m-layerswitcher-icons-check").length;i+=t.target.classList.contains("m-layerswitcher-icons-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("m-layerswitcher-icons-check"),t.target.classList.toggle("m-layerswitcher-icons-check-seleccionado"),i>0?(this.stateSelectAll=!1,document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.remove("m-layerswitcher-icons-check-seleccionado"),document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.add("m-layerswitcher-icons-check")):0===i&&(this.stateSelectAll=!0,document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.remove("m-layerswitcher-icons-check"),document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.add("m-layerswitcher-icons-check-seleccionado"))}else M.utils.isNullOrEmpty(t.target)||"m-layerswitcher-addservices-selectall-wfs"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("m-layerswitcher-icons-check-seleccionado"),t.target.classList.add("m-layerswitcher-icons-check"),this.unSelectWFS(),this.stateSelectAll=!1):(t.target.classList.remove("m-layerswitcher-icons-check"),t.target.classList.add("m-layerswitcher-icons-check-seleccionado"),this.selectWFS(),this.stateSelectAll=!0))}},{key:"registerCheckFromName",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-layerswitcher-addservices").click()}},{key:"registerCheckFromNameWFS",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-layerswitcher-addservices-wfs").click()}},{key:"addLayers",value:function(e){var t=this;e.preventDefault();var i=[],r=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-all .m-layerswitcher-icons-check-seleccionado"),n=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check-seleccionado");if(0===r.length&&0===n.length)M.dialog.error(kt("exception.select_layer"),void 0,this.order);else{for(var a=0;a<r.length;a+=1)for(var s=function(e){var n=t.capabilities[e].name;if(r[a].id===n||r[a].name===n){var s=parseInt(t.serviceCapabilities.MaxWidth,10),o=!Number.isNaN(s)&&s<4096,l=void 0!==t.serviceCapabilities.Title&&t.serviceCapabilities.Title.toLowerCase().indexOf("idecanarias")>-1;(t.capabilities[e].url.indexOf("//ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx")>-1||l)&&(t.capabilities[e].version="1.1.1"),t.capabilities[e].tiled="WMTS"===t.capabilities[e].type||o||l,t.capabilities[e].options.origen=t.capabilities[e].type;var c=t.capabilities[e].getLegendURL(),d=t.capabilities[e].capabilitiesMetadata;if((c.indexOf("GetLegendGraphic")>-1||c.indexOf("assets/img/legend-default.png")>-1)&&void 0!==d&&d.style.length>0){if(void 0!==d.style[0].LegendURL&&d.style[0].LegendURL.length>0){var u=d.style[0].LegendURL[0].OnlineResource;null!=u&&t.capabilities[e].setLegendURL(u)}"WMTS"===t.capabilities[e].type&&void 0!==d.style&&d.style.length>0&&d.style.forEach((function(i){if(!0===i.isDefault&&void 0!==i.LegendURL&&i.LegendURL.length>0){var r=i.LegendURL[0].href;t.capabilities[e].setLegendURL(r)}}))}i.push(t.capabilities[e])}},o=0;o<this.capabilities.length;o+=1)s(o);if(n.length>0){var l=[],c=document.querySelector(ii).value.trim().split("?")[0];n.forEach((function(e){var t=e.id.split(":");if("m-layerswitcher-addservices-selectall-wfs"!==t[0]){var i=t[0],r=t[1],n={url:c,legend:r,extact:!0};M.utils.isUndefined(r)?n.name=i:(n.name=r,n.namespace=i),l.push(new M.layer.WFS(n))}})),this.map_.addLayers(l)}i.reverse();var d=this.useAttributions_?this.addAttributions(i):i;this.map_.addLayers(d),document.querySelector("div.m-dialog.info div.m-button > button").click()}}},{key:"addAttributions",value:function(e){return e.map((function(e){var t=e,i=t.capabilitiesMetadata.attribution;if(void 0!==i){var r=i.Title,n=i.OnlineResource,a=i.ProviderName,s=i.ProviderSite;return t.attribution={name:r||a,url:n||s,nameLayer:t.name,id:window.crypto.randomUUID()},t}return t}))}},{key:"unSelect",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-all tbody span.m-layerswitcher-icons-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check-seleccionado"),e[t].classList.add("m-layerswitcher-icons-check")}},{key:"select",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-all tbody span"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check"),e[t].classList.add("m-layerswitcher-icons-check-seleccionado")}},{key:"unSelectWFS",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check-seleccionado"),e[t].classList.add("m-layerswitcher-icons-check")}},{key:"selectWFS",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check"),e[t].classList.add("m-layerswitcher-icons-check-seleccionado")}},{key:"loadSuggestion",value:function(e){var t=e.target.getAttribute("data-link");try{var i=e.target.parentElement.parentElement.parentElement,r=i.querySelector(".m-layerswitcher-suggestion-caret").innerText;this.filterName=r,"tbody"===i.localName&&(this.filterName="none")}catch(e){}document.querySelector(ii).value=t,this.readCapabilities(e)}},{key:"checkUrls",value:function(e,t){return e===t||e.indexOf(t)>-1||t.indexOf(e)>-1}},{key:"printLayerModal",value:function(e,t,i){var r=this,n=M.template.compileSync(Bt.a,{jsonp:!0,parseToHtml:!1,vars:{type:t,isMVT:"mvt"===t,layers:i,translations:{add_btn:kt("add_btn"),legend:kt("legend"),name:kt("name"),data_layer:kt("data_layer"),layers:kt("layers"),addAllLayers:kt("addAllLayers"),add_service:kt("add_service"),separatedby:kt("separatedby"),placeHolderLegend:kt("placeHolderLegend")}}});if(document.querySelector(ni).outerHTML=n,"mvt"===t||"kml"===t){var a=document.querySelector("#m-layerswitcher-addservices-selectall");if(!M.utils.isNullOrEmpty(a)){a.addEventListener("click",(function(e){return r.registerCheck(e)}));for(var s=document.querySelectorAll("span.m-check-layerswitcher-addservices"),o=0;o<s.length;o+=1)s[o].addEventListener("click",(function(e){return r.registerCheck(e)}))}}document.querySelector("#m-layerswitcher-layer-button").addEventListener("click",(function(){var i=Math.floor(9e3*Math.random())+1e3,n=document.querySelector("#m-layerswitcher-layer-name");n=M.utils.isNullOrEmpty(n)?"layer_".concat(i):n.value||"layer_".concat(i);var a=document.querySelector("#m-layerswitcher-layer-legend").value||"layer_".concat(i),s=document.querySelector("#m-layerswitcher-layer-matrixset");if(M.utils.isNullOrEmpty(s)||(s=s.value||"EPSG:3857"),"osm"===t)r.map_.addLayers(new M.layer.OSM({name:n,legend:a,transparent:!0,url:e,matrixSet:s}));else if("geojson"===t)r.map_.addLayers(new M.layer.GeoJSON({extract:!0,name:n,legend:a,url:e}));else if("tms"===t)r.map_.addLayers(new M.layer.TMS({name:n,legend:a,url:e,projection:s}));else if("xyz"===t)r.map_.addLayers(new M.layer.XYZ({name:n,legend:a,url:e,projection:s}));else if("mvt"===t){var o=document.querySelectorAll("#m-layerswitcher-addservices-results .m-layerswitcher-icons-check-seleccionado"),l=[];o.forEach((function(e){l.push(e.id)}));var c=document.querySelector("#m-layerswitcher-layer-name");M.utils.isNullOrEmpty(c)||-1!==c.value.indexOf("layer_")||(l=c.value.split(","));var d={name:n,legend:a,url:e,projection:s,extract:!0};M.utils.isNullOrEmpty(l)||(d.layers=l),r.map_.addLayers(new M.layer.MVT(d))}else if("kml"===t){var u=document.querySelectorAll("#m-layerswitcher-addservices-results .m-layerswitcher-icons-check-seleccionado"),h=[];u.forEach((function(e){h.push(e.id)}));var p={name:n,legend:a,url:e,extract:!0};M.utils.isNullOrEmpty(h)||(p.layers=h),r.map_.addLayers(new M.layer.KML(p))}document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))})),this.removeLoading()}},{key:"printOGCModal",value:function(e,t,i,r,n,a,s){var o=this,l=e.trim();if(M.utils.isUrl(l)){document.querySelector(ii).value=e;var c="".concat(l.endsWith("/")?l:"".concat(l,"/"),"collections?f=json");M.proxy(this.useProxy),M.remote.get(c).then((function(c){var d=JSON.parse(c.text).collections;M.utils.isNullOrEmpty(n)&&(n=void 0,a=void 0,s=void 0);var u=M.template.compileSync(Ft.a,{jsonp:!0,parseToHtml:!1,vars:{layers:d,selectedLayer:t,limit:i,bbox:r,summary:n,filterByID:a,filterByOtherFilters:s,prevID:void 0,translations:{select_service:kt("select_service"),amount_results:kt("amount_results"),amount_results_2:kt("amount_results_2"),bbox_select:kt("bbox-select"),other_filters:kt("other_filters"),id_filter:kt("id_filter"),warning:kt("warning"),add_btn:kt("add_btn"),custom_query_btn:kt("custom_query_btn"),filters:kt("filters"),check_results:kt("check_results")}}});o.removeLoading(),document.querySelector("#m-layerswitcher-ogcCContainer").outerHTML=u;var h=document.querySelector('input[name="m-layerswitcher-ogc-filter"][value="id"]'),p=document.querySelector('input[name="m-layerswitcher-ogc-filter"][value="others"]');o.setOnClickRadioBtn(h,p),o.setOnChanges(n),o.setOnClickCloseBtn(),o.setOnClickersFiltersButtons(n,l,h,p,d,e,a,s)})).catch((function(e){l="",M.dialog.error(kt("exception.error_ogc"),void 0,o.order)})),M.proxy(this.statusProxy)}}},{key:"setOnClickRadioBtn",value:function(e,t){e.addEventListener("click",(function(){document.querySelector("#m-layerswitcher-ogc-other-filters").style.display="none",document.querySelector("#m-layerswitcher-ogc-filter-id").style.display="block",document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),t.addEventListener("click",(function(){document.querySelector("#m-layerswitcher-ogc-other-filters").style.display="block",document.querySelector("#m-layerswitcher-ogc-filter-id").style.display="none",document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}))}},{key:"setOnChanges",value:function(e){document.querySelector("#m-layerswitcher-ogc-search-form-ID").addEventListener("change",(function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),document.querySelector("#m-layerswitcher-ogc-limit-items").addEventListener("change",(function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),document.querySelector("#m-layerswitcher-ogc-search-bbox").addEventListener("change",(function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),document.querySelector("#m-layerswitcher-ogc-vectors-select").addEventListener("change",(function(){var e=document.querySelector("#m-layerswitcher-ogc-summary");null!==e&&e.remove(),document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}))}},{key:"setOnClickCloseBtn",value:function(){var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=kt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.addEventListener("click",(function(){try{document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))}catch(e){}}))}},{key:"loadOGCAPIFeaturesLayer",value:function(e){var t=new M.layer.OGCAPIFeatures(e);this.map_.addLayers(t),t.setZIndex(t.getZIndex()+8)}},{key:"setOnClickersFiltersButtons",value:function(e,t,i,r,n,a,s,o){var l,c,d,u=this,h=document.querySelector("#m-layerswitcher-ogc-vectors-select").value,p=document.querySelector("#m-layerswitcher-ogcCContainer #m-layerswitcher-ogc-select-button"),m=document.querySelector("#m-layerswitcher-ogcCContainer #m-layerswitcher-ogc-check-button"),y=document.querySelector("#m-layerswitcher-ogc-custom-query-button");p.addEventListener("click",(function(){h===kt("select_service")?M.dialog.error(kt("no_results"),void 0,u.order):(d=u.getProperties(h,e),u.loadOGCAPIFeaturesLayer(d),document.querySelector("div.m-dialog.info div.m-button > button").click())})),m.addEventListener("click",(function(){h===kt("select_service")?M.dialog.error(kt("no_results"),void 0,u.order):(d=u.getProperties(h,e),u.getNumberFeaturesOGCAPIFeaturesLayer(d).then((function(e){var t,i;1===e?(t=kt("results_1_singular"),i=kt("results_2_singular")):(t=kt("results_1_plural"),i=kt("results_2_plural"));var r=document.querySelector("#m-layerswitcher-ogc-check-results");r.style.display="block",r.innerHTML="".concat(t).concat(e).concat(i)})).then((function(){document.querySelector("#m-layerswitcher-ogc-check-results").focus()})),M.proxy(u.statusProxy))})),y.addEventListener("click",(function(){var d,p=document.querySelector(".m-content").innerHTML;h=document.querySelector("#m-layerswitcher-ogc-vectors-select").value;var m=document.querySelector("#m-layerswitcher-ogc-limit-items").value,y=document.querySelector("#m-layerswitcher-ogc-search-bbox").checked,f="".concat(t,"/collections/").concat(h,"/queryables");M.proxy(u.useProxy),M.remote.get(f).then((function(t){try{var f=JSON.parse(t.text).properties;(d=Object.values(f)).forEach((function(t){if(void 0!==t.title){var i=t.type.toLowerCase();"bool"===i||"boolean"===i?t.bool=!0:"timestamp"===i||"date"===i?t.date=!0:"int4"===i||"int"===i||"number"===i||"numeric"===i||i.includes("numeric")?t.number=!0:t.text=!0}void 0!==e&&(t.title in e&&(t.value=e[t.title]),document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML="")}))}catch(e){}var v=document.querySelector(ii).value,g=M.template.compileSync(Ut.a,{jsonp:!0,parseToHtml:!1,vars:{filtersList:d,summary:e,translations:{other_filters:kt("other_filters"),id_filter:kt("id_filter"),filters:kt("filters"),custom_query_warning:kt("custom_query_warning")}}}),b="".concat(kt("custom_query_btn"));M.dialog.remove(Ft.a,void 0,u.order),M.dialog.info(g,b,u.order);var w=document.createElement("button"),_=document.createElement("button");setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=kt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.style.display="none";var t=document.querySelector("div.m-dialog.info div.m-button");_.textContent=kt("close"),_.style.width="75px",_.style.backgroundColor="#71a7d3",_.style.marginLeft="4px",_.setAttribute("data-link",v),_.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(_,t.firstChild),w.textContent=kt("apply_btn"),w.style.width="75px",w.style.backgroundColor="#71a7d3",w.setAttribute("data-link",v),w.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(w,t.firstChild)}),10),w.addEventListener("click",(function(){var e=!1,t=!1;i.checked?(e=!0,t=!1,c=document.querySelectorAll("#m-layerswitcher-ogc-search-form-id input")):r.checked&&(e=!1,t=!0,c=document.querySelectorAll("#m-layerswitcher-ogc-search-formothers input"));var s=u.getFiltersDict(c);document.querySelector(".m-content").innerHTML=p,l=n.findIndex((function(e){return e.id===h})),M.utils.isNullOrEmpty(s)||0===Object.keys(s).length?u.printOGCModal(a,l,m,y):u.printOGCModal(a,l,m,y,s,e,t)})),_.addEventListener("click",(function(){document.querySelector(".m-content").innerHTML=p,l=n.findIndex((function(e){return e.id===h})),u.printOGCModal(a,l,m,y,e,s,o)}))})).catch((function(e){M.dialog.error(kt("no_results"),void 0,u.order)})),M.proxy(u.statusProxy)}))}},{key:"getProperties",value:function(e,t){var i=document.querySelector(ii).value,r=document.querySelector("#m-layerswitcher-ogc-vectors-select").selectedOptions[0].text;e=document.querySelector("#m-layerswitcher-ogc-vectors-select").value;var n,a=document.querySelector("#m-layerswitcher-ogc-limit-items").value,s=document.querySelector("#m-layerswitcher-ogc-search-bbox").checked,o=a;if(s){var l=this.map_.getBbox(),c=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[l.x.min,l.y.min]),d=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[l.x.max,l.y.max]);n="".concat(c[0],";").concat(c[1],";").concat(d[0],";").concat(d[1])}var u={};return u.url="".concat(i,"/collections/"),u.name=e,u.legend=r,u.limit=o,u.extract=!0,this.useAttributions_&&(u.attribution={url:"https://www.idee.es/",id:window.crypto.randomUUID(),name:u.legend,nameLayer:u.name}),s&&(u.bbox=n),!0===document.querySelector("#m-layerswitcher-ogc-filter-id-input").checked?u.id=document.querySelector("#m-layerswitcher-ogc-search-form-ID").value:void 0!==t&&(u.conditional=t),u.format="json",u}},{key:"getFiltersDict",value:function(e){var t={},i={};e.forEach((function(e){var r=e.id.substring(e.id.indexOf("form-")+5);switch(e.type){case"checkbox":i[r]||(i[r]=[]),i[r].push(e);break;case"date":if(!M.utils.isNullOrEmpty(e.value)){var n=new Date(e.value);t[r]=n.toISOString().split("T")[0]}break;default:M.utils.isNullOrEmpty(e.value)||(t[r]=e.value)}})),Object.keys(i).forEach((function(e){var r=i[e].filter((function(e){return e.checked})).map((function(e){return e.value}));1===r.length&&(t[e]=r[0])}));var r=Object.keys(t),n=Object.values(t),a={};return r.forEach((function(e,t){a[e]=n[t]})),a}},{key:"getNumberFeaturesOGCAPIFeaturesLayer",value:function(e){var t,i=new M.layer.OGCAPIFeatures(e),r=this.getFeatureUrl(i);return M.proxy(this.useProxy),M.remote.get(r).then((function(e){return null!==(t=JSON.parse(e.text))?"Feature"===t.type?1:t.features.length:0}))}},{key:"destroy",value:function(){this.getImpl().destroy()}},{key:"getFeatureUrl",value:function(e){var t,i={};if(M.utils.isNullOrEmpty(e.name)||(e.url="".concat(e.url).concat(e.name,"/items/")),M.utils.isNullOrEmpty(e.format)||(i.f=e.format),M.utils.isNullOrEmpty(e.id)){if(e.url="".concat(e.url,"?"),M.utils.isNullOrEmpty(e.limit)||(i.limit=e.limit),M.utils.isNullOrEmpty(e.offset)||(i.offset=e.offset),M.utils.isNullOrEmpty(e.bbox)||(i.bbox=e.bbox),t=M.utils.addParameters(M.utils.addParameters(e.url,i),e.getFeatureVendor),!M.utils.isNullOrEmpty(e.conditional)){var r="";Object.keys(e.conditional).forEach((function(t){var i="&".concat(t,"=").concat(e.conditional[t],"&");r+=i})),i.conditional=r,t+=i.conditional}}else e.url="".concat(e.url).concat(e.id,"?"),t=M.utils.addParameters(M.utils.addParameters(e.url,i),e.getFeatureVendor);return t=t.replaceAll(" ","%20")}},{key:"addEventCODSI",value:function(){var e=this;this.codsiButton=document.querySelector(ti),this.codsiFilterButton=document.querySelector("#m-layerswitcher-addservices-codsi-filter-btn"),this.codsiSearchInput=document.querySelector("#m-layerswitcher-addservices-codsi-search-input"),this.codsiCleanButton=document.querySelector("#m-layerswitcher-addservices-codsi-clean-btn"),null!==this.codsiButton&&(this.codsiButton.addEventListener("click",(function(t){return e.showCODSI(t)})),this.codsiButton.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.showCODSI(t)})),this.codsiFilterButton.addEventListener("click",(function(t){e.loadCODSIResults(e.select_codsi)})),this.codsiFilterButton.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.loadCODSIResults(e.select_codsi)})),this.codsiSearchInput.addEventListener("keypress",(function(t){13===t.keyCode&&e.loadCODSIResults(e.select_codsi)})),this.codsiCleanButton.addEventListener("click",(function(t){e.codsiSearchInput.value="",e.loadCODSIResults(e.select_codsi)})))}},{key:"loadCODSIResults",value:function(e){var t=this,i=this.generateUrlCODSI(e);M.proxy(this.useProxy),M.remote.get(i).then((function(i){var r=JSON.parse(i.text),n=r.summary["@count"],a=t.getResultCODSI(r);t.renderCODSIResults(a),t.renderCODSIPagination(e,n)})).catch((function(e){M.dialog.error(kt("exception.codsi"),void 0,t.order)})),M.proxy(this.statusProxy)}},{key:"getResultCODSI",value:function(e){var t=this,i=[];return void 0!==e.metadata&&e.metadata.forEach((function(e){var r=t.getLinksCODSIResults(e);r.length>0&&i.push({title:e.title||e.defaultTitle,url:r[0].split("?")[0]})})),i}},{key:"generateUrlCODSI",value:function(e){var t=this.codsiSearchInput.value.trim(),i=1+9*(e-1),r=9*e,n="https://www.idee.es/csw-inspire-idee/srv/spa/q?_content_type=json&bucket=s101&facet.q=type%2Fservice&fast=index&from=*1&keyword=WMS%20or%20Web%20Map%20Service%20or%20WMTS%20or%20Web%20Map%20Tile%20Service%20or%20TMS%20or%20MVT%20or%20Features%20WFS&resultType=details&sortBy=title&sortOrder=asc&to=*2".split("*1").join("".concat(i)).split("*2").join("".concat(r));return""!==t&&(n+="&any=".concat(encodeURIComponent(t))),n}},{key:"getLinksCODSIResults",value:function(e){var t=this,i=[];return Array.isArray(e.link)?e.link.forEach((function(e){i=i.concat(t.formatLinksCODSIResults(e))})):i=i.concat(this.formatLinksCODSIResults(e.link)),i}},{key:"formatLinksCODSIResults",value:function(e){var t=[];return e.indexOf("||")>-1?t=e.split("||").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1})):e.indexOf("|")>-1&&(t=e.split("|").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1}))),t}},{key:"renderCODSIResults",value:function(e){var t=this;this.codsiResults=document.querySelector("#m-layerswitcher-addservices-codsi-results"),this.codsiResults.innerHTML="",e.length>0?e.map((function(e){return t.createElementCODSIResults(e)})).forEach((function(e){return t.codsiResults.appendChild(e)})):this.codsiResults.innerHTML='<div class="codsi-no-results">'.concat(kt("exception.codsi_no_results"),"</div>")}},{key:"createElementCODSIResults",value:function(e){var t=this,i=e.url,r=e.title,n=document.createElement("tr"),a=document.createElement("td"),s=document.createElement("span");return s.setAttribute("tabindex","0"),s.setAttribute("class","m-layerswitcher-codsi-result"),s.setAttribute("data-link",i),s.innerHTML=r,s.addEventListener("click",(function(e){document.querySelector(ii).value=i,t.filterName=void 0,t.readCapabilities(e)})),a.appendChild(s),n.appendChild(a),n}},{key:"paginationCODSI",value:function(){var e=this,t=document.querySelector("#m-layerswitcher-addservices-codsi-pagination"),i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("m-layerswitcher-addservices-pagination-btn"),i.id="nextCODSI",i.innerHTML="...",i.addEventListener("click",(function(i){oi.forEach((function(e,t){oi[t]=e+oi.length})),e.showButtonPaginationCODSI(t,oi)}));var r=document.createElement("button");r.setAttribute("type","button"),r.id="backCODSI",r.classList.add("m-layerswitcher-addservices-pagination-btn"),r.innerHTML="...",r.addEventListener("click",(function(i){oi.forEach((function(e,t){oi[t]=e-oi.length})),e.showButtonPaginationCODSI(t,oi)})),t.insertBefore(r,t.firstChild),t.appendChild(i),this.showButtonPaginationCODSI(t,oi)}},{key:"showButtonPaginationCODSI",value:function(e,t){var i=this,r=e.querySelectorAll("button");r.forEach((function(e,n){t.indexOf(n)>-1?r[n].style.display="inline-block":"nextCODSI"!==e.id&&"backCODSI"!==e.id&&(r[n].style.display="none"),n===i.select_codsi?r[n].setAttribute("disabled","disabled"):r[n].removeAttribute("disabled")})),t.indexOf(1)>-1?document.querySelector("#backCODSI").style.display="none":document.querySelector("#backCODSI").style.display="inline-block",t.indexOf(r.length-1)>-1?document.querySelector("#nextCODSI").style.display="none":document.querySelector("#nextCODSI").style.display="inline-block"}},{key:"renderCODSIPagination",value:function(e,t){var i=this;if(document.querySelector("#m-layerswitcher-addservices-codsi-pagination").innerHTML="",t>0){for(var r=Math.ceil(t/9),n="",a=1;a<=r;a+=1)n+=a===e?'<button type="button" tabindex="0" class="m-layerswitcher-addservices-pagination-btn" disabled>'.concat(a,"</button>"):'<button type="button" tabindex="0" class="m-layerswitcher-addservices-pagination-btn">'.concat(a,"</button>");document.querySelector("#m-layerswitcher-addservices-codsi-pagination").innerHTML=n,document.querySelectorAll("#m-layerswitcher-addservices-codsi-pagination button").forEach((function(e,t){e.addEventListener("click",(function(){i.select_codsi=t+1,i.loadCODSIResults(t+1)}))}))}this.paginationCODSI()}},{key:"showCODSI",value:function(){document.querySelector(ri).innerHTML="",document.querySelector(ni).innerHTML="",document.querySelector(ei).style.display="block",document.querySelector("#m-layerswitcher-addservices-suggestions").style.display="none",null!==document.querySelector("#m-layerswitcher-ogcCContainer")&&(document.querySelector("#m-layerswitcher-ogcCContainer").style.display="none"),this.loadCODSIResults(this.select_codsi)}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"equals",value:function(e){return e instanceof t}}])&&Xt(i.prototype,r),n&&Xt(i,n),Object.defineProperty(i,"prototype",{writable:!1}),t}(),ci=i(13);function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hi(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pi(r.key),r)}}function pi(e){var t=function(e,t){if("object"!=di(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==di(t)?t:String(t)}function mi(e,t,i){return t=yi(t),function(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],yi(e).constructor):t.apply(e,i))}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fi(e,t){return(fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vi={groups:[{name:"Cartografía",services:[{name:"Mapas",type:"WMTS",url:"https://www.ign.es/wmts/mapa-raster?"},{name:"Callejero ",type:"WMTS",url:"https://www.ign.es/wmts/ign-base?"},{name:"Primera edición MTN y Minutas de 1910-1970",type:"WMTS",url:"https://www.ign.es/wmts/primera-edicion-mtn?"},{name:"Planimetrías (1870 y 1950)",type:"WMS",url:"https://www.ign.es/wms/minutas-cartograficas?"},{name:"Planos de Madrid (1622 - 1960)",type:"WMTS",url:"https://www.ign.es/wmts/planos?"},{name:"Hojas kilométricas (Madrid - 1860)",type:"WMS",url:"https://www.ign.es/wms/hojas-kilometricas?"},{name:"Cuadrículas Mapa Topográfico Nacional",type:"WMS",url:"https://www.ign.es/wms-inspire/cuadriculas?"}]},{name:"Imágenes",services:[{name:"Ortofotos máxima actualidad PNOA",type:"WMTS",url:"https://www.ign.es/wmts/pnoa-ma?"},{name:"Ortofotos históricas y PNOA anual",type:"WMS",url:"https://www.ign.es/wms/pnoa-historico?"},{name:"Ortofotos provisionales PNOA",type:"WMS",url:"https://wms-pnoa.idee.es/pnoa-provisionales?"},{name:"Mosaicos de satélite",type:"WMS",url:"https://wms-satelites-historicos.idee.es/satelites-historicos?"},{name:"Fototeca (Consulta de fotogramas históricos y PNOA)",type:"WMS",url:"https://wms-fototeca.idee.es/fototeca?"}]},{name:"Información geográfica de referencia y temática",services:[{name:"Catastro ",type:"WMS",url:"http://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?"},{name:"Unidades administrativas",type:"WMS",url:" https://www.ign.es/wms-inspire/unidades-administrativas?"},{name:"Nombres geográficos (Nomenclátor Geográfico Básico NGBE)",type:"WMS",url:"https://www.ign.es/wms-inspire/ngbe?"},{name:"Redes de transporte",type:"WMS",url:"https://servicios.idee.es/wms-inspire/transportes?"},{name:"Hidrografía ",type:"WMS",url:"https://servicios.idee.es/wms-inspire/hidrografia?"},{name:"Direcciones y códigos postales",type:"WMS",url:"https://www.cartociudad.es/wms-inspire/direcciones-ccpp?"},{name:"Ocupación del suelo (Corine y SIOSE)",type:"WMTS",url:"https://servicios.idee.es/wmts/ocupacion-suelo?"},{name:"Ocupación del suelo Histórico (Corine y SIOSE)",type:"WMS",url:"https://servicios.idee.es/wms-inspire/ocupacion-suelo-historico?"},{name:"Copernicus Land Monitoring Service",type:"WMS",url:"https://servicios.idee.es/wms/copernicus-landservice-spain?"},{name:"Información sísmica (terremotos)",type:"WMS",url:"https://www.ign.es/wms-inspire/geofisica?"},{name:"Red de vigilancia volcánica",type:"WMS",url:"https://wms-volcanologia.ign.es/volcanologia?"},{name:"Redes geodésicas",type:"WMS",url:"https://www.ign.es/wms-inspire/redes-geodesicas?"}]},{name:"Modelos digitales de elevaciones",services:[{name:"Modelo Digital de Superficies (Sombreado superficies y consulta de elevaciones edificios y vegetación)",type:"WMTS",url:"https://wmts-mapa-lidar.idee.es/lidar?"},{name:"Modelo Digital del Terreno (Sombreado terreno y consulta de altitudes)",type:"WMTS",url:"https://servicios.idee.es/wmts/mdt?",white_list:["EL.ElevationGridCoverage"]},{name:"Curvas de nivel y puntos acotados",type:"WMS",url:"https://servicios.idee.es/wms-inspire/mdt?",white_list:["EL.ContourLine","EL.SpotElevation"]}]}]},gi=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ui(this,t),(e=mi(this,t)).map_=null,e.controls_=[],e.name_="layerswitcher",e.options=i,e.position_=i.position||"TR",e.collapsed_=!!M.utils.isUndefined(i.collapsed)||i.collapsed,e.collapsible_=!!M.utils.isUndefined(i.collapsible)||i.collapsible,e.tooltip_=i.tooltip||kt("tooltip"),e.isDraggable=!M.utils.isUndefined(i.isDraggable)&&i.isDraggable,e.isMoveLayers=i.isMoveLayers||!1,e.modeSelectLayers=M.utils.isUndefined(i.modeSelectLayers)?"eyes":i.modeSelectLayers,e.tools=M.utils.isUndefined(i.tools)?["transparency","legend","zoom","information","style","delete"]:i.tools,e.precharged=i.precharged||vi,e.displayLabel=!M.utils.isUndefined(i.displayLabel)&&i.displayLabel,e.metadata_=ci.metadata,e.http=!0,void 0===i.http||!1!==i.http&&"false"!==i.http||(e.http=!1),e.https=!0,void 0===i.https||!1!==i.https&&"false"!==i.https||(e.https=!1),e.showCatalog=i.showCatalog||!1,e.useProxy=!!M.utils.isUndefined(i.useProxy)||i.useProxy,e.statusProxy=M.useproxy,e.order=i.order>=-1?i.order:null,e.useAttributions=i.useAttributions||!1,e}var i,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fi(e,t)}(t,M.Plugin),i=t,n=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?wt:_t:M.language.getTranslation(e).layerswitcher}}],(r=[{key:"addTo",value:function(e){var t=this;this.map_=e;var i=new M.ui.Panel("Layerswitcher",{className:"m-plugin-layerswitcher",collapsed:this.collapsed_,collapsible:this.collapsible_,position:M.ui.position[this.position_],collapsedButtonClass:"m-layerswitcher-icons-layers",tooltip:this.tooltip_,order:this.order});this.panel_=i;var r=new li({isDraggable:this.isDraggable,modeSelectLayers:this.modeSelectLayers,tools:this.tools,collapsed:this.collapsed_,isMoveLayers:this.isMoveLayers,precharged:this.precharged,http:this.http,https:this.https,showCatalog:this.showCatalog,order:this.order,useProxy:this.useProxy,statusProxy:this.statusProxy,useAttributions:this.useAttributions,displayLabel:this.displayLabel});this.control_=r,this.controls_.push(this.control_),this.control_.on(M.evt.ADDED_TO_MAP,(function(){t.fire(M.evt.ADDED_TO_MAP)})),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_),r.addEventPanel(i)}},{key:"position",get:function(){return this.position_}},{key:"name",get:function(){return this.name_}},{key:"collapsed",get:function(){return this.panel_.isCollapsed()}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.tooltip_,"*").concat(this.isDraggable,"*").concat(this.isMoveLayers,"*").concat(this.modeSelectLayers,"*").concat(this.tools,"*").concat(this.http,"*").concat(this.https,"*").concat(this.showCatalog,"*").concat(this.useProxy,"*").concat(this.displayLabel)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.control_=null}},{key:"equals",value:function(e){return e instanceof t}}])&&hi(i.prototype,r),n&&hi(i,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.Layerswitcher=gi,window.M.control.LayerswitcherControl=li}]);
//# sourceMappingURL=layerswitcher-1.0.0.ol.min.js.map